{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizMate/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport Markdown from \"./Markdown\";\nimport \"./index.scss\";\nimport ego from \"../../../Image/ego.svg\";\nvar MESSAGE = {\n  NORMAL: \"normal\",\n  WARN: \"warn\",\n  ERROR: \"error\"\n};\n\nvar WizMate = /*#__PURE__*/function (_Component) {\n  _inherits(WizMate, _Component);\n\n  var _super = _createSuper(WizMate);\n\n  function WizMate(props) {\n    var _this;\n\n    _classCallCheck(this, WizMate);\n\n    _this = _super.call(this, props);\n\n    _this.onClickCharacter = function () {\n      _this.speak(_this.props.intl.formatMessage({\n        id: \"ID_WIZMATE_EGO_MSG\"\n      }));\n    };\n\n    _this.onClickMessage = function () {\n      _this.stop();\n    };\n\n    _this.state = {\n      message: null,\n      messageType: MESSAGE.NORMAL,\n      isSpeaking: false\n    };\n    return _this;\n  }\n\n  _createClass(WizMate, [{\n    key: \"speak\",\n    value: function speak(message) {\n      var _this2 = this;\n\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;\n      var messageType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : MESSAGE.NORMAL;\n\n      if (this.state.isSpeaking) {\n        this.stop(function () {\n          _this2.speak(message, duration, messageType);\n        });\n      } else {\n        this.setState({\n          message: message,\n          messageType: messageType,\n          isSpeaking: true\n        }, function () {\n          if (duration > 0) {\n            _this2.setStopTimer(duration);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message, duration) {\n      this.speak(message, duration, MESSAGE.WARN);\n    }\n  }, {\n    key: \"error\",\n    value: function error(message, duration) {\n      this.speak(message, duration, MESSAGE.ERROR);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      this.clearStopTimer();\n      this.setState({\n        isSpeaking: false\n      }, function () {\n        if (callback) {\n          callback();\n        }\n      });\n    }\n  }, {\n    key: \"setStopTimer\",\n    value: function setStopTimer(timeout) {\n      var _this3 = this;\n\n      this.clearStopTimer();\n      this.stopTimer = setTimeout(function () {\n        _this3.setState({\n          isSpeaking: false\n        });\n      }, timeout);\n    }\n  }, {\n    key: \"clearStopTimer\",\n    value: function clearStopTimer() {\n      if (this.stopTimer) {\n        clearTimeout(this.stopTimer);\n        this.stopTimer = undefined;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"wizmate wizmate-\".concat(this.state.isSpeaking ? \"speaking\" : \"idle\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wizmate_character\",\n        onClick: this.onClickCharacter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: ego,\n        alt: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"wizmate_message wizmate_message-\".concat(this.state.messageType),\n        onClick: this.onClickMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Markdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, this.state.message)));\n    }\n  }]);\n\n  return WizMate;\n}(Component);\n\nexport default injectIntl(WizMate);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizMate/index.js"],"names":["React","Component","injectIntl","Markdown","MESSAGE","NORMAL","WARN","ERROR","WizMate","props","onClickCharacter","speak","intl","formatMessage","id","onClickMessage","stop","state","message","messageType","isSpeaking","duration","setState","setStopTimer","callback","clearStopTimer","timeout","stopTimer","setTimeout","clearTimeout","undefined","ego"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAO,cAAP;;AAIA,IAAMC,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,QADM;AAEdC,EAAAA,IAAI,EAAE,MAFQ;AAGdC,EAAAA,KAAK,EAAE;AAHO,CAAhB;;IAKMC,O;;;;;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UASnBC,gBATmB,GASA,YAAM;AACvB,YAAKC,KAAL,CAAW,MAAKF,KAAL,CAAWG,IAAX,CAAgBC,aAAhB,CAA8B;AAAEC,QAAAA,EAAE,EAAE;AAAN,OAA9B,CAAX;AACD,KAXkB;;AAAA,UAYnBC,cAZmB,GAYF,YAAM;AACrB,YAAKC,IAAL;AACD,KAdkB;;AAEjB,UAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,IADE;AAEXC,MAAAA,WAAW,EAAEf,OAAO,CAACC,MAFV;AAGXe,MAAAA,UAAU,EAAE;AAHD,KAAb;AAFiB;AAOlB;;;;WASD,eAAMF,OAAN,EAA8D;AAAA;;AAAA,UAA/CG,QAA+C,uEAApC,IAAoC;AAAA,UAA9BF,WAA8B,uEAAhBf,OAAO,CAACC,MAAQ;;AAC5D,UAAG,KAAKY,KAAL,CAAWG,UAAd,EAA0B;AACxB,aAAKJ,IAAL,CAAU,YAAM;AACd,UAAA,MAAI,CAACL,KAAL,CAAWO,OAAX,EAAoBG,QAApB,EAA8BF,WAA9B;AACD,SAFD;AAGD,OAJD,MAIO;AACL,aAAKG,QAAL,CAAc;AAAEJ,UAAAA,OAAO,EAAPA,OAAF;AAAWC,UAAAA,WAAW,EAAXA,WAAX;AAAwBC,UAAAA,UAAU,EAAE;AAApC,SAAd,EAA0D,YAAM;AAC9D,cAAGC,QAAQ,GAAG,CAAd,EAAiB;AACf,YAAA,MAAI,CAACE,YAAL,CAAkBF,QAAlB;AACD;AACF,SAJD;AAKD;AACF;;;WACD,cAAKH,OAAL,EAAcG,QAAd,EAAwB;AACtB,WAAKV,KAAL,CAAWO,OAAX,EAAoBG,QAApB,EAA8BjB,OAAO,CAACE,IAAtC;AACD;;;WACD,eAAMY,OAAN,EAAeG,QAAf,EAAyB;AACvB,WAAKV,KAAL,CAAWO,OAAX,EAAoBG,QAApB,EAA8BjB,OAAO,CAACG,KAAtC;AACD;;;WACD,cAAKiB,QAAL,EAAe;AACb,WAAKC,cAAL;AACA,WAAKH,QAAL,CAAc;AAAEF,QAAAA,UAAU,EAAE;AAAd,OAAd,EAAqC,YAAM;AACzC,YAAGI,QAAH,EAAa;AACXA,UAAAA,QAAQ;AACT;AACF,OAJD;AAKD;;;WAED,sBAAaE,OAAb,EAAsB;AAAA;;AACpB,WAAKD,cAAL;AACA,WAAKE,SAAL,GAAiBC,UAAU,CAAC,YAAM;AAChC,QAAA,MAAI,CAACN,QAAL,CAAc;AAAEF,UAAAA,UAAU,EAAE;AAAd,SAAd;AACD,OAF0B,EAExBM,OAFwB,CAA3B;AAGD;;;WACD,0BAAiB;AACf,UAAG,KAAKC,SAAR,EAAmB;AACjBE,QAAAA,YAAY,CAAC,KAAKF,SAAN,CAAZ;AACA,aAAKA,SAAL,GAAiBG,SAAjB;AACD;AACF;;;WAED,kBAAS;AACP,aACE;AAAK,QAAA,SAAS,4BAAqB,KAAKb,KAAL,CAAWG,UAAX,GAAwB,UAAxB,GAAqC,MAA1D,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAmC,QAAA,OAAO,EAAE,KAAKV,gBAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAEqB,GAAV;AAAe,QAAA,GAAG,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE;AACE,QAAA,SAAS,4CAAqC,KAAKd,KAAL,CAAWE,WAAhD,CADX;AAEE,QAAA,OAAO,EAAE,KAAKJ,cAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKE,KAAL,CAAWC,OADd,CAJF,CAJF,CADF;AAeD;;;;EA1EmBjB,S;;AA6EtB,eAAeC,UAAU,CAACM,OAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport Markdown from \"./Markdown\"\nimport \"./index.scss\";\n\nimport ego from \"../../../Image/ego.svg\"\n\nconst MESSAGE = {\n  NORMAL: \"normal\",\n  WARN: \"warn\",\n  ERROR: \"error\"\n}\nclass WizMate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: null,\n      messageType: MESSAGE.NORMAL,\n      isSpeaking: false,\n    };\n  }\n\n  onClickCharacter = () => {\n    this.speak(this.props.intl.formatMessage({ id: \"ID_WIZMATE_EGO_MSG\" }));\n  }\n  onClickMessage = () => {\n    this.stop();\n  }\n\n  speak(message, duration = 5000, messageType = MESSAGE.NORMAL) {\n    if(this.state.isSpeaking) {\n      this.stop(() => {\n        this.speak(message, duration, messageType);\n      })\n    } else {\n      this.setState({ message, messageType, isSpeaking: true }, () => {\n        if(duration > 0) {\n          this.setStopTimer(duration);\n        }\n      });\n    }\n  }\n  warn(message, duration) {\n    this.speak(message, duration, MESSAGE.WARN);\n  }\n  error(message, duration) {\n    this.speak(message, duration, MESSAGE.ERROR);\n  }\n  stop(callback) {\n    this.clearStopTimer();\n    this.setState({ isSpeaking: false }, () => {\n      if(callback) {\n        callback();\n      }\n    });\n  }\n\n  setStopTimer(timeout) {\n    this.clearStopTimer();\n    this.stopTimer = setTimeout(() => {\n      this.setState({ isSpeaking: false });\n    }, timeout);\n  }\n  clearStopTimer() {\n    if(this.stopTimer) {\n      clearTimeout(this.stopTimer);\n      this.stopTimer = undefined;\n    }\n  }\n\n  render() {\n    return (\n      <div className={`wizmate wizmate-${this.state.isSpeaking ? \"speaking\" : \"idle\"}`}>\n        <div className=\"wizmate_character\" onClick={this.onClickCharacter}>\n          <img src={ego} alt=\"character\" />\n        </div>\n        <div\n          className={`wizmate_message wizmate_message-${this.state.messageType}`}\n          onClick={this.onClickMessage}\n        >\n          <Markdown>\n            {this.state.message}\n          </Markdown>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(WizMate);\n"]},"metadata":{},"sourceType":"module"}