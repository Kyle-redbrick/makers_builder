{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/OCP2/Subpage/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport Print from \"../../../Common/Component/OCPCertification\";\nimport * as action from \"../../../Common/Store/Reducer/UserInfo\";\nimport lv1Thumb from \"../../../Image/thumb_lv1.png\";\nimport lv2Thumb from \"../../../Image/thumb_lv2.png\";\nimport lv3Thumb from \"../../../Image/thumb_lv3.png\";\nimport lv1desc from \"../../../Image/dsc_lv1.png\";\nimport lv2desc from \"../../../Image/dsc_lv2.png\";\nimport lv3desc from \"../../../Image/dsc_lv3.png\";\nimport SignUp from \"../../../Common/Component/SignUp\";\nimport { resetOcpToken } from \"../../../Common/Util/OcpToken\";\nimport { detectIE } from \"../../../Common/Util/detectBrowser\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.getOCPList();\n\n            case 2:\n              _context.next = 4;\n              return _this.getMyOcp();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.componentDidUpdate = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps, prevState) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(_this.props.userinfo.email && !prevProps.userinfo.email)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 3;\n                return _this.getMyOcp();\n\n              case 3:\n                _context2.next = 8;\n                break;\n\n              case 5:\n                if (!(!_this.props.userinfo.email && prevProps.userinfo.email)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 8;\n                return _this.getMyOcp();\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.getOCPList = function () {\n      var arr = [];\n\n      for (var i = 1; i <= 10; i++) {\n        var title = require(\"../../Builder/Component/OCP2/template/\".concat(_this.type, \"/\").concat(_this.grade, \"/\").concat(i)).data.title;\n\n        var img = require(\"../../Builder/Component/OCP2/template/\".concat(_this.type, \"/\").concat(_this.grade, \"/\").concat(i)).data.image;\n\n        arr.push({\n          title: title,\n          level: i,\n          img: img\n        });\n      }\n\n      _this.setState({\n        OCP: arr\n      });\n    };\n\n    _this.getMyOcp = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, json, currentData;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(_this.props.userinfo.email || _this.guest)) {\n                _context3.next = 10;\n                break;\n              }\n\n              _context3.next = 3;\n              return request.getMyOcp2(_objectSpread({}, _this.props.userinfo.email ? {\n                email: _this.props.userinfo.email\n              } : {\n                guestId: _this.guest && _this.guest.id\n              }, {\n                type: _this.type\n              }));\n\n            case 3:\n              res = _context3.sent;\n              _context3.next = 6;\n              return res.json();\n\n            case 6:\n              json = _context3.sent;\n\n              if (json) {\n                currentData = json.find(function (element) {\n                  return element.grade === _this.grade;\n                });\n\n                _this.setState({\n                  myLevel: currentData ? currentData.level : 0\n                });\n              } else {\n                _this.setState({\n                  myLevel: 0\n                });\n              }\n\n              _context3.next = 11;\n              break;\n\n            case 10:\n              _this.setState({\n                myLevel: 0\n              });\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.onClickItem = function (level) {\n      if (_this.isIE) {\n        showPopUp(React.createElement(Popup.TwoButton, {\n          title: \"\\uC774\\uC6A9\\uC548\\uB0B4\",\n          subtitle: \"\\uBCF8 \\uD398\\uC774\\uC9C0\\uB294 \\uD06C\\uB86C\\uC5D0\\uC11C\\uB9CC \\uC815\\uC0C1 \\uB3D9\\uC791\\uD569\\uB2C8\\uB2E4\",\n          confirmButtonName: \"\\uD06C\\uB86C \\uC124\\uCE58\\uD558\\uAE30\",\n          cancelButtonName: \"\\uCDE8\\uC18C\",\n          confirmAction: function confirmAction() {\n            window.open(\"https://www.google.com/intl/ko/chrome/\", \"_blank\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n        return;\n      }\n\n      var myLevel = _this.state.myLevel; // if (window.screen.width <= 1080) {\n      //   showPopUp(\n      //     <Popup.OneButton\n      //       title={this.props.intl.formatMessage({\n      //         id: \"ID_LEARN_POPUP_MOBILE_TITLE\"\n      //       })}\n      //       buttonName={this.props.intl.formatMessage({\n      //         id: \"ID_LEARN_POPUP_MOBILE_BUTTON\"\n      //       })}\n      //     />,\n      //     { darkmode: true, mobileFullscreen: true }\n      //   );\n      //   return;\n      // }\n      // let builder;\n\n      if (_this.type === \"block\") {\n        window.open(\"/ocp2/block/\".concat(_this.grade, \"/\").concat(level), \"_blank\");\n      } else {\n        window.open(\"/ocp2/js/\".concat(_this.type, \"/\").concat(_this.grade, \"/\").concat(level), \"_blank\");\n      } // builder.focus();\n\n\n      if (level <= myLevel + 1) {\n        window.open(\"/ocp/\".concat(_this.grade, \"/\").concat(level), \"_blank\"); // builder.focus();\n      } else {\n        showPopUp(React.createElement(Popup.OneButton, {\n          title: _this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE\"\n          }),\n          buttonName: _this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE_BUTTON\"\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n      }\n    };\n\n    _this.handleReset = function () {\n      showPopUp(React.createElement(Popup.TwoButton, {\n        title: \"\\uBBF8\\uC158 \\uC0C8\\uB85C \\uC2DC\\uC791\\uD558\\uAE30\",\n        subtitle: \"\\uC644\\uC218\\uB41C \\uBBF8\\uC158\\uC774 \\uBAA8\\uB450 \\uCD08\\uAE30\\uD654\\uB418\\uBA70,\\n\\uCD08\\uAE30\\uD654 \\uD6C4\\uC5D0\\uB294 \\uBCF5\\uAD6C\\uAC00 \\uBD88\\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\\n\\uCC98\\uC74C\\uBD80\\uD130 \\uB2E4\\uC2DC \\uC2DC\\uC791\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n        cancelButtonName: \"\\uC544\\uB2C8\\uC694\",\n        confirmButtonName: \"\\uC0C8\\uB85C \\uC2DC\\uC791\",\n        confirmAction: function confirmAction() {\n          resetOcpToken();\n          window.location.reload();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), {\n        darkmode: true,\n        dismissButton: false\n      });\n    };\n\n    _this.handleCertification = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var name, organization, res, guest, callback;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(_this.state.myLevel < 10)) {\n                _context4.next = 3;\n                break;\n              }\n\n              showPopUp(React.createElement(Popup.OneButton, {\n                title: \"\\uC54C\\uB9BC\",\n                subtitle: \"10\\uB2E8\\uACC4\\uAE4C\\uC9C0 \\uC644\\uB8CC\\uD574\\uC8FC\\uC138\\uC694.\",\n                buttonName: \"\\uD655\\uC778\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 227\n                },\n                __self: this\n              }), {\n                darkmode: true\n              });\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              if (!_this.props.userinfo.email) {\n                _context4.next = 7;\n                break;\n              }\n\n              if (_this.props.userinfo.organization) {\n                name = _this.props.userinfo.name;\n                organization = _this.props.userinfo.organization;\n              } else {\n                showPopUp(React.createElement(Popup.OneInput, {\n                  title: \"\\uD559\\uAD50\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                  buttonName: \"\\uD655\\uC778\",\n                  inputLimit: 10,\n                  buttonAction: function buttonAction(org) {\n                    return callback(org);\n                  },\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 243\n                  },\n                  __self: this\n                }), {\n                  dismissOverlay: true,\n                  darkmode: false\n                });\n              }\n\n              _context4.next = 14;\n              break;\n\n            case 7:\n              _context4.next = 9;\n              return request.getOcpUser2({\n                guestId: _this.guest && _this.guest.id\n              });\n\n            case 9:\n              res = _context4.sent;\n              _context4.next = 12;\n              return res.json();\n\n            case 12:\n              guest = _context4.sent;\n\n              if (guest) {\n                if (!(guest.name && guest.organization)) {\n                  showPopUp(React.createElement(Popup.TwoInput, {\n                    title: \"\\uD559\\uAD50\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                    buttonName: \"\\uD655\\uC778\",\n                    inputTitle1: \"\\uC774\\uB984\",\n                    inputTitle2: \"\\uD559\\uAD50\",\n                    inputLimit1: 4,\n                    inputLimit2: 10,\n                    buttonAction: function buttonAction(org, name) {\n                      return callback(org, name);\n                    },\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 260\n                    },\n                    __self: this\n                  }), {\n                    dismissOverlay: true,\n                    darkmode: false\n                  });\n                } else {\n                  name = guest.name;\n                  organization = guest.organization;\n                }\n              }\n\n            case 14:\n              if (name && organization) {\n                showPopUp(React.createElement(Print, {\n                  organization: organization.substring(0, 10),\n                  grade: _this.grade,\n                  type: _this.type // name={name.substring(0, 4)}\n                  ,\n                  name: name,\n                  callback: _this.printCallback,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 280\n                  },\n                  __self: this\n                }));\n              }\n\n              callback = function callback(org) {\n                var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.props.userinfo.name;\n                showPopUp(React.createElement(Print, {\n                  organization: org,\n                  grade: _this.grade,\n                  type: _this.type,\n                  name: name,\n                  callback: _this.printCallback,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 292\n                  },\n                  __self: this\n                }));\n                request.updateOcpUser2({\n                  guestId: _this.guest && _this.guest.id,\n                  email: _this.props.userinfo.email,\n                  name: name,\n                  organization: org\n                });\n\n                _this.props.updateUserInfo();\n              };\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    _this.checkFocus = function () {\n      _this.guest = localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"));\n      window.addEventListener(\"focus\", function () {\n        _this.getMyOcp();\n      });\n    };\n\n    _this.handleSignup = function () {\n      showPopUp(React.createElement(SignUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), {\n        mobileFullscreen: true,\n        darkmode: true\n      });\n    };\n\n    _this.printCallback = function () {\n      request.updateMyOcpPrint2(_this.props.userinfo.email ? {\n        email: _this.props.userinfo.email,\n        grade: _this.grade,\n        type: _this.type\n      } : {\n        guestId: _this.guest && _this.guest.id,\n        grade: _this.grade,\n        type: _this.type\n      });\n    };\n\n    _this.state = {\n      OCP: [],\n      myLevel: undefined\n    };\n    _this.guest = localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"));\n    _this.grade = _this.props.match.params.grade;\n    _this.type = _this.props.match.params.gametype;\n    _this.info = {\n      block: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/22511b0f-f64f-4391-b241-951cf9e69a6e.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      },\n      game: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/22511b0f-f64f-4391-b241-951cf9e69a6e.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      },\n      escape: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/364d12bd-2af9-42e1-8eec-2005fbb063fa.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      }\n    };\n    _this.isIE = detectIE();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          OCP = _this$state.OCP,\n          myLevel = _this$state.myLevel;\n      var onClickItem = this.onClickItem,\n          grade = this.grade,\n          checkFocus = this.checkFocus,\n          handleCertification = this.handleCertification,\n          handleReset = this.handleReset,\n          info = this.info,\n          type = this.type;\n      checkFocus();\n      return React.createElement(View, {\n        OCP: OCP,\n        onClickItem: onClickItem,\n        intl: this.props.intl,\n        info: info[type][grade],\n        myLevel: myLevel,\n        handleCertification: handleCertification,\n        handleReset: handleReset,\n        userId: this.props.userinfo.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {\n  updateUserInfo: action.updateUserInfo\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/OCP2/Subpage/Container.js"],"names":["React","Component","connect","injectIntl","View","request","Popup","showPopUp","Print","action","lv1Thumb","lv2Thumb","lv3Thumb","lv1desc","lv2desc","lv3desc","SignUp","resetOcpToken","detectIE","Container","props","componentDidMount","getOCPList","getMyOcp","componentDidUpdate","prevProps","prevState","userinfo","email","arr","i","title","require","type","grade","data","img","image","push","level","setState","OCP","guest","getMyOcp2","guestId","id","res","json","currentData","find","element","myLevel","onClickItem","isIE","window","open","darkmode","mobileFullscreen","state","intl","formatMessage","handleReset","location","reload","dismissButton","handleCertification","organization","name","org","callback","dismissOverlay","getOcpUser2","substring","printCallback","updateOcpUser2","updateUserInfo","checkFocus","localStorage","getItem","JSON","parse","addEventListener","handleSignup","updateMyOcpPrint2","undefined","match","params","gametype","info","block","beginner","desc","thumb","game","intermediate","advanced","escape"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport Print from \"../../../Common/Component/OCPCertification\";\nimport * as action from \"../../../Common/Store/Reducer/UserInfo\";\nimport lv1Thumb from \"../../../Image/thumb_lv1.png\";\nimport lv2Thumb from \"../../../Image/thumb_lv2.png\";\nimport lv3Thumb from \"../../../Image/thumb_lv3.png\";\nimport lv1desc from \"../../../Image/dsc_lv1.png\";\nimport lv2desc from \"../../../Image/dsc_lv2.png\";\nimport lv3desc from \"../../../Image/dsc_lv3.png\";\nimport SignUp from \"../../../Common/Component/SignUp\";\nimport { resetOcpToken } from \"../../../Common/Util/OcpToken\";\nimport { detectIE } from \"../../../Common/Util/detectBrowser\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      OCP: [],\n      myLevel: undefined\n    };\n    this.guest =\n      localStorage.getItem(\"ocpId\") &&\n      JSON.parse(localStorage.getItem(\"ocpId\"));\n    this.grade = this.props.match.params.grade;\n    this.type = this.props.match.params.gametype;\n    this.info = {\n      block: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/22511b0f-f64f-4391-b241-951cf9e69a6e.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      },\n      game: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/22511b0f-f64f-4391-b241-951cf9e69a6e.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      },\n      escape: {\n        beginner: {\n          level: \"초급 퀘스트\",\n          desc: lv1desc,\n          thumb: lv1Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n        },\n        intermediate: {\n          level: \"중급 퀘스트\",\n          desc: lv2desc,\n          thumb: lv2Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/364d12bd-2af9-42e1-8eec-2005fbb063fa.html\"\n        },\n        advanced: {\n          level: \"고급 퀘스트\",\n          desc: lv3desc,\n          thumb: lv3Thumb,\n          game:\n            \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n        }\n      }\n    };\n    this.isIE = detectIE();\n  }\n  componentDidMount = async () => {\n    /** get ocp list info */\n    await this.getOCPList();\n    /** check my step  */\n    await this.getMyOcp();\n  };\n\n  componentDidUpdate = async (prevProps, prevState) => {\n    if (this.props.userinfo.email && !prevProps.userinfo.email) {\n      await this.getMyOcp();\n    } else if (!this.props.userinfo.email && prevProps.userinfo.email) {\n      //로그아웃했을때\n      await this.getMyOcp();\n    }\n  };\n\n  getOCPList = () => {\n    let arr = [];\n    for (let i = 1; i <= 10; i++) {\n      let title = require(`../../Builder/Component/OCP2/template/${this.type}/${this.grade}/${i}`)\n        .data.title;\n      let img = require(`../../Builder/Component/OCP2/template/${this.type}/${this.grade}/${i}`)\n        .data.image;\n      arr.push({ title, level: i, img });\n    }\n    this.setState({ OCP: arr });\n  };\n  getMyOcp = async () => {\n    if (this.props.userinfo.email || this.guest) {\n      let res = await request.getMyOcp2({\n        ...(this.props.userinfo.email\n          ? { email: this.props.userinfo.email }\n          : { guestId: this.guest && this.guest.id }),\n        type: this.type\n      });\n      let json = await res.json();\n      if (json) {\n        let currentData = json.find(element => element.grade === this.grade);\n        this.setState({ myLevel: currentData ? currentData.level : 0 });\n      } else {\n        this.setState({ myLevel: 0 });\n      }\n    } else {\n      this.setState({ myLevel: 0 });\n    }\n  };\n\n  onClickItem = level => {\n    if (this.isIE) {\n      showPopUp(\n        <Popup.TwoButton\n          title=\"이용안내\"\n          subtitle=\"본 페이지는 크롬에서만 정상 동작합니다\"\n          confirmButtonName=\"크롬 설치하기\"\n          cancelButtonName=\"취소\"\n          confirmAction={() => {\n            window.open(\"https://www.google.com/intl/ko/chrome/\", \"_blank\");\n          }}\n        />,\n        { darkmode: true, mobileFullscreen: true }\n      );\n      return;\n    }\n    const { myLevel } = this.state;\n    // if (window.screen.width <= 1080) {\n    //   showPopUp(\n    //     <Popup.OneButton\n    //       title={this.props.intl.formatMessage({\n    //         id: \"ID_LEARN_POPUP_MOBILE_TITLE\"\n    //       })}\n    //       buttonName={this.props.intl.formatMessage({\n    //         id: \"ID_LEARN_POPUP_MOBILE_BUTTON\"\n    //       })}\n    //     />,\n    //     { darkmode: true, mobileFullscreen: true }\n    //   );\n    //   return;\n    // }\n    // let builder;\n    if (this.type === \"block\") {\n      window.open(`/ocp2/block/${this.grade}/${level}`, \"_blank\");\n    } else {\n      window.open(`/ocp2/js/${this.type}/${this.grade}/${level}`, \"_blank\");\n    }\n    // builder.focus();\n    if (level <= myLevel + 1) {\n      window.open(`/ocp/${this.grade}/${level}`, \"_blank\");\n      // builder.focus();\n    } else {\n      showPopUp(\n        <Popup.OneButton\n          title={this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE\"\n          })}\n          buttonName={this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE_BUTTON\"\n          })}\n        />,\n        { darkmode: true, mobileFullscreen: true }\n      );\n    }\n  };\n\n  handleReset = () => {\n    showPopUp(\n      <Popup.TwoButton\n        title=\"미션 새로 시작하기\"\n        subtitle={`완수된 미션이 모두 초기화되며,\n초기화 후에는 복구가 불가능합니다.\n처음부터 다시 시작하시겠습니까?`}\n        cancelButtonName=\"아니요\"\n        confirmButtonName=\"새로 시작\"\n        confirmAction={() => {\n          resetOcpToken();\n          window.location.reload();\n        }}\n      />,\n      { darkmode: true, dismissButton: false }\n    );\n  };\n  handleCertification = async () => {\n    if (this.state.myLevel < 10) {\n      showPopUp(\n        <Popup.OneButton\n          title=\"알림\"\n          subtitle=\"10단계까지 완료해주세요.\"\n          buttonName=\"확인\"\n        />,\n        { darkmode: true }\n      );\n      return;\n    }\n    let name, organization;\n    if (this.props.userinfo.email) {\n      if (this.props.userinfo.organization) {\n        name = this.props.userinfo.name;\n        organization = this.props.userinfo.organization;\n      } else {\n        showPopUp(\n          <Popup.OneInput\n            title=\"학교를 입력해주세요\"\n            buttonName=\"확인\"\n            inputLimit={10}\n            buttonAction={org => callback(org)}\n          />,\n          { dismissOverlay: true, darkmode: false }\n        );\n      }\n    } else {\n      const res = await request.getOcpUser2({\n        guestId: this.guest && this.guest.id\n      });\n      const guest = await res.json();\n      if (guest) {\n        if (!(guest.name && guest.organization)) {\n          showPopUp(\n            <Popup.TwoInput\n              title=\"학교를 입력해주세요\"\n              buttonName=\"확인\"\n              inputTitle1=\"이름\"\n              inputTitle2=\"학교\"\n              inputLimit1={4}\n              inputLimit2={10}\n              buttonAction={(org, name) => callback(org, name)}\n            />,\n            { dismissOverlay: true, darkmode: false }\n          );\n        } else {\n          name = guest.name;\n          organization = guest.organization;\n        }\n      }\n    }\n\n    if (name && organization) {\n      showPopUp(\n        <Print\n          organization={organization.substring(0, 10)}\n          grade={this.grade}\n          type={this.type}\n          // name={name.substring(0, 4)}\n          name={name}\n          callback={this.printCallback}\n        />\n      );\n    }\n    const callback = (org, name = this.props.userinfo.name) => {\n      showPopUp(\n        <Print\n          organization={org}\n          grade={this.grade}\n          type={this.type}\n          name={name}\n          callback={this.printCallback}\n        />\n      );\n\n      request.updateOcpUser2({\n        guestId: this.guest && this.guest.id,\n        email: this.props.userinfo.email,\n        name: name,\n        organization: org\n      });\n      this.props.updateUserInfo();\n    };\n  };\n\n  checkFocus = () => {\n    this.guest =\n      localStorage.getItem(\"ocpId\") &&\n      JSON.parse(localStorage.getItem(\"ocpId\"));\n    window.addEventListener(\"focus\", () => {\n      this.getMyOcp();\n    });\n  };\n\n  handleSignup = () => {\n    showPopUp(<SignUp />, {\n      mobileFullscreen: true,\n      darkmode: true\n    });\n  };\n  printCallback = () => {\n    request.updateMyOcpPrint2(\n      this.props.userinfo.email\n        ? {\n            email: this.props.userinfo.email,\n            grade: this.grade,\n            type: this.type\n          }\n        : {\n            guestId: this.guest && this.guest.id,\n            grade: this.grade,\n            type: this.type\n          }\n    );\n  };\n  render() {\n    const { OCP, myLevel } = this.state;\n    const {\n      onClickItem,\n      grade,\n      checkFocus,\n      handleCertification,\n      handleReset,\n      info,\n      type\n    } = this;\n    checkFocus();\n    return (\n      <View\n        OCP={OCP}\n        onClickItem={onClickItem}\n        intl={this.props.intl}\n        info={info[type][grade]}\n        myLevel={myLevel}\n        handleCertification={handleCertification}\n        handleReset={handleReset}\n        userId={this.props.userinfo.id}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {\n    updateUserInfo: action.updateUserInfo\n  }\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}