{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e(require(\"babylonjs\")) : \"function\" == typeof define && define.amd ? define(\"babylonjs-gui\", [\"babylonjs\"], e) : \"object\" == typeof exports ? exports[\"babylonjs-gui\"] = e(require(\"babylonjs\")) : (t.BABYLON = t.BABYLON || {}, t.BABYLON.GUI = e(t.BABYLON));\n}(\"undefined\" != typeof self ? self : \"undefined\" != typeof global ? global : this, function (t) {\n  return function (t) {\n    var e = {};\n\n    function i(r) {\n      if (e[r]) return e[r].exports;\n      var n = e[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return t[r].call(n.exports, n, n.exports, i), n.l = !0, n.exports;\n    }\n\n    return i.m = t, i.c = e, i.d = function (t, e, r) {\n      i.o(t, e) || Object.defineProperty(t, e, {\n        enumerable: !0,\n        get: r\n      });\n    }, i.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, i.t = function (t, e) {\n      if (1 & e && (t = i(t)), 8 & e) return t;\n      if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n      var r = Object.create(null);\n      if (i.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: !0,\n        value: t\n      }), 2 & e && \"string\" != typeof t) for (var n in t) {\n        i.d(r, n, function (e) {\n          return t[e];\n        }.bind(null, n));\n      }\n      return r;\n    }, i.n = function (t) {\n      var e = t && t.__esModule ? function () {\n        return t.default;\n      } : function () {\n        return t;\n      };\n      return i.d(e, \"a\", e), e;\n    }, i.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, i.p = \"\", i(i.s = 2);\n  }([function (e, i) {\n    e.exports = t;\n  }, function (t, e, i) {\n    \"use strict\";\n\n    i.r(e), i.d(e, \"Button\", function () {\n      return O;\n    }), i.d(e, \"Checkbox\", function () {\n      return T;\n    }), i.d(e, \"ColorPicker\", function () {\n      return M;\n    }), i.d(e, \"Container\", function () {\n      return g;\n    }), i.d(e, \"Control\", function () {\n      return f;\n    }), i.d(e, \"Ellipse\", function () {\n      return I;\n    }), i.d(e, \"Grid\", function () {\n      return P;\n    }), i.d(e, \"Image\", function () {\n      return v;\n    }), i.d(e, \"InputText\", function () {\n      return x;\n    }), i.d(e, \"InputPassword\", function () {\n      return k;\n    }), i.d(e, \"Line\", function () {\n      return A;\n    }), i.d(e, \"MultiLine\", function () {\n      return E;\n    }), i.d(e, \"RadioButton\", function () {\n      return D;\n    }), i.d(e, \"StackPanel\", function () {\n      return C;\n    }), i.d(e, \"SelectorGroup\", function () {\n      return B;\n    }), i.d(e, \"CheckboxGroup\", function () {\n      return N;\n    }), i.d(e, \"RadioGroup\", function () {\n      return H;\n    }), i.d(e, \"SliderGroup\", function () {\n      return V;\n    }), i.d(e, \"SelectionPanel\", function () {\n      return W;\n    }), i.d(e, \"ScrollViewer\", function () {\n      return G;\n    }), i.d(e, \"TextWrapping\", function () {\n      return m;\n    }), i.d(e, \"TextBlock\", function () {\n      return y;\n    }), i.d(e, \"TextWrapper\", function () {\n      return w;\n    }), i.d(e, \"KeyPropertySet\", function () {\n      return X;\n    }), i.d(e, \"VirtualKeyboard\", function () {\n      return U;\n    }), i.d(e, \"Rectangle\", function () {\n      return b;\n    }), i.d(e, \"DisplayGrid\", function () {\n      return Y;\n    }), i.d(e, \"BaseSlider\", function () {\n      return L;\n    }), i.d(e, \"Slider\", function () {\n      return R;\n    }), i.d(e, \"ImageBasedSlider\", function () {\n      return q;\n    }), i.d(e, \"ScrollBar\", function () {\n      return j;\n    }), i.d(e, \"ImageScrollBar\", function () {\n      return z;\n    }), i.d(e, \"name\", function () {\n      return K;\n    }), i.d(e, \"AdvancedDynamicTexture\", function () {\n      return J;\n    }), i.d(e, \"AdvancedDynamicTextureInstrumentation\", function () {\n      return Q;\n    }), i.d(e, \"Vector2WithInfo\", function () {\n      return d;\n    }), i.d(e, \"Matrix2D\", function () {\n      return p;\n    }), i.d(e, \"Measure\", function () {\n      return _;\n    }), i.d(e, \"MultiLinePoint\", function () {\n      return S;\n    }), i.d(e, \"Style\", function () {\n      return Z;\n    }), i.d(e, \"ValueAndUnit\", function () {\n      return a;\n    }), i.d(e, \"XmlLoader\", function () {\n      return $;\n    }), i.d(e, \"AbstractButton3D\", function () {\n      return it;\n    }), i.d(e, \"Button3D\", function () {\n      return rt;\n    }), i.d(e, \"Container3D\", function () {\n      return nt;\n    }), i.d(e, \"Control3D\", function () {\n      return et;\n    }), i.d(e, \"CylinderPanel\", function () {\n      return st;\n    }), i.d(e, \"HolographicButton\", function () {\n      return ct;\n    }), i.d(e, \"MeshButton3D\", function () {\n      return _t;\n    }), i.d(e, \"PlanePanel\", function () {\n      return dt;\n    }), i.d(e, \"ScatterPanel\", function () {\n      return pt;\n    }), i.d(e, \"SpherePanel\", function () {\n      return ft;\n    }), i.d(e, \"StackPanel3D\", function () {\n      return gt;\n    }), i.d(e, \"VolumeBasedPanel\", function () {\n      return ot;\n    }), i.d(e, \"FluentMaterialDefines\", function () {\n      return lt;\n    }), i.d(e, \"FluentMaterial\", function () {\n      return ut;\n    }), i.d(e, \"GUI3DManager\", function () {\n      return mt;\n    }), i.d(e, \"Vector3WithInfo\", function () {\n      return tt;\n    });\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    \n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    \n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n\n    var _r = function r(t, e) {\n      return (_r = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var i in e) {\n          Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n        }\n      })(t, e);\n    };\n\n    function n(t, e) {\n      function i() {\n        this.constructor = t;\n      }\n\n      _r(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());\n    }\n\n    function o(t, e, i, r) {\n      var n,\n          o = arguments.length,\n          s = o < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, i) : r;\n      if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, i, r);else for (var a = t.length - 1; a >= 0; a--) {\n        (n = t[a]) && (s = (o < 3 ? n(s) : o > 3 ? n(e, i, s) : n(e, i)) || s);\n      }\n      return o > 3 && s && Object.defineProperty(e, i, s), s;\n    }\n\n    Object.create;\n    Object.create;\n\n    var s = i(0),\n        a = function () {\n      function t(e, i, r) {\n        void 0 === i && (i = t.UNITMODE_PIXEL), void 0 === r && (r = !0), this.unit = i, this.negativeValueAllowed = r, this._value = 1, this.ignoreAdaptiveScaling = !1, this._value = e, this._originalUnit = i;\n      }\n\n      return Object.defineProperty(t.prototype, \"isPercentage\", {\n        get: function get() {\n          return this.unit === t.UNITMODE_PERCENTAGE;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"isPixel\", {\n        get: function get() {\n          return this.unit === t.UNITMODE_PIXEL;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"internalValue\", {\n        get: function get() {\n          return this._value;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.getValueInPixel = function (t, e) {\n        return this.isPixel ? this.getValue(t) : this.getValue(t) * e;\n      }, t.prototype.updateInPlace = function (e, i) {\n        return void 0 === i && (i = t.UNITMODE_PIXEL), this._value = e, this.unit = i, this;\n      }, t.prototype.getValue = function (e) {\n        if (e && !this.ignoreAdaptiveScaling && this.unit !== t.UNITMODE_PERCENTAGE) {\n          var i = 0,\n              r = 0;\n          if (e.idealWidth && (i = this._value * e.getSize().width / e.idealWidth), e.idealHeight && (r = this._value * e.getSize().height / e.idealHeight), e.useSmallestIdeal && e.idealWidth && e.idealHeight) return window.innerWidth < window.innerHeight ? i : r;\n          if (e.idealWidth) return i;\n          if (e.idealHeight) return r;\n        }\n\n        return this._value;\n      }, t.prototype.toString = function (e, i) {\n        switch (this.unit) {\n          case t.UNITMODE_PERCENTAGE:\n            var r = 100 * this.getValue(e);\n            return (i ? r.toFixed(i) : r) + \"%\";\n\n          case t.UNITMODE_PIXEL:\n            var n = this.getValue(e);\n            return (i ? n.toFixed(i) : n) + \"px\";\n        }\n\n        return this.unit.toString();\n      }, t.prototype.fromString = function (e) {\n        var i = t._Regex.exec(e.toString());\n\n        if (!i || 0 === i.length) return !1;\n        var r = parseFloat(i[1]),\n            n = this._originalUnit;\n        if (this.negativeValueAllowed || r < 0 && (r = 0), 4 === i.length) switch (i[3]) {\n          case \"px\":\n            n = t.UNITMODE_PIXEL;\n            break;\n\n          case \"%\":\n            n = t.UNITMODE_PERCENTAGE, r /= 100;\n        }\n        return (r !== this._value || n !== this.unit) && (this._value = r, this.unit = n, !0);\n      }, Object.defineProperty(t, \"UNITMODE_PERCENTAGE\", {\n        get: function get() {\n          return t._UNITMODE_PERCENTAGE;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"UNITMODE_PIXEL\", {\n        get: function get() {\n          return t._UNITMODE_PIXEL;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t._Regex = /(^-?\\d*(\\.\\d+)?)(%|px)?/, t._UNITMODE_PERCENTAGE = 0, t._UNITMODE_PIXEL = 1, t;\n    }(),\n        h = [new s.Vector2(0, 0), new s.Vector2(0, 0), new s.Vector2(0, 0), new s.Vector2(0, 0)],\n        l = [new s.Vector2(0, 0), new s.Vector2(0, 0), new s.Vector2(0, 0), new s.Vector2(0, 0)],\n        u = new s.Vector2(0, 0),\n        c = new s.Vector2(0, 0),\n        _ = function () {\n      function t(t, e, i, r) {\n        this.left = t, this.top = e, this.width = i, this.height = r;\n      }\n\n      return t.prototype.copyFrom = function (t) {\n        this.left = t.left, this.top = t.top, this.width = t.width, this.height = t.height;\n      }, t.prototype.copyFromFloats = function (t, e, i, r) {\n        this.left = t, this.top = e, this.width = i, this.height = r;\n      }, t.CombineToRef = function (t, e, i) {\n        var r = Math.min(t.left, e.left),\n            n = Math.min(t.top, e.top),\n            o = Math.max(t.left + t.width, e.left + e.width),\n            s = Math.max(t.top + t.height, e.top + e.height);\n        i.left = r, i.top = n, i.width = o - r, i.height = s - n;\n      }, t.prototype.addAndTransformToRef = function (t, e, i, r, n, o) {\n        var s = this.left + e,\n            a = this.top + i,\n            _ = this.width + r,\n            d = this.height + n;\n\n        h[0].copyFromFloats(s, a), h[1].copyFromFloats(s + _, a), h[2].copyFromFloats(s + _, a + d), h[3].copyFromFloats(s, a + d), u.copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE), c.copyFromFloats(0, 0);\n\n        for (var p = 0; p < 4; p++) {\n          t.transformCoordinates(h[p].x, h[p].y, l[p]), u.x = Math.floor(Math.min(u.x, l[p].x)), u.y = Math.floor(Math.min(u.y, l[p].y)), c.x = Math.ceil(Math.max(c.x, l[p].x)), c.y = Math.ceil(Math.max(c.y, l[p].y));\n        }\n\n        o.left = u.x, o.top = u.y, o.width = c.x - u.x, o.height = c.y - u.y;\n      }, t.prototype.transformToRef = function (t, e) {\n        this.addAndTransformToRef(t, 0, 0, 0, 0, e);\n      }, t.prototype.isEqualsTo = function (t) {\n        return this.left === t.left && this.top === t.top && this.width === t.width && this.height === t.height;\n      }, t.Empty = function () {\n        return new t(0, 0, 0, 0);\n      }, t;\n    }(),\n        d = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = 0);\n        var r = t.call(this, e.x, e.y) || this;\n        return r.buttonIndex = i, r;\n      }\n\n      return n(e, t), e;\n    }(s.Vector2),\n        p = function () {\n      function t(t, e, i, r, n, o) {\n        this.m = new Float32Array(6), this.fromValues(t, e, i, r, n, o);\n      }\n\n      return t.prototype.fromValues = function (t, e, i, r, n, o) {\n        return this.m[0] = t, this.m[1] = e, this.m[2] = i, this.m[3] = r, this.m[4] = n, this.m[5] = o, this;\n      }, t.prototype.determinant = function () {\n        return this.m[0] * this.m[3] - this.m[1] * this.m[2];\n      }, t.prototype.invertToRef = function (t) {\n        var e = this.m[0],\n            i = this.m[1],\n            r = this.m[2],\n            n = this.m[3],\n            o = this.m[4],\n            a = this.m[5],\n            h = this.determinant();\n        if (h < s.Epsilon * s.Epsilon) return t.m[0] = 0, t.m[1] = 0, t.m[2] = 0, t.m[3] = 0, t.m[4] = 0, t.m[5] = 0, this;\n        var l = 1 / h,\n            u = r * a - n * o,\n            c = i * o - e * a;\n        return t.m[0] = n * l, t.m[1] = -i * l, t.m[2] = -r * l, t.m[3] = e * l, t.m[4] = u * l, t.m[5] = c * l, this;\n      }, t.prototype.multiplyToRef = function (t, e) {\n        var i = this.m[0],\n            r = this.m[1],\n            n = this.m[2],\n            o = this.m[3],\n            s = this.m[4],\n            a = this.m[5],\n            h = t.m[0],\n            l = t.m[1],\n            u = t.m[2],\n            c = t.m[3],\n            _ = t.m[4],\n            d = t.m[5];\n        return e.m[0] = i * h + r * u, e.m[1] = i * l + r * c, e.m[2] = n * h + o * u, e.m[3] = n * l + o * c, e.m[4] = s * h + a * u + _, e.m[5] = s * l + a * c + d, this;\n      }, t.prototype.transformCoordinates = function (t, e, i) {\n        return i.x = t * this.m[0] + e * this.m[2] + this.m[4], i.y = t * this.m[1] + e * this.m[3] + this.m[5], this;\n      }, t.Identity = function () {\n        return new t(1, 0, 0, 1, 0, 0);\n      }, t.TranslationToRef = function (t, e, i) {\n        i.fromValues(1, 0, 0, 1, t, e);\n      }, t.ScalingToRef = function (t, e, i) {\n        i.fromValues(t, 0, 0, e, 0, 0);\n      }, t.RotationToRef = function (t, e) {\n        var i = Math.sin(t),\n            r = Math.cos(t);\n        e.fromValues(r, i, -i, r, 0, 0);\n      }, t.ComposeToRef = function (e, i, r, n, o, s, a) {\n        t.TranslationToRef(e, i, t._TempPreTranslationMatrix), t.ScalingToRef(n, o, t._TempScalingMatrix), t.RotationToRef(r, t._TempRotationMatrix), t.TranslationToRef(-e, -i, t._TempPostTranslationMatrix), t._TempPreTranslationMatrix.multiplyToRef(t._TempScalingMatrix, t._TempCompose0), t._TempCompose0.multiplyToRef(t._TempRotationMatrix, t._TempCompose1), s ? (t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix, t._TempCompose2), t._TempCompose2.multiplyToRef(s, a)) : t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix, a);\n      }, t._TempPreTranslationMatrix = t.Identity(), t._TempPostTranslationMatrix = t.Identity(), t._TempRotationMatrix = t.Identity(), t._TempScalingMatrix = t.Identity(), t._TempCompose0 = t.Identity(), t._TempCompose1 = t.Identity(), t._TempCompose2 = t.Identity(), t;\n    }(),\n        f = function () {\n      function t(e) {\n        this.name = e, this._alpha = 1, this._alphaSet = !1, this._zIndex = 0, this._currentMeasure = _.Empty(), this._fontFamily = \"Arial\", this._fontStyle = \"\", this._fontWeight = \"\", this._fontSize = new a(18, a.UNITMODE_PIXEL, !1), this._width = new a(1, a.UNITMODE_PERCENTAGE, !1), this._height = new a(1, a.UNITMODE_PERCENTAGE, !1), this._color = \"\", this._style = null, this._horizontalAlignment = t.HORIZONTAL_ALIGNMENT_CENTER, this._verticalAlignment = t.VERTICAL_ALIGNMENT_CENTER, this._isDirty = !0, this._wasDirty = !1, this._tempParentMeasure = _.Empty(), this._prevCurrentMeasureTransformedIntoGlobalSpace = _.Empty(), this._cachedParentMeasure = _.Empty(), this._paddingLeft = new a(0), this._paddingRight = new a(0), this._paddingTop = new a(0), this._paddingBottom = new a(0), this._left = new a(0), this._top = new a(0), this._scaleX = 1, this._scaleY = 1, this._rotation = 0, this._transformCenterX = .5, this._transformCenterY = .5, this._transformMatrix = p.Identity(), this._invertTransformMatrix = p.Identity(), this._transformedPosition = s.Vector2.Zero(), this._isMatrixDirty = !0, this._isVisible = !0, this._isHighlighted = !1, this._fontSet = !1, this._dummyVector2 = s.Vector2.Zero(), this._downCount = 0, this._enterCount = -1, this._doNotRender = !1, this._downPointerIds = {}, this._isEnabled = !0, this._disabledColor = \"#9a9a9a\", this._disabledColorItem = \"#6a6a6a\", this._rebuildLayout = !1, this._customData = {}, this._isClipped = !1, this._automaticSize = !1, this.metadata = null, this.isHitTestVisible = !0, this.isPointerBlocker = !1, this.isFocusInvisible = !1, this.clipChildren = !0, this.clipContent = !0, this.useBitmapCache = !1, this._shadowOffsetX = 0, this._shadowOffsetY = 0, this._shadowBlur = 0, this._shadowColor = \"black\", this.hoverCursor = \"\", this._linkOffsetX = new a(0), this._linkOffsetY = new a(0), this.onWheelObservable = new s.Observable(), this.onPointerMoveObservable = new s.Observable(), this.onPointerOutObservable = new s.Observable(), this.onPointerDownObservable = new s.Observable(), this.onPointerUpObservable = new s.Observable(), this.onPointerClickObservable = new s.Observable(), this.onPointerEnterObservable = new s.Observable(), this.onDirtyObservable = new s.Observable(), this.onBeforeDrawObservable = new s.Observable(), this.onAfterDrawObservable = new s.Observable(), this.onDisposeObservable = new s.Observable(), this.fixedRatio = 0, this._fixedRatioMasterIsWidth = !0, this._tmpMeasureA = new _(0, 0, 0, 0);\n      }\n\n      return Object.defineProperty(t.prototype, \"shadowOffsetX\", {\n        get: function get() {\n          return this._shadowOffsetX;\n        },\n        set: function set(t) {\n          this._shadowOffsetX !== t && (this._shadowOffsetX = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"shadowOffsetY\", {\n        get: function get() {\n          return this._shadowOffsetY;\n        },\n        set: function set(t) {\n          this._shadowOffsetY !== t && (this._shadowOffsetY = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"shadowBlur\", {\n        get: function get() {\n          return this._shadowBlur;\n        },\n        set: function set(t) {\n          this._shadowBlur !== t && (this._shadowBlur = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"shadowColor\", {\n        get: function get() {\n          return this._shadowColor;\n        },\n        set: function set(t) {\n          this._shadowColor !== t && (this._shadowColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"typeName\", {\n        get: function get() {\n          return this._getTypeName();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.getClassName = function () {\n        return this._getTypeName();\n      }, Object.defineProperty(t.prototype, \"host\", {\n        get: function get() {\n          return this._host;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontOffset\", {\n        get: function get() {\n          return this._fontOffset;\n        },\n        set: function set(t) {\n          this._fontOffset = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"alpha\", {\n        get: function get() {\n          return this._alpha;\n        },\n        set: function set(t) {\n          this._alpha !== t && (this._alphaSet = !0, this._alpha = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"isHighlighted\", {\n        get: function get() {\n          return this._isHighlighted;\n        },\n        set: function set(t) {\n          this._isHighlighted !== t && (this._isHighlighted = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"scaleX\", {\n        get: function get() {\n          return this._scaleX;\n        },\n        set: function set(t) {\n          this._scaleX !== t && (this._scaleX = t, this._markAsDirty(), this._markMatrixAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"scaleY\", {\n        get: function get() {\n          return this._scaleY;\n        },\n        set: function set(t) {\n          this._scaleY !== t && (this._scaleY = t, this._markAsDirty(), this._markMatrixAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"rotation\", {\n        get: function get() {\n          return this._rotation;\n        },\n        set: function set(t) {\n          this._rotation !== t && (this._rotation = t, this._markAsDirty(), this._markMatrixAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"transformCenterY\", {\n        get: function get() {\n          return this._transformCenterY;\n        },\n        set: function set(t) {\n          this._transformCenterY !== t && (this._transformCenterY = t, this._markAsDirty(), this._markMatrixAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"transformCenterX\", {\n        get: function get() {\n          return this._transformCenterX;\n        },\n        set: function set(t) {\n          this._transformCenterX !== t && (this._transformCenterX = t, this._markAsDirty(), this._markMatrixAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"horizontalAlignment\", {\n        get: function get() {\n          return this._horizontalAlignment;\n        },\n        set: function set(t) {\n          this._horizontalAlignment !== t && (this._horizontalAlignment = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"verticalAlignment\", {\n        get: function get() {\n          return this._verticalAlignment;\n        },\n        set: function set(t) {\n          this._verticalAlignment !== t && (this._verticalAlignment = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"width\", {\n        get: function get() {\n          return this._width.toString(this._host);\n        },\n        set: function set(t) {\n          this._fixedRatioMasterIsWidth = !0, this._width.toString(this._host) !== t && this._width.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"widthInPixels\", {\n        get: function get() {\n          return this._width.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        set: function set(t) {\n          isNaN(t) || (this._fixedRatioMasterIsWidth = !0, this.width = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"height\", {\n        get: function get() {\n          return this._height.toString(this._host);\n        },\n        set: function set(t) {\n          this._fixedRatioMasterIsWidth = !1, this._height.toString(this._host) !== t && this._height.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"heightInPixels\", {\n        get: function get() {\n          return this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this._fixedRatioMasterIsWidth = !1, this.height = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontFamily\", {\n        get: function get() {\n          return this._fontSet ? this._fontFamily : \"\";\n        },\n        set: function set(t) {\n          this._fontFamily !== t && (this._fontFamily = t, this._resetFontCache());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontStyle\", {\n        get: function get() {\n          return this._fontStyle;\n        },\n        set: function set(t) {\n          this._fontStyle !== t && (this._fontStyle = t, this._resetFontCache());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontWeight\", {\n        get: function get() {\n          return this._fontWeight;\n        },\n        set: function set(t) {\n          this._fontWeight !== t && (this._fontWeight = t, this._resetFontCache());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"style\", {\n        get: function get() {\n          return this._style;\n        },\n        set: function set(t) {\n          var e = this;\n          this._style && (this._style.onChangedObservable.remove(this._styleObserver), this._styleObserver = null), this._style = t, this._style && (this._styleObserver = this._style.onChangedObservable.add(function () {\n            e._markAsDirty(), e._resetFontCache();\n          })), this._markAsDirty(), this._resetFontCache();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"_isFontSizeInPercentage\", {\n        get: function get() {\n          return this._fontSize.isPercentage;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontSizeInPixels\", {\n        get: function get() {\n          var t = this._style ? this._style._fontSize : this._fontSize;\n          return t.isPixel ? t.getValue(this._host) : t.getValueInPixel(this._host, this._tempParentMeasure.height || this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.fontSize = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontSize\", {\n        get: function get() {\n          return this._fontSize.toString(this._host);\n        },\n        set: function set(t) {\n          this._fontSize.toString(this._host) !== t && this._fontSize.fromString(t) && (this._markAsDirty(), this._resetFontCache());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"color\", {\n        get: function get() {\n          return this._color;\n        },\n        set: function set(t) {\n          this._color !== t && (this._color = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"zIndex\", {\n        get: function get() {\n          return this._zIndex;\n        },\n        set: function set(t) {\n          this.zIndex !== t && (this._zIndex = t, this.parent && this.parent._reOrderControl(this));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"notRenderable\", {\n        get: function get() {\n          return this._doNotRender;\n        },\n        set: function set(t) {\n          this._doNotRender !== t && (this._doNotRender = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"isVisible\", {\n        get: function get() {\n          return this._isVisible;\n        },\n        set: function set(t) {\n          this._isVisible !== t && (this._isVisible = t, this._markAsDirty(!0));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"isDirty\", {\n        get: function get() {\n          return this._isDirty;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"linkedMesh\", {\n        get: function get() {\n          return this._linkedMesh;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingLeft\", {\n        get: function get() {\n          return this._paddingLeft.toString(this._host);\n        },\n        set: function set(t) {\n          this._paddingLeft.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingLeftInPixels\", {\n        get: function get() {\n          return this._paddingLeft.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.paddingLeft = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingRight\", {\n        get: function get() {\n          return this._paddingRight.toString(this._host);\n        },\n        set: function set(t) {\n          this._paddingRight.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingRightInPixels\", {\n        get: function get() {\n          return this._paddingRight.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.paddingRight = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingTop\", {\n        get: function get() {\n          return this._paddingTop.toString(this._host);\n        },\n        set: function set(t) {\n          this._paddingTop.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingTopInPixels\", {\n        get: function get() {\n          return this._paddingTop.getValueInPixel(this._host, this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.paddingTop = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingBottom\", {\n        get: function get() {\n          return this._paddingBottom.toString(this._host);\n        },\n        set: function set(t) {\n          this._paddingBottom.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"paddingBottomInPixels\", {\n        get: function get() {\n          return this._paddingBottom.getValueInPixel(this._host, this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.paddingBottom = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"left\", {\n        get: function get() {\n          return this._left.toString(this._host);\n        },\n        set: function set(t) {\n          this._left.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"leftInPixels\", {\n        get: function get() {\n          return this._left.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.left = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"top\", {\n        get: function get() {\n          return this._top.toString(this._host);\n        },\n        set: function set(t) {\n          this._top.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"topInPixels\", {\n        get: function get() {\n          return this._top.getValueInPixel(this._host, this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.top = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"linkOffsetX\", {\n        get: function get() {\n          return this._linkOffsetX.toString(this._host);\n        },\n        set: function set(t) {\n          this._linkOffsetX.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"linkOffsetXInPixels\", {\n        get: function get() {\n          return this._linkOffsetX.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.linkOffsetX = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"linkOffsetY\", {\n        get: function get() {\n          return this._linkOffsetY.toString(this._host);\n        },\n        set: function set(t) {\n          this._linkOffsetY.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"linkOffsetYInPixels\", {\n        get: function get() {\n          return this._linkOffsetY.getValueInPixel(this._host, this._cachedParentMeasure.height);\n        },\n        set: function set(t) {\n          isNaN(t) || (this.linkOffsetY = t + \"px\");\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"centerX\", {\n        get: function get() {\n          return this._currentMeasure.left + this._currentMeasure.width / 2;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"centerY\", {\n        get: function get() {\n          return this._currentMeasure.top + this._currentMeasure.height / 2;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"isEnabled\", {\n        get: function get() {\n          return this._isEnabled;\n        },\n        set: function set(t) {\n          this._isEnabled !== t && (this._isEnabled = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"disabledColor\", {\n        get: function get() {\n          return this._disabledColor;\n        },\n        set: function set(t) {\n          this._disabledColor !== t && (this._disabledColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"disabledColorItem\", {\n        get: function get() {\n          return this._disabledColorItem;\n        },\n        set: function set(t) {\n          this._disabledColorItem !== t && (this._disabledColorItem = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype._getTypeName = function () {\n        return \"Control\";\n      }, t.prototype.getAscendantOfClass = function (t) {\n        return this.parent ? this.parent.getClassName() === t ? this.parent : this.parent.getAscendantOfClass(t) : null;\n      }, t.prototype._resetFontCache = function () {\n        this._fontSet = !0, this._markAsDirty();\n      }, t.prototype.isAscendant = function (t) {\n        return !!this.parent && (this.parent === t || this.parent.isAscendant(t));\n      }, t.prototype.getLocalCoordinates = function (t) {\n        var e = s.Vector2.Zero();\n        return this.getLocalCoordinatesToRef(t, e), e;\n      }, t.prototype.getLocalCoordinatesToRef = function (t, e) {\n        return e.x = t.x - this._currentMeasure.left, e.y = t.y - this._currentMeasure.top, this;\n      }, t.prototype.getParentLocalCoordinates = function (t) {\n        var e = s.Vector2.Zero();\n        return e.x = t.x - this._cachedParentMeasure.left, e.y = t.y - this._cachedParentMeasure.top, e;\n      }, t.prototype.moveToVector3 = function (e, i) {\n        if (this._host && this.parent === this._host._rootContainer) {\n          this.horizontalAlignment = t.HORIZONTAL_ALIGNMENT_LEFT, this.verticalAlignment = t.VERTICAL_ALIGNMENT_TOP;\n\n          var r = this._host._getGlobalViewport(i),\n              n = s.Vector3.Project(e, s.Matrix.Identity(), i.getTransformMatrix(), r);\n\n          this._moveToProjectedPosition(n), n.z < 0 || n.z > 1 ? this.notRenderable = !0 : this.notRenderable = !1;\n        } else s.Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\n      }, t.prototype.getDescendantsToRef = function (t, e, i) {\n        void 0 === e && (e = !1);\n      }, t.prototype.getDescendants = function (t, e) {\n        var i = new Array();\n        return this.getDescendantsToRef(i, t, e), i;\n      }, t.prototype.linkWithMesh = function (e) {\n        if (!this._host || this.parent && this.parent !== this._host._rootContainer) e && s.Tools.Error(\"Cannot link a control to a mesh if the control is not at root level\");else {\n          var i = this._host._linkedControls.indexOf(this);\n\n          if (-1 !== i) return this._linkedMesh = e, void (e || this._host._linkedControls.splice(i, 1));\n          e && (this.horizontalAlignment = t.HORIZONTAL_ALIGNMENT_LEFT, this.verticalAlignment = t.VERTICAL_ALIGNMENT_TOP, this._linkedMesh = e, this._host._linkedControls.push(this));\n        }\n      }, t.prototype._moveToProjectedPosition = function (t) {\n        var e = this._left.getValue(this._host),\n            i = this._top.getValue(this._host),\n            r = t.x + this._linkOffsetX.getValue(this._host) - this._currentMeasure.width / 2,\n            n = t.y + this._linkOffsetY.getValue(this._host) - this._currentMeasure.height / 2;\n\n        this._left.ignoreAdaptiveScaling && this._top.ignoreAdaptiveScaling && (Math.abs(r - e) < .5 && (r = e), Math.abs(n - i) < .5 && (n = i)), this.left = r + \"px\", this.top = n + \"px\", this._left.ignoreAdaptiveScaling = !0, this._top.ignoreAdaptiveScaling = !0, this._markAsDirty();\n      }, t.prototype._offsetLeft = function (t) {\n        this._isDirty = !0, this._currentMeasure.left += t;\n      }, t.prototype._offsetTop = function (t) {\n        this._isDirty = !0, this._currentMeasure.top += t;\n      }, t.prototype._markMatrixAsDirty = function () {\n        this._isMatrixDirty = !0, this._flagDescendantsAsMatrixDirty();\n      }, t.prototype._flagDescendantsAsMatrixDirty = function () {}, t.prototype._intersectsRect = function (t) {\n        return this._currentMeasure.transformToRef(this._transformMatrix, this._tmpMeasureA), !(this._tmpMeasureA.left >= t.left + t.width) && !(this._tmpMeasureA.top >= t.top + t.height) && !(this._tmpMeasureA.left + this._tmpMeasureA.width <= t.left) && !(this._tmpMeasureA.top + this._tmpMeasureA.height <= t.top);\n      }, t.prototype.invalidateRect = function () {\n        if (this._transform(), this.host && this.host.useInvalidateRectOptimization) if (this._currentMeasure.transformToRef(this._transformMatrix, this._tmpMeasureA), _.CombineToRef(this._tmpMeasureA, this._prevCurrentMeasureTransformedIntoGlobalSpace, this._tmpMeasureA), this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n          var t = this.shadowOffsetX,\n              e = this.shadowOffsetY,\n              i = this.shadowBlur,\n              r = Math.min(Math.min(t, 0) - 2 * i, 0),\n              n = Math.max(Math.max(t, 0) + 2 * i, 0),\n              o = Math.min(Math.min(e, 0) - 2 * i, 0),\n              s = Math.max(Math.max(e, 0) + 2 * i, 0);\n          this.host.invalidateRect(Math.floor(this._tmpMeasureA.left + r), Math.floor(this._tmpMeasureA.top + o), Math.ceil(this._tmpMeasureA.left + this._tmpMeasureA.width + n), Math.ceil(this._tmpMeasureA.top + this._tmpMeasureA.height + s));\n        } else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left), Math.floor(this._tmpMeasureA.top), Math.ceil(this._tmpMeasureA.left + this._tmpMeasureA.width), Math.ceil(this._tmpMeasureA.top + this._tmpMeasureA.height));\n      }, t.prototype._markAsDirty = function (t) {\n        void 0 === t && (t = !1), (this._isVisible || t) && (this._isDirty = !0, this._host && this._host.markAsDirty());\n      }, t.prototype._markAllAsDirty = function () {\n        this._markAsDirty(), this._font && this._prepareFont();\n      }, t.prototype._link = function (t) {\n        this._host = t, this._host && (this.uniqueId = this._host.getScene().getUniqueId());\n      }, t.prototype._transform = function (t) {\n        if (this._isMatrixDirty || 1 !== this._scaleX || 1 !== this._scaleY || 0 !== this._rotation) {\n          var e = this._currentMeasure.width * this._transformCenterX + this._currentMeasure.left,\n              i = this._currentMeasure.height * this._transformCenterY + this._currentMeasure.top;\n          t && (t.translate(e, i), t.rotate(this._rotation), t.scale(this._scaleX, this._scaleY), t.translate(-e, -i)), (this._isMatrixDirty || this._cachedOffsetX !== e || this._cachedOffsetY !== i) && (this._cachedOffsetX = e, this._cachedOffsetY = i, this._isMatrixDirty = !1, this._flagDescendantsAsMatrixDirty(), p.ComposeToRef(-e, -i, this._rotation, this._scaleX, this._scaleY, this.parent ? this.parent._transformMatrix : null, this._transformMatrix), this._transformMatrix.invertToRef(this._invertTransformMatrix));\n        }\n      }, t.prototype._renderHighlight = function (t) {\n        this.isHighlighted && (t.save(), t.strokeStyle = \"#4affff\", t.lineWidth = 2, this._renderHighlightSpecific(t), t.restore());\n      }, t.prototype._renderHighlightSpecific = function (t) {\n        t.strokeRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n      }, t.prototype._applyStates = function (e) {\n        this._isFontSizeInPercentage && (this._fontSet = !0), this._fontSet && (this._prepareFont(), this._fontSet = !1), this._font && (e.font = this._font), this._color && (e.fillStyle = this._color), t.AllowAlphaInheritance ? e.globalAlpha *= this._alpha : this._alphaSet && (e.globalAlpha = this.parent ? this.parent.alpha * this._alpha : this._alpha);\n      }, t.prototype._layout = function (t, e) {\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) return !1;\n\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(t)) {\n          this.host._numLayoutCalls++, this._currentMeasure.addAndTransformToRef(this._transformMatrix, 0 | -this.paddingLeftInPixels, 0 | -this.paddingTopInPixels, 0 | this.paddingRightInPixels, 0 | this.paddingBottomInPixels, this._prevCurrentMeasureTransformedIntoGlobalSpace), e.save(), this._applyStates(e);\n          var i = 0;\n\n          do {\n            this._rebuildLayout = !1, this._processMeasures(t, e), i++;\n          } while (this._rebuildLayout && i < 3);\n\n          i >= 3 && s.Logger.Error(\"Layout cycle detected in GUI (Control name=\" + this.name + \", uniqueId=\" + this.uniqueId + \")\"), e.restore(), this.invalidateRect(), this._evaluateClippingState(t);\n        }\n\n        return this._wasDirty = this._isDirty, this._isDirty = !1, !0;\n      }, t.prototype._processMeasures = function (t, e) {\n        this._currentMeasure.copyFrom(t), this._preMeasure(t, e), this._measure(), this._computeAlignment(t, e), this._currentMeasure.left = 0 | this._currentMeasure.left, this._currentMeasure.top = 0 | this._currentMeasure.top, this._currentMeasure.width = 0 | this._currentMeasure.width, this._currentMeasure.height = 0 | this._currentMeasure.height, this._additionalProcessing(t, e), this._cachedParentMeasure.copyFrom(t), this.onDirtyObservable.hasObservers() && this.onDirtyObservable.notifyObservers(this);\n      }, t.prototype._evaluateClippingState = function (t) {\n        if (this.parent && this.parent.clipChildren) {\n          if (this._currentMeasure.left > t.left + t.width) return void (this._isClipped = !0);\n          if (this._currentMeasure.left + this._currentMeasure.width < t.left) return void (this._isClipped = !0);\n          if (this._currentMeasure.top > t.top + t.height) return void (this._isClipped = !0);\n          if (this._currentMeasure.top + this._currentMeasure.height < t.top) return void (this._isClipped = !0);\n        }\n\n        this._isClipped = !1;\n      }, t.prototype._measure = function () {\n        this._width.isPixel ? this._currentMeasure.width = this._width.getValue(this._host) : this._currentMeasure.width *= this._width.getValue(this._host), this._height.isPixel ? this._currentMeasure.height = this._height.getValue(this._host) : this._currentMeasure.height *= this._height.getValue(this._host), 0 !== this.fixedRatio && (this._fixedRatioMasterIsWidth ? this._currentMeasure.height = this._currentMeasure.width * this.fixedRatio : this._currentMeasure.width = this._currentMeasure.height * this.fixedRatio);\n      }, t.prototype._computeAlignment = function (e, i) {\n        var r = this._currentMeasure.width,\n            n = this._currentMeasure.height,\n            o = e.width,\n            s = e.height,\n            a = 0,\n            h = 0;\n\n        switch (this.horizontalAlignment) {\n          case t.HORIZONTAL_ALIGNMENT_LEFT:\n            a = 0;\n            break;\n\n          case t.HORIZONTAL_ALIGNMENT_RIGHT:\n            a = o - r;\n            break;\n\n          case t.HORIZONTAL_ALIGNMENT_CENTER:\n            a = (o - r) / 2;\n        }\n\n        switch (this.verticalAlignment) {\n          case t.VERTICAL_ALIGNMENT_TOP:\n            h = 0;\n            break;\n\n          case t.VERTICAL_ALIGNMENT_BOTTOM:\n            h = s - n;\n            break;\n\n          case t.VERTICAL_ALIGNMENT_CENTER:\n            h = (s - n) / 2;\n        }\n\n        this._paddingLeft.isPixel ? (this._currentMeasure.left += this._paddingLeft.getValue(this._host), this._currentMeasure.width -= this._paddingLeft.getValue(this._host)) : (this._currentMeasure.left += o * this._paddingLeft.getValue(this._host), this._currentMeasure.width -= o * this._paddingLeft.getValue(this._host)), this._paddingRight.isPixel ? this._currentMeasure.width -= this._paddingRight.getValue(this._host) : this._currentMeasure.width -= o * this._paddingRight.getValue(this._host), this._paddingTop.isPixel ? (this._currentMeasure.top += this._paddingTop.getValue(this._host), this._currentMeasure.height -= this._paddingTop.getValue(this._host)) : (this._currentMeasure.top += s * this._paddingTop.getValue(this._host), this._currentMeasure.height -= s * this._paddingTop.getValue(this._host)), this._paddingBottom.isPixel ? this._currentMeasure.height -= this._paddingBottom.getValue(this._host) : this._currentMeasure.height -= s * this._paddingBottom.getValue(this._host), this._left.isPixel ? this._currentMeasure.left += this._left.getValue(this._host) : this._currentMeasure.left += o * this._left.getValue(this._host), this._top.isPixel ? this._currentMeasure.top += this._top.getValue(this._host) : this._currentMeasure.top += s * this._top.getValue(this._host), this._currentMeasure.left += a, this._currentMeasure.top += h;\n      }, t.prototype._preMeasure = function (t, e) {}, t.prototype._additionalProcessing = function (t, e) {}, t.prototype._clipForChildren = function (t) {}, t.prototype._clip = function (e, i) {\n        if (e.beginPath(), t._ClipMeasure.copyFrom(this._currentMeasure), i) {\n          i.transformToRef(this._invertTransformMatrix, this._tmpMeasureA);\n          var r = new _(0, 0, 0, 0);\n          r.left = Math.max(this._tmpMeasureA.left, this._currentMeasure.left), r.top = Math.max(this._tmpMeasureA.top, this._currentMeasure.top), r.width = Math.min(this._tmpMeasureA.left + this._tmpMeasureA.width, this._currentMeasure.left + this._currentMeasure.width) - r.left, r.height = Math.min(this._tmpMeasureA.top + this._tmpMeasureA.height, this._currentMeasure.top + this._currentMeasure.height) - r.top, t._ClipMeasure.copyFrom(r);\n        }\n\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n          var n = this.shadowOffsetX,\n              o = this.shadowOffsetY,\n              s = this.shadowBlur,\n              a = Math.min(Math.min(n, 0) - 2 * s, 0),\n              h = Math.max(Math.max(n, 0) + 2 * s, 0),\n              l = Math.min(Math.min(o, 0) - 2 * s, 0),\n              u = Math.max(Math.max(o, 0) + 2 * s, 0);\n          e.rect(t._ClipMeasure.left + a, t._ClipMeasure.top + l, t._ClipMeasure.width + h - a, t._ClipMeasure.height + u - l);\n        } else e.rect(t._ClipMeasure.left, t._ClipMeasure.top, t._ClipMeasure.width, t._ClipMeasure.height);\n\n        e.clip();\n      }, t.prototype._render = function (t, e) {\n        return !this.isVisible || this.notRenderable || this._isClipped ? (this._isDirty = !1, !1) : (this.host._numRenderCalls++, t.save(), this._applyStates(t), this._transform(t), this.clipContent && this._clip(t, e), this.onBeforeDrawObservable.hasObservers() && this.onBeforeDrawObservable.notifyObservers(this), this.useBitmapCache && !this._wasDirty && this._cacheData ? t.putImageData(this._cacheData, this._currentMeasure.left, this._currentMeasure.top) : this._draw(t, e), this.useBitmapCache && this._wasDirty && (this._cacheData = t.getImageData(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height)), this._renderHighlight(t), this.onAfterDrawObservable.hasObservers() && this.onAfterDrawObservable.notifyObservers(this), t.restore(), !0);\n      }, t.prototype._draw = function (t, e) {}, t.prototype.contains = function (t, e) {\n        return this._invertTransformMatrix.transformCoordinates(t, e, this._transformedPosition), t = this._transformedPosition.x, e = this._transformedPosition.y, !(t < this._currentMeasure.left) && !(t > this._currentMeasure.left + this._currentMeasure.width) && !(e < this._currentMeasure.top) && !(e > this._currentMeasure.top + this._currentMeasure.height) && (this.isPointerBlocker && (this._host._shouldBlockPointer = !0), !0);\n      }, t.prototype._processPicking = function (t, e, i, r, n, o, s, a) {\n        return !!this._isEnabled && !(!this.isHitTestVisible || !this.isVisible || this._doNotRender) && !!this.contains(t, e) && (this._processObservables(r, t, e, i, n, o, s, a), !0);\n      }, t.prototype._onPointerMove = function (t, e, i, r) {\n        this.onPointerMoveObservable.notifyObservers(e, -1, t, this, r) && null != this.parent && this.parent._onPointerMove(t, e, i, r);\n      }, t.prototype._onPointerEnter = function (t, e) {\n        return !!this._isEnabled && !(this._enterCount > 0) && (-1 === this._enterCount && (this._enterCount = 0), this._enterCount++, this.onPointerEnterObservable.notifyObservers(this, -1, t, this, e) && null != this.parent && this.parent._onPointerEnter(t, e), !0);\n      }, t.prototype._onPointerOut = function (t, e, i) {\n        if (void 0 === i && (i = !1), i || this._isEnabled && t !== this) {\n          this._enterCount = 0;\n          var r = !0;\n          t.isAscendant(this) || (r = this.onPointerOutObservable.notifyObservers(this, -1, t, this, e)), r && null != this.parent && this.parent._onPointerOut(t, e, i);\n        }\n      }, t.prototype._onPointerDown = function (t, e, i, r, n) {\n        return this._onPointerEnter(this, n), 0 === this._downCount && (this._downCount++, this._downPointerIds[i] = !0, this.onPointerDownObservable.notifyObservers(new d(e, r), -1, t, this, n) && null != this.parent && this.parent._onPointerDown(t, e, i, r, n), !0);\n      }, t.prototype._onPointerUp = function (t, e, i, r, n, o) {\n        if (this._isEnabled) {\n          this._downCount = 0, delete this._downPointerIds[i];\n          var s = n;\n          n && (this._enterCount > 0 || -1 === this._enterCount) && (s = this.onPointerClickObservable.notifyObservers(new d(e, r), -1, t, this, o)), this.onPointerUpObservable.notifyObservers(new d(e, r), -1, t, this, o) && null != this.parent && this.parent._onPointerUp(t, e, i, r, s, o);\n        }\n      }, t.prototype._forcePointerUp = function (t) {\n        if (void 0 === t && (t = null), null !== t) this._onPointerUp(this, s.Vector2.Zero(), t, 0, !0);else for (var e in this._downPointerIds) {\n          this._onPointerUp(this, s.Vector2.Zero(), +e, 0, !0);\n        }\n      }, t.prototype._onWheelScroll = function (t, e) {\n        this._isEnabled && this.onWheelObservable.notifyObservers(new s.Vector2(t, e)) && null != this.parent && this.parent._onWheelScroll(t, e);\n      }, t.prototype._onCanvasBlur = function () {}, t.prototype._processObservables = function (t, e, i, r, n, o, a, h) {\n        if (!this._isEnabled) return !1;\n\n        if (this._dummyVector2.copyFromFloats(e, i), t === s.PointerEventTypes.POINTERMOVE) {\n          this._onPointerMove(this, this._dummyVector2, n, r);\n\n          var l = this._host._lastControlOver[n];\n          return l && l !== this && l._onPointerOut(this, r), l !== this && this._onPointerEnter(this, r), this._host._lastControlOver[n] = this, !0;\n        }\n\n        return t === s.PointerEventTypes.POINTERDOWN ? (this._onPointerDown(this, this._dummyVector2, n, o, r), this._host._registerLastControlDown(this, n), this._host._lastPickedControl = this, !0) : t === s.PointerEventTypes.POINTERUP ? (this._host._lastControlDown[n] && this._host._lastControlDown[n]._onPointerUp(this, this._dummyVector2, n, o, !0, r), delete this._host._lastControlDown[n], !0) : !(t !== s.PointerEventTypes.POINTERWHEEL || !this._host._lastControlOver[n]) && (this._host._lastControlOver[n]._onWheelScroll(a, h), !0);\n      }, t.prototype._prepareFont = function () {\n        (this._font || this._fontSet) && (this._style ? this._font = this._style.fontStyle + \" \" + this._style.fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._style.fontFamily : this._font = this._fontStyle + \" \" + this._fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._fontFamily, this._fontOffset = t._GetFontOffset(this._font));\n      }, t.prototype.dispose = function () {\n        (this.onDirtyObservable.clear(), this.onBeforeDrawObservable.clear(), this.onAfterDrawObservable.clear(), this.onPointerDownObservable.clear(), this.onPointerEnterObservable.clear(), this.onPointerMoveObservable.clear(), this.onPointerOutObservable.clear(), this.onPointerUpObservable.clear(), this.onPointerClickObservable.clear(), this.onWheelObservable.clear(), this._styleObserver && this._style && (this._style.onChangedObservable.remove(this._styleObserver), this._styleObserver = null), this.parent && (this.parent.removeControl(this), this.parent = null), this._host) && this._host._linkedControls.indexOf(this) > -1 && this.linkWithMesh(null);\n        this.onDisposeObservable.notifyObservers(this), this.onDisposeObservable.clear();\n      }, Object.defineProperty(t, \"HORIZONTAL_ALIGNMENT_LEFT\", {\n        get: function get() {\n          return t._HORIZONTAL_ALIGNMENT_LEFT;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"HORIZONTAL_ALIGNMENT_RIGHT\", {\n        get: function get() {\n          return t._HORIZONTAL_ALIGNMENT_RIGHT;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"HORIZONTAL_ALIGNMENT_CENTER\", {\n        get: function get() {\n          return t._HORIZONTAL_ALIGNMENT_CENTER;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"VERTICAL_ALIGNMENT_TOP\", {\n        get: function get() {\n          return t._VERTICAL_ALIGNMENT_TOP;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"VERTICAL_ALIGNMENT_BOTTOM\", {\n        get: function get() {\n          return t._VERTICAL_ALIGNMENT_BOTTOM;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t, \"VERTICAL_ALIGNMENT_CENTER\", {\n        get: function get() {\n          return t._VERTICAL_ALIGNMENT_CENTER;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t._GetFontOffset = function (e) {\n        if (t._FontHeightSizes[e]) return t._FontHeightSizes[e];\n        var i = document.createElement(\"span\");\n        i.innerHTML = \"Hg\", i.style.font = e;\n        var r = document.createElement(\"div\");\n        r.style.display = \"inline-block\", r.style.width = \"1px\", r.style.height = \"0px\", r.style.verticalAlign = \"bottom\";\n        var n = document.createElement(\"div\");\n        n.style.whiteSpace = \"nowrap\", n.appendChild(i), n.appendChild(r), document.body.appendChild(n);\n        var o = 0,\n            s = 0;\n\n        try {\n          s = r.getBoundingClientRect().top - i.getBoundingClientRect().top, r.style.verticalAlign = \"baseline\", o = r.getBoundingClientRect().top - i.getBoundingClientRect().top;\n        } finally {\n          document.body.removeChild(n);\n        }\n\n        var a = {\n          ascent: o,\n          height: s,\n          descent: s - o\n        };\n        return t._FontHeightSizes[e] = a, a;\n      }, t.drawEllipse = function (t, e, i, r, n) {\n        n.translate(t, e), n.scale(i, r), n.beginPath(), n.arc(0, 0, 1, 0, 2 * Math.PI), n.closePath(), n.scale(1 / i, 1 / r), n.translate(-t, -e);\n      }, t.AllowAlphaInheritance = !1, t._ClipMeasure = new _(0, 0, 0, 0), t._HORIZONTAL_ALIGNMENT_LEFT = 0, t._HORIZONTAL_ALIGNMENT_RIGHT = 1, t._HORIZONTAL_ALIGNMENT_CENTER = 2, t._VERTICAL_ALIGNMENT_TOP = 0, t._VERTICAL_ALIGNMENT_BOTTOM = 1, t._VERTICAL_ALIGNMENT_CENTER = 2, t._FontHeightSizes = {}, t.AddHeader = function () {}, t;\n    }();\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Control\"] = f;\n\n    var g = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._children = new Array(), i._measureForChildren = _.Empty(), i._background = \"\", i._adaptWidthToChildren = !1, i._adaptHeightToChildren = !1, i.logLayoutCycleErrors = !1, i.maxLayoutCycle = 3, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"adaptHeightToChildren\", {\n        get: function get() {\n          return this._adaptHeightToChildren;\n        },\n        set: function set(t) {\n          this._adaptHeightToChildren !== t && (this._adaptHeightToChildren = t, t && (this.height = \"100%\"), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"adaptWidthToChildren\", {\n        get: function get() {\n          return this._adaptWidthToChildren;\n        },\n        set: function set(t) {\n          this._adaptWidthToChildren !== t && (this._adaptWidthToChildren = t, t && (this.width = \"100%\"), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"children\", {\n        get: function get() {\n          return this._children;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Container\";\n      }, e.prototype._flagDescendantsAsMatrixDirty = function () {\n        for (var t = 0, e = this.children; t < e.length; t++) {\n          e[t]._markMatrixAsDirty();\n        }\n      }, e.prototype.getChildByName = function (t) {\n        for (var e = 0, i = this.children; e < i.length; e++) {\n          var r = i[e];\n          if (r.name === t) return r;\n        }\n\n        return null;\n      }, e.prototype.getChildByType = function (t, e) {\n        for (var i = 0, r = this.children; i < r.length; i++) {\n          var n = r[i];\n          if (n.typeName === e) return n;\n        }\n\n        return null;\n      }, e.prototype.containsControl = function (t) {\n        return -1 !== this.children.indexOf(t);\n      }, e.prototype.addControl = function (t) {\n        return t ? (-1 !== this._children.indexOf(t) || (t._link(this._host), t._markAllAsDirty(), this._reOrderControl(t), this._markAsDirty()), this) : this;\n      }, e.prototype.clearControls = function () {\n        for (var t = 0, e = this.children.slice(); t < e.length; t++) {\n          var i = e[t];\n          this.removeControl(i);\n        }\n\n        return this;\n      }, e.prototype.removeControl = function (t) {\n        var e = this._children.indexOf(t);\n\n        return -1 !== e && (this._children.splice(e, 1), t.parent = null), t.linkWithMesh(null), this._host && this._host._cleanControlAfterRemoval(t), this._markAsDirty(), this;\n      }, e.prototype._reOrderControl = function (t) {\n        this.removeControl(t);\n\n        for (var e = !1, i = 0; i < this._children.length; i++) {\n          if (this._children[i].zIndex > t.zIndex) {\n            this._children.splice(i, 0, t), e = !0;\n            break;\n          }\n        }\n\n        e || this._children.push(t), t.parent = this, this._markAsDirty();\n      }, e.prototype._offsetLeft = function (e) {\n        t.prototype._offsetLeft.call(this, e);\n\n        for (var i = 0, r = this._children; i < r.length; i++) {\n          r[i]._offsetLeft(e);\n        }\n      }, e.prototype._offsetTop = function (e) {\n        t.prototype._offsetTop.call(this, e);\n\n        for (var i = 0, r = this._children; i < r.length; i++) {\n          r[i]._offsetTop(e);\n        }\n      }, e.prototype._markAllAsDirty = function () {\n        t.prototype._markAllAsDirty.call(this);\n\n        for (var e = 0; e < this._children.length; e++) {\n          this._children[e]._markAllAsDirty();\n        }\n      }, e.prototype._localDraw = function (t) {\n        this._background && (t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), t.fillStyle = this._background, t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height), t.restore());\n      }, e.prototype._link = function (e) {\n        t.prototype._link.call(this, e);\n\n        for (var i = 0, r = this._children; i < r.length; i++) {\n          r[i]._link(e);\n        }\n      }, e.prototype._beforeLayout = function () {}, e.prototype._processMeasures = function (e, i) {\n        !this._isDirty && this._cachedParentMeasure.isEqualsTo(e) || (t.prototype._processMeasures.call(this, e, i), this._evaluateClippingState(e));\n      }, e.prototype._layout = function (t, e) {\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) return !1;\n        this.host._numLayoutCalls++, this._isDirty && this._currentMeasure.transformToRef(this._transformMatrix, this._prevCurrentMeasureTransformedIntoGlobalSpace);\n        var i = 0;\n        e.save(), this._applyStates(e), this._beforeLayout();\n\n        do {\n          var r = -1,\n              n = -1;\n\n          if (this._rebuildLayout = !1, this._processMeasures(t, e), !this._isClipped) {\n            for (var o = 0, a = this._children; o < a.length; o++) {\n              var h = a[o];\n              h._tempParentMeasure.copyFrom(this._measureForChildren), h._layout(this._measureForChildren, e) && (this.adaptWidthToChildren && h._width.isPixel && (r = Math.max(r, h._currentMeasure.width + h.paddingLeftInPixels + h.paddingRightInPixels)), this.adaptHeightToChildren && h._height.isPixel && (n = Math.max(n, h._currentMeasure.height + h.paddingTopInPixels + h.paddingBottomInPixels)));\n            }\n\n            this.adaptWidthToChildren && r >= 0 && (r += this.paddingLeftInPixels + this.paddingRightInPixels, this.width !== r + \"px\" && (this.width = r + \"px\", this._rebuildLayout = !0)), this.adaptHeightToChildren && n >= 0 && (n += this.paddingTopInPixels + this.paddingBottomInPixels, this.height !== n + \"px\" && (this.height = n + \"px\", this._rebuildLayout = !0)), this._postMeasure();\n          }\n\n          i++;\n        } while (this._rebuildLayout && i < this.maxLayoutCycle);\n\n        return i >= 3 && this.logLayoutCycleErrors && s.Logger.Error(\"Layout cycle detected in GUI (Container name=\" + this.name + \", uniqueId=\" + this.uniqueId + \")\"), e.restore(), this._isDirty && (this.invalidateRect(), this._isDirty = !1), !0;\n      }, e.prototype._postMeasure = function () {}, e.prototype._draw = function (t, e) {\n        this._localDraw(t), this.clipChildren && this._clipForChildren(t);\n\n        for (var i = 0, r = this._children; i < r.length; i++) {\n          var n = r[i];\n          e && !n._intersectsRect(e) || n._render(t, e);\n        }\n      }, e.prototype.getDescendantsToRef = function (t, e, i) {\n        if (void 0 === e && (e = !1), this.children) for (var r = 0; r < this.children.length; r++) {\n          var n = this.children[r];\n          i && !i(n) || t.push(n), e || n.getDescendantsToRef(t, !1, i);\n        }\n      }, e.prototype._processPicking = function (e, i, r, n, o, s, a, h) {\n        if (!this._isEnabled || !this.isVisible || this.notRenderable) return !1;\n        if (!t.prototype.contains.call(this, e, i)) return !1;\n\n        for (var l = this._children.length - 1; l >= 0; l--) {\n          var u = this._children[l];\n          if (u._processPicking(e, i, r, n, o, s, a, h)) return u.hoverCursor && this._host._changeCursor(u.hoverCursor), !0;\n        }\n\n        return !!this.isHitTestVisible && this._processObservables(n, e, i, r, o, s, a, h);\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._measureForChildren.copyFrom(this._currentMeasure);\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this);\n\n        for (var e = this.children.length - 1; e >= 0; e--) {\n          this.children[e].dispose();\n        }\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Container\"] = g;\n\n    var m,\n        b = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._thickness = 1, i._cornerRadius = 0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"thickness\", {\n        get: function get() {\n          return this._thickness;\n        },\n        set: function set(t) {\n          this._thickness !== t && (this._thickness = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cornerRadius\", {\n        get: function get() {\n          return this._cornerRadius;\n        },\n        set: function set(t) {\n          t < 0 && (t = 0), this._cornerRadius !== t && (this._cornerRadius = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Rectangle\";\n      }, e.prototype._localDraw = function (t) {\n        t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), this._background && (t.fillStyle = this._background, this._cornerRadius ? (this._drawRoundedRect(t, this._thickness / 2), t.fill()) : t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height)), this._thickness && ((this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), this.color && (t.strokeStyle = this.color), t.lineWidth = this._thickness, this._cornerRadius ? (this._drawRoundedRect(t, this._thickness / 2), t.stroke()) : t.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness)), t.restore();\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._measureForChildren.width -= 2 * this._thickness, this._measureForChildren.height -= 2 * this._thickness, this._measureForChildren.left += this._thickness, this._measureForChildren.top += this._thickness;\n      }, e.prototype._drawRoundedRect = function (t, e) {\n        void 0 === e && (e = 0);\n        var i = this._currentMeasure.left + e,\n            r = this._currentMeasure.top + e,\n            n = this._currentMeasure.width - 2 * e,\n            o = this._currentMeasure.height - 2 * e,\n            s = Math.min(o / 2 - 2, Math.min(n / 2 - 2, this._cornerRadius));\n        t.beginPath(), t.moveTo(i + s, r), t.lineTo(i + n - s, r), t.quadraticCurveTo(i + n, r, i + n, r + s), t.lineTo(i + n, r + o - s), t.quadraticCurveTo(i + n, r + o, i + n - s, r + o), t.lineTo(i + s, r + o), t.quadraticCurveTo(i, r + o, i, r + o - s), t.lineTo(i, r + s), t.quadraticCurveTo(i, r, i + s, r), t.closePath();\n      }, e.prototype._clipForChildren = function (t) {\n        this._cornerRadius && (this._drawRoundedRect(t, this._thickness), t.clip());\n      }, e;\n    }(g);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Rectangle\"] = b, function (t) {\n      t[t.Clip = 0] = \"Clip\", t[t.WordWrap = 1] = \"WordWrap\", t[t.Ellipsis = 2] = \"Ellipsis\";\n    }(m || (m = {}));\n\n    var y = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = \"\");\n        var r = t.call(this, e) || this;\n        return r.name = e, r._text = \"\", r._textWrapping = m.Clip, r._textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, r._textVerticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, r._resizeToFit = !1, r._lineSpacing = new a(0), r._outlineWidth = 0, r._outlineColor = \"white\", r._underline = !1, r._lineThrough = !1, r.onTextChangedObservable = new s.Observable(), r.onLinesReadyObservable = new s.Observable(), r.text = i, r;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"lines\", {\n        get: function get() {\n          return this._lines;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"resizeToFit\", {\n        get: function get() {\n          return this._resizeToFit;\n        },\n        set: function set(t) {\n          this._resizeToFit !== t && (this._resizeToFit = t, this._resizeToFit && (this._width.ignoreAdaptiveScaling = !0, this._height.ignoreAdaptiveScaling = !0), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"textWrapping\", {\n        get: function get() {\n          return this._textWrapping;\n        },\n        set: function set(t) {\n          this._textWrapping !== t && (this._textWrapping = +t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"text\", {\n        get: function get() {\n          return this._text;\n        },\n        set: function set(t) {\n          this._text !== t && (this._text = t, this._markAsDirty(), this.onTextChangedObservable.notifyObservers(this));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"textHorizontalAlignment\", {\n        get: function get() {\n          return this._textHorizontalAlignment;\n        },\n        set: function set(t) {\n          this._textHorizontalAlignment !== t && (this._textHorizontalAlignment = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"textVerticalAlignment\", {\n        get: function get() {\n          return this._textVerticalAlignment;\n        },\n        set: function set(t) {\n          this._textVerticalAlignment !== t && (this._textVerticalAlignment = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"lineSpacing\", {\n        get: function get() {\n          return this._lineSpacing.toString(this._host);\n        },\n        set: function set(t) {\n          this._lineSpacing.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"outlineWidth\", {\n        get: function get() {\n          return this._outlineWidth;\n        },\n        set: function set(t) {\n          this._outlineWidth !== t && (this._outlineWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"underline\", {\n        get: function get() {\n          return this._underline;\n        },\n        set: function set(t) {\n          this._underline !== t && (this._underline = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"lineThrough\", {\n        get: function get() {\n          return this._lineThrough;\n        },\n        set: function set(t) {\n          this._lineThrough !== t && (this._lineThrough = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"outlineColor\", {\n        get: function get() {\n          return this._outlineColor;\n        },\n        set: function set(t) {\n          this._outlineColor !== t && (this._outlineColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"TextBlock\";\n      }, e.prototype._processMeasures = function (e, i) {\n        this._fontOffset || (this._fontOffset = f._GetFontOffset(i.font)), t.prototype._processMeasures.call(this, e, i), this._lines = this._breakLines(this._currentMeasure.width, i), this.onLinesReadyObservable.notifyObservers(this);\n\n        for (var r = 0, n = 0; n < this._lines.length; n++) {\n          var o = this._lines[n];\n          o.width > r && (r = o.width);\n        }\n\n        if (this._resizeToFit) {\n          if (this._textWrapping === m.Clip) {\n            var s = this.paddingLeftInPixels + this.paddingRightInPixels + r | 0;\n            s !== this._width.internalValue && (this._width.updateInPlace(s, a.UNITMODE_PIXEL), this._rebuildLayout = !0);\n          }\n\n          var h = this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * this._lines.length | 0;\n\n          if (this._lines.length > 0 && 0 !== this._lineSpacing.internalValue) {\n            var l = 0;\n            l = this._lineSpacing.isPixel ? this._lineSpacing.getValue(this._host) : this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height), h += (this._lines.length - 1) * l;\n          }\n\n          h !== this._height.internalValue && (this._height.updateInPlace(h, a.UNITMODE_PIXEL), this._rebuildLayout = !0);\n        }\n      }, e.prototype._drawText = function (t, e, i, r) {\n        var n = this._currentMeasure.width,\n            o = 0;\n\n        switch (this._textHorizontalAlignment) {\n          case f.HORIZONTAL_ALIGNMENT_LEFT:\n            o = 0;\n            break;\n\n          case f.HORIZONTAL_ALIGNMENT_RIGHT:\n            o = n - e;\n            break;\n\n          case f.HORIZONTAL_ALIGNMENT_CENTER:\n            o = (n - e) / 2;\n        }\n\n        (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (r.shadowColor = this.shadowColor, r.shadowBlur = this.shadowBlur, r.shadowOffsetX = this.shadowOffsetX, r.shadowOffsetY = this.shadowOffsetY), this.outlineWidth && r.strokeText(t, this._currentMeasure.left + o, i), r.fillText(t, this._currentMeasure.left + o, i), this._underline && (r.beginPath(), r.lineWidth = Math.round(.05 * this.fontSizeInPixels), r.moveTo(this._currentMeasure.left + o, i + 3), r.lineTo(this._currentMeasure.left + o + e, i + 3), r.stroke(), r.closePath()), this._lineThrough && (r.beginPath(), r.lineWidth = Math.round(.05 * this.fontSizeInPixels), r.moveTo(this._currentMeasure.left + o, i - this.fontSizeInPixels / 3), r.lineTo(this._currentMeasure.left + o + e, i - this.fontSizeInPixels / 3), r.stroke(), r.closePath());\n      }, e.prototype._draw = function (t, e) {\n        t.save(), this._applyStates(t), this._renderLines(t), t.restore();\n      }, e.prototype._applyStates = function (e) {\n        t.prototype._applyStates.call(this, e), this.outlineWidth && (e.lineWidth = this.outlineWidth, e.strokeStyle = this.outlineColor, e.lineJoin = \"miter\", e.miterLimit = 2);\n      }, e.prototype._breakLines = function (t, e) {\n        var i = [],\n            r = this.text.split(\"\\n\");\n        if (this._textWrapping === m.Ellipsis) for (var n = 0, o = r; n < o.length; n++) {\n          var s = o[n];\n          i.push(this._parseLineEllipsis(s, t, e));\n        } else if (this._textWrapping === m.WordWrap) for (var a = 0, h = r; a < h.length; a++) {\n          s = h[a];\n          i.push.apply(i, this._parseLineWordWrap(s, t, e));\n        } else for (var l = 0, u = r; l < u.length; l++) {\n          s = u[l];\n          i.push(this._parseLine(s, e));\n        }\n        return i;\n      }, e.prototype._parseLine = function (t, e) {\n        return void 0 === t && (t = \"\"), {\n          text: t,\n          width: e.measureText(t).width\n        };\n      }, e.prototype._parseLineEllipsis = function (t, e, i) {\n        void 0 === t && (t = \"\");\n        var r = i.measureText(t).width;\n        r > e && (t += \"…\");\n        var n = Array.from && Array.from(t);\n        if (n) for (; n.length && r > e;) {\n          n.pop(), t = n.join(\"\") + \"...\", r = i.measureText(t).width;\n        } else for (; t.length > 2 && r > e;) {\n          t = t.slice(0, -2) + \"…\", r = i.measureText(t).width;\n        }\n        return {\n          text: t,\n          width: r\n        };\n      }, e.prototype._parseLineWordWrap = function (t, e, i) {\n        void 0 === t && (t = \"\");\n\n        for (var r = [], n = this.wordSplittingFunction ? this.wordSplittingFunction(t) : t.split(\" \"), o = 0, s = 0; s < n.length; s++) {\n          var a = s > 0 ? t + \" \" + n[s] : n[0],\n              h = i.measureText(a).width;\n          h > e && s > 0 ? (r.push({\n            text: t,\n            width: o\n          }), t = n[s], o = i.measureText(t).width) : (o = h, t = a);\n        }\n\n        return r.push({\n          text: t,\n          width: o\n        }), r;\n      }, e.prototype._renderLines = function (t) {\n        var e = this._currentMeasure.height,\n            i = 0;\n\n        switch (this._textVerticalAlignment) {\n          case f.VERTICAL_ALIGNMENT_TOP:\n            i = this._fontOffset.ascent;\n            break;\n\n          case f.VERTICAL_ALIGNMENT_BOTTOM:\n            i = e - this._fontOffset.height * (this._lines.length - 1) - this._fontOffset.descent;\n            break;\n\n          case f.VERTICAL_ALIGNMENT_CENTER:\n            i = this._fontOffset.ascent + (e - this._fontOffset.height * this._lines.length) / 2;\n        }\n\n        i += this._currentMeasure.top;\n\n        for (var r = 0; r < this._lines.length; r++) {\n          var n = this._lines[r];\n          0 !== r && 0 !== this._lineSpacing.internalValue && (this._lineSpacing.isPixel ? i += this._lineSpacing.getValue(this._host) : i += this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height)), this._drawText(n.text, n.width, i, t), i += this._fontOffset.height;\n        }\n      }, e.prototype.computeExpectedHeight = function () {\n        if (this.text && this.widthInPixels) {\n          var t = document.createElement(\"canvas\").getContext(\"2d\");\n\n          if (t) {\n            this._applyStates(t), this._fontOffset || (this._fontOffset = f._GetFontOffset(t.font));\n            var e = this._lines ? this._lines : this._breakLines(this.widthInPixels - this.paddingLeftInPixels - this.paddingRightInPixels, t),\n                i = this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * e.length;\n\n            if (e.length > 0 && 0 !== this._lineSpacing.internalValue) {\n              var r = 0;\n              r = this._lineSpacing.isPixel ? this._lineSpacing.getValue(this._host) : this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height), i += (e.length - 1) * r;\n            }\n\n            return i;\n          }\n        }\n\n        return 0;\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this.onTextChangedObservable.clear();\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.TextBlock\"] = y;\n\n    var v = function (t) {\n      function e(i, r) {\n        void 0 === r && (r = null);\n        var n = t.call(this, i) || this;\n        return n.name = i, n._workingCanvas = null, n._loaded = !1, n._stretch = e.STRETCH_FILL, n._autoScale = !1, n._sourceLeft = 0, n._sourceTop = 0, n._sourceWidth = 0, n._sourceHeight = 0, n._svgAttributesComputationCompleted = !1, n._isSVG = !1, n._cellWidth = 0, n._cellHeight = 0, n._cellId = -1, n._populateNinePatchSlicesFromImage = !1, n._imageDataCache = {\n          data: null,\n          key: \"\"\n        }, n.onImageLoadedObservable = new s.Observable(), n.onSVGAttributesComputedObservable = new s.Observable(), n.source = r, n;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"isLoaded\", {\n        get: function get() {\n          return this._loaded;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"populateNinePatchSlicesFromImage\", {\n        get: function get() {\n          return this._populateNinePatchSlicesFromImage;\n        },\n        set: function set(t) {\n          this._populateNinePatchSlicesFromImage !== t && (this._populateNinePatchSlicesFromImage = t, this._populateNinePatchSlicesFromImage && this._loaded && this._extractNinePatchSliceDataFromImage());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"detectPointerOnOpaqueOnly\", {\n        get: function get() {\n          return this._detectPointerOnOpaqueOnly;\n        },\n        set: function set(t) {\n          this._detectPointerOnOpaqueOnly !== t && (this._detectPointerOnOpaqueOnly = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sliceLeft\", {\n        get: function get() {\n          return this._sliceLeft;\n        },\n        set: function set(t) {\n          this._sliceLeft !== t && (this._sliceLeft = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sliceRight\", {\n        get: function get() {\n          return this._sliceRight;\n        },\n        set: function set(t) {\n          this._sliceRight !== t && (this._sliceRight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sliceTop\", {\n        get: function get() {\n          return this._sliceTop;\n        },\n        set: function set(t) {\n          this._sliceTop !== t && (this._sliceTop = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sliceBottom\", {\n        get: function get() {\n          return this._sliceBottom;\n        },\n        set: function set(t) {\n          this._sliceBottom !== t && (this._sliceBottom = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sourceLeft\", {\n        get: function get() {\n          return this._sourceLeft;\n        },\n        set: function set(t) {\n          this._sourceLeft !== t && (this._sourceLeft = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sourceTop\", {\n        get: function get() {\n          return this._sourceTop;\n        },\n        set: function set(t) {\n          this._sourceTop !== t && (this._sourceTop = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sourceWidth\", {\n        get: function get() {\n          return this._sourceWidth;\n        },\n        set: function set(t) {\n          this._sourceWidth !== t && (this._sourceWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"sourceHeight\", {\n        get: function get() {\n          return this._sourceHeight;\n        },\n        set: function set(t) {\n          this._sourceHeight !== t && (this._sourceHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isSVG\", {\n        get: function get() {\n          return this._isSVG;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"svgAttributesComputationCompleted\", {\n        get: function get() {\n          return this._svgAttributesComputationCompleted;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"autoScale\", {\n        get: function get() {\n          return this._autoScale;\n        },\n        set: function set(t) {\n          this._autoScale !== t && (this._autoScale = t, t && this._loaded && this.synchronizeSizeWithContent());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"stretch\", {\n        get: function get() {\n          return this._stretch;\n        },\n        set: function set(t) {\n          this._stretch !== t && (this._stretch = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._rotate90 = function (t, i) {\n        void 0 === i && (i = !1);\n        var r = document.createElement(\"canvas\"),\n            n = r.getContext(\"2d\"),\n            o = this._domImage.width,\n            s = this._domImage.height;\n        r.width = s, r.height = o, n.translate(r.width / 2, r.height / 2), n.rotate(t * Math.PI / 2), n.drawImage(this._domImage, 0, 0, o, s, -o / 2, -s / 2, o, s);\n        var a = r.toDataURL(\"image/jpg\"),\n            h = new e(this.name + \"rotated\", a);\n        return i && (h._stretch = this._stretch, h._autoScale = this._autoScale, h._cellId = this._cellId, h._cellWidth = t % 1 ? this._cellHeight : this._cellWidth, h._cellHeight = t % 1 ? this._cellWidth : this._cellHeight), this._handleRotationForSVGImage(this, h, t), this._imageDataCache.data = null, h;\n      }, e.prototype._handleRotationForSVGImage = function (t, e, i) {\n        var r = this;\n        t._isSVG && (t._svgAttributesComputationCompleted ? (this._rotate90SourceProperties(t, e, i), this._markAsDirty()) : t.onSVGAttributesComputedObservable.addOnce(function () {\n          r._rotate90SourceProperties(t, e, i), r._markAsDirty();\n        }));\n      }, e.prototype._rotate90SourceProperties = function (t, e, i) {\n        var r,\n            n,\n            o = t.sourceLeft,\n            s = t.sourceTop,\n            a = t.domImage.width,\n            h = t.domImage.height,\n            l = o,\n            u = s,\n            c = t.sourceWidth,\n            _ = t.sourceHeight;\n\n        if (0 != i) {\n          var d = i < 0 ? -1 : 1;\n          i %= 4;\n\n          for (var p = 0; p < Math.abs(i); ++p) {\n            l = -(s - h / 2) * d + h / 2, u = (o - a / 2) * d + a / 2, c = (r = [_, c])[0], _ = r[1], i < 0 ? u -= _ : l -= c, o = l, s = u, a = (n = [h, a])[0], h = n[1];\n          }\n        }\n\n        e.sourceLeft = l, e.sourceTop = u, e.sourceWidth = c, e.sourceHeight = _;\n      }, Object.defineProperty(e.prototype, \"domImage\", {\n        get: function get() {\n          return this._domImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._domImage = t, this._loaded = !1, this._imageDataCache.data = null, this._domImage.width ? this._onImageLoaded() : this._domImage.onload = function () {\n            e._onImageLoaded();\n          };\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._onImageLoaded = function () {\n        this._imageDataCache.data = null, this._imageWidth = this._domImage.width, this._imageHeight = this._domImage.height, this._loaded = !0, this._populateNinePatchSlicesFromImage && this._extractNinePatchSliceDataFromImage(), this._autoScale && this.synchronizeSizeWithContent(), this.onImageLoadedObservable.notifyObservers(this), this._markAsDirty();\n      }, e.prototype._extractNinePatchSliceDataFromImage = function () {\n        this._workingCanvas || (this._workingCanvas = document.createElement(\"canvas\"));\n        var t = this._workingCanvas,\n            e = t.getContext(\"2d\"),\n            i = this._domImage.width,\n            r = this._domImage.height;\n        t.width = i, t.height = r, e.drawImage(this._domImage, 0, 0, i, r);\n        var n = e.getImageData(0, 0, i, r);\n        this._sliceLeft = -1, this._sliceRight = -1;\n\n        for (var o = 0; o < i; o++) {\n          if ((a = n.data[4 * o + 3]) > 127 && -1 === this._sliceLeft) this._sliceLeft = o;else if (a < 127 && this._sliceLeft > -1) {\n            this._sliceRight = o;\n            break;\n          }\n        }\n\n        this._sliceTop = -1, this._sliceBottom = -1;\n\n        for (var s = 0; s < r; s++) {\n          var a;\n          if ((a = n.data[s * i * 4 + 3]) > 127 && -1 === this._sliceTop) this._sliceTop = s;else if (a < 127 && this._sliceTop > -1) {\n            this._sliceBottom = s;\n            break;\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"source\", {\n        set: function set(t) {\n          var e = this;\n          this._source !== t && (this._loaded = !1, this._source = t, this._imageDataCache.data = null, t && (t = this._svgCheck(t)), this._domImage = document.createElement(\"img\"), this._domImage.onload = function () {\n            e._onImageLoaded();\n          }, t && (s.Tools.SetCorsBehavior(t, this._domImage), this._domImage.src = t));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._svgCheck = function (t) {\n        var e = this;\n\n        if (window.SVGSVGElement && -1 !== t.search(/.svg#/gi) && t.indexOf(\"#\") === t.lastIndexOf(\"#\")) {\n          this._isSVG = !0;\n          var i = t.split(\"#\")[0],\n              r = t.split(\"#\")[1],\n              n = document.body.querySelector('object[data=\"' + i + '\"]');\n\n          if (n) {\n            var o = n.contentDocument;\n\n            if (o && o.documentElement) {\n              var s = o.documentElement.getAttribute(\"viewBox\"),\n                  a = Number(o.documentElement.getAttribute(\"width\")),\n                  h = Number(o.documentElement.getAttribute(\"height\"));\n              if (o.getElementById(r) && s && a && h) return this._getSVGAttribs(n, r), t;\n            }\n\n            n.addEventListener(\"load\", function () {\n              e._getSVGAttribs(n, r);\n            });\n          } else {\n            var l = document.createElement(\"object\");\n            l.data = i, l.type = \"image/svg+xml\", l.width = \"0%\", l.height = \"0%\", document.body.appendChild(l), l.onload = function () {\n              var t = document.body.querySelector('object[data=\"' + i + '\"]');\n              t && e._getSVGAttribs(t, r);\n            };\n          }\n\n          return i;\n        }\n\n        return t;\n      }, e.prototype._getSVGAttribs = function (t, e) {\n        var i = t.contentDocument;\n\n        if (i && i.documentElement) {\n          var r = i.documentElement.getAttribute(\"viewBox\"),\n              n = Number(i.documentElement.getAttribute(\"width\")),\n              o = Number(i.documentElement.getAttribute(\"height\")),\n              s = i.getElementById(e);\n\n          if (r && n && o && s) {\n            var a = Number(r.split(\" \")[2]),\n                h = Number(r.split(\" \")[3]),\n                l = s.getBBox(),\n                u = 1,\n                c = 1,\n                _ = 0,\n                d = 0;\n            s.transform && s.transform.baseVal.consolidate() && (u = s.transform.baseVal.consolidate().matrix.a, c = s.transform.baseVal.consolidate().matrix.d, _ = s.transform.baseVal.consolidate().matrix.e, d = s.transform.baseVal.consolidate().matrix.f), this.sourceLeft = (u * l.x + _) * n / a, this.sourceTop = (c * l.y + d) * o / h, this.sourceWidth = l.width * u * (n / a), this.sourceHeight = l.height * c * (o / h), this._svgAttributesComputationCompleted = !0, this.onSVGAttributesComputedObservable.notifyObservers(this);\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"cellWidth\", {\n        get: function get() {\n          return this._cellWidth;\n        },\n        set: function set(t) {\n          this._cellWidth !== t && (this._cellWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cellHeight\", {\n        get: function get() {\n          return this._cellHeight;\n        },\n        set: function set(t) {\n          this._cellHeight !== t && (this._cellHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cellId\", {\n        get: function get() {\n          return this._cellId;\n        },\n        set: function set(t) {\n          this._cellId !== t && (this._cellId = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.contains = function (e, i) {\n        if (!t.prototype.contains.call(this, e, i)) return !1;\n        if (!this._detectPointerOnOpaqueOnly || !this._workingCanvas) return !0;\n        var r = 0 | this._currentMeasure.width,\n            n = 0 | this._currentMeasure.height,\n            o = r + \"_\" + n,\n            s = this._imageDataCache.data;\n\n        if (!s || this._imageDataCache.key !== o) {\n          var a = this._workingCanvas.getContext(\"2d\");\n\n          this._imageDataCache.data = s = a.getImageData(0, 0, r, n).data, this._imageDataCache.key = o;\n        }\n\n        return s[4 * ((e = e - this._currentMeasure.left | 0) + (i = i - this._currentMeasure.top | 0) * r) + 3] > 0;\n      }, e.prototype._getTypeName = function () {\n        return \"Image\";\n      }, e.prototype.synchronizeSizeWithContent = function () {\n        this._loaded && (this.width = this._domImage.width + \"px\", this.height = this._domImage.height + \"px\");\n      }, e.prototype._processMeasures = function (i, r) {\n        if (this._loaded) switch (this._stretch) {\n          case e.STRETCH_NONE:\n          case e.STRETCH_FILL:\n          case e.STRETCH_UNIFORM:\n          case e.STRETCH_NINE_PATCH:\n            break;\n\n          case e.STRETCH_EXTEND:\n            this._autoScale && this.synchronizeSizeWithContent(), this.parent && this.parent.parent && (this.parent.adaptWidthToChildren = !0, this.parent.adaptHeightToChildren = !0);\n        }\n\n        t.prototype._processMeasures.call(this, i, r);\n      }, e.prototype._prepareWorkingCanvasForOpaqueDetection = function () {\n        if (this._detectPointerOnOpaqueOnly) {\n          this._workingCanvas || (this._workingCanvas = document.createElement(\"canvas\"));\n          var t = this._workingCanvas,\n              e = this._currentMeasure.width,\n              i = this._currentMeasure.height,\n              r = t.getContext(\"2d\");\n          t.width = e, t.height = i, r.clearRect(0, 0, e, i);\n        }\n      }, e.prototype._drawImage = function (t, e, i, r, n, o, s, a, h) {\n        (t.drawImage(this._domImage, e, i, r, n, o, s, a, h), this._detectPointerOnOpaqueOnly) && (t = this._workingCanvas.getContext(\"2d\")).drawImage(this._domImage, e, i, r, n, o - this._currentMeasure.left, s - this._currentMeasure.top, a, h);\n      }, e.prototype._draw = function (t) {\n        var i, r, n, o;\n        if (t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), -1 == this.cellId) i = this._sourceLeft, r = this._sourceTop, n = this._sourceWidth ? this._sourceWidth : this._imageWidth, o = this._sourceHeight ? this._sourceHeight : this._imageHeight;else {\n          var s = this._domImage.naturalWidth / this.cellWidth,\n              a = this.cellId / s >> 0,\n              h = this.cellId % s;\n          i = this.cellWidth * h, r = this.cellHeight * a, n = this.cellWidth, o = this.cellHeight;\n        }\n        if (this._prepareWorkingCanvasForOpaqueDetection(), this._applyStates(t), this._loaded) switch (this._stretch) {\n          case e.STRETCH_NONE:\n          case e.STRETCH_FILL:\n            this._drawImage(t, i, r, n, o, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n\n            break;\n\n          case e.STRETCH_UNIFORM:\n            var l = this._currentMeasure.width / n,\n                u = this._currentMeasure.height / o,\n                c = Math.min(l, u),\n                _ = (this._currentMeasure.width - n * c) / 2,\n                d = (this._currentMeasure.height - o * c) / 2;\n\n            this._drawImage(t, i, r, n, o, this._currentMeasure.left + _, this._currentMeasure.top + d, n * c, o * c);\n\n            break;\n\n          case e.STRETCH_EXTEND:\n            this._drawImage(t, i, r, n, o, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n\n            break;\n\n          case e.STRETCH_NINE_PATCH:\n            this._renderNinePatch(t);\n\n        }\n        t.restore();\n      }, e.prototype._renderCornerPatch = function (t, e, i, r, n, o, s) {\n        this._drawImage(t, e, i, r, n, this._currentMeasure.left + o, this._currentMeasure.top + s, r, n);\n      }, e.prototype._renderNinePatch = function (t) {\n        var e = this._imageHeight,\n            i = this._sliceLeft,\n            r = this._sliceTop,\n            n = this._imageHeight - this._sliceBottom,\n            o = this._imageWidth - this._sliceRight,\n            s = 0,\n            a = 0;\n        this._populateNinePatchSlicesFromImage && (s = 1, a = 1, e -= 2, i -= 1, r -= 1, n -= 1, o -= 1);\n        var h = this._sliceRight - this._sliceLeft,\n            l = this._currentMeasure.width - o - this.sliceLeft,\n            u = this._currentMeasure.height - e + this._sliceBottom;\n        this._renderCornerPatch(t, s, a, i, r, 0, 0), this._renderCornerPatch(t, s, this._sliceBottom, i, e - this._sliceBottom, 0, u), this._renderCornerPatch(t, this._sliceRight, a, o, r, this._currentMeasure.width - o, 0), this._renderCornerPatch(t, this._sliceRight, this._sliceBottom, o, e - this._sliceBottom, this._currentMeasure.width - o, u), this._drawImage(t, this._sliceLeft, this._sliceTop, h, this._sliceBottom - this._sliceTop, this._currentMeasure.left + i, this._currentMeasure.top + r, l, u - r), this._drawImage(t, s, this._sliceTop, i, this._sliceBottom - this._sliceTop, this._currentMeasure.left, this._currentMeasure.top + r, i, u - r), this._drawImage(t, this._sliceRight, this._sliceTop, i, this._sliceBottom - this._sliceTop, this._currentMeasure.left + this._currentMeasure.width - o, this._currentMeasure.top + r, i, u - r), this._drawImage(t, this._sliceLeft, a, h, r, this._currentMeasure.left + i, this._currentMeasure.top, l, r), this._drawImage(t, this._sliceLeft, this._sliceBottom, h, n, this._currentMeasure.left + i, this._currentMeasure.top + u, l, n);\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this.onImageLoadedObservable.clear(), this.onSVGAttributesComputedObservable.clear();\n      }, e.STRETCH_NONE = 0, e.STRETCH_FILL = 1, e.STRETCH_UNIFORM = 2, e.STRETCH_EXTEND = 3, e.STRETCH_NINE_PATCH = 4, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Image\"] = v;\n\n    var O = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        i.name = e, i.delegatePickingToChildren = !1, i.thickness = 1, i.isPointerBlocker = !0;\n        var r = null;\n        return i.pointerEnterAnimation = function () {\n          r = i.alpha, i.alpha -= .1;\n        }, i.pointerOutAnimation = function () {\n          null !== r && (i.alpha = r);\n        }, i.pointerDownAnimation = function () {\n          i.scaleX -= .05, i.scaleY -= .05;\n        }, i.pointerUpAnimation = function () {\n          i.scaleX += .05, i.scaleY += .05;\n        }, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"image\", {\n        get: function get() {\n          return this._image;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"textBlock\", {\n        get: function get() {\n          return this._textBlock;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Button\";\n      }, e.prototype._processPicking = function (e, i, r, n, o, s, a, h) {\n        if (!this._isEnabled || !this.isHitTestVisible || !this.isVisible || this.notRenderable) return !1;\n        if (!t.prototype.contains.call(this, e, i)) return !1;\n\n        if (this.delegatePickingToChildren) {\n          for (var l = !1, u = this._children.length - 1; u >= 0; u--) {\n            var c = this._children[u];\n\n            if (c.isEnabled && c.isHitTestVisible && c.isVisible && !c.notRenderable && c.contains(e, i)) {\n              l = !0;\n              break;\n            }\n          }\n\n          if (!l) return !1;\n        }\n\n        return this._processObservables(n, e, i, r, o, s, a, h), !0;\n      }, e.prototype._onPointerEnter = function (e, i) {\n        return !!t.prototype._onPointerEnter.call(this, e, i) && (this.pointerEnterAnimation && this.pointerEnterAnimation(), !0);\n      }, e.prototype._onPointerOut = function (e, i, r) {\n        void 0 === r && (r = !1), this.pointerOutAnimation && this.pointerOutAnimation(), t.prototype._onPointerOut.call(this, e, i, r);\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return !!t.prototype._onPointerDown.call(this, e, i, r, n, o) && (this.pointerDownAnimation && this.pointerDownAnimation(), !0);\n      }, e.prototype._onPointerUp = function (e, i, r, n, o, s) {\n        this.pointerUpAnimation && this.pointerUpAnimation(), t.prototype._onPointerUp.call(this, e, i, r, n, o, s);\n      }, e.CreateImageButton = function (t, i, r) {\n        var n = new e(t),\n            o = new y(t + \"_button\", i);\n        o.textWrapping = !0, o.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, o.paddingLeft = \"20%\", n.addControl(o);\n        var s = new v(t + \"_icon\", r);\n        return s.width = \"20%\", s.stretch = v.STRETCH_UNIFORM, s.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, n.addControl(s), n._image = s, n._textBlock = o, n;\n      }, e.CreateImageOnlyButton = function (t, i) {\n        var r = new e(t),\n            n = new v(t + \"_icon\", i);\n        return n.stretch = v.STRETCH_FILL, n.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r.addControl(n), r._image = n, r;\n      }, e.CreateSimpleButton = function (t, i) {\n        var r = new e(t),\n            n = new y(t + \"_button\", i);\n        return n.textWrapping = !0, n.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, r.addControl(n), r._textBlock = n, r;\n      }, e.CreateImageWithCenterTextButton = function (t, i, r) {\n        var n = new e(t),\n            o = new v(t + \"_icon\", r);\n        o.stretch = v.STRETCH_FILL, n.addControl(o);\n        var s = new y(t + \"_button\", i);\n        return s.textWrapping = !0, s.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, n.addControl(s), n._image = o, n._textBlock = s, n;\n      }, e;\n    }(b);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Button\"] = O;\n\n    var C = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._isVertical = !0, i._manualWidth = !1, i._manualHeight = !1, i._doNotTrackManualChanges = !1, i.ignoreLayoutWarnings = !1, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"isVertical\", {\n        get: function get() {\n          return this._isVertical;\n        },\n        set: function set(t) {\n          this._isVertical !== t && (this._isVertical = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"width\", {\n        get: function get() {\n          return this._width.toString(this._host);\n        },\n        set: function set(t) {\n          this._doNotTrackManualChanges || (this._manualWidth = !0), this._width.toString(this._host) !== t && this._width.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"height\", {\n        get: function get() {\n          return this._height.toString(this._host);\n        },\n        set: function set(t) {\n          this._doNotTrackManualChanges || (this._manualHeight = !0), this._height.toString(this._host) !== t && this._height.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"StackPanel\";\n      }, e.prototype._preMeasure = function (e, i) {\n        for (var r = 0, n = this._children; r < n.length; r++) {\n          var o = n[r];\n          this._isVertical ? o.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP : o.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT;\n        }\n\n        t.prototype._preMeasure.call(this, e, i);\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._measureForChildren.copyFrom(e), this._measureForChildren.left = this._currentMeasure.left, this._measureForChildren.top = this._currentMeasure.top, this.isVertical && !this._manualWidth || (this._measureForChildren.width = this._currentMeasure.width), (this.isVertical || this._manualHeight) && (this._measureForChildren.height = this._currentMeasure.height);\n      }, e.prototype._postMeasure = function () {\n        for (var e = 0, i = 0, r = 0, n = this._children; r < n.length; r++) {\n          var o = n[r];\n          o.isVisible && !o.notRenderable && (this._isVertical ? (o.top !== i + \"px\" && (o.top = i + \"px\", this._rebuildLayout = !0, o._top.ignoreAdaptiveScaling = !0), o._height.isPercentage && !o._automaticSize ? this.ignoreLayoutWarnings || s.Tools.Warn(\"Control (Name:\" + o.name + \", UniqueId:\" + o.uniqueId + \") is using height in percentage mode inside a vertical StackPanel\") : i += o._currentMeasure.height + o.paddingTopInPixels + o.paddingBottomInPixels) : (o.left !== e + \"px\" && (o.left = e + \"px\", this._rebuildLayout = !0, o._left.ignoreAdaptiveScaling = !0), o._width.isPercentage && !o._automaticSize ? this.ignoreLayoutWarnings || s.Tools.Warn(\"Control (Name:\" + o.name + \", UniqueId:\" + o.uniqueId + \") is using width in percentage mode inside a horizontal StackPanel\") : e += o._currentMeasure.width + o.paddingLeftInPixels + o.paddingRightInPixels));\n        }\n\n        e += this.paddingLeftInPixels + this.paddingRightInPixels, i += this.paddingTopInPixels + this.paddingBottomInPixels, this._doNotTrackManualChanges = !0;\n        var a = !1,\n            h = !1;\n\n        if (!this._manualHeight && this._isVertical) {\n          var l = this.height;\n          this.height = i + \"px\", h = l !== this.height || !this._height.ignoreAdaptiveScaling;\n        }\n\n        if (!this._manualWidth && !this._isVertical) {\n          var u = this.width;\n          this.width = e + \"px\", a = u !== this.width || !this._width.ignoreAdaptiveScaling;\n        }\n\n        h && (this._height.ignoreAdaptiveScaling = !0), a && (this._width.ignoreAdaptiveScaling = !0), this._doNotTrackManualChanges = !1, (a || h) && (this._rebuildLayout = !0), t.prototype._postMeasure.call(this);\n      }, e;\n    }(g);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.StackPanel\"] = C;\n\n    var T = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._isChecked = !1, i._background = \"black\", i._checkSizeRatio = .8, i._thickness = 1, i.onIsCheckedChangedObservable = new s.Observable(), i.isPointerBlocker = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"thickness\", {\n        get: function get() {\n          return this._thickness;\n        },\n        set: function set(t) {\n          this._thickness !== t && (this._thickness = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"checkSizeRatio\", {\n        get: function get() {\n          return this._checkSizeRatio;\n        },\n        set: function set(t) {\n          t = Math.max(Math.min(1, t), 0), this._checkSizeRatio !== t && (this._checkSizeRatio = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isChecked\", {\n        get: function get() {\n          return this._isChecked;\n        },\n        set: function set(t) {\n          this._isChecked !== t && (this._isChecked = t, this._markAsDirty(), this.onIsCheckedChangedObservable.notifyObservers(t));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Checkbox\";\n      }, e.prototype._draw = function (t, e) {\n        t.save(), this._applyStates(t);\n        var i = this._currentMeasure.width - this._thickness,\n            r = this._currentMeasure.height - this._thickness;\n\n        if ((this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), t.fillStyle = this._isEnabled ? this._background : this._disabledColor, t.fillRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, i, r), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), this._isChecked) {\n          t.fillStyle = this._isEnabled ? this.color : this._disabledColorItem;\n          var n = i * this._checkSizeRatio,\n              o = r * this._checkSizeRatio;\n          t.fillRect(this._currentMeasure.left + this._thickness / 2 + (i - n) / 2, this._currentMeasure.top + this._thickness / 2 + (r - o) / 2, n, o);\n        }\n\n        t.strokeStyle = this.color, t.lineWidth = this._thickness, t.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, i, r), t.restore();\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return !!t.prototype._onPointerDown.call(this, e, i, r, n, o) && (this.isChecked = !this.isChecked, !0);\n      }, e.AddCheckBoxWithHeader = function (t, i) {\n        var r = new C();\n        r.isVertical = !1, r.height = \"30px\";\n        var n = new e();\n        n.width = \"20px\", n.height = \"20px\", n.isChecked = !0, n.color = \"green\", n.onIsCheckedChangedObservable.add(i), r.addControl(n);\n        var o = new y();\n        return o.text = t, o.width = \"180px\", o.paddingLeft = \"5px\", o.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, o.color = \"white\", r.addControl(o), r;\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Checkbox\"] = T;\n\n    var w = function () {\n      function t() {}\n\n      return Object.defineProperty(t.prototype, \"text\", {\n        get: function get() {\n          return this._characters ? this._characters.join(\"\") : this._text;\n        },\n        set: function set(t) {\n          this._text = t, this._characters = Array.from && Array.from(t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"length\", {\n        get: function get() {\n          return this._characters ? this._characters.length : this._text.length;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.removePart = function (t, e, i) {\n        var r;\n\n        if (this._text = this._text.slice(0, t) + (i || \"\") + this._text.slice(e), this._characters) {\n          var n = i ? Array.from(i) : [];\n\n          (r = this._characters).splice.apply(r, function () {\n            for (var t = 0, e = 0, i = arguments.length; e < i; e++) {\n              t += arguments[e].length;\n            }\n\n            var r = Array(t),\n                n = 0;\n\n            for (e = 0; e < i; e++) {\n              for (var o = arguments[e], s = 0, a = o.length; s < a; s++, n++) {\n                r[n] = o[s];\n              }\n            }\n\n            return r;\n          }([t, e - t], n));\n        }\n      }, t.prototype.charAt = function (t) {\n        return this._characters ? this._characters[t] : this._text.charAt(t);\n      }, t.prototype.substr = function (t, e) {\n        if (this._characters) {\n          t = isNaN(t) ? 0 : t >= 0 ? Math.min(t, this._characters.length) : this._characters.length + Math.max(t, -this._characters.length), void 0 === e ? e = this._characters.length - t : (isNaN(e) || e < 0) && (e = 0);\n\n          for (var i = []; --e >= 0;) {\n            i[e] = this._characters[t + e];\n          }\n\n          return i.join(\"\");\n        }\n\n        return this._text.substr(t, e);\n      }, t.prototype.substring = function (t, e) {\n        if (this._characters) {\n          isNaN(t) ? t = 0 : t > this._characters.length ? t = this._characters.length : t < 0 && (t = 0), void 0 === e ? e = this._characters.length : isNaN(e) ? e = 0 : e > this._characters.length ? e = this._characters.length : e < 0 && (e = 0);\n\n          for (var i = [], r = 0; t < e;) {\n            i[r++] = this._characters[t++];\n          }\n\n          return i.join(\"\");\n        }\n\n        return this._text.substring(t, e);\n      }, t.prototype.isWord = function (t) {\n        var e = /\\w/g;\n        return this._characters ? -1 !== this._characters[t].search(e) : -1 !== this._text.search(e);\n      }, t;\n    }(),\n        x = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = \"\");\n        var r = t.call(this, e) || this;\n        return r.name = e, r._placeholderText = \"\", r._background = \"#222222\", r._focusedBackground = \"#000000\", r._focusedColor = \"white\", r._placeholderColor = \"gray\", r._thickness = 1, r._margin = new a(10, a.UNITMODE_PIXEL), r._autoStretchWidth = !0, r._maxWidth = new a(1, a.UNITMODE_PERCENTAGE, !1), r._isFocused = !1, r._blinkIsEven = !1, r._cursorOffset = 0, r._deadKey = !1, r._addKey = !0, r._currentKey = \"\", r._isTextHighlightOn = !1, r._textHighlightColor = \"#d5e0ff\", r._highligherOpacity = .4, r._highlightedText = \"\", r._startHighlightIndex = 0, r._endHighlightIndex = 0, r._cursorIndex = -1, r._onFocusSelectAll = !1, r._isPointerDown = !1, r.promptMessage = \"Please enter text:\", r.disableMobilePrompt = !1, r.onTextChangedObservable = new s.Observable(), r.onBeforeKeyAddObservable = new s.Observable(), r.onFocusObservable = new s.Observable(), r.onBlurObservable = new s.Observable(), r.onTextHighlightObservable = new s.Observable(), r.onTextCopyObservable = new s.Observable(), r.onTextCutObservable = new s.Observable(), r.onTextPasteObservable = new s.Observable(), r.onKeyboardEventProcessedObservable = new s.Observable(), r.text = i, r.isPointerBlocker = !0, r;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"maxWidth\", {\n        get: function get() {\n          return this._maxWidth.toString(this._host);\n        },\n        set: function set(t) {\n          this._maxWidth.toString(this._host) !== t && this._maxWidth.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"maxWidthInPixels\", {\n        get: function get() {\n          return this._maxWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"highligherOpacity\", {\n        get: function get() {\n          return this._highligherOpacity;\n        },\n        set: function set(t) {\n          this._highligherOpacity !== t && (this._highligherOpacity = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"onFocusSelectAll\", {\n        get: function get() {\n          return this._onFocusSelectAll;\n        },\n        set: function set(t) {\n          this._onFocusSelectAll !== t && (this._onFocusSelectAll = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"textHighlightColor\", {\n        get: function get() {\n          return this._textHighlightColor;\n        },\n        set: function set(t) {\n          this._textHighlightColor !== t && (this._textHighlightColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"margin\", {\n        get: function get() {\n          return this._margin.toString(this._host);\n        },\n        set: function set(t) {\n          this._margin.toString(this._host) !== t && this._margin.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"marginInPixels\", {\n        get: function get() {\n          return this._margin.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"autoStretchWidth\", {\n        get: function get() {\n          return this._autoStretchWidth;\n        },\n        set: function set(t) {\n          this._autoStretchWidth !== t && (this._autoStretchWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thickness\", {\n        get: function get() {\n          return this._thickness;\n        },\n        set: function set(t) {\n          this._thickness !== t && (this._thickness = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"focusedBackground\", {\n        get: function get() {\n          return this._focusedBackground;\n        },\n        set: function set(t) {\n          this._focusedBackground !== t && (this._focusedBackground = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"focusedColor\", {\n        get: function get() {\n          return this._focusedColor;\n        },\n        set: function set(t) {\n          this._focusedColor !== t && (this._focusedColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"placeholderColor\", {\n        get: function get() {\n          return this._placeholderColor;\n        },\n        set: function set(t) {\n          this._placeholderColor !== t && (this._placeholderColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"placeholderText\", {\n        get: function get() {\n          return this._placeholderText;\n        },\n        set: function set(t) {\n          this._placeholderText !== t && (this._placeholderText = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"deadKey\", {\n        get: function get() {\n          return this._deadKey;\n        },\n        set: function set(t) {\n          this._deadKey = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"highlightedText\", {\n        get: function get() {\n          return this._highlightedText;\n        },\n        set: function set(t) {\n          this._highlightedText !== t && (this._highlightedText = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"addKey\", {\n        get: function get() {\n          return this._addKey;\n        },\n        set: function set(t) {\n          this._addKey = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"currentKey\", {\n        get: function get() {\n          return this._currentKey;\n        },\n        set: function set(t) {\n          this._currentKey = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"text\", {\n        get: function get() {\n          return this._textWrapper.text;\n        },\n        set: function set(t) {\n          var e = t.toString();\n          this._textWrapper || (this._textWrapper = new w()), this._textWrapper.text !== e && (this._textWrapper.text = e, this._textHasChanged());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._textHasChanged = function () {\n        this._markAsDirty(), this.onTextChangedObservable.notifyObservers(this);\n      }, Object.defineProperty(e.prototype, \"width\", {\n        get: function get() {\n          return this._width.toString(this._host);\n        },\n        set: function set(t) {\n          this._width.toString(this._host) !== t && (this._width.fromString(t) && this._markAsDirty(), this.autoStretchWidth = !1);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.onBlur = function () {\n        this._isFocused = !1, this._scrollLeft = null, this._cursorOffset = 0, clearTimeout(this._blinkTimeout), this._markAsDirty(), this.onBlurObservable.notifyObservers(this), this._host.unRegisterClipboardEvents(), this._onClipboardObserver && this._host.onClipboardObservable.remove(this._onClipboardObserver);\n\n        var t = this._host.getScene();\n\n        this._onPointerDblTapObserver && t && t.onPointerObservable.remove(this._onPointerDblTapObserver);\n      }, e.prototype.onFocus = function () {\n        var t = this;\n\n        if (this._isEnabled) {\n          if (this._scrollLeft = null, this._isFocused = !0, this._blinkIsEven = !1, this._cursorOffset = 0, this._markAsDirty(), this.onFocusObservable.notifyObservers(this), -1 !== navigator.userAgent.indexOf(\"Mobile\") && !this.disableMobilePrompt) {\n            var e = prompt(this.promptMessage);\n            return null !== e && (this.text = e), void (this._host.focusedControl = null);\n          }\n\n          this._host.registerClipboardEvents(), this._onClipboardObserver = this._host.onClipboardObservable.add(function (e) {\n            switch (e.type) {\n              case s.ClipboardEventTypes.COPY:\n                t._onCopyText(e.event), t.onTextCopyObservable.notifyObservers(t);\n                break;\n\n              case s.ClipboardEventTypes.CUT:\n                t._onCutText(e.event), t.onTextCutObservable.notifyObservers(t);\n                break;\n\n              case s.ClipboardEventTypes.PASTE:\n                t._onPasteText(e.event), t.onTextPasteObservable.notifyObservers(t);\n                break;\n\n              default:\n                return;\n            }\n          });\n\n          var i = this._host.getScene();\n\n          i && (this._onPointerDblTapObserver = i.onPointerObservable.add(function (e) {\n            t._isFocused && e.type === s.PointerEventTypes.POINTERDOUBLETAP && t._processDblClick(e);\n          })), this._onFocusSelectAll && this._selectAllText();\n        }\n      }, e.prototype._getTypeName = function () {\n        return \"InputText\";\n      }, e.prototype.keepsFocusWith = function () {\n        return this._connectedVirtualKeyboard ? [this._connectedVirtualKeyboard] : null;\n      }, e.prototype.processKey = function (t, e, i) {\n        if (!i || !i.ctrlKey && !i.metaKey || 67 !== t && 86 !== t && 88 !== t) {\n          if (i && (i.ctrlKey || i.metaKey) && 65 === t) return this._selectAllText(), void i.preventDefault();\n\n          switch (t) {\n            case 32:\n              e = \" \";\n              break;\n\n            case 191:\n              i && i.preventDefault();\n              break;\n\n            case 8:\n              if (this._textWrapper.text && this._textWrapper.length > 0) {\n                if (this._isTextHighlightOn) return this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex), this._textHasChanged(), this._isTextHighlightOn = !1, this._cursorOffset = this._textWrapper.length - this._startHighlightIndex, this._blinkIsEven = !1, void (i && i.preventDefault());\n                if (0 === this._cursorOffset) this.text = this._textWrapper.substr(0, this._textWrapper.length - 1);else (r = this._textWrapper.length - this._cursorOffset) > 0 && (this._textWrapper.removePart(r - 1, r), this._textHasChanged());\n              }\n\n              return void (i && i.preventDefault());\n\n            case 46:\n              if (this._isTextHighlightOn) return this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex), this._textHasChanged(), this._isTextHighlightOn = !1, this._cursorOffset = this._textWrapper.length - this._startHighlightIndex, void (i && i.preventDefault());\n\n              if (this._textWrapper.text && this._textWrapper.length > 0 && this._cursorOffset > 0) {\n                var r = this._textWrapper.length - this._cursorOffset;\n                this._textWrapper.removePart(r, r + 1), this._textHasChanged(), this._cursorOffset--;\n              }\n\n              return void (i && i.preventDefault());\n\n            case 13:\n              return this._host.focusedControl = null, void (this._isTextHighlightOn = !1);\n\n            case 35:\n              return this._cursorOffset = 0, this._blinkIsEven = !1, this._isTextHighlightOn = !1, void this._markAsDirty();\n\n            case 36:\n              return this._cursorOffset = this._textWrapper.length, this._blinkIsEven = !1, this._isTextHighlightOn = !1, void this._markAsDirty();\n\n            case 37:\n              if (this._cursorOffset++, this._cursorOffset > this._textWrapper.length && (this._cursorOffset = this._textWrapper.length), i && i.shiftKey) {\n                if (this._blinkIsEven = !1, i.ctrlKey || i.metaKey) {\n                  if (!this._isTextHighlightOn) {\n                    if (this._textWrapper.length === this._cursorOffset) return;\n                    this._endHighlightIndex = this._textWrapper.length - this._cursorOffset + 1;\n                  }\n\n                  return this._startHighlightIndex = 0, this._cursorIndex = this._textWrapper.length - this._endHighlightIndex, this._cursorOffset = this._textWrapper.length, this._isTextHighlightOn = !0, void this._markAsDirty();\n                }\n\n                return this._isTextHighlightOn ? -1 === this._cursorIndex && (this._cursorIndex = this._textWrapper.length - this._endHighlightIndex, this._cursorOffset = 0 === this._startHighlightIndex ? this._textWrapper.length : this._textWrapper.length - this._startHighlightIndex + 1) : (this._isTextHighlightOn = !0, this._cursorIndex = this._cursorOffset >= this._textWrapper.length ? this._textWrapper.length : this._cursorOffset - 1), this._cursorIndex < this._cursorOffset ? (this._endHighlightIndex = this._textWrapper.length - this._cursorIndex, this._startHighlightIndex = this._textWrapper.length - this._cursorOffset) : this._cursorIndex > this._cursorOffset ? (this._endHighlightIndex = this._textWrapper.length - this._cursorOffset, this._startHighlightIndex = this._textWrapper.length - this._cursorIndex) : this._isTextHighlightOn = !1, void this._markAsDirty();\n              }\n\n              return this._isTextHighlightOn && (this._cursorOffset = this._textWrapper.length - this._startHighlightIndex, this._isTextHighlightOn = !1), i && (i.ctrlKey || i.metaKey) && (this._cursorOffset = this._textWrapper.length, i.preventDefault()), this._blinkIsEven = !1, this._isTextHighlightOn = !1, this._cursorIndex = -1, void this._markAsDirty();\n\n            case 39:\n              if (this._cursorOffset--, this._cursorOffset < 0 && (this._cursorOffset = 0), i && i.shiftKey) {\n                if (this._blinkIsEven = !1, i.ctrlKey || i.metaKey) {\n                  if (!this._isTextHighlightOn) {\n                    if (0 === this._cursorOffset) return;\n                    this._startHighlightIndex = this._textWrapper.length - this._cursorOffset - 1;\n                  }\n\n                  return this._endHighlightIndex = this._textWrapper.length, this._isTextHighlightOn = !0, this._cursorIndex = this._textWrapper.length - this._startHighlightIndex, this._cursorOffset = 0, void this._markAsDirty();\n                }\n\n                return this._isTextHighlightOn ? -1 === this._cursorIndex && (this._cursorIndex = this._textWrapper.length - this._startHighlightIndex, this._cursorOffset = this._textWrapper.length === this._endHighlightIndex ? 0 : this._textWrapper.length - this._endHighlightIndex - 1) : (this._isTextHighlightOn = !0, this._cursorIndex = this._cursorOffset <= 0 ? 0 : this._cursorOffset + 1), this._cursorIndex < this._cursorOffset ? (this._endHighlightIndex = this._textWrapper.length - this._cursorIndex, this._startHighlightIndex = this._textWrapper.length - this._cursorOffset) : this._cursorIndex > this._cursorOffset ? (this._endHighlightIndex = this._textWrapper.length - this._cursorOffset, this._startHighlightIndex = this._textWrapper.length - this._cursorIndex) : this._isTextHighlightOn = !1, void this._markAsDirty();\n              }\n\n              return this._isTextHighlightOn && (this._cursorOffset = this._textWrapper.length - this._endHighlightIndex, this._isTextHighlightOn = !1), i && (i.ctrlKey || i.metaKey) && (this._cursorOffset = 0, i.preventDefault()), this._blinkIsEven = !1, this._isTextHighlightOn = !1, this._cursorIndex = -1, void this._markAsDirty();\n\n            case 222:\n              i && i.preventDefault(), this._cursorIndex = -1, this.deadKey = !0;\n          }\n\n          if (e && (-1 === t || 32 === t || t > 47 && t < 64 || t > 64 && t < 91 || t > 159 && t < 193 || t > 218 && t < 223 || t > 95 && t < 112) && (this._currentKey = e, this.onBeforeKeyAddObservable.notifyObservers(this), e = this._currentKey, this._addKey)) if (this._isTextHighlightOn) this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex, e), this._textHasChanged(), this._cursorOffset = this._textWrapper.length - (this._startHighlightIndex + 1), this._isTextHighlightOn = !1, this._blinkIsEven = !1, this._markAsDirty();else if (0 === this._cursorOffset) this.text += e;else {\n            var n = this._textWrapper.length - this._cursorOffset;\n            this._textWrapper.removePart(n, n, e), this._textHasChanged();\n          }\n        }\n      }, e.prototype._updateValueFromCursorIndex = function (t) {\n        if (this._blinkIsEven = !1, -1 === this._cursorIndex) this._cursorIndex = t;else if (this._cursorIndex < this._cursorOffset) this._endHighlightIndex = this._textWrapper.length - this._cursorIndex, this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;else {\n          if (!(this._cursorIndex > this._cursorOffset)) return this._isTextHighlightOn = !1, void this._markAsDirty();\n          this._endHighlightIndex = this._textWrapper.length - this._cursorOffset, this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\n        }\n        this._isTextHighlightOn = !0, this._markAsDirty();\n      }, e.prototype._processDblClick = function (t) {\n        var e, i;\n        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset, this._endHighlightIndex = this._startHighlightIndex;\n\n        do {\n          i = this._endHighlightIndex < this._textWrapper.length && this._textWrapper.isWord(this._endHighlightIndex) ? ++this._endHighlightIndex : 0, e = this._startHighlightIndex > 0 && this._textWrapper.isWord(this._startHighlightIndex - 1) ? --this._startHighlightIndex : 0;\n        } while (e || i);\n\n        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex, this.onTextHighlightObservable.notifyObservers(this), this._isTextHighlightOn = !0, this._clickedCoordinate = null, this._blinkIsEven = !0, this._cursorIndex = -1, this._markAsDirty();\n      }, e.prototype._selectAllText = function () {\n        this._blinkIsEven = !0, this._isTextHighlightOn = !0, this._startHighlightIndex = 0, this._endHighlightIndex = this._textWrapper.length, this._cursorOffset = this._textWrapper.length, this._cursorIndex = -1, this._markAsDirty();\n      }, e.prototype.processKeyboard = function (t) {\n        this.processKey(t.keyCode, t.key, t), this.onKeyboardEventProcessedObservable.notifyObservers(t);\n      }, e.prototype._onCopyText = function (t) {\n        this._isTextHighlightOn = !1;\n\n        try {\n          t.clipboardData && t.clipboardData.setData(\"text/plain\", this._highlightedText);\n        } catch (t) {}\n\n        this._host.clipboardData = this._highlightedText;\n      }, e.prototype._onCutText = function (t) {\n        if (this._highlightedText) {\n          this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex), this._textHasChanged(), this._isTextHighlightOn = !1, this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n\n          try {\n            t.clipboardData && t.clipboardData.setData(\"text/plain\", this._highlightedText);\n          } catch (t) {}\n\n          this._host.clipboardData = this._highlightedText, this._highlightedText = \"\";\n        }\n      }, e.prototype._onPasteText = function (t) {\n        var e = \"\";\n        e = t.clipboardData && -1 !== t.clipboardData.types.indexOf(\"text/plain\") ? t.clipboardData.getData(\"text/plain\") : this._host.clipboardData;\n        var i = this._textWrapper.length - this._cursorOffset;\n        this._textWrapper.removePart(i, i, e), this._textHasChanged();\n      }, e.prototype._draw = function (t, e) {\n        var i = this;\n        t.save(), this._applyStates(t), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), this._isFocused ? this._focusedBackground && (t.fillStyle = this._isEnabled ? this._focusedBackground : this._disabledColor, t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height)) : this._background && (t.fillStyle = this._isEnabled ? this._background : this._disabledColor, t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height)), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), this._fontOffset || (this._fontOffset = f._GetFontOffset(t.font));\n\n        var r = this._currentMeasure.left + this._margin.getValueInPixel(this._host, this._tempParentMeasure.width);\n\n        this.color && (t.fillStyle = this.color);\n\n        var n = this._beforeRenderText(this._textWrapper);\n\n        this._isFocused || this._textWrapper.text || !this._placeholderText || ((n = new w()).text = this._placeholderText, this._placeholderColor && (t.fillStyle = this._placeholderColor)), this._textWidth = t.measureText(n.text).width;\n\n        var o = 2 * this._margin.getValueInPixel(this._host, this._tempParentMeasure.width);\n\n        this._autoStretchWidth && (this.width = Math.min(this._maxWidth.getValueInPixel(this._host, this._tempParentMeasure.width), this._textWidth + o) + \"px\");\n        var s = this._fontOffset.ascent + (this._currentMeasure.height - this._fontOffset.height) / 2,\n            a = this._width.getValueInPixel(this._host, this._tempParentMeasure.width) - o;\n\n        if (t.save(), t.beginPath(), t.rect(r, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, a + 2, this._currentMeasure.height), t.clip(), this._isFocused && this._textWidth > a) {\n          var h = r - this._textWidth + a;\n          this._scrollLeft || (this._scrollLeft = h);\n        } else this._scrollLeft = r;\n\n        if (t.fillText(n.text, this._scrollLeft, this._currentMeasure.top + s), this._isFocused) {\n          if (this._clickedCoordinate) {\n            var l = this._scrollLeft + this._textWidth - this._clickedCoordinate,\n                u = 0;\n            this._cursorOffset = 0;\n            var c = 0;\n\n            do {\n              this._cursorOffset && (c = Math.abs(l - u)), this._cursorOffset++, u = t.measureText(n.substr(n.length - this._cursorOffset, this._cursorOffset)).width;\n            } while (u < l && n.length >= this._cursorOffset);\n\n            Math.abs(l - u) > c && this._cursorOffset--, this._blinkIsEven = !1, this._clickedCoordinate = null;\n          }\n\n          if (!this._blinkIsEven) {\n            var _ = n.substr(n.length - this._cursorOffset),\n                d = t.measureText(_).width,\n                p = this._scrollLeft + this._textWidth - d;\n\n            p < r ? (this._scrollLeft += r - p, p = r, this._markAsDirty()) : p > r + a && (this._scrollLeft += r + a - p, p = r + a, this._markAsDirty()), this._isTextHighlightOn || t.fillRect(p, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, 2, this._fontOffset.height);\n          }\n\n          if (clearTimeout(this._blinkTimeout), this._blinkTimeout = setTimeout(function () {\n            i._blinkIsEven = !i._blinkIsEven, i._markAsDirty();\n          }, 500), this._isTextHighlightOn) {\n            clearTimeout(this._blinkTimeout);\n            var g = t.measureText(n.substring(this._startHighlightIndex)).width,\n                m = this._scrollLeft + this._textWidth - g;\n            this._highlightedText = n.substring(this._startHighlightIndex, this._endHighlightIndex);\n            var b = t.measureText(n.substring(this._startHighlightIndex, this._endHighlightIndex)).width;\n            m < r && ((b -= r - m) || (b = t.measureText(n.charAt(n.length - this._cursorOffset)).width), m = r), t.globalAlpha = this._highligherOpacity, t.fillStyle = this._textHighlightColor, t.fillRect(m, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, b, this._fontOffset.height), t.globalAlpha = 1;\n          }\n        }\n\n        t.restore(), this._thickness && (this._isFocused ? this.focusedColor && (t.strokeStyle = this.focusedColor) : this.color && (t.strokeStyle = this.color), t.lineWidth = this._thickness, t.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness)), t.restore();\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return !!t.prototype._onPointerDown.call(this, e, i, r, n, o) && (this._clickedCoordinate = i.x, this._isTextHighlightOn = !1, this._highlightedText = \"\", this._cursorIndex = -1, this._isPointerDown = !0, this._host._capturingControl[r] = this, this._host.focusedControl === this ? (clearTimeout(this._blinkTimeout), this._markAsDirty(), !0) : !!this._isEnabled && (this._host.focusedControl = this, !0));\n      }, e.prototype._onPointerMove = function (e, i, r, n) {\n        this._host.focusedControl === this && this._isPointerDown && (this._clickedCoordinate = i.x, this._markAsDirty(), this._updateValueFromCursorIndex(this._cursorOffset)), t.prototype._onPointerMove.call(this, e, i, r, n);\n      }, e.prototype._onPointerUp = function (e, i, r, n, o) {\n        this._isPointerDown = !1, delete this._host._capturingControl[r], t.prototype._onPointerUp.call(this, e, i, r, n, o);\n      }, e.prototype._beforeRenderText = function (t) {\n        return t;\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this.onBlurObservable.clear(), this.onFocusObservable.clear(), this.onTextChangedObservable.clear(), this.onTextCopyObservable.clear(), this.onTextCutObservable.clear(), this.onTextPasteObservable.clear(), this.onTextHighlightObservable.clear(), this.onKeyboardEventProcessedObservable.clear();\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.InputText\"] = x;\n\n    var P = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._rowDefinitions = new Array(), i._columnDefinitions = new Array(), i._cells = {}, i._childControls = new Array(), i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"columnCount\", {\n        get: function get() {\n          return this._columnDefinitions.length;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"rowCount\", {\n        get: function get() {\n          return this._rowDefinitions.length;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"children\", {\n        get: function get() {\n          return this._childControls;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cells\", {\n        get: function get() {\n          return this._cells;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.getRowDefinition = function (t) {\n        return t < 0 || t >= this._rowDefinitions.length ? null : this._rowDefinitions[t];\n      }, e.prototype.getColumnDefinition = function (t) {\n        return t < 0 || t >= this._columnDefinitions.length ? null : this._columnDefinitions[t];\n      }, e.prototype.addRowDefinition = function (t, e) {\n        return void 0 === e && (e = !1), this._rowDefinitions.push(new a(t, e ? a.UNITMODE_PIXEL : a.UNITMODE_PERCENTAGE)), this._markAsDirty(), this;\n      }, e.prototype.addColumnDefinition = function (t, e) {\n        return void 0 === e && (e = !1), this._columnDefinitions.push(new a(t, e ? a.UNITMODE_PIXEL : a.UNITMODE_PERCENTAGE)), this._markAsDirty(), this;\n      }, e.prototype.setRowDefinition = function (t, e, i) {\n        if (void 0 === i && (i = !1), t < 0 || t >= this._rowDefinitions.length) return this;\n        var r = this._rowDefinitions[t];\n        return r && r.isPixel === i && r.internalValue === e || (this._rowDefinitions[t] = new a(e, i ? a.UNITMODE_PIXEL : a.UNITMODE_PERCENTAGE), this._markAsDirty()), this;\n      }, e.prototype.setColumnDefinition = function (t, e, i) {\n        if (void 0 === i && (i = !1), t < 0 || t >= this._columnDefinitions.length) return this;\n        var r = this._columnDefinitions[t];\n        return r && r.isPixel === i && r.internalValue === e || (this._columnDefinitions[t] = new a(e, i ? a.UNITMODE_PIXEL : a.UNITMODE_PERCENTAGE), this._markAsDirty()), this;\n      }, e.prototype.getChildrenAt = function (t, e) {\n        var i = this._cells[t + \":\" + e];\n        return i ? i.children : null;\n      }, e.prototype.getChildCellInfo = function (t) {\n        return t._tag;\n      }, e.prototype._removeCell = function (e, i) {\n        if (e) {\n          t.prototype.removeControl.call(this, e);\n\n          for (var r = 0, n = e.children; r < n.length; r++) {\n            var o = n[r],\n                s = this._childControls.indexOf(o);\n\n            -1 !== s && this._childControls.splice(s, 1);\n          }\n\n          delete this._cells[i];\n        }\n      }, e.prototype._offsetCell = function (t, e) {\n        if (this._cells[e]) {\n          this._cells[t] = this._cells[e];\n\n          for (var i = 0, r = this._cells[t].children; i < r.length; i++) {\n            r[i]._tag = t;\n          }\n\n          delete this._cells[e];\n        }\n      }, e.prototype.removeColumnDefinition = function (t) {\n        if (t < 0 || t >= this._columnDefinitions.length) return this;\n\n        for (var e = 0; e < this._rowDefinitions.length; e++) {\n          var i = e + \":\" + t,\n              r = this._cells[i];\n\n          this._removeCell(r, i);\n        }\n\n        for (e = 0; e < this._rowDefinitions.length; e++) {\n          for (var n = t + 1; n < this._columnDefinitions.length; n++) {\n            var o = e + \":\" + (n - 1);\n            i = e + \":\" + n;\n\n            this._offsetCell(o, i);\n          }\n        }\n\n        return this._columnDefinitions.splice(t, 1), this._markAsDirty(), this;\n      }, e.prototype.removeRowDefinition = function (t) {\n        if (t < 0 || t >= this._rowDefinitions.length) return this;\n\n        for (var e = 0; e < this._columnDefinitions.length; e++) {\n          var i = t + \":\" + e,\n              r = this._cells[i];\n\n          this._removeCell(r, i);\n        }\n\n        for (e = 0; e < this._columnDefinitions.length; e++) {\n          for (var n = t + 1; n < this._rowDefinitions.length; n++) {\n            var o = n - 1 + \":\" + e;\n            i = n + \":\" + e;\n\n            this._offsetCell(o, i);\n          }\n        }\n\n        return this._rowDefinitions.splice(t, 1), this._markAsDirty(), this;\n      }, e.prototype.addControl = function (e, i, r) {\n        if (void 0 === i && (i = 0), void 0 === r && (r = 0), 0 === this._rowDefinitions.length && this.addRowDefinition(1, !1), 0 === this._columnDefinitions.length && this.addColumnDefinition(1, !1), -1 !== this._childControls.indexOf(e)) return s.Tools.Warn(\"Control (Name:\" + e.name + \", UniqueId:\" + e.uniqueId + \") is already associated with this grid. You must remove it before reattaching it\"), this;\n        var n = Math.min(i, this._rowDefinitions.length - 1) + \":\" + Math.min(r, this._columnDefinitions.length - 1),\n            o = this._cells[n];\n        return o || (o = new g(n), this._cells[n] = o, o.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, o.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, t.prototype.addControl.call(this, o)), o.addControl(e), this._childControls.push(e), e._tag = n, e.parent = this, this._markAsDirty(), this;\n      }, e.prototype.removeControl = function (t) {\n        var e = this._childControls.indexOf(t);\n\n        -1 !== e && this._childControls.splice(e, 1);\n        var i = this._cells[t._tag];\n        return i && (i.removeControl(t), t._tag = null), this._markAsDirty(), this;\n      }, e.prototype._getTypeName = function () {\n        return \"Grid\";\n      }, e.prototype._getGridDefinitions = function (t) {\n        for (var e = [], i = [], r = [], n = [], o = this._currentMeasure.width, s = 0, a = this._currentMeasure.height, h = 0, l = 0, u = 0, c = this._rowDefinitions; u < c.length; u++) {\n          if ((g = c[u]).isPixel) a -= f = g.getValue(this._host), i[l] = f;else h += g.internalValue;\n          l++;\n        }\n\n        var _ = 0;\n        l = 0;\n\n        for (var d = 0, p = this._rowDefinitions; d < p.length; d++) {\n          var f,\n              g = p[d];\n          if (n.push(_), g.isPixel) _ += g.getValue(this._host);else _ += f = g.internalValue / h * a, i[l] = f;\n          l++;\n        }\n\n        l = 0;\n\n        for (var m = 0, b = this._columnDefinitions; m < b.length; m++) {\n          if ((g = b[m]).isPixel) o -= C = g.getValue(this._host), e[l] = C;else s += g.internalValue;\n          l++;\n        }\n\n        var y = 0;\n        l = 0;\n\n        for (var v = 0, O = this._columnDefinitions; v < O.length; v++) {\n          var C;\n          g = O[v];\n          if (r.push(y), g.isPixel) y += g.getValue(this._host);else y += C = g.internalValue / s * o, e[l] = C;\n          l++;\n        }\n\n        t(r, n, e, i);\n      }, e.prototype._additionalProcessing = function (e, i) {\n        var r = this;\n        this._getGridDefinitions(function (t, e, i, n) {\n          for (var o in r._cells) {\n            if (r._cells.hasOwnProperty(o)) {\n              var s = o.split(\":\"),\n                  a = parseInt(s[0]),\n                  h = parseInt(s[1]),\n                  l = r._cells[o];\n              l.left = t[h] + \"px\", l.top = e[a] + \"px\", l.width = i[h] + \"px\", l.height = n[a] + \"px\", l._left.ignoreAdaptiveScaling = !0, l._top.ignoreAdaptiveScaling = !0, l._width.ignoreAdaptiveScaling = !0, l._height.ignoreAdaptiveScaling = !0;\n            }\n          }\n        }), t.prototype._additionalProcessing.call(this, e, i);\n      }, e.prototype._flagDescendantsAsMatrixDirty = function () {\n        for (var t in this._cells) {\n          if (this._cells.hasOwnProperty(t)) this._cells[t]._markMatrixAsDirty();\n        }\n      }, e.prototype._renderHighlightSpecific = function (e) {\n        var i = this;\n        t.prototype._renderHighlightSpecific.call(this, e), this._getGridDefinitions(function (t, r, n, o) {\n          for (var s = 0; s < t.length; s++) {\n            var a = i._currentMeasure.left + t[s] + n[s];\n            e.beginPath(), e.moveTo(a, i._currentMeasure.top), e.lineTo(a, i._currentMeasure.top + i._currentMeasure.height), e.stroke();\n          }\n\n          for (s = 0; s < r.length; s++) {\n            var h = i._currentMeasure.top + r[s] + o[s];\n            e.beginPath(), e.moveTo(i._currentMeasure.left, h), e.lineTo(i._currentMeasure.left + i._currentMeasure.width, h), e.stroke();\n          }\n        }), e.restore();\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this);\n\n        for (var e = 0, i = this._childControls; e < i.length; e++) {\n          i[e].dispose();\n        }\n\n        this._childControls = [];\n      }, e;\n    }(g);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Grid\"] = P;\n\n    var M = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._value = s.Color3.Red(), i._tmpColor = new s.Color3(), i._pointerStartedOnSquare = !1, i._pointerStartedOnWheel = !1, i._squareLeft = 0, i._squareTop = 0, i._squareSize = 0, i._h = 360, i._s = 1, i._v = 1, i._lastPointerDownID = -1, i.onValueChangedObservable = new s.Observable(), i._pointerIsDown = !1, i.value = new s.Color3(.88, .1, .1), i.size = \"200px\", i.isPointerBlocker = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"value\", {\n        get: function get() {\n          return this._value;\n        },\n        set: function set(t) {\n          this._value.equals(t) || (this._value.copyFrom(t), this._value.toHSVToRef(this._tmpColor), this._h = this._tmpColor.r, this._s = Math.max(this._tmpColor.g, 1e-5), this._v = Math.max(this._tmpColor.b, 1e-5), this._markAsDirty(), this._value.r <= e._Epsilon && (this._value.r = 0), this._value.g <= e._Epsilon && (this._value.g = 0), this._value.b <= e._Epsilon && (this._value.b = 0), this._value.r >= 1 - e._Epsilon && (this._value.r = 1), this._value.g >= 1 - e._Epsilon && (this._value.g = 1), this._value.b >= 1 - e._Epsilon && (this._value.b = 1), this.onValueChangedObservable.notifyObservers(this._value));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"width\", {\n        get: function get() {\n          return this._width.toString(this._host);\n        },\n        set: function set(t) {\n          this._width.toString(this._host) !== t && this._width.fromString(t) && (this._height.fromString(t), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"height\", {\n        get: function get() {\n          return this._height.toString(this._host);\n        },\n        set: function set(t) {\n          this._height.toString(this._host) !== t && this._height.fromString(t) && (this._width.fromString(t), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"size\", {\n        get: function get() {\n          return this.width;\n        },\n        set: function set(t) {\n          this.width = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"ColorPicker\";\n      }, e.prototype._preMeasure = function (t, e) {\n        t.width < t.height ? this._currentMeasure.height = t.width : this._currentMeasure.width = t.height;\n      }, e.prototype._updateSquareProps = function () {\n        var t = .5 * Math.min(this._currentMeasure.width, this._currentMeasure.height),\n            e = 2 * (t - .2 * t) / Math.sqrt(2),\n            i = t - .5 * e;\n        this._squareLeft = this._currentMeasure.left + i, this._squareTop = this._currentMeasure.top + i, this._squareSize = e;\n      }, e.prototype._drawGradientSquare = function (t, e, i, r, n, o) {\n        var s = o.createLinearGradient(e, i, r + e, i);\n        s.addColorStop(0, \"#fff\"), s.addColorStop(1, \"hsl(\" + t + \", 100%, 50%)\"), o.fillStyle = s, o.fillRect(e, i, r, n);\n        var a = o.createLinearGradient(e, i, e, n + i);\n        a.addColorStop(0, \"rgba(0,0,0,0)\"), a.addColorStop(1, \"#000\"), o.fillStyle = a, o.fillRect(e, i, r, n);\n      }, e.prototype._drawCircle = function (t, e, i, r) {\n        r.beginPath(), r.arc(t, e, i + 1, 0, 2 * Math.PI, !1), r.lineWidth = 3, r.strokeStyle = \"#333333\", r.stroke(), r.beginPath(), r.arc(t, e, i, 0, 2 * Math.PI, !1), r.lineWidth = 3, r.strokeStyle = \"#ffffff\", r.stroke();\n      }, e.prototype._createColorWheelCanvas = function (t, e) {\n        var i = document.createElement(\"canvas\");\n        i.width = 2 * t, i.height = 2 * t;\n\n        for (var r = i.getContext(\"2d\"), n = r.getImageData(0, 0, 2 * t, 2 * t), o = n.data, a = this._tmpColor, h = t * t, l = t - e, u = l * l, c = -t; c < t; c++) {\n          for (var _ = -t; _ < t; _++) {\n            var d = c * c + _ * _;\n\n            if (!(d > h || d < u)) {\n              var p = Math.sqrt(d),\n                  f = Math.atan2(_, c);\n              s.Color3.HSVtoRGBToRef(180 * f / Math.PI + 180, p / t, 1, a);\n              var g = 4 * (c + t + 2 * (_ + t) * t);\n              o[g] = 255 * a.r, o[g + 1] = 255 * a.g, o[g + 2] = 255 * a.b;\n              var m = .2;\n              m = t < 50 ? .2 : t > 150 ? .04 : -.16 * (t - 50) / 100 + .2;\n              var b = (p - l) / (t - l);\n              o[g + 3] = b < m ? b / m * 255 : b > 1 - m ? 255 * (1 - (b - (1 - m)) / m) : 255;\n            }\n          }\n        }\n\n        return r.putImageData(n, 0, 0), i;\n      }, e.prototype._draw = function (t) {\n        t.save(), this._applyStates(t);\n        var e = .5 * Math.min(this._currentMeasure.width, this._currentMeasure.height),\n            i = .2 * e,\n            r = this._currentMeasure.left,\n            n = this._currentMeasure.top;\n        this._colorWheelCanvas && this._colorWheelCanvas.width == 2 * e || (this._colorWheelCanvas = this._createColorWheelCanvas(e, i)), this._updateSquareProps(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY, t.fillRect(this._squareLeft, this._squareTop, this._squareSize, this._squareSize)), t.drawImage(this._colorWheelCanvas, r, n), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), this._drawGradientSquare(this._h, this._squareLeft, this._squareTop, this._squareSize, this._squareSize, t);\n        var o = this._squareLeft + this._squareSize * this._s,\n            s = this._squareTop + this._squareSize * (1 - this._v);\n\n        this._drawCircle(o, s, .04 * e, t);\n\n        var a = e - .5 * i;\n        o = r + e + Math.cos((this._h - 180) * Math.PI / 180) * a, s = n + e + Math.sin((this._h - 180) * Math.PI / 180) * a, this._drawCircle(o, s, .35 * i, t), t.restore();\n      }, e.prototype._updateValueFromPointer = function (t, i) {\n        if (this._pointerStartedOnWheel) {\n          var r = .5 * Math.min(this._currentMeasure.width, this._currentMeasure.height),\n              n = r + this._currentMeasure.left,\n              o = r + this._currentMeasure.top;\n          this._h = 180 * Math.atan2(i - o, t - n) / Math.PI + 180;\n        } else this._pointerStartedOnSquare && (this._updateSquareProps(), this._s = (t - this._squareLeft) / this._squareSize, this._v = 1 - (i - this._squareTop) / this._squareSize, this._s = Math.min(this._s, 1), this._s = Math.max(this._s, e._Epsilon), this._v = Math.min(this._v, 1), this._v = Math.max(this._v, e._Epsilon));\n\n        s.Color3.HSVtoRGBToRef(this._h, this._s, this._v, this._tmpColor), this.value = this._tmpColor;\n      }, e.prototype._isPointOnSquare = function (t, e) {\n        this._updateSquareProps();\n\n        var i = this._squareLeft,\n            r = this._squareTop,\n            n = this._squareSize;\n        return t >= i && t <= i + n && e >= r && e <= r + n;\n      }, e.prototype._isPointOnWheel = function (t, e) {\n        var i = .5 * Math.min(this._currentMeasure.width, this._currentMeasure.height),\n            r = i - .2 * i,\n            n = t - (i + this._currentMeasure.left),\n            o = e - (i + this._currentMeasure.top),\n            s = n * n + o * o;\n        return s <= i * i && s >= r * r;\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        if (!t.prototype._onPointerDown.call(this, e, i, r, n, o)) return !1;\n        this._pointerIsDown = !0, this._pointerStartedOnSquare = !1, this._pointerStartedOnWheel = !1, this._invertTransformMatrix.transformCoordinates(i.x, i.y, this._transformedPosition);\n        var s = this._transformedPosition.x,\n            a = this._transformedPosition.y;\n        return this._isPointOnSquare(s, a) ? this._pointerStartedOnSquare = !0 : this._isPointOnWheel(s, a) && (this._pointerStartedOnWheel = !0), this._updateValueFromPointer(s, a), this._host._capturingControl[r] = this, this._lastPointerDownID = r, !0;\n      }, e.prototype._onPointerMove = function (e, i, r, n) {\n        if (r == this._lastPointerDownID) {\n          this._invertTransformMatrix.transformCoordinates(i.x, i.y, this._transformedPosition);\n\n          var o = this._transformedPosition.x,\n              s = this._transformedPosition.y;\n          this._pointerIsDown && this._updateValueFromPointer(o, s), t.prototype._onPointerMove.call(this, e, i, r, n);\n        }\n      }, e.prototype._onPointerUp = function (e, i, r, n, o, s) {\n        this._pointerIsDown = !1, delete this._host._capturingControl[r], t.prototype._onPointerUp.call(this, e, i, r, n, o, s);\n      }, e.prototype._onCanvasBlur = function () {\n        this._forcePointerUp(), t.prototype._onCanvasBlur.call(this);\n      }, e.ShowPickerDialogAsync = function (t, i) {\n        return new Promise(function (r, n) {\n          i.pickerWidth = i.pickerWidth || \"640px\", i.pickerHeight = i.pickerHeight || \"400px\", i.headerHeight = i.headerHeight || \"35px\", i.lastColor = i.lastColor || \"#000000\", i.swatchLimit = i.swatchLimit || 20, i.numSwatchesPerLine = i.numSwatchesPerLine || 10;\n\n          var o,\n              a,\n              h,\n              l,\n              u,\n              c,\n              _,\n              d,\n              p,\n              g,\n              m,\n              v,\n              C,\n              T,\n              w,\n              M,\n              I,\n              k,\n              A,\n              S = i.swatchLimit / i.numSwatchesPerLine,\n              E = parseFloat(i.pickerWidth) / i.numSwatchesPerLine,\n              D = Math.floor(.25 * E),\n              L = D * (i.numSwatchesPerLine + 1),\n              R = Math.floor((parseFloat(i.pickerWidth) - L) / i.numSwatchesPerLine),\n              B = R * S + D * (S + 1),\n              N = (parseInt(i.pickerHeight) + B + Math.floor(.25 * R)).toString() + \"px\",\n              H = s.Color3.FromHexString(\"#dddddd\"),\n              V = H.r + H.g + H.b,\n              W = [\"R\", \"G\", \"B\"],\n              F = !1;\n\n          function j(t, e) {\n            A = e;\n            var i = t.toHexString();\n\n            if (I.background = i, g.name != A && (g.text = Math.floor(255 * t.r).toString()), m.name != A && (m.text = Math.floor(255 * t.g).toString()), v.name != A && (v.text = Math.floor(255 * t.b).toString()), C.name != A && (C.text = t.r.toString()), T.name != A && (T.text = t.g.toString()), w.name != A && (w.text = t.b.toString()), M.name != A) {\n              var r = i.split(\"#\");\n              M.text = r[1];\n            }\n\n            p.name != A && (p.value = t);\n          }\n\n          function z(t, e) {\n            var i = t.text;\n            if (/[^0-9]/g.test(i)) t.text = k;else if (\"\" != i && (Math.floor(parseInt(i)) < 0 ? i = \"0\" : Math.floor(parseInt(i)) > 255 ? i = \"255\" : isNaN(parseInt(i)) && (i = \"0\")), A == t.name && (k = i), \"\" != i) {\n              i = parseInt(i).toString(), t.text = i;\n              var r = s.Color3.FromHexString(I.background);\n              A == t.name && j(\"r\" == e ? new s.Color3(parseInt(i) / 255, r.g, r.b) : \"g\" == e ? new s.Color3(r.r, parseInt(i) / 255, r.b) : new s.Color3(r.r, r.g, parseInt(i) / 255), t.name);\n            }\n          }\n\n          function G(t, e) {\n            var i = t.text;\n            if (/[^0-9\\.]/g.test(i)) t.text = k;else {\n              \"\" != i && \".\" != i && 0 != parseFloat(i) && (parseFloat(i) < 0 ? i = \"0.0\" : parseFloat(i) > 1 ? i = \"1.0\" : isNaN(parseFloat(i)) && (i = \"0.0\")), A == t.name && (k = i), \"\" != i && \".\" != i && 0 != parseFloat(i) ? (i = parseFloat(i).toString(), t.text = i) : i = \"0.0\";\n              var r = s.Color3.FromHexString(I.background);\n              A == t.name && j(\"r\" == e ? new s.Color3(parseFloat(i), r.g, r.b) : \"g\" == e ? new s.Color3(r.r, parseFloat(i), r.b) : new s.Color3(r.r, r.g, parseFloat(i)), t.name);\n            }\n          }\n\n          function X() {\n            if (i.savedColors && i.savedColors[_]) {\n              if (F) var t = \"b\";else t = \"\";\n              var e = O.CreateSimpleButton(\"Swatch_\" + _, t);\n              e.fontFamily = \"BabylonJSglyphs\";\n              var r = s.Color3.FromHexString(i.savedColors[_]),\n                  n = r.r + r.g + r.b;\n              e.color = n > V ? \"#aaaaaa\" : \"#ffffff\", e.fontSize = Math.floor(.7 * R), e.textBlock.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, e.height = e.width = R.toString() + \"px\", e.background = i.savedColors[_], e.thickness = 2;\n              var o = _;\n              return e.pointerDownAnimation = function () {\n                e.thickness = 4;\n              }, e.pointerUpAnimation = function () {\n                e.thickness = 3;\n              }, e.pointerEnterAnimation = function () {\n                e.thickness = 3;\n              }, e.pointerOutAnimation = function () {\n                e.thickness = 2;\n              }, e.onPointerClickObservable.add(function () {\n                var t;\n                F ? (t = o, i.savedColors && i.savedColors.splice(t, 1), i.savedColors && 0 == i.savedColors.length && (q(!1), F = !1), Y(\"\", It)) : i.savedColors && j(s.Color3.FromHexString(i.savedColors[o]), e.name);\n              }), e;\n            }\n\n            return null;\n          }\n\n          function U(t) {\n            if (void 0 !== t && (F = t), F) {\n              for (var e = 0; e < d.children.length; e++) {\n                d.children[e].textBlock.text = \"b\";\n              }\n\n              void 0 !== h && (h.textBlock.text = \"Done\");\n            } else {\n              for (e = 0; e < d.children.length; e++) {\n                d.children[e].textBlock.text = \"\";\n              }\n\n              void 0 !== h && (h.textBlock.text = \"Edit\");\n            }\n          }\n\n          function Y(t, e) {\n            if (i.savedColors) {\n              \"\" != t && i.savedColors.push(t), _ = 0, d.clearControls();\n              var r = Math.ceil(i.savedColors.length / i.numSwatchesPerLine);\n              if (0 == r) var n = 0;else n = r + 1;\n\n              if (d.rowCount != r + n) {\n                for (var o = d.rowCount, s = 0; s < o; s++) {\n                  d.removeRowDefinition(0);\n                }\n\n                for (s = 0; s < r + n; s++) {\n                  s % 2 ? d.addRowDefinition(R, !0) : d.addRowDefinition(D, !0);\n                }\n              }\n\n              d.height = (R * r + n * D).toString() + \"px\";\n\n              for (var a = 1, h = 1; a < r + n; a += 2, h++) {\n                if (i.savedColors.length > h * i.numSwatchesPerLine) var l = i.numSwatchesPerLine;else l = i.savedColors.length - (h - 1) * i.numSwatchesPerLine;\n\n                for (var u = Math.min(Math.max(l, 0), i.numSwatchesPerLine), c = 0, p = 1; c < u; c++) {\n                  if (!(c > i.numSwatchesPerLine)) {\n                    var f = X();\n                    null != f && (d.addControl(f, a, p), p += 2, _++);\n                  }\n                }\n              }\n\n              i.savedColors.length >= i.swatchLimit ? K(e, !0) : K(e, !1);\n            }\n          }\n\n          function q(t) {\n            t ? ((h = O.CreateSimpleButton(\"butEdit\", \"Edit\")).width = l, h.height = u, h.left = Math.floor(.1 * parseInt(l)).toString() + \"px\", h.top = (-1 * parseFloat(h.left)).toString() + \"px\", h.verticalAlignment = f.VERTICAL_ALIGNMENT_BOTTOM, h.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, h.thickness = 2, h.color = \"#c0c0c0\", h.fontSize = a, h.background = \"#535353\", h.onPointerEnterObservable.add(function () {\n              h.background = \"#414141\";\n            }), h.onPointerOutObservable.add(function () {\n              h.background = \"#535353\";\n            }), h.pointerDownAnimation = function () {\n              h.background = \"515151\";\n            }, h.pointerUpAnimation = function () {\n              h.background = \"#414141\";\n            }, h.onPointerClickObservable.add(function () {\n              F = !F, U();\n            }), ut.addControl(h, 1, 0)) : ut.removeControl(h);\n          }\n\n          function K(t, e) {\n            e ? (t.color = \"#555555\", t.background = \"#454545\") : (t.color = \"#c0c0c0\", t.background = \"#535353\");\n          }\n\n          function Z(e) {\n            i.savedColors && i.savedColors.length > 0 ? r({\n              savedColors: i.savedColors,\n              pickedColor: e\n            }) : r({\n              pickedColor: e\n            }), t.removeControl(J);\n          }\n\n          var J = new P();\n\n          if (J.name = \"Dialog Container\", J.width = i.pickerWidth, i.savedColors) {\n            J.height = N;\n            var Q = parseInt(i.pickerHeight) / parseInt(N);\n            J.addRowDefinition(Q, !1), J.addRowDefinition(1 - Q, !1);\n          } else J.height = i.pickerHeight, J.addRowDefinition(1, !1);\n\n          if (t.addControl(J), i.savedColors) {\n            (d = new P()).name = \"Swatch Drawer\", d.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, d.background = \"#535353\", d.width = i.pickerWidth;\n            var $ = i.savedColors.length / i.numSwatchesPerLine;\n            if (0 == $) var tt = 0;else tt = $ + 1;\n            d.height = (R * $ + tt * D).toString() + \"px\", d.top = Math.floor(.25 * R).toString() + \"px\";\n\n            for (var et = 0; et < 2 * Math.ceil(i.savedColors.length / i.numSwatchesPerLine) + 1; et++) {\n              et % 2 != 0 ? d.addRowDefinition(R, !0) : d.addRowDefinition(D, !0);\n            }\n\n            for (et = 0; et < 2 * i.numSwatchesPerLine + 1; et++) {\n              et % 2 != 0 ? d.addColumnDefinition(R, !0) : d.addColumnDefinition(D, !0);\n            }\n\n            J.addControl(d, 1, 0);\n          }\n\n          var it = new P();\n          it.name = \"Picker Panel\", it.height = i.pickerHeight;\n          var rt = parseInt(i.headerHeight) / parseInt(i.pickerHeight),\n              nt = [rt, 1 - rt];\n          it.addRowDefinition(nt[0], !1), it.addRowDefinition(nt[1], !1), J.addControl(it, 0, 0);\n          var ot = new b();\n          ot.name = \"Dialogue Header Bar\", ot.background = \"#cccccc\", ot.thickness = 0, it.addControl(ot, 0, 0);\n          var st = O.CreateSimpleButton(\"closeButton\", \"a\");\n          st.fontFamily = \"BabylonJSglyphs\";\n          var at = s.Color3.FromHexString(ot.background);\n          o = new s.Color3(1 - at.r, 1 - at.g, 1 - at.b), st.color = o.toHexString(), st.fontSize = Math.floor(.6 * parseInt(i.headerHeight)), st.textBlock.textVerticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, st.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_RIGHT, st.height = st.width = i.headerHeight, st.background = ot.background, st.thickness = 0, st.pointerDownAnimation = function () {}, st.pointerUpAnimation = function () {\n            st.background = ot.background;\n          }, st.pointerEnterAnimation = function () {\n            st.color = ot.background, st.background = \"red\";\n          }, st.pointerOutAnimation = function () {\n            st.color = o.toHexString(), st.background = ot.background;\n          }, st.onPointerClickObservable.add(function () {\n            Z(Ct.background);\n          }), it.addControl(st, 0, 0);\n          var ht = new P();\n          ht.name = \"Dialogue Body\", ht.background = \"#535353\";\n          var lt = [.4375, .5625];\n          ht.addRowDefinition(1, !1), ht.addColumnDefinition(lt[0], !1), ht.addColumnDefinition(lt[1], !1), it.addControl(ht, 1, 0);\n          var ut = new P();\n          ut.name = \"Picker Grid\", ut.addRowDefinition(.85, !1), ut.addRowDefinition(.15, !1), ht.addControl(ut, 0, 0), (p = new e()).name = \"GUI Color Picker\", i.pickerHeight < i.pickerWidth ? p.width = .89 : p.height = .89, p.value = s.Color3.FromHexString(i.lastColor), p.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, p.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, p.onPointerDownObservable.add(function () {\n            A = p.name, k = \"\", U(!1);\n          }), p.onValueChangedObservable.add(function (t) {\n            A == p.name && j(t, p.name);\n          }), ut.addControl(p, 0, 0);\n          var ct = new P();\n          ct.name = \"Dialogue Right Half\", ct.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT;\n          var _t = [.514, .486];\n          ct.addRowDefinition(_t[0], !1), ct.addRowDefinition(_t[1], !1), ht.addControl(ct, 1, 1);\n          var dt = new P();\n          dt.name = \"Swatches and Buttons\";\n          var pt = [.417, .583];\n          dt.addRowDefinition(1, !1), dt.addColumnDefinition(pt[0], !1), dt.addColumnDefinition(pt[1], !1), ct.addControl(dt, 0, 0);\n          var ft = new P();\n          ft.name = \"New and Current Swatches\";\n          var gt = [.04, .16, .64, .16];\n          ft.addRowDefinition(gt[0], !1), ft.addRowDefinition(gt[1], !1), ft.addRowDefinition(gt[2], !1), ft.addRowDefinition(gt[3], !1), dt.addControl(ft, 0, 0);\n          var mt = new P();\n          mt.name = \"Active Swatches\", mt.width = .67, mt.addRowDefinition(.5, !1), mt.addRowDefinition(.5, !1), ft.addControl(mt, 2, 0);\n          var bt = Math.floor(parseInt(i.pickerWidth) * lt[1] * pt[0] * .11),\n              yt = Math.floor(parseInt(i.pickerHeight) * nt[1] * _t[0] * gt[1] * .5);\n          if (i.pickerWidth > i.pickerHeight) var vt = yt;else vt = bt;\n          var Ot = new y();\n          Ot.text = \"new\", Ot.name = \"New Color Label\", Ot.color = \"#c0c0c0\", Ot.fontSize = vt, ft.addControl(Ot, 1, 0), (I = new b()).name = \"New Color Swatch\", I.background = i.lastColor, I.thickness = 0, mt.addControl(I, 0, 0);\n          var Ct = O.CreateSimpleButton(\"currentSwatch\", \"\");\n          Ct.background = i.lastColor, Ct.thickness = 0, Ct.onPointerClickObservable.add(function () {\n            j(s.Color3.FromHexString(Ct.background), Ct.name), U(!1);\n          }), Ct.pointerDownAnimation = function () {}, Ct.pointerUpAnimation = function () {}, Ct.pointerEnterAnimation = function () {}, Ct.pointerOutAnimation = function () {}, mt.addControl(Ct, 1, 0);\n          var Tt = new b();\n          Tt.name = \"Swatch Outline\", Tt.width = .67, Tt.thickness = 2, Tt.color = \"#404040\", Tt.isHitTestVisible = !1, ft.addControl(Tt, 2, 0);\n          var wt = new y();\n          wt.name = \"Current Color Label\", wt.text = \"current\", wt.color = \"#c0c0c0\", wt.fontSize = vt, ft.addControl(wt, 3, 0);\n          var xt = new P();\n          xt.name = \"Button Grid\", xt.height = .8;\n          xt.addRowDefinition(1 / 3, !1), xt.addRowDefinition(1 / 3, !1), xt.addRowDefinition(1 / 3, !1), dt.addControl(xt, 0, 1), l = Math.floor(parseInt(i.pickerWidth) * lt[1] * pt[1] * .67).toString() + \"px\", u = Math.floor(parseInt(i.pickerHeight) * nt[1] * _t[0] * (parseFloat(xt.height.toString()) / 100) * (1 / 3) * .7).toString() + \"px\", a = parseFloat(l) > parseFloat(u) ? Math.floor(.45 * parseFloat(u)) : Math.floor(.11 * parseFloat(l));\n          var Pt = O.CreateSimpleButton(\"butOK\", \"OK\");\n          Pt.width = l, Pt.height = u, Pt.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, Pt.thickness = 2, Pt.color = \"#c0c0c0\", Pt.fontSize = a, Pt.background = \"#535353\", Pt.onPointerEnterObservable.add(function () {\n            Pt.background = \"#414141\";\n          }), Pt.onPointerOutObservable.add(function () {\n            Pt.background = \"#535353\";\n          }), Pt.pointerDownAnimation = function () {\n            Pt.background = \"515151\";\n          }, Pt.pointerUpAnimation = function () {\n            Pt.background = \"#414141\";\n          }, Pt.onPointerClickObservable.add(function () {\n            U(!1), Z(I.background);\n          }), xt.addControl(Pt, 0, 0);\n          var Mt = O.CreateSimpleButton(\"butCancel\", \"Cancel\");\n\n          if (Mt.width = l, Mt.height = u, Mt.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, Mt.thickness = 2, Mt.color = \"#c0c0c0\", Mt.fontSize = a, Mt.background = \"#535353\", Mt.onPointerEnterObservable.add(function () {\n            Mt.background = \"#414141\";\n          }), Mt.onPointerOutObservable.add(function () {\n            Mt.background = \"#535353\";\n          }), Mt.pointerDownAnimation = function () {\n            Mt.background = \"515151\";\n          }, Mt.pointerUpAnimation = function () {\n            Mt.background = \"#414141\";\n          }, Mt.onPointerClickObservable.add(function () {\n            U(!1), Z(Ct.background);\n          }), xt.addControl(Mt, 1, 0), i.savedColors) {\n            var It = O.CreateSimpleButton(\"butSave\", \"Save\");\n            It.width = l, It.height = u, It.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, It.thickness = 2, It.fontSize = a, i.savedColors.length < i.swatchLimit ? (It.color = \"#c0c0c0\", It.background = \"#535353\") : K(It, !0), It.onPointerEnterObservable.add(function () {\n              i.savedColors && i.savedColors.length < i.swatchLimit && (It.background = \"#414141\");\n            }), It.onPointerOutObservable.add(function () {\n              i.savedColors && i.savedColors.length < i.swatchLimit && (It.background = \"#535353\");\n            }), It.pointerDownAnimation = function () {\n              i.savedColors && i.savedColors.length < i.swatchLimit && (It.background = \"515151\");\n            }, It.pointerUpAnimation = function () {\n              i.savedColors && i.savedColors.length < i.swatchLimit && (It.background = \"#414141\");\n            }, It.onPointerClickObservable.add(function () {\n              i.savedColors && (0 == i.savedColors.length && q(!0), i.savedColors.length < i.swatchLimit && Y(I.background, It), U(!1));\n            }), i.savedColors.length > 0 && q(!0), xt.addControl(It, 2, 0);\n          }\n\n          var kt = new P();\n          kt.name = \"Dialog Lower Right\", kt.addRowDefinition(.02, !1), kt.addRowDefinition(.63, !1), kt.addRowDefinition(.21, !1), kt.addRowDefinition(.14, !1), ct.addControl(kt, 1, 0), c = s.Color3.FromHexString(i.lastColor);\n          var At = new P();\n          At.name = \"RGB Values\", At.width = .82, At.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, At.addRowDefinition(1 / 3, !1), At.addRowDefinition(1 / 3, !1), At.addRowDefinition(1 / 3, !1), At.addColumnDefinition(.1, !1), At.addColumnDefinition(.2, !1), At.addColumnDefinition(.7, !1), kt.addControl(At, 1, 0);\n\n          for (et = 0; et < W.length; et++) {\n            (St = new y()).text = W[et], St.color = \"#c0c0c0\", St.fontSize = a, At.addControl(St, et, 0);\n          }\n\n          (g = new x()).width = .83, g.height = .72, g.name = \"rIntField\", g.fontSize = a, g.text = (255 * c.r).toString(), g.color = \"#f0f0f0\", g.background = \"#454545\", g.onFocusObservable.add(function () {\n            A = g.name, k = g.text, U(!1);\n          }), g.onBlurObservable.add(function () {\n            \"\" == g.text && (g.text = \"0\"), z(g, \"r\"), A == g.name && (A = \"\");\n          }), g.onTextChangedObservable.add(function () {\n            A == g.name && z(g, \"r\");\n          }), At.addControl(g, 0, 1), (m = new x()).width = .83, m.height = .72, m.name = \"gIntField\", m.fontSize = a, m.text = (255 * c.g).toString(), m.color = \"#f0f0f0\", m.background = \"#454545\", m.onFocusObservable.add(function () {\n            A = m.name, k = m.text, U(!1);\n          }), m.onBlurObservable.add(function () {\n            \"\" == m.text && (m.text = \"0\"), z(m, \"g\"), A == m.name && (A = \"\");\n          }), m.onTextChangedObservable.add(function () {\n            A == m.name && z(m, \"g\");\n          }), At.addControl(m, 1, 1), (v = new x()).width = .83, v.height = .72, v.name = \"bIntField\", v.fontSize = a, v.text = (255 * c.b).toString(), v.color = \"#f0f0f0\", v.background = \"#454545\", v.onFocusObservable.add(function () {\n            A = v.name, k = v.text, U(!1);\n          }), v.onBlurObservable.add(function () {\n            \"\" == v.text && (v.text = \"0\"), z(v, \"b\"), A == v.name && (A = \"\");\n          }), v.onTextChangedObservable.add(function () {\n            A == v.name && z(v, \"b\");\n          }), At.addControl(v, 2, 1), (C = new x()).width = .95, C.height = .72, C.name = \"rDecField\", C.fontSize = a, C.text = c.r.toString(), C.color = \"#f0f0f0\", C.background = \"#454545\", C.onFocusObservable.add(function () {\n            A = C.name, k = C.text, U(!1);\n          }), C.onBlurObservable.add(function () {\n            0 != parseFloat(C.text) && \"\" != C.text || (C.text = \"0\", G(C, \"r\")), A == C.name && (A = \"\");\n          }), C.onTextChangedObservable.add(function () {\n            A == C.name && G(C, \"r\");\n          }), At.addControl(C, 0, 2), (T = new x()).width = .95, T.height = .72, T.name = \"gDecField\", T.fontSize = a, T.text = c.g.toString(), T.color = \"#f0f0f0\", T.background = \"#454545\", T.onFocusObservable.add(function () {\n            A = T.name, k = T.text, U(!1);\n          }), T.onBlurObservable.add(function () {\n            0 != parseFloat(T.text) && \"\" != T.text || (T.text = \"0\", G(T, \"g\")), A == T.name && (A = \"\");\n          }), T.onTextChangedObservable.add(function () {\n            A == T.name && G(T, \"g\");\n          }), At.addControl(T, 1, 2), (w = new x()).width = .95, w.height = .72, w.name = \"bDecField\", w.fontSize = a, w.text = c.b.toString(), w.color = \"#f0f0f0\", w.background = \"#454545\", w.onFocusObservable.add(function () {\n            A = w.name, k = w.text, U(!1);\n          }), w.onBlurObservable.add(function () {\n            0 != parseFloat(w.text) && \"\" != w.text || (w.text = \"0\", G(w, \"b\")), A == w.name && (A = \"\");\n          }), w.onTextChangedObservable.add(function () {\n            A == w.name && G(w, \"b\");\n          }), At.addControl(w, 2, 2);\n          var St,\n              Et = new P();\n          Et.name = \"Hex Value\", Et.width = .82, Et.addRowDefinition(1, !1), Et.addColumnDefinition(.1, !1), Et.addColumnDefinition(.9, !1), kt.addControl(Et, 2, 0), (St = new y()).text = \"#\", St.color = \"#c0c0c0\", St.fontSize = a, Et.addControl(St, 0, 0), (M = new x()).width = .96, M.height = .72, M.name = \"hexField\", M.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, M.fontSize = a;\n          var Dt = i.lastColor.split(\"#\");\n          M.text = Dt[1], M.color = \"#f0f0f0\", M.background = \"#454545\", M.onFocusObservable.add(function () {\n            A = M.name, k = M.text, U(!1);\n          }), M.onBlurObservable.add(function () {\n            if (3 == M.text.length) {\n              var t = M.text.split(\"\");\n              M.text = t[0] + t[0] + t[1] + t[1] + t[2] + t[2];\n            }\n\n            \"\" == M.text && (M.text = \"000000\", j(s.Color3.FromHexString(M.text), \"b\")), A == M.name && (A = \"\");\n          }), M.onTextChangedObservable.add(function () {\n            var t = M.text,\n                e = /[^0-9A-F]/i.test(t);\n            if ((M.text.length > 6 || e) && A == M.name) M.text = k;else {\n              if (M.text.length < 6) for (var i = 6 - M.text.length, r = 0; r < i; r++) {\n                t = \"0\" + t;\n              }\n\n              if (3 == M.text.length) {\n                var n = M.text.split(\"\");\n                t = n[0] + n[0] + n[1] + n[1] + n[2] + n[2];\n              }\n\n              t = \"#\" + t, A == M.name && (k = M.text, j(s.Color3.FromHexString(t), M.name));\n            }\n          }), Et.addControl(M, 0, 1), i.savedColors && i.savedColors.length > 0 && Y(\"\", It);\n        });\n      }, e._Epsilon = 1e-6, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.ColorPicker\"] = M;\n\n    var I = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._thickness = 1, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"thickness\", {\n        get: function get() {\n          return this._thickness;\n        },\n        set: function set(t) {\n          this._thickness !== t && (this._thickness = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Ellipse\";\n      }, e.prototype._localDraw = function (t) {\n        t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), f.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, t), this._background && (t.fillStyle = this._background, t.fill()), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), this._thickness && (this.color && (t.strokeStyle = this.color), t.lineWidth = this._thickness, t.stroke()), t.restore();\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._measureForChildren.width -= 2 * this._thickness, this._measureForChildren.height -= 2 * this._thickness, this._measureForChildren.left += this._thickness, this._measureForChildren.top += this._thickness;\n      }, e.prototype._clipForChildren = function (t) {\n        f.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, this._currentMeasure.width / 2, this._currentMeasure.height / 2, t), t.clip();\n      }, e;\n    }(g);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Ellipse\"] = I;\n\n    var k = function (t) {\n      function e() {\n        return null !== t && t.apply(this, arguments) || this;\n      }\n\n      return n(e, t), e.prototype._beforeRenderText = function (t) {\n        for (var e = new w(), i = \"\", r = 0; r < t.length; r++) {\n          i += \"•\";\n        }\n\n        return e.text = i, e;\n      }, e;\n    }(x);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.InputPassword\"] = k;\n\n    var A = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._lineWidth = 1, i._x1 = new a(0), i._y1 = new a(0), i._x2 = new a(0), i._y2 = new a(0), i._dash = new Array(), i._automaticSize = !0, i.isHitTestVisible = !1, i._horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, i._verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"dash\", {\n        get: function get() {\n          return this._dash;\n        },\n        set: function set(t) {\n          this._dash !== t && (this._dash = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"connectedControl\", {\n        get: function get() {\n          return this._connectedControl;\n        },\n        set: function set(t) {\n          var e = this;\n          this._connectedControl !== t && (this._connectedControlDirtyObserver && this._connectedControl && (this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver), this._connectedControlDirtyObserver = null), t && (this._connectedControlDirtyObserver = t.onDirtyObservable.add(function () {\n            return e._markAsDirty();\n          })), this._connectedControl = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"x1\", {\n        get: function get() {\n          return this._x1.toString(this._host);\n        },\n        set: function set(t) {\n          this._x1.toString(this._host) !== t && this._x1.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"y1\", {\n        get: function get() {\n          return this._y1.toString(this._host);\n        },\n        set: function set(t) {\n          this._y1.toString(this._host) !== t && this._y1.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"x2\", {\n        get: function get() {\n          return this._x2.toString(this._host);\n        },\n        set: function set(t) {\n          this._x2.toString(this._host) !== t && this._x2.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"y2\", {\n        get: function get() {\n          return this._y2.toString(this._host);\n        },\n        set: function set(t) {\n          this._y2.toString(this._host) !== t && this._y2.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"lineWidth\", {\n        get: function get() {\n          return this._lineWidth;\n        },\n        set: function set(t) {\n          this._lineWidth !== t && (this._lineWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"horizontalAlignment\", {\n        set: function set(t) {},\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalAlignment\", {\n        set: function set(t) {},\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"_effectiveX2\", {\n        get: function get() {\n          return (this._connectedControl ? this._connectedControl.centerX : 0) + this._x2.getValue(this._host);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"_effectiveY2\", {\n        get: function get() {\n          return (this._connectedControl ? this._connectedControl.centerY : 0) + this._y2.getValue(this._host);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Line\";\n      }, e.prototype._draw = function (t) {\n        t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), this._applyStates(t), t.strokeStyle = this.color, t.lineWidth = this._lineWidth, t.setLineDash(this._dash), t.beginPath(), t.moveTo(this._cachedParentMeasure.left + this._x1.getValue(this._host), this._cachedParentMeasure.top + this._y1.getValue(this._host)), t.lineTo(this._cachedParentMeasure.left + this._effectiveX2, this._cachedParentMeasure.top + this._effectiveY2), t.stroke(), t.restore();\n      }, e.prototype._measure = function () {\n        this._currentMeasure.width = Math.abs(this._x1.getValue(this._host) - this._effectiveX2) + this._lineWidth, this._currentMeasure.height = Math.abs(this._y1.getValue(this._host) - this._effectiveY2) + this._lineWidth;\n      }, e.prototype._computeAlignment = function (t, e) {\n        this._currentMeasure.left = t.left + Math.min(this._x1.getValue(this._host), this._effectiveX2) - this._lineWidth / 2, this._currentMeasure.top = t.top + Math.min(this._y1.getValue(this._host), this._effectiveY2) - this._lineWidth / 2;\n      }, e.prototype.moveToVector3 = function (t, e, i) {\n        if (void 0 === i && (i = !1), this._host && this.parent === this._host._rootContainer) {\n          var r = this._host._getGlobalViewport(e),\n              n = s.Vector3.Project(t, s.Matrix.Identity(), e.getTransformMatrix(), r);\n\n          this._moveToProjectedPosition(n, i), n.z < 0 || n.z > 1 ? this.notRenderable = !0 : this.notRenderable = !1;\n        } else s.Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\n      }, e.prototype._moveToProjectedPosition = function (t, e) {\n        void 0 === e && (e = !1);\n        var i = t.x + this._linkOffsetX.getValue(this._host) + \"px\",\n            r = t.y + this._linkOffsetY.getValue(this._host) + \"px\";\n        e ? (this.x2 = i, this.y2 = r, this._x2.ignoreAdaptiveScaling = !0, this._y2.ignoreAdaptiveScaling = !0) : (this.x1 = i, this.y1 = r, this._x1.ignoreAdaptiveScaling = !0, this._y1.ignoreAdaptiveScaling = !0);\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Line\"] = A;\n\n    var S = function () {\n      function t(t) {\n        this._multiLine = t, this._x = new a(0), this._y = new a(0), this._point = new s.Vector3(0, 0, 0);\n      }\n\n      return Object.defineProperty(t.prototype, \"x\", {\n        get: function get() {\n          return this._x.toString(this._multiLine._host);\n        },\n        set: function set(t) {\n          this._x.toString(this._multiLine._host) !== t && this._x.fromString(t) && this._multiLine._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"y\", {\n        get: function get() {\n          return this._y.toString(this._multiLine._host);\n        },\n        set: function set(t) {\n          this._y.toString(this._multiLine._host) !== t && this._y.fromString(t) && this._multiLine._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"control\", {\n        get: function get() {\n          return this._control;\n        },\n        set: function set(t) {\n          this._control !== t && (this._control && this._controlObserver && (this._control.onDirtyObservable.remove(this._controlObserver), this._controlObserver = null), this._control = t, this._control && (this._controlObserver = this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)), this._multiLine._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"mesh\", {\n        get: function get() {\n          return this._mesh;\n        },\n        set: function set(t) {\n          this._mesh !== t && (this._mesh && this._meshObserver && this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver), this._mesh = t, this._mesh && (this._meshObserver = this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)), this._multiLine._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.resetLinks = function () {\n        this.control = null, this.mesh = null;\n      }, t.prototype.translate = function () {\n        return this._point = this._translatePoint(), this._point;\n      }, t.prototype._translatePoint = function () {\n        if (null != this._mesh) return this._multiLine._host.getProjectedPositionWithZ(this._mesh.getBoundingInfo().boundingSphere.center, this._mesh.getWorldMatrix());\n        if (null != this._control) return new s.Vector3(this._control.centerX, this._control.centerY, 1 - s.Epsilon);\n\n        var t = this._multiLine._host,\n            e = this._x.getValueInPixel(t, Number(t._canvas.width)),\n            i = this._y.getValueInPixel(t, Number(t._canvas.height));\n\n        return new s.Vector3(e, i, 1 - s.Epsilon);\n      }, t.prototype.dispose = function () {\n        this.resetLinks();\n      }, t;\n    }(),\n        E = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._lineWidth = 1, i.onPointUpdate = function () {\n          i._markAsDirty();\n        }, i._automaticSize = !0, i.isHitTestVisible = !1, i._horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, i._verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, i._dash = [], i._points = [], i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"dash\", {\n        get: function get() {\n          return this._dash;\n        },\n        set: function set(t) {\n          this._dash !== t && (this._dash = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.getAt = function (t) {\n        return this._points[t] || (this._points[t] = new S(this)), this._points[t];\n      }, e.prototype.add = function () {\n        for (var t = this, e = [], i = 0; i < arguments.length; i++) {\n          e[i] = arguments[i];\n        }\n\n        return e.map(function (e) {\n          return t.push(e);\n        });\n      }, e.prototype.push = function (t) {\n        var e = this.getAt(this._points.length);\n        return null == t || (t instanceof s.AbstractMesh ? e.mesh = t : t instanceof f ? e.control = t : null != t.x && null != t.y && (e.x = t.x, e.y = t.y)), e;\n      }, e.prototype.remove = function (t) {\n        var e;\n\n        if (t instanceof S) {\n          if (-1 === (e = this._points.indexOf(t))) return;\n        } else e = t;\n\n        var i = this._points[e];\n        i && (i.dispose(), this._points.splice(e, 1));\n      }, e.prototype.reset = function () {\n        for (; this._points.length > 0;) {\n          this.remove(this._points.length - 1);\n        }\n      }, e.prototype.resetLinks = function () {\n        this._points.forEach(function (t) {\n          null != t && t.resetLinks();\n        });\n      }, Object.defineProperty(e.prototype, \"lineWidth\", {\n        get: function get() {\n          return this._lineWidth;\n        },\n        set: function set(t) {\n          this._lineWidth !== t && (this._lineWidth = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"horizontalAlignment\", {\n        set: function set(t) {},\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalAlignment\", {\n        set: function set(t) {},\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"MultiLine\";\n      }, e.prototype._draw = function (t, e) {\n        t.save(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), this._applyStates(t), t.strokeStyle = this.color, t.lineWidth = this._lineWidth, t.setLineDash(this._dash), t.beginPath();\n        var i,\n            r = !0;\n        this._points.forEach(function (e) {\n          e && (r ? (t.moveTo(e._point.x, e._point.y), r = !1) : e._point.z < 1 && i.z < 1 ? t.lineTo(e._point.x, e._point.y) : t.moveTo(e._point.x, e._point.y), i = e._point);\n        }), t.stroke(), t.restore();\n      }, e.prototype._additionalProcessing = function (t, e) {\n        var i = this;\n        this._minX = null, this._minY = null, this._maxX = null, this._maxY = null, this._points.forEach(function (t, e) {\n          t && (t.translate(), (null == i._minX || t._point.x < i._minX) && (i._minX = t._point.x), (null == i._minY || t._point.y < i._minY) && (i._minY = t._point.y), (null == i._maxX || t._point.x > i._maxX) && (i._maxX = t._point.x), (null == i._maxY || t._point.y > i._maxY) && (i._maxY = t._point.y));\n        }), null == this._minX && (this._minX = 0), null == this._minY && (this._minY = 0), null == this._maxX && (this._maxX = 0), null == this._maxY && (this._maxY = 0);\n      }, e.prototype._measure = function () {\n        null != this._minX && null != this._maxX && null != this._minY && null != this._maxY && (this._currentMeasure.width = Math.abs(this._maxX - this._minX) + this._lineWidth, this._currentMeasure.height = Math.abs(this._maxY - this._minY) + this._lineWidth);\n      }, e.prototype._computeAlignment = function (t, e) {\n        null != this._minX && null != this._minY && (this._currentMeasure.left = this._minX - this._lineWidth / 2, this._currentMeasure.top = this._minY - this._lineWidth / 2);\n      }, e.prototype.dispose = function () {\n        this.reset(), t.prototype.dispose.call(this);\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.MultiLine\"] = E;\n\n    var D = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._isChecked = !1, i._background = \"black\", i._checkSizeRatio = .8, i._thickness = 1, i.group = \"\", i.onIsCheckedChangedObservable = new s.Observable(), i.isPointerBlocker = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"thickness\", {\n        get: function get() {\n          return this._thickness;\n        },\n        set: function set(t) {\n          this._thickness !== t && (this._thickness = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"checkSizeRatio\", {\n        get: function get() {\n          return this._checkSizeRatio;\n        },\n        set: function set(t) {\n          t = Math.max(Math.min(1, t), 0), this._checkSizeRatio !== t && (this._checkSizeRatio = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isChecked\", {\n        get: function get() {\n          return this._isChecked;\n        },\n        set: function set(t) {\n          var e = this;\n          this._isChecked !== t && (this._isChecked = t, this._markAsDirty(), this.onIsCheckedChangedObservable.notifyObservers(t), this._isChecked && this._host && this._host.executeOnAllControls(function (t) {\n            if (t !== e && void 0 !== t.group) {\n              var i = t;\n              i.group === e.group && (i.isChecked = !1);\n            }\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"RadioButton\";\n      }, e.prototype._draw = function (t) {\n        t.save(), this._applyStates(t);\n        var e = this._currentMeasure.width - this._thickness,\n            i = this._currentMeasure.height - this._thickness;\n\n        if ((this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), f.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, t), t.fillStyle = this._isEnabled ? this._background : this._disabledColor, t.fill(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), t.strokeStyle = this.color, t.lineWidth = this._thickness, t.stroke(), this._isChecked) {\n          t.fillStyle = this._isEnabled ? this.color : this._disabledColor;\n          var r = e * this._checkSizeRatio,\n              n = i * this._checkSizeRatio;\n          f.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, r / 2 - this._thickness / 2, n / 2 - this._thickness / 2, t), t.fill();\n        }\n\n        t.restore();\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return !!t.prototype._onPointerDown.call(this, e, i, r, n, o) && (this.isChecked || (this.isChecked = !0), !0);\n      }, e.AddRadioButtonWithHeader = function (t, i, r, n) {\n        var o = new C();\n        o.isVertical = !1, o.height = \"30px\";\n        var s = new e();\n        s.width = \"20px\", s.height = \"20px\", s.isChecked = r, s.color = \"green\", s.group = i, s.onIsCheckedChangedObservable.add(function (t) {\n          return n(s, t);\n        }), o.addControl(s);\n        var a = new y();\n        return a.text = t, a.width = \"180px\", a.paddingLeft = \"5px\", a.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, a.color = \"white\", o.addControl(a), o;\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.RadioButton\"] = D;\n\n    var L = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._thumbWidth = new a(20, a.UNITMODE_PIXEL, !1), i._minimum = 0, i._maximum = 100, i._value = 50, i._isVertical = !1, i._barOffset = new a(5, a.UNITMODE_PIXEL, !1), i._isThumbClamped = !1, i._displayThumb = !0, i._step = 0, i._lastPointerDownID = -1, i._effectiveBarOffset = 0, i.onValueChangedObservable = new s.Observable(), i._pointerIsDown = !1, i.isPointerBlocker = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"displayThumb\", {\n        get: function get() {\n          return this._displayThumb;\n        },\n        set: function set(t) {\n          this._displayThumb !== t && (this._displayThumb = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"step\", {\n        get: function get() {\n          return this._step;\n        },\n        set: function set(t) {\n          this._step !== t && (this._step = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barOffset\", {\n        get: function get() {\n          return this._barOffset.toString(this._host);\n        },\n        set: function set(t) {\n          this._barOffset.toString(this._host) !== t && this._barOffset.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barOffsetInPixels\", {\n        get: function get() {\n          return this._barOffset.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbWidth\", {\n        get: function get() {\n          return this._thumbWidth.toString(this._host);\n        },\n        set: function set(t) {\n          this._thumbWidth.toString(this._host) !== t && this._thumbWidth.fromString(t) && this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbWidthInPixels\", {\n        get: function get() {\n          return this._thumbWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"minimum\", {\n        get: function get() {\n          return this._minimum;\n        },\n        set: function set(t) {\n          this._minimum !== t && (this._minimum = t, this._markAsDirty(), this.value = Math.max(Math.min(this.value, this._maximum), this._minimum));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"maximum\", {\n        get: function get() {\n          return this._maximum;\n        },\n        set: function set(t) {\n          this._maximum !== t && (this._maximum = t, this._markAsDirty(), this.value = Math.max(Math.min(this.value, this._maximum), this._minimum));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"value\", {\n        get: function get() {\n          return this._value;\n        },\n        set: function set(t) {\n          t = Math.max(Math.min(t, this._maximum), this._minimum), this._value !== t && (this._value = t, this._markAsDirty(), this.onValueChangedObservable.notifyObservers(this._value));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isVertical\", {\n        get: function get() {\n          return this._isVertical;\n        },\n        set: function set(t) {\n          this._isVertical !== t && (this._isVertical = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isThumbClamped\", {\n        get: function get() {\n          return this._isThumbClamped;\n        },\n        set: function set(t) {\n          this._isThumbClamped !== t && (this._isThumbClamped = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"BaseSlider\";\n      }, e.prototype._getThumbPosition = function () {\n        return this.isVertical ? (this.maximum - this.value) / (this.maximum - this.minimum) * this._backgroundBoxLength : (this.value - this.minimum) / (this.maximum - this.minimum) * this._backgroundBoxLength;\n      }, e.prototype._getThumbThickness = function (t) {\n        var e = 0;\n\n        switch (t) {\n          case \"circle\":\n            e = this._thumbWidth.isPixel ? Math.max(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness) : this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\n            break;\n\n          case \"rectangle\":\n            e = this._thumbWidth.isPixel ? Math.min(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness) : this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\n        }\n\n        return e;\n      }, e.prototype._prepareRenderingData = function (t) {\n        this._effectiveBarOffset = 0, this._renderLeft = this._currentMeasure.left, this._renderTop = this._currentMeasure.top, this._renderWidth = this._currentMeasure.width, this._renderHeight = this._currentMeasure.height, this._backgroundBoxLength = Math.max(this._currentMeasure.width, this._currentMeasure.height), this._backgroundBoxThickness = Math.min(this._currentMeasure.width, this._currentMeasure.height), this._effectiveThumbThickness = this._getThumbThickness(t), this.displayThumb && (this._backgroundBoxLength -= this._effectiveThumbThickness), this.isVertical && this._currentMeasure.height < this._currentMeasure.width ? console.error(\"Height should be greater than width\") : (this._barOffset.isPixel ? this._effectiveBarOffset = Math.min(this._barOffset.getValue(this._host), this._backgroundBoxThickness) : this._effectiveBarOffset = this._backgroundBoxThickness * this._barOffset.getValue(this._host), this._backgroundBoxThickness -= 2 * this._effectiveBarOffset, this.isVertical ? (this._renderLeft += this._effectiveBarOffset, !this.isThumbClamped && this.displayThumb && (this._renderTop += this._effectiveThumbThickness / 2), this._renderHeight = this._backgroundBoxLength, this._renderWidth = this._backgroundBoxThickness) : (this._renderTop += this._effectiveBarOffset, !this.isThumbClamped && this.displayThumb && (this._renderLeft += this._effectiveThumbThickness / 2), this._renderHeight = this._backgroundBoxThickness, this._renderWidth = this._backgroundBoxLength));\n      }, e.prototype._updateValueFromPointer = function (t, e) {\n        var i;\n        0 != this.rotation && (this._invertTransformMatrix.transformCoordinates(t, e, this._transformedPosition), t = this._transformedPosition.x, e = this._transformedPosition.y), i = this._isVertical ? this._minimum + (1 - (e - this._currentMeasure.top) / this._currentMeasure.height) * (this._maximum - this._minimum) : this._minimum + (t - this._currentMeasure.left) / this._currentMeasure.width * (this._maximum - this._minimum);\n        var r = 1 / this._step | 0;\n        this.value = this._step ? (i * r | 0) / r : i;\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return !!t.prototype._onPointerDown.call(this, e, i, r, n, o) && (this._pointerIsDown = !0, this._updateValueFromPointer(i.x, i.y), this._host._capturingControl[r] = this, this._lastPointerDownID = r, !0);\n      }, e.prototype._onPointerMove = function (e, i, r, n) {\n        r == this._lastPointerDownID && (this._pointerIsDown && this._updateValueFromPointer(i.x, i.y), t.prototype._onPointerMove.call(this, e, i, r, n));\n      }, e.prototype._onPointerUp = function (e, i, r, n, o) {\n        this._pointerIsDown = !1, delete this._host._capturingControl[r], t.prototype._onPointerUp.call(this, e, i, r, n, o);\n      }, e.prototype._onCanvasBlur = function () {\n        this._forcePointerUp(), t.prototype._onCanvasBlur.call(this);\n      }, e;\n    }(f),\n        R = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._background = \"black\", i._borderColor = \"white\", i._thumbColor = \"\", i._isThumbCircle = !1, i._displayValueBar = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"displayValueBar\", {\n        get: function get() {\n          return this._displayValueBar;\n        },\n        set: function set(t) {\n          this._displayValueBar !== t && (this._displayValueBar = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"borderColor\", {\n        get: function get() {\n          return this._borderColor;\n        },\n        set: function set(t) {\n          this._borderColor !== t && (this._borderColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbColor\", {\n        get: function get() {\n          return this._thumbColor;\n        },\n        set: function set(t) {\n          this._thumbColor !== t && (this._thumbColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isThumbCircle\", {\n        get: function get() {\n          return this._isThumbCircle;\n        },\n        set: function set(t) {\n          this._isThumbCircle !== t && (this._isThumbCircle = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Slider\";\n      }, e.prototype._draw = function (t, e) {\n        t.save(), this._applyStates(t), this._prepareRenderingData(this.isThumbCircle ? \"circle\" : \"rectangle\");\n        var i = this._renderLeft,\n            r = this._renderTop,\n            n = this._renderWidth,\n            o = this._renderHeight,\n            s = 0;\n        this.isThumbClamped && this.isThumbCircle ? (this.isVertical ? r += this._effectiveThumbThickness / 2 : i += this._effectiveThumbThickness / 2, s = this._backgroundBoxThickness / 2) : s = (this._effectiveThumbThickness - this._effectiveBarOffset) / 2, (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY);\n\n        var a = this._getThumbPosition();\n\n        t.fillStyle = this._background, this.isVertical ? this.isThumbClamped ? this.isThumbCircle ? (t.beginPath(), t.arc(i + this._backgroundBoxThickness / 2, r, s, Math.PI, 2 * Math.PI), t.fill(), t.fillRect(i, r, n, o)) : t.fillRect(i, r, n, o + this._effectiveThumbThickness) : t.fillRect(i, r, n, o) : this.isThumbClamped ? this.isThumbCircle ? (t.beginPath(), t.arc(i + this._backgroundBoxLength, r + this._backgroundBoxThickness / 2, s, 0, 2 * Math.PI), t.fill(), t.fillRect(i, r, n, o)) : t.fillRect(i, r, n + this._effectiveThumbThickness, o) : t.fillRect(i, r, n, o), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), t.fillStyle = this.color, this._displayValueBar && (this.isVertical ? this.isThumbClamped ? this.isThumbCircle ? (t.beginPath(), t.arc(i + this._backgroundBoxThickness / 2, r + this._backgroundBoxLength, s, 0, 2 * Math.PI), t.fill(), t.fillRect(i, r + a, n, o - a)) : t.fillRect(i, r + a, n, o - a + this._effectiveThumbThickness) : t.fillRect(i, r + a, n, o - a) : this.isThumbClamped && this.isThumbCircle ? (t.beginPath(), t.arc(i, r + this._backgroundBoxThickness / 2, s, 0, 2 * Math.PI), t.fill(), t.fillRect(i, r, a, o)) : t.fillRect(i, r, a, o)), t.fillStyle = this._thumbColor || this.color, this.displayThumb && ((this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowColor = this.shadowColor, t.shadowBlur = this.shadowBlur, t.shadowOffsetX = this.shadowOffsetX, t.shadowOffsetY = this.shadowOffsetY), this._isThumbCircle ? (t.beginPath(), this.isVertical ? t.arc(i + this._backgroundBoxThickness / 2, r + a, s, 0, 2 * Math.PI) : t.arc(i + a, r + this._backgroundBoxThickness / 2, s, 0, 2 * Math.PI), t.fill(), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), t.strokeStyle = this._borderColor, t.stroke()) : (this.isVertical ? t.fillRect(i - this._effectiveBarOffset, this._currentMeasure.top + a, this._currentMeasure.width, this._effectiveThumbThickness) : t.fillRect(this._currentMeasure.left + a, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height), (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) && (t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0), t.strokeStyle = this._borderColor, this.isVertical ? t.strokeRect(i - this._effectiveBarOffset, this._currentMeasure.top + a, this._currentMeasure.width, this._effectiveThumbThickness) : t.strokeRect(this._currentMeasure.left + a, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height))), t.restore();\n      }, e;\n    }(L);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.Slider\"] = R;\n\n    var B = function () {\n      function t(t) {\n        this.name = t, this._groupPanel = new C(), this._selectors = new Array(), this._groupPanel.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, this._groupPanel.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, this._groupHeader = this._addGroupHeader(t);\n      }\n\n      return Object.defineProperty(t.prototype, \"groupPanel\", {\n        get: function get() {\n          return this._groupPanel;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"selectors\", {\n        get: function get() {\n          return this._selectors;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"header\", {\n        get: function get() {\n          return this._groupHeader.text;\n        },\n        set: function set(t) {\n          \"label\" !== this._groupHeader.text && (this._groupHeader.text = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype._addGroupHeader = function (t) {\n        var e = new y(\"groupHead\", t);\n        return e.width = .9, e.height = \"30px\", e.textWrapping = !0, e.color = \"black\", e.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, e.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, e.left = \"2px\", this._groupPanel.addControl(e), e;\n      }, t.prototype._getSelector = function (t) {\n        if (!(t < 0 || t >= this._selectors.length)) return this._selectors[t];\n      }, t.prototype.removeSelector = function (t) {\n        t < 0 || t >= this._selectors.length || (this._groupPanel.removeControl(this._selectors[t]), this._selectors.splice(t, 1));\n      }, t;\n    }(),\n        N = function (t) {\n      function e() {\n        return null !== t && t.apply(this, arguments) || this;\n      }\n\n      return n(e, t), e.prototype.addCheckbox = function (t, e, i) {\n        void 0 === e && (e = function e(t) {}), void 0 === i && (i = !1);\n        i = i || !1;\n        var r = new T();\n        r.width = \"20px\", r.height = \"20px\", r.color = \"#364249\", r.background = \"#CCCCCC\", r.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r.onIsCheckedChangedObservable.add(function (t) {\n          e(t);\n        });\n        var n = f.AddHeader(r, t, \"200px\", {\n          isHorizontal: !0,\n          controlFirst: !0\n        });\n        n.height = \"30px\", n.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, n.left = \"4px\", this.groupPanel.addControl(n), this.selectors.push(n), r.isChecked = i, this.groupPanel.parent && this.groupPanel.parent.parent && (r.color = this.groupPanel.parent.parent.buttonColor, r.background = this.groupPanel.parent.parent.buttonBackground);\n      }, e.prototype._setSelectorLabel = function (t, e) {\n        this.selectors[t].children[1].text = e;\n      }, e.prototype._setSelectorLabelColor = function (t, e) {\n        this.selectors[t].children[1].color = e;\n      }, e.prototype._setSelectorButtonColor = function (t, e) {\n        this.selectors[t].children[0].color = e;\n      }, e.prototype._setSelectorButtonBackground = function (t, e) {\n        this.selectors[t].children[0].background = e;\n      }, e;\n    }(B),\n        H = function (t) {\n      function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e._selectNb = 0, e;\n      }\n\n      return n(e, t), e.prototype.addRadio = function (t, e, i) {\n        void 0 === e && (e = function e(t) {}), void 0 === i && (i = !1);\n        var r = this._selectNb++,\n            n = new D();\n        n.name = t, n.width = \"20px\", n.height = \"20px\", n.color = \"#364249\", n.background = \"#CCCCCC\", n.group = this.name, n.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, n.onIsCheckedChangedObservable.add(function (t) {\n          t && e(r);\n        });\n        var o = f.AddHeader(n, t, \"200px\", {\n          isHorizontal: !0,\n          controlFirst: !0\n        });\n        o.height = \"30px\", o.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, o.left = \"4px\", this.groupPanel.addControl(o), this.selectors.push(o), n.isChecked = i, this.groupPanel.parent && this.groupPanel.parent.parent && (n.color = this.groupPanel.parent.parent.buttonColor, n.background = this.groupPanel.parent.parent.buttonBackground);\n      }, e.prototype._setSelectorLabel = function (t, e) {\n        this.selectors[t].children[1].text = e;\n      }, e.prototype._setSelectorLabelColor = function (t, e) {\n        this.selectors[t].children[1].color = e;\n      }, e.prototype._setSelectorButtonColor = function (t, e) {\n        this.selectors[t].children[0].color = e;\n      }, e.prototype._setSelectorButtonBackground = function (t, e) {\n        this.selectors[t].children[0].background = e;\n      }, e;\n    }(B),\n        V = function (t) {\n      function e() {\n        return null !== t && t.apply(this, arguments) || this;\n      }\n\n      return n(e, t), e.prototype.addSlider = function (t, e, i, r, n, o, s) {\n        void 0 === e && (e = function e(t) {}), void 0 === i && (i = \"Units\"), void 0 === r && (r = 0), void 0 === n && (n = 0), void 0 === o && (o = 0), void 0 === s && (s = function s(t) {\n          return 0 | t;\n        });\n        var a = new R();\n        a.name = i, a.value = o, a.minimum = r, a.maximum = n, a.width = .9, a.height = \"20px\", a.color = \"#364249\", a.background = \"#CCCCCC\", a.borderColor = \"black\", a.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, a.left = \"4px\", a.paddingBottom = \"4px\", a.onValueChangedObservable.add(function (t) {\n          a.parent.children[0].text = a.parent.children[0].name + \": \" + s(t) + \" \" + a.name, e(t);\n        });\n        var h = f.AddHeader(a, t + \": \" + s(o) + \" \" + i, \"30px\", {\n          isHorizontal: !1,\n          controlFirst: !1\n        });\n        h.height = \"60px\", h.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, h.left = \"4px\", h.children[0].name = t, this.groupPanel.addControl(h), this.selectors.push(h), this.groupPanel.parent && this.groupPanel.parent.parent && (a.color = this.groupPanel.parent.parent.buttonColor, a.background = this.groupPanel.parent.parent.buttonBackground);\n      }, e.prototype._setSelectorLabel = function (t, e) {\n        this.selectors[t].children[0].name = e, this.selectors[t].children[0].text = e + \": \" + this.selectors[t].children[1].value + \" \" + this.selectors[t].children[1].name;\n      }, e.prototype._setSelectorLabelColor = function (t, e) {\n        this.selectors[t].children[0].color = e;\n      }, e.prototype._setSelectorButtonColor = function (t, e) {\n        this.selectors[t].children[1].color = e;\n      }, e.prototype._setSelectorButtonBackground = function (t, e) {\n        this.selectors[t].children[1].background = e;\n      }, e;\n    }(B),\n        W = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = []);\n        var r = t.call(this, e) || this;\n\n        if (r.name = e, r.groups = i, r._buttonColor = \"#364249\", r._buttonBackground = \"#CCCCCC\", r._headerColor = \"black\", r._barColor = \"white\", r._barHeight = \"2px\", r._spacerHeight = \"20px\", r._bars = new Array(), r._groups = i, r.thickness = 2, r._panel = new C(), r._panel.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, r._panel.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r._panel.top = 5, r._panel.left = 5, r._panel.width = .95, i.length > 0) {\n          for (var n = 0; n < i.length - 1; n++) {\n            r._panel.addControl(i[n].groupPanel), r._addSpacer();\n          }\n\n          r._panel.addControl(i[i.length - 1].groupPanel);\n        }\n\n        return r.addControl(r._panel), r;\n      }\n\n      return n(e, t), e.prototype._getTypeName = function () {\n        return \"SelectionPanel\";\n      }, Object.defineProperty(e.prototype, \"panel\", {\n        get: function get() {\n          return this._panel;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"headerColor\", {\n        get: function get() {\n          return this._headerColor;\n        },\n        set: function set(t) {\n          this._headerColor !== t && (this._headerColor = t, this._setHeaderColor());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setHeaderColor = function () {\n        for (var t = 0; t < this._groups.length; t++) {\n          this._groups[t].groupPanel.children[0].color = this._headerColor;\n        }\n      }, Object.defineProperty(e.prototype, \"buttonColor\", {\n        get: function get() {\n          return this._buttonColor;\n        },\n        set: function set(t) {\n          this._buttonColor !== t && (this._buttonColor = t, this._setbuttonColor());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setbuttonColor = function () {\n        for (var t = 0; t < this._groups.length; t++) {\n          for (var e = 0; e < this._groups[t].selectors.length; e++) {\n            this._groups[t]._setSelectorButtonColor(e, this._buttonColor);\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"labelColor\", {\n        get: function get() {\n          return this._labelColor;\n        },\n        set: function set(t) {\n          this._labelColor !== t && (this._labelColor = t, this._setLabelColor());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setLabelColor = function () {\n        for (var t = 0; t < this._groups.length; t++) {\n          for (var e = 0; e < this._groups[t].selectors.length; e++) {\n            this._groups[t]._setSelectorLabelColor(e, this._labelColor);\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"buttonBackground\", {\n        get: function get() {\n          return this._buttonBackground;\n        },\n        set: function set(t) {\n          this._buttonBackground !== t && (this._buttonBackground = t, this._setButtonBackground());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setButtonBackground = function () {\n        for (var t = 0; t < this._groups.length; t++) {\n          for (var e = 0; e < this._groups[t].selectors.length; e++) {\n            this._groups[t]._setSelectorButtonBackground(e, this._buttonBackground);\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"barColor\", {\n        get: function get() {\n          return this._barColor;\n        },\n        set: function set(t) {\n          this._barColor !== t && (this._barColor = t, this._setBarColor());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setBarColor = function () {\n        for (var t = 0; t < this._bars.length; t++) {\n          this._bars[t].children[0].background = this._barColor;\n        }\n      }, Object.defineProperty(e.prototype, \"barHeight\", {\n        get: function get() {\n          return this._barHeight;\n        },\n        set: function set(t) {\n          this._barHeight !== t && (this._barHeight = t, this._setBarHeight());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setBarHeight = function () {\n        for (var t = 0; t < this._bars.length; t++) {\n          this._bars[t].children[0].height = this._barHeight;\n        }\n      }, Object.defineProperty(e.prototype, \"spacerHeight\", {\n        get: function get() {\n          return this._spacerHeight;\n        },\n        set: function set(t) {\n          this._spacerHeight !== t && (this._spacerHeight = t, this._setSpacerHeight());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setSpacerHeight = function () {\n        for (var t = 0; t < this._bars.length; t++) {\n          this._bars[t].height = this._spacerHeight;\n        }\n      }, e.prototype._addSpacer = function () {\n        var t = new g();\n        t.width = 1, t.height = this._spacerHeight, t.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT;\n        var e = new b();\n        e.width = 1, e.height = this._barHeight, e.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, e.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, e.background = this._barColor, e.color = \"transparent\", t.addControl(e), this._panel.addControl(t), this._bars.push(t);\n      }, e.prototype.addGroup = function (t) {\n        this._groups.length > 0 && this._addSpacer(), this._panel.addControl(t.groupPanel), this._groups.push(t), t.groupPanel.children[0].color = this._headerColor;\n\n        for (var e = 0; e < t.selectors.length; e++) {\n          t._setSelectorButtonColor(e, this._buttonColor), t._setSelectorButtonBackground(e, this._buttonBackground);\n        }\n      }, e.prototype.removeGroup = function (t) {\n        if (!(t < 0 || t >= this._groups.length)) {\n          var e = this._groups[t];\n          this._panel.removeControl(e.groupPanel), this._groups.splice(t, 1), t < this._bars.length && (this._panel.removeControl(this._bars[t]), this._bars.splice(t, 1));\n        }\n      }, e.prototype.setHeaderName = function (t, e) {\n        e < 0 || e >= this._groups.length || (this._groups[e].groupPanel.children[0].text = t);\n      }, e.prototype.relabel = function (t, e, i) {\n        if (!(e < 0 || e >= this._groups.length)) {\n          var r = this._groups[e];\n          i < 0 || i >= r.selectors.length || r._setSelectorLabel(i, t);\n        }\n      }, e.prototype.removeFromGroupSelector = function (t, e) {\n        if (!(t < 0 || t >= this._groups.length)) {\n          var i = this._groups[t];\n          e < 0 || e >= i.selectors.length || i.removeSelector(e);\n        }\n      }, e.prototype.addToGroupCheckbox = function (t, e, i, r) {\n        (void 0 === i && (i = function i() {}), void 0 === r && (r = !1), t < 0 || t >= this._groups.length) || this._groups[t].addCheckbox(e, i, r);\n      }, e.prototype.addToGroupRadio = function (t, e, i, r) {\n        (void 0 === i && (i = function i() {}), void 0 === r && (r = !1), t < 0 || t >= this._groups.length) || this._groups[t].addRadio(e, i, r);\n      }, e.prototype.addToGroupSlider = function (t, e, i, r, n, o, s, a) {\n        (void 0 === i && (i = function i() {}), void 0 === r && (r = \"Units\"), void 0 === n && (n = 0), void 0 === o && (o = 0), void 0 === s && (s = 0), void 0 === a && (a = function a(t) {\n          return 0 | t;\n        }), t < 0 || t >= this._groups.length) || this._groups[t].addSlider(e, i, r, n, o, s, a);\n      }, e;\n    }(b),\n        F = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i._freezeControls = !1, i._bucketWidth = 0, i._bucketHeight = 0, i._buckets = {}, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"freezeControls\", {\n        get: function get() {\n          return this._freezeControls;\n        },\n        set: function set(t) {\n          if (this._freezeControls !== t) {\n            t || this._restoreMeasures(), this._freezeControls = !1;\n            var e = this.host.getSize(),\n                i = e.width,\n                r = e.height,\n                n = this.host.getContext(),\n                o = new _(0, 0, i, r);\n            this.host._numLayoutCalls = 0, this.host._rootContainer._layout(o, n), t && (this._updateMeasures(), this._useBuckets() && this._makeBuckets()), this._freezeControls = t, this.host.markAsDirty();\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"bucketWidth\", {\n        get: function get() {\n          return this._bucketWidth;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"bucketHeight\", {\n        get: function get() {\n          return this._bucketHeight;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.setBucketSizes = function (t, e) {\n        this._bucketWidth = t, this._bucketHeight = e, this._useBuckets() ? this._freezeControls && this._makeBuckets() : this._buckets = {};\n      }, e.prototype._useBuckets = function () {\n        return this._bucketWidth > 0 && this._bucketHeight > 0;\n      }, e.prototype._makeBuckets = function () {\n        this._buckets = {}, this._bucketLen = Math.ceil(this.widthInPixels / this._bucketWidth), this._dispatchInBuckets(this._children), this._oldLeft = null, this._oldTop = null;\n      }, e.prototype._dispatchInBuckets = function (t) {\n        for (var e = 0; e < t.length; ++e) {\n          for (var i = t[e], r = Math.max(0, Math.floor((i._customData._origLeft - this._customData.origLeft) / this._bucketWidth)), n = Math.floor((i._customData._origLeft - this._customData.origLeft + i._currentMeasure.width - 1) / this._bucketWidth), o = Math.max(0, Math.floor((i._customData._origTop - this._customData.origTop) / this._bucketHeight)), s = Math.floor((i._customData._origTop - this._customData.origTop + i._currentMeasure.height - 1) / this._bucketHeight); o <= s;) {\n            for (var a = r; a <= n; ++a) {\n              var h = o * this._bucketLen + a,\n                  l = this._buckets[h];\n              l || (l = [], this._buckets[h] = l), l.push(i);\n            }\n\n            o++;\n          }\n\n          i instanceof g && i._children.length > 0 && this._dispatchInBuckets(i._children);\n        }\n      }, e.prototype._updateMeasures = function () {\n        var t = 0 | this.leftInPixels,\n            e = 0 | this.topInPixels;\n        this._measureForChildren.left -= t, this._measureForChildren.top -= e, this._currentMeasure.left -= t, this._currentMeasure.top -= e, this._customData.origLeftForChildren = this._measureForChildren.left, this._customData.origTopForChildren = this._measureForChildren.top, this._customData.origLeft = this._currentMeasure.left, this._customData.origTop = this._currentMeasure.top, this._updateChildrenMeasures(this._children, t, e);\n      }, e.prototype._updateChildrenMeasures = function (t, e, i) {\n        for (var r = 0; r < t.length; ++r) {\n          var n = t[r];\n          n._currentMeasure.left -= e, n._currentMeasure.top -= i, n._customData._origLeft = n._currentMeasure.left, n._customData._origTop = n._currentMeasure.top, n instanceof g && n._children.length > 0 && this._updateChildrenMeasures(n._children, e, i);\n        }\n      }, e.prototype._restoreMeasures = function () {\n        var t = 0 | this.leftInPixels,\n            e = 0 | this.topInPixels;\n        this._measureForChildren.left = this._customData.origLeftForChildren + t, this._measureForChildren.top = this._customData.origTopForChildren + e, this._currentMeasure.left = this._customData.origLeft + t, this._currentMeasure.top = this._customData.origTop + e;\n      }, e.prototype._getTypeName = function () {\n        return \"ScrollViewerWindow\";\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._parentMeasure = e, this._measureForChildren.left = this._currentMeasure.left, this._measureForChildren.top = this._currentMeasure.top, this._measureForChildren.width = e.width, this._measureForChildren.height = e.height;\n      }, e.prototype._layout = function (e, i) {\n        return this._freezeControls ? (this.invalidateRect(), !1) : t.prototype._layout.call(this, e, i);\n      }, e.prototype._scrollChildren = function (t, e, i) {\n        for (var r = 0; r < t.length; ++r) {\n          var n = t[r];\n          n._currentMeasure.left = n._customData._origLeft + e, n._currentMeasure.top = n._customData._origTop + i, n._isClipped = !1, n instanceof g && n._children.length > 0 && this._scrollChildren(n._children, e, i);\n        }\n      }, e.prototype._scrollChildrenWithBuckets = function (t, e, i, r) {\n        for (var n = Math.max(0, Math.floor(-t / this._bucketWidth)), o = Math.floor((-t + this._parentMeasure.width - 1) / this._bucketWidth), s = Math.max(0, Math.floor(-e / this._bucketHeight)), a = Math.floor((-e + this._parentMeasure.height - 1) / this._bucketHeight); s <= a;) {\n          for (var h = n; h <= o; ++h) {\n            var l = s * this._bucketLen + h,\n                u = this._buckets[l];\n            if (u) for (var c = 0; c < u.length; ++c) {\n              var _ = u[c];\n              _._currentMeasure.left = _._customData._origLeft + i, _._currentMeasure.top = _._customData._origTop + r, _._isClipped = !1;\n            }\n          }\n\n          s++;\n        }\n      }, e.prototype._draw = function (e, i) {\n        if (this._freezeControls) {\n          this._localDraw(e), this.clipChildren && this._clipForChildren(e);\n          var r = 0 | this.leftInPixels,\n              n = 0 | this.topInPixels;\n          this._useBuckets() && null !== this._oldLeft && null !== this._oldTop ? (this._scrollChildrenWithBuckets(this._oldLeft, this._oldTop, r, n), this._scrollChildrenWithBuckets(r, n, r, n)) : this._scrollChildren(this._children, r, n), this._oldLeft = r, this._oldTop = n;\n\n          for (var o = 0, s = this._children; o < s.length; o++) {\n            var a = s[o];\n            a._intersectsRect(this._parentMeasure) && a._render(e, this._parentMeasure);\n          }\n        } else t.prototype._draw.call(this, e, i);\n      }, e.prototype._postMeasure = function () {\n        if (this._freezeControls) t.prototype._postMeasure.call(this);else {\n          for (var e = this.parentClientWidth, i = this.parentClientHeight, r = 0, n = this.children; r < n.length; r++) {\n            var o = n[r];\n            o.isVisible && !o.notRenderable && (o.horizontalAlignment === f.HORIZONTAL_ALIGNMENT_CENTER && o._offsetLeft(this._currentMeasure.left - o._currentMeasure.left), o.verticalAlignment === f.VERTICAL_ALIGNMENT_CENTER && o._offsetTop(this._currentMeasure.top - o._currentMeasure.top), e = Math.max(e, o._currentMeasure.left - this._currentMeasure.left + o._currentMeasure.width + o.paddingRightInPixels), i = Math.max(i, o._currentMeasure.top - this._currentMeasure.top + o._currentMeasure.height + o.paddingBottomInPixels));\n          }\n\n          this._currentMeasure.width !== e && (this._width.updateInPlace(e, a.UNITMODE_PIXEL), this._currentMeasure.width = e, this._rebuildLayout = !0, this._isDirty = !0), this._currentMeasure.height !== i && (this._height.updateInPlace(i, a.UNITMODE_PIXEL), this._currentMeasure.height = i, this._rebuildLayout = !0, this._isDirty = !0), t.prototype._postMeasure.call(this);\n        }\n      }, e;\n    }(g),\n        j = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._background = \"black\", i._borderColor = \"white\", i._tempMeasure = new _(0, 0, 0, 0), i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"borderColor\", {\n        get: function get() {\n          return this._borderColor;\n        },\n        set: function set(t) {\n          this._borderColor !== t && (this._borderColor = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"Scrollbar\";\n      }, e.prototype._getThumbThickness = function () {\n        return this._thumbWidth.isPixel ? this._thumbWidth.getValue(this._host) : this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\n      }, e.prototype._draw = function (t) {\n        t.save(), this._applyStates(t), this._prepareRenderingData(\"rectangle\");\n\n        var e = this._renderLeft,\n            i = this._getThumbPosition();\n\n        t.fillStyle = this._background, t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height), t.fillStyle = this.color, this.isVertical ? (this._tempMeasure.left = e - this._effectiveBarOffset, this._tempMeasure.top = this._currentMeasure.top + i, this._tempMeasure.width = this._currentMeasure.width, this._tempMeasure.height = this._effectiveThumbThickness) : (this._tempMeasure.left = this._currentMeasure.left + i, this._tempMeasure.top = this._currentMeasure.top, this._tempMeasure.width = this._effectiveThumbThickness, this._tempMeasure.height = this._currentMeasure.height), t.fillRect(this._tempMeasure.left, this._tempMeasure.top, this._tempMeasure.width, this._tempMeasure.height), t.restore();\n      }, e.prototype._updateValueFromPointer = function (t, e) {\n        0 != this.rotation && (this._invertTransformMatrix.transformCoordinates(t, e, this._transformedPosition), t = this._transformedPosition.x, e = this._transformedPosition.y), this._first && (this._first = !1, this._originX = t, this._originY = e, (t < this._tempMeasure.left || t > this._tempMeasure.left + this._tempMeasure.width || e < this._tempMeasure.top || e > this._tempMeasure.top + this._tempMeasure.height) && (this.isVertical ? this.value = this.minimum + (1 - (e - this._currentMeasure.top) / this._currentMeasure.height) * (this.maximum - this.minimum) : this.value = this.minimum + (t - this._currentMeasure.left) / this._currentMeasure.width * (this.maximum - this.minimum)));\n        var i = 0;\n        i = this.isVertical ? -(e - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness) : (t - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness), this.value += i * (this.maximum - this.minimum), this._originX = t, this._originY = e;\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return this._first = !0, t.prototype._onPointerDown.call(this, e, i, r, n, o);\n      }, e;\n    }(L),\n        z = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._thumbLength = .5, i._thumbHeight = 1, i._barImageHeight = 1, i._tempMeasure = new _(0, 0, 0, 0), i.num90RotationInVerticalMode = 1, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"backgroundImage\", {\n        get: function get() {\n          return this._backgroundBaseImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._backgroundBaseImage !== t && (this._backgroundBaseImage = t, this.isVertical && 0 !== this.num90RotationInVerticalMode ? t.isLoaded ? (this._backgroundImage = t._rotate90(this.num90RotationInVerticalMode, !0), this._markAsDirty()) : t.onImageLoadedObservable.addOnce(function () {\n            var i = t._rotate90(e.num90RotationInVerticalMode, !0);\n\n            e._backgroundImage = i, i.isLoaded || i.onImageLoadedObservable.addOnce(function () {\n              e._markAsDirty();\n            }), e._markAsDirty();\n          }) : (this._backgroundImage = t, t && !t.isLoaded && t.onImageLoadedObservable.addOnce(function () {\n            e._markAsDirty();\n          }), this._markAsDirty()));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbImage\", {\n        get: function get() {\n          return this._thumbBaseImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._thumbBaseImage !== t && (this._thumbBaseImage = t, this.isVertical && 0 !== this.num90RotationInVerticalMode ? t.isLoaded ? (this._thumbImage = t._rotate90(-this.num90RotationInVerticalMode, !0), this._markAsDirty()) : t.onImageLoadedObservable.addOnce(function () {\n            var i = t._rotate90(-e.num90RotationInVerticalMode, !0);\n\n            e._thumbImage = i, i.isLoaded || i.onImageLoadedObservable.addOnce(function () {\n              e._markAsDirty();\n            }), e._markAsDirty();\n          }) : (this._thumbImage = t, t && !t.isLoaded && t.onImageLoadedObservable.addOnce(function () {\n            e._markAsDirty();\n          }), this._markAsDirty()));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbLength\", {\n        get: function get() {\n          return this._thumbLength;\n        },\n        set: function set(t) {\n          this._thumbLength !== t && (this._thumbLength = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbHeight\", {\n        get: function get() {\n          return this._thumbHeight;\n        },\n        set: function set(t) {\n          this._thumbLength !== t && (this._thumbHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barImageHeight\", {\n        get: function get() {\n          return this._barImageHeight;\n        },\n        set: function set(t) {\n          this._barImageHeight !== t && (this._barImageHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"ImageScrollBar\";\n      }, e.prototype._getThumbThickness = function () {\n        return this._thumbWidth.isPixel ? this._thumbWidth.getValue(this._host) : this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\n      }, e.prototype._draw = function (t) {\n        t.save(), this._applyStates(t), this._prepareRenderingData(\"rectangle\");\n\n        var e = this._getThumbPosition(),\n            i = this._renderLeft,\n            r = this._renderTop,\n            n = this._renderWidth,\n            o = this._renderHeight;\n\n        this._backgroundImage && (this._tempMeasure.copyFromFloats(i, r, n, o), this.isVertical ? (this._tempMeasure.copyFromFloats(i + n * (1 - this._barImageHeight) * .5, this._currentMeasure.top, n * this._barImageHeight, o), this._tempMeasure.height += this._effectiveThumbThickness, this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)) : (this._tempMeasure.copyFromFloats(this._currentMeasure.left, r + o * (1 - this._barImageHeight) * .5, n, o * this._barImageHeight), this._tempMeasure.width += this._effectiveThumbThickness, this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)), this._backgroundImage._draw(t)), this.isVertical ? this._tempMeasure.copyFromFloats(i - this._effectiveBarOffset + this._currentMeasure.width * (1 - this._thumbHeight) * .5, this._currentMeasure.top + e, this._currentMeasure.width * this._thumbHeight, this._effectiveThumbThickness) : this._tempMeasure.copyFromFloats(this._currentMeasure.left + e, this._currentMeasure.top + this._currentMeasure.height * (1 - this._thumbHeight) * .5, this._effectiveThumbThickness, this._currentMeasure.height * this._thumbHeight), this._thumbImage && (this._thumbImage._currentMeasure.copyFrom(this._tempMeasure), this._thumbImage._draw(t)), t.restore();\n      }, e.prototype._updateValueFromPointer = function (t, e) {\n        0 != this.rotation && (this._invertTransformMatrix.transformCoordinates(t, e, this._transformedPosition), t = this._transformedPosition.x, e = this._transformedPosition.y), this._first && (this._first = !1, this._originX = t, this._originY = e, (t < this._tempMeasure.left || t > this._tempMeasure.left + this._tempMeasure.width || e < this._tempMeasure.top || e > this._tempMeasure.top + this._tempMeasure.height) && (this.isVertical ? this.value = this.minimum + (1 - (e - this._currentMeasure.top) / this._currentMeasure.height) * (this.maximum - this.minimum) : this.value = this.minimum + (t - this._currentMeasure.left) / this._currentMeasure.width * (this.maximum - this.minimum)));\n        var i = 0;\n        i = this.isVertical ? -(e - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness) : (t - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness), this.value += i * (this.maximum - this.minimum), this._originX = t, this._originY = e;\n      }, e.prototype._onPointerDown = function (e, i, r, n, o) {\n        return this._first = !0, t.prototype._onPointerDown.call(this, e, i, r, n, o);\n      }, e;\n    }(L),\n        G = function (t) {\n      function e(e, i) {\n        var r = t.call(this, e) || this;\n        return r._barSize = 20, r._pointerIsOver = !1, r._wheelPrecision = .05, r._thumbLength = .5, r._thumbHeight = 1, r._barImageHeight = 1, r._horizontalBarImageHeight = 1, r._verticalBarImageHeight = 1, r._oldWindowContentsWidth = 0, r._oldWindowContentsHeight = 0, r._forceHorizontalBar = !1, r._forceVerticalBar = !1, r._useImageBar = i || !1, r.onDirtyObservable.add(function () {\n          r._horizontalBarSpace.color = r.color, r._verticalBarSpace.color = r.color, r._dragSpace.color = r.color;\n        }), r.onPointerEnterObservable.add(function () {\n          r._pointerIsOver = !0;\n        }), r.onPointerOutObservable.add(function () {\n          r._pointerIsOver = !1;\n        }), r._grid = new P(), r._useImageBar ? (r._horizontalBar = new z(), r._verticalBar = new z()) : (r._horizontalBar = new j(), r._verticalBar = new j()), r._window = new F(\"scrollViewer_window\"), r._window.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r._window.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, r._grid.addColumnDefinition(1), r._grid.addColumnDefinition(0, !0), r._grid.addRowDefinition(1), r._grid.addRowDefinition(0, !0), t.prototype.addControl.call(r, r._grid), r._grid.addControl(r._window, 0, 0), r._verticalBarSpace = new b(), r._verticalBarSpace.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r._verticalBarSpace.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, r._verticalBarSpace.thickness = 1, r._grid.addControl(r._verticalBarSpace, 0, 1), r._addBar(r._verticalBar, r._verticalBarSpace, !0, Math.PI), r._horizontalBarSpace = new b(), r._horizontalBarSpace.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, r._horizontalBarSpace.verticalAlignment = f.VERTICAL_ALIGNMENT_TOP, r._horizontalBarSpace.thickness = 1, r._grid.addControl(r._horizontalBarSpace, 1, 0), r._addBar(r._horizontalBar, r._horizontalBarSpace, !1, 0), r._dragSpace = new b(), r._dragSpace.thickness = 1, r._grid.addControl(r._dragSpace, 1, 1), r._useImageBar || (r.barColor = \"grey\", r.barBackground = \"transparent\"), r;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"horizontalBar\", {\n        get: function get() {\n          return this._horizontalBar;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalBar\", {\n        get: function get() {\n          return this._verticalBar;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.addControl = function (t) {\n        return t ? (this._window.addControl(t), this) : this;\n      }, e.prototype.removeControl = function (t) {\n        return this._window.removeControl(t), this;\n      }, Object.defineProperty(e.prototype, \"children\", {\n        get: function get() {\n          return this._window.children;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._flagDescendantsAsMatrixDirty = function () {\n        for (var t = 0, e = this._children; t < e.length; t++) {\n          e[t]._markMatrixAsDirty();\n        }\n      }, Object.defineProperty(e.prototype, \"freezeControls\", {\n        get: function get() {\n          return this._window.freezeControls;\n        },\n        set: function set(t) {\n          this._window.freezeControls = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"bucketWidth\", {\n        get: function get() {\n          return this._window.bucketWidth;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"bucketHeight\", {\n        get: function get() {\n          return this._window.bucketHeight;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.setBucketSizes = function (t, e) {\n        this._window.setBucketSizes(t, e);\n      }, Object.defineProperty(e.prototype, \"forceHorizontalBar\", {\n        get: function get() {\n          return this._forceHorizontalBar;\n        },\n        set: function set(t) {\n          this._grid.setRowDefinition(1, t ? this._barSize : 0, !0), this._horizontalBar.isVisible = t, this._forceHorizontalBar = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"forceVerticalBar\", {\n        get: function get() {\n          return this._forceVerticalBar;\n        },\n        set: function set(t) {\n          this._grid.setColumnDefinition(1, t ? this._barSize : 0, !0), this._verticalBar.isVisible = t, this._forceVerticalBar = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.resetWindow = function () {\n        this._window.width = \"100%\", this._window.height = \"100%\";\n      }, e.prototype._getTypeName = function () {\n        return \"ScrollViewer\";\n      }, e.prototype._buildClientSizes = function () {\n        var t = this.host.idealRatio;\n        this._window.parentClientWidth = this._currentMeasure.width - (this._verticalBar.isVisible || this.forceVerticalBar ? this._barSize * t : 0) - 2 * this.thickness, this._window.parentClientHeight = this._currentMeasure.height - (this._horizontalBar.isVisible || this.forceHorizontalBar ? this._barSize * t : 0) - 2 * this.thickness, this._clientWidth = this._window.parentClientWidth, this._clientHeight = this._window.parentClientHeight;\n      }, e.prototype._additionalProcessing = function (e, i) {\n        t.prototype._additionalProcessing.call(this, e, i), this._buildClientSizes();\n      }, e.prototype._postMeasure = function () {\n        t.prototype._postMeasure.call(this), this._updateScroller(), this._setWindowPosition(!1);\n      }, Object.defineProperty(e.prototype, \"wheelPrecision\", {\n        get: function get() {\n          return this._wheelPrecision;\n        },\n        set: function set(t) {\n          this._wheelPrecision !== t && (t < 0 && (t = 0), t > 1 && (t = 1), this._wheelPrecision = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"scrollBackground\", {\n        get: function get() {\n          return this._horizontalBarSpace.background;\n        },\n        set: function set(t) {\n          this._horizontalBarSpace.background !== t && (this._horizontalBarSpace.background = t, this._verticalBarSpace.background = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barColor\", {\n        get: function get() {\n          return this._barColor;\n        },\n        set: function set(t) {\n          this._barColor !== t && (this._barColor = t, this._horizontalBar.color = t, this._verticalBar.color = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbImage\", {\n        get: function get() {\n          return this._barImage;\n        },\n        set: function set(t) {\n          if (this._barImage !== t) {\n            this._barImage = t;\n            var e = this._horizontalBar,\n                i = this._verticalBar;\n            e.thumbImage = t, i.thumbImage = t;\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"horizontalThumbImage\", {\n        get: function get() {\n          return this._horizontalBarImage;\n        },\n        set: function set(t) {\n          this._horizontalBarImage !== t && (this._horizontalBarImage = t, this._horizontalBar.thumbImage = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalThumbImage\", {\n        get: function get() {\n          return this._verticalBarImage;\n        },\n        set: function set(t) {\n          this._verticalBarImage !== t && (this._verticalBarImage = t, this._verticalBar.thumbImage = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barSize\", {\n        get: function get() {\n          return this._barSize;\n        },\n        set: function set(t) {\n          this._barSize !== t && (this._barSize = t, this._markAsDirty(), this._horizontalBar.isVisible && this._grid.setRowDefinition(1, this._barSize, !0), this._verticalBar.isVisible && this._grid.setColumnDefinition(1, this._barSize, !0));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbLength\", {\n        get: function get() {\n          return this._thumbLength;\n        },\n        set: function set(t) {\n          if (this._thumbLength !== t) {\n            t <= 0 && (t = .1), t > 1 && (t = 1), this._thumbLength = t;\n            var e = this._horizontalBar,\n                i = this._verticalBar;\n            e.thumbLength = t, i.thumbLength = t, this._markAsDirty();\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbHeight\", {\n        get: function get() {\n          return this._thumbHeight;\n        },\n        set: function set(t) {\n          if (this._thumbHeight !== t) {\n            t <= 0 && (t = .1), t > 1 && (t = 1), this._thumbHeight = t;\n            var e = this._horizontalBar,\n                i = this._verticalBar;\n            e.thumbHeight = t, i.thumbHeight = t, this._markAsDirty();\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barImageHeight\", {\n        get: function get() {\n          return this._barImageHeight;\n        },\n        set: function set(t) {\n          if (this._barImageHeight !== t) {\n            t <= 0 && (t = .1), t > 1 && (t = 1), this._barImageHeight = t;\n            var e = this._horizontalBar,\n                i = this._verticalBar;\n            e.barImageHeight = t, i.barImageHeight = t, this._markAsDirty();\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"horizontalBarImageHeight\", {\n        get: function get() {\n          return this._horizontalBarImageHeight;\n        },\n        set: function set(t) {\n          this._horizontalBarImageHeight !== t && (t <= 0 && (t = .1), t > 1 && (t = 1), this._horizontalBarImageHeight = t, this._horizontalBar.barImageHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalBarImageHeight\", {\n        get: function get() {\n          return this._verticalBarImageHeight;\n        },\n        set: function set(t) {\n          this._verticalBarImageHeight !== t && (t <= 0 && (t = .1), t > 1 && (t = 1), this._verticalBarImageHeight = t, this._verticalBar.barImageHeight = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barBackground\", {\n        get: function get() {\n          return this._barBackground;\n        },\n        set: function set(t) {\n          if (this._barBackground !== t) {\n            this._barBackground = t;\n            var e = this._horizontalBar,\n                i = this._verticalBar;\n            e.background = t, i.background = t, this._dragSpace.background = t;\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"barImage\", {\n        get: function get() {\n          return this._barBackgroundImage;\n        },\n        set: function set(t) {\n          this._barBackgroundImage, this._barBackgroundImage = t;\n          var e = this._horizontalBar,\n              i = this._verticalBar;\n          e.backgroundImage = t, i.backgroundImage = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"horizontalBarImage\", {\n        get: function get() {\n          return this._horizontalBarBackgroundImage;\n        },\n        set: function set(t) {\n          this._horizontalBarBackgroundImage, this._horizontalBarBackgroundImage = t, this._horizontalBar.backgroundImage = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"verticalBarImage\", {\n        get: function get() {\n          return this._verticalBarBackgroundImage;\n        },\n        set: function set(t) {\n          this._verticalBarBackgroundImage, this._verticalBarBackgroundImage = t, this._verticalBar.backgroundImage = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._setWindowPosition = function (t) {\n        void 0 === t && (t = !0);\n        var e = this.host.idealRatio,\n            i = this._window._currentMeasure.width,\n            r = this._window._currentMeasure.height;\n\n        if (t || this._oldWindowContentsWidth !== i || this._oldWindowContentsHeight !== r) {\n          this._oldWindowContentsWidth = i, this._oldWindowContentsHeight = r;\n          var n = this._clientWidth - i,\n              o = this._clientHeight - r,\n              s = this._horizontalBar.value / e * n + \"px\",\n              a = this._verticalBar.value / e * o + \"px\";\n          s !== this._window.left && (this._window.left = s, this.freezeControls || (this._rebuildLayout = !0)), a !== this._window.top && (this._window.top = a, this.freezeControls || (this._rebuildLayout = !0));\n        }\n      }, e.prototype._updateScroller = function () {\n        var t = this._window._currentMeasure.width,\n            e = this._window._currentMeasure.height;\n        this._horizontalBar.isVisible && t <= this._clientWidth && !this.forceHorizontalBar ? (this._grid.setRowDefinition(1, 0, !0), this._horizontalBar.isVisible = !1, this._horizontalBar.value = 0, this._rebuildLayout = !0) : !this._horizontalBar.isVisible && (t > this._clientWidth || this.forceHorizontalBar) && (this._grid.setRowDefinition(1, this._barSize, !0), this._horizontalBar.isVisible = !0, this._rebuildLayout = !0), this._verticalBar.isVisible && e <= this._clientHeight && !this.forceVerticalBar ? (this._grid.setColumnDefinition(1, 0, !0), this._verticalBar.isVisible = !1, this._verticalBar.value = 0, this._rebuildLayout = !0) : !this._verticalBar.isVisible && (e > this._clientHeight || this.forceVerticalBar) && (this._grid.setColumnDefinition(1, this._barSize, !0), this._verticalBar.isVisible = !0, this._rebuildLayout = !0), this._buildClientSizes();\n        var i = this.host.idealRatio;\n        this._horizontalBar.thumbWidth = .9 * this._thumbLength * (this._clientWidth / i) + \"px\", this._verticalBar.thumbWidth = .9 * this._thumbLength * (this._clientHeight / i) + \"px\";\n      }, e.prototype._link = function (e) {\n        t.prototype._link.call(this, e), this._attachWheel();\n      }, e.prototype._addBar = function (t, e, i, r) {\n        var n = this;\n        t.paddingLeft = 0, t.width = \"100%\", t.height = \"100%\", t.barOffset = 0, t.value = 0, t.maximum = 1, t.horizontalAlignment = f.HORIZONTAL_ALIGNMENT_CENTER, t.verticalAlignment = f.VERTICAL_ALIGNMENT_CENTER, t.isVertical = i, t.rotation = r, t.isVisible = !1, e.addControl(t), t.onValueChangedObservable.add(function (t) {\n          n._setWindowPosition();\n        });\n      }, e.prototype._attachWheel = function () {\n        var t = this;\n        this._host && !this._onWheelObserver && (this._onWheelObserver = this.onWheelObservable.add(function (e) {\n          t._pointerIsOver && (1 == t._verticalBar.isVisible && (e.y < 0 && t._verticalBar.value > 0 ? t._verticalBar.value -= t._wheelPrecision : e.y > 0 && t._verticalBar.value < t._verticalBar.maximum && (t._verticalBar.value += t._wheelPrecision)), 1 == t._horizontalBar.isVisible && (e.x < 0 && t._horizontalBar.value < t._horizontalBar.maximum ? t._horizontalBar.value += t._wheelPrecision : e.x > 0 && t._horizontalBar.value > 0 && (t._horizontalBar.value -= t._wheelPrecision)));\n        }));\n      }, e.prototype._renderHighlightSpecific = function (e) {\n        this.isHighlighted && (t.prototype._renderHighlightSpecific.call(this, e), this._grid._renderHighlightSpecific(e), e.restore());\n      }, e.prototype.dispose = function () {\n        this.onWheelObservable.remove(this._onWheelObserver), this._onWheelObserver = null, t.prototype.dispose.call(this);\n      }, e;\n    }(b);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.ScrollViewer\"] = G;\n\n    var X = function X() {},\n        U = function (t) {\n      function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.onKeyPressObservable = new s.Observable(), e.defaultButtonWidth = \"40px\", e.defaultButtonHeight = \"40px\", e.defaultButtonPaddingLeft = \"2px\", e.defaultButtonPaddingRight = \"2px\", e.defaultButtonPaddingTop = \"2px\", e.defaultButtonPaddingBottom = \"2px\", e.defaultButtonColor = \"#DDD\", e.defaultButtonBackground = \"#070707\", e.shiftButtonColor = \"#7799FF\", e.selectedShiftThickness = 1, e.shiftState = 0, e._currentlyConnectedInputText = null, e._connectedInputTexts = [], e._onKeyPressObserver = null, e;\n      }\n\n      return n(e, t), e.prototype._getTypeName = function () {\n        return \"VirtualKeyboard\";\n      }, e.prototype._createKey = function (t, e) {\n        var i = this,\n            r = O.CreateSimpleButton(t, t);\n        return r.width = e && e.width ? e.width : this.defaultButtonWidth, r.height = e && e.height ? e.height : this.defaultButtonHeight, r.color = e && e.color ? e.color : this.defaultButtonColor, r.background = e && e.background ? e.background : this.defaultButtonBackground, r.paddingLeft = e && e.paddingLeft ? e.paddingLeft : this.defaultButtonPaddingLeft, r.paddingRight = e && e.paddingRight ? e.paddingRight : this.defaultButtonPaddingRight, r.paddingTop = e && e.paddingTop ? e.paddingTop : this.defaultButtonPaddingTop, r.paddingBottom = e && e.paddingBottom ? e.paddingBottom : this.defaultButtonPaddingBottom, r.thickness = 0, r.isFocusInvisible = !0, r.shadowColor = this.shadowColor, r.shadowBlur = this.shadowBlur, r.shadowOffsetX = this.shadowOffsetX, r.shadowOffsetY = this.shadowOffsetY, r.onPointerUpObservable.add(function () {\n          i.onKeyPressObservable.notifyObservers(t);\n        }), r;\n      }, e.prototype.addKeysRow = function (t, e) {\n        var i = new C();\n        i.isVertical = !1, i.isFocusInvisible = !0;\n\n        for (var r = null, n = 0; n < t.length; n++) {\n          var o = null;\n          e && e.length === t.length && (o = e[n]);\n\n          var s = this._createKey(t[n], o);\n\n          (!r || s.heightInPixels > r.heightInPixels) && (r = s), i.addControl(s);\n        }\n\n        i.height = r ? r.height : this.defaultButtonHeight, this.addControl(i);\n      }, e.prototype.applyShiftState = function (t) {\n        if (this.children) for (var e = 0; e < this.children.length; e++) {\n          var i = this.children[e];\n          if (i && i.children) for (var r = i, n = 0; n < r.children.length; n++) {\n            var o = r.children[n];\n\n            if (o && o.children[0]) {\n              var s = o.children[0];\n              \"⇧\" === s.text && (o.color = t ? this.shiftButtonColor : this.defaultButtonColor, o.thickness = t > 1 ? this.selectedShiftThickness : 0), s.text = t > 0 ? s.text.toUpperCase() : s.text.toLowerCase();\n            }\n          }\n        }\n      }, Object.defineProperty(e.prototype, \"connectedInputText\", {\n        get: function get() {\n          return this._currentlyConnectedInputText;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.connect = function (t) {\n        var e = this;\n\n        if (!this._connectedInputTexts.some(function (e) {\n          return e.input === t;\n        })) {\n          null === this._onKeyPressObserver && (this._onKeyPressObserver = this.onKeyPressObservable.add(function (t) {\n            if (e._currentlyConnectedInputText) {\n              switch (e._currentlyConnectedInputText._host.focusedControl = e._currentlyConnectedInputText, t) {\n                case \"⇧\":\n                  return e.shiftState++, e.shiftState > 2 && (e.shiftState = 0), void e.applyShiftState(e.shiftState);\n\n                case \"←\":\n                  return void e._currentlyConnectedInputText.processKey(8);\n\n                case \"↵\":\n                  return void e._currentlyConnectedInputText.processKey(13);\n              }\n\n              e._currentlyConnectedInputText.processKey(-1, e.shiftState ? t.toUpperCase() : t), 1 === e.shiftState && (e.shiftState = 0, e.applyShiftState(e.shiftState));\n            }\n          })), this.isVisible = !1, this._currentlyConnectedInputText = t, t._connectedVirtualKeyboard = this;\n          var i = t.onFocusObservable.add(function () {\n            e._currentlyConnectedInputText = t, t._connectedVirtualKeyboard = e, e.isVisible = !0;\n          }),\n              r = t.onBlurObservable.add(function () {\n            t._connectedVirtualKeyboard = null, e._currentlyConnectedInputText = null, e.isVisible = !1;\n          });\n\n          this._connectedInputTexts.push({\n            input: t,\n            onBlurObserver: r,\n            onFocusObserver: i\n          });\n        }\n      }, e.prototype.disconnect = function (t) {\n        var e = this;\n\n        if (t) {\n          var i = this._connectedInputTexts.filter(function (e) {\n            return e.input === t;\n          });\n\n          1 === i.length && (this._removeConnectedInputObservables(i[0]), this._connectedInputTexts = this._connectedInputTexts.filter(function (e) {\n            return e.input !== t;\n          }), this._currentlyConnectedInputText === t && (this._currentlyConnectedInputText = null));\n        } else this._connectedInputTexts.forEach(function (t) {\n          e._removeConnectedInputObservables(t);\n        }), this._connectedInputTexts = [];\n\n        0 === this._connectedInputTexts.length && (this._currentlyConnectedInputText = null, this.onKeyPressObservable.remove(this._onKeyPressObserver), this._onKeyPressObserver = null);\n      }, e.prototype._removeConnectedInputObservables = function (t) {\n        t.input._connectedVirtualKeyboard = null, t.input.onFocusObservable.remove(t.onFocusObserver), t.input.onBlurObservable.remove(t.onBlurObserver);\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this.disconnect();\n      }, e.CreateDefaultLayout = function (t) {\n        var i = new e(t);\n        return i.addKeysRow([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"←\"]), i.addKeysRow([\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"]), i.addKeysRow([\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\", \"↵\"]), i.addKeysRow([\"⇧\", \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\"]), i.addKeysRow([\" \"], [{\n          width: \"200px\"\n        }]), i;\n      }, e;\n    }(C);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.VirtualKeyboard\"] = U;\n\n    var Y = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._cellWidth = 20, i._cellHeight = 20, i._minorLineTickness = 1, i._minorLineColor = \"DarkGray\", i._majorLineTickness = 2, i._majorLineColor = \"White\", i._majorLineFrequency = 5, i._background = \"Black\", i._displayMajorLines = !0, i._displayMinorLines = !0, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"displayMinorLines\", {\n        get: function get() {\n          return this._displayMinorLines;\n        },\n        set: function set(t) {\n          this._displayMinorLines !== t && (this._displayMinorLines = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"displayMajorLines\", {\n        get: function get() {\n          return this._displayMajorLines;\n        },\n        set: function set(t) {\n          this._displayMajorLines !== t && (this._displayMajorLines = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cellWidth\", {\n        get: function get() {\n          return this._cellWidth;\n        },\n        set: function set(t) {\n          this._cellWidth = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"cellHeight\", {\n        get: function get() {\n          return this._cellHeight;\n        },\n        set: function set(t) {\n          this._cellHeight = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"minorLineTickness\", {\n        get: function get() {\n          return this._minorLineTickness;\n        },\n        set: function set(t) {\n          this._minorLineTickness = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"minorLineColor\", {\n        get: function get() {\n          return this._minorLineColor;\n        },\n        set: function set(t) {\n          this._minorLineColor = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"majorLineTickness\", {\n        get: function get() {\n          return this._majorLineTickness;\n        },\n        set: function set(t) {\n          this._majorLineTickness = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"majorLineColor\", {\n        get: function get() {\n          return this._majorLineColor;\n        },\n        set: function set(t) {\n          this._majorLineColor = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"majorLineFrequency\", {\n        get: function get() {\n          return this._majorLineFrequency;\n        },\n        set: function set(t) {\n          this._majorLineFrequency = t, this._markAsDirty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._draw = function (t, e) {\n        if (t.save(), this._applyStates(t), this._isEnabled) {\n          this._background && (t.fillStyle = this._background, t.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height));\n          var i = this._currentMeasure.width / this._cellWidth,\n              r = this._currentMeasure.height / this._cellHeight,\n              n = this._currentMeasure.left + this._currentMeasure.width / 2,\n              o = this._currentMeasure.top + this._currentMeasure.height / 2;\n\n          if (this._displayMinorLines) {\n            t.strokeStyle = this._minorLineColor, t.lineWidth = this._minorLineTickness;\n\n            for (var s = -i / 2; s < i / 2; s++) {\n              var a = n + s * this.cellWidth;\n              t.beginPath(), t.moveTo(a, this._currentMeasure.top), t.lineTo(a, this._currentMeasure.top + this._currentMeasure.height), t.stroke();\n            }\n\n            for (var h = -r / 2; h < r / 2; h++) {\n              var l = o + h * this.cellHeight;\n              t.beginPath(), t.moveTo(this._currentMeasure.left, l), t.lineTo(this._currentMeasure.left + this._currentMeasure.width, l), t.stroke();\n            }\n          }\n\n          if (this._displayMajorLines) {\n            t.strokeStyle = this._majorLineColor, t.lineWidth = this._majorLineTickness;\n\n            for (s = -i / 2 + this._majorLineFrequency; s < i / 2; s += this._majorLineFrequency) {\n              a = n + s * this.cellWidth;\n              t.beginPath(), t.moveTo(a, this._currentMeasure.top), t.lineTo(a, this._currentMeasure.top + this._currentMeasure.height), t.stroke();\n            }\n\n            for (h = -r / 2 + this._majorLineFrequency; h < r / 2; h += this._majorLineFrequency) {\n              l = o + h * this.cellHeight;\n              t.moveTo(this._currentMeasure.left, l), t.lineTo(this._currentMeasure.left + this._currentMeasure.width, l), t.closePath(), t.stroke();\n            }\n          }\n        }\n\n        t.restore();\n      }, e.prototype._getTypeName = function () {\n        return \"DisplayGrid\";\n      }, e;\n    }(f);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.DisplayGrid\"] = Y;\n\n    var q = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i.name = e, i._tempMeasure = new _(0, 0, 0, 0), i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"displayThumb\", {\n        get: function get() {\n          return this._displayThumb && null != this.thumbImage;\n        },\n        set: function set(t) {\n          this._displayThumb !== t && (this._displayThumb = t, this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"backgroundImage\", {\n        get: function get() {\n          return this._backgroundImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._backgroundImage !== t && (this._backgroundImage = t, t && !t.isLoaded && t.onImageLoadedObservable.addOnce(function () {\n            return e._markAsDirty();\n          }), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"valueBarImage\", {\n        get: function get() {\n          return this._valueBarImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._valueBarImage !== t && (this._valueBarImage = t, t && !t.isLoaded && t.onImageLoadedObservable.addOnce(function () {\n            return e._markAsDirty();\n          }), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"thumbImage\", {\n        get: function get() {\n          return this._thumbImage;\n        },\n        set: function set(t) {\n          var e = this;\n          this._thumbImage !== t && (this._thumbImage = t, t && !t.isLoaded && t.onImageLoadedObservable.addOnce(function () {\n            return e._markAsDirty();\n          }), this._markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"ImageBasedSlider\";\n      }, e.prototype._draw = function (t, e) {\n        t.save(), this._applyStates(t), this._prepareRenderingData(\"rectangle\");\n\n        var i = this._getThumbPosition(),\n            r = this._renderLeft,\n            n = this._renderTop,\n            o = this._renderWidth,\n            s = this._renderHeight;\n\n        this._backgroundImage && (this._tempMeasure.copyFromFloats(r, n, o, s), this.isThumbClamped && this.displayThumb && (this.isVertical ? this._tempMeasure.height += this._effectiveThumbThickness : this._tempMeasure.width += this._effectiveThumbThickness), this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure), this._backgroundImage._draw(t)), this._valueBarImage && (this.isVertical ? this.isThumbClamped && this.displayThumb ? this._tempMeasure.copyFromFloats(r, n + i, o, s - i + this._effectiveThumbThickness) : this._tempMeasure.copyFromFloats(r, n + i, o, s - i) : this.isThumbClamped && this.displayThumb ? this._tempMeasure.copyFromFloats(r, n, i + this._effectiveThumbThickness / 2, s) : this._tempMeasure.copyFromFloats(r, n, i, s), this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure), this._valueBarImage._draw(t)), this.displayThumb && (this.isVertical ? this._tempMeasure.copyFromFloats(r - this._effectiveBarOffset, this._currentMeasure.top + i, this._currentMeasure.width, this._effectiveThumbThickness) : this._tempMeasure.copyFromFloats(this._currentMeasure.left + i, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height), this._thumbImage._currentMeasure.copyFrom(this._tempMeasure), this._thumbImage._draw(t)), t.restore();\n      }, e;\n    }(L);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.ImageBasedSlider\"] = q;\n    var K = \"Statics\";\n\n    f.AddHeader = function (t, e, i, r) {\n      var n = new C(\"panel\"),\n          o = !r || r.isHorizontal,\n          s = !r || r.controlFirst;\n      n.isVertical = !o;\n      var a = new y(\"header\");\n      return a.text = e, a.textHorizontalAlignment = f.HORIZONTAL_ALIGNMENT_LEFT, o ? a.width = i : a.height = i, s ? (n.addControl(t), n.addControl(a), a.paddingLeft = \"5px\") : (n.addControl(a), n.addControl(t), a.paddingRight = \"5px\"), a.shadowBlur = t.shadowBlur, a.shadowColor = t.shadowColor, a.shadowOffsetX = t.shadowOffsetX, a.shadowOffsetY = t.shadowOffsetY, n;\n    };\n\n    var Z = function () {\n      function t(t) {\n        this._fontFamily = \"Arial\", this._fontStyle = \"\", this._fontWeight = \"\", this._fontSize = new a(18, a.UNITMODE_PIXEL, !1), this.onChangedObservable = new s.Observable(), this._host = t;\n      }\n\n      return Object.defineProperty(t.prototype, \"fontSize\", {\n        get: function get() {\n          return this._fontSize.toString(this._host);\n        },\n        set: function set(t) {\n          this._fontSize.toString(this._host) !== t && this._fontSize.fromString(t) && this.onChangedObservable.notifyObservers(this);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontFamily\", {\n        get: function get() {\n          return this._fontFamily;\n        },\n        set: function set(t) {\n          this._fontFamily !== t && (this._fontFamily = t, this.onChangedObservable.notifyObservers(this));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontStyle\", {\n        get: function get() {\n          return this._fontStyle;\n        },\n        set: function set(t) {\n          this._fontStyle !== t && (this._fontStyle = t, this.onChangedObservable.notifyObservers(this));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"fontWeight\", {\n        get: function get() {\n          return this._fontWeight;\n        },\n        set: function set(t) {\n          this._fontWeight !== t && (this._fontWeight = t, this.onChangedObservable.notifyObservers(this));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.dispose = function () {\n        this.onChangedObservable.clear();\n      }, t;\n    }(),\n        J = function (t) {\n      function e(e, i, r, n, o, a, h) {\n        void 0 === i && (i = 0), void 0 === r && (r = 0), void 0 === o && (o = !1), void 0 === a && (a = s.Texture.NEAREST_SAMPLINGMODE);\n        var l = t.call(this, e, {\n          width: i,\n          height: r\n        }, n, o, a, s.Constants.TEXTUREFORMAT_RGBA, h) || this;\n        return l._isDirty = !1, l._rootContainer = new g(\"root\"), l._lastControlOver = {}, l._lastControlDown = {}, l._capturingControl = {}, l._linkedControls = new Array(), l._isFullscreen = !1, l._fullscreenViewport = new s.Viewport(0, 0, 1, 1), l._idealWidth = 0, l._idealHeight = 0, l._useSmallestIdeal = !1, l._renderAtIdealSize = !1, l._blockNextFocusCheck = !1, l._renderScale = 1, l._cursorChanged = !1, l._defaultMousePointerId = 0, l._numLayoutCalls = 0, l._numRenderCalls = 0, l._clipboardData = \"\", l.onClipboardObservable = new s.Observable(), l.onControlPickedObservable = new s.Observable(), l.onBeginLayoutObservable = new s.Observable(), l.onEndLayoutObservable = new s.Observable(), l.onBeginRenderObservable = new s.Observable(), l.onEndRenderObservable = new s.Observable(), l.premulAlpha = !1, l.applyYInversionOnUpdate = !0, l._useInvalidateRectOptimization = !0, l._invalidatedRectangle = null, l._clearMeasure = new _(0, 0, 0, 0), l.onClipboardCopy = function (t) {\n          var e = t,\n              i = new s.ClipboardInfo(s.ClipboardEventTypes.COPY, e);\n          l.onClipboardObservable.notifyObservers(i), e.preventDefault();\n        }, l.onClipboardCut = function (t) {\n          var e = t,\n              i = new s.ClipboardInfo(s.ClipboardEventTypes.CUT, e);\n          l.onClipboardObservable.notifyObservers(i), e.preventDefault();\n        }, l.onClipboardPaste = function (t) {\n          var e = t,\n              i = new s.ClipboardInfo(s.ClipboardEventTypes.PASTE, e);\n          l.onClipboardObservable.notifyObservers(i), e.preventDefault();\n        }, (n = l.getScene()) && l._texture ? (l._rootElement = n.getEngine().getInputElement(), l._renderObserver = n.onBeforeCameraRenderObservable.add(function (t) {\n          return l._checkUpdate(t);\n        }), l._preKeyboardObserver = n.onPreKeyboardObservable.add(function (t) {\n          l._focusedControl && (t.type === s.KeyboardEventTypes.KEYDOWN && l._focusedControl.processKeyboard(t.event), t.skipOnPointerObservable = !0);\n        }), l._rootContainer._link(l), l.hasAlpha = !0, i && r || (l._resizeObserver = n.getEngine().onResizeObservable.add(function () {\n          return l._onResize();\n        }), l._onResize()), l._texture.isReady = !0, l) : l;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"numLayoutCalls\", {\n        get: function get() {\n          return this._numLayoutCalls;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"numRenderCalls\", {\n        get: function get() {\n          return this._numRenderCalls;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"renderScale\", {\n        get: function get() {\n          return this._renderScale;\n        },\n        set: function set(t) {\n          t !== this._renderScale && (this._renderScale = t, this._onResize());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"background\", {\n        get: function get() {\n          return this._background;\n        },\n        set: function set(t) {\n          this._background !== t && (this._background = t, this.markAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"idealWidth\", {\n        get: function get() {\n          return this._idealWidth;\n        },\n        set: function set(t) {\n          this._idealWidth !== t && (this._idealWidth = t, this.markAsDirty(), this._rootContainer._markAllAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"idealHeight\", {\n        get: function get() {\n          return this._idealHeight;\n        },\n        set: function set(t) {\n          this._idealHeight !== t && (this._idealHeight = t, this.markAsDirty(), this._rootContainer._markAllAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"useSmallestIdeal\", {\n        get: function get() {\n          return this._useSmallestIdeal;\n        },\n        set: function set(t) {\n          this._useSmallestIdeal !== t && (this._useSmallestIdeal = t, this.markAsDirty(), this._rootContainer._markAllAsDirty());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"renderAtIdealSize\", {\n        get: function get() {\n          return this._renderAtIdealSize;\n        },\n        set: function set(t) {\n          this._renderAtIdealSize !== t && (this._renderAtIdealSize = t, this._onResize());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"idealRatio\", {\n        get: function get() {\n          var t = 0,\n              e = 0;\n          return this._idealWidth && (t = this.getSize().width / this._idealWidth), this._idealHeight && (e = this.getSize().height / this._idealHeight), this._useSmallestIdeal && this._idealWidth && this._idealHeight ? window.innerWidth < window.innerHeight ? t : e : this._idealWidth ? t : this._idealHeight ? e : 1;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"layer\", {\n        get: function get() {\n          return this._layerToDispose;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"rootContainer\", {\n        get: function get() {\n          return this._rootContainer;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.getChildren = function () {\n        return [this._rootContainer];\n      }, e.prototype.getDescendants = function (t, e) {\n        return this._rootContainer.getDescendants(t, e);\n      }, Object.defineProperty(e.prototype, \"focusedControl\", {\n        get: function get() {\n          return this._focusedControl;\n        },\n        set: function set(t) {\n          this._focusedControl != t && (this._focusedControl && this._focusedControl.onBlur(), t && t.onFocus(), this._focusedControl = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"isForeground\", {\n        get: function get() {\n          return !this.layer || !this.layer.isBackground;\n        },\n        set: function set(t) {\n          this.layer && this.layer.isBackground !== !t && (this.layer.isBackground = !t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"clipboardData\", {\n        get: function get() {\n          return this._clipboardData;\n        },\n        set: function set(t) {\n          this._clipboardData = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.getClassName = function () {\n        return \"AdvancedDynamicTexture\";\n      }, e.prototype.executeOnAllControls = function (t, e) {\n        e || (e = this._rootContainer), t(e);\n\n        for (var i = 0, r = e.children; i < r.length; i++) {\n          var n = r[i];\n          n.children ? this.executeOnAllControls(t, n) : t(n);\n        }\n      }, Object.defineProperty(e.prototype, \"useInvalidateRectOptimization\", {\n        get: function get() {\n          return this._useInvalidateRectOptimization;\n        },\n        set: function set(t) {\n          this._useInvalidateRectOptimization = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.invalidateRect = function (t, e, i, r) {\n        if (this._useInvalidateRectOptimization) if (this._invalidatedRectangle) {\n          var n = Math.ceil(Math.max(this._invalidatedRectangle.left + this._invalidatedRectangle.width - 1, i)),\n              o = Math.ceil(Math.max(this._invalidatedRectangle.top + this._invalidatedRectangle.height - 1, r));\n          this._invalidatedRectangle.left = Math.floor(Math.min(this._invalidatedRectangle.left, t)), this._invalidatedRectangle.top = Math.floor(Math.min(this._invalidatedRectangle.top, e)), this._invalidatedRectangle.width = n - this._invalidatedRectangle.left + 1, this._invalidatedRectangle.height = o - this._invalidatedRectangle.top + 1;\n        } else this._invalidatedRectangle = new _(t, e, i - t + 1, r - e + 1);\n      }, e.prototype.markAsDirty = function () {\n        this._isDirty = !0;\n      }, e.prototype.createStyle = function () {\n        return new Z(this);\n      }, e.prototype.addControl = function (t) {\n        return this._rootContainer.addControl(t), this;\n      }, e.prototype.removeControl = function (t) {\n        return this._rootContainer.removeControl(t), this;\n      }, e.prototype.dispose = function () {\n        var e = this.getScene();\n        e && (this._rootElement = null, e.onBeforeCameraRenderObservable.remove(this._renderObserver), this._resizeObserver && e.getEngine().onResizeObservable.remove(this._resizeObserver), this._pointerMoveObserver && e.onPrePointerObservable.remove(this._pointerMoveObserver), this._pointerObserver && e.onPointerObservable.remove(this._pointerObserver), this._preKeyboardObserver && e.onPreKeyboardObservable.remove(this._preKeyboardObserver), this._canvasPointerOutObserver && e.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver), this._canvasBlurObserver && e.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver), this._layerToDispose && (this._layerToDispose.texture = null, this._layerToDispose.dispose(), this._layerToDispose = null), this._rootContainer.dispose(), this.onClipboardObservable.clear(), this.onControlPickedObservable.clear(), this.onBeginRenderObservable.clear(), this.onEndRenderObservable.clear(), this.onBeginLayoutObservable.clear(), this.onEndLayoutObservable.clear(), t.prototype.dispose.call(this));\n      }, e.prototype._onResize = function () {\n        var t = this.getScene();\n\n        if (t) {\n          var e = t.getEngine(),\n              i = this.getSize(),\n              r = e.getRenderWidth() * this._renderScale,\n              n = e.getRenderHeight() * this._renderScale;\n\n          this._renderAtIdealSize && (this._idealWidth ? (n = n * this._idealWidth / r, r = this._idealWidth) : this._idealHeight && (r = r * this._idealHeight / n, n = this._idealHeight)), i.width === r && i.height === n || (this.scaleTo(r, n), this.markAsDirty(), (this._idealWidth || this._idealHeight) && this._rootContainer._markAllAsDirty()), this.invalidateRect(0, 0, i.width - 1, i.height - 1);\n        }\n      }, e.prototype._getGlobalViewport = function (t) {\n        var e = t.getEngine();\n        return this._fullscreenViewport.toGlobal(e.getRenderWidth(), e.getRenderHeight());\n      }, e.prototype.getProjectedPosition = function (t, e) {\n        var i = this.getScene();\n        if (!i) return s.Vector2.Zero();\n\n        var r = this._getGlobalViewport(i),\n            n = s.Vector3.Project(t, e, i.getTransformMatrix(), r);\n\n        return n.scaleInPlace(this.renderScale), new s.Vector2(n.x, n.y);\n      }, e.prototype.getProjectedPositionWithZ = function (t, e) {\n        var i = this.getScene();\n        if (!i) return s.Vector3.Zero();\n\n        var r = this._getGlobalViewport(i),\n            n = s.Vector3.Project(t, e, i.getTransformMatrix(), r);\n\n        return n.scaleInPlace(this.renderScale), new s.Vector3(n.x, n.y, n.z);\n      }, e.prototype._checkUpdate = function (t) {\n        if (!this._layerToDispose || 0 != (t.layerMask & this._layerToDispose.layerMask)) {\n          if (this._isFullscreen && this._linkedControls.length) {\n            var e = this.getScene();\n            if (!e) return;\n\n            for (var i = this._getGlobalViewport(e), r = function r(t) {\n              if (!t.isVisible) return \"continue\";\n              var r = t._linkedMesh;\n              if (!r || r.isDisposed()) return s.Tools.SetImmediate(function () {\n                t.linkWithMesh(null);\n              }), \"continue\";\n              var o = r.getBoundingInfo ? r.getBoundingInfo().boundingSphere.center : s.Vector3.ZeroReadOnly,\n                  a = s.Vector3.Project(o, r.getWorldMatrix(), e.getTransformMatrix(), i);\n              if (a.z < 0 || a.z > 1) return t.notRenderable = !0, \"continue\";\n              t.notRenderable = !1, a.scaleInPlace(n.renderScale), t._moveToProjectedPosition(a);\n            }, n = this, o = 0, a = this._linkedControls; o < a.length; o++) {\n              r(a[o]);\n            }\n          }\n\n          (this._isDirty || this._rootContainer.isDirty) && (this._isDirty = !1, this._render(), this.update(this.applyYInversionOnUpdate, this.premulAlpha));\n        }\n      }, e.prototype._render = function () {\n        var t = this.getSize(),\n            e = t.width,\n            i = t.height,\n            r = this.getContext();\n        r.font = \"18px Arial\", r.strokeStyle = \"white\", this.onBeginLayoutObservable.notifyObservers(this);\n        var n = new _(0, 0, e, i);\n        this._numLayoutCalls = 0, this._rootContainer._layout(n, r), this.onEndLayoutObservable.notifyObservers(this), this._isDirty = !1, this._invalidatedRectangle ? this._clearMeasure.copyFrom(this._invalidatedRectangle) : this._clearMeasure.copyFromFloats(0, 0, e, i), r.clearRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height), this._background && (r.save(), r.fillStyle = this._background, r.fillRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height), r.restore()), this.onBeginRenderObservable.notifyObservers(this), this._numRenderCalls = 0, this._rootContainer._render(r, this._invalidatedRectangle), this.onEndRenderObservable.notifyObservers(this), this._invalidatedRectangle = null;\n      }, e.prototype._changeCursor = function (t) {\n        this._rootElement && (this._rootElement.style.cursor = t, this._cursorChanged = !0);\n      }, e.prototype._registerLastControlDown = function (t, e) {\n        this._lastControlDown[e] = t, this.onControlPickedObservable.notifyObservers(t);\n      }, e.prototype._doPicking = function (t, e, i, r, n, o, a, h) {\n        var l = this.getScene();\n\n        if (l) {\n          var u = l.getEngine(),\n              c = this.getSize();\n\n          if (this._isFullscreen) {\n            var _ = (l.cameraToUseForPointers || l.activeCamera).viewport;\n            t *= c.width / (u.getRenderWidth() * _.width), e *= c.height / (u.getRenderHeight() * _.height);\n          }\n\n          this._capturingControl[n] ? this._capturingControl[n]._processObservables(r, t, e, i, n, o) : (this._cursorChanged = !1, this._rootContainer._processPicking(t, e, i, r, n, o, a, h) || (this._changeCursor(\"\"), r === s.PointerEventTypes.POINTERMOVE && this._lastControlOver[n] && (this._lastControlOver[n]._onPointerOut(this._lastControlOver[n], i), delete this._lastControlOver[n])), this._cursorChanged || this._changeCursor(\"\"), this._manageFocus());\n        }\n      }, e.prototype._cleanControlAfterRemovalFromList = function (t, e) {\n        for (var i in t) {\n          if (t.hasOwnProperty(i)) t[i] === e && delete t[i];\n        }\n      }, e.prototype._cleanControlAfterRemoval = function (t) {\n        this._cleanControlAfterRemovalFromList(this._lastControlDown, t), this._cleanControlAfterRemovalFromList(this._lastControlOver, t);\n      }, e.prototype.attach = function () {\n        var t = this,\n            e = this.getScene();\n\n        if (e) {\n          var i = new s.Viewport(0, 0, 0, 0);\n          this._pointerMoveObserver = e.onPrePointerObservable.add(function (r, n) {\n            if (!e.isPointerCaptured(r.event.pointerId) && (r.type === s.PointerEventTypes.POINTERMOVE || r.type === s.PointerEventTypes.POINTERUP || r.type === s.PointerEventTypes.POINTERDOWN || r.type === s.PointerEventTypes.POINTERWHEEL) && e) {\n              r.type === s.PointerEventTypes.POINTERMOVE && r.event.pointerId && (t._defaultMousePointerId = r.event.pointerId);\n              var o = e.cameraToUseForPointers || e.activeCamera,\n                  a = e.getEngine();\n              o ? o.viewport.toGlobalToRef(a.getRenderWidth(), a.getRenderHeight(), i) : (i.x = 0, i.y = 0, i.width = a.getRenderWidth(), i.height = a.getRenderHeight());\n              var h = e.pointerX / a.getHardwareScalingLevel() - i.x,\n                  l = e.pointerY / a.getHardwareScalingLevel() - (a.getRenderHeight() - i.y - i.height);\n              t._shouldBlockPointer = !1;\n              var u = r.event.pointerId || t._defaultMousePointerId;\n              t._doPicking(h, l, r, r.type, u, r.event.button, r.event.deltaX, r.event.deltaY), t._shouldBlockPointer && (r.skipOnPointerObservable = t._shouldBlockPointer);\n            }\n          }), this._attachToOnPointerOut(e), this._attachToOnBlur(e);\n        }\n      }, e.prototype.registerClipboardEvents = function () {\n        self.addEventListener(\"copy\", this.onClipboardCopy, !1), self.addEventListener(\"cut\", this.onClipboardCut, !1), self.addEventListener(\"paste\", this.onClipboardPaste, !1);\n      }, e.prototype.unRegisterClipboardEvents = function () {\n        self.removeEventListener(\"copy\", this.onClipboardCopy), self.removeEventListener(\"cut\", this.onClipboardCut), self.removeEventListener(\"paste\", this.onClipboardPaste);\n      }, e.prototype.attachToMesh = function (t, e) {\n        var i = this;\n        void 0 === e && (e = !0);\n        var r = this.getScene();\n        r && (this._pointerObserver = r.onPointerObservable.add(function (e, r) {\n          if (e.type === s.PointerEventTypes.POINTERMOVE || e.type === s.PointerEventTypes.POINTERUP || e.type === s.PointerEventTypes.POINTERDOWN) {\n            var n = e.event.pointerId || i._defaultMousePointerId;\n\n            if (e.pickInfo && e.pickInfo.hit && e.pickInfo.pickedMesh === t) {\n              var o = e.pickInfo.getTextureCoordinates();\n\n              if (o) {\n                var a = i.getSize();\n\n                i._doPicking(o.x * a.width, (i.applyYInversionOnUpdate ? 1 - o.y : o.y) * a.height, e, e.type, n, e.event.button);\n              }\n            } else if (e.type === s.PointerEventTypes.POINTERUP) {\n              if (i._lastControlDown[n] && i._lastControlDown[n]._forcePointerUp(n), delete i._lastControlDown[n], i.focusedControl) {\n                var h = i.focusedControl.keepsFocusWith(),\n                    l = !0;\n                if (h) for (var u = 0, c = h; u < c.length; u++) {\n                  var _ = c[u];\n\n                  if (i !== _._host) {\n                    var d = _._host;\n\n                    if (d._lastControlOver[n] && d._lastControlOver[n].isAscendant(_)) {\n                      l = !1;\n                      break;\n                    }\n                  }\n                }\n                l && (i.focusedControl = null);\n              }\n            } else e.type === s.PointerEventTypes.POINTERMOVE && (i._lastControlOver[n] && i._lastControlOver[n]._onPointerOut(i._lastControlOver[n], e, !0), delete i._lastControlOver[n]);\n          }\n        }), t.enablePointerMoveEvents = e, this._attachToOnPointerOut(r), this._attachToOnBlur(r));\n      }, e.prototype.moveFocusToControl = function (t) {\n        this.focusedControl = t, this._lastPickedControl = t, this._blockNextFocusCheck = !0;\n      }, e.prototype._manageFocus = function () {\n        if (this._blockNextFocusCheck) return this._blockNextFocusCheck = !1, void (this._lastPickedControl = this._focusedControl);\n\n        if (this._focusedControl && this._focusedControl !== this._lastPickedControl) {\n          if (this._lastPickedControl.isFocusInvisible) return;\n          this.focusedControl = null;\n        }\n      }, e.prototype._attachToOnPointerOut = function (t) {\n        var e = this;\n        this._canvasPointerOutObserver = t.getEngine().onCanvasPointerOutObservable.add(function (t) {\n          e._lastControlOver[t.pointerId] && e._lastControlOver[t.pointerId]._onPointerOut(e._lastControlOver[t.pointerId], null), delete e._lastControlOver[t.pointerId], e._lastControlDown[t.pointerId] && e._lastControlDown[t.pointerId] !== e._capturingControl[t.pointerId] && (e._lastControlDown[t.pointerId]._forcePointerUp(), delete e._lastControlDown[t.pointerId]);\n        });\n      }, e.prototype._attachToOnBlur = function (t) {\n        var e = this;\n        this._canvasBlurObserver = t.getEngine().onCanvasBlurObservable.add(function (t) {\n          Object.entries(e._lastControlDown).forEach(function (t) {\n            t[0];\n\n            t[1]._onCanvasBlur();\n          }), e._lastControlDown = {};\n        });\n      }, e.CreateForMesh = function (t, i, r, n, o, a) {\n        void 0 === i && (i = 1024), void 0 === r && (r = 1024), void 0 === n && (n = !0), void 0 === o && (o = !1);\n        var h = new e(t.name + \" AdvancedDynamicTexture\", i, r, t.getScene(), !0, s.Texture.TRILINEAR_SAMPLINGMODE, a),\n            l = new s.StandardMaterial(\"AdvancedDynamicTextureMaterial\", t.getScene());\n        return l.backFaceCulling = !1, l.diffuseColor = s.Color3.Black(), l.specularColor = s.Color3.Black(), o ? (l.diffuseTexture = h, l.emissiveTexture = h, h.hasAlpha = !0) : (l.emissiveTexture = h, l.opacityTexture = h), t.material = l, h.attachToMesh(t, n), h;\n      }, e.CreateForMeshTexture = function (t, i, r, n, o) {\n        void 0 === i && (i = 1024), void 0 === r && (r = 1024), void 0 === n && (n = !0);\n        var a = new e(t.name + \" AdvancedDynamicTexture\", i, r, t.getScene(), !0, s.Texture.TRILINEAR_SAMPLINGMODE, o);\n        return a.attachToMesh(t, n), a;\n      }, e.CreateFullscreenUI = function (t, i, r, n) {\n        void 0 === i && (i = !0), void 0 === r && (r = null), void 0 === n && (n = s.Texture.BILINEAR_SAMPLINGMODE);\n        var o = new e(t, 0, 0, r, !1, n),\n            a = new s.Layer(t + \"_layer\", null, r, !i);\n        return a.texture = o, o._layerToDispose = a, o._isFullscreen = !0, o.attach(), o;\n      }, e;\n    }(s.DynamicTexture),\n        Q = function () {\n      function t(t) {\n        this.texture = t, this._captureRenderTime = !1, this._renderTime = new s.PerfCounter(), this._captureLayoutTime = !1, this._layoutTime = new s.PerfCounter(), this._onBeginRenderObserver = null, this._onEndRenderObserver = null, this._onBeginLayoutObserver = null, this._onEndLayoutObserver = null;\n      }\n\n      return Object.defineProperty(t.prototype, \"renderTimeCounter\", {\n        get: function get() {\n          return this._renderTime;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"layoutTimeCounter\", {\n        get: function get() {\n          return this._layoutTime;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"captureRenderTime\", {\n        get: function get() {\n          return this._captureRenderTime;\n        },\n        set: function set(t) {\n          var e = this;\n          t !== this._captureRenderTime && (this._captureRenderTime = t, t ? (this._onBeginRenderObserver = this.texture.onBeginRenderObservable.add(function () {\n            e._renderTime.beginMonitoring();\n          }), this._onEndRenderObserver = this.texture.onEndRenderObservable.add(function () {\n            e._renderTime.endMonitoring(!0);\n          })) : (this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver), this._onBeginRenderObserver = null, this.texture.onEndRenderObservable.remove(this._onEndRenderObserver), this._onEndRenderObserver = null));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"captureLayoutTime\", {\n        get: function get() {\n          return this._captureLayoutTime;\n        },\n        set: function set(t) {\n          var e = this;\n          t !== this._captureLayoutTime && (this._captureLayoutTime = t, t ? (this._onBeginLayoutObserver = this.texture.onBeginLayoutObservable.add(function () {\n            e._layoutTime.beginMonitoring();\n          }), this._onEndLayoutObserver = this.texture.onEndLayoutObservable.add(function () {\n            e._layoutTime.endMonitoring(!0);\n          })) : (this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver), this._onBeginLayoutObserver = null, this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver), this._onEndLayoutObserver = null));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.dispose = function () {\n        this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver), this._onBeginRenderObserver = null, this.texture.onEndRenderObservable.remove(this._onEndRenderObserver), this._onEndRenderObserver = null, this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver), this._onBeginLayoutObserver = null, this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver), this._onEndLayoutObserver = null, this.texture = null;\n      }, t;\n    }(),\n        $ = function () {\n      function t(t) {\n        void 0 === t && (t = null), this._nodes = {}, this._nodeTypes = {\n          element: 1,\n          attribute: 2,\n          text: 3\n        }, this._isLoaded = !1, this._objectAttributes = {\n          textHorizontalAlignment: 1,\n          textVerticalAlignment: 2,\n          horizontalAlignment: 3,\n          verticalAlignment: 4,\n          stretch: 5\n        }, t && (this._parentClass = t);\n      }\n\n      return t.prototype._getChainElement = function (t) {\n        var e = window;\n        this._parentClass && (e = this._parentClass);\n        var i = t;\n        i = i.split(\".\");\n\n        for (var r = 0; r < i.length; r++) {\n          e = e[i[r]];\n        }\n\n        return e;\n      }, t.prototype._getClassAttribute = function (t) {\n        var e = t.split(\".\");\n        return s._TypeStore.GetClass(\"BABYLON.GUI.\" + e[0])[e[1]];\n      }, t.prototype._createGuiElement = function (t, e, i) {\n        void 0 === i && (i = !0);\n\n        try {\n          var r = new (s._TypeStore.GetClass(\"BABYLON.GUI.\" + t.nodeName))();\n          e && i && e.addControl(r);\n\n          for (var n = 0; n < t.attributes.length; n++) {\n            if (!t.attributes[n].name.toLowerCase().includes(\"datasource\")) if (t.attributes[n].name.toLowerCase().includes(\"observable\")) {\n              var o = this._getChainElement(t.attributes[n].value);\n\n              r[t.attributes[n].name].add(o);\n            } else if (\"linkWithMesh\" == t.attributes[n].name) this._parentClass ? r.linkWithMesh(this._parentClass[t.attributes[n].value]) : r.linkWithMesh(window[t.attributes[n].value]);else if (t.attributes[n].value.startsWith(\"{{\") && t.attributes[n].value.endsWith(\"}}\")) {\n              o = this._getChainElement(t.attributes[n].value.substring(2, t.attributes[n].value.length - 2));\n              r[t.attributes[n].name] = o;\n            } else this._objectAttributes[t.attributes[n].name] ? r[t.attributes[n].name] = this._getClassAttribute(t.attributes[n].value) : \"true\" == t.attributes[n].value || \"false\" == t.attributes[n].value ? r[t.attributes[n].name] = \"true\" == t.attributes[n].value : r[t.attributes[n].name] = isNaN(Number(t.attributes[n].value)) ? t.attributes[n].value : Number(t.attributes[n].value);\n          }\n\n          if (!t.attributes.getNamedItem(\"id\")) return this._nodes[t.nodeName + Object.keys(this._nodes).length + \"_gen\"] = r, r;\n          var a = t.attributes.getNamedItem(\"id\").value;\n          if (a.startsWith(\"{{\") && a.endsWith(\"}}\") && (a = this._getChainElement(a.substring(2, a.length - 2))), this._nodes[a]) throw \"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute\";\n          return this._nodes[a] = r, r;\n        } catch (e) {\n          throw \"XmlLoader Exception : Error parsing Control \" + t.nodeName + \",\" + e + \".\";\n        }\n      }, t.prototype._parseGrid = function (t, e, i) {\n        for (var r, n, o, s, a, h = t.children, l = !1, u = -1, c = -1, _ = 0, d = 0; d < h.length; d++) {\n          if (h[d].nodeType == this._nodeTypes.element) {\n            if (\"Row\" != h[d].nodeName) throw \"XmlLoader Exception : Expecting Row node, received \" + h[d].nodeName;\n            if (u += 1, o = h[d].children, !h[d].attributes.getNamedItem(\"height\")) throw \"XmlLoader Exception : Height must be defined for grid rows\";\n            n = Number(h[d].attributes.getNamedItem(\"height\").nodeValue), l = !!h[d].attributes.getNamedItem(\"isPixel\") && JSON.parse(h[d].attributes.getNamedItem(\"isPixel\").nodeValue), e.addRowDefinition(n, l);\n\n            for (var p = 0; p < o.length; p++) {\n              if (o[p].nodeType == this._nodeTypes.element) {\n                if (\"Column\" != o[p].nodeName) throw \"XmlLoader Exception : Expecting Column node, received \" + o[p].nodeName;\n                if (c += 1, u > 0 && c > _) throw \"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.\";\n\n                if (0 == u) {\n                  if (!o[p].attributes.getNamedItem(\"width\")) throw \"XmlLoader Exception : Width must be defined for all the grid columns in the first row\";\n                  r = Number(o[p].attributes.getNamedItem(\"width\").nodeValue), l = !!o[p].attributes.getNamedItem(\"isPixel\") && JSON.parse(o[p].attributes.getNamedItem(\"isPixel\").nodeValue), e.addColumnDefinition(r, l);\n                }\n\n                s = o[p].children;\n\n                for (var f = 0; f < s.length; f++) {\n                  s[f].nodeType == this._nodeTypes.element && (a = this._createGuiElement(s[f], e, !1), e.addControl(a, u, c), s[f].firstChild && this._parseXml(s[f].firstChild, a));\n                }\n              }\n            }\n\n            0 == u && (_ = c), c = -1;\n          }\n        }\n\n        t.nextSibling && this._parseXml(t.nextSibling, i);\n      }, t.prototype._parseElement = function (t, e, i) {\n        t.firstChild && this._parseXml(t.firstChild, e), t.nextSibling && this._parseXml(t.nextSibling, i);\n      }, t.prototype._prepareSourceElement = function (t, e, i, r, n) {\n        this._parentClass ? this._parentClass[i] = r[n] : window[i] = r[n], t.firstChild && this._parseXml(t.firstChild, e, !0);\n      }, t.prototype._parseElementsFromSource = function (t, e, i) {\n        var r = t.attributes.getNamedItem(\"dataSource\").value;\n        if (!r.includes(\" in \")) throw \"XmlLoader Exception : Malformed XML, Data Source must include an in\";\n        var n = !0,\n            o = r.split(\" in \");\n        if (o.length < 2) throw \"XmlLoader Exception : Malformed XML, Data Source must an iterator and a source\";\n        var s = o[1];\n        if (s.startsWith(\"{\") && s.endsWith(\"}\") && (n = !1), (!n || s.startsWith(\"[\") && s.endsWith(\"]\")) && (s = s.substring(1, s.length - 1)), s = this._parentClass ? this._parentClass[s] : window[s], n) for (var a = 0; a < s.length; a++) {\n          this._prepareSourceElement(t, e, o[0], s, a);\n        } else for (var a in s) {\n          this._prepareSourceElement(t, e, o[0], s, a);\n        }\n        t.nextSibling && this._parseXml(t.nextSibling, i);\n      }, t.prototype._parseXml = function (t, e, i) {\n        if (void 0 === i && (i = !1), t.nodeType == this._nodeTypes.element) {\n          i && t.setAttribute(\"id\", e.id + (e._children.length + 1));\n\n          var r = this._createGuiElement(t, e);\n\n          \"Grid\" == t.nodeName ? this._parseGrid(t, r, e) : t.attributes.getNamedItem(\"dataSource\") ? this._parseElementsFromSource(t, r, e) : this._parseElement(t, r, e);\n        } else t.nextSibling && this._parseXml(t.nextSibling, e, i);\n      }, t.prototype.isLoaded = function () {\n        return this._isLoaded;\n      }, t.prototype.getNodeById = function (t) {\n        return this._nodes[t];\n      }, t.prototype.getNodes = function () {\n        return this._nodes;\n      }, t.prototype.loadLayout = function (t, e, i) {\n        var r = new XMLHttpRequest();\n        r.onreadystatechange = function () {\n          if (4 == r.readyState && 200 == r.status) {\n            if (!r.responseXML) throw \"XmlLoader Exception : XML file is malformed or corrupted.\";\n            var t = r.responseXML.documentElement;\n            this._parseXml(t.firstChild, e), this._isLoaded = !0, i && i();\n          }\n        }.bind(this), r.open(\"GET\", t, !0), r.send();\n      }, t;\n    }(),\n        tt = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = 0);\n        var r = t.call(this, e.x, e.y, e.z) || this;\n        return r.buttonIndex = i, r;\n      }\n\n      return n(e, t), e;\n    }(s.Vector3),\n        et = function () {\n      function t(t) {\n        this.name = t, this._downCount = 0, this._enterCount = -1, this._downPointerIds = {}, this._isVisible = !0, this.onPointerMoveObservable = new s.Observable(), this.onPointerOutObservable = new s.Observable(), this.onPointerDownObservable = new s.Observable(), this.onPointerUpObservable = new s.Observable(), this.onPointerClickObservable = new s.Observable(), this.onPointerEnterObservable = new s.Observable(), this._behaviors = new Array();\n      }\n\n      return Object.defineProperty(t.prototype, \"position\", {\n        get: function get() {\n          return this._node ? this._node.position : s.Vector3.Zero();\n        },\n        set: function set(t) {\n          this._node && (this._node.position = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"scaling\", {\n        get: function get() {\n          return this._node ? this._node.scaling : new s.Vector3(1, 1, 1);\n        },\n        set: function set(t) {\n          this._node && (this._node.scaling = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"behaviors\", {\n        get: function get() {\n          return this._behaviors;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.addBehavior = function (t) {\n        var e = this;\n        if (-1 !== this._behaviors.indexOf(t)) return this;\n        t.init();\n        var i = this._host.scene;\n        return i.isLoading ? i.onDataLoadedObservable.addOnce(function () {\n          t.attach(e);\n        }) : t.attach(this), this._behaviors.push(t), this;\n      }, t.prototype.removeBehavior = function (t) {\n        var e = this._behaviors.indexOf(t);\n\n        return -1 === e || (this._behaviors[e].detach(), this._behaviors.splice(e, 1)), this;\n      }, t.prototype.getBehaviorByName = function (t) {\n        for (var e = 0, i = this._behaviors; e < i.length; e++) {\n          var r = i[e];\n          if (r.name === t) return r;\n        }\n\n        return null;\n      }, Object.defineProperty(t.prototype, \"isVisible\", {\n        get: function get() {\n          return this._isVisible;\n        },\n        set: function set(t) {\n          if (this._isVisible !== t) {\n            this._isVisible = t;\n            var e = this.mesh;\n            e && e.setEnabled(t);\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"typeName\", {\n        get: function get() {\n          return this._getTypeName();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.getClassName = function () {\n        return this._getTypeName();\n      }, t.prototype._getTypeName = function () {\n        return \"Control3D\";\n      }, Object.defineProperty(t.prototype, \"node\", {\n        get: function get() {\n          return this._node;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"mesh\", {\n        get: function get() {\n          return this._node instanceof s.AbstractMesh ? this._node : null;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.linkToTransformNode = function (t) {\n        return this._node && (this._node.parent = t), this;\n      }, t.prototype._prepareNode = function (t) {\n        if (!this._node) {\n          if (this._node = this._createNode(t), !this.node) return;\n          this._node.metadata = this, this._node.position = this.position, this._node.scaling = this.scaling;\n          var e = this.mesh;\n          e && (e.isPickable = !0, this._affectMaterial(e));\n        }\n      }, t.prototype._createNode = function (t) {\n        return null;\n      }, t.prototype._affectMaterial = function (t) {\n        t.material = null;\n      }, t.prototype._onPointerMove = function (t, e) {\n        this.onPointerMoveObservable.notifyObservers(e, -1, t, this);\n      }, t.prototype._onPointerEnter = function (t) {\n        return !(this._enterCount > 0) && (-1 === this._enterCount && (this._enterCount = 0), this._enterCount++, this.onPointerEnterObservable.notifyObservers(this, -1, t, this), this.pointerEnterAnimation && this.pointerEnterAnimation(), !0);\n      }, t.prototype._onPointerOut = function (t) {\n        this._enterCount = 0, this.onPointerOutObservable.notifyObservers(this, -1, t, this), this.pointerOutAnimation && this.pointerOutAnimation();\n      }, t.prototype._onPointerDown = function (t, e, i, r) {\n        return 0 !== this._downCount ? (this._downCount++, !1) : (this._downCount++, this._downPointerIds[i] = !0, this.onPointerDownObservable.notifyObservers(new tt(e, r), -1, t, this), this.pointerDownAnimation && this.pointerDownAnimation(), !0);\n      }, t.prototype._onPointerUp = function (t, e, i, r, n) {\n        this._downCount--, delete this._downPointerIds[i], this._downCount < 0 ? this._downCount = 0 : 0 == this._downCount && (n && (this._enterCount > 0 || -1 === this._enterCount) && this.onPointerClickObservable.notifyObservers(new tt(e, r), -1, t, this), this.onPointerUpObservable.notifyObservers(new tt(e, r), -1, t, this), this.pointerUpAnimation && this.pointerUpAnimation());\n      }, t.prototype.forcePointerUp = function (t) {\n        if (void 0 === t && (t = null), null !== t) this._onPointerUp(this, s.Vector3.Zero(), t, 0, !0);else {\n          for (var e in this._downPointerIds) {\n            this._onPointerUp(this, s.Vector3.Zero(), +e, 0, !0);\n          }\n\n          this._downCount > 0 && (this._downCount = 1, this._onPointerUp(this, s.Vector3.Zero(), 0, 0, !0));\n        }\n      }, t.prototype._processObservables = function (t, e, i, r) {\n        if (t === s.PointerEventTypes.POINTERMOVE) {\n          this._onPointerMove(this, e);\n\n          var n = this._host._lastControlOver[i];\n          return n && n !== this && n._onPointerOut(this), n !== this && this._onPointerEnter(this), this._host._lastControlOver[i] = this, !0;\n        }\n\n        return t === s.PointerEventTypes.POINTERDOWN ? (this._onPointerDown(this, e, i, r), this._host._lastControlDown[i] = this, this._host._lastPickedControl = this, !0) : (t === s.PointerEventTypes.POINTERUP || t === s.PointerEventTypes.POINTERDOUBLETAP) && (this._host._lastControlDown[i] && this._host._lastControlDown[i]._onPointerUp(this, e, i, r, !0), delete this._host._lastControlDown[i], !0);\n      }, t.prototype._disposeNode = function () {\n        this._node && (this._node.dispose(), this._node = null);\n      }, t.prototype.dispose = function () {\n        this.onPointerDownObservable.clear(), this.onPointerEnterObservable.clear(), this.onPointerMoveObservable.clear(), this.onPointerOutObservable.clear(), this.onPointerUpObservable.clear(), this.onPointerClickObservable.clear(), this._disposeNode();\n\n        for (var t = 0, e = this._behaviors; t < e.length; t++) {\n          e[t].detach();\n        }\n      }, t;\n    }(),\n        it = function (t) {\n      function e(e) {\n        return t.call(this, e) || this;\n      }\n\n      return n(e, t), e.prototype._getTypeName = function () {\n        return \"AbstractButton3D\";\n      }, e.prototype._createNode = function (t) {\n        return new s.TransformNode(\"button\" + this.name);\n      }, e;\n    }(et),\n        rt = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i._contentResolution = 512, i._contentScaleRatio = 2, i.pointerEnterAnimation = function () {\n          i.mesh && (i._currentMaterial.emissiveColor = s.Color3.Red());\n        }, i.pointerOutAnimation = function () {\n          i._currentMaterial.emissiveColor = s.Color3.Black();\n        }, i.pointerDownAnimation = function () {\n          i.mesh && i.mesh.scaling.scaleInPlace(.95);\n        }, i.pointerUpAnimation = function () {\n          i.mesh && i.mesh.scaling.scaleInPlace(1 / .95);\n        }, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"contentResolution\", {\n        get: function get() {\n          return this._contentResolution;\n        },\n        set: function set(t) {\n          this._contentResolution !== t && (this._contentResolution = t, this._resetContent());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"contentScaleRatio\", {\n        get: function get() {\n          return this._contentScaleRatio;\n        },\n        set: function set(t) {\n          this._contentScaleRatio !== t && (this._contentScaleRatio = t, this._resetContent());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._disposeFacadeTexture = function () {\n        this._facadeTexture && (this._facadeTexture.dispose(), this._facadeTexture = null);\n      }, e.prototype._resetContent = function () {\n        this._disposeFacadeTexture(), this.content = this._content;\n      }, Object.defineProperty(e.prototype, \"content\", {\n        get: function get() {\n          return this._content;\n        },\n        set: function set(t) {\n          this._content = t, this._host && this._host.utilityLayer && (this._facadeTexture ? this._facadeTexture.rootContainer.clearControls() : (this._facadeTexture = new J(\"Facade\", this._contentResolution, this._contentResolution, this._host.utilityLayer.utilityLayerScene, !0, s.Texture.TRILINEAR_SAMPLINGMODE), this._facadeTexture.rootContainer.scaleX = this._contentScaleRatio, this._facadeTexture.rootContainer.scaleY = this._contentScaleRatio, this._facadeTexture.premulAlpha = !0), this._facadeTexture.addControl(t), this._applyFacade(this._facadeTexture));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._applyFacade = function (t) {\n        this._currentMaterial.emissiveTexture = t;\n      }, e.prototype._getTypeName = function () {\n        return \"Button3D\";\n      }, e.prototype._createNode = function (t) {\n        for (var e = new Array(6), i = 0; i < 6; i++) {\n          e[i] = new s.Vector4(0, 0, 0, 0);\n        }\n\n        return e[1] = new s.Vector4(0, 0, 1, 1), s.BoxBuilder.CreateBox(this.name + \"_rootMesh\", {\n          width: 1,\n          height: 1,\n          depth: .08,\n          faceUV: e\n        }, t);\n      }, e.prototype._affectMaterial = function (t) {\n        var e = new s.StandardMaterial(this.name + \"Material\", t.getScene());\n        e.specularColor = s.Color3.Black(), t.material = e, this._currentMaterial = e, this._resetContent();\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this._disposeFacadeTexture(), this._currentMaterial && this._currentMaterial.dispose();\n      }, e;\n    }(it),\n        nt = function (t) {\n      function e(e) {\n        var i = t.call(this, e) || this;\n        return i._blockLayout = !1, i._children = new Array(), i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"children\", {\n        get: function get() {\n          return this._children;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"blockLayout\", {\n        get: function get() {\n          return this._blockLayout;\n        },\n        set: function set(t) {\n          this._blockLayout !== t && (this._blockLayout = t, this._blockLayout || this._arrangeChildren());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype.updateLayout = function () {\n        return this._arrangeChildren(), this;\n      }, e.prototype.containsControl = function (t) {\n        return -1 !== this._children.indexOf(t);\n      }, e.prototype.addControl = function (t) {\n        return -1 !== this._children.indexOf(t) || (t.parent = this, t._host = this._host, this._children.push(t), this._host.utilityLayer && (t._prepareNode(this._host.utilityLayer.utilityLayerScene), t.node && (t.node.parent = this.node), this.blockLayout || this._arrangeChildren())), this;\n      }, e.prototype._arrangeChildren = function () {}, e.prototype._createNode = function (t) {\n        return new s.TransformNode(\"ContainerNode\", t);\n      }, e.prototype.removeControl = function (t) {\n        var e = this._children.indexOf(t);\n\n        return -1 !== e && (this._children.splice(e, 1), t.parent = null, t._disposeNode()), this;\n      }, e.prototype._getTypeName = function () {\n        return \"Container3D\";\n      }, e.prototype.dispose = function () {\n        for (var e = 0, i = this._children; e < i.length; e++) {\n          i[e].dispose();\n        }\n\n        this._children = [], t.prototype.dispose.call(this);\n      }, e.UNSET_ORIENTATION = 0, e.FACEORIGIN_ORIENTATION = 1, e.FACEORIGINREVERSED_ORIENTATION = 2, e.FACEFORWARD_ORIENTATION = 3, e.FACEFORWARDREVERSED_ORIENTATION = 4, e;\n    }(et),\n        ot = function (t) {\n      function e() {\n        var e = t.call(this) || this;\n        return e._columns = 10, e._rows = 0, e._rowThenColum = !0, e._orientation = nt.FACEORIGIN_ORIENTATION, e.margin = 0, e;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"orientation\", {\n        get: function get() {\n          return this._orientation;\n        },\n        set: function set(t) {\n          var e = this;\n          this._orientation !== t && (this._orientation = t, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"columns\", {\n        get: function get() {\n          return this._columns;\n        },\n        set: function set(t) {\n          var e = this;\n          this._columns !== t && (this._columns = t, this._rowThenColum = !0, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"rows\", {\n        get: function get() {\n          return this._rows;\n        },\n        set: function set(t) {\n          var e = this;\n          this._rows !== t && (this._rows = t, this._rowThenColum = !1, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._arrangeChildren = function () {\n        this._cellWidth = 0, this._cellHeight = 0;\n\n        for (var t = 0, e = 0, i = 0, r = s.Matrix.Invert(this.node.computeWorldMatrix(!0)), n = 0, o = this._children; n < o.length; n++) {\n          if ((b = o[n]).mesh) {\n            i++, b.mesh.computeWorldMatrix(!0);\n            var a = b.mesh.getHierarchyBoundingVectors(),\n                h = s.TmpVectors.Vector3[0],\n                l = s.TmpVectors.Vector3[1];\n            a.max.subtractToRef(a.min, l), l.scaleInPlace(.5), s.Vector3.TransformNormalToRef(l, r, h), this._cellWidth = Math.max(this._cellWidth, 2 * h.x), this._cellHeight = Math.max(this._cellHeight, 2 * h.y);\n          }\n        }\n\n        this._cellWidth += 2 * this.margin, this._cellHeight += 2 * this.margin, this._rowThenColum ? (e = this._columns, t = Math.ceil(i / this._columns)) : (t = this._rows, e = Math.ceil(i / this._rows));\n        var u = .5 * e * this._cellWidth,\n            c = .5 * t * this._cellHeight,\n            _ = [],\n            d = 0;\n        if (this._rowThenColum) for (var p = 0; p < t; p++) {\n          for (var f = 0; f < e && (_.push(new s.Vector3(f * this._cellWidth - u + this._cellWidth / 2, p * this._cellHeight - c + this._cellHeight / 2, 0)), !(++d > i)); f++) {\n            ;\n          }\n        } else for (f = 0; f < e; f++) {\n          for (p = 0; p < t && (_.push(new s.Vector3(f * this._cellWidth - u + this._cellWidth / 2, p * this._cellHeight - c + this._cellHeight / 2, 0)), !(++d > i)); p++) {\n            ;\n          }\n        }\n        d = 0;\n\n        for (var g = 0, m = this._children; g < m.length; g++) {\n          var b;\n          (b = m[g]).mesh && (this._mapGridNode(b, _[d]), d++);\n        }\n\n        this._finalProcessing();\n      }, e.prototype._finalProcessing = function () {}, e;\n    }(nt),\n        st = function (t) {\n      function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e._radius = 5, e;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"radius\", {\n        get: function get() {\n          return this._radius;\n        },\n        set: function set(t) {\n          var e = this;\n          this._radius !== t && (this._radius = t, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._mapGridNode = function (t, e) {\n        var i = t.mesh;\n\n        if (i) {\n          var r = this._cylindricalMapping(e);\n\n          switch (t.position = r, this.orientation) {\n            case nt.FACEORIGIN_ORIENTATION:\n              i.lookAt(new s.Vector3(2 * r.x, r.y, 2 * r.z));\n              break;\n\n            case nt.FACEORIGINREVERSED_ORIENTATION:\n              i.lookAt(new s.Vector3(-r.x, r.y, -r.z));\n              break;\n\n            case nt.FACEFORWARD_ORIENTATION:\n              break;\n\n            case nt.FACEFORWARDREVERSED_ORIENTATION:\n              i.rotate(s.Axis.Y, Math.PI, s.Space.LOCAL);\n          }\n        }\n      }, e.prototype._cylindricalMapping = function (t) {\n        var e = new s.Vector3(0, t.y, this._radius),\n            i = t.x / this._radius;\n        return s.Matrix.RotationYawPitchRollToRef(i, 0, 0, s.TmpVectors.Matrix[0]), s.Vector3.TransformNormal(e, s.TmpVectors.Matrix[0]);\n      }, e;\n    }(ot),\n        at = \"precision highp float;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec2 uv;\\n\\nuniform mat4 world;\\nuniform mat4 viewProjection;\\nvarying vec2 vUV;\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float borderWidth;\\nuniform vec3 scaleFactor;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\n#endif\\nvoid main(void) {\\nvUV=uv;\\n#ifdef BORDER\\nvec3 scale=scaleFactor;\\nfloat minScale=min(min(scale.x,scale.y),scale.z);\\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\\nfloat areaYZ=scale.y*scale.z;\\nfloat areaXZ=scale.x*scale.z;\\nfloat areaXY=scale.x*scale.y;\\nfloat scaledBorderWidth=borderWidth;\\nif (abs(normal.x) == 1.0)\\n{\\nscale.x=scale.y;\\nscale.y=scale.z;\\nif (areaYZ>areaXZ && areaYZ>areaXY)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse if (abs(normal.y) == 1.0)\\n{\\nscale.x=scale.z;\\nif (areaXZ>areaXY && areaXZ>areaYZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse\\n{\\nif (areaXY>areaYZ && areaXY>areaXZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\\nif (scale.x>scale.y)\\n{\\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\\nscaleInfo.y=1.0-scaledBorderWidth;\\n}\\nelse\\n{\\nscaleInfo.x=1.0-scaledBorderWidth;\\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\\n}\\n#endif\\nvec4 worldPos=world*vec4(position,1.0);\\n#ifdef HOVERLIGHT\\nworldPosition=worldPos.xyz;\\n#endif\\ngl_Position=viewProjection*worldPos;\\n}\\n\";\n\n    s.Effect.ShadersStore.fluentVertexShader = at;\n    var ht = \"precision highp float;\\nvarying vec2 vUV;\\nuniform vec4 albedoColor;\\n#ifdef INNERGLOW\\nuniform vec4 innerGlowColor;\\n#endif\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float edgeSmoothingValue;\\nuniform float borderMinValue;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\nuniform vec3 hoverPosition;\\nuniform vec4 hoverColor;\\nuniform float hoverRadius;\\n#endif\\n#ifdef TEXTURE\\nuniform sampler2D albedoSampler;\\n#endif\\nvoid main(void) {\\nvec3 albedo=albedoColor.rgb;\\nfloat alpha=albedoColor.a;\\n#ifdef TEXTURE\\nalbedo=texture2D(albedoSampler,vUV).rgb;\\n#endif\\n#ifdef HOVERLIGHT\\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\\n#else\\nfloat pointToHover=1.0;\\n#endif\\n#ifdef BORDER\\nfloat borderPower=10.0;\\nfloat inverseBorderPower=1.0/borderPower;\\nvec3 borderColor=albedo*borderPower;\\nvec2 distanceToEdge;\\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover);\\nalbedo+=borderColor;\\nalpha=max(alpha,borderValue);\\n#endif\\n#ifdef INNERGLOW\\n\\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\\nuvGlow=uvGlow*uvGlow;\\nuvGlow=uvGlow*uvGlow;\\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y);\\n#endif\\ngl_FragColor=vec4(albedo,alpha);\\n}\";\n    s.Effect.ShadersStore.fluentPixelShader = ht;\n\n    var lt = function (t) {\n      function e() {\n        var e = t.call(this) || this;\n        return e.INNERGLOW = !1, e.BORDER = !1, e.HOVERLIGHT = !1, e.TEXTURE = !1, e.rebuild(), e;\n      }\n\n      return n(e, t), e;\n    }(s.MaterialDefines),\n        ut = function (t) {\n      function e(e, i) {\n        var r = t.call(this, e, i) || this;\n        return r.innerGlowColorIntensity = .5, r.innerGlowColor = new s.Color3(1, 1, 1), r.albedoColor = new s.Color3(.3, .35, .4), r.renderBorders = !1, r.borderWidth = .5, r.edgeSmoothingValue = .02, r.borderMinValue = .1, r.renderHoverLight = !1, r.hoverRadius = 1, r.hoverColor = new s.Color4(.3, .3, .3, 1), r.hoverPosition = s.Vector3.Zero(), r;\n      }\n\n      return n(e, t), e.prototype.needAlphaBlending = function () {\n        return 1 !== this.alpha;\n      }, e.prototype.needAlphaTesting = function () {\n        return !1;\n      }, e.prototype.getAlphaTestTexture = function () {\n        return null;\n      }, e.prototype.isReadyForSubMesh = function (t, e, i) {\n        if (this.isFrozen && e.effect && e.effect._wasPreviouslyReady) return !0;\n        e._materialDefines || (e._materialDefines = new lt());\n        var r = this.getScene(),\n            n = e._materialDefines;\n        if (!this.checkReadyOnEveryCall && e.effect && n._renderId === r.getRenderId()) return !0;\n        if (n._areTexturesDirty) if (n.INNERGLOW = this.innerGlowColorIntensity > 0, n.BORDER = this.renderBorders, n.HOVERLIGHT = this.renderHoverLight, this._albedoTexture) {\n          if (!this._albedoTexture.isReadyOrNotBlocking()) return !1;\n          n.TEXTURE = !0;\n        } else n.TEXTURE = !1;\n        var o = r.getEngine();\n\n        if (n.isDirty) {\n          n.markAsProcessed(), r.resetCachedMaterial();\n          var a = [s.VertexBuffer.PositionKind];\n          a.push(s.VertexBuffer.NormalKind), a.push(s.VertexBuffer.UVKind);\n          var h = [\"world\", \"viewProjection\", \"innerGlowColor\", \"albedoColor\", \"borderWidth\", \"edgeSmoothingValue\", \"scaleFactor\", \"borderMinValue\", \"hoverColor\", \"hoverPosition\", \"hoverRadius\"],\n              l = [\"albedoSampler\"],\n              u = new Array();\n          s.MaterialHelper.PrepareUniformsAndSamplersList({\n            uniformsNames: h,\n            uniformBuffersNames: u,\n            samplers: l,\n            defines: n,\n            maxSimultaneousLights: 4\n          });\n          var c = n.toString();\n          e.setEffect(r.getEngine().createEffect(\"fluent\", {\n            attributes: a,\n            uniformsNames: h,\n            uniformBuffersNames: u,\n            samplers: l,\n            defines: c,\n            fallbacks: null,\n            onCompiled: this.onCompiled,\n            onError: this.onError,\n            indexParameters: {\n              maxSimultaneousLights: 4\n            }\n          }, o));\n        }\n\n        return !(!e.effect || !e.effect.isReady()) && (n._renderId = r.getRenderId(), e.effect._wasPreviouslyReady = !0, !0);\n      }, e.prototype.bindForSubMesh = function (t, e, i) {\n        var r = this.getScene(),\n            n = i._materialDefines;\n\n        if (n) {\n          var o = i.effect;\n          o && (this._activeEffect = o, this.bindOnlyWorldMatrix(t), this._activeEffect.setMatrix(\"viewProjection\", r.getTransformMatrix()), this._mustRebind(r, o) && (this._activeEffect.setColor4(\"albedoColor\", this.albedoColor, this.alpha), n.INNERGLOW && this._activeEffect.setColor4(\"innerGlowColor\", this.innerGlowColor, this.innerGlowColorIntensity), n.BORDER && (this._activeEffect.setFloat(\"borderWidth\", this.borderWidth), this._activeEffect.setFloat(\"edgeSmoothingValue\", this.edgeSmoothingValue), this._activeEffect.setFloat(\"borderMinValue\", this.borderMinValue), e.getBoundingInfo().boundingBox.extendSize.multiplyToRef(e.scaling, s.TmpVectors.Vector3[0]), this._activeEffect.setVector3(\"scaleFactor\", s.TmpVectors.Vector3[0])), n.HOVERLIGHT && (this._activeEffect.setDirectColor4(\"hoverColor\", this.hoverColor), this._activeEffect.setFloat(\"hoverRadius\", this.hoverRadius), this._activeEffect.setVector3(\"hoverPosition\", this.hoverPosition)), n.TEXTURE && this._activeEffect.setTexture(\"albedoSampler\", this._albedoTexture)), this._afterBind(e, this._activeEffect));\n        }\n      }, e.prototype.getActiveTextures = function () {\n        return t.prototype.getActiveTextures.call(this);\n      }, e.prototype.hasTexture = function (e) {\n        return !!t.prototype.hasTexture.call(this, e);\n      }, e.prototype.dispose = function (e) {\n        t.prototype.dispose.call(this, e);\n      }, e.prototype.clone = function (t) {\n        var i = this;\n        return s.SerializationHelper.Clone(function () {\n          return new e(t, i.getScene());\n        }, this);\n      }, e.prototype.serialize = function () {\n        var t = s.SerializationHelper.Serialize(this);\n        return t.customType = \"BABYLON.GUI.FluentMaterial\", t;\n      }, e.prototype.getClassName = function () {\n        return \"FluentMaterial\";\n      }, e.Parse = function (t, i, r) {\n        return s.SerializationHelper.Parse(function () {\n          return new e(t.name, i);\n        }, t, i, r);\n      }, o([Object(s.serialize)(), Object(s.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")], e.prototype, \"innerGlowColorIntensity\", void 0), o([Object(s.serializeAsColor3)()], e.prototype, \"innerGlowColor\", void 0), o([Object(s.serializeAsColor3)()], e.prototype, \"albedoColor\", void 0), o([Object(s.serialize)(), Object(s.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")], e.prototype, \"renderBorders\", void 0), o([Object(s.serialize)()], e.prototype, \"borderWidth\", void 0), o([Object(s.serialize)()], e.prototype, \"edgeSmoothingValue\", void 0), o([Object(s.serialize)()], e.prototype, \"borderMinValue\", void 0), o([Object(s.serialize)(), Object(s.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")], e.prototype, \"renderHoverLight\", void 0), o([Object(s.serialize)()], e.prototype, \"hoverRadius\", void 0), o([Object(s.serializeAsColor4)()], e.prototype, \"hoverColor\", void 0), o([Object(s.serializeAsVector3)()], e.prototype, \"hoverPosition\", void 0), o([Object(s.serializeAsTexture)(\"albedoTexture\")], e.prototype, \"_albedoTexture\", void 0), o([Object(s.expandToProperty)(\"_markAllSubMeshesAsTexturesAndMiscDirty\")], e.prototype, \"albedoTexture\", void 0), e;\n    }(s.PushMaterial);\n\n    s._TypeStore.RegisteredTypes[\"BABYLON.GUI.FluentMaterial\"] = ut;\n\n    var ct = function (t) {\n      function e(e, i) {\n        void 0 === i && (i = !0);\n        var r = t.call(this, e) || this;\n        return r._shareMaterials = !0, r._shareMaterials = i, r.pointerEnterAnimation = function () {\n          r.mesh && r._frontPlate.setEnabled(!0);\n        }, r.pointerOutAnimation = function () {\n          r.mesh && r._frontPlate.setEnabled(!1);\n        }, r;\n      }\n\n      return n(e, t), e.prototype._disposeTooltip = function () {\n        this._tooltipFade = null, this._tooltipTextBlock && this._tooltipTextBlock.dispose(), this._tooltipTexture && this._tooltipTexture.dispose(), this._tooltipMesh && this._tooltipMesh.dispose(), this.onPointerEnterObservable.remove(this._tooltipHoverObserver), this.onPointerOutObservable.remove(this._tooltipOutObserver);\n      }, Object.defineProperty(e.prototype, \"renderingGroupId\", {\n        get: function get() {\n          return this._backPlate.renderingGroupId;\n        },\n        set: function set(t) {\n          this._backPlate.renderingGroupId = t, this._textPlate.renderingGroupId = t, this._frontPlate.renderingGroupId = t, this._tooltipMesh && (this._tooltipMesh.renderingGroupId = t);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"tooltipText\", {\n        get: function get() {\n          return this._tooltipTextBlock ? this._tooltipTextBlock.text : null;\n        },\n        set: function set(t) {\n          var e = this;\n\n          if (t) {\n            if (!this._tooltipFade) {\n              this._tooltipMesh = s.PlaneBuilder.CreatePlane(\"\", {\n                size: 1\n              }, this._backPlate._scene);\n              var i = s.PlaneBuilder.CreatePlane(\"\", {\n                size: 1,\n                sideOrientation: s.Mesh.DOUBLESIDE\n              }, this._backPlate._scene),\n                  r = new s.StandardMaterial(\"\", this._backPlate._scene);\n              r.diffuseColor = s.Color3.FromHexString(\"#212121\"), i.material = r, i.isPickable = !1, this._tooltipMesh.addChild(i), i.position.z = .05, this._tooltipMesh.scaling.y = 1 / 3, this._tooltipMesh.position.y = .7, this._tooltipMesh.position.z = -.15, this._tooltipMesh.isPickable = !1, this._tooltipMesh.parent = this._backPlate, this._tooltipTexture = J.CreateForMesh(this._tooltipMesh), this._tooltipTextBlock = new y(), this._tooltipTextBlock.scaleY = 3, this._tooltipTextBlock.color = \"white\", this._tooltipTextBlock.fontSize = 130, this._tooltipTexture.addControl(this._tooltipTextBlock), this._tooltipFade = new s.FadeInOutBehavior(), this._tooltipFade.delay = 500, this._tooltipMesh.addBehavior(this._tooltipFade), this._tooltipHoverObserver = this.onPointerEnterObservable.add(function () {\n                e._tooltipFade && e._tooltipFade.fadeIn(!0);\n              }), this._tooltipOutObserver = this.onPointerOutObservable.add(function () {\n                e._tooltipFade && e._tooltipFade.fadeIn(!1);\n              });\n            }\n\n            this._tooltipTextBlock && (this._tooltipTextBlock.text = t);\n          } else this._disposeTooltip();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"text\", {\n        get: function get() {\n          return this._text;\n        },\n        set: function set(t) {\n          this._text !== t && (this._text = t, this._rebuildContent());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"imageUrl\", {\n        get: function get() {\n          return this._imageUrl;\n        },\n        set: function set(t) {\n          this._imageUrl !== t && (this._imageUrl = t, this._rebuildContent());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"backMaterial\", {\n        get: function get() {\n          return this._backMaterial;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"frontMaterial\", {\n        get: function get() {\n          return this._frontMaterial;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"plateMaterial\", {\n        get: function get() {\n          return this._plateMaterial;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(e.prototype, \"shareMaterials\", {\n        get: function get() {\n          return this._shareMaterials;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._getTypeName = function () {\n        return \"HolographicButton\";\n      }, e.prototype._rebuildContent = function () {\n        this._disposeFacadeTexture();\n\n        var t = new C();\n\n        if (t.isVertical = !0, this._imageUrl) {\n          var e = new v();\n          e.source = this._imageUrl, e.paddingTop = \"40px\", e.height = \"180px\", e.width = \"100px\", e.paddingBottom = \"40px\", t.addControl(e);\n        }\n\n        if (this._text) {\n          var i = new y();\n          i.text = this._text, i.color = \"white\", i.height = \"30px\", i.fontSize = 24, t.addControl(i);\n        }\n\n        this._frontPlate && (this.content = t);\n      }, e.prototype._createNode = function (e) {\n        return this._backPlate = s.BoxBuilder.CreateBox(this.name + \"BackMesh\", {\n          width: 1,\n          height: 1,\n          depth: .08\n        }, e), this._frontPlate = s.BoxBuilder.CreateBox(this.name + \"FrontMesh\", {\n          width: 1,\n          height: 1,\n          depth: .08\n        }, e), this._frontPlate.parent = this._backPlate, this._frontPlate.position.z = -.08, this._frontPlate.isPickable = !1, this._frontPlate.setEnabled(!1), this._textPlate = t.prototype._createNode.call(this, e), this._textPlate.parent = this._backPlate, this._textPlate.position.z = -.08, this._textPlate.isPickable = !1, this._backPlate;\n      }, e.prototype._applyFacade = function (t) {\n        this._plateMaterial.emissiveTexture = t, this._plateMaterial.opacityTexture = t;\n      }, e.prototype._createBackMaterial = function (t) {\n        var e = this;\n        this._backMaterial = new ut(this.name + \"Back Material\", t.getScene()), this._backMaterial.renderHoverLight = !0, this._pickedPointObserver = this._host.onPickedPointChangedObservable.add(function (t) {\n          t ? (e._backMaterial.hoverPosition = t, e._backMaterial.hoverColor.a = 1) : e._backMaterial.hoverColor.a = 0;\n        });\n      }, e.prototype._createFrontMaterial = function (t) {\n        this._frontMaterial = new ut(this.name + \"Front Material\", t.getScene()), this._frontMaterial.innerGlowColorIntensity = 0, this._frontMaterial.alpha = .5, this._frontMaterial.renderBorders = !0;\n      }, e.prototype._createPlateMaterial = function (t) {\n        this._plateMaterial = new s.StandardMaterial(this.name + \"Plate Material\", t.getScene()), this._plateMaterial.specularColor = s.Color3.Black();\n      }, e.prototype._affectMaterial = function (t) {\n        this._shareMaterials ? (this._host._sharedMaterials.backFluentMaterial ? this._backMaterial = this._host._sharedMaterials.backFluentMaterial : (this._createBackMaterial(t), this._host._sharedMaterials.backFluentMaterial = this._backMaterial), this._host._sharedMaterials.frontFluentMaterial ? this._frontMaterial = this._host._sharedMaterials.frontFluentMaterial : (this._createFrontMaterial(t), this._host._sharedMaterials.frontFluentMaterial = this._frontMaterial)) : (this._createBackMaterial(t), this._createFrontMaterial(t)), this._createPlateMaterial(t), this._backPlate.material = this._backMaterial, this._frontPlate.material = this._frontMaterial, this._textPlate.material = this._plateMaterial, this._rebuildContent();\n      }, e.prototype.dispose = function () {\n        t.prototype.dispose.call(this), this._disposeTooltip(), this.shareMaterials || (this._backMaterial.dispose(), this._frontMaterial.dispose(), this._plateMaterial.dispose(), this._pickedPointObserver && (this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver), this._pickedPointObserver = null));\n      }, e;\n    }(rt),\n        _t = function (t) {\n      function e(e, i) {\n        var r = t.call(this, i) || this;\n        return r._currentMesh = e, r.pointerEnterAnimation = function () {\n          r.mesh && r.mesh.scaling.scaleInPlace(1.1);\n        }, r.pointerOutAnimation = function () {\n          r.mesh && r.mesh.scaling.scaleInPlace(1 / 1.1);\n        }, r.pointerDownAnimation = function () {\n          r.mesh && r.mesh.scaling.scaleInPlace(.95);\n        }, r.pointerUpAnimation = function () {\n          r.mesh && r.mesh.scaling.scaleInPlace(1 / .95);\n        }, r;\n      }\n\n      return n(e, t), e.prototype._getTypeName = function () {\n        return \"MeshButton3D\";\n      }, e.prototype._createNode = function (t) {\n        var e = this;\n        return this._currentMesh.getChildMeshes().forEach(function (t) {\n          t.metadata = e;\n        }), this._currentMesh;\n      }, e.prototype._affectMaterial = function (t) {}, e;\n    }(rt),\n        dt = function (t) {\n      function e() {\n        return null !== t && t.apply(this, arguments) || this;\n      }\n\n      return n(e, t), e.prototype._mapGridNode = function (t, e) {\n        var i = t.mesh;\n\n        if (i) {\n          t.position = e.clone();\n          var r = s.TmpVectors.Vector3[0];\n\n          switch (r.copyFrom(e), this.orientation) {\n            case nt.FACEORIGIN_ORIENTATION:\n            case nt.FACEFORWARD_ORIENTATION:\n              r.addInPlace(new s.Vector3(0, 0, 1)), i.lookAt(r);\n              break;\n\n            case nt.FACEFORWARDREVERSED_ORIENTATION:\n            case nt.FACEORIGINREVERSED_ORIENTATION:\n              r.addInPlace(new s.Vector3(0, 0, -1)), i.lookAt(r);\n          }\n        }\n      }, e;\n    }(ot),\n        pt = function (t) {\n      function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e._iteration = 100, e;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"iteration\", {\n        get: function get() {\n          return this._iteration;\n        },\n        set: function set(t) {\n          var e = this;\n          this._iteration !== t && (this._iteration = t, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._mapGridNode = function (t, e) {\n        var i = t.mesh,\n            r = this._scatterMapping(e);\n\n        if (i) {\n          switch (this.orientation) {\n            case nt.FACEORIGIN_ORIENTATION:\n            case nt.FACEFORWARD_ORIENTATION:\n              i.lookAt(new s.Vector3(0, 0, 1));\n              break;\n\n            case nt.FACEFORWARDREVERSED_ORIENTATION:\n            case nt.FACEORIGINREVERSED_ORIENTATION:\n              i.lookAt(new s.Vector3(0, 0, -1));\n          }\n\n          t.position = r;\n        }\n      }, e.prototype._scatterMapping = function (t) {\n        return t.x = (1 - 2 * Math.random()) * this._cellWidth, t.y = (1 - 2 * Math.random()) * this._cellHeight, t;\n      }, e.prototype._finalProcessing = function () {\n        for (var t = [], e = 0, i = this._children; e < i.length; e++) {\n          var r = i[e];\n          r.mesh && t.push(r.mesh);\n        }\n\n        for (var n = 0; n < this._iteration; n++) {\n          t.sort(function (t, e) {\n            var i = t.position.lengthSquared(),\n                r = e.position.lengthSquared();\n            return i < r ? 1 : i > r ? -1 : 0;\n          });\n\n          for (var o = Math.pow(this.margin, 2), a = Math.max(this._cellWidth, this._cellHeight), h = s.TmpVectors.Vector2[0], l = s.TmpVectors.Vector3[0], u = 0; u < t.length - 1; u++) {\n            for (var c = u + 1; c < t.length; c++) {\n              if (u != c) {\n                t[c].position.subtractToRef(t[u].position, l), h.x = l.x, h.y = l.y;\n                var _ = a,\n                    d = h.lengthSquared() - o;\n                (d -= Math.min(d, o)) < Math.pow(_, 2) && (h.normalize(), l.scaleInPlace(.5 * (_ - Math.sqrt(d))), t[c].position.addInPlace(l), t[u].position.subtractInPlace(l));\n              }\n            }\n          }\n        }\n      }, e;\n    }(ot),\n        ft = function (t) {\n      function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e._radius = 5, e;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"radius\", {\n        get: function get() {\n          return this._radius;\n        },\n        set: function set(t) {\n          var e = this;\n          this._radius !== t && (this._radius = t, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._mapGridNode = function (t, e) {\n        var i = t.mesh;\n\n        if (i) {\n          var r = this._sphericalMapping(e);\n\n          switch (t.position = r, this.orientation) {\n            case nt.FACEORIGIN_ORIENTATION:\n              i.lookAt(new s.Vector3(2 * r.x, 2 * r.y, 2 * r.z));\n              break;\n\n            case nt.FACEORIGINREVERSED_ORIENTATION:\n              i.lookAt(new s.Vector3(-r.x, -r.y, -r.z));\n              break;\n\n            case nt.FACEFORWARD_ORIENTATION:\n              break;\n\n            case nt.FACEFORWARDREVERSED_ORIENTATION:\n              i.rotate(s.Axis.Y, Math.PI, s.Space.LOCAL);\n          }\n        }\n      }, e.prototype._sphericalMapping = function (t) {\n        var e = new s.Vector3(0, 0, this._radius),\n            i = t.y / this._radius,\n            r = -t.x / this._radius;\n        return s.Matrix.RotationYawPitchRollToRef(r, i, 0, s.TmpVectors.Matrix[0]), s.Vector3.TransformNormal(e, s.TmpVectors.Matrix[0]);\n      }, e;\n    }(ot),\n        gt = function (t) {\n      function e(e) {\n        void 0 === e && (e = !1);\n        var i = t.call(this) || this;\n        return i._isVertical = !1, i.margin = .1, i._isVertical = e, i;\n      }\n\n      return n(e, t), Object.defineProperty(e.prototype, \"isVertical\", {\n        get: function get() {\n          return this._isVertical;\n        },\n        set: function set(t) {\n          var e = this;\n          this._isVertical !== t && (this._isVertical = t, s.Tools.SetImmediate(function () {\n            e._arrangeChildren();\n          }));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), e.prototype._arrangeChildren = function () {\n        for (var t, e = 0, i = 0, r = 0, n = [], o = s.Matrix.Invert(this.node.computeWorldMatrix(!0)), a = 0, h = this._children; a < h.length; a++) {\n          if ((p = h[a]).mesh) {\n            r++, p.mesh.computeWorldMatrix(!0), p.mesh.getWorldMatrix().multiplyToRef(o, s.TmpVectors.Matrix[0]);\n            var l = p.mesh.getBoundingInfo().boundingBox,\n                u = s.Vector3.TransformNormal(l.extendSize, s.TmpVectors.Matrix[0]);\n            n.push(u), this._isVertical ? i += u.y : e += u.x;\n          }\n        }\n\n        this._isVertical ? i += (r - 1) * this.margin / 2 : e += (r - 1) * this.margin / 2, t = this._isVertical ? -i : -e;\n\n        for (var c = 0, _ = 0, d = this._children; _ < d.length; _++) {\n          var p;\n\n          if ((p = d[_]).mesh) {\n            r--;\n            u = n[c++];\n            this._isVertical ? (p.position.y = t + u.y, p.position.x = 0, t += 2 * u.y) : (p.position.x = t + u.x, p.position.y = 0, t += 2 * u.x), t += r > 0 ? this.margin : 0;\n          }\n        }\n      }, e;\n    }(nt),\n        mt = function () {\n      function t(t) {\n        var e = this;\n        this._lastControlOver = {}, this._lastControlDown = {}, this.onPickedPointChangedObservable = new s.Observable(), this._sharedMaterials = {}, this._scene = t || s.EngineStore.LastCreatedScene, this._sceneDisposeObserver = this._scene.onDisposeObservable.add(function () {\n          e._sceneDisposeObserver = null, e._utilityLayer = null, e.dispose();\n        }), this._utilityLayer = new s.UtilityLayerRenderer(this._scene), this._utilityLayer.onlyCheckPointerDownEvents = !1, this._utilityLayer.pickUtilitySceneFirst = !1, this._utilityLayer.mainSceneTrackerPredicate = function (t) {\n          return t && t.metadata && t.metadata._node;\n        }, this._rootContainer = new nt(\"RootContainer\"), this._rootContainer._host = this;\n        var i = this._utilityLayer.utilityLayerScene;\n        this._pointerOutObserver = this._utilityLayer.onPointerOutObservable.add(function (t) {\n          e._handlePointerOut(t, !0);\n        }), this._pointerObserver = i.onPointerObservable.add(function (t, i) {\n          e._doPicking(t);\n        }), this._utilityLayer.utilityLayerScene.autoClear = !1, this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = !1, new s.HemisphericLight(\"hemi\", s.Vector3.Up(), this._utilityLayer.utilityLayerScene);\n      }\n\n      return Object.defineProperty(t.prototype, \"scene\", {\n        get: function get() {\n          return this._scene;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"utilityLayer\", {\n        get: function get() {\n          return this._utilityLayer;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype._handlePointerOut = function (t, e) {\n        var i = this._lastControlOver[t];\n        i && (i._onPointerOut(i), delete this._lastControlOver[t]), e && this._lastControlDown[t] && (this._lastControlDown[t].forcePointerUp(), delete this._lastControlDown[t]), this.onPickedPointChangedObservable.notifyObservers(null);\n      }, t.prototype._doPicking = function (t) {\n        if (!this._utilityLayer || !this._utilityLayer.shouldRender || !this._utilityLayer.utilityLayerScene.activeCamera) return !1;\n        var e = t.event,\n            i = e.pointerId || 0,\n            r = e.button,\n            n = t.pickInfo;\n        if (!n || !n.hit) return this._handlePointerOut(i, t.type === s.PointerEventTypes.POINTERUP), !1;\n        var o = n.pickedMesh.metadata;\n        return n.pickedPoint && this.onPickedPointChangedObservable.notifyObservers(n.pickedPoint), o._processObservables(t.type, n.pickedPoint, i, r) || t.type === s.PointerEventTypes.POINTERMOVE && (this._lastControlOver[i] && this._lastControlOver[i]._onPointerOut(this._lastControlOver[i]), delete this._lastControlOver[i]), t.type === s.PointerEventTypes.POINTERUP && (this._lastControlDown[e.pointerId] && (this._lastControlDown[e.pointerId].forcePointerUp(), delete this._lastControlDown[e.pointerId]), \"touch\" === e.pointerType && this._handlePointerOut(i, !1)), !0;\n      }, Object.defineProperty(t.prototype, \"rootContainer\", {\n        get: function get() {\n          return this._rootContainer;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.containsControl = function (t) {\n        return this._rootContainer.containsControl(t);\n      }, t.prototype.addControl = function (t) {\n        return this._rootContainer.addControl(t), this;\n      }, t.prototype.removeControl = function (t) {\n        return this._rootContainer.removeControl(t), this;\n      }, t.prototype.dispose = function () {\n        for (var t in this._rootContainer.dispose(), this._sharedMaterials) {\n          this._sharedMaterials.hasOwnProperty(t) && this._sharedMaterials[t].dispose();\n        }\n\n        this._sharedMaterials = {}, this._pointerOutObserver && this._utilityLayer && (this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver), this._pointerOutObserver = null), this.onPickedPointChangedObservable.clear();\n        var e = this._utilityLayer ? this._utilityLayer.utilityLayerScene : null;\n        e && this._pointerObserver && (e.onPointerObservable.remove(this._pointerObserver), this._pointerObserver = null), this._scene && this._sceneDisposeObserver && (this._scene.onDisposeObservable.remove(this._sceneDisposeObserver), this._sceneDisposeObserver = null), this._utilityLayer && this._utilityLayer.dispose();\n      }, t;\n    }();\n  }, function (t, e, i) {\n    \"use strict\";\n\n    i.r(e), function (t) {\n      var r = i(1);\n      i.d(e, \"Button\", function () {\n        return r.Button;\n      }), i.d(e, \"Checkbox\", function () {\n        return r.Checkbox;\n      }), i.d(e, \"ColorPicker\", function () {\n        return r.ColorPicker;\n      }), i.d(e, \"Container\", function () {\n        return r.Container;\n      }), i.d(e, \"Control\", function () {\n        return r.Control;\n      }), i.d(e, \"Ellipse\", function () {\n        return r.Ellipse;\n      }), i.d(e, \"Grid\", function () {\n        return r.Grid;\n      }), i.d(e, \"Image\", function () {\n        return r.Image;\n      }), i.d(e, \"InputText\", function () {\n        return r.InputText;\n      }), i.d(e, \"InputPassword\", function () {\n        return r.InputPassword;\n      }), i.d(e, \"Line\", function () {\n        return r.Line;\n      }), i.d(e, \"MultiLine\", function () {\n        return r.MultiLine;\n      }), i.d(e, \"RadioButton\", function () {\n        return r.RadioButton;\n      }), i.d(e, \"StackPanel\", function () {\n        return r.StackPanel;\n      }), i.d(e, \"SelectorGroup\", function () {\n        return r.SelectorGroup;\n      }), i.d(e, \"CheckboxGroup\", function () {\n        return r.CheckboxGroup;\n      }), i.d(e, \"RadioGroup\", function () {\n        return r.RadioGroup;\n      }), i.d(e, \"SliderGroup\", function () {\n        return r.SliderGroup;\n      }), i.d(e, \"SelectionPanel\", function () {\n        return r.SelectionPanel;\n      }), i.d(e, \"ScrollViewer\", function () {\n        return r.ScrollViewer;\n      }), i.d(e, \"TextWrapping\", function () {\n        return r.TextWrapping;\n      }), i.d(e, \"TextBlock\", function () {\n        return r.TextBlock;\n      }), i.d(e, \"TextWrapper\", function () {\n        return r.TextWrapper;\n      }), i.d(e, \"KeyPropertySet\", function () {\n        return r.KeyPropertySet;\n      }), i.d(e, \"VirtualKeyboard\", function () {\n        return r.VirtualKeyboard;\n      }), i.d(e, \"Rectangle\", function () {\n        return r.Rectangle;\n      }), i.d(e, \"DisplayGrid\", function () {\n        return r.DisplayGrid;\n      }), i.d(e, \"BaseSlider\", function () {\n        return r.BaseSlider;\n      }), i.d(e, \"Slider\", function () {\n        return r.Slider;\n      }), i.d(e, \"ImageBasedSlider\", function () {\n        return r.ImageBasedSlider;\n      }), i.d(e, \"ScrollBar\", function () {\n        return r.ScrollBar;\n      }), i.d(e, \"ImageScrollBar\", function () {\n        return r.ImageScrollBar;\n      }), i.d(e, \"name\", function () {\n        return r.name;\n      }), i.d(e, \"AdvancedDynamicTexture\", function () {\n        return r.AdvancedDynamicTexture;\n      }), i.d(e, \"AdvancedDynamicTextureInstrumentation\", function () {\n        return r.AdvancedDynamicTextureInstrumentation;\n      }), i.d(e, \"Vector2WithInfo\", function () {\n        return r.Vector2WithInfo;\n      }), i.d(e, \"Matrix2D\", function () {\n        return r.Matrix2D;\n      }), i.d(e, \"Measure\", function () {\n        return r.Measure;\n      }), i.d(e, \"MultiLinePoint\", function () {\n        return r.MultiLinePoint;\n      }), i.d(e, \"Style\", function () {\n        return r.Style;\n      }), i.d(e, \"ValueAndUnit\", function () {\n        return r.ValueAndUnit;\n      }), i.d(e, \"XmlLoader\", function () {\n        return r.XmlLoader;\n      }), i.d(e, \"AbstractButton3D\", function () {\n        return r.AbstractButton3D;\n      }), i.d(e, \"Button3D\", function () {\n        return r.Button3D;\n      }), i.d(e, \"Container3D\", function () {\n        return r.Container3D;\n      }), i.d(e, \"Control3D\", function () {\n        return r.Control3D;\n      }), i.d(e, \"CylinderPanel\", function () {\n        return r.CylinderPanel;\n      }), i.d(e, \"HolographicButton\", function () {\n        return r.HolographicButton;\n      }), i.d(e, \"MeshButton3D\", function () {\n        return r.MeshButton3D;\n      }), i.d(e, \"PlanePanel\", function () {\n        return r.PlanePanel;\n      }), i.d(e, \"ScatterPanel\", function () {\n        return r.ScatterPanel;\n      }), i.d(e, \"SpherePanel\", function () {\n        return r.SpherePanel;\n      }), i.d(e, \"StackPanel3D\", function () {\n        return r.StackPanel3D;\n      }), i.d(e, \"VolumeBasedPanel\", function () {\n        return r.VolumeBasedPanel;\n      }), i.d(e, \"FluentMaterialDefines\", function () {\n        return r.FluentMaterialDefines;\n      }), i.d(e, \"FluentMaterial\", function () {\n        return r.FluentMaterial;\n      }), i.d(e, \"GUI3DManager\", function () {\n        return r.GUI3DManager;\n      }), i.d(e, \"Vector3WithInfo\", function () {\n        return r.Vector3WithInfo;\n      });\n      var n = void 0 !== t ? t : \"undefined\" != typeof window ? window : void 0;\n      void 0 !== n && (n.BABYLON = n.BABYLON || {}, n.BABYLON.GUI = r);\n    }.call(this, i(3));\n  }, function (t, e) {\n    var i;\n\n    i = function () {\n      return this;\n    }();\n\n    try {\n      i = i || new Function(\"return this\")();\n    } catch (t) {\n      \"object\" == typeof window && (i = window);\n    }\n\n    t.exports = i;\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}