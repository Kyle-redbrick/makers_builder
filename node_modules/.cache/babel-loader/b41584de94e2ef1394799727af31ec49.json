{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/ForgotPw/index.js\";\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport SignIn from \"../SignIn\";\nimport \"./index.scss\";\n\nvar ForgotPw =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ForgotPw, _Component);\n\n  function ForgotPw(props) {\n    var _this;\n\n    _classCallCheck(this, ForgotPw);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ForgotPw).call(this, props));\n\n    _this.onChangeInput = function (e) {\n      var _this$setState;\n\n      var _e$target = e.target,\n          id = _e$target.id,\n          value = _e$target.value;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, id, value), _defineProperty(_this$setState, \"warning_email\", \"\"), _this$setState));\n    };\n\n    _this.onClickSend = function () {\n      var formatMessage = _this.props.intl.formatMessage;\n      var email = _this.state.email;\n\n      if (email && _this.checkEmailFormat(email)) {\n        request.sendPasswordMail({\n          email: email\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          showPopUp(React.createElement(PopUp.OneButton, {\n            title: formatMessage({\n              id: \"ID_FORGOTPW_SEND_TITLE\"\n            }),\n            buttonName: formatMessage({\n              id: \"ID_FORGOTPW_SEND_CONFIRM\"\n            }),\n            buttonAction: function buttonAction() {\n              showPopUp(React.createElement(SignIn, {\n                isBuilder: _this.props.isBuilder,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 31\n                },\n                __self: this\n              }), {\n                darkmode: !_this.props.isBuilder,\n                mobileFullscreen: true\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 27\n            },\n            __self: this\n          }), {\n            darkmode: !_this.props.isBuilder\n          });\n        });\n      } else {\n        _this.setState({\n          warning_email: formatMessage({\n            id: \"ID_FORGOTPW_WARNING_EMAIL_FORMAT\"\n          })\n        });\n      }\n    };\n\n    _this.checkEmailFormat = function (email) {\n      var regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return regex.test(email);\n    };\n\n    _this.state = {\n      email: \"\",\n      warning_email: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(ForgotPw, [{\n    key: \"render\",\n    value: function render() {\n      var formatMessage = this.props.intl.formatMessage;\n      var _this$state = this.state,\n          email = _this$state.email,\n          warning_email = _this$state.warning_email;\n      var onChangeInput = this.onChangeInput,\n          onClickSend = this.onClickSend;\n      return React.createElement(\"div\", {\n        className: \"forgotpw\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"forgotpw_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_FORGOTPW\"\n      })), React.createElement(\"div\", {\n        className: \"forgotpw_desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_FORGOTPW_DESC\"\n      })), React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning_email !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"email\",\n        type: \"email\",\n        placeholder: formatMessage({\n          id: \"ID_FORGOTPW_PLACEHOLDER\"\n        }),\n        value: email,\n        onChange: onChangeInput,\n        onKeyDown: function onKeyDown(e) {\n          if (e.keyCode === 13) onClickSend();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, warning_email), React.createElement(\"button\", {\n        className: \"popup_button\",\n        onClick: onClickSend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_FORGOTPW_CONFIRM\"\n      })));\n    }\n  }]);\n\n  return ForgotPw;\n}(Component);\n\nexport default injectIntl(ForgotPw);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/ForgotPw/index.js"],"names":["React","Component","injectIntl","request","PopUp","showPopUp","SignIn","ForgotPw","props","onChangeInput","e","target","id","value","setState","onClickSend","formatMessage","intl","email","state","checkEmailFormat","sendPasswordMail","then","res","json","isBuilder","darkmode","mobileFullscreen","warning_email","regex","test","keyCode"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport SignIn from \"../SignIn\";\nimport \"./index.scss\";\n\nclass ForgotPw extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { email: \"\", warning_email: \"\" };\n  }\n\n  onChangeInput = e => {\n    const { id, value } = e.target;\n    this.setState({ [id]: value, warning_email: \"\" });\n  };\n  onClickSend = () => {\n    const { formatMessage } = this.props.intl;\n    const { email } = this.state;\n    if (email && this.checkEmailFormat(email)) {\n      request\n        .sendPasswordMail({ email })\n        .then(res => res.json())\n        .then(json => {\n          showPopUp(\n            <PopUp.OneButton\n              title={formatMessage({ id: \"ID_FORGOTPW_SEND_TITLE\" })}\n              buttonName={formatMessage({ id: \"ID_FORGOTPW_SEND_CONFIRM\" })}\n              buttonAction={() => {\n                showPopUp(<SignIn isBuilder={this.props.isBuilder} />, {\n                  darkmode: !this.props.isBuilder,\n                  mobileFullscreen: true\n                });\n              }}\n            />,\n            { darkmode: !this.props.isBuilder }\n          );\n        });\n    } else {\n      this.setState({\n        warning_email: formatMessage({ id: \"ID_FORGOTPW_WARNING_EMAIL_FORMAT\" })\n      });\n    }\n  };\n\n  checkEmailFormat = email => {\n    const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return regex.test(email);\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const { email, warning_email } = this.state;\n    const { onChangeInput, onClickSend } = this;\n\n    return (\n      <div className=\"forgotpw\">\n        <div className=\"forgotpw_title\">\n          {formatMessage({ id: \"ID_FORGOTPW\" })}\n        </div>\n        <div className=\"forgotpw_desc\">\n          {formatMessage({ id: \"ID_FORGOTPW_DESC\" })}\n        </div>\n        <input\n          className={`popup_input ${\n            warning_email !== \"\" ? \"popup_input-warning\" : \"\"\n          }`}\n          id=\"email\"\n          type=\"email\"\n          placeholder={formatMessage({ id: \"ID_FORGOTPW_PLACEHOLDER\" })}\n          value={email}\n          onChange={onChangeInput}\n          onKeyDown={e => {\n            if (e.keyCode === 13) onClickSend();\n          }}\n        />\n        <div className=\"popup_warning\">{warning_email}</div>\n        <button className=\"popup_button\" onClick={onClickSend}>\n          {formatMessage({ id: \"ID_FORGOTPW_CONFIRM\" })}\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ForgotPw);\n"]},"metadata":{},"sourceType":"module"}