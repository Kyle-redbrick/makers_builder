{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9,\n    _templateObject10,\n    _templateObject11,\n    _templateObject12,\n    _templateObject13,\n    _templateObject14,\n    _templateObject15,\n    _templateObject16,\n    _templateObject17,\n    _templateObject18,\n    _templateObject19,\n    _templateObject20,\n    _templateObject21,\n    _this = this,\n    _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/LMS/Sections/QuestionUpdate.js\";\n\nimport React, { useCallback, useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport styled from \"@emotion/styled\";\nimport { putQna } from \"../api\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport * as Popup from \"../../../Common/Component/PopUp\";\nimport Button from \"../Components/Button\";\nimport { COLOR } from \"./../Constants\";\nimport { IMAGE } from \"./../Constants/Images\";\nimport AlertPopup from \"../Components/AlertPopup\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nvar Self = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  flex: 1; \\n\\n  @media screen and (max-width: 1334px){\\n    width: 88.33vw;\\n    margin: 0 auto;\\n  }\\n\"])));\nvar Title = styled.h2(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  font-size: 22px;\\n  font-weight: bold;\\n  line-height: 1.45;\\n  text-align: center;\\n  color: #fff;\\n  padding-top: 28px;\\n  padding-bottom: 19.5px;\\n  border-bottom: solid 1px rgba(255, 255, 255, 0.2);\\n  margin-bottom: 19.5px;\\n  position: relative;\\n\\n  @media screen and (max-width: 1334px){\\n    padding-top: 0;\\n  }\\n\"])));\nvar PageBack = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  width: 32px;\\n  height: 32px;\\n  background-size: contain;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-image: url(\", \");\\n  position: absolute;\\n  left: 0;\\n  bottom: 19.5px;\\n  cursor: pointer;\\n\"])), IMAGE.ICON_BACK);\nvar Form = styled.form(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\"])));\nvar FormGroup = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-bottom: 20px;\\n\"])));\nvar TitleInput = styled.input(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 16px 16px 14px;\\n  border-radius: 10px;\\n  background-color: #1c1c1c;\\n  border: none;\\n  font-size: 16px;\\n  line-height: 1.38;\\n  color: #fff;\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &::placeholder {\\n    color: #9e9e9e;\\n  }\\n\"])));\nvar TypeSelect = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 52px;\\n  padding: 16px;\\n  border-radius: 10px;\\n  background-color: #1c1c1c;\\n  font-size: 16px;\\n  line-height: 1.38;\\n  color: \", \";\\n  position: relative;\\n  cursor: pointer;\\n\\n  @media screen and (max-width: 1334px){\\n    height: auto;\\n  }\\n\"])), function (props) {\n  return props.selected ? '#fff' : COLOR.ORANGE;\n});\nvar IconSelect = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  width: 20px;\\n  height: 20px;\\n  background-size: contain;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-image: url(\", \");\\n  position: absolute;\\n  right: 16px;\\n  top: 16px;\\n\"])), IMAGE.ICON_SELECT);\nvar SelectOptions = styled.div(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 62px;\\n  left: 0;\\n  width: 100%;\\n  padding: 10px;\\n  border-radius: 16px;\\n  box-shadow: 0 20px 50px 0 rgba(0, 0, 0, 0.5);\\n  background-color: #1c1c1c;\\n  z-index: 10;\\n  display: \", \";\\n\"])), function (props) {\n  return props.active ? 'block' : 'none';\n});\nvar Option = styled.div(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  padding: 14px 16px 12px;\\n  border-radius: 10px;\\n  font-size: 16px;\\n  line-height: 1.5;\\n  color: #fff;\\n  border-radius: 10px;\\n  cursor: pointer;\\n\\n  \", \"\\n\"])), function (props) {\n  return props.selected && \"\\n    background-color: rgba(255, 255, 255, 0.05);\\n  \";\n});\nvar ContentTextArea = styled.textarea(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 156px;\\n  padding: 16px;\\n  border-radius: 10px;\\n  background-color: #1c1c1c;\\n  border: none;\\n  font-size: 16px;\\n  line-height: 1.38;\\n  color: #fff;\\n  resize: none;\\n  overflow: auto;\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &::placeholder {\\n    color: #9e9e9e;\\n  }\\n\"])));\nvar ButtonWrap = styled.div(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n  text-align: right;\\n  padding-top: 10px;\\n\\n  @media screen and (max-width: 1334px){\\n    text-align: center;\\n    margin-bottom: 30px;\\n  }\\n\"])));\nvar InputWrap = styled.div(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n  width: 129px;\\n  height: 34px;\\n  margin: 0 10px 10px 0;\\n  padding: 0 12px 0 3px;\\n  border-radius: 10px;\\n  background-color: rgba(255, 255, 255, 0.3);\\n  cursor: pointer;\\n  /* pointer-events: none; */\\n\"])));\nvar ImgIcon = styled.img(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n  width: 20px;\\n  height: 16px;\\n  /* background-color: rgba(255, 255, 255, 0.5); */\\n  background-size: auto;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-image: url(\", \");\\n  border-radius: 3px;\\n  pointer-events: none;\\n\"])), IMAGE.ICON_IMAGE);\nvar DeleteIcon = styled.img(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\\n  width: 12px;\\n  height: 12px;\\n  /* object-fit: contain; */\\n  background-size: auto;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-image: url(\", \");\\n  cursor: pointer;\\n  margin-right: 22px;\\n\"])), IMAGE.ICON_DELETE);\nvar ButtonText = styled.div(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n  height: 14px;\\n  margin: 11px 0 9px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  color: #ffffff;\\n  line-height: 14px;\\n  pointer-events: none;\\n\"])));\nvar HelperText = styled.div(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n  width: 253px;\\n  height: 22px;\\n  margin: 7px 478px 15px 10px;\\n  font-size: 14px;\\n  line-height: 1.57;\\n  color: rgba(255, 255, 255, 0.5);\\n\"])));\nvar UploadFile = styled.div(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  width: 870px;\\n  height: 56px;\\n  margin: 10px 0 0;\\n  padding: 10px 20px 10px 10px;\\n  border-radius: 10px;\\n  background-color: rgba(255, 255, 255, 0.1);\\n\"])));\nvar TextWrap = styled.div(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n\"])));\nvar UploadFileText = styled.span(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  line-height: 1.57;\\n  color: #9e9e9e;\\n\"])));\nvar SubmitButton = styled(Button)(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"\\n  background-color: \", \";\\n\"])), COLOR.ORANGE);\nvar popupConfig = {\n  dismissButton: false,\n  dismissOverlay: true,\n  defaultPadding: false,\n  darkmode: true,\n  mobileFullscreen: true,\n  overflow: true\n};\n\nvar File = function File(props) {\n  var id = props.id,\n      accept = props.accept,\n      values = props.values,\n      _onChange = props.onChange,\n      intl = props.intl;\n  var fileInputRef = useRef();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: id,\n    ref: fileInputRef,\n    type: \"file\",\n    accept: accept,\n    onChange: function onChange(e) {\n      if (values.length === 4) {\n        alert(intl.formatMessage({\n          id: \"ID_QNA_UPLOAD_IMAGE_HELP_TEXT\"\n        }));\n        return;\n      }\n\n      var selectedFile = e.target.files[0];\n      if (!selectedFile) return;\n      var size = formatBytes(selectedFile.size);\n      var data = new FormData();\n      data.append(\"file\", selectedFile);\n      request.dreamUpload(data).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.success) {\n          _onChange([].concat(_toConsumableArray(values), [{\n            url: \"/\" + json.key,\n            size: size\n          }]));\n        } else {\n          throw json;\n        }\n      }).catch(function (err) {\n        alert(JSON.stringify(err));\n      });\n    },\n    hidden: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InputWrap, {\n    onClick: function onClick() {\n      fileInputRef.current.click();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ImgIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ButtonText, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_QNA_UPLOAD_IMAGE\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  }))));\n};\n\nvar QnaUpdate = function QnaUpdate(_ref) {\n  var item = _ref.item,\n      props = _objectWithoutProperties(_ref, [\"item\"]);\n\n  var history = useHistory();\n  var intl = props.intl;\n  var TYPES = [intl.formatMessage({\n    id: \"ID_QNA_QUETION_TYPE_STUDY\"\n  }), intl.formatMessage({\n    id: \"ID_QNA_QUETION_TYPE_TECH\"\n  })];\n\n  var _useState = useState({\n    content: item.content,\n    title: item.title,\n    type: item.type === \"learning\" ? TYPES[0] : TYPES[1]\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      qnaForm = _useState2[0],\n      setQnaForm = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showOptions = _useState4[0],\n      setShowOptions = _useState4[1];\n\n  var _useState5 = useState(item.imageJSON ? JSON.parse(item.imageJSON) : []),\n      _useState6 = _slicedToArray(_useState5, 2),\n      images = _useState6[0],\n      setImages = _useState6[1];\n\n  var handleSubmitUpdate = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return putQna(_objectSpread({}, qnaForm, {\n                type: qnaForm.type.includes(\"학습\") ? \"learning\" : \"tech\",\n                questionId: item.id,\n                imageJSON: images.length ? JSON.stringify(images.map(function (image) {\n                  return image;\n                })) : null\n              }));\n\n            case 3:\n              result = _context.sent;\n              history.push(\"/lms/questions\");\n              return _context.abrupt(\"return\", result);\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              window.alert(\"네트워크 에러입니다.\");\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function handleSubmitUpdate() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeQnaForm = function handleChangeQnaForm(e) {\n    setQnaForm(_objectSpread({}, qnaForm, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleChangeType = function handleChangeType(type) {\n    setQnaForm(_objectSpread({}, qnaForm, {\n      type: type\n    }));\n    setShowOptions(false);\n  };\n\n  var goBack = useCallback(function () {\n    history.goBack();\n  }, [history]);\n  var toggleOptions = useCallback(function () {\n    setShowOptions(!showOptions);\n  }, [showOptions]);\n\n  var deleteUploadImage = function deleteUploadImage(index) {\n    setImages(images.filter(function (_, i) {\n      return i !== index;\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(Self, Object.assign({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PageBack, {\n    onClick: goBack,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_QNA_MODE_NEW_QUESTION\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      Popup.showPopUp( /*#__PURE__*/React.createElement(AlertPopup, {\n        message: \"\\uC9C8\\uBB38\\uC744 \\uC218\\uC815\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n        onSubmit: function onSubmit() {\n          return handleSubmitUpdate();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }\n      }), popupConfig);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(TypeSelect, {\n    selected: qnaForm.type !== \"\",\n    onClick: toggleOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 11\n    }\n  }, qnaForm.type || /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_QNA_SELECT_QUETION_TYPE\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(IconSelect, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(SelectOptions, {\n    active: showOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }\n  }, TYPES.map(function (type) {\n    return /*#__PURE__*/React.createElement(Option, {\n      key: type,\n      onClick: function onClick() {\n        return handleChangeType(type);\n      },\n      selected: qnaForm.type === type,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }\n    }, type);\n  })))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleInput, {\n    name: \"title\",\n    value: qnaForm.title,\n    onChange: handleChangeQnaForm,\n    placeholder: intl.formatMessage({\n      id: \"ID_QNA_TITLE_PLACEHOLDER\"\n    }),\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ContentTextArea, {\n    name: \"content\",\n    value: qnaForm.content,\n    onChange: handleChangeQnaForm,\n    placeholder: intl.formatMessage({\n      id: \"ID_QNA_TEXT_PLACEHOLDER\"\n    }),\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(File, {\n    values: images,\n    onChange: setImages,\n    accept: \".jpg,.jpeg,.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(HelperText, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 11\n    }\n  }, \"* \", /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_QNA_UPLOAD_IMAGE_HELP_TEXT\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 15\n    }\n  }))), images.length && images.map(function (image, index) {\n    return /*#__PURE__*/React.createElement(UploadFile, {\n      key: index,\n      onClick: function onClick() {\n        return deleteUploadImage(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(TextWrap, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(UploadFileText, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 17\n      }\n    }, image.url.replace(\"/\", \"\")), /*#__PURE__*/React.createElement(UploadFileText, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }\n    }, image.size)));\n  }), /*#__PURE__*/React.createElement(ButtonWrap, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SubmitButton, {\n    type: \"submit\",\n    width: 150,\n    height: 50,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 11\n    }\n  }, \"Edit\"))));\n};\n\nexport default connect(function (state) {\n  return {\n    userId: state.userinfo.id,\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(QnaUpdate));\n\nfunction formatBytes(bytes) {\n  var decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  if (bytes === 0) return '0 Bytes';\n  var k = 1024;\n  var dm = decimals < 0 ? 0 : decimals;\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  var i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/LMS/Sections/QuestionUpdate.js"],"names":["React","useCallback","useRef","useState","useHistory","connect","styled","putQna","request","Popup","Button","COLOR","IMAGE","AlertPopup","FormattedMessage","injectIntl","Self","div","Title","h2","PageBack","ICON_BACK","Form","form","FormGroup","TitleInput","input","TypeSelect","props","selected","ORANGE","IconSelect","ICON_SELECT","SelectOptions","active","Option","ContentTextArea","textarea","ButtonWrap","InputWrap","ImgIcon","img","ICON_IMAGE","DeleteIcon","ICON_DELETE","ButtonText","HelperText","UploadFile","TextWrap","UploadFileText","span","SubmitButton","popupConfig","dismissButton","dismissOverlay","defaultPadding","darkmode","mobileFullscreen","overflow","File","id","accept","values","onChange","intl","fileInputRef","e","length","alert","formatMessage","selectedFile","target","files","size","formatBytes","data","FormData","append","dreamUpload","then","res","json","success","url","key","catch","err","JSON","stringify","current","click","QnaUpdate","item","history","TYPES","content","title","type","qnaForm","setQnaForm","showOptions","setShowOptions","imageJSON","parse","images","setImages","handleSubmitUpdate","includes","questionId","map","image","result","push","window","handleChangeQnaForm","name","value","handleChangeType","goBack","toggleOptions","deleteUploadImage","index","filter","_","i","preventDefault","showPopUp","replace","state","userId","userinfo","email","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { connect } from \"react-redux\"; import styled from \"@emotion/styled\";\nimport { putQna } from \"../api\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport * as Popup from \"../../../Common/Component/PopUp\";\n\nimport Button from \"../Components/Button\";\n\nimport { COLOR } from \"./../Constants\";\nimport { IMAGE } from \"./../Constants/Images\";\nimport AlertPopup from \"../Components/AlertPopup\"\nimport { FormattedMessage, injectIntl } from \"react-intl\";\n\nconst Self = styled.div`\n  flex: 1; \n\n  @media screen and (max-width: 1334px){\n    width: 88.33vw;\n    margin: 0 auto;\n  }\n`;\n\nconst Title = styled.h2`\n  font-size: 22px;\n  font-weight: bold;\n  line-height: 1.45;\n  text-align: center;\n  color: #fff;\n  padding-top: 28px;\n  padding-bottom: 19.5px;\n  border-bottom: solid 1px rgba(255, 255, 255, 0.2);\n  margin-bottom: 19.5px;\n  position: relative;\n\n  @media screen and (max-width: 1334px){\n    padding-top: 0;\n  }\n`\n\nconst PageBack = styled.div`\n  width: 32px;\n  height: 32px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${IMAGE.ICON_BACK});\n  position: absolute;\n  left: 0;\n  bottom: 19.5px;\n  cursor: pointer;\n`\n\nconst Form = styled.form``;\n\nconst FormGroup = styled.div`\n  display: flex;\n  margin-bottom: 20px;\n`\n\nconst TitleInput = styled.input`\n  width: 100%;\n  padding: 16px 16px 14px;\n  border-radius: 10px;\n  background-color: #1c1c1c;\n  border: none;\n  font-size: 16px;\n  line-height: 1.38;\n  color: #fff;\n\n  &:focus {\n    outline: none;\n  }\n\n  &::placeholder {\n    color: #9e9e9e;\n  }\n`;\n\nconst TypeSelect = styled.div`\n  width: 100%;\n  height: 52px;\n  padding: 16px;\n  border-radius: 10px;\n  background-color: #1c1c1c;\n  font-size: 16px;\n  line-height: 1.38;\n  color: ${(props) => props.selected ? '#fff' : COLOR.ORANGE};\n  position: relative;\n  cursor: pointer;\n\n  @media screen and (max-width: 1334px){\n    height: auto;\n  }\n`\n\nconst IconSelect = styled.div`\n  width: 20px;\n  height: 20px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${IMAGE.ICON_SELECT});\n  position: absolute;\n  right: 16px;\n  top: 16px;\n`\n\nconst SelectOptions = styled.div`\n  position: absolute;\n  top: 62px;\n  left: 0;\n  width: 100%;\n  padding: 10px;\n  border-radius: 16px;\n  box-shadow: 0 20px 50px 0 rgba(0, 0, 0, 0.5);\n  background-color: #1c1c1c;\n  z-index: 10;\n  display: ${(props) => props.active ? 'block' : 'none'};\n`\n\nconst Option = styled.div`\n  padding: 14px 16px 12px;\n  border-radius: 10px;\n  font-size: 16px;\n  line-height: 1.5;\n  color: #fff;\n  border-radius: 10px;\n  cursor: pointer;\n\n  ${(props) => props.selected && `\n    background-color: rgba(255, 255, 255, 0.05);\n  `}\n`\n\nconst ContentTextArea = styled.textarea`\n  width: 100%;\n  height: 156px;\n  padding: 16px;\n  border-radius: 10px;\n  background-color: #1c1c1c;\n  border: none;\n  font-size: 16px;\n  line-height: 1.38;\n  color: #fff;\n  resize: none;\n  overflow: auto;\n  font-family: \"Noto Sans KR\", sans-serif;\n\n  &:focus {\n    outline: none;\n  }\n\n  &::placeholder {\n    color: #9e9e9e;\n  }\n`;\n\nconst ButtonWrap = styled.div`\n  text-align: right;\n  padding-top: 10px;\n\n  @media screen and (max-width: 1334px){\n    text-align: center;\n    margin-bottom: 30px;\n  }\n`\n\nconst InputWrap = styled.div`\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  width: 129px;\n  height: 34px;\n  margin: 0 10px 10px 0;\n  padding: 0 12px 0 3px;\n  border-radius: 10px;\n  background-color: rgba(255, 255, 255, 0.3);\n  cursor: pointer;\n  /* pointer-events: none; */\n`\nconst ImgIcon = styled.img`\n  width: 20px;\n  height: 16px;\n  /* background-color: rgba(255, 255, 255, 0.5); */\n  background-size: auto;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${IMAGE.ICON_IMAGE});\n  border-radius: 3px;\n  pointer-events: none;\n`\nconst DeleteIcon = styled.img`\n  width: 12px;\n  height: 12px;\n  /* object-fit: contain; */\n  background-size: auto;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${IMAGE.ICON_DELETE});\n  cursor: pointer;\n  margin-right: 22px;\n`\n\nconst ButtonText = styled.div`\n  height: 14px;\n  margin: 11px 0 9px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #ffffff;\n  line-height: 14px;\n  pointer-events: none;\n`\nconst HelperText = styled.div`\n  width: 253px;\n  height: 22px;\n  margin: 7px 478px 15px 10px;\n  font-size: 14px;\n  line-height: 1.57;\n  color: rgba(255, 255, 255, 0.5);\n`\nconst UploadFile = styled.div`\n  display: flex;\n  align-items: center;\n  width: 870px;\n  height: 56px;\n  margin: 10px 0 0;\n  padding: 10px 20px 10px 10px;\n  border-radius: 10px;\n  background-color: rgba(255, 255, 255, 0.1);\n`\nconst TextWrap = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n`\nconst UploadFileText = styled.span`\n  font-size: 14px;\n  line-height: 1.57;\n  color: #9e9e9e;\n`\nconst SubmitButton = styled(Button)`\n  background-color: ${COLOR.ORANGE};\n`;\n\nconst popupConfig = {\n  dismissButton: false,\n  dismissOverlay: true,\n  defaultPadding: false,\n  darkmode: true,\n  mobileFullscreen: true,\n  overflow: true,\n}\n\nconst File = props => {\n  const { id, accept, values, onChange, intl } = props;\n  const fileInputRef = useRef();\n  return (\n    <div>\n      <input\n        id={id}\n        ref={fileInputRef}\n        type=\"file\"\n        accept={accept}\n        onChange={e => {\n          if (values.length === 4) {\n            alert(intl.formatMessage({ id: \"ID_QNA_UPLOAD_IMAGE_HELP_TEXT\" }));\n            return;\n          }\n          const selectedFile = e.target.files[0];\n          if (!selectedFile) return;\n\n          let size = formatBytes(selectedFile.size)\n\n          const data = new FormData();\n          data.append(\"file\", selectedFile);\n          request\n            .dreamUpload(data)\n            .then(res => res.json())\n            .then(json => {\n              if (json.success) {\n                onChange([...values, { url: \"/\" + json.key, size }]);\n              } else {\n                throw json;\n              }\n            })\n            .catch(err => {\n              alert(JSON.stringify(err));\n            });\n        }}\n        hidden\n      />\n      <InputWrap\n        onClick={() => {\n          fileInputRef.current.click();\n        }}\n      >\n        <ImgIcon />\n        <ButtonText>\n          <FormattedMessage id=\"ID_QNA_UPLOAD_IMAGE\"/>\n        </ButtonText>\n      </InputWrap>\n    </div>\n  );\n}\n\nconst QnaUpdate = ({ item, ...props}) => {\n  let history = useHistory();\n\n  const { intl } = props;\n\n  const TYPES = [\n    intl.formatMessage({ id: \"ID_QNA_QUETION_TYPE_STUDY\" }),\n    intl.formatMessage({ id: \"ID_QNA_QUETION_TYPE_TECH\" })\n  ];\n\n  const [qnaForm, setQnaForm] = useState({\n    content: item.content,\n    title: item.title,\n    type: item.type === \"learning\" ? TYPES[0] : TYPES[1],\n  });\n\n  const [showOptions, setShowOptions] = useState(false);\n  const [images, setImages] = useState(item.imageJSON ? JSON.parse(item.imageJSON) : []);\n\n  const handleSubmitUpdate = async () => {\n\n    try {\n      const result = await putQna({\n        ...qnaForm,\n        type: qnaForm.type.includes(\"학습\") ? \"learning\" : \"tech\",\n        questionId: item.id,\n        imageJSON: images.length ? JSON.stringify(images.map(image => image)) : null\n      });\n\n      history.push(\"/lms/questions\");\n      return result;\n    } catch (error) {\n      window.alert(\"네트워크 에러입니다.\");\n    }\n  };\n\n  const handleChangeQnaForm = (e) => {\n    setQnaForm({\n      ...qnaForm,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleChangeType = (type) => {\n    setQnaForm({\n      ...qnaForm,\n      type,\n    });\n\n    setShowOptions(false);\n  };\n\n  const goBack = useCallback(() => {\n    history.goBack();\n  }, [history]);\n\n  const toggleOptions = useCallback(() => {\n    setShowOptions(!showOptions);\n  }, [showOptions]);\n\n  const deleteUploadImage = index => {\n    setImages(images.filter((_, i) => i !== index))\n  }\n\n  return (\n    <Self {...props}>\n      <Title>\n        <PageBack onClick={goBack} />\n        <FormattedMessage id=\"ID_QNA_MODE_NEW_QUESTION\"/>\n      </Title>\n      <Form onSubmit={e => {\n        e.preventDefault();\n        Popup.showPopUp(\n          <AlertPopup\n            message=\"질문을 수정하시겠습니까?\"\n            onSubmit={() => handleSubmitUpdate()}\n          />,\n          popupConfig\n        );\n      }\n      }> <FormGroup>\n          <TypeSelect\n            selected={qnaForm.type !== \"\"}\n            onClick={toggleOptions}\n          >\n            {qnaForm.type || <FormattedMessage id=\"ID_QNA_SELECT_QUETION_TYPE\"/>}\n            <IconSelect />\n            <SelectOptions active={showOptions}>\n              {TYPES.map((type) => (\n                <Option\n                  key={type}\n                  onClick={() => handleChangeType(type)}\n                  selected={qnaForm.type === type}\n                >\n                  {type}\n                </Option>\n              ))}\n            </SelectOptions>\n          </TypeSelect>\n        </FormGroup>\n        <FormGroup>\n          <TitleInput\n            name=\"title\"\n            value={qnaForm.title}\n            onChange={handleChangeQnaForm}\n            placeholder={ intl.formatMessage({ id: \"ID_QNA_TITLE_PLACEHOLDER\" })}\n            required\n          />\n        </FormGroup>\n        <FormGroup>\n          <ContentTextArea\n            name=\"content\"\n            value={qnaForm.content}\n            onChange={handleChangeQnaForm}\n            placeholder={ intl.formatMessage({ id: \"ID_QNA_TEXT_PLACEHOLDER\" })}\n            required\n          />\n        </FormGroup>\n        <FormGroup>\n          <File values={images} onChange={setImages} accept=\".jpg,.jpeg,.png\" />\n          <HelperText>\n            * <FormattedMessage id=\"ID_QNA_UPLOAD_IMAGE_HELP_TEXT\"/>\n          </HelperText>\n        </FormGroup>\n        {images.length && (\n          images.map((image, index) => (\n            <UploadFile key={index} onClick={() => deleteUploadImage(index)}>\n              <DeleteIcon />\n              <TextWrap>\n                <UploadFileText>{image.url.replace(\"/\", \"\")}</UploadFileText>\n                <UploadFileText>{image.size}</UploadFileText>\n              </TextWrap>\n            </UploadFile>\n          ))\n        )}\n        <ButtonWrap>\n          <SubmitButton type=\"submit\" width={150} height={50}>Edit</SubmitButton>\n        </ButtonWrap>\n      </Form>\n    </Self>\n  );\n};\n\nexport default connect(\n  (state) => ({\n    userId: state.userinfo.id,\n    email: state.userinfo.email\n  }),\n  {}\n)(injectIntl(QnaUpdate));\n\n\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}"]},"metadata":{},"sourceType":"module"}