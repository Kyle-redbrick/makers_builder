{"ast":null,"code":"import _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Editor/Component/OOBCEditor/Component/Line/index.js\";\nimport React, { useRef } from \"react\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport \"./index.scss\"; // import anchorDefault from \"../../../../../../../../Image/builder/oobceditor/anchor-default.svg\";\n// import anchorTouched from \"../../../../../../../../Image/builder/oobceditor/anchor-touched.svg\";\n// import deleteDefault from \"../../../../../../../../Image/builder/oobceditor/delete-default.png\";\n\nimport foldImg from \"../../../../../../../../Image/builder/oobceditor/fold.png\";\nimport ButtonIndicator from \"../../../../../ButtonIndicator\";\nexport default function (props) {\n  var line = props.line,\n      currentLine = props.currentLine,\n      children = props.children,\n      onClickLine = props.onClickLine,\n      onRightClickLine = props.onRightClickLine,\n      onClickFoldLine = props.onClickFoldLine,\n      onDragLine = props.onDragLine,\n      onDragBegin = props.onDragBegin,\n      onDragEnd = props.onDragEnd;\n  var isCurrent = line === currentLine;\n  var parentLine = line.getParentLine();\n  var hasCallback = line.hasCallback();\n  var disabled = line.disabled || parentLine && parentLine.disabled; // const isEmpty = line.block.mode === MODE.EMPTY;\n  // let isFamilyFocused;\n  // const parentLine = line.getParentLine();\n  // const siblingLines = line.getSiblingLines();\n  // if (parentLine) {\n  //   const familyLines = [parentLine, ...siblingLines];\n  //   isFamilyFocused = familyLines.reduce(\n  //     (prev, line) => prev || line === currentLine,\n  //     false\n  //   );\n  // } else {\n  //   isFamilyFocused = true;\n  // }\n  // dnd\n  // const [{ opacity }, dragRef, previewRef] = useDrag({\n\n  var _useDrag = useDrag({\n    item: {\n      type: \"line\",\n      line: line\n    },\n    collect: function collect(monitor) {\n      return {\n        opacity: monitor.isDragging() ? 0.6 : 1\n      };\n    },\n    begin: function begin(monitor) {\n      onDragBegin(line);\n    },\n    end: function end(item, monitor) {\n      onDragEnd(item.line);\n    }\n  }),\n      _useDrag2 = _slicedToArray(_useDrag, 2),\n      opacity = _useDrag2[0].opacity,\n      previewRef = _useDrag2[1];\n\n  var _useDrop = useDrop({\n    accept: \"line\",\n    hover: function hover(item, monitor) {\n      var dragLine = item.line;\n      var hoverLine = line;\n      var dragOffset = monitor.getClientOffset();\n      onDragLine(dragLine, hoverLine, dragOffset);\n    }\n  }),\n      _useDrop2 = _slicedToArray(_useDrop, 2),\n      dropRef = _useDrop2[1];\n\n  var lineRef = dropRef(previewRef(useRef())); // const anchorRef = dragRef(useRef());\n  // line style\n\n  var paddingLeft = line.getDepth() * 60 + 18;\n  var lineStyle = {\n    paddingLeft: \"\".concat(paddingLeft, \"px\"),\n    opacity: opacity\n  };\n  return React.createElement(ButtonIndicator, {\n    buttonId: line.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"oobceditor_line-\".concat(line.id),\n    className: \"oobceditor_line\".concat(isCurrent ? \" oobceditor_line-current\" : \"\").concat(disabled ? \" oobceditor_line-disabled\" : \"\"),\n    ref: lineRef,\n    style: lineStyle,\n    onClick: function onClick(e) {\n      if (e.preventDefault) e.preventDefault();\n      if (e.stopPropagation) e.stopPropagation();\n      onClickLine(line);\n    },\n    onContextMenu: function onContextMenu(e) {\n      if (e.preventDefault) e.preventDefault(); // if (e.stopPropagation) e.stopPropagation();\n\n      onRightClickLine(line, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"oobceditor_line_ribbon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"oobceditor_line_blocks\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, children), hasCallback && React.createElement(\"div\", {\n    className: \"oobceditor_line_fold\".concat(line.folded ? \" oobceditor_line_fold-folded\" : \"\"),\n    onClick: function onClick(e) {\n      if (e.preventDefault) e.preventDefault();\n      if (e.stopPropagation) e.stopPropagation();\n      onClickFoldLine(line);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: foldImg,\n    alt: \"fold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }))));\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Editor/Component/OOBCEditor/Component/Line/index.js"],"names":["React","useRef","useDrag","useDrop","foldImg","ButtonIndicator","props","line","currentLine","children","onClickLine","onRightClickLine","onClickFoldLine","onDragLine","onDragBegin","onDragEnd","isCurrent","parentLine","getParentLine","hasCallback","disabled","item","type","collect","monitor","opacity","isDragging","begin","end","previewRef","accept","hover","dragLine","hoverLine","dragOffset","getClientOffset","dropRef","lineRef","paddingLeft","getDepth","lineStyle","id","e","preventDefault","stopPropagation","folded"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport \"./index.scss\";\n\n// import anchorDefault from \"../../../../../../../../Image/builder/oobceditor/anchor-default.svg\";\n// import anchorTouched from \"../../../../../../../../Image/builder/oobceditor/anchor-touched.svg\";\n// import deleteDefault from \"../../../../../../../../Image/builder/oobceditor/delete-default.png\";\nimport foldImg from \"../../../../../../../../Image/builder/oobceditor/fold.png\";\nimport ButtonIndicator from \"../../../../../ButtonIndicator\";\n\nexport default function(props) {\n  const {\n    line,\n    currentLine,\n    children,\n    onClickLine,\n    onRightClickLine,\n    onClickFoldLine,\n    // onClickDeleteLine,\n    onDragLine,\n    onDragBegin,\n    onDragEnd\n  } = props;\n\n  const isCurrent = line === currentLine;\n  const parentLine = line.getParentLine();\n  const hasCallback = line.hasCallback();\n  const disabled = line.disabled || (parentLine && parentLine.disabled);\n  // const isEmpty = line.block.mode === MODE.EMPTY;\n\n  // let isFamilyFocused;\n  // const parentLine = line.getParentLine();\n  // const siblingLines = line.getSiblingLines();\n  // if (parentLine) {\n  //   const familyLines = [parentLine, ...siblingLines];\n  //   isFamilyFocused = familyLines.reduce(\n  //     (prev, line) => prev || line === currentLine,\n  //     false\n  //   );\n  // } else {\n  //   isFamilyFocused = true;\n  // }\n\n  // dnd\n  // const [{ opacity }, dragRef, previewRef] = useDrag({\n  const [{ opacity }, previewRef] = useDrag({\n    item: { type: \"line\", line },\n    collect: monitor => {\n      return {\n        opacity: monitor.isDragging() ? 0.6 : 1\n      };\n    },\n    begin: monitor => {\n      onDragBegin(line);\n    },\n    end: (item, monitor) => {\n      onDragEnd(item.line);\n    }\n  });\n  const [, dropRef] = useDrop({\n    accept: \"line\",\n    hover(item, monitor) {\n      const dragLine = item.line;\n      const hoverLine = line;\n      const dragOffset = monitor.getClientOffset();\n      onDragLine(dragLine, hoverLine, dragOffset);\n    }\n  });\n  const lineRef = dropRef(previewRef(useRef()));\n  // const anchorRef = dragRef(useRef());\n\n  // line style\n  const paddingLeft = line.getDepth() * 60 + 18;\n  const lineStyle = {\n    paddingLeft: `${paddingLeft}px`,\n    opacity\n  };\n\n  return (\n    <ButtonIndicator buttonId={line.id}>\n      <div\n        id={`oobceditor_line-${line.id}`}\n        className={`oobceditor_line${\n          isCurrent ? \" oobceditor_line-current\" : \"\"\n        }${disabled ? \" oobceditor_line-disabled\" : \"\"}`}\n        ref={lineRef}\n        style={lineStyle}\n        onClick={e => {\n          if (e.preventDefault) e.preventDefault();\n          if (e.stopPropagation) e.stopPropagation();\n          onClickLine(line);\n        }}\n        onContextMenu={e => {\n          if (e.preventDefault) e.preventDefault();\n          // if (e.stopPropagation) e.stopPropagation();\n          onRightClickLine(line, e);\n        }}\n      >\n        {/* ribbon */}\n        <div className=\"oobceditor_line_ribbon\" />\n        {/* dnd anchor */}\n        {/* <img\n        className=\"oobceditor_line_anchor\"\n        src={isCurrent ? anchorDefault : anchorTouched}\n        ref={anchorRef}\n        alt=\"anchor\"\n      /> */}\n        {/* blocks */}\n        <div className=\"oobceditor_line_blocks\">{children}</div>\n        {hasCallback && (\n          <div\n            className={`oobceditor_line_fold${\n              line.folded ? \" oobceditor_line_fold-folded\" : \"\"\n            }`}\n            onClick={e => {\n              if (e.preventDefault) e.preventDefault();\n              if (e.stopPropagation) e.stopPropagation();\n              onClickFoldLine(line);\n            }}\n          >\n            <img src={foldImg} alt=\"fold\" />\n          </div>\n        )}\n      </div>\n    </ButtonIndicator>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}