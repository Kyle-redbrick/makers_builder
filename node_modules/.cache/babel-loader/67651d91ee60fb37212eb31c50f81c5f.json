{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/DreamEditor/Editor/TemplateEditor/SlideField/index.js\";\nimport React, { Component } from \"react\";\nimport DreamSlide from \"../../../../../Common/Component/DreamSlide\";\nimport Field from \"../../Field\";\nimport \"./index.scss\";\n\nvar SlideField =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SlideField, _Component);\n\n  function SlideField(props) {\n    var _this;\n\n    _classCallCheck(this, SlideField);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SlideField).call(this, props));\n\n    _this.onChange = function (_, editor) {\n      var code = editor.getValue();\n\n      if (_this.props.onChange) {\n        _this.props.onChange(code, _this.props.id);\n      }\n    };\n\n    _this.forceRerenderSlide = function () {\n      _this.setState({\n        shouldRerender: true\n      }, function () {\n        _this.setState({\n          shouldRerender: false\n        });\n      });\n    };\n\n    _this.editorId = \"slide_editor\";\n    _this.state = {\n      shouldRerender: false\n    };\n    return _this;\n  }\n\n  _createClass(SlideField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupEditor();\n      this.setCode(this.props.value);\n      setTimeout(this.forceRerenderSlide, 1000);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.value !== this.props.value) {\n        this.setCode(this.props.value);\n      }\n    }\n  }, {\n    key: \"setupEditor\",\n    value: function setupEditor() {\n      this.editor = window.ace.edit(this.editorId, {\n        wrap: true\n      });\n      this.editor.setFontSize(18);\n      this.editor.on(\"change\", this.onChange);\n    }\n  }, {\n    key: \"setCode\",\n    value: function setCode(code) {\n      if (!this.editor) return;\n\n      if (code !== this.editor.getValue()) {\n        this.editor.setValue(code || \"\", 1);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Field.Base, Object.assign({}, this.props, {\n        type: \"slide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"slide_viewer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(DreamSlide, {\n        markdown: this.props.value,\n        shouldRerender: this.state.shouldRerender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: this.editorId,\n        className: \"slide_editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SlideField;\n}(Component);\n\nexport default SlideField;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/DreamEditor/Editor/TemplateEditor/SlideField/index.js"],"names":["React","Component","DreamSlide","Field","SlideField","props","onChange","_","editor","code","getValue","id","forceRerenderSlide","setState","shouldRerender","editorId","state","setupEditor","setCode","value","setTimeout","prevProps","window","ace","edit","wrap","setFontSize","on","setValue"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,4CAAvB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAO,cAAP;;IAEMC,U;;;;;AACJ,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oFAAMA,KAAN;;AADiB,UA4BnBC,QA5BmB,GA4BR,UAACC,CAAD,EAAIC,MAAJ,EAAe;AACxB,UAAMC,IAAI,GAAGD,MAAM,CAACE,QAAP,EAAb;;AACA,UAAI,MAAKL,KAAL,CAAWC,QAAf,EAAyB;AACvB,cAAKD,KAAL,CAAWC,QAAX,CAAoBG,IAApB,EAA0B,MAAKJ,KAAL,CAAWM,EAArC;AACD;AACF,KAjCkB;;AAAA,UAmCnBC,kBAnCmB,GAmCE,YAAM;AACzB,YAAKC,QAAL,CAAc;AAAEC,QAAAA,cAAc,EAAE;AAAlB,OAAd,EAAwC,YAAM;AAC5C,cAAKD,QAAL,CAAc;AAAEC,UAAAA,cAAc,EAAE;AAAlB,SAAd;AACD,OAFD;AAGD,KAvCkB;;AAEjB,UAAKC,QAAL,GAAgB,cAAhB;AACA,UAAKC,KAAL,GAAa;AAAEF,MAAAA,cAAc,EAAE;AAAlB,KAAb;AAHiB;AAIlB;;;;wCACmB;AAClB,WAAKG,WAAL;AACA,WAAKC,OAAL,CAAa,KAAKb,KAAL,CAAWc,KAAxB;AACAC,MAAAA,UAAU,CAAC,KAAKR,kBAAN,EAA0B,IAA1B,CAAV;AACD;;;uCACkBS,S,EAAW;AAC5B,UAAIA,SAAS,CAACF,KAAV,KAAoB,KAAKd,KAAL,CAAWc,KAAnC,EAA0C;AACxC,aAAKD,OAAL,CAAa,KAAKb,KAAL,CAAWc,KAAxB;AACD;AACF;;;kCAEa;AACZ,WAAKX,MAAL,GAAcc,MAAM,CAACC,GAAP,CAAWC,IAAX,CAAgB,KAAKT,QAArB,EAA+B;AAAEU,QAAAA,IAAI,EAAE;AAAR,OAA/B,CAAd;AACA,WAAKjB,MAAL,CAAYkB,WAAZ,CAAwB,EAAxB;AACA,WAAKlB,MAAL,CAAYmB,EAAZ,CAAe,QAAf,EAAyB,KAAKrB,QAA9B;AACD;;;4BACOG,I,EAAM;AACZ,UAAI,CAAC,KAAKD,MAAV,EAAkB;;AAElB,UAAIC,IAAI,KAAK,KAAKD,MAAL,CAAYE,QAAZ,EAAb,EAAqC;AACnC,aAAKF,MAAL,CAAYoB,QAAZ,CAAqBnB,IAAI,IAAI,EAA7B,EAAiC,CAAjC;AACD;AACF;;;6BAcQ;AACP,aACE,oBAAC,KAAD,CAAO,IAAP,oBAAgB,KAAKJ,KAArB;AAA4B,QAAA,IAAI,EAAC,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,QAAQ,EAAE,KAAKA,KAAL,CAAWc,KAAjC;AAAwC,QAAA,cAAc,EAAE,KAAKH,KAAL,CAAWF,cAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE;AAAK,QAAA,EAAE,EAAE,KAAKC,QAAd;AAAwB,QAAA,SAAS,EAAC,cAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF;AAQD;;;;EAnDsBd,S;;AAsDzB,eAAeG,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport DreamSlide from \"../../../../../Common/Component/DreamSlide\";\nimport Field from \"../../Field\";\nimport \"./index.scss\";\n\nclass SlideField extends Component {\n  constructor(props) {\n    super(props);\n    this.editorId = \"slide_editor\";\n    this.state = { shouldRerender: false };\n  }\n  componentDidMount() {\n    this.setupEditor();\n    this.setCode(this.props.value);\n    setTimeout(this.forceRerenderSlide, 1000);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.value !== this.props.value) {\n      this.setCode(this.props.value);\n    }\n  }\n\n  setupEditor() {\n    this.editor = window.ace.edit(this.editorId, { wrap: true });\n    this.editor.setFontSize(18);\n    this.editor.on(\"change\", this.onChange);\n  }\n  setCode(code) {\n    if (!this.editor) return;\n\n    if (code !== this.editor.getValue()) {\n      this.editor.setValue(code || \"\", 1);\n    }\n  }\n  onChange = (_, editor) => {\n    const code = editor.getValue();\n    if (this.props.onChange) {\n      this.props.onChange(code, this.props.id);\n    }\n  };\n\n  forceRerenderSlide = () => {\n    this.setState({ shouldRerender: true }, () => {\n      this.setState({ shouldRerender: false });\n    });\n  }\n\n  render() {\n    return (\n      <Field.Base {...this.props} type=\"slide\">\n        <div className=\"slide_viewer\">\n          <DreamSlide markdown={this.props.value} shouldRerender={this.state.shouldRerender}/>\n        </div>\n        <div id={this.editorId} className=\"slide_editor\" />\n      </Field.Base>\n    );\n  }\n}\n\nexport default SlideField;\n"]},"metadata":{},"sourceType":"module"}