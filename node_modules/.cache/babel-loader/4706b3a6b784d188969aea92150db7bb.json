{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder3D/Component/CameraView/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport RndWrapper from \"../RndProvider/RndWrapper\";\nimport View from \"./View\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      currentCamera: null\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onChangeCurrentGameObject();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.currentGameObject !== this.props.currentGameObject) {\n        this.onChangeCurrentGameObject();\n      }\n    }\n  }, {\n    key: \"onChangeCurrentGameObject\",\n    value: function onChangeCurrentGameObject() {\n      var currentGameObject = this.props.currentGameObject;\n      var GAMEOBJECT = window.BabylonConstant.GAMEOBJECT;\n\n      if (currentGameObject && currentGameObject.type === GAMEOBJECT.CAMERA) {\n        this.setState({\n          currentCamera: currentGameObject\n        });\n      } else {\n        this.setState({\n          currentCamera: null\n        });\n      }\n    }\n  }, {\n    key: \"getRndWrapperConfig\",\n    value: function getRndWrapperConfig() {\n      var rndProvider = document.getElementById(\"rndProvider\");\n      var providerWidth = rndProvider ? rndProvider.offsetWidth : window.innerWidth;\n      var providerHeight = rndProvider ? rndProvider.offsetHeight : window.innerHeight;\n      var lockAspectRatio = 16 / 9;\n      var lockAspectRatioExtraHeight = 36;\n      var defaultWidth = 300;\n      var defaultHeight = defaultWidth / lockAspectRatio + lockAspectRatioExtraHeight;\n      var defaultX = (providerWidth - defaultWidth) / 2;\n      var defaultY = (providerHeight - defaultHeight) / 2;\n      var minWidth = 240;\n      var maxWidth = 420;\n      return {\n        defaultX: defaultX,\n        defaultY: defaultY,\n        defaultWidth: defaultWidth,\n        defaultHeight: defaultHeight,\n        minWidth: minWidth,\n        maxWidth: maxWidth,\n        lockAspectRatio: lockAspectRatio,\n        lockAspectRatioExtraHeight: lockAspectRatioExtraHeight\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          rndId = _this$props.rndId,\n          rndOrder = _this$props.rndOrder,\n          bringRndToTop = _this$props.bringRndToTop,\n          isCameraViewOn = _this$props.isCameraViewOn;\n      var currentCamera = this.state.currentCamera;\n      var cameraName = currentCamera ? currentCamera.name : \"\";\n      return isCameraViewOn ? React.createElement(RndWrapper, Object.assign({\n        rndId: rndId,\n        rndOrder: rndOrder,\n        bringRndToTop: bringRndToTop\n      }, this.getRndWrapperConfig(), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(View, {\n        cameraName: cameraName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })) : React.createElement(React.Fragment, null);\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  var scenes = state.game.scenes;\n  var isCameraViewOn = state.builder.isCameraViewOn;\n  var _state$interaction = state.interaction,\n      currentSceneId = _state$interaction.currentSceneId,\n      currentGameObjectIds = _state$interaction.currentGameObjectIds;\n  var currentScene = currentSceneId && scenes[currentSceneId];\n  var currentGameObjectId = currentGameObjectIds[currentSceneId];\n  var currentGameObject = currentScene && currentScene.gameObjects[currentGameObjectId];\n  return {\n    isCameraViewOn: isCameraViewOn,\n    currentGameObject: currentGameObject\n  };\n})(Container);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder3D/Component/CameraView/Container.js"],"names":["React","Component","connect","RndWrapper","View","Container","props","state","currentCamera","onChangeCurrentGameObject","prevProps","currentGameObject","GAMEOBJECT","window","BabylonConstant","type","CAMERA","setState","rndProvider","document","getElementById","providerWidth","offsetWidth","innerWidth","providerHeight","offsetHeight","innerHeight","lockAspectRatio","lockAspectRatioExtraHeight","defaultWidth","defaultHeight","defaultX","defaultY","minWidth","maxWidth","rndId","rndOrder","bringRndToTop","isCameraViewOn","cameraName","name","getRndWrapperConfig","scenes","game","builder","interaction","currentSceneId","currentGameObjectIds","currentScene","currentGameObjectId","gameObjects"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport RndWrapper from \"../RndProvider/RndWrapper\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { currentCamera: null };\n  }\n  componentDidMount() {\n    this.onChangeCurrentGameObject();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.currentGameObject !== this.props.currentGameObject) {\n      this.onChangeCurrentGameObject();\n    }\n  }\n  onChangeCurrentGameObject() {\n    const { currentGameObject } = this.props;\n    const { GAMEOBJECT } = window.BabylonConstant;\n    if (currentGameObject && currentGameObject.type === GAMEOBJECT.CAMERA) {\n      this.setState({ currentCamera: currentGameObject });\n    } else {\n      this.setState({ currentCamera: null });\n    }\n  }\n\n  getRndWrapperConfig() {\n    const rndProvider = document.getElementById(\"rndProvider\");\n    const providerWidth = rndProvider\n      ? rndProvider.offsetWidth\n      : window.innerWidth;\n    const providerHeight = rndProvider\n      ? rndProvider.offsetHeight\n      : window.innerHeight;\n    const lockAspectRatio = 16 / 9;\n    const lockAspectRatioExtraHeight = 36;\n    const defaultWidth = 300;\n    const defaultHeight =\n      defaultWidth / lockAspectRatio + lockAspectRatioExtraHeight;\n    const defaultX = (providerWidth - defaultWidth) / 2;\n    const defaultY = (providerHeight - defaultHeight) / 2;\n    const minWidth = 240;\n    const maxWidth = 420;\n    return {\n      defaultX,\n      defaultY,\n      defaultWidth,\n      defaultHeight,\n      minWidth,\n      maxWidth,\n      lockAspectRatio,\n      lockAspectRatioExtraHeight\n    };\n  }\n\n  render() {\n    const { rndId, rndOrder, bringRndToTop, isCameraViewOn } = this.props;\n    const { currentCamera } = this.state;\n    const cameraName = currentCamera ? currentCamera.name : \"\";\n    return isCameraViewOn ? (\n      <RndWrapper\n        rndId={rndId}\n        rndOrder={rndOrder}\n        bringRndToTop={bringRndToTop}\n        {...this.getRndWrapperConfig()}\n      >\n        <View cameraName={cameraName} />\n      </RndWrapper>\n    ) : (\n      <></>\n    );\n  }\n}\n\nexport default connect(state => {\n  const { scenes } = state.game;\n  const { isCameraViewOn } = state.builder;\n  const { currentSceneId, currentGameObjectIds } = state.interaction;\n  const currentScene = currentSceneId && scenes[currentSceneId];\n  const currentGameObjectId = currentGameObjectIds[currentSceneId];\n  const currentGameObject =\n    currentScene && currentScene.gameObjects[currentGameObjectId];\n  return { isCameraViewOn, currentGameObject };\n})(Container);\n"]},"metadata":{},"sourceType":"module"}