{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/DreamEditor/Editor/LectureEditor/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport Field from \"../Field\";\nimport \"./index.scss\";\n\nfunction LectureEditor(props) {\n  var lectureId = props.lectureId;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      lecture = _useState2[0],\n      setLecture = _useState2[1];\n\n  useEffect(function () {\n    request.getDreamLecture(lectureId).then(function (res) {\n      return res.json();\n    }).then(setLecture);\n  }, [lectureId]);\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      title = _useState4[0],\n      setTitle = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      introduction = _useState6[0],\n      setIntroduction = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      level = _useState8[0],\n      setLevel = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      number = _useState10[0],\n      setNumber = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      heroURL = _useState12[0],\n      setHeroURL = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      v_thumbnailURL = _useState14[0],\n      setVThumbnailURL = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      h_thumbnailURL = _useState16[0],\n      setHThumbnailURL = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isHidden = _useState18[0],\n      setIsHidden = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isLive = _useState20[0],\n      setIsLive = _useState20[1];\n\n  useEffect(function () {\n    if (lecture) {\n      setLevel(lecture.level || \"\");\n      setNumber(lecture.number || 0);\n      setIsHidden(lecture.isHidden || false);\n      setIsLive(lecture.isLive || false);\n      setTitle(lecture.localized[0] ? lecture.localized[0].title : \"\");\n      setIntroduction(lecture.localized[0] ? lecture.localized[0].introduction : \"\");\n      setHeroURL(lecture.localized[0] ? lecture.localized[0].heroURL : \"\");\n      setVThumbnailURL(lecture.localized[0] ? lecture.localized[0].v_thumbnailURL : \"\");\n      setHThumbnailURL(lecture.localized[0] ? lecture.localized[0].h_thumbnailURL : \"\");\n    }\n  }, [lecture]);\n\n  var onClickSave = function onClickSave() {\n    var updateValues = getUpdateValues();\n    request.updateDreamLecture(lectureId, updateValues).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      if (json.success) {\n        setLecture(_objectSpread({}, lecture, updateValues, {\n          localized: [lecture.localized[0] ? _objectSpread({}, lecture.localized[0], updateValues.localized) : updateValues.localized]\n        }));\n        alert(\"저장되었습니다 :)\");\n      } else {\n        throw json;\n      }\n    }).catch(function (err) {\n      console.error(err);\n      alert(JSON.stringify(err));\n    });\n  };\n\n  var getUpdateValues = function getUpdateValues() {\n    var updateValues = {\n      localized: getUpdateLocalizedValues()\n    };\n    var values = {\n      level: level,\n      number: parseInt(number),\n      isHidden: isHidden,\n      isLive: isLive\n    };\n\n    for (var key in values) {\n      if (values[key] !== lecture[key]) {\n        updateValues[key] = values[key];\n      }\n    }\n\n    return updateValues;\n  };\n\n  var getUpdateLocalizedValues = function getUpdateLocalizedValues() {\n    var origin = lecture.localized[0];\n    var values = {\n      title: title,\n      introduction: introduction,\n      heroURL: heroURL,\n      v_thumbnailURL: v_thumbnailURL,\n      h_thumbnailURL: h_thumbnailURL\n    };\n\n    if (origin) {\n      var updateValues = {};\n\n      for (var key in values) {\n        if (values[key] !== lecture.localized[0][key]) {\n          updateValues[key] = values[key];\n        }\n      }\n\n      return updateValues;\n    } else {\n      return values;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dreamEditor_editor dreamEditor_editor-lecture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dreamEditor_editor_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dreamEditor_editor_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, \"\\uAC15\\uC758 \\uC218\\uC815\\uD558\\uAE30\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"dreamEditor_editor_saveBtn\",\n    onClick: onClickSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"\\uC800\\uC7A5\\uD558\\uAE30\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dreamEditor_editor_fields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Field.Input, {\n    id: \"title\",\n    title: \"\\uAC15\\uC758 \\uC81C\\uBAA9\",\n    value: title,\n    onChange: setTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.Textarea, {\n    id: \"introduction\",\n    title: \"\\uAC15\\uC758 \\uC18C\\uAC1C\",\n    value: introduction,\n    onChange: setIntroduction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.Select, {\n    id: \"level\",\n    title: \"\\uAC15\\uC758 \\uB09C\\uC774\\uB3C4\",\n    value: level,\n    options: [{\n      value: \"easy\",\n      label: \"초급\"\n    }, {\n      value: \"normal\",\n      label: \"중급\"\n    }, {\n      value: \"hard\",\n      label: \"고급\"\n    }],\n    onChange: setLevel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.Input, {\n    id: \"number\",\n    type: \"number\",\n    title: \"\\uAC15\\uC758 \\uC21C\\uC11C\",\n    value: number,\n    onChange: setNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.File, {\n    id: \"heroURL\",\n    title: \"\\uBA54\\uC778 \\uBC30\\uB108\",\n    value: heroURL,\n    onChange: setHeroURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.File, {\n    id: \"v_thumbnailURL\",\n    title: \"\\uC138\\uB85C \\uC378\\uB124\\uC77C\",\n    value: v_thumbnailURL,\n    onChange: setVThumbnailURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.File, {\n    id: \"h_thumbnailURL\",\n    title: \"\\uAC00\\uB85C \\uC378\\uB124\\uC77C\",\n    value: h_thumbnailURL,\n    onChange: setHThumbnailURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.OnOff, {\n    id: \"isHidden\",\n    title: \"\\uCF58\\uD150\\uCE20 \\uACF5\\uAC1C\",\n    value: !isHidden,\n    onChange: function onChange(value) {\n      setIsHidden(!value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Field.OnOff, {\n    id: \"isLive\",\n    title: \"\\uCF58\\uD150\\uCE20 \\uC774\\uC6A9\\uAC00\\uB2A5\",\n    value: isLive,\n    onChange: setIsLive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default LectureEditor;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/DreamEditor/Editor/LectureEditor/index.js"],"names":["React","useEffect","useState","request","Field","LectureEditor","props","lectureId","lecture","setLecture","getDreamLecture","then","res","json","title","setTitle","introduction","setIntroduction","level","setLevel","number","setNumber","heroURL","setHeroURL","v_thumbnailURL","setVThumbnailURL","h_thumbnailURL","setHThumbnailURL","isHidden","setIsHidden","isLive","setIsLive","localized","onClickSave","updateValues","getUpdateValues","updateDreamLecture","success","alert","catch","err","console","error","JSON","stringify","getUpdateLocalizedValues","values","parseInt","key","origin","value","label"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport Field from \"../Field\";\nimport \"./index.scss\";\n\nfunction LectureEditor(props) {\n  const { lectureId } = props;\n  const [lecture, setLecture] = useState(null);\n  useEffect(\n    () => {\n      request\n        .getDreamLecture(lectureId)\n        .then(res => res.json())\n        .then(setLecture);\n    },\n    [lectureId]\n  );\n\n  const [title, setTitle] = useState(\"\");\n  const [introduction, setIntroduction] = useState(\"\");\n  const [level, setLevel] = useState(\"\");\n  const [number, setNumber] = useState(0);\n  const [heroURL, setHeroURL] = useState(\"\");\n  const [v_thumbnailURL, setVThumbnailURL] = useState(\"\");\n  const [h_thumbnailURL, setHThumbnailURL] = useState(\"\");\n  const [isHidden, setIsHidden] = useState(false);\n  const [isLive, setIsLive] = useState(false);\n  useEffect(\n    () => {\n      if (lecture) {\n        setLevel(lecture.level || \"\");\n        setNumber(lecture.number || 0);\n        setIsHidden(lecture.isHidden || false);\n        setIsLive(lecture.isLive || false);\n        \n        setTitle(\n          lecture.localized[0]\n          ? lecture.localized[0].title\n          : \"\"\n        );\n        setIntroduction(\n          lecture.localized[0]\n          ? lecture.localized[0].introduction\n          : \"\"\n        );\n        setHeroURL(\n          lecture.localized[0]\n          ? lecture.localized[0].heroURL\n          : \"\"\n        );\n        setVThumbnailURL(\n          lecture.localized[0]\n          ? lecture.localized[0].v_thumbnailURL\n          : \"\"\n        );\n        setHThumbnailURL(\n          lecture.localized[0]\n          ? lecture.localized[0].h_thumbnailURL\n          : \"\"\n        );\n      }\n    },\n    [lecture]\n  );\n\n  const onClickSave = () => {\n    const updateValues = getUpdateValues();\n    request\n      .updateDreamLecture(lectureId, updateValues)\n      .then(res => res.json())\n      .then(json => {\n        if (json.success) {\n          setLecture({\n            ...lecture,\n            ...updateValues,\n            localized: [\n              lecture.localized[0]\n              ? { ...lecture.localized[0], ...updateValues.localized }\n              : updateValues.localized\n            ]\n          });\n          alert(\"저장되었습니다 :)\");\n        } else {\n          throw json;\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        alert(JSON.stringify(err));\n      });\n  };\n  const getUpdateValues = () => {\n    const updateValues = {\n      localized: getUpdateLocalizedValues()\n    };\n    const values = {\n      level,\n      number: parseInt(number),\n      isHidden,\n      isLive\n    };\n    for (let key in values) {\n      if (values[key] !== lecture[key]) {\n        updateValues[key] = values[key];\n      }\n    }\n    return updateValues;\n  };\n  const getUpdateLocalizedValues = () => {\n    const origin = lecture.localized[0]\n    const values = {\n      title,\n      introduction,\n      heroURL,\n      v_thumbnailURL,\n      h_thumbnailURL\n    };\n    if(origin) {\n      const updateValues = {};\n      for (let key in values) {\n        if (values[key] !== lecture.localized[0][key]) {\n          updateValues[key] = values[key];\n        }\n      }\n      return updateValues;\n    } else {\n      return values;\n    }\n  }\n\n  return (\n    <div className=\"dreamEditor_editor dreamEditor_editor-lecture\">\n      <div className=\"dreamEditor_editor_header\">\n        <div className=\"dreamEditor_editor_title\">강의 수정하기</div>\n        <button className=\"dreamEditor_editor_saveBtn\" onClick={onClickSave}>\n          저장하기\n        </button>\n      </div>\n      <div className=\"dreamEditor_editor_fields\">\n        <Field.Input\n          id=\"title\"\n          title=\"강의 제목\"\n          value={title}\n          onChange={setTitle}\n        />\n        <Field.Textarea\n          id=\"introduction\"\n          title=\"강의 소개\"\n          value={introduction}\n          onChange={setIntroduction}\n        />\n        <Field.Select\n          id=\"level\"\n          title=\"강의 난이도\"\n          value={level}\n          options={[\n            { value: \"easy\", label: \"초급\" },\n            { value: \"normal\", label: \"중급\" },\n            { value: \"hard\", label: \"고급\" }\n          ]}\n          onChange={setLevel}\n        />\n        <Field.Input\n          id=\"number\"\n          type=\"number\"\n          title=\"강의 순서\"\n          value={number}\n          onChange={setNumber}\n        />\n        <Field.File\n          id=\"heroURL\"\n          title=\"메인 배너\"\n          value={heroURL}\n          onChange={setHeroURL}\n        />\n        <Field.File\n          id=\"v_thumbnailURL\"\n          title=\"세로 썸네일\"\n          value={v_thumbnailURL}\n          onChange={setVThumbnailURL}\n        />\n        <Field.File\n          id=\"h_thumbnailURL\"\n          title=\"가로 썸네일\"\n          value={h_thumbnailURL}\n          onChange={setHThumbnailURL}\n        />\n        <Field.OnOff\n          id=\"isHidden\"\n          title=\"콘텐츠 공개\"\n          value={!isHidden}\n          onChange={value => {\n            setIsHidden(!value);\n          }}\n        />\n        <Field.OnOff\n          id=\"isLive\"\n          title=\"콘텐츠 이용가능\"\n          value={isLive}\n          onChange={setIsLive}\n        />\n      </div>\n    </div>\n  );\n}\nexport default LectureEditor;\n"]},"metadata":{},"sourceType":"module"}