{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/OCP/Subpage/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport Print from \"../../../Common/Component/OCPCertification\";\nimport * as action from \"../../../Common/Store/Reducer/UserInfo\"; // import eventImg from \"../../../Image/event5_popup.png\";\n\nimport lv1Thumb from \"../../../Image/thumb_lv1.png\";\nimport lv2Thumb from \"../../../Image/thumb_lv2.png\";\nimport lv3Thumb from \"../../../Image/thumb_lv3.png\";\nimport lv1desc from \"../../../Image/dsc_lv1.png\";\nimport lv2desc from \"../../../Image/dsc_lv2.png\";\nimport lv3desc from \"../../../Image/dsc_lv3.png\";\nimport SignUp from \"../../../Common/Component/SignUp\";\nimport { resetOcpToken } from \"../../../Common/Util/OcpToken\";\nimport { detectIE } from \"../../../Common/Util/detectBrowser\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.grade = _this.props.match.params.grade;\n              /** get ocp list info */\n\n              _context.next = 3;\n              return _this.getOCPList();\n\n            case 3:\n              _context.next = 5;\n              return _this.getMyOcp();\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.componentDidUpdate = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps, prevState) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(_this.props.userinfo.email && !prevProps.userinfo.email)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 3;\n                return _this.getMyOcp();\n\n              case 3:\n                _context2.next = 8;\n                break;\n\n              case 5:\n                if (!(!_this.props.userinfo.email && prevProps.userinfo.email)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 8;\n                return _this.getMyOcp();\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.getOCPList = function () {\n      var arr = [];\n\n      for (var i = 1; i <= 10; i++) {\n        var title = require(\"../../Builder/utils/ocp/\".concat(_this.grade, \"/stages/\").concat(i)).data.title;\n\n        var img = require(\"../../Builder/utils/ocp/\".concat(_this.grade, \"/stages/\").concat(i)).data.image;\n\n        arr.push({\n          title: title,\n          level: i,\n          img: img\n        });\n      }\n\n      _this.setState({\n        OCP: arr\n      });\n    };\n\n    _this.getMyOcp = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, json, data;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(_this.props.userinfo.email || _this.guest)) {\n                _context3.next = 10;\n                break;\n              }\n\n              _context3.next = 3;\n              return request.getMyOcp(_this.props.userinfo.email ? {\n                email: _this.props.userinfo.email\n              } : {\n                guestId: _this.guest && _this.guest.id\n              });\n\n            case 3:\n              res = _context3.sent;\n              _context3.next = 6;\n              return res.json();\n\n            case 6:\n              json = _context3.sent;\n\n              if (json) {\n                data = {};\n                json.forEach(function (element) {\n                  data[element.grade] = element.level;\n                });\n\n                _this.setState({\n                  myLevel: data[_this.grade]\n                });\n\n                if (!data[_this.grade]) {\n                  _this.setState({\n                    myLevel: 0\n                  });\n                }\n              } else {\n                _this.setState({\n                  myLevel: 0\n                });\n              }\n\n              _context3.next = 11;\n              break;\n\n            case 10:\n              _this.setState({\n                myLevel: 0\n              });\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.onClickItem = function (level) {\n      if (_this.isIE) {\n        showPopUp(React.createElement(Popup.TwoButton, {\n          title: \"\\uC774\\uC6A9\\uC548\\uB0B4\",\n          subtitle: \"\\uBCF8 \\uD398\\uC774\\uC9C0\\uB294 \\uD06C\\uB86C\\uC5D0\\uC11C\\uB9CC \\uC815\\uC0C1 \\uB3D9\\uC791\\uD569\\uB2C8\\uB2E4\",\n          confirmButtonName: \"\\uD06C\\uB86C \\uC124\\uCE58\\uD558\\uAE30\",\n          cancelButtonName: \"\\uCDE8\\uC18C\",\n          confirmAction: function confirmAction() {\n            window.open(\"https://www.google.com/intl/ko/chrome/\", \"_blank\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n        return;\n      }\n\n      var myLevel = _this.state.myLevel; // if (window.screen.width <= 1080) {\n      //   showPopUp(\n      //     <Popup.OneButton\n      //       title={this.props.intl.formatMessage({\n      //         id: \"ID_LEARN_POPUP_MOBILE_TITLE\"\n      //       })}\n      //       buttonName={this.props.intl.formatMessage({\n      //         id: \"ID_LEARN_POPUP_MOBILE_BUTTON\"\n      //       })}\n      //     />,\n      //     { darkmode: true, mobileFullscreen: true }\n      //   );\n      //   return;\n      // }\n\n      if (level <= myLevel + 1) {\n        var builder = window.open(\"/ocp/\".concat(_this.grade, \"/\").concat(level), \"_blank\");\n        builder.focus();\n      } else {\n        showPopUp(React.createElement(Popup.OneButton, {\n          title: _this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE\"\n          }),\n          buttonName: _this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE_BUTTON\"\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n      }\n    };\n\n    _this.handleReset = function () {\n      showPopUp(React.createElement(Popup.TwoButton, {\n        title: \"\\uBBF8\\uC158 \\uC0C8\\uB85C \\uC2DC\\uC791\\uD558\\uAE30\",\n        subtitle: \"\\uC644\\uC218\\uB41C \\uBBF8\\uC158\\uC774 \\uBAA8\\uB450 \\uCD08\\uAE30\\uD654\\uB418\\uBA70,\\n\\uCD08\\uAE30\\uD654 \\uD6C4\\uC5D0\\uB294 \\uBCF5\\uAD6C\\uAC00 \\uBD88\\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\\n\\uCC98\\uC74C\\uBD80\\uD130 \\uB2E4\\uC2DC \\uC2DC\\uC791\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n        cancelButtonName: \"\\uC544\\uB2C8\\uC694\",\n        confirmButtonName: \"\\uC0C8\\uB85C \\uC2DC\\uC791\",\n        confirmAction: function confirmAction() {\n          resetOcpToken();\n          window.location.reload();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), {\n        darkmode: true,\n        dismissButton: false\n      });\n    };\n\n    _this.handleCertification = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var name, organization, res, guest, callback;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(_this.state.myLevel < 10)) {\n                _context4.next = 3;\n                break;\n              }\n\n              showPopUp(React.createElement(Popup.OneButton, {\n                title: \"\\uC54C\\uB9BC\",\n                subtitle: \"10\\uB2E8\\uACC4\\uAE4C\\uC9C0 \\uC644\\uB8CC\\uD574\\uC8FC\\uC138\\uC694.\",\n                buttonName: \"\\uD655\\uC778\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 181\n                },\n                __self: this\n              }), {\n                darkmode: true\n              });\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              if (!_this.props.userinfo.email) {\n                _context4.next = 7;\n                break;\n              }\n\n              if (_this.props.userinfo.organization) {\n                name = _this.props.userinfo.name;\n                organization = _this.props.userinfo.organization;\n              } else {\n                showPopUp(React.createElement(Popup.OneInput, {\n                  title: \"\\uD559\\uAD50\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                  buttonName: \"\\uD655\\uC778\",\n                  inputLimit: 10,\n                  buttonAction: function buttonAction(org) {\n                    return callback(org);\n                  },\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 197\n                  },\n                  __self: this\n                }), {\n                  dismissOverlay: true,\n                  darkmode: false\n                });\n              }\n\n              _context4.next = 14;\n              break;\n\n            case 7:\n              _context4.next = 9;\n              return request.getOcpUser({\n                guestId: _this.guest && _this.guest.id\n              });\n\n            case 9:\n              res = _context4.sent;\n              _context4.next = 12;\n              return res.json();\n\n            case 12:\n              guest = _context4.sent;\n\n              if (guest) {\n                if (!(guest.name && guest.organization)) {\n                  showPopUp(React.createElement(Popup.TwoInput, {\n                    title: \"\\uD559\\uAD50\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                    buttonName: \"\\uD655\\uC778\",\n                    inputTitle1: \"\\uC774\\uB984\",\n                    inputTitle2: \"\\uD559\\uAD50\",\n                    inputLimit1: 4,\n                    inputLimit2: 10,\n                    buttonAction: function buttonAction(org, name) {\n                      return callback(org, name);\n                    },\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 214\n                    },\n                    __self: this\n                  }), {\n                    dismissOverlay: true,\n                    darkmode: false\n                  });\n                } else {\n                  name = guest.name;\n                  organization = guest.organization;\n                }\n              }\n\n            case 14:\n              if (name && organization) {\n                showPopUp(React.createElement(Print, {\n                  organization: organization.substring(0, 10),\n                  grade: _this.grade // name={name.substring(0, 4)}\n                  ,\n                  name: name,\n                  callback: _this.printCallback,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 234\n                  },\n                  __self: this\n                }));\n              }\n\n              callback = function callback(org) {\n                var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.props.userinfo.name;\n                showPopUp(React.createElement(Print, {\n                  organization: org,\n                  grade: _this.grade,\n                  name: name,\n                  callback: _this.printCallback,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 245\n                  },\n                  __self: this\n                }));\n                request.updateOcpUser({\n                  guestId: _this.guest && _this.guest.id,\n                  email: _this.props.userinfo.email,\n                  name: name,\n                  organization: org\n                });\n\n                _this.props.updateUserInfo();\n              };\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    _this.checkFocus = function () {\n      _this.guest = localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"));\n      window.addEventListener(\"focus\", function () {\n        _this.getMyOcp();\n      });\n    };\n\n    _this.handleSignup = function () {\n      showPopUp(React.createElement(SignUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), {\n        mobileFullscreen: true,\n        darkmode: true\n      });\n    };\n\n    _this.printCallback = function () {\n      request.updateMyOcpPrint(_this.props.userinfo.email ? {\n        email: _this.props.userinfo.email,\n        grade: _this.grade\n      } : {\n        guestId: _this.guest && _this.guest.id,\n        grade: _this.grade\n      });\n      if (_this.props.userinfo.email) return; // setTimeout(() => {\n      //   showPopUp(\n      //     <Popup.TwoButton\n      //       titleId=\"ID_CERT_POPUP_TITLE\"\n      //       cancelButtonNameId=\"ID_CERT_POPUP_CANCEL\"\n      //       confirmButtonNameId=\"ID_CERT_POPUP_SIGNUP\"\n      //       confirmAction={this.handleSignup}\n      //       content={\n      //         <div>\n      //           <img\n      //             style={{ width: \"100%\", marginTop: \"30px\" }}\n      //             src={eventImg}\n      //             alt=\"event\"\n      //           />\n      //         </div>\n      //       }\n      //     />,\n      //     {\n      //       darkmode: true\n      //     }\n      //   );\n      // }, 1000);\n    };\n\n    _this.state = {\n      OCP: [],\n      myLevel: undefined\n    };\n    _this.guest = localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"));\n    _this.grade = undefined;\n    _this.info = {\n      beginner: {\n        level: \"초급 퀘스트\",\n        desc: lv1desc,\n        thumb: lv1Thumb,\n        game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n      },\n      intermediate: {\n        level: \"중급 퀘스트\",\n        desc: lv2desc,\n        thumb: lv2Thumb,\n        game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/364d12bd-2af9-42e1-8eec-2005fbb063fa.html\"\n      },\n      advanced: {\n        level: \"고급 퀘스트\",\n        desc: lv3desc,\n        thumb: lv3Thumb,\n        game: \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n      }\n    };\n    _this.isIE = detectIE();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          OCP = _this$state.OCP,\n          myLevel = _this$state.myLevel;\n      var onClickItem = this.onClickItem,\n          grade = this.grade,\n          checkFocus = this.checkFocus,\n          handleCertification = this.handleCertification,\n          handleReset = this.handleReset,\n          info = this.info;\n      checkFocus();\n      return React.createElement(View, {\n        OCP: OCP,\n        onClickItem: onClickItem,\n        intl: this.props.intl,\n        info: info[grade],\n        myLevel: myLevel,\n        handleCertification: handleCertification,\n        handleReset: handleReset,\n        userId: this.props.userinfo.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {\n  updateUserInfo: action.updateUserInfo\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/OCP/Subpage/Container.js"],"names":["React","Component","connect","injectIntl","View","request","Popup","showPopUp","Print","action","lv1Thumb","lv2Thumb","lv3Thumb","lv1desc","lv2desc","lv3desc","SignUp","resetOcpToken","detectIE","Container","props","componentDidMount","grade","match","params","getOCPList","getMyOcp","componentDidUpdate","prevProps","prevState","userinfo","email","arr","i","title","require","data","img","image","push","level","setState","OCP","guest","guestId","id","res","json","forEach","element","myLevel","onClickItem","isIE","window","open","darkmode","mobileFullscreen","state","builder","focus","intl","formatMessage","handleReset","location","reload","dismissButton","handleCertification","organization","name","org","callback","dismissOverlay","getOcpUser","substring","printCallback","updateOcpUser","updateUserInfo","checkFocus","localStorage","getItem","JSON","parse","addEventListener","handleSignup","updateMyOcpPrint","undefined","info","beginner","desc","thumb","game","intermediate","advanced"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport Print from \"../../../Common/Component/OCPCertification\";\nimport * as action from \"../../../Common/Store/Reducer/UserInfo\";\n// import eventImg from \"../../../Image/event5_popup.png\";\nimport lv1Thumb from \"../../../Image/thumb_lv1.png\";\nimport lv2Thumb from \"../../../Image/thumb_lv2.png\";\nimport lv3Thumb from \"../../../Image/thumb_lv3.png\";\nimport lv1desc from \"../../../Image/dsc_lv1.png\";\nimport lv2desc from \"../../../Image/dsc_lv2.png\";\nimport lv3desc from \"../../../Image/dsc_lv3.png\";\nimport SignUp from \"../../../Common/Component/SignUp\";\nimport { resetOcpToken } from \"../../../Common/Util/OcpToken\";\nimport { detectIE } from \"../../../Common/Util/detectBrowser\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      OCP: [],\n      myLevel: undefined\n    };\n    this.guest =\n      localStorage.getItem(\"ocpId\") &&\n      JSON.parse(localStorage.getItem(\"ocpId\"));\n    this.grade = undefined;\n\n    this.info = {\n      beginner: {\n        level: \"초급 퀘스트\",\n        desc: lv1desc,\n        thumb: lv1Thumb,\n        game:\n          \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/5ae60ab3-f5ae-4084-93ee-a59be680f184.html\"\n      },\n      intermediate: {\n        level: \"중급 퀘스트\",\n        desc: lv2desc,\n        thumb: lv2Thumb,\n        game:\n          \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/364d12bd-2af9-42e1-8eec-2005fbb063fa.html\"\n      },\n      advanced: {\n        level: \"고급 퀘스트\",\n        desc: lv3desc,\n        thumb: lv3Thumb,\n        game:\n          \"https://wizschool-published.s3.ap-northeast-2.amazonaws.com/d858e0f6-85fc-4d53-b4e4-19b35090bbe7.html\"\n      }\n    };\n    this.isIE = detectIE();\n  }\n  componentDidMount = async () => {\n    this.grade = this.props.match.params.grade;\n    /** get ocp list info */\n    await this.getOCPList();\n    /** check my step  */\n    await this.getMyOcp();\n  };\n\n  componentDidUpdate = async (prevProps, prevState) => {\n    if (this.props.userinfo.email && !prevProps.userinfo.email) {\n      await this.getMyOcp();\n    } else if (!this.props.userinfo.email && prevProps.userinfo.email) {\n      //로그아웃했을때\n      await this.getMyOcp();\n    }\n  };\n\n  getOCPList = () => {\n    let arr = [];\n    for (let i = 1; i <= 10; i++) {\n      const title = require(`../../Builder/utils/ocp/${this.grade}/stages/${i}`)\n        .data.title;\n      const img = require(`../../Builder/utils/ocp/${this.grade}/stages/${i}`)\n        .data.image;\n      arr.push({ title, level: i, img });\n    }\n    this.setState({ OCP: arr });\n  };\n  getMyOcp = async () => {\n    if (this.props.userinfo.email || this.guest) {\n      let res = await request.getMyOcp(\n        this.props.userinfo.email\n          ? { email: this.props.userinfo.email }\n          : { guestId: this.guest && this.guest.id }\n      );\n      let json = await res.json();\n      if (json) {\n        let data = {};\n        json.forEach(element => {\n          data[element.grade] = element.level;\n        });\n        this.setState({ myLevel: data[this.grade] });\n\n        if (!data[this.grade]) {\n          this.setState({ myLevel: 0 });\n        }\n      } else {\n        this.setState({ myLevel: 0 });\n      }\n    } else {\n      this.setState({ myLevel: 0 });\n    }\n  };\n\n  onClickItem = level => {\n    if (this.isIE) {\n      showPopUp(\n        <Popup.TwoButton\n          title=\"이용안내\"\n          subtitle=\"본 페이지는 크롬에서만 정상 동작합니다\"\n          confirmButtonName=\"크롬 설치하기\"\n          cancelButtonName=\"취소\"\n          confirmAction={() => {\n            window.open(\"https://www.google.com/intl/ko/chrome/\", \"_blank\");\n          }}\n        />,\n        { darkmode: true, mobileFullscreen: true }\n      );\n      return;\n    }\n    const { myLevel } = this.state;\n    // if (window.screen.width <= 1080) {\n    //   showPopUp(\n    //     <Popup.OneButton\n    //       title={this.props.intl.formatMessage({\n    //         id: \"ID_LEARN_POPUP_MOBILE_TITLE\"\n    //       })}\n    //       buttonName={this.props.intl.formatMessage({\n    //         id: \"ID_LEARN_POPUP_MOBILE_BUTTON\"\n    //       })}\n    //     />,\n    //     { darkmode: true, mobileFullscreen: true }\n    //   );\n    //   return;\n    // }\n\n    if (level <= myLevel + 1) {\n      let builder = window.open(`/ocp/${this.grade}/${level}`, \"_blank\");\n      builder.focus();\n    } else {\n      showPopUp(\n        <Popup.OneButton\n          title={this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE\"\n          })}\n          buttonName={this.props.intl.formatMessage({\n            id: \"ID_LEARN_POPUP_STEP_CHECK_TITLE_BUTTON\"\n          })}\n        />,\n        { darkmode: true, mobileFullscreen: true }\n      );\n    }\n  };\n\n  handleReset = () => {\n    showPopUp(\n      <Popup.TwoButton\n        title=\"미션 새로 시작하기\"\n        subtitle={`완수된 미션이 모두 초기화되며,\n초기화 후에는 복구가 불가능합니다.\n처음부터 다시 시작하시겠습니까?`}\n        cancelButtonName=\"아니요\"\n        confirmButtonName=\"새로 시작\"\n        confirmAction={() => {\n          resetOcpToken();\n          window.location.reload();\n        }}\n      />,\n      { darkmode: true, dismissButton: false }\n    );\n  };\n  handleCertification = async () => {\n    if (this.state.myLevel < 10) {\n      showPopUp(\n        <Popup.OneButton\n          title=\"알림\"\n          subtitle=\"10단계까지 완료해주세요.\"\n          buttonName=\"확인\"\n        />,\n        { darkmode: true }\n      );\n      return;\n    }\n    let name, organization;\n    if (this.props.userinfo.email) {\n      if (this.props.userinfo.organization) {\n        name = this.props.userinfo.name;\n        organization = this.props.userinfo.organization;\n      } else {\n        showPopUp(\n          <Popup.OneInput\n            title=\"학교를 입력해주세요\"\n            buttonName=\"확인\"\n            inputLimit={10}\n            buttonAction={org => callback(org)}\n          />,\n          { dismissOverlay: true, darkmode: false }\n        );\n      }\n    } else {\n      const res = await request.getOcpUser({\n        guestId: this.guest && this.guest.id\n      });\n      const guest = await res.json();\n      if (guest) {\n        if (!(guest.name && guest.organization)) {\n          showPopUp(\n            <Popup.TwoInput\n              title=\"학교를 입력해주세요\"\n              buttonName=\"확인\"\n              inputTitle1=\"이름\"\n              inputTitle2=\"학교\"\n              inputLimit1={4}\n              inputLimit2={10}\n              buttonAction={(org, name) => callback(org, name)}\n            />,\n            { dismissOverlay: true, darkmode: false }\n          );\n        } else {\n          name = guest.name;\n          organization = guest.organization;\n        }\n      }\n    }\n\n    if (name && organization) {\n      showPopUp(\n        <Print\n          organization={organization.substring(0, 10)}\n          grade={this.grade}\n          // name={name.substring(0, 4)}\n          name={name}\n          callback={this.printCallback}\n        />\n      );\n    }\n    const callback = (org, name = this.props.userinfo.name) => {\n      showPopUp(\n        <Print\n          organization={org}\n          grade={this.grade}\n          name={name}\n          callback={this.printCallback}\n        />\n      );\n\n      request.updateOcpUser({\n        guestId: this.guest && this.guest.id,\n        email: this.props.userinfo.email,\n        name: name,\n        organization: org\n      });\n      this.props.updateUserInfo();\n    };\n  };\n\n  checkFocus = () => {\n    this.guest =\n      localStorage.getItem(\"ocpId\") &&\n      JSON.parse(localStorage.getItem(\"ocpId\"));\n    window.addEventListener(\"focus\", () => {\n      this.getMyOcp();\n    });\n  };\n\n  handleSignup = () => {\n    showPopUp(<SignUp />, {\n      mobileFullscreen: true,\n      darkmode: true\n    });\n  };\n\n  printCallback = () => {\n    request.updateMyOcpPrint(\n      this.props.userinfo.email\n        ? { email: this.props.userinfo.email, grade: this.grade }\n        : { guestId: this.guest && this.guest.id, grade: this.grade }\n    );\n\n    if (this.props.userinfo.email) return;\n    // setTimeout(() => {\n    //   showPopUp(\n    //     <Popup.TwoButton\n    //       titleId=\"ID_CERT_POPUP_TITLE\"\n    //       cancelButtonNameId=\"ID_CERT_POPUP_CANCEL\"\n    //       confirmButtonNameId=\"ID_CERT_POPUP_SIGNUP\"\n    //       confirmAction={this.handleSignup}\n    //       content={\n    //         <div>\n    //           <img\n    //             style={{ width: \"100%\", marginTop: \"30px\" }}\n    //             src={eventImg}\n    //             alt=\"event\"\n    //           />\n    //         </div>\n    //       }\n    //     />,\n    //     {\n    //       darkmode: true\n    //     }\n    //   );\n    // }, 1000);\n  };\n\n  render() {\n    const { OCP, myLevel } = this.state;\n    const {\n      onClickItem,\n      grade,\n      checkFocus,\n      handleCertification,\n      handleReset,\n      info\n    } = this;\n    checkFocus();\n    return (\n      <View\n        OCP={OCP}\n        onClickItem={onClickItem}\n        intl={this.props.intl}\n        info={info[grade]}\n        myLevel={myLevel}\n        handleCertification={handleCertification}\n        handleReset={handleReset}\n        userId={this.props.userinfo.id}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {\n    updateUserInfo: action.updateUserInfo\n  }\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}