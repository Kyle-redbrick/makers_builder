{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Videoclass/ego/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, Fragment } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { VCTYPE } from \"../../../../../Common/Util/Constant\";\nimport \"./index.scss\";\nimport egoPlayImg from \"../../../../../Image/videoclass/ego_play_wizlab.png\";\nimport egoNextImg from \"../../../../../Image/videoclass/ego_next.png\";\n\nvar Ego = /*#__PURE__*/function (_Component) {\n  _inherits(Ego, _Component);\n\n  var _super = _createSuper(Ego);\n\n  function Ego(props) {\n    var _this;\n\n    _classCallCheck(this, Ego);\n\n    _this = _super.call(this, props);\n\n    _this.egoSay = function (egoMessages) {\n      var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;\n\n      if (_this.egoSayTimeout) {\n        clearTimeout(_this.egoSayTimeout);\n      }\n\n      if (egoMessages) {\n        _this.setState({\n          isBubbleHidden: false,\n          egoMessages: egoMessages\n        });\n\n        _this.egoSayTimeout = setTimeout(function () {\n          _this.setState({\n            isBubbleHidden: true\n          });\n        }, timeout);\n      } else {\n        _this.setState({\n          isBubbleHidden: true\n        });\n      }\n    };\n\n    _this.onClickEgo = function () {\n      if (_this.props.onClickEgo) {\n        _this.props.onClickEgo();\n      }\n    };\n\n    _this.onClickEgoBubble = function () {\n      if (_this.egoSayTimeout) {\n        clearTimeout(_this.egoSayTimeout);\n      }\n\n      _this.setState({\n        isBubbleHidden: true\n      });\n    };\n\n    _this.egoSayTimeout = null;\n    _this.egoImgSrc = \"https://wizschool-assets.oss-cn-shanghai.aliyuncs.com/assets/24a20d5b7568f14c424a3c1704ed3b75.png\";\n    _this.state = {\n      egoMessages: [],\n      isBubbleHidden: true\n    };\n    return _this;\n  }\n\n  _createClass(Ego, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.egoSayTimeout) {\n        clearTimeout(this.egoSayTimeout);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var formatMessage = this.props.intl.formatMessage;\n      var _this$state = this.state,\n          egoMessages = _this$state.egoMessages,\n          isBubbleHidden = _this$state.isBubbleHidden;\n      var isImage = egoMessages[0] && egoMessages[0].type === VCTYPE.EGO.IMAGE;\n      return React.createElement(\"div\", {\n        className: \"ego\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"ego_bubble\",\n        className: \"ego_bubble \".concat(isBubbleHidden ? \"ego_bubble-hidden\" : \"\", \" \").concat(isImage && \"ego_bubble_img\"),\n        onClick: this.onClickEgoBubble,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ego_bubble_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_EGO\"\n      })), React.createElement(\"div\", {\n        className: \"ego_bubble_messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, egoMessages.length > 0 && egoMessages.map(function (message, index) {\n        switch (message.type) {\n          case VCTYPE.EGO.TEXT:\n            return React.createElement(\"div\", {\n              key: index,\n              className: \"ego_bubble_message_text\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74\n              },\n              __self: this\n            }, message.data);\n\n          case VCTYPE.EGO.IMAGE:\n            return React.createElement(\"img\", {\n              key: index,\n              className: \"ego_bubble_message_image\",\n              style: {\n                width: \"\".concat(message.width, \"px\")\n              },\n              src: message.data,\n              alt: message.type,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80\n              },\n              __self: this\n            });\n\n          case VCTYPE.EGO.PLAY:\n            return React.createElement(\"img\", {\n              key: index,\n              className: \"ego_bubble_message_image\",\n              src: egoPlayImg,\n              alt: message.type,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 90\n              },\n              __self: this\n            });\n\n          case VCTYPE.EGO.NEXT:\n            return React.createElement(\"img\", {\n              key: index,\n              className: \"ego_bubble_message_image\",\n              src: egoNextImg,\n              alt: message.type,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99\n              },\n              __self: this\n            });\n\n          case VCTYPE.EGO.COMPONENT:\n            return React.createElement(Fragment, {\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 107\n              },\n              __self: this\n            }, message.data);\n\n          default:\n            return null;\n        }\n      }))), React.createElement(\"img\", {\n        className: \"ego_image\",\n        src: this.egoImgSrc,\n        alt: \"ego\",\n        onClick: this.onClickEgo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Ego;\n}(Component);\n\nexport default injectIntl(Ego, {\n  withRef: true\n});","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Videoclass/ego/index.js"],"names":["React","Component","Fragment","injectIntl","VCTYPE","egoPlayImg","egoNextImg","Ego","props","egoSay","egoMessages","timeout","egoSayTimeout","clearTimeout","setState","isBubbleHidden","setTimeout","onClickEgo","onClickEgoBubble","egoImgSrc","state","formatMessage","intl","isImage","type","EGO","IMAGE","id","length","map","message","index","TEXT","data","width","PLAY","NEXT","COMPONENT","withRef"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { VCTYPE } from \"../../../../../Common/Util/Constant\";\nimport \"./index.scss\";\n\nimport egoPlayImg from \"../../../../../Image/videoclass/ego_play_wizlab.png\";\nimport egoNextImg from \"../../../../../Image/videoclass/ego_next.png\";\n\nclass Ego extends Component {\n  constructor(props) {\n    super(props);\n    this.egoSayTimeout = null;\n    this.egoImgSrc =\n      \"https://wizschool-assets.oss-cn-shanghai.aliyuncs.com/assets/24a20d5b7568f14c424a3c1704ed3b75.png\";\n    this.state = {\n      egoMessages: [],\n      isBubbleHidden: true\n    };\n  }\n  componentWillUnmount() {\n    if (this.egoSayTimeout) {\n      clearTimeout(this.egoSayTimeout);\n    }\n  }\n\n  egoSay = (egoMessages, timeout = 5000) => {\n    if (this.egoSayTimeout) {\n      clearTimeout(this.egoSayTimeout);\n    }\n    if (egoMessages) {\n      this.setState({ isBubbleHidden: false, egoMessages });\n      this.egoSayTimeout = setTimeout(() => {\n        this.setState({ isBubbleHidden: true });\n      }, timeout);\n    } else {\n      this.setState({ isBubbleHidden: true });\n    }\n  };\n  onClickEgo = () => {\n    if (this.props.onClickEgo) {\n      this.props.onClickEgo();\n    }\n  };\n  onClickEgoBubble = () => {\n    if (this.egoSayTimeout) {\n      clearTimeout(this.egoSayTimeout);\n    }\n    this.setState({ isBubbleHidden: true });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const { egoMessages, isBubbleHidden } = this.state;\n    const isImage = egoMessages[0] && egoMessages[0].type === VCTYPE.EGO.IMAGE;\n\n    return (\n      <div className=\"ego\">\n        <div\n          id=\"ego_bubble\"\n          className={`ego_bubble ${\n            isBubbleHidden ? \"ego_bubble-hidden\" : \"\"\n          } ${isImage && \"ego_bubble_img\"}`}\n          onClick={this.onClickEgoBubble}\n        >\n          <div className=\"ego_bubble_name\">\n            {formatMessage({ id: \"ID_EGO\" })}\n          </div>\n          <div className=\"ego_bubble_messages\">\n            {egoMessages.length > 0 &&\n              egoMessages.map((message, index) => {\n                switch (message.type) {\n                  case VCTYPE.EGO.TEXT:\n                    return (\n                      <div key={index} className=\"ego_bubble_message_text\">\n                        {message.data}\n                      </div>\n                    );\n                  case VCTYPE.EGO.IMAGE:\n                    return (\n                      <img\n                        key={index}\n                        className=\"ego_bubble_message_image\"\n                        style={{ width: `${message.width}px` }}\n                        src={message.data}\n                        alt={message.type}\n                      />\n                    );\n                  case VCTYPE.EGO.PLAY:\n                    return (\n                      <img\n                        key={index}\n                        className=\"ego_bubble_message_image\"\n                        src={egoPlayImg}\n                        alt={message.type}\n                      />\n                    );\n                  case VCTYPE.EGO.NEXT:\n                    return (\n                      <img\n                        key={index}\n                        className=\"ego_bubble_message_image\"\n                        src={egoNextImg}\n                        alt={message.type}\n                      />\n                    );\n                  case VCTYPE.EGO.COMPONENT:\n                    return <Fragment key={index}>{message.data}</Fragment>;\n                  default:\n                    return null;\n                }\n              })}\n          </div>\n        </div>\n        <img\n          className=\"ego_image\"\n          src={this.egoImgSrc}\n          alt=\"ego\"\n          onClick={this.onClickEgo}\n        />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(Ego, { withRef: true });\n"]},"metadata":{},"sourceType":"module"}