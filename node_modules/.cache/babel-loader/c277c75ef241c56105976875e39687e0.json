{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Project/Component/Right/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport store from \"../../../../Store/\";\nimport View from \"./View\";\n/* this container is not used */\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.createNewProject = function (templateId) {\n      var email = _this.props.email;\n      var pageURL = \"/\".concat(PAGETYPE.BUILDER, \"/\").concat(generatePID(email));\n\n      if (templateId) {\n        pageURL += \"/\".concat(templateId);\n      }\n\n      _this.props.history.replace({\n        pathname: pageURL\n      });\n\n      window.location.reload();\n    };\n\n    _this.loadProject = function (pId) {\n      _this.props.history.replace({\n        pathname: \"/\".concat(PAGETYPE.BUILDER, \"/\").concat(pId)\n      });\n\n      window.location.reload();\n    };\n\n    _this.loadMore = function () {\n      _this.setState(function (prev) {\n        return {\n          currentPage: prev.currentPage + 1\n        };\n      }, function () {\n        _this.props.getMyProjects({\n          currentPage: _this.state.currentPage,\n          keyword: _this.state.keyword\n        });\n      });\n    };\n\n    _this.handleKeywordChange = function (e) {\n      _this.setState({\n        keyword: e.target.value,\n        currentPage: 1\n      }, function () {\n        _this.props.getMyProjects({\n          currentPage: _this.state.currentPage,\n          keyword: _this.state.keyword\n        });\n      });\n    };\n\n    _this.handleOnScroll = function () {\n      var container = _this.projectsRef.current;\n\n      if (container.offsetHeight + container.scrollTop >= container.scrollHeight) {\n        _this.loadMore();\n      }\n    };\n\n    _this.handleCopy = function (pId) {\n      showPopUp(React.createElement(PopUp.TwoButton, {\n        titleId: \"ID_PROJECT_POPUP_COPY_TITLE\",\n        cancelButtonNameId: \"ID_PROJECT_POPUP_COPY_CANCEL\",\n        confirmButtonNameId: \"ID_PROJECT_POPUP_COPY_OK\",\n        confirmAction: function confirmAction() {\n          return _this.copyProject(pId);\n        },\n        darkMode: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), {\n        store: store,\n        dismissOverlay: true\n      });\n    };\n\n    _this.handleEdit = function (pId, name) {\n      showPopUp(React.createElement(PopUp.OneInput, {\n        titleId: \"ID_PROJECT_POPUP_EDIT_TITLE\",\n        defaultInput: name,\n        buttonNameId: \"ID_PROJECT_POPUP_EDIT_OK\",\n        buttonAction: function buttonAction(newVal) {\n          _this.editProject(pId, newVal);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), {\n        store: store,\n        dismissOverlay: true\n      });\n    };\n\n    _this.handleRemove = function (pId, name) {\n      showPopUp(React.createElement(PopUp.TwoButton, {\n        titleId: \"ID_PROJECT_POPUP_DELETE_TITLE\",\n        titleValue: {\n          projectName: name\n        },\n        subtitleId: \"ID_PROJECT_POPUP_DELETE_SUB_TITLE\",\n        cancelButtonNameId: \"ID_PROJECT_POPUP_DELETE_CANCEL\",\n        confirmButtonNameId: \"ID_PROJECT_POPUP_DELETE_OK\",\n        confirmAction: function confirmAction() {\n          return _this.deleteProject(pId);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), {\n        store: store,\n        dismissOverlay: true\n      });\n    };\n\n    _this.deleteProject = function (pId) {\n      request.deleteDevelopingProject({\n        pId: pId,\n        email: _this.props.email\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this.props.getMyProjects({\n          currentPage: _this.state.currentPage,\n          keyword: _this.state.keyword\n        });\n      }).catch(function (e) {\n        console.error(e);\n      });\n    };\n\n    _this.copyProject = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(pId) {\n        var project, param;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return request.getDevelopingProject({\n                  pId: pId\n                }).then(function (res) {\n                  return res.json();\n                });\n\n              case 2:\n                project = _context.sent;\n                param = {\n                  pId: generatePID(_this.props.email),\n                  email: project.email,\n                  icon: project.icon,\n                  name: \"\".concat(project.name, \" copy\"),\n                  state: project.state,\n                  url: project.url,\n                  useCustomIcon: project.useCustomIcon\n                };\n                request.copyDevelopingProject({\n                  param: param\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (json) {\n                  _this.props.getMyProjects({\n                    currentPage: _this.state.currentPage,\n                    keyword: _this.state.keyword\n                  });\n                }).catch(function (e) {\n                  return console.error(e);\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.editProject = function (pId, newName) {\n      request.updateDevelopingProject({\n        pId: pId,\n        name: newName\n      }).then(function (res) {\n        return res.json;\n      }).then(function (json) {\n        _this.props.getMyProjects({\n          currentPage: _this.state.currentPage,\n          keyword: _this.state.keyword\n        });\n      }).catch(function (e) {\n        return console.error(e);\n      });\n    };\n\n    _this.state = {\n      currentPage: 1,\n      keyword: \"\",\n      templateProjects: []\n    };\n    _this.projectsRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      request.getTemplateProjects().then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this2.setState({\n          templateProjects: json\n        });\n      }).catch(function (e) {\n        console.error(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          category = _this$props.category,\n          myprojects = _this$props.myprojects,\n          myprojectCnt = _this$props.myprojectCnt,\n          intl = _this$props.intl;\n      var createNewProject = this.createNewProject,\n          handleKeywordChange = this.handleKeywordChange,\n          handleOnScroll = this.handleOnScroll,\n          projectsRef = this.projectsRef,\n          loadProject = this.loadProject,\n          handleCopy = this.handleCopy,\n          handleEdit = this.handleEdit,\n          handleRemove = this.handleRemove;\n      var _this$state = this.state,\n          keyword = _this$state.keyword,\n          templateProjects = _this$state.templateProjects;\n      return React.createElement(View, {\n        templateProjects: templateProjects,\n        projectsRef: projectsRef,\n        category: category,\n        createNewProject: createNewProject,\n        myprojects: myprojects,\n        myprojectCnt: myprojectCnt,\n        keyword: keyword,\n        handleKeywordChange: handleKeywordChange,\n        handleOnScroll: handleOnScroll,\n        loadProject: loadProject,\n        handleCopy: handleCopy,\n        handleEdit: handleEdit,\n        handleRemove: handleRemove,\n        intl: intl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(withRouter(injectIntl(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Project/Component/Right/Container.js"],"names":["React","Component","withRouter","injectIntl","connect","PAGETYPE","request","generatePID","PopUp","showPopUp","store","View","Container","props","createNewProject","templateId","email","pageURL","BUILDER","history","replace","pathname","window","location","reload","loadProject","pId","loadMore","setState","prev","currentPage","getMyProjects","state","keyword","handleKeywordChange","e","target","value","handleOnScroll","container","projectsRef","current","offsetHeight","scrollTop","scrollHeight","handleCopy","copyProject","dismissOverlay","handleEdit","name","newVal","editProject","handleRemove","projectName","deleteProject","deleteDevelopingProject","then","res","json","catch","console","error","getDevelopingProject","project","param","icon","url","useCustomIcon","copyDevelopingProject","newName","updateDevelopingProject","templateProjects","createRef","getTemplateProjects","category","myprojects","myprojectCnt","intl","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport store from \"../../../../Store/\";\n\nimport View from \"./View\";\n/* this container is not used */\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPage: 1,\n      keyword: \"\",\n      templateProjects: []\n    };\n    this.projectsRef = React.createRef();\n  }\n\n  componentDidMount() {\n    request\n      .getTemplateProjects()\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ templateProjects: json });\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  }\n\n  createNewProject = templateId => {\n    const { email } = this.props;\n    let pageURL = `/${PAGETYPE.BUILDER}/${generatePID(email)}`;\n    if (templateId) {\n      pageURL += `/${templateId}`;\n    }\n\n    this.props.history.replace({\n      pathname: pageURL\n    });\n    window.location.reload();\n  };\n\n  loadProject = pId => {\n    this.props.history.replace({\n      pathname: `/${PAGETYPE.BUILDER}/${pId}`\n    });\n    window.location.reload();\n  };\n\n  loadMore = () => {\n    this.setState(\n      prev => {\n        return { currentPage: prev.currentPage + 1 };\n      },\n      () => {\n        this.props.getMyProjects({\n          currentPage: this.state.currentPage,\n          keyword: this.state.keyword\n        });\n      }\n    );\n  };\n\n  handleKeywordChange = e => {\n    this.setState({ keyword: e.target.value, currentPage: 1 }, () => {\n      this.props.getMyProjects({\n        currentPage: this.state.currentPage,\n        keyword: this.state.keyword\n      });\n    });\n  };\n\n  handleOnScroll = () => {\n    const container = this.projectsRef.current;\n    if (\n      container.offsetHeight + container.scrollTop >=\n      container.scrollHeight\n    ) {\n      this.loadMore();\n    }\n  };\n\n  handleCopy = pId => {\n    showPopUp(\n      <PopUp.TwoButton\n        titleId=\"ID_PROJECT_POPUP_COPY_TITLE\"\n        cancelButtonNameId=\"ID_PROJECT_POPUP_COPY_CANCEL\"\n        confirmButtonNameId=\"ID_PROJECT_POPUP_COPY_OK\"\n        confirmAction={() => this.copyProject(pId)}\n        darkMode={true}\n      />,\n      { store, dismissOverlay: true }\n    );\n  };\n  handleEdit = (pId, name) => {\n    showPopUp(\n      <PopUp.OneInput\n        titleId=\"ID_PROJECT_POPUP_EDIT_TITLE\"\n        defaultInput={name}\n        buttonNameId=\"ID_PROJECT_POPUP_EDIT_OK\"\n        buttonAction={newVal => {\n          this.editProject(pId, newVal);\n        }}\n      />,\n      { store, dismissOverlay: true }\n    );\n  };\n  handleRemove = (pId, name) => {\n    showPopUp(\n      <PopUp.TwoButton\n        titleId=\"ID_PROJECT_POPUP_DELETE_TITLE\"\n        titleValue={{ projectName: name }}\n        subtitleId=\"ID_PROJECT_POPUP_DELETE_SUB_TITLE\"\n        cancelButtonNameId=\"ID_PROJECT_POPUP_DELETE_CANCEL\"\n        confirmButtonNameId=\"ID_PROJECT_POPUP_DELETE_OK\"\n        confirmAction={() => this.deleteProject(pId)}\n      />,\n      { store, dismissOverlay: true }\n    );\n  };\n\n  deleteProject = pId => {\n    request\n      .deleteDevelopingProject({ pId, email: this.props.email })\n      .then(res => res.json())\n      .then(json => {\n        this.props.getMyProjects({\n          currentPage: this.state.currentPage,\n          keyword: this.state.keyword\n        });\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  };\n\n  copyProject = async pId => {\n    let project = await request\n      .getDevelopingProject({ pId })\n      .then(res => res.json());\n    let param = {\n      pId: generatePID(this.props.email),\n      email: project.email,\n      icon: project.icon,\n      name: `${project.name} copy`,\n      state: project.state,\n      url: project.url,\n      useCustomIcon: project.useCustomIcon\n    };\n\n    request\n      .copyDevelopingProject({ param })\n      .then(res => res.json())\n      .then(json => {\n        this.props.getMyProjects({\n          currentPage: this.state.currentPage,\n          keyword: this.state.keyword\n        });\n      })\n      .catch(e => console.error(e));\n  };\n\n  editProject = (pId, newName) => {\n    request\n      .updateDevelopingProject({ pId, name: newName })\n      .then(res => res.json)\n      .then(json => {\n        this.props.getMyProjects({\n          currentPage: this.state.currentPage,\n          keyword: this.state.keyword\n        });\n      })\n      .catch(e => console.error(e));\n  };\n  render() {\n    const { category, myprojects, myprojectCnt, intl } = this.props;\n    const {\n      createNewProject,\n      handleKeywordChange,\n      handleOnScroll,\n      projectsRef,\n      loadProject,\n      handleCopy,\n      handleEdit,\n      handleRemove\n    } = this;\n    const { keyword, templateProjects } = this.state;\n    return (\n      <View\n        templateProjects={templateProjects}\n        projectsRef={projectsRef}\n        category={category}\n        createNewProject={createNewProject}\n        myprojects={myprojects}\n        myprojectCnt={myprojectCnt}\n        keyword={keyword}\n        handleKeywordChange={handleKeywordChange}\n        handleOnScroll={handleOnScroll}\n        loadProject={loadProject}\n        handleCopy={handleCopy}\n        handleEdit={handleEdit}\n        handleRemove={handleRemove}\n        intl={intl}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    email: state.userinfo.email\n  }),\n  {}\n)(withRouter(injectIntl(Container)));\n"]},"metadata":{},"sourceType":"module"}