{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/Selector/index.js\";\nimport React from \"react\";\nimport Localization from \"../../Localization\";\nimport OOBC from \"../../OOBC\";\nimport { Block, AddVarBlock } from \"../Block\";\nimport \"./index.scss\";\nexport var MODE = {\n  FLOAT: \"float\",\n  BOTTOM: \"bottom\"\n};\nexport var defaultMode = MODE.BOTTOM;\nexport default function (props) {\n  var _props$mode = props.mode,\n      mode = _props$mode === void 0 ? defaultMode : _props$mode,\n      context = props.context,\n      currentBlock = props.currentBlock,\n      selectorInfo = props.selectorInfo,\n      onClickPrototypeBlock = props.onClickPrototypeBlock,\n      onClickAddGlobalVar = props.onClickAddGlobalVar,\n      onClickSelectorCategory = props.onClickSelectorCategory;\n  var isOn = !!currentBlock;\n\n  var selectorStyle = _objectSpread({}, getSelectorRect({\n    mode: mode,\n    block: currentBlock\n  }));\n\n  return React.createElement(\"div\", {\n    className: \"oobceditor_selector oobceditor_selector-\".concat(isOn ? \"on\" : \"off\", \" oobceditor_selector-\").concat(mode),\n    style: selectorStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, selectorInfo && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"oobceditor_selector_categories\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, selectorInfo.categories.map(function (category) {\n    return React.createElement(Category, {\n      key: category,\n      category: category,\n      isCurrent: category === selectorInfo.currentCategory,\n      onClick: function onClick() {\n        onClickSelectorCategory(category);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    });\n  })), React.createElement(\"div\", {\n    className: \"oobceditor_selector_prototypes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"oobceditor_selector_prototypes_inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, selectorInfo.currentCategory === OOBC.TYPE.CATEGORY.VARIABLE && React.createElement(AddVarBlock, {\n    onClickBlock: onClickAddGlobalVar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), selectorInfo.currentCategory && selectorInfo.prototypeBlocksOf[selectorInfo.currentCategory].map(function (prototypeBlock, index) {\n    return React.createElement(Block, {\n      key: index,\n      context: context,\n      block: prototypeBlock,\n      disabled: selectorInfo.disabledPrototypeBlocks.includes(prototypeBlock),\n      onClickBlock: onClickPrototypeBlock,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  })))));\n}\n\nfunction getSelectorRect(option) {\n  var rect = {};\n\n  switch (option.mode) {\n    case MODE.FLOAT:\n      if (!option.block) {\n        break;\n      }\n\n      var contextElement = document.getElementById(\"oobceditor_context\");\n      var blockElement = document.getElementById(\"oobceditor_block-\" + option.block.id);\n\n      if (!contextElement || !blockElement) {\n        break;\n      }\n\n      var contextRect = contextElement.getBoundingClientRect();\n      var blockRect = blockElement.getBoundingClientRect();\n      rect.left = blockRect.left - contextRect.left;\n      rect.top = blockRect.top - contextRect.top + blockRect.height + 12;\n      rect.height = blockRect.height * 4.5;\n      rect.width = rect.height * 2.5;\n      break;\n\n    case MODE.BOTTOM:\n    default:\n      rect.bottom = 0;\n      rect.left = 0;\n      rect.width = \"calc(100% - 24px)\";\n      rect.height = \"50%\";\n      break;\n  }\n\n  return rect;\n}\n\nfunction Category(props) {\n  var category = props.category,\n      isCurrent = props.isCurrent,\n      onClick = props.onClick;\n  var formatMessageId = \"ID_OOBC_BLOCK_CATEGORY_\".concat(category.toUpperCase());\n  var formattedCategory = Localization.formatWithId(formatMessageId);\n  return React.createElement(\"div\", {\n    id: \"oobceditor_selector_category-\".concat(category),\n    className: \"oobceditor_selector_category\".concat(isCurrent ? \" oobceditor_selector_category-current\" : \"\"),\n    onClick: onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, formattedCategory);\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/Selector/index.js"],"names":["React","Localization","OOBC","Block","AddVarBlock","MODE","FLOAT","BOTTOM","defaultMode","props","mode","context","currentBlock","selectorInfo","onClickPrototypeBlock","onClickAddGlobalVar","onClickSelectorCategory","isOn","selectorStyle","getSelectorRect","block","categories","map","category","currentCategory","TYPE","CATEGORY","VARIABLE","prototypeBlocksOf","prototypeBlock","index","disabledPrototypeBlocks","includes","option","rect","contextElement","document","getElementById","blockElement","id","contextRect","getBoundingClientRect","blockRect","left","top","height","width","bottom","Category","isCurrent","onClick","formatMessageId","toUpperCase","formattedCategory","formatWithId"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Localization from \"../../Localization\";\nimport OOBC from \"../../OOBC\";\nimport { Block, AddVarBlock } from \"../Block\";\nimport \"./index.scss\";\n\nexport const MODE = {\n  FLOAT: \"float\",\n  BOTTOM: \"bottom\"\n};\nexport const defaultMode = MODE.BOTTOM;\n\nexport default function (props) {\n  const {\n    mode = defaultMode,\n    context,\n    currentBlock,\n    selectorInfo,\n    onClickPrototypeBlock,\n    onClickAddGlobalVar,\n    onClickSelectorCategory,\n  } = props;\n\n  const isOn = !!currentBlock;\n  const selectorStyle = { ...getSelectorRect({ mode,block: currentBlock }) };\n\n  return (\n    <div\n      className={`oobceditor_selector oobceditor_selector-${isOn ? \"on\" : \"off\"} oobceditor_selector-${mode}`}\n      style={selectorStyle}\n    >\n      {selectorInfo && (\n        <>\n          <div className=\"oobceditor_selector_categories\">\n            {selectorInfo.categories.map(category => (\n              <Category\n                key={category}\n                category={category}\n                isCurrent={category === selectorInfo.currentCategory}\n                onClick={() => {\n                  onClickSelectorCategory(category);\n                }}\n              />\n            ))}\n          </div>\n          <div className=\"oobceditor_selector_prototypes\">\n            <div className=\"oobceditor_selector_prototypes_inner\">\n              {selectorInfo.currentCategory === OOBC.TYPE.CATEGORY.VARIABLE && (\n                <AddVarBlock onClickBlock={onClickAddGlobalVar} />\n              )}\n              {selectorInfo.currentCategory &&\n                selectorInfo.prototypeBlocksOf[\n                  selectorInfo.currentCategory\n                ].map((prototypeBlock, index) => (\n                  <Block\n                    key={index}\n                    context={context}\n                    block={prototypeBlock}\n                    disabled={selectorInfo.disabledPrototypeBlocks.includes(\n                      prototypeBlock\n                    )}\n                    onClickBlock={onClickPrototypeBlock}\n                  />\n                ))}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction getSelectorRect(option) {\n  const rect = {};\n\n  switch (option.mode) {\n    case MODE.FLOAT:\n      if(!option.block) {\n        break;\n      }\n\n      const contextElement = document.getElementById(\"oobceditor_context\");\n      const blockElement = document.getElementById(\"oobceditor_block-\" + option.block.id);\n      if(!contextElement || !blockElement) {\n        break;\n      }\n\n      const contextRect = contextElement.getBoundingClientRect();\n      const blockRect = blockElement.getBoundingClientRect();\n      rect.left = blockRect.left - contextRect.left;\n      rect.top = blockRect.top - contextRect.top + blockRect.height + 12;\n      rect.height = blockRect.height * 4.5;\n      rect.width = rect.height * 2.5;\n      break;\n\n    case MODE.BOTTOM:\n    default:\n      rect.bottom = 0;\n      rect.left = 0;\n      rect.width = \"calc(100% - 24px)\";\n      rect.height = \"50%\";\n      break;\n  }\n\n  return rect;\n}\n\nfunction Category(props) {\n  const { category, isCurrent, onClick } = props;\n  const formatMessageId = `ID_OOBC_BLOCK_CATEGORY_${category.toUpperCase()}`;\n  const formattedCategory = Localization.formatWithId(formatMessageId);\n  return (\n    <div\n      id={`oobceditor_selector_category-${category}`}\n      className={`oobceditor_selector_category${\n        isCurrent ? \" oobceditor_selector_category-current\" : \"\"\n      }`}\n      onClick={onClick}\n    >\n      {formattedCategory}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}