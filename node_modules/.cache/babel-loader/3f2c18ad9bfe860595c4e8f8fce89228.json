{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignIn/Container.js\";\nimport React, { Component, createRef } from 'react';\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport sha256 from \"../../Util/SHA256\";\nimport { showPopUp } from \"../../Component/PopUp\";\nimport SignUp from \"../SignUp\";\nimport FindPw from \"../FindPw\";\nimport FindLoginId from \"../FindLoginId\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nexport var Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.onChangeField = function (id, value) {\n      var _this$setState;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, id, value), _defineProperty(_this$setState, \"warning\", undefined), _this$setState));\n    };\n\n    _this.onEnterLoginId = function () {\n      _this.passwordInputRef.current.focus();\n    };\n\n    _this.onClickLogin = function () {\n      if (!_this.allFilled) return;\n      var params = {\n        email: _this.state.loginId,\n        password: sha256(_this.state.password)\n      };\n      request.login(params).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.user) {\n          TrackingUtil.sendGTMEvent(\"Login_Success\");\n          localStorage.setItem(\"wizToken\", json.token);\n\n          _this.props.updateUserInfo(json.user);\n\n          _this.props.dismiss();\n        } else {\n          _this.setState({\n            warning: _this.props.intl.formatMessage({\n              id: \"ID_SIGNIN_WARNING\"\n            })\n          });\n        }\n      });\n    };\n\n    _this.onClickSignUp = function () {\n      showPopUp(React.createElement(SignUp, {\n        history: _this.props.history,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.onClickFindLoginId = function () {\n      showPopUp(React.createElement(FindLoginId, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      });\n    };\n\n    _this.onClickFindPassword = function () {\n      showPopUp(React.createElement(FindPw, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      });\n    };\n\n    _this.state = {\n      loginId: \"\",\n      password: \"\",\n      warning: undefined\n    };\n    _this.passwordInputRef = createRef();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, Object.assign({}, this.state, {\n        passwordInputRef: this.passwordInputRef,\n        onChangeField: this.onChangeField,\n        onEnterLoginId: this.onEnterLoginId,\n        onClickLogin: this.onClickLogin,\n        onClickSignUp: this.onClickSignUp,\n        onClickFindLoginId: this.onClickFindLoginId,\n        onClickFindPassword: this.onClickFindPassword,\n        allFilled: this.allFilled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"allFilled\",\n    get: function get() {\n      return this.state.loginId.length > 0 && this.state.password.length > 0;\n    }\n  }]);\n\n  return Container;\n}(Component);\nexport default connect(undefined, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignIn/Container.js"],"names":["React","Component","createRef","injectIntl","connect","View","sha256","showPopUp","SignUp","FindPw","FindLoginId","request","TrackingUtil","userInfoActions","Container","props","onChangeField","id","value","setState","undefined","onEnterLoginId","passwordInputRef","current","focus","onClickLogin","allFilled","params","email","state","loginId","password","login","then","res","json","user","sendGTMEvent","localStorage","setItem","token","updateUserInfo","dismiss","warning","intl","formatMessage","onClickSignUp","history","darkmode","mobileFullscreen","onClickFindLoginId","dismissButton","dismissOverlay","onClickFindPassword","length"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,wBAAzB;AACA,OAAO,KAAKC,YAAZ,MAA8B,yBAA9B;AACA,OAAO,KAAKC,eAAZ,MAAiC,8BAAjC;AAEA,WAAaC,SAAb;AAAA;AAAA;AAAA;;AACE,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,mFAAMA,KAAN;;AADiB,UAgBnBC,aAhBmB,GAgBH,UAACC,EAAD,EAAKC,KAAL,EAAe;AAAA;;AAC7B,YAAKC,QAAL,uDACGF,EADH,EACQC,KADR,8CAEWE,SAFX;AAID,KArBkB;;AAAA,UAuBnBC,cAvBmB,GAuBF,YAAM;AACrB,YAAKC,gBAAL,CAAsBC,OAAtB,CAA8BC,KAA9B;AACD,KAzBkB;;AAAA,UA2BnBC,YA3BmB,GA2BJ,YAAM;AACnB,UAAI,CAAC,MAAKC,SAAV,EAAqB;AAErB,UAAMC,MAAM,GAAG;AACbC,QAAAA,KAAK,EAAE,MAAKC,KAAL,CAAWC,OADL;AAEbC,QAAAA,QAAQ,EAAEzB,MAAM,CAAC,MAAKuB,KAAL,CAAWE,QAAZ;AAFH,OAAf;AAKApB,MAAAA,OAAO,CACJqB,KADH,CACSL,MADT,EAEGM,IAFH,CAEQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAFX,EAGGF,IAHH,CAGQ,UAAAE,IAAI,EAAI;AACZ,YAAIA,IAAI,CAACC,IAAT,EAAe;AACbxB,UAAAA,YAAY,CAACyB,YAAb,CAA0B,eAA1B;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCJ,IAAI,CAACK,KAAtC;;AACA,gBAAKzB,KAAL,CAAW0B,cAAX,CAA0BN,IAAI,CAACC,IAA/B;;AACA,gBAAKrB,KAAL,CAAW2B,OAAX;AACD,SALD,MAKO;AACL,gBAAKvB,QAAL,CAAc;AACZwB,YAAAA,OAAO,EAAE,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,aAAhB,CAA8B;AAAC5B,cAAAA,EAAE,EAAE;AAAL,aAA9B;AADG,WAAd;AAGD;AACF,OAdH;AAeD,KAlDkB;;AAAA,UAoDnB6B,aApDmB,GAoDH,YAAM;AACpBvC,MAAAA,SAAS,CAAC,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAKQ,KAAL,CAAWgC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAD,EAA0C;AACjDC,QAAAA,QAAQ,EAAE,IADuC;AAEjDC,QAAAA,gBAAgB,EAAE;AAF+B,OAA1C,CAAT;AAID,KAzDkB;;AAAA,UA2DnBC,kBA3DmB,GA2DE,YAAM;AACzB3C,MAAAA,SAAS,CACP,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADO,EAEP;AACEyC,QAAAA,QAAQ,EAAE,IADZ;AAEEG,QAAAA,aAAa,EAAE,KAFjB;AAGEC,QAAAA,cAAc,EAAE;AAHlB,OAFO,CAAT;AAQD,KApEkB;;AAAA,UAsEnBC,mBAtEmB,GAsEG,YAAM;AAC1B9C,MAAAA,SAAS,CACP,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADO,EAEP;AACEyC,QAAAA,QAAQ,EAAE,IADZ;AAEEG,QAAAA,aAAa,EAAE,KAFjB;AAGEC,QAAAA,cAAc,EAAE;AAHlB,OAFO,CAAT;AAQD,KA/EkB;;AAGjB,UAAKvB,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,EADE;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXY,MAAAA,OAAO,EAAEvB;AAHE,KAAb;AAKA,UAAKE,gBAAL,GAAwBpB,SAAS,EAAjC;AARiB;AASlB;;AAVH;AAAA;AAAA,6BAkFW;AACP,aACE,oBAAC,IAAD,oBACO,KAAK2B,KADZ;AAEE,QAAA,gBAAgB,EAAE,KAAKP,gBAFzB;AAGE,QAAA,aAAa,EAAE,KAAKN,aAHtB;AAIE,QAAA,cAAc,EAAE,KAAKK,cAJvB;AAKE,QAAA,YAAY,EAAE,KAAKI,YALrB;AAME,QAAA,aAAa,EAAE,KAAKqB,aANtB;AAOE,QAAA,kBAAkB,EAAE,KAAKI,kBAP3B;AAQE,QAAA,mBAAmB,EAAE,KAAKG,mBAR5B;AASE,QAAA,SAAS,EAAE,KAAK3B,SATlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAaD;AAhGH;AAAA;AAAA,wBAYkB;AACd,aAAO,KAAKG,KAAL,CAAWC,OAAX,CAAmBwB,MAAnB,GAA4B,CAA5B,IACF,KAAKzB,KAAL,CAAWE,QAAX,CAAoBuB,MAApB,GAA6B,CADlC;AAED;AAfH;;AAAA;AAAA,EAA+BrD,SAA/B;AAmGA,eAAeG,OAAO,CACpBgB,SADoB,EAEpB;AACEqB,EAAAA,cAAc,EAAE5B,eAAe,CAAC4B;AADlC,CAFoB,CAAP,CAKbtC,UAAU,CAACW,SAAD,CALG,CAAf","sourcesContent":["import React, { Component, createRef } from 'react';\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport sha256 from \"../../Util/SHA256\";\nimport { showPopUp } from \"../../Component/PopUp\";\nimport SignUp from \"../SignUp\";\nimport FindPw from \"../FindPw\";\nimport FindLoginId from \"../FindLoginId\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\n\nexport class Container extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loginId: \"\",\n      password: \"\",\n      warning: undefined\n    };\n    this.passwordInputRef = createRef();\n  }\n\n  get allFilled() {\n    return this.state.loginId.length > 0\n      && this.state.password.length > 0;\n  }\n\n  onChangeField = (id, value) => {\n    this.setState({\n      [id]: value,\n      warning: undefined\n    });\n  }\n\n  onEnterLoginId = () => {\n    this.passwordInputRef.current.focus();\n  }\n\n  onClickLogin = () => {\n    if (!this.allFilled) return;\n\n    const params = {\n      email: this.state.loginId,\n      password: sha256(this.state.password)\n    };\n\n    request\n      .login(params)\n      .then(res => res.json())\n      .then(json => {\n        if (json.user) {\n          TrackingUtil.sendGTMEvent(\"Login_Success\");\n          localStorage.setItem(\"wizToken\", json.token);\n          this.props.updateUserInfo(json.user);\n          this.props.dismiss();\n        } else {\n          this.setState({\n            warning: this.props.intl.formatMessage({id: \"ID_SIGNIN_WARNING\"})\n          })\n        }\n      });\n  }\n\n  onClickSignUp = () => {\n    showPopUp(<SignUp history={this.props.history} />, {\n      darkmode: true,\n      mobileFullscreen: true\n    });\n  }\n\n  onClickFindLoginId = () => {\n    showPopUp(\n      <FindLoginId />,\n      {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      }\n    );\n  }\n\n  onClickFindPassword = () => {\n    showPopUp(\n      <FindPw />,\n      {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      }\n    );\n  }\n\n  render() {\n    return (\n      <View\n        { ...this.state }\n        passwordInputRef={this.passwordInputRef}\n        onChangeField={this.onChangeField}\n        onEnterLoginId={this.onEnterLoginId}\n        onClickLogin={this.onClickLogin}\n        onClickSignUp={this.onClickSignUp}\n        onClickFindLoginId={this.onClickFindLoginId}\n        onClickFindPassword={this.onClickFindPassword}\n        allFilled={this.allFilled}\n      />\n    )\n  }\n}\n\nexport default connect(\n  undefined,\n  {\n    updateUserInfo: userInfoActions.updateUserInfo\n  }\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}