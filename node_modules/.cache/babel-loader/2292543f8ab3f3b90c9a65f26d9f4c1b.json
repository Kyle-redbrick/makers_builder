{"ast":null,"code":"var _slicedToArray = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _get = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/get\");\n\nvar _assertThisInitialized = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _toConsumableArray = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _possibleConstructorReturn = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar _regeneratorRuntime = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _defineProperty = require(\"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/defineProperty\");\n\n/**\n * AgoraWebSDK_N-v4.8.1-0-ge9003043 Copyright AgoraInc.\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).AgoraRTC = t();\n}(this, function () {\n  \"use strict\";\n\n  var _Ld$ACCESS_POINT, _Ld$UNILBS, _Ld$STRING_UID_ALLOCA, _zh, _$h;\n\n  var e = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  function t(e, t, i) {\n    return e(i = {\n      path: t,\n      exports: {},\n      require: function require(e, t) {\n        return function () {\n          throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\");\n        }(null == t && i.path);\n      }\n    }, i.exports), i.exports;\n  }\n\n  var i = function i(e) {\n    return e && e.Math == Math && e;\n  },\n      r = i(\"object\" == typeof globalThis && globalThis) || i(\"object\" == typeof window && window) || i(\"object\" == typeof self && self) || i(\"object\" == typeof e && e) || Function(\"return this\")(),\n      n = function n(e) {\n    try {\n      return !!e();\n    } catch (e) {\n      return !0;\n    }\n  },\n      s = !n(function () {\n    return 7 != Object.defineProperty({}, \"a\", {\n      get: function get() {\n        return 7;\n      }\n    }).a;\n  }),\n      o = {}.propertyIsEnumerable,\n      a = Object.getOwnPropertyDescriptor,\n      c = {\n    f: a && !o.call({\n      1: 2\n    }, 1) ? function (e) {\n      var t = a(this, e);\n      return !!t && t.enumerable;\n    } : o\n  },\n      d = function d(e, t) {\n    return {\n      enumerable: !(1 & e),\n      configurable: !(2 & e),\n      writable: !(4 & e),\n      value: t\n    };\n  },\n      l = {}.toString,\n      A = function A(e) {\n    return l.call(e).slice(8, -1);\n  },\n      u = \"\".split,\n      h = n(function () {\n    return !Object(\"z\").propertyIsEnumerable(0);\n  }) ? function (e) {\n    return \"String\" == A(e) ? u.call(e, \"\") : Object(e);\n  } : Object,\n      p = function p(e) {\n    if (null == e) throw TypeError(\"Can't call method on \" + e);\n    return e;\n  },\n      E = function E(e) {\n    return h(p(e));\n  },\n      g = function g(e) {\n    return \"object\" == typeof e ? null !== e : \"function\" == typeof e;\n  },\n      _ = function _(e, t) {\n    if (!g(e)) return e;\n    var i, r;\n    if (t && \"function\" == typeof (i = e.toString) && !g(r = i.call(e))) return r;\n    if (\"function\" == typeof (i = e.valueOf) && !g(r = i.call(e))) return r;\n    if (!t && \"function\" == typeof (i = e.toString) && !g(r = i.call(e))) return r;\n    throw TypeError(\"Can't convert object to primitive value\");\n  },\n      I = {}.hasOwnProperty,\n      f = function f(e, t) {\n    return I.call(e, t);\n  },\n      m = r.document,\n      C = g(m) && g(m.createElement),\n      S = function S(e) {\n    return C ? m.createElement(e) : {};\n  },\n      R = !s && !n(function () {\n    return 7 != Object.defineProperty(S(\"div\"), \"a\", {\n      get: function get() {\n        return 7;\n      }\n    }).a;\n  }),\n      T = Object.getOwnPropertyDescriptor,\n      v = {\n    f: s ? T : function (e, t) {\n      if (e = E(e), t = _(t, !0), R) try {\n        return T(e, t);\n      } catch (e) {}\n      if (f(e, t)) return d(!c.f.call(e, t), e[t]);\n    }\n  },\n      y = /#|\\.prototype\\./,\n      w = function w(e, t) {\n    var i = O[N(e)];\n    return i == D || i != b && (\"function\" == typeof t ? n(t) : !!t);\n  },\n      N = w.normalize = function (e) {\n    return String(e).replace(y, \".\").toLowerCase();\n  },\n      O = w.data = {},\n      b = w.NATIVE = \"N\",\n      D = w.POLYFILL = \"P\",\n      k = w,\n      L = {},\n      P = function P(e) {\n    if (\"function\" != typeof e) throw TypeError(String(e) + \" is not a function\");\n    return e;\n  },\n      B = function B(e, t, i) {\n    if (P(e), void 0 === t) return e;\n\n    switch (i) {\n      case 0:\n        return function () {\n          return e.call(t);\n        };\n\n      case 1:\n        return function (i) {\n          return e.call(t, i);\n        };\n\n      case 2:\n        return function (i, r) {\n          return e.call(t, i, r);\n        };\n\n      case 3:\n        return function (i, r, n) {\n          return e.call(t, i, r, n);\n        };\n    }\n\n    return function () {\n      return e.apply(t, arguments);\n    };\n  },\n      M = function M(e) {\n    if (!g(e)) throw TypeError(String(e) + \" is not an object\");\n    return e;\n  },\n      U = Object.defineProperty,\n      Q = {\n    f: s ? U : function (e, t, i) {\n      if (M(e), t = _(t, !0), M(i), R) try {\n        return U(e, t, i);\n      } catch (e) {}\n      if (\"get\" in i || \"set\" in i) throw TypeError(\"Accessors not supported\");\n      return \"value\" in i && (e[t] = i.value), e;\n    }\n  },\n      F = s ? function (e, t, i) {\n    return Q.f(e, t, d(1, i));\n  } : function (e, t, i) {\n    return e[t] = i, e;\n  },\n      x = v.f,\n      V = function V(e) {\n    var t = function t(_t2, i, r) {\n      if (this instanceof e) {\n        switch (arguments.length) {\n          case 0:\n            return new e();\n\n          case 1:\n            return new e(_t2);\n\n          case 2:\n            return new e(_t2, i);\n        }\n\n        return new e(_t2, i, r);\n      }\n\n      return e.apply(this, arguments);\n    };\n\n    return t.prototype = e.prototype, t;\n  },\n      G = function G(e, t) {\n    var i,\n        n,\n        s,\n        o,\n        a,\n        c,\n        d,\n        l,\n        A = e.target,\n        u = e.global,\n        h = e.stat,\n        p = e.proto,\n        E = u ? r : h ? r[A] : (r[A] || {}).prototype,\n        g = u ? L : L[A] || (L[A] = {}),\n        _ = g.prototype;\n\n    for (s in t) {\n      i = !k(u ? s : A + (h ? \".\" : \"#\") + s, e.forced) && E && f(E, s), a = g[s], i && (c = e.noTargetGet ? (l = x(E, s)) && l.value : E[s]), o = i && c ? c : t[s], i && typeof a == typeof o || (d = e.bind && i ? B(o, r) : e.wrap && i ? V(o) : p && \"function\" == typeof o ? B(Function.call, o) : o, (e.sham || o && o.sham || a && a.sham) && F(d, \"sham\", !0), g[s] = d, p && (f(L, n = A + \"Prototype\") || F(L, n, {}), L[n][s] = o, e.real && _ && !_[s] && F(_, s, o)));\n    }\n  },\n      j = Math.ceil,\n      K = Math.floor,\n      W = function W(e) {\n    return isNaN(e = +e) ? 0 : (e > 0 ? K : j)(e);\n  },\n      H = Math.min,\n      Y = function Y(e) {\n    return e > 0 ? H(W(e), 9007199254740991) : 0;\n  },\n      q = Math.max,\n      J = Math.min,\n      X = function X(e, t) {\n    var i = W(e);\n    return i < 0 ? q(i + t, 0) : J(i, t);\n  },\n      z = function z(e) {\n    return function (t, i, r) {\n      var n,\n          s = E(t),\n          o = Y(s.length),\n          a = X(r, o);\n\n      if (e && i != i) {\n        for (; o > a;) {\n          if ((n = s[a++]) != n) return !0;\n        }\n      } else for (; o > a; a++) {\n        if ((e || a in s) && s[a] === i) return e || a || 0;\n      }\n\n      return !e && -1;\n    };\n  },\n      Z = {\n    includes: z(!0),\n    indexOf: z(!1)\n  },\n      $ = {},\n      ee = Z.indexOf,\n      te = function te(e, t) {\n    var i,\n        r = E(e),\n        n = 0,\n        s = [];\n\n    for (i in r) {\n      !f($, i) && f(r, i) && s.push(i);\n    }\n\n    for (; t.length > n;) {\n      f(r, i = t[n++]) && (~ee(s, i) || s.push(i));\n    }\n\n    return s;\n  },\n      ie = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"],\n      re = Object.keys || function (e) {\n    return te(e, ie);\n  },\n      ne = s ? Object.defineProperties : function (e, t) {\n    M(e);\n\n    for (var i, r = re(t), n = r.length, s = 0; n > s;) {\n      Q.f(e, i = r[s++], t[i]);\n    }\n\n    return e;\n  };\n\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: !s,\n    sham: !s\n  }, {\n    defineProperties: ne\n  });\n\n  var se = t(function (e) {\n    var t = L.Object,\n        i = e.exports = function (e, i) {\n      return t.defineProperties(e, i);\n    };\n\n    t.defineProperties.sham && (i.sham = !0);\n  }),\n      oe = function oe(e) {\n    return \"function\" == typeof e ? e : void 0;\n  },\n      ae = function ae(e, t) {\n    return arguments.length < 2 ? oe(L[e]) || oe(r[e]) : L[e] && L[e][t] || r[e] && r[e][t];\n  },\n      ce = ae(\"JSON\", \"stringify\"),\n      de = /[\\uD800-\\uDFFF]/g,\n      le = /^[\\uD800-\\uDBFF]$/,\n      Ae = /^[\\uDC00-\\uDFFF]$/,\n      ue = function ue(e, t, i) {\n    var r = i.charAt(t - 1),\n        n = i.charAt(t + 1);\n    return le.test(e) && !Ae.test(n) || Ae.test(e) && !le.test(r) ? \"\\\\u\" + e.charCodeAt(0).toString(16) : e;\n  },\n      he = n(function () {\n    return \"\\\"\\\\udf06\\\\ud834\\\"\" !== ce(\"\\uDF06\\uD834\") || \"\\\"\\\\udead\\\"\" !== ce(\"\\uDEAD\");\n  });\n\n  ce && G({\n    target: \"JSON\",\n    stat: !0,\n    forced: he\n  }, {\n    stringify: function stringify(e, t, i) {\n      var r = ce.apply(null, arguments);\n      return \"string\" == typeof r ? r.replace(de, ue) : r;\n    }\n  }), L.JSON || (L.JSON = {\n    stringify: JSON.stringify\n  });\n\n  var pe,\n      Ee,\n      ge = function ge(e, t, i) {\n    return L.JSON.stringify.apply(null, arguments);\n  },\n      _e = Array.isArray || function (e) {\n    return \"Array\" == A(e);\n  },\n      Ie = function Ie(e) {\n    return Object(p(e));\n  },\n      fe = function fe(e, t, i) {\n    var r = _(t);\n\n    r in e ? Q.f(e, r, d(0, i)) : e[r] = i;\n  },\n      me = \"__core-js_shared__\",\n      Ce = r[me] || function (e, t) {\n    try {\n      F(r, e, t);\n    } catch (i) {\n      r[e] = t;\n    }\n\n    return t;\n  }(me, {}),\n      Se = t(function (e) {\n    (e.exports = function (e, t) {\n      return Ce[e] || (Ce[e] = void 0 !== t ? t : {});\n    })(\"versions\", []).push({\n      version: \"3.4.3\",\n      mode: \"pure\",\n      copyright: \"© 2019 Denis Pushkarev (zloirock.ru)\"\n    });\n  }),\n      Re = 0,\n      Te = Math.random(),\n      ve = function ve(e) {\n    return \"Symbol(\" + String(void 0 === e ? \"\" : e) + \")_\" + (++Re + Te).toString(36);\n  },\n      ye = !!Object.getOwnPropertySymbols && !n(function () {\n    return !String(Symbol());\n  }),\n      we = ye && !Symbol.sham && \"symbol\" == typeof Symbol(),\n      Ne = Se(\"wks\"),\n      Oe = r.Symbol,\n      be = we ? Oe : ve,\n      De = function De(e) {\n    return f(Ne, e) || (ye && f(Oe, e) ? Ne[e] = Oe[e] : Ne[e] = be(\"Symbol.\" + e)), Ne[e];\n  },\n      ke = De(\"species\"),\n      Le = function Le(e, t) {\n    var i;\n    return _e(e) && (\"function\" != typeof (i = e.constructor) || i !== Array && !_e(i.prototype) ? g(i) && null === (i = i[ke]) && (i = void 0) : i = void 0), new (void 0 === i ? Array : i)(0 === t ? 0 : t);\n  },\n      Pe = ae(\"navigator\", \"userAgent\") || \"\",\n      Be = r.process,\n      Me = Be && Be.versions,\n      Ue = Me && Me.v8;\n\n  Ue ? Ee = (pe = Ue.split(\".\"))[0] + pe[1] : Pe && (!(pe = Pe.match(/Edge\\/(\\d+)/)) || pe[1] >= 74) && (pe = Pe.match(/Chrome\\/(\\d+)/)) && (Ee = pe[1]);\n\n  var Qe = Ee && +Ee,\n      Fe = De(\"species\"),\n      xe = function xe(e) {\n    return Qe >= 51 || !n(function () {\n      var t = [];\n      return (t.constructor = {})[Fe] = function () {\n        return {\n          foo: 1\n        };\n      }, 1 !== t[e](Boolean).foo;\n    });\n  },\n      Ve = De(\"isConcatSpreadable\"),\n      Ge = 9007199254740991,\n      je = \"Maximum allowed index exceeded\",\n      Ke = Qe >= 51 || !n(function () {\n    var e = [];\n    return e[Ve] = !1, e.concat()[0] !== e;\n  }),\n      We = xe(\"concat\"),\n      He = function He(e) {\n    if (!g(e)) return !1;\n    var t = e[Ve];\n    return void 0 !== t ? !!t : _e(e);\n  };\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: !Ke || !We\n  }, {\n    concat: function concat(e) {\n      var t,\n          i,\n          r,\n          n,\n          s,\n          o = Ie(this),\n          a = Le(o, 0),\n          c = 0;\n\n      for (t = -1, r = arguments.length; t < r; t++) {\n        if (He(s = -1 === t ? o : arguments[t])) {\n          if (c + (n = Y(s.length)) > Ge) throw TypeError(je);\n\n          for (i = 0; i < n; i++, c++) {\n            i in s && fe(a, c, s[i]);\n          }\n        } else {\n          if (c >= Ge) throw TypeError(je);\n          fe(a, c++, s);\n        }\n      }\n\n      return a.length = c, a;\n    }\n  });\n\n  var Ye = function Ye(e) {\n    return L[e + \"Prototype\"];\n  },\n      qe = Ye(\"Array\").concat,\n      Je = Array.prototype,\n      Xe = function Xe(e) {\n    var t = e.concat;\n    return e === Je || e instanceof Array && t === Je.concat ? qe : t;\n  },\n      ze = !n(function () {\n    return Object.isExtensible(Object.preventExtensions({}));\n  }),\n      Ze = t(function (e) {\n    var t = Q.f,\n        i = ve(\"meta\"),\n        r = 0,\n        n = Object.isExtensible || function () {\n      return !0;\n    },\n        s = function s(e) {\n      t(e, i, {\n        value: {\n          objectID: \"O\" + ++r,\n          weakData: {}\n        }\n      });\n    },\n        o = e.exports = {\n      REQUIRED: !1,\n      fastKey: function fastKey(e, t) {\n        if (!g(e)) return \"symbol\" == typeof e ? e : (\"string\" == typeof e ? \"S\" : \"P\") + e;\n\n        if (!f(e, i)) {\n          if (!n(e)) return \"F\";\n          if (!t) return \"E\";\n          s(e);\n        }\n\n        return e[i].objectID;\n      },\n      getWeakData: function getWeakData(e, t) {\n        if (!f(e, i)) {\n          if (!n(e)) return !0;\n          if (!t) return !1;\n          s(e);\n        }\n\n        return e[i].weakData;\n      },\n      onFreeze: function onFreeze(e) {\n        return ze && o.REQUIRED && n(e) && !f(e, i) && s(e), e;\n      }\n    };\n\n    $[i] = !0;\n  }),\n      $e = {},\n      et = De(\"iterator\"),\n      tt = Array.prototype,\n      it = function it(e) {\n    return void 0 !== e && ($e.Array === e || tt[et] === e);\n  },\n      rt = {};\n\n  rt[De(\"toStringTag\")] = \"z\";\n\n  var nt,\n      st,\n      ot,\n      at = \"[object z]\" === String(rt),\n      ct = De(\"toStringTag\"),\n      dt = \"Arguments\" == A(function () {\n    return arguments;\n  }()),\n      lt = at ? A : function (e) {\n    var t, i, r;\n    return void 0 === e ? \"Undefined\" : null === e ? \"Null\" : \"string\" == typeof (i = function (e, t) {\n      try {\n        return e[t];\n      } catch (e) {}\n    }(t = Object(e), ct)) ? i : dt ? A(t) : \"Object\" == (r = A(t)) && \"function\" == typeof t.callee ? \"Arguments\" : r;\n  },\n      At = De(\"iterator\"),\n      ut = function ut(e) {\n    if (null != e) return e[At] || e[\"@@iterator\"] || $e[lt(e)];\n  },\n      ht = function ht(e, t, i, r) {\n    try {\n      return r ? t(M(i)[0], i[1]) : t(i);\n    } catch (t) {\n      var n = e.return;\n      throw void 0 !== n && M(n.call(e)), t;\n    }\n  },\n      pt = t(function (e) {\n    var t = function t(e, _t3) {\n      this.stopped = e, this.result = _t3;\n    };\n\n    (e.exports = function (e, i, r, n, s) {\n      var o,\n          a,\n          c,\n          d,\n          l,\n          A,\n          u,\n          h = B(i, r, n ? 2 : 1);\n      if (s) o = e;else {\n        if (\"function\" != typeof (a = ut(e))) throw TypeError(\"Target is not iterable\");\n\n        if (it(a)) {\n          for (c = 0, d = Y(e.length); d > c; c++) {\n            if ((l = n ? h(M(u = e[c])[0], u[1]) : h(e[c])) && l instanceof t) return l;\n          }\n\n          return new t(!1);\n        }\n\n        o = a.call(e);\n      }\n\n      for (A = o.next; !(u = A.call(o)).done;) {\n        if (\"object\" == typeof (l = ht(o, h, u.value, n)) && l && l instanceof t) return l;\n      }\n\n      return new t(!1);\n    }).stop = function (e) {\n      return new t(!0, e);\n    };\n  }),\n      Et = function Et(e, t, i) {\n    if (!(e instanceof t)) throw TypeError(\"Incorrect \" + (i ? i + \" \" : \"\") + \"invocation\");\n    return e;\n  },\n      gt = at ? {}.toString : function () {\n    return \"[object \" + lt(this) + \"]\";\n  },\n      _t = Q.f,\n      It = De(\"toStringTag\"),\n      ft = function ft(e, t, i, r) {\n    if (e) {\n      var n = i ? e : e.prototype;\n      f(n, It) || _t(n, It, {\n        configurable: !0,\n        value: t\n      }), r && !at && F(n, \"toString\", gt);\n    }\n  },\n      mt = [].push,\n      Ct = function Ct(e) {\n    var t = 1 == e,\n        i = 2 == e,\n        r = 3 == e,\n        n = 4 == e,\n        s = 6 == e,\n        o = 5 == e || s;\n    return function (a, c, d, l) {\n      for (var A, u, p = Ie(a), E = h(p), g = B(c, d, 3), _ = Y(E.length), I = 0, f = l || Le, m = t ? f(a, _) : i ? f(a, 0) : void 0; _ > I; I++) {\n        if ((o || I in E) && (u = g(A = E[I], I, p), e)) if (t) m[I] = u;else if (u) switch (e) {\n          case 3:\n            return !0;\n\n          case 5:\n            return A;\n\n          case 6:\n            return I;\n\n          case 2:\n            mt.call(m, A);\n        } else if (n) return !1;\n      }\n\n      return s ? -1 : r || n ? n : m;\n    };\n  },\n      St = {\n    forEach: Ct(0),\n    map: Ct(1),\n    filter: Ct(2),\n    some: Ct(3),\n    every: Ct(4),\n    find: Ct(5),\n    findIndex: Ct(6)\n  },\n      Rt = Se(\"native-function-to-string\", Function.toString),\n      Tt = r.WeakMap,\n      vt = \"function\" == typeof Tt && /native code/.test(Rt.call(Tt)),\n      yt = Se(\"keys\"),\n      wt = function wt(e) {\n    return yt[e] || (yt[e] = ve(e));\n  },\n      Nt = r.WeakMap;\n\n  if (vt) {\n    var Ot = new Nt(),\n        bt = Ot.get,\n        Dt = Ot.has,\n        kt = Ot.set;\n    nt = function nt(e, t) {\n      return kt.call(Ot, e, t), t;\n    }, st = function st(e) {\n      return bt.call(Ot, e) || {};\n    }, ot = function ot(e) {\n      return Dt.call(Ot, e);\n    };\n  } else {\n    var Lt = wt(\"state\");\n    $[Lt] = !0, nt = function nt(e, t) {\n      return F(e, Lt, t), t;\n    }, st = function st(e) {\n      return f(e, Lt) ? e[Lt] : {};\n    }, ot = function ot(e) {\n      return f(e, Lt);\n    };\n  }\n\n  var Pt = {\n    set: nt,\n    get: st,\n    has: ot,\n    enforce: function enforce(e) {\n      return ot(e) ? st(e) : nt(e, {});\n    },\n    getterFor: function getterFor(e) {\n      return function (t) {\n        var i;\n        if (!g(t) || (i = st(t)).type !== e) throw TypeError(\"Incompatible receiver, \" + e + \" required\");\n        return i;\n      };\n    }\n  },\n      Bt = Q.f,\n      Mt = St.forEach,\n      Ut = Pt.set,\n      Qt = Pt.getterFor,\n      Ft = function Ft(e, t, i) {\n    var o,\n        a = -1 !== e.indexOf(\"Map\"),\n        c = -1 !== e.indexOf(\"Weak\"),\n        d = a ? \"set\" : \"add\",\n        l = r[e],\n        A = l && l.prototype,\n        u = {};\n\n    if (s && \"function\" == typeof l && (c || A.forEach && !n(function () {\n      new l().entries().next();\n    }))) {\n      o = t(function (t, i) {\n        Ut(Et(t, o, e), {\n          type: e,\n          collection: new l()\n        }), null != i && pt(i, t[d], t, a);\n      });\n      var h = Qt(e);\n      Mt([\"add\", \"clear\", \"delete\", \"forEach\", \"get\", \"has\", \"set\", \"keys\", \"values\", \"entries\"], function (e) {\n        var t = \"add\" == e || \"set\" == e;\n        !(e in A) || c && \"clear\" == e || F(o.prototype, e, function (i, r) {\n          var n = h(this).collection;\n          if (!t && c && !g(i)) return \"get\" == e && void 0;\n          var s = n[e](0 === i ? 0 : i, r);\n          return t ? this : s;\n        });\n      }), c || Bt(o.prototype, \"size\", {\n        configurable: !0,\n        get: function get() {\n          return h(this).collection.size;\n        }\n      });\n    } else o = i.getConstructor(t, e, a, d), Ze.REQUIRED = !0;\n\n    return ft(o, e, !1, !0), u[e] = o, G({\n      global: !0,\n      forced: !0\n    }, u), c || i.setStrong(o, e, a), o;\n  },\n      xt = ae(\"document\", \"documentElement\"),\n      Vt = wt(\"IE_PROTO\"),\n      Gt = function Gt() {},\n      _jt = function jt() {\n    var e,\n        t = S(\"iframe\"),\n        i = ie.length;\n\n    for (t.style.display = \"none\", xt.appendChild(t), t.src = String(\"javascript:\"), (e = t.contentWindow.document).open(), e.write(\"<script>document.F=Object<\\/script>\"), e.close(), _jt = e.F; i--;) {\n      delete _jt.prototype[ie[i]];\n    }\n\n    return _jt();\n  },\n      Kt = Object.create || function (e, t) {\n    var i;\n    return null !== e ? (Gt.prototype = M(e), i = new Gt(), Gt.prototype = null, i[Vt] = e) : i = _jt(), void 0 === t ? i : ne(i, t);\n  };\n\n  $[Vt] = !0;\n\n  var Wt,\n      Ht,\n      Yt,\n      qt = function qt(e, t, i, r) {\n    r && r.enumerable ? e[t] = i : F(e, t, i);\n  },\n      Jt = function Jt(e, t, i) {\n    for (var r in t) {\n      i && i.unsafe && e[r] ? e[r] = t[r] : qt(e, r, t[r], i);\n    }\n\n    return e;\n  },\n      Xt = !n(function () {\n    function e() {}\n\n    return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;\n  }),\n      zt = wt(\"IE_PROTO\"),\n      Zt = Object.prototype,\n      $t = Xt ? Object.getPrototypeOf : function (e) {\n    return e = Ie(e), f(e, zt) ? e[zt] : \"function\" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? Zt : null;\n  },\n      ei = (De(\"iterator\"), !1);\n\n  [].keys && (\"next\" in (Yt = [].keys()) ? (Ht = $t($t(Yt))) !== Object.prototype && (Wt = Ht) : ei = !0), null == Wt && (Wt = {});\n\n  var ti = {\n    IteratorPrototype: Wt,\n    BUGGY_SAFARI_ITERATORS: ei\n  },\n      ii = ti.IteratorPrototype,\n      ri = function ri() {\n    return this;\n  },\n      ni = function ni(e, t, i) {\n    var r = t + \" Iterator\";\n    return e.prototype = Kt(ii, {\n      next: d(1, i)\n    }), ft(e, r, !1, !0), $e[r] = ri, e;\n  },\n      si = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n    var e,\n        t = !1,\n        i = {};\n\n    try {\n      (e = Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set).call(i, []), t = i instanceof Array;\n    } catch (e) {}\n\n    return function (i, r) {\n      return M(i), function (e) {\n        if (!g(e) && null !== e) throw TypeError(\"Can't set \" + String(e) + \" as a prototype\");\n      }(r), t ? e.call(i, r) : i.__proto__ = r, i;\n    };\n  }() : void 0),\n      oi = ti.IteratorPrototype,\n      ai = ti.BUGGY_SAFARI_ITERATORS,\n      ci = De(\"iterator\"),\n      di = \"keys\",\n      li = \"values\",\n      Ai = \"entries\",\n      ui = function ui() {\n    return this;\n  },\n      hi = function hi(e, t, i, r, n, s, o) {\n    ni(i, t, r);\n\n    var a,\n        c,\n        d,\n        l = function l(e) {\n      if (e === n && E) return E;\n      if (!ai && e in h) return h[e];\n\n      switch (e) {\n        case di:\n        case li:\n        case Ai:\n          return function () {\n            return new i(this, e);\n          };\n      }\n\n      return function () {\n        return new i(this);\n      };\n    },\n        A = t + \" Iterator\",\n        u = !1,\n        h = e.prototype,\n        p = h[ci] || h[\"@@iterator\"] || n && h[n],\n        E = !ai && p || l(n),\n        g = \"Array\" == t && h.entries || p;\n\n    if (g && (a = $t(g.call(new e())), oi !== Object.prototype && a.next && (ft(a, A, !0, !0), $e[A] = ui)), n == li && p && p.name !== li && (u = !0, E = function E() {\n      return p.call(this);\n    }), o && h[ci] !== E && F(h, ci, E), $e[t] = E, n) if (c = {\n      values: l(li),\n      keys: s ? E : l(di),\n      entries: l(Ai)\n    }, o) for (d in c) {\n      (ai || u || !(d in h)) && qt(h, d, c[d]);\n    } else G({\n      target: t,\n      proto: !0,\n      forced: ai || u\n    }, c);\n    return c;\n  },\n      pi = De(\"species\"),\n      Ei = function Ei(e) {\n    var t = ae(e),\n        i = Q.f;\n    s && t && !t[pi] && i(t, pi, {\n      configurable: !0,\n      get: function get() {\n        return this;\n      }\n    });\n  },\n      gi = Q.f,\n      _i = Ze.fastKey,\n      Ii = Pt.set,\n      fi = Pt.getterFor,\n      mi = (Ft(\"Map\", function (e) {\n    return function () {\n      return e(this, arguments.length ? arguments[0] : void 0);\n    };\n  }, {\n    getConstructor: function getConstructor(e, t, i, r) {\n      var n = e(function (e, o) {\n        Et(e, n, t), Ii(e, {\n          type: t,\n          index: Kt(null),\n          first: void 0,\n          last: void 0,\n          size: 0\n        }), s || (e.size = 0), null != o && pt(o, e[r], e, i);\n      }),\n          o = fi(t),\n          a = function a(e, t, i) {\n        var r,\n            n,\n            a = o(e),\n            d = c(e, t);\n        return d ? d.value = i : (a.last = d = {\n          index: n = _i(t, !0),\n          key: t,\n          value: i,\n          previous: r = a.last,\n          next: void 0,\n          removed: !1\n        }, a.first || (a.first = d), r && (r.next = d), s ? a.size++ : e.size++, \"F\" !== n && (a.index[n] = d)), e;\n      },\n          c = function c(e, t) {\n        var i,\n            r = o(e),\n            n = _i(t);\n\n        if (\"F\" !== n) return r.index[n];\n\n        for (i = r.first; i; i = i.next) {\n          if (i.key == t) return i;\n        }\n      };\n\n      return Jt(n.prototype, {\n        clear: function clear() {\n          for (var e = o(this), t = e.index, i = e.first; i;) {\n            i.removed = !0, i.previous && (i.previous = i.previous.next = void 0), delete t[i.index], i = i.next;\n          }\n\n          e.first = e.last = void 0, s ? e.size = 0 : this.size = 0;\n        },\n        delete: function _delete(e) {\n          var t = this,\n              i = o(t),\n              r = c(t, e);\n\n          if (r) {\n            var n = r.next,\n                a = r.previous;\n            delete i.index[r.index], r.removed = !0, a && (a.next = n), n && (n.previous = a), i.first == r && (i.first = n), i.last == r && (i.last = a), s ? i.size-- : t.size--;\n          }\n\n          return !!r;\n        },\n        forEach: function forEach(e) {\n          for (var t, i = o(this), r = B(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.next : i.first;) {\n            for (r(t.value, t.key, this); t && t.removed;) {\n              t = t.previous;\n            }\n          }\n        },\n        has: function has(e) {\n          return !!c(this, e);\n        }\n      }), Jt(n.prototype, i ? {\n        get: function get(e) {\n          var t = c(this, e);\n          return t && t.value;\n        },\n        set: function set(e, t) {\n          return a(this, 0 === e ? 0 : e, t);\n        }\n      } : {\n        add: function add(e) {\n          return a(this, e = 0 === e ? 0 : e, e);\n        }\n      }), s && gi(n.prototype, \"size\", {\n        get: function get() {\n          return o(this).size;\n        }\n      }), n;\n    },\n    setStrong: function setStrong(e, t, i) {\n      var r = t + \" Iterator\",\n          n = fi(t),\n          s = fi(r);\n      hi(e, t, function (e, t) {\n        Ii(this, {\n          type: r,\n          target: e,\n          state: n(e),\n          kind: t,\n          last: void 0\n        });\n      }, function () {\n        for (var e = s(this), t = e.kind, i = e.last; i && i.removed;) {\n          i = i.previous;\n        }\n\n        return e.target && (e.last = i = i ? i.next : e.state.first) ? \"keys\" == t ? {\n          value: i.key,\n          done: !1\n        } : \"values\" == t ? {\n          value: i.value,\n          done: !1\n        } : {\n          value: [i.key, i.value],\n          done: !1\n        } : (e.target = void 0, {\n          value: void 0,\n          done: !0\n        });\n      }, i ? \"entries\" : \"values\", !i, !0), Ei(t);\n    }\n  }), function (e) {\n    return function (t, i) {\n      var r,\n          n,\n          s = String(p(t)),\n          o = W(i),\n          a = s.length;\n      return o < 0 || o >= a ? e ? \"\" : void 0 : (r = s.charCodeAt(o)) < 55296 || r > 56319 || o + 1 === a || (n = s.charCodeAt(o + 1)) < 56320 || n > 57343 ? e ? s.charAt(o) : r : e ? s.slice(o, o + 2) : n - 56320 + (r - 55296 << 10) + 65536;\n    };\n  }),\n      Ci = {\n    codeAt: mi(!1),\n    charAt: mi(!0)\n  },\n      Si = Ci.charAt,\n      Ri = \"String Iterator\",\n      Ti = Pt.set,\n      vi = Pt.getterFor(Ri);\n\n  hi(String, \"String\", function (e) {\n    Ti(this, {\n      type: Ri,\n      string: String(e),\n      index: 0\n    });\n  }, function () {\n    var e,\n        t = vi(this),\n        i = t.string,\n        r = t.index;\n    return r >= i.length ? {\n      value: void 0,\n      done: !0\n    } : (e = Si(i, r), t.index += e.length, {\n      value: e,\n      done: !1\n    });\n  });\n  var yi = \"Array Iterator\",\n      wi = Pt.set,\n      Ni = Pt.getterFor(yi);\n  hi(Array, \"Array\", function (e, t) {\n    wi(this, {\n      type: yi,\n      target: E(e),\n      index: 0,\n      kind: t\n    });\n  }, function () {\n    var e = Ni(this),\n        t = e.target,\n        i = e.kind,\n        r = e.index++;\n    return !t || r >= t.length ? (e.target = void 0, {\n      value: void 0,\n      done: !0\n    }) : \"keys\" == i ? {\n      value: r,\n      done: !1\n    } : \"values\" == i ? {\n      value: t[r],\n      done: !1\n    } : {\n      value: [r, t[r]],\n      done: !1\n    };\n  }, \"values\");\n  $e.Arguments = $e.Array;\n  var Oi = De(\"toStringTag\");\n\n  for (var bi in {\n    CSSRuleList: 0,\n    CSSStyleDeclaration: 0,\n    CSSValueList: 0,\n    ClientRectList: 0,\n    DOMRectList: 0,\n    DOMStringList: 0,\n    DOMTokenList: 1,\n    DataTransferItemList: 0,\n    FileList: 0,\n    HTMLAllCollection: 0,\n    HTMLCollection: 0,\n    HTMLFormElement: 0,\n    HTMLSelectElement: 0,\n    MediaList: 0,\n    MimeTypeArray: 0,\n    NamedNodeMap: 0,\n    NodeList: 1,\n    PaintRequestList: 0,\n    Plugin: 0,\n    PluginArray: 0,\n    SVGLengthList: 0,\n    SVGNumberList: 0,\n    SVGPathSegList: 0,\n    SVGPointList: 0,\n    SVGStringList: 0,\n    SVGTransformList: 0,\n    SourceBufferList: 0,\n    StyleSheetList: 0,\n    TextTrackCueList: 0,\n    TextTrackList: 0,\n    TouchList: 0\n  }) {\n    var Di = r[bi],\n        ki = Di && Di.prototype;\n    ki && !ki[Oi] && F(ki, Oi, bi), $e[bi] = $e.Array;\n  }\n\n  var Li = L.Map,\n      Pi = De(\"match\"),\n      Bi = function Bi(e) {\n    if (function (e) {\n      var t;\n      return g(e) && (void 0 !== (t = e[Pi]) ? !!t : \"RegExp\" == A(e));\n    }(e)) throw TypeError(\"The method doesn't accept regular expressions\");\n    return e;\n  },\n      Mi = De(\"match\"),\n      Ui = function Ui(e) {\n    var t = /./;\n\n    try {\n      \"/./\"[e](t);\n    } catch (i) {\n      try {\n        return t[Mi] = !1, \"/./\"[e](t);\n      } catch (e) {}\n    }\n\n    return !1;\n  },\n      Qi = \"\".endsWith,\n      Fi = Math.min,\n      xi = Ui(\"endsWith\");\n\n  G({\n    target: \"String\",\n    proto: !0,\n    forced: !xi\n  }, {\n    endsWith: function endsWith(e) {\n      var t = String(p(this));\n      Bi(e);\n      var i = arguments.length > 1 ? arguments[1] : void 0,\n          r = Y(t.length),\n          n = void 0 === i ? r : Fi(Y(i), r),\n          s = String(e);\n      return Qi ? Qi.call(t, s, n) : t.slice(n - s.length, n) === s;\n    }\n  });\n\n  var Vi = Ye(\"String\").endsWith,\n      Gi = String.prototype,\n      ji = function ji(e) {\n    var t = e.endsWith;\n    return \"string\" == typeof e || e === Gi || e instanceof String && t === Gi.endsWith ? Vi : t;\n  },\n      Ki = function Ki(e, t) {\n    var i = [][e];\n    return !i || !n(function () {\n      i.call(null, t || function () {\n        throw 1;\n      }, 1);\n    });\n  },\n      Wi = St.forEach,\n      Hi = Ki(\"forEach\") ? function (e) {\n    return Wi(this, e, arguments.length > 1 ? arguments[1] : void 0);\n  } : [].forEach;\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: [].forEach != Hi\n  }, {\n    forEach: Hi\n  });\n\n  var Yi = Ye(\"Array\").forEach,\n      qi = Array.prototype,\n      Ji = {\n    DOMTokenList: !0,\n    NodeList: !0\n  },\n      Xi = function Xi(e) {\n    var t = e.forEach;\n    return e === qi || e instanceof Array && t === qi.forEach || Ji.hasOwnProperty(lt(e)) ? Yi : t;\n  },\n      zi = {\n    f: Object.getOwnPropertySymbols\n  },\n      Zi = Object.assign,\n      $i = !Zi || n(function () {\n    var e = {},\n        t = {},\n        i = Symbol(),\n        r = \"abcdefghijklmnopqrst\";\n    return e[i] = 7, r.split(\"\").forEach(function (e) {\n      t[e] = e;\n    }), 7 != Zi({}, e)[i] || re(Zi({}, t)).join(\"\") != r;\n  }) ? function (e, t) {\n    for (var i = Ie(e), r = arguments.length, n = 1, o = zi.f, a = c.f; r > n;) {\n      for (var d, l = h(arguments[n++]), A = o ? re(l).concat(o(l)) : re(l), u = A.length, p = 0; u > p;) {\n        d = A[p++], s && !a.call(l, d) || (i[d] = l[d]);\n      }\n    }\n\n    return i;\n  } : Zi;\n\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: Object.assign !== $i\n  }, {\n    assign: $i\n  });\n  var er = L.Object.assign,\n      tr = n(function () {\n    re(1);\n  });\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: tr\n  }, {\n    keys: function keys(e) {\n      return re(Ie(e));\n    }\n  });\n\n  var ir = L.Object.keys,\n      rr = function rr(e) {\n    return function (t, i, r, n) {\n      P(i);\n      var s = Ie(t),\n          o = h(s),\n          a = Y(s.length),\n          c = e ? a - 1 : 0,\n          d = e ? -1 : 1;\n      if (r < 2) for (;;) {\n        if (c in o) {\n          n = o[c], c += d;\n          break;\n        }\n\n        if (c += d, e ? c < 0 : a <= c) throw TypeError(\"Reduce of empty array with no initial value\");\n      }\n\n      for (; e ? c >= 0 : a > c; c += d) {\n        c in o && (n = i(n, o[c], c, s));\n      }\n\n      return n;\n    };\n  },\n      nr = {\n    left: rr(!1),\n    right: rr(!0)\n  }.left;\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: Ki(\"reduce\")\n  }, {\n    reduce: function reduce(e) {\n      return nr(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var sr = Ye(\"Array\").reduce,\n      or = Array.prototype,\n      ar = function ar(e) {\n    var t = e.reduce;\n    return e === or || e instanceof Array && t === or.reduce ? sr : t;\n  };\n\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: !s,\n    sham: !s\n  }, {\n    defineProperty: Q.f\n  });\n\n  var cr = t(function (e) {\n    var t = L.Object,\n        i = e.exports = function (e, i, r) {\n      return t.defineProperty(e, i, r);\n    };\n\n    t.defineProperty.sham && (i.sham = !0);\n  }),\n      dr = cr,\n      lr = \"\\t\\n\\x0B\\f\\r \\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF\",\n      Ar = \"[\" + lr + \"]\",\n      ur = RegExp(\"^\" + Ar + Ar + \"*\"),\n      hr = RegExp(Ar + Ar + \"*$\"),\n      pr = function pr(e) {\n    return function (t) {\n      var i = String(p(t));\n      return 1 & e && (i = i.replace(ur, \"\")), 2 & e && (i = i.replace(hr, \"\")), i;\n    };\n  },\n      Er = {\n    start: pr(1),\n    end: pr(2),\n    trim: pr(3)\n  },\n      gr = Er.trim,\n      _r = r.parseInt,\n      Ir = /^[+-]?0[Xx]/,\n      fr = 8 !== _r(lr + \"08\") || 22 !== _r(lr + \"0x16\") ? function (e, t) {\n    var i = gr(String(e));\n    return _r(i, t >>> 0 || (Ir.test(i) ? 16 : 10));\n  } : _r;\n\n  G({\n    global: !0,\n    forced: parseInt != fr\n  }, {\n    parseInt: fr\n  });\n  var mr = L.parseInt;\n  var Cr = !0,\n      Sr = !0;\n\n  function Rr(e, t, i) {\n    var r = e.match(t);\n    return r && r.length >= i && mr(r[i], 10);\n  }\n\n  function Tr(e, t, i) {\n    if (!e.RTCPeerConnection) return;\n    var r = e.RTCPeerConnection.prototype,\n        n = r.addEventListener;\n\n    r.addEventListener = function (e, r) {\n      if (e !== t) return n.apply(this, arguments);\n\n      var s = function s(e) {\n        var t = i(e);\n        t && r(t);\n      };\n\n      return this._eventMap = this._eventMap || {}, this._eventMap[r] = s, n.apply(this, [e, s]);\n    };\n\n    var s = r.removeEventListener;\n    r.removeEventListener = function (e, i) {\n      if (e !== t || !this._eventMap || !this._eventMap[i]) return s.apply(this, arguments);\n      var r = this._eventMap[i];\n      return delete this._eventMap[i], s.apply(this, [e, r]);\n    }, dr(r, \"on\" + t, {\n      get: function get() {\n        return this[\"_on\" + t];\n      },\n      set: function set(e) {\n        this[\"_on\" + t] && (this.removeEventListener(t, this[\"_on\" + t]), delete this[\"_on\" + t]), e && this.addEventListener(t, this[\"_on\" + t] = e);\n      },\n      enumerable: !0,\n      configurable: !0\n    });\n  }\n\n  function vr(e) {\n    return \"boolean\" != typeof e ? new Error(\"Argument type: \" + typeof e + \". Please use a boolean.\") : (Cr = e, e ? \"adapter.js logging disabled\" : \"adapter.js logging enabled\");\n  }\n\n  function yr(e) {\n    return \"boolean\" != typeof e ? new Error(\"Argument type: \" + typeof e + \". Please use a boolean.\") : (Sr = !e, \"adapter.js deprecation warnings \" + (e ? \"disabled\" : \"enabled\"));\n  }\n\n  function wr() {\n    if (\"object\" == typeof window) {\n      if (Cr) return;\n      \"undefined\" != typeof console && \"function\" == typeof console.log && console.log.apply(console, arguments);\n    }\n  }\n\n  function Nr(e, t) {\n    Sr && console.warn(e + \" is deprecated, please use \" + t + \" instead.\");\n  }\n\n  function Or(e) {\n    var t = e.navigator,\n        i = {\n      browser: null,\n      version: null\n    };\n    if (void 0 === e || !e.navigator) return i.browser = \"Not a browser.\", i;\n    if (t.mozGetUserMedia) i.browser = \"firefox\", i.version = Rr(t.userAgent, /Firefox\\/(\\d+)\\./, 1);else if (t.webkitGetUserMedia || !1 === e.isSecureContext && e.webkitRTCPeerConnection && !e.RTCIceGatherer) i.browser = \"chrome\", i.version = Rr(t.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);else if (t.mediaDevices && t.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) i.browser = \"edge\", i.version = Rr(t.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);else {\n      if (!e.RTCPeerConnection || !t.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) return i.browser = \"Not a supported browser.\", i;\n      i.browser = \"safari\", i.version = Rr(t.userAgent, /AppleWebKit\\/(\\d+)\\./, 1), i.supportsUnifiedPlan = e.RTCRtpTransceiver && \"currentDirection\" in e.RTCRtpTransceiver.prototype;\n    }\n    return i;\n  }\n\n  function br(e) {\n    return \"[object Object]\" === Object.prototype.toString.call(e);\n  }\n\n  function Dr(e) {\n    var t;\n    return br(e) ? ar(t = ir(e)).call(t, function (t, i) {\n      var r = br(e[i]),\n          n = r ? Dr(e[i]) : e[i],\n          s = r && !ir(n).length;\n      return void 0 === n || s ? t : er(t, _defineProperty({}, i, n));\n    }, {}) : e;\n  }\n\n  function kr(e, t, i) {\n    var r = i ? \"outbound-rtp\" : \"inbound-rtp\",\n        n = new Li();\n    if (null === t) return n;\n    var s = [];\n    return Xi(e).call(e, function (e) {\n      \"track\" === e.type && e.trackIdentifier === t.id && s.push(e);\n    }), Xi(s).call(s, function (t) {\n      Xi(e).call(e, function (i) {\n        i.type === r && i.trackId === t.id && function e(t, i, r) {\n          var n;\n          i && !r.has(i.id) && (r.set(i.id, i), Xi(n = ir(i)).call(n, function (n) {\n            if (ji(n).call(n, \"Id\")) e(t, t.get(i[n]), r);else if (ji(n).call(n, \"Ids\")) {\n              var s;\n              Xi(s = i[n]).call(s, function (i) {\n                e(t, t.get(i), r);\n              });\n            }\n          }));\n        }(e, i, n);\n      });\n    }), n;\n  }\n\n  var Lr = v.f,\n      Pr = n(function () {\n    Lr(1);\n  });\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: !s || Pr,\n    sham: !s\n  }, {\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(e, t) {\n      return Lr(E(e), t);\n    }\n  });\n  var Br = t(function (e) {\n    var t = L.Object,\n        i = e.exports = function (e, i) {\n      return t.getOwnPropertyDescriptor(e, i);\n    };\n\n    t.getOwnPropertyDescriptor.sham && (i.sham = !0);\n  }),\n      Mr = St.filter;\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: !xe(\"filter\")\n  }, {\n    filter: function filter(e) {\n      return Mr(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var Ur = Ye(\"Array\").filter,\n      Qr = Array.prototype,\n      Fr = function Fr(e) {\n    var t = e.filter;\n    return e === Qr || e instanceof Array && t === Qr.filter ? Ur : t;\n  },\n      xr = r.Promise,\n      Vr = De(\"iterator\"),\n      Gr = !1;\n\n  try {\n    var jr = 0,\n        Kr = {\n      next: function next() {\n        return {\n          done: !!jr++\n        };\n      },\n      return: function _return() {\n        Gr = !0;\n      }\n    };\n    Kr[Vr] = function () {\n      return this;\n    }, Array.from(Kr, function () {\n      throw 2;\n    });\n  } catch (e) {}\n\n  var Wr,\n      Hr,\n      Yr,\n      qr = function qr(e, t) {\n    if (!t && !Gr) return !1;\n    var i = !1;\n\n    try {\n      var r = {};\n      r[Vr] = function () {\n        return {\n          next: function next() {\n            return {\n              done: i = !0\n            };\n          }\n        };\n      }, e(r);\n    } catch (e) {}\n\n    return i;\n  },\n      Jr = De(\"species\"),\n      Xr = function Xr(e, t) {\n    var i,\n        r = M(e).constructor;\n    return void 0 === r || null == (i = M(r)[Jr]) ? t : P(i);\n  },\n      zr = /(iphone|ipod|ipad).*applewebkit/i.test(Pe),\n      Zr = r.location,\n      $r = r.setImmediate,\n      en = r.clearImmediate,\n      tn = r.process,\n      rn = r.MessageChannel,\n      nn = r.Dispatch,\n      sn = 0,\n      on = {},\n      an = \"onreadystatechange\",\n      cn = function cn(e) {\n    if (on.hasOwnProperty(e)) {\n      var t = on[e];\n      delete on[e], t();\n    }\n  },\n      dn = function dn(e) {\n    return function () {\n      cn(e);\n    };\n  },\n      ln = function ln(e) {\n    cn(e.data);\n  },\n      An = function An(e) {\n    r.postMessage(e + \"\", Zr.protocol + \"//\" + Zr.host);\n  };\n\n  $r && en || ($r = function $r(e) {\n    for (var t = [], i = 1; arguments.length > i;) {\n      t.push(arguments[i++]);\n    }\n\n    return on[++sn] = function () {\n      (\"function\" == typeof e ? e : Function(e)).apply(void 0, t);\n    }, Wr(sn), sn;\n  }, en = function en(e) {\n    delete on[e];\n  }, \"process\" == A(tn) ? Wr = function Wr(e) {\n    tn.nextTick(dn(e));\n  } : nn && nn.now ? Wr = function Wr(e) {\n    nn.now(dn(e));\n  } : rn && !zr ? (Yr = (Hr = new rn()).port2, Hr.port1.onmessage = ln, Wr = B(Yr.postMessage, Yr, 1)) : !r.addEventListener || \"function\" != typeof postMessage || r.importScripts || n(An) ? Wr = an in S(\"script\") ? function (e) {\n    xt.appendChild(S(\"script\")).onreadystatechange = function () {\n      xt.removeChild(this), cn(e);\n    };\n  } : function (e) {\n    setTimeout(dn(e), 0);\n  } : (Wr = An, r.addEventListener(\"message\", ln, !1)));\n\n  var un,\n      hn,\n      pn,\n      En,\n      gn,\n      _n,\n      In,\n      fn,\n      mn = {\n    set: $r,\n    clear: en\n  },\n      Cn = v.f,\n      Sn = mn.set,\n      Rn = r.MutationObserver || r.WebKitMutationObserver,\n      Tn = r.process,\n      vn = r.Promise,\n      yn = \"process\" == A(Tn),\n      wn = Cn(r, \"queueMicrotask\"),\n      Nn = wn && wn.value;\n\n  Nn || (un = function un() {\n    var e, t;\n\n    for (yn && (e = Tn.domain) && e.exit(); hn;) {\n      t = hn.fn, hn = hn.next;\n\n      try {\n        t();\n      } catch (e) {\n        throw hn ? En() : pn = void 0, e;\n      }\n    }\n\n    pn = void 0, e && e.enter();\n  }, yn ? En = function En() {\n    Tn.nextTick(un);\n  } : Rn && !zr ? (gn = !0, _n = document.createTextNode(\"\"), new Rn(un).observe(_n, {\n    characterData: !0\n  }), En = function En() {\n    _n.data = gn = !gn;\n  }) : vn && vn.resolve ? (In = vn.resolve(void 0), fn = In.then, En = function En() {\n    fn.call(In, un);\n  }) : En = function En() {\n    Sn.call(r, un);\n  });\n\n  var On,\n      bn,\n      Dn,\n      kn = Nn || function (e) {\n    var t = {\n      fn: e,\n      next: void 0\n    };\n    pn && (pn.next = t), hn || (hn = t, En()), pn = t;\n  },\n      Ln = function Ln(e) {\n    var t, i;\n    this.promise = new e(function (e, r) {\n      if (void 0 !== t || void 0 !== i) throw TypeError(\"Bad Promise constructor\");\n      t = e, i = r;\n    }), this.resolve = P(t), this.reject = P(i);\n  },\n      Pn = {\n    f: function f(e) {\n      return new Ln(e);\n    }\n  },\n      Bn = function Bn(e, t) {\n    if (M(e), g(t) && t.constructor === e) return t;\n    var i = Pn.f(e);\n    return (0, i.resolve)(t), i.promise;\n  },\n      Mn = function Mn(e) {\n    try {\n      return {\n        error: !1,\n        value: e()\n      };\n    } catch (e) {\n      return {\n        error: !0,\n        value: e\n      };\n    }\n  },\n      Un = mn.set,\n      Qn = De(\"species\"),\n      Fn = \"Promise\",\n      xn = Pt.get,\n      Vn = Pt.set,\n      Gn = Pt.getterFor(Fn),\n      _jn = xr,\n      Kn = r.TypeError,\n      Wn = r.document,\n      Hn = r.process,\n      Yn = Se(\"inspectSource\"),\n      qn = (ae(\"fetch\"), Pn.f),\n      Jn = qn,\n      Xn = \"process\" == A(Hn),\n      zn = !!(Wn && Wn.createEvent && r.dispatchEvent),\n      Zn = \"unhandledrejection\",\n      $n = k(Fn, function () {\n    if (!(Yn(_jn) !== String(_jn))) {\n      if (66 === Qe) return !0;\n      if (!Xn && \"function\" != typeof PromiseRejectionEvent) return !0;\n    }\n\n    if (!_jn.prototype.finally) return !0;\n    if (Qe >= 51 && /native code/.test(_jn)) return !1;\n\n    var e = _jn.resolve(1),\n        t = function t(e) {\n      e(function () {}, function () {});\n    };\n\n    return (e.constructor = {})[Qn] = t, !(e.then(function () {}) instanceof t);\n  }),\n      es = $n || !qr(function (e) {\n    _jn.all(e).catch(function () {});\n  }),\n      ts = function ts(e) {\n    var t;\n    return !(!g(e) || \"function\" != typeof (t = e.then)) && t;\n  },\n      is = function is(e, t, i) {\n    if (!t.notified) {\n      t.notified = !0;\n      var r = t.reactions;\n      kn(function () {\n        for (var n = t.value, s = 1 == t.state, o = 0; r.length > o;) {\n          var a,\n              c,\n              d,\n              l = r[o++],\n              A = s ? l.ok : l.fail,\n              u = l.resolve,\n              h = l.reject,\n              p = l.domain;\n\n          try {\n            A ? (s || (2 === t.rejection && os(e, t), t.rejection = 1), !0 === A ? a = n : (p && p.enter(), a = A(n), p && (p.exit(), d = !0)), a === l.promise ? h(Kn(\"Promise-chain cycle\")) : (c = ts(a)) ? c.call(a, u, h) : u(a)) : h(n);\n          } catch (e) {\n            p && !d && p.exit(), h(e);\n          }\n        }\n\n        t.reactions = [], t.notified = !1, i && !t.rejection && ns(e, t);\n      });\n    }\n  },\n      rs = function rs(e, t, i) {\n    var n, s;\n    zn ? ((n = Wn.createEvent(\"Event\")).promise = t, n.reason = i, n.initEvent(e, !1, !0), r.dispatchEvent(n)) : n = {\n      promise: t,\n      reason: i\n    }, (s = r[\"on\" + e]) ? s(n) : e === Zn && function (e, t) {\n      var i = r.console;\n      i && i.error && (1 === arguments.length ? i.error(e) : i.error(e, t));\n    }(\"Unhandled promise rejection\", i);\n  },\n      ns = function ns(e, t) {\n    Un.call(r, function () {\n      var i,\n          r = t.value;\n      if (ss(t) && (i = Mn(function () {\n        Xn ? Hn.emit(\"unhandledRejection\", r, e) : rs(Zn, e, r);\n      }), t.rejection = Xn || ss(t) ? 2 : 1, i.error)) throw i.value;\n    });\n  },\n      ss = function ss(e) {\n    return 1 !== e.rejection && !e.parent;\n  },\n      os = function os(e, t) {\n    Un.call(r, function () {\n      Xn ? Hn.emit(\"rejectionHandled\", e) : rs(\"rejectionhandled\", e, t.value);\n    });\n  },\n      as = function as(e, t, i, r) {\n    return function (n) {\n      e(t, i, n, r);\n    };\n  },\n      cs = function cs(e, t, i, r) {\n    t.done || (t.done = !0, r && (t = r), t.value = i, t.state = 2, is(e, t, !0));\n  },\n      ds = function ds(e, t, i, r) {\n    if (!t.done) {\n      t.done = !0, r && (t = r);\n\n      try {\n        if (e === i) throw Kn(\"Promise can't be resolved itself\");\n        var n = ts(i);\n        n ? kn(function () {\n          var r = {\n            done: !1\n          };\n\n          try {\n            n.call(i, as(ds, e, r, t), as(cs, e, r, t));\n          } catch (i) {\n            cs(e, r, i, t);\n          }\n        }) : (t.value = i, t.state = 1, is(e, t, !1));\n      } catch (i) {\n        cs(e, {\n          done: !1\n        }, i, t);\n      }\n    }\n  };\n\n  $n && (_jn = function jn(e) {\n    Et(this, _jn, Fn), P(e), On.call(this);\n    var t = xn(this);\n\n    try {\n      e(as(ds, this, t), as(cs, this, t));\n    } catch (e) {\n      cs(this, t, e);\n    }\n  }, (On = function On(e) {\n    Vn(this, {\n      type: Fn,\n      done: !1,\n      notified: !1,\n      parent: !1,\n      reactions: [],\n      rejection: !1,\n      state: 0,\n      value: void 0\n    });\n  }).prototype = Jt(_jn.prototype, {\n    then: function then(e, t) {\n      var i = Gn(this),\n          r = qn(Xr(this, _jn));\n      return r.ok = \"function\" != typeof e || e, r.fail = \"function\" == typeof t && t, r.domain = Xn ? Hn.domain : void 0, i.parent = !0, i.reactions.push(r), 0 != i.state && is(this, i, !1), r.promise;\n    },\n    catch: function _catch(e) {\n      return this.then(void 0, e);\n    }\n  }), bn = function bn() {\n    var e = new On(),\n        t = xn(e);\n    this.promise = e, this.resolve = as(ds, e, t), this.reject = as(cs, e, t);\n  }, Pn.f = qn = function qn(e) {\n    return e === _jn || e === Dn ? new bn(e) : Jn(e);\n  }), G({\n    global: !0,\n    wrap: !0,\n    forced: $n\n  }, {\n    Promise: _jn\n  }), ft(_jn, Fn, !1, !0), Ei(Fn), Dn = ae(Fn), G({\n    target: Fn,\n    stat: !0,\n    forced: $n\n  }, {\n    reject: function reject(e) {\n      var t = qn(this);\n      return t.reject.call(void 0, e), t.promise;\n    }\n  }), G({\n    target: Fn,\n    stat: !0,\n    forced: true\n  }, {\n    resolve: function resolve(e) {\n      return Bn(this === Dn ? _jn : this, e);\n    }\n  }), G({\n    target: Fn,\n    stat: !0,\n    forced: es\n  }, {\n    all: function all(e) {\n      var t = this,\n          i = qn(t),\n          r = i.resolve,\n          n = i.reject,\n          s = Mn(function () {\n        var i = P(t.resolve),\n            s = [],\n            o = 0,\n            a = 1;\n        pt(e, function (e) {\n          var c = o++,\n              d = !1;\n          s.push(void 0), a++, i.call(t, e).then(function (e) {\n            d || (d = !0, s[c] = e, --a || r(s));\n          }, n);\n        }), --a || r(s);\n      });\n      return s.error && n(s.value), i.promise;\n    },\n    race: function race(e) {\n      var t = this,\n          i = qn(t),\n          r = i.reject,\n          n = Mn(function () {\n        var n = P(t.resolve);\n        pt(e, function (e) {\n          n.call(t, e).then(i.resolve, r);\n        });\n      });\n      return n.error && r(n.value), i.promise;\n    }\n  }), G({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    allSettled: function allSettled(e) {\n      var t = this,\n          i = Pn.f(t),\n          r = i.resolve,\n          n = i.reject,\n          s = Mn(function () {\n        var i = P(t.resolve),\n            n = [],\n            s = 0,\n            o = 1;\n        pt(e, function (e) {\n          var a = s++,\n              c = !1;\n          n.push(void 0), o++, i.call(t, e).then(function (e) {\n            c || (c = !0, n[a] = {\n              status: \"fulfilled\",\n              value: e\n            }, --o || r(n));\n          }, function (e) {\n            c || (c = !0, n[a] = {\n              status: \"rejected\",\n              reason: e\n            }, --o || r(n));\n          });\n        }), --o || r(n);\n      });\n      return s.error && n(s.value), i.promise;\n    }\n  }), G({\n    target: \"Promise\",\n    proto: !0,\n    real: !0\n  }, {\n    finally: function _finally(e) {\n      var t = Xr(this, ae(\"Promise\")),\n          i = \"function\" == typeof e;\n      return this.then(i ? function (i) {\n        return Bn(t, e()).then(function () {\n          return i;\n        });\n      } : e, i ? function (i) {\n        return Bn(t, e()).then(function () {\n          throw i;\n        });\n      } : e);\n    }\n  });\n  var ls = L.Promise,\n      As = ls,\n      us = St.map;\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: !xe(\"map\")\n  }, {\n    map: function map(e) {\n      return us(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var hs = Ye(\"Array\").map,\n      ps = Array.prototype,\n      Es = function Es(e) {\n    var t = e.map;\n    return e === ps || e instanceof Array && t === ps.map ? hs : t;\n  },\n      gs = Math.max,\n      _s = Math.min,\n      Is = 9007199254740991,\n      fs = \"Maximum allowed length exceeded\";\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: !xe(\"splice\")\n  }, {\n    splice: function splice(e, t) {\n      var i,\n          r,\n          n,\n          s,\n          o,\n          a,\n          c = Ie(this),\n          d = Y(c.length),\n          l = X(e, d),\n          A = arguments.length;\n      if (0 === A ? i = r = 0 : 1 === A ? (i = 0, r = d - l) : (i = A - 2, r = _s(gs(W(t), 0), d - l)), d + i - r > Is) throw TypeError(fs);\n\n      for (n = Le(c, r), s = 0; s < r; s++) {\n        (o = l + s) in c && fe(n, s, c[o]);\n      }\n\n      if (n.length = r, i < r) {\n        for (s = l; s < d - r; s++) {\n          a = s + i, (o = s + r) in c ? c[a] = c[o] : delete c[a];\n        }\n\n        for (s = d; s > d - r + i; s--) {\n          delete c[s - 1];\n        }\n      } else if (i > r) for (s = d - r; s > l; s--) {\n        a = s + i - 1, (o = s + r - 1) in c ? c[a] = c[o] : delete c[a];\n      }\n\n      for (s = 0; s < i; s++) {\n        c[s + l] = arguments[s + 2];\n      }\n\n      return c.length = d - r + i, n;\n    }\n  });\n\n  var ms = Ye(\"Array\").splice,\n      Cs = Array.prototype,\n      Ss = function Ss(e) {\n    var t = e.splice;\n    return e === Cs || e instanceof Array && t === Cs.splice ? ms : t;\n  },\n      Rs = Z.indexOf,\n      Ts = [].indexOf,\n      vs = !!Ts && 1 / [1].indexOf(1, -0) < 0,\n      ys = Ki(\"indexOf\");\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: vs || ys\n  }, {\n    indexOf: function indexOf(e) {\n      return vs ? Ts.apply(this, arguments) || 0 : Rs(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var ws = Ye(\"Array\").indexOf,\n      Ns = Array.prototype,\n      Os = function Os(e) {\n    var t = e.indexOf;\n    return e === Ns || e instanceof Array && t === Ns.indexOf ? ws : t;\n  },\n      bs = De(\"species\"),\n      Ds = [].slice,\n      ks = Math.max;\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: !xe(\"slice\")\n  }, {\n    slice: function slice(e, t) {\n      var i,\n          r,\n          n,\n          s = E(this),\n          o = Y(s.length),\n          a = X(e, o),\n          c = X(void 0 === t ? o : t, o);\n      if (_e(s) && (\"function\" != typeof (i = s.constructor) || i !== Array && !_e(i.prototype) ? g(i) && null === (i = i[bs]) && (i = void 0) : i = void 0, i === Array || void 0 === i)) return Ds.call(s, a, c);\n\n      for (r = new (void 0 === i ? Array : i)(ks(c - a, 0)), n = 0; a < c; a++, n++) {\n        a in s && fe(r, n, s[a]);\n      }\n\n      return r.length = n, r;\n    }\n  });\n\n  var Ls = Ye(\"Array\").slice,\n      Ps = Array.prototype,\n      Bs = function Bs(e) {\n    var t = e.slice;\n    return e === Ps || e instanceof Array && t === Ps.slice ? Ls : t;\n  },\n      Ms = St.find,\n      Us = \"find\",\n      Qs = !0;\n\n  Us in [] && Array(1).find(function () {\n    Qs = !1;\n  }), G({\n    target: \"Array\",\n    proto: !0,\n    forced: Qs\n  }, {\n    find: function find(e) {\n      return Ms(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var Fs = Ye(\"Array\").find,\n      xs = Array.prototype,\n      Vs = function Vs(e) {\n    var t = e.find;\n    return e === xs || e instanceof Array && t === xs.find ? Fs : t;\n  },\n      Gs = [].slice,\n      js = {},\n      Ks = function Ks(e, t, i) {\n    if (!(t in js)) {\n      for (var r = [], n = 0; n < t; n++) {\n        r[n] = \"a[\" + n + \"]\";\n      }\n\n      js[t] = Function(\"C,a\", \"return new C(\" + r.join(\",\") + \")\");\n    }\n\n    return js[t](e, i);\n  },\n      Ws = Function.bind || function (e) {\n    var t = P(this),\n        i = Gs.call(arguments, 1),\n        r = function r() {\n      var n = i.concat(Gs.call(arguments));\n      return this instanceof r ? Ks(t, n.length, n) : t.apply(e, n);\n    };\n\n    return g(t.prototype) && (r.prototype = t.prototype), r;\n  };\n\n  G({\n    target: \"Function\",\n    proto: !0\n  }, {\n    bind: Ws\n  });\n\n  var Hs = Ye(\"Function\").bind,\n      Ys = Function.prototype,\n      qs = function qs(e) {\n    var t = e.bind;\n    return e === Ys || e instanceof Function && t === Ys.bind ? Hs : t;\n  },\n      Js = Z.includes;\n\n  G({\n    target: \"Array\",\n    proto: !0\n  }, {\n    includes: function includes(e) {\n      return Js(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n  var Xs = Ye(\"Array\").includes;\n  G({\n    target: \"String\",\n    proto: !0,\n    forced: !Ui(\"includes\")\n  }, {\n    includes: function includes(e) {\n      return !!~String(p(this)).indexOf(Bi(e), arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var zs = Ye(\"String\").includes,\n      Zs = Array.prototype,\n      $s = String.prototype,\n      eo = function eo(e) {\n    var t = e.includes;\n    return e === Zs || e instanceof Array && t === Zs.includes ? Xs : \"string\" == typeof e || e === $s || e instanceof String && t === $s.includes ? zs : t;\n  },\n      to = St.some;\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: Ki(\"some\")\n  }, {\n    some: function some(e) {\n      return to(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var io = Ye(\"Array\").some,\n      ro = Array.prototype,\n      no = function no(e) {\n    var t = e.some;\n    return e === ro || e instanceof Array && t === ro.some ? io : t;\n  };\n\n  var so = wr;\n\n  function oo(e) {\n    var t = e && e.navigator;\n    if (!t.mediaDevices) return;\n\n    var i = Or(e),\n        r = function r(e) {\n      var t;\n      if (\"object\" != typeof e || e.mandatory || e.optional) return e;\n      var i = {};\n      var r;\n      (Xi(t = ir(e)).call(t, function (t) {\n        if (\"require\" === t || \"advanced\" === t || \"mediaSource\" === t) return;\n        var r = \"object\" == typeof e[t] ? e[t] : {\n          ideal: e[t]\n        };\n        void 0 !== r.exact && \"number\" == typeof r.exact && (r.min = r.max = r.exact);\n\n        var n = function n(e, t) {\n          return e ? e + t.charAt(0).toUpperCase() + Bs(t).call(t, 1) : \"deviceId\" === t ? \"sourceId\" : t;\n        };\n\n        if (void 0 !== r.ideal) {\n          i.optional = i.optional || [];\n          var _e2 = {};\n          \"number\" == typeof r.ideal ? (_e2[n(\"min\", t)] = r.ideal, i.optional.push(_e2), _e2 = {}, _e2[n(\"max\", t)] = r.ideal, i.optional.push(_e2)) : (_e2[n(\"\", t)] = r.ideal, i.optional.push(_e2));\n        }\n\n        var s;\n        void 0 !== r.exact && \"number\" != typeof r.exact ? (i.mandatory = i.mandatory || {}, i.mandatory[n(\"\", t)] = r.exact) : Xi(s = [\"min\", \"max\"]).call(s, function (e) {\n          void 0 !== r[e] && (i.mandatory = i.mandatory || {}, i.mandatory[n(e, t)] = r[e]);\n        });\n      }), e.advanced) && (i.optional = Xe(r = i.optional || []).call(r, e.advanced));\n      return i;\n    },\n        n = function n(e, _n2) {\n      if (i.version >= 61) return _n2(e);\n\n      if ((e = JSON.parse(ge(e))) && \"object\" == typeof e.audio) {\n        var _t4 = function _t4(e, t, i) {\n          t in e && !(i in e) && (e[i] = e[t], delete e[t]);\n        };\n\n        _t4((e = JSON.parse(ge(e))).audio, \"autoGainControl\", \"googAutoGainControl\"), _t4(e.audio, \"noiseSuppression\", \"googNoiseSuppression\"), e.audio = r(e.audio);\n      }\n\n      if (e && \"object\" == typeof e.video) {\n        var _s2 = e.video.facingMode;\n        _s2 = _s2 && (\"object\" == typeof _s2 ? _s2 : {\n          ideal: _s2\n        });\n\n        var _o2 = i.version < 66;\n\n        if (_s2 && (\"user\" === _s2.exact || \"environment\" === _s2.exact || \"user\" === _s2.ideal || \"environment\" === _s2.ideal) && (!t.mediaDevices.getSupportedConstraints || !t.mediaDevices.getSupportedConstraints().facingMode || _o2)) {\n          var _i2;\n\n          if (delete e.video.facingMode, \"environment\" === _s2.exact || \"environment\" === _s2.ideal ? _i2 = [\"back\", \"rear\"] : \"user\" !== _s2.exact && \"user\" !== _s2.ideal || (_i2 = [\"front\"]), _i2) return t.mediaDevices.enumerateDevices().then(function (t) {\n            t = Fr(t).call(t, function (e) {\n              return \"videoinput\" === e.kind;\n            });\n            var o = Vs(t).call(t, function (e) {\n              return no(_i2).call(_i2, function (t) {\n                var i;\n                return eo(i = e.label.toLowerCase()).call(i, t);\n              });\n            });\n            return !o && t.length && eo(_i2).call(_i2, \"back\") && (o = t[t.length - 1]), o && (e.video.deviceId = _s2.exact ? {\n              exact: o.deviceId\n            } : {\n              ideal: o.deviceId\n            }), e.video = r(e.video), so(\"chrome: \" + ge(e)), _n2(e);\n          });\n        }\n\n        e.video = r(e.video);\n      }\n\n      return so(\"chrome: \" + ge(e)), _n2(e);\n    },\n        s = function s(e) {\n      return i.version >= 64 ? e : {\n        name: {\n          PermissionDeniedError: \"NotAllowedError\",\n          PermissionDismissedError: \"NotAllowedError\",\n          InvalidStateError: \"NotAllowedError\",\n          DevicesNotFoundError: \"NotFoundError\",\n          ConstraintNotSatisfiedError: \"OverconstrainedError\",\n          TrackStartError: \"NotReadableError\",\n          MediaDeviceFailedDueToShutdown: \"NotAllowedError\",\n          MediaDeviceKillSwitchOn: \"NotAllowedError\",\n          TabCaptureError: \"AbortError\",\n          ScreenCaptureError: \"AbortError\",\n          DeviceCaptureError: \"AbortError\"\n        }[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraint || e.constraintName,\n        toString: function toString() {\n          return this.name + (this.message && \": \") + this.message;\n        }\n      };\n    },\n        o = function o(e, i, r) {\n      n(e, function (e) {\n        t.webkitGetUserMedia(e, i, function (e) {\n          r && r(s(e));\n        });\n      });\n    };\n\n    if (t.getUserMedia = qs(o).call(o, t), t.mediaDevices.getUserMedia) {\n      var a;\n\n      var _e3 = qs(a = t.mediaDevices.getUserMedia).call(a, t.mediaDevices);\n\n      t.mediaDevices.getUserMedia = function (t) {\n        return n(t, function (t) {\n          return _e3(t).then(function (e) {\n            var i;\n            if (t.audio && !e.getAudioTracks().length || t.video && !e.getVideoTracks().length) throw Xi(i = e.getTracks()).call(i, function (e) {\n              e.stop();\n            }), new DOMException(\"\", \"NotFoundError\");\n            return e;\n          }, function (e) {\n            return As.reject(s(e));\n          });\n        });\n      };\n    }\n  }\n\n  function ao(e) {\n    e.MediaStream = e.MediaStream || e.webkitMediaStream;\n  }\n\n  function co(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && !(\"ontrack\" in e.RTCPeerConnection.prototype)) {\n      dr(e.RTCPeerConnection.prototype, \"ontrack\", {\n        get: function get() {\n          return this._ontrack;\n        },\n        set: function set(e) {\n          this._ontrack && this.removeEventListener(\"track\", this._ontrack), this.addEventListener(\"track\", this._ontrack = e);\n        },\n        enumerable: !0,\n        configurable: !0\n      });\n      var _t5 = e.RTCPeerConnection.prototype.setRemoteDescription;\n\n      e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n        var _this = this;\n\n        return this._ontrackpoly || (this._ontrackpoly = function (t) {\n          var i;\n          t.stream.addEventListener(\"addtrack\", function (i) {\n            var r;\n            var n;\n            e.RTCPeerConnection.prototype.getReceivers ? r = Vs(n = _this.getReceivers()).call(n, function (e) {\n              return e.track && e.track.id === i.track.id;\n            }) : r = {\n              track: i.track\n            };\n            var s = new Event(\"track\");\n            s.track = i.track, s.receiver = r, s.transceiver = {\n              receiver: r\n            }, s.streams = [t.stream], _this.dispatchEvent(s);\n          }), Xi(i = t.stream.getTracks()).call(i, function (i) {\n            var r;\n            var n;\n            e.RTCPeerConnection.prototype.getReceivers ? r = Vs(n = _this.getReceivers()).call(n, function (e) {\n              return e.track && e.track.id === i.id;\n            }) : r = {\n              track: i\n            };\n            var s = new Event(\"track\");\n            s.track = i, s.receiver = r, s.transceiver = {\n              receiver: r\n            }, s.streams = [t.stream], _this.dispatchEvent(s);\n          });\n        }, this.addEventListener(\"addstream\", this._ontrackpoly)), _t5.apply(this, arguments);\n      };\n    } else Tr(e, \"track\", function (e) {\n      return e.transceiver || dr(e, \"transceiver\", {\n        value: {\n          receiver: e.receiver\n        }\n      }), e;\n    });\n  }\n\n  function lo(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && !(\"getSenders\" in e.RTCPeerConnection.prototype) && \"createDTMFSender\" in e.RTCPeerConnection.prototype) {\n      var _t6 = function _t6(e, t) {\n        return {\n          track: t,\n\n          get dtmf() {\n            return void 0 === this._dtmf && (\"audio\" === t.kind ? this._dtmf = e.createDTMFSender(t) : this._dtmf = null), this._dtmf;\n          },\n\n          _pc: e\n        };\n      };\n\n      if (!e.RTCPeerConnection.prototype.getSenders) {\n        e.RTCPeerConnection.prototype.getSenders = function () {\n          var e;\n          return this._senders = this._senders || [], Bs(e = this._senders).call(e);\n        };\n\n        var _i4 = e.RTCPeerConnection.prototype.addTrack;\n\n        e.RTCPeerConnection.prototype.addTrack = function (e, r) {\n          var n = _i4.apply(this, arguments);\n\n          return n || (n = _t6(this, e), this._senders.push(n)), n;\n        };\n\n        var _r3 = e.RTCPeerConnection.prototype.removeTrack;\n\n        e.RTCPeerConnection.prototype.removeTrack = function (e) {\n          var t;\n\n          _r3.apply(this, arguments);\n\n          var i = Os(t = this._senders).call(t, e);\n          var n;\n          -1 !== i && Ss(n = this._senders).call(n, i, 1);\n        };\n      }\n\n      var _i3 = e.RTCPeerConnection.prototype.addStream;\n\n      e.RTCPeerConnection.prototype.addStream = function (e) {\n        var _this2 = this;\n\n        var r;\n        this._senders = this._senders || [], _i3.apply(this, [e]), Xi(r = e.getTracks()).call(r, function (e) {\n          _this2._senders.push(_t6(_this2, e));\n        });\n      };\n\n      var _r2 = e.RTCPeerConnection.prototype.removeStream;\n\n      e.RTCPeerConnection.prototype.removeStream = function (e) {\n        var _this3 = this;\n\n        var t;\n        this._senders = this._senders || [], _r2.apply(this, [e]), Xi(t = e.getTracks()).call(t, function (e) {\n          var t;\n          var i = Vs(t = _this3._senders).call(t, function (t) {\n            return t.track === e;\n          });\n          var r, n;\n          i && Ss(r = _this3._senders).call(r, Os(n = _this3._senders).call(n, i), 1);\n        });\n      };\n    } else if (\"object\" == typeof e && e.RTCPeerConnection && \"getSenders\" in e.RTCPeerConnection.prototype && \"createDTMFSender\" in e.RTCPeerConnection.prototype && e.RTCRtpSender && !(\"dtmf\" in e.RTCRtpSender.prototype)) {\n      var _t7 = e.RTCPeerConnection.prototype.getSenders;\n      e.RTCPeerConnection.prototype.getSenders = function () {\n        var _this4 = this;\n\n        var e = _t7.apply(this, []);\n\n        return Xi(e).call(e, function (e) {\n          return e._pc = _this4;\n        }), e;\n      }, dr(e.RTCRtpSender.prototype, \"dtmf\", {\n        get: function get() {\n          return void 0 === this._dtmf && (\"audio\" === this.track.kind ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null), this._dtmf;\n        }\n      });\n    }\n  }\n\n  function Ao(e) {\n    if (!e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype.getStats;\n\n    e.RTCPeerConnection.prototype.getStats = function () {\n      var _this5 = this;\n\n      var _arguments = Array.prototype.slice.call(arguments),\n          e = _arguments[0],\n          i = _arguments[1],\n          r = _arguments[2];\n\n      if (arguments.length > 0 && \"function\" == typeof e) return t.apply(this, arguments);\n      if (0 === t.length && (0 === arguments.length || \"function\" != typeof e)) return t.apply(this, []);\n\n      var n = function n(e) {\n        var t = {},\n            i = e.result();\n        return Xi(i).call(i, function (e) {\n          var i;\n          var r = {\n            id: e.id,\n            timestamp: e.timestamp,\n            type: {\n              localcandidate: \"local-candidate\",\n              remotecandidate: \"remote-candidate\"\n            }[e.type] || e.type\n          };\n          Xi(i = e.names()).call(i, function (t) {\n            r[t] = e.stat(t);\n          }), t[r.id] = r;\n        }), t;\n      },\n          s = function s(e) {\n        var t;\n        return new Li(Es(t = ir(e)).call(t, function (t) {\n          return [t, e[t]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var _r4 = function _r4(e) {\n          i(s(n(e)));\n        };\n\n        return t.apply(this, [_r4, e]);\n      }\n\n      return new As(function (e, i) {\n        t.apply(_this5, [function (t) {\n          e(s(n(t)));\n        }, i]);\n      }).then(i, r);\n    };\n  }\n\n  function uo(e) {\n    if (!(\"object\" == typeof e && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver)) return;\n\n    if (!(\"getStats\" in e.RTCRtpSender.prototype)) {\n      var _t8 = e.RTCPeerConnection.prototype.getSenders;\n      _t8 && (e.RTCPeerConnection.prototype.getSenders = function () {\n        var _this6 = this;\n\n        var e = _t8.apply(this, []);\n\n        return Xi(e).call(e, function (e) {\n          return e._pc = _this6;\n        }), e;\n      });\n      var _i5 = e.RTCPeerConnection.prototype.addTrack;\n      _i5 && (e.RTCPeerConnection.prototype.addTrack = function () {\n        var e = _i5.apply(this, arguments);\n\n        return e._pc = this, e;\n      }), e.RTCRtpSender.prototype.getStats = function () {\n        var e = this;\n        return this._pc.getStats().then(function (t) {\n          return kr(t, e.track, !0);\n        });\n      };\n    }\n\n    if (!(\"getStats\" in e.RTCRtpReceiver.prototype)) {\n      var _t9 = e.RTCPeerConnection.prototype.getReceivers;\n      _t9 && (e.RTCPeerConnection.prototype.getReceivers = function () {\n        var _this7 = this;\n\n        var e = _t9.apply(this, []);\n\n        return Xi(e).call(e, function (e) {\n          return e._pc = _this7;\n        }), e;\n      }), Tr(e, \"track\", function (e) {\n        return e.receiver._pc = e.srcElement, e;\n      }), e.RTCRtpReceiver.prototype.getStats = function () {\n        var e = this;\n        return this._pc.getStats().then(function (t) {\n          return kr(t, e.track, !1);\n        });\n      };\n    }\n\n    if (!(\"getStats\" in e.RTCRtpSender.prototype) || !(\"getStats\" in e.RTCRtpReceiver.prototype)) return;\n    var t = e.RTCPeerConnection.prototype.getStats;\n\n    e.RTCPeerConnection.prototype.getStats = function () {\n      if (arguments.length > 0 && arguments[0] instanceof e.MediaStreamTrack) {\n        var i, r;\n        var _e4 = arguments[0];\n\n        var _t10, _n3, _s3;\n\n        return Xi(i = this.getSenders()).call(i, function (i) {\n          i.track === _e4 && (_t10 ? _s3 = !0 : _t10 = i);\n        }), Xi(r = this.getReceivers()).call(r, function (t) {\n          return t.track === _e4 && (_n3 ? _s3 = !0 : _n3 = t), t.track === _e4;\n        }), _s3 || _t10 && _n3 ? As.reject(new DOMException(\"There are more than one sender or receiver for the track.\", \"InvalidAccessError\")) : _t10 ? _t10.getStats() : _n3 ? _n3.getStats() : As.reject(new DOMException(\"There is no sender or receiver for the track.\", \"InvalidAccessError\"));\n      }\n\n      return t.apply(this, arguments);\n    };\n  }\n\n  function ho(e) {\n    e.RTCPeerConnection.prototype.getLocalStreams = function () {\n      var _this8 = this;\n\n      var e;\n      return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Es(e = ir(this._shimmedLocalStreams)).call(e, function (e) {\n        return _this8._shimmedLocalStreams[e][0];\n      });\n    };\n\n    var t = e.RTCPeerConnection.prototype.addTrack;\n\n    e.RTCPeerConnection.prototype.addTrack = function (e, i) {\n      var r;\n      if (!i) return t.apply(this, arguments);\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      var n = t.apply(this, arguments);\n      return this._shimmedLocalStreams[i.id] ? -1 === Os(r = this._shimmedLocalStreams[i.id]).call(r, n) && this._shimmedLocalStreams[i.id].push(n) : this._shimmedLocalStreams[i.id] = [i, n], n;\n    };\n\n    var i = e.RTCPeerConnection.prototype.addStream;\n\n    e.RTCPeerConnection.prototype.addStream = function (e) {\n      var _this9 = this;\n\n      var t, r, n;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Xi(t = e.getTracks()).call(t, function (e) {\n        var t;\n        if (Vs(t = _this9.getSenders()).call(t, function (t) {\n          return t.track === e;\n        })) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      });\n      var s = this.getSenders();\n      i.apply(this, arguments);\n      var o = Fr(r = this.getSenders()).call(r, function (e) {\n        return -1 === Os(s).call(s, e);\n      });\n      this._shimmedLocalStreams[e.id] = Xe(n = [e]).call(n, o);\n    };\n\n    var r = e.RTCPeerConnection.prototype.removeStream;\n\n    e.RTCPeerConnection.prototype.removeStream = function (e) {\n      return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[e.id], r.apply(this, arguments);\n    };\n\n    var n = e.RTCPeerConnection.prototype.removeTrack;\n\n    e.RTCPeerConnection.prototype.removeTrack = function (e) {\n      var _this10 = this;\n\n      var t;\n      (this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e) && Xi(t = ir(this._shimmedLocalStreams)).call(t, function (t) {\n        var i;\n        var r = Os(i = _this10._shimmedLocalStreams[t]).call(i, e);\n        var n;\n        -1 !== r && Ss(n = _this10._shimmedLocalStreams[t]).call(n, r, 1);\n        1 === _this10._shimmedLocalStreams[t].length && delete _this10._shimmedLocalStreams[t];\n      });\n      return n.apply(this, arguments);\n    };\n  }\n\n  function po(e) {\n    var t;\n    if (!e.RTCPeerConnection) return;\n    var i = Or(e);\n    if (e.RTCPeerConnection.prototype.addTrack && i.version >= 65) return ho(e);\n    var r = e.RTCPeerConnection.prototype.getLocalStreams;\n\n    e.RTCPeerConnection.prototype.getLocalStreams = function () {\n      var _this11 = this;\n\n      var e = r.apply(this);\n      return this._reverseStreams = this._reverseStreams || {}, Es(e).call(e, function (e) {\n        return _this11._reverseStreams[e.id];\n      });\n    };\n\n    var n = e.RTCPeerConnection.prototype.addStream;\n\n    e.RTCPeerConnection.prototype.addStream = function (t) {\n      var _this12 = this;\n\n      var i;\n\n      if (this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, Xi(i = t.getTracks()).call(i, function (e) {\n        var t;\n        if (Vs(t = _this12.getSenders()).call(t, function (t) {\n          return t.track === e;\n        })) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      }), !this._reverseStreams[t.id]) {\n        var _i6 = new e.MediaStream(t.getTracks());\n\n        this._streams[t.id] = _i6, this._reverseStreams[_i6.id] = t, t = _i6;\n      }\n\n      n.apply(this, [t]);\n    };\n\n    var s = e.RTCPeerConnection.prototype.removeStream;\n\n    function o(e, t) {\n      var i;\n      var r = t.sdp;\n      return Xi(i = ir(e._reverseStreams || [])).call(i, function (t) {\n        var i = e._reverseStreams[t],\n            n = e._streams[i.id];\n        r = r.replace(new RegExp(n.id, \"g\"), i.id);\n      }), new RTCSessionDescription({\n        type: t.type,\n        sdp: r\n      });\n    }\n\n    function a(e, t) {\n      var i;\n      var r = t.sdp;\n      return Xi(i = ir(e._reverseStreams || [])).call(i, function (t) {\n        var i = e._reverseStreams[t],\n            n = e._streams[i.id];\n        r = r.replace(new RegExp(i.id, \"g\"), n.id);\n      }), new RTCSessionDescription({\n        type: t.type,\n        sdp: r\n      });\n    }\n\n    e.RTCPeerConnection.prototype.removeStream = function (e) {\n      this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, s.apply(this, [this._streams[e.id] || e]), delete this._reverseStreams[this._streams[e.id] ? this._streams[e.id].id : e.id], delete this._streams[e.id];\n    }, e.RTCPeerConnection.prototype.addTrack = function (t, i) {\n      var _this13 = this;\n\n      var r, n, s;\n      if (\"closed\" === this.signalingState) throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\", \"InvalidStateError\");\n      var o = Bs([]).call(arguments, 1);\n      if (1 !== o.length || !Vs(r = o[0].getTracks()).call(r, function (e) {\n        return e === t;\n      })) throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\", \"NotSupportedError\");\n      var a = Vs(n = this.getSenders()).call(n, function (e) {\n        return e.track === t;\n      });\n      if (a) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {};\n      var c = this._streams[i.id];\n      if (c) c.addTrack(t), As.resolve().then(function () {\n        _this13.dispatchEvent(new Event(\"negotiationneeded\"));\n      });else {\n        var _r5 = new e.MediaStream([t]);\n\n        this._streams[i.id] = _r5, this._reverseStreams[_r5.id] = i, this.addStream(_r5);\n      }\n      return Vs(s = this.getSenders()).call(s, function (e) {\n        return e.track === t;\n      });\n    }, Xi(t = [\"createOffer\", \"createAnswer\"]).call(t, function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n          r = _defineProperty({}, t, function () {\n        var _this14 = this;\n\n        var e = arguments;\n        return arguments.length && \"function\" == typeof arguments[0] ? i.apply(this, [function (t) {\n          var i = o(_this14, t);\n          e[0].apply(null, [i]);\n        }, function (t) {\n          e[1] && e[1].apply(null, t);\n        }, arguments[2]]) : i.apply(this, arguments).then(function (e) {\n          return o(_this14, e);\n        });\n      });\n\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n    var c = e.RTCPeerConnection.prototype.setLocalDescription;\n\n    e.RTCPeerConnection.prototype.setLocalDescription = function () {\n      return arguments.length && arguments[0].type ? (arguments[0] = a(this, arguments[0]), c.apply(this, arguments)) : c.apply(this, arguments);\n    };\n\n    var d = Br(e.RTCPeerConnection.prototype, \"localDescription\");\n    dr(e.RTCPeerConnection.prototype, \"localDescription\", {\n      get: function get() {\n        var e = d.get.apply(this);\n        return \"\" === e.type ? e : o(this, e);\n      }\n    }), e.RTCPeerConnection.prototype.removeTrack = function (e) {\n      var _this15 = this;\n\n      var t;\n      if (\"closed\" === this.signalingState) throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\", \"InvalidStateError\");\n      if (!e._pc) throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\", \"TypeError\");\n      if (!(e._pc === this)) throw new DOMException(\"Sender was not created by this connection.\", \"InvalidAccessError\");\n      var i;\n      this._streams = this._streams || {}, Xi(t = ir(this._streams)).call(t, function (t) {\n        var r;\n        Vs(r = _this15._streams[t].getTracks()).call(r, function (t) {\n          return e.track === t;\n        }) && (i = _this15._streams[t]);\n      }), i && (1 === i.getTracks().length ? this.removeStream(this._reverseStreams[i.id]) : i.removeTrack(e.track), this.dispatchEvent(new Event(\"negotiationneeded\")));\n    };\n  }\n\n  function Eo(e) {\n    var t = Or(e);\n    if (!e.RTCPeerConnection && e.webkitRTCPeerConnection && (e.RTCPeerConnection = e.webkitRTCPeerConnection), !e.RTCPeerConnection) return;\n    var i;\n    t.version < 53 && Xi(i = [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"]).call(i, function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n          r = _defineProperty({}, t, function () {\n        return arguments[0] = new (\"addIceCandidate\" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), i.apply(this, arguments);\n      });\n\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n    var r = e.RTCPeerConnection.prototype.addIceCandidate;\n\n    e.RTCPeerConnection.prototype.addIceCandidate = function () {\n      return arguments[0] ? t.version < 78 && arguments[0] && \"\" === arguments[0].candidate ? As.resolve() : r.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), As.resolve());\n    };\n  }\n\n  function go(e) {\n    Tr(e, \"negotiationneeded\", function (e) {\n      if (\"stable\" === e.target.signalingState) return e;\n    });\n  }\n\n  var _o = Object.freeze({\n    __proto__: null,\n    shimMediaStream: ao,\n    shimOnTrack: co,\n    shimGetSendersWithDtmf: lo,\n    shimGetStats: Ao,\n    shimSenderReceiverGetStats: uo,\n    shimAddTrackRemoveTrackWithNative: ho,\n    shimAddTrackRemoveTrack: po,\n    shimPeerConnection: Eo,\n    fixNegotiationNeeded: go,\n    shimGetUserMedia: oo,\n    shimGetDisplayMedia: function shimGetDisplayMedia(e, t) {\n      e.navigator.mediaDevices && \"getDisplayMedia\" in e.navigator.mediaDevices || e.navigator.mediaDevices && (\"function\" == typeof t ? e.navigator.mediaDevices.getDisplayMedia = function (i) {\n        return t(i).then(function (t) {\n          var r = i.video && i.video.width,\n              n = i.video && i.video.height,\n              s = i.video && i.video.frameRate;\n          return i.video = {\n            mandatory: {\n              chromeMediaSource: \"desktop\",\n              chromeMediaSourceId: t,\n              maxFrameRate: s || 3\n            }\n          }, r && (i.video.mandatory.maxWidth = r), n && (i.video.mandatory.maxHeight = n), e.navigator.mediaDevices.getUserMedia(i);\n        });\n      } : console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"));\n    }\n  }),\n      Io = \"\".startsWith,\n      fo = Math.min,\n      mo = Ui(\"startsWith\");\n\n  G({\n    target: \"String\",\n    proto: !0,\n    forced: !mo\n  }, {\n    startsWith: function startsWith(e) {\n      var t = String(p(this));\n      Bi(e);\n      var i = Y(fo(arguments.length > 1 ? arguments[1] : void 0, t.length)),\n          r = String(e);\n      return Io ? Io.call(t, r, i) : t.slice(i, i + r.length) === r;\n    }\n  });\n\n  var Co = Ye(\"String\").startsWith,\n      So = String.prototype,\n      Ro = function Ro(e) {\n    var t = e.startsWith;\n    return \"string\" == typeof e || e === So || e instanceof String && t === So.startsWith ? Co : t;\n  };\n\n  var To,\n      vo = Er.trim;\n  G({\n    target: \"String\",\n    proto: !0,\n    forced: (To = \"trim\", n(function () {\n      return !!lr[To]() || \"​᠎\" != \"​᠎\"[To]() || lr[To].name !== To;\n    }))\n  }, {\n    trim: function trim() {\n      return vo(this);\n    }\n  });\n\n  var yo = Ye(\"String\").trim,\n      wo = String.prototype,\n      No = function No(e) {\n    var t = e.trim;\n    return \"string\" == typeof e || e === wo || e instanceof String && t === wo.trim ? yo : t;\n  },\n      Oo = t(function (e) {\n    var t = {\n      generateIdentifier: function generateIdentifier() {\n        return Math.random().toString(36).substr(2, 10);\n      }\n    };\n    t.localCName = t.generateIdentifier(), t.splitLines = function (e) {\n      var t;\n      return Es(t = No(e).call(e).split(\"\\n\")).call(t, function (e) {\n        return No(e).call(e);\n      });\n    }, t.splitSections = function (e) {\n      var t = e.split(\"\\nm=\");\n      return Es(t).call(t, function (e, t) {\n        var i;\n        return No(i = t > 0 ? \"m=\" + e : e).call(i) + \"\\r\\n\";\n      });\n    }, t.getDescription = function (e) {\n      var i = t.splitSections(e);\n      return i && i[0];\n    }, t.getMediaSections = function (e) {\n      var i = t.splitSections(e);\n      return i.shift(), i;\n    }, t.matchPrefix = function (e, i) {\n      var r;\n      return Fr(r = t.splitLines(e)).call(r, function (e) {\n        return 0 === Os(e).call(e, i);\n      });\n    }, t.parseCandidate = function (e) {\n      for (var t, i = {\n        foundation: (t = 0 === Os(e).call(e, \"a=candidate:\") ? e.substring(12).split(\" \") : e.substring(10).split(\" \"))[0],\n        component: mr(t[1], 10),\n        protocol: t[2].toLowerCase(),\n        priority: mr(t[3], 10),\n        ip: t[4],\n        address: t[4],\n        port: mr(t[5], 10),\n        type: t[7]\n      }, r = 8; r < t.length; r += 2) {\n        switch (t[r]) {\n          case \"raddr\":\n            i.relatedAddress = t[r + 1];\n            break;\n\n          case \"rport\":\n            i.relatedPort = mr(t[r + 1], 10);\n            break;\n\n          case \"tcptype\":\n            i.tcpType = t[r + 1];\n            break;\n\n          case \"ufrag\":\n            i.ufrag = t[r + 1], i.usernameFragment = t[r + 1];\n            break;\n\n          default:\n            i[t[r]] = t[r + 1];\n        }\n      }\n\n      return i;\n    }, t.writeCandidate = function (e) {\n      var t = [];\n      t.push(e.foundation), t.push(e.component), t.push(e.protocol.toUpperCase()), t.push(e.priority), t.push(e.address || e.ip), t.push(e.port);\n      var i = e.type;\n      return t.push(\"typ\"), t.push(i), \"host\" !== i && e.relatedAddress && e.relatedPort && (t.push(\"raddr\"), t.push(e.relatedAddress), t.push(\"rport\"), t.push(e.relatedPort)), e.tcpType && \"tcp\" === e.protocol.toLowerCase() && (t.push(\"tcptype\"), t.push(e.tcpType)), (e.usernameFragment || e.ufrag) && (t.push(\"ufrag\"), t.push(e.usernameFragment || e.ufrag)), \"candidate:\" + t.join(\" \");\n    }, t.parseIceOptions = function (e) {\n      return e.substr(14).split(\" \");\n    }, t.parseRtpMap = function (e) {\n      var t = e.substr(9).split(\" \"),\n          i = {\n        payloadType: mr(t.shift(), 10)\n      };\n      return t = t[0].split(\"/\"), i.name = t[0], i.clockRate = mr(t[1], 10), i.channels = 3 === t.length ? mr(t[2], 10) : 1, i.numChannels = i.channels, i;\n    }, t.writeRtpMap = function (e) {\n      var t = e.payloadType;\n      void 0 !== e.preferredPayloadType && (t = e.preferredPayloadType);\n      var i = e.channels || e.numChannels || 1;\n      return \"a=rtpmap:\" + t + \" \" + e.name + \"/\" + e.clockRate + (1 !== i ? \"/\" + i : \"\") + \"\\r\\n\";\n    }, t.parseExtmap = function (e) {\n      var t,\n          i = e.substr(9).split(\" \");\n      return {\n        id: mr(i[0], 10),\n        direction: Os(t = i[0]).call(t, \"/\") > 0 ? i[0].split(\"/\")[1] : \"sendrecv\",\n        uri: i[1]\n      };\n    }, t.writeExtmap = function (e) {\n      return \"a=extmap:\" + (e.id || e.preferredId) + (e.direction && \"sendrecv\" !== e.direction ? \"/\" + e.direction : \"\") + \" \" + e.uri + \"\\r\\n\";\n    }, t.parseFmtp = function (e) {\n      for (var t, i = {}, r = e.substr(Os(e).call(e, \" \") + 1).split(\";\"), n = 0; n < r.length; n++) {\n        var s, o;\n        t = No(s = r[n]).call(s).split(\"=\"), i[No(o = t[0]).call(o)] = t[1];\n      }\n\n      return i;\n    }, t.writeFmtp = function (e) {\n      var t = \"\",\n          i = e.payloadType;\n\n      if (void 0 !== e.preferredPayloadType && (i = e.preferredPayloadType), e.parameters && ir(e.parameters).length) {\n        var r,\n            n = [];\n        Xi(r = ir(e.parameters)).call(r, function (t) {\n          e.parameters[t] ? n.push(t + \"=\" + e.parameters[t]) : n.push(t);\n        }), t += \"a=fmtp:\" + i + \" \" + n.join(\";\") + \"\\r\\n\";\n      }\n\n      return t;\n    }, t.parseRtcpFb = function (e) {\n      var t = e.substr(Os(e).call(e, \" \") + 1).split(\" \");\n      return {\n        type: t.shift(),\n        parameter: t.join(\" \")\n      };\n    }, t.writeRtcpFb = function (e) {\n      var t,\n          i = \"\",\n          r = e.payloadType;\n      (void 0 !== e.preferredPayloadType && (r = e.preferredPayloadType), e.rtcpFeedback && e.rtcpFeedback.length) && Xi(t = e.rtcpFeedback).call(t, function (e) {\n        i += \"a=rtcp-fb:\" + r + \" \" + e.type + (e.parameter && e.parameter.length ? \" \" + e.parameter : \"\") + \"\\r\\n\";\n      });\n      return i;\n    }, t.parseSsrcMedia = function (e) {\n      var t = Os(e).call(e, \" \"),\n          i = {\n        ssrc: mr(e.substr(7, t - 7), 10)\n      },\n          r = Os(e).call(e, \":\", t);\n      return r > -1 ? (i.attribute = e.substr(t + 1, r - t - 1), i.value = e.substr(r + 1)) : i.attribute = e.substr(t + 1), i;\n    }, t.parseSsrcGroup = function (e) {\n      var t = e.substr(13).split(\" \");\n      return {\n        semantics: t.shift(),\n        ssrcs: Es(t).call(t, function (e) {\n          return mr(e, 10);\n        })\n      };\n    }, t.getMid = function (e) {\n      var i = t.matchPrefix(e, \"a=mid:\")[0];\n      if (i) return i.substr(6);\n    }, t.parseFingerprint = function (e) {\n      var t = e.substr(14).split(\" \");\n      return {\n        algorithm: t[0].toLowerCase(),\n        value: t[1]\n      };\n    }, t.getDtlsParameters = function (e, i) {\n      var r = t.matchPrefix(e + i, \"a=fingerprint:\");\n      return {\n        role: \"auto\",\n        fingerprints: Es(r).call(r, t.parseFingerprint)\n      };\n    }, t.writeDtlsParameters = function (e, t) {\n      var i,\n          r = \"a=setup:\" + t + \"\\r\\n\";\n      return Xi(i = e.fingerprints).call(i, function (e) {\n        r += \"a=fingerprint:\" + e.algorithm + \" \" + e.value + \"\\r\\n\";\n      }), r;\n    }, t.getIceParameters = function (e, i) {\n      var r = t.splitLines(e);\n      return r = Xe(r).call(r, t.splitLines(i)), {\n        usernameFragment: Fr(r).call(r, function (e) {\n          return 0 === Os(e).call(e, \"a=ice-ufrag:\");\n        })[0].substr(12),\n        password: Fr(r).call(r, function (e) {\n          return 0 === Os(e).call(e, \"a=ice-pwd:\");\n        })[0].substr(10)\n      };\n    }, t.writeIceParameters = function (e) {\n      return \"a=ice-ufrag:\" + e.usernameFragment + \"\\r\\na=ice-pwd:\" + e.password + \"\\r\\n\";\n    }, t.parseRtpParameters = function (e) {\n      for (var i, r = {\n        codecs: [],\n        headerExtensions: [],\n        fecMechanisms: [],\n        rtcp: []\n      }, n = t.splitLines(e)[0].split(\" \"), s = 3; s < n.length; s++) {\n        var o = n[s],\n            a = t.matchPrefix(e, \"a=rtpmap:\" + o + \" \")[0];\n\n        if (a) {\n          var c,\n              d = t.parseRtpMap(a),\n              l = t.matchPrefix(e, \"a=fmtp:\" + o + \" \");\n\n          switch (d.parameters = l.length ? t.parseFmtp(l[0]) : {}, d.rtcpFeedback = Es(c = t.matchPrefix(e, \"a=rtcp-fb:\" + o + \" \")).call(c, t.parseRtcpFb), r.codecs.push(d), d.name.toUpperCase()) {\n            case \"RED\":\n            case \"ULPFEC\":\n              r.fecMechanisms.push(d.name.toUpperCase());\n          }\n        }\n      }\n\n      return Xi(i = t.matchPrefix(e, \"a=extmap:\")).call(i, function (e) {\n        r.headerExtensions.push(t.parseExtmap(e));\n      }), r;\n    }, t.writeRtpDescription = function (e, i) {\n      var r,\n          n,\n          s,\n          o = \"\";\n      o += \"m=\" + e + \" \", o += i.codecs.length > 0 ? \"9\" : \"0\", o += \" UDP/TLS/RTP/SAVPF \", o += Es(r = i.codecs).call(r, function (e) {\n        return void 0 !== e.preferredPayloadType ? e.preferredPayloadType : e.payloadType;\n      }).join(\" \") + \"\\r\\n\", o += \"c=IN IP4 0.0.0.0\\r\\n\", o += \"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\", Xi(n = i.codecs).call(n, function (e) {\n        o += t.writeRtpMap(e), o += t.writeFmtp(e), o += t.writeRtcpFb(e);\n      });\n      var a,\n          c = 0;\n      (Xi(s = i.codecs).call(s, function (e) {\n        e.maxptime > c && (c = e.maxptime);\n      }), c > 0 && (o += \"a=maxptime:\" + c + \"\\r\\n\"), o += \"a=rtcp-mux\\r\\n\", i.headerExtensions) && Xi(a = i.headerExtensions).call(a, function (e) {\n        o += t.writeExtmap(e);\n      });\n      return o;\n    }, t.parseRtpEncodingParameters = function (e) {\n      var i,\n          r,\n          n,\n          s,\n          o,\n          a,\n          c,\n          d = [],\n          l = t.parseRtpParameters(e),\n          A = -1 !== Os(i = l.fecMechanisms).call(i, \"RED\"),\n          u = -1 !== Os(r = l.fecMechanisms).call(r, \"ULPFEC\"),\n          h = Fr(n = Es(s = t.matchPrefix(e, \"a=ssrc:\")).call(s, function (e) {\n        return t.parseSsrcMedia(e);\n      })).call(n, function (e) {\n        return \"cname\" === e.attribute;\n      }),\n          p = h.length > 0 && h[0].ssrc,\n          E = Es(o = t.matchPrefix(e, \"a=ssrc-group:FID\")).call(o, function (e) {\n        var t = e.substr(17).split(\" \");\n        return Es(t).call(t, function (e) {\n          return mr(e, 10);\n        });\n      });\n      E.length > 0 && E[0].length > 1 && E[0][0] === p && (c = E[0][1]), Xi(a = l.codecs).call(a, function (e) {\n        if (\"RTX\" === e.name.toUpperCase() && e.parameters.apt) {\n          var t = {\n            ssrc: p,\n            codecPayloadType: mr(e.parameters.apt, 10)\n          };\n          p && c && (t.rtx = {\n            ssrc: c\n          }), d.push(t), A && ((t = JSON.parse(ge(t))).fec = {\n            ssrc: p,\n            mechanism: u ? \"red+ulpfec\" : \"red\"\n          }, d.push(t));\n        }\n      }), 0 === d.length && p && d.push({\n        ssrc: p\n      });\n\n      var g,\n          _,\n          I = t.matchPrefix(e, \"b=\");\n\n      I.length && (I = 0 === Os(g = I[0]).call(g, \"b=TIAS:\") ? mr(I[0].substr(7), 10) : 0 === Os(_ = I[0]).call(_, \"b=AS:\") ? 1e3 * mr(I[0].substr(5), 10) * .95 - 16e3 : void 0, Xi(d).call(d, function (e) {\n        e.maxBitrate = I;\n      }));\n      return d;\n    }, t.parseRtcpParameters = function (e) {\n      var i,\n          r,\n          n = {},\n          s = Fr(i = Es(r = t.matchPrefix(e, \"a=ssrc:\")).call(r, function (e) {\n        return t.parseSsrcMedia(e);\n      })).call(i, function (e) {\n        return \"cname\" === e.attribute;\n      })[0];\n      s && (n.cname = s.value, n.ssrc = s.ssrc);\n      var o = t.matchPrefix(e, \"a=rtcp-rsize\");\n      n.reducedSize = o.length > 0, n.compound = 0 === o.length;\n      var a = t.matchPrefix(e, \"a=rtcp-mux\");\n      return n.mux = a.length > 0, n;\n    }, t.parseMsid = function (e) {\n      var i,\n          r,\n          n,\n          s = t.matchPrefix(e, \"a=msid:\");\n      if (1 === s.length) return {\n        stream: (n = s[0].substr(7).split(\" \"))[0],\n        track: n[1]\n      };\n      var o = Fr(i = Es(r = t.matchPrefix(e, \"a=ssrc:\")).call(r, function (e) {\n        return t.parseSsrcMedia(e);\n      })).call(i, function (e) {\n        return \"msid\" === e.attribute;\n      });\n      return o.length > 0 ? {\n        stream: (n = o[0].value.split(\" \"))[0],\n        track: n[1]\n      } : void 0;\n    }, t.generateSessionId = function () {\n      return Math.random().toString().substr(2, 21);\n    }, t.writeSessionBoilerplate = function (e, i, r) {\n      var n = void 0 !== i ? i : 2;\n      return \"v=0\\r\\no=\" + (r || \"thisisadapterortc\") + \" \" + (e || t.generateSessionId()) + \" \" + n + \" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\";\n    }, t.writeMediaSection = function (e, i, r, n) {\n      var s = t.writeRtpDescription(e.kind, i);\n\n      if (s += t.writeIceParameters(e.iceGatherer.getLocalParameters()), s += t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), \"offer\" === r ? \"actpass\" : \"active\"), s += \"a=mid:\" + e.mid + \"\\r\\n\", e.direction ? s += \"a=\" + e.direction + \"\\r\\n\" : e.rtpSender && e.rtpReceiver ? s += \"a=sendrecv\\r\\n\" : e.rtpSender ? s += \"a=sendonly\\r\\n\" : e.rtpReceiver ? s += \"a=recvonly\\r\\n\" : s += \"a=inactive\\r\\n\", e.rtpSender) {\n        var o = \"msid:\" + n.id + \" \" + e.rtpSender.track.id + \"\\r\\n\";\n        s += \"a=\" + o, s += \"a=ssrc:\" + e.sendEncodingParameters[0].ssrc + \" \" + o, e.sendEncodingParameters[0].rtx && (s += \"a=ssrc:\" + e.sendEncodingParameters[0].rtx.ssrc + \" \" + o, s += \"a=ssrc-group:FID \" + e.sendEncodingParameters[0].ssrc + \" \" + e.sendEncodingParameters[0].rtx.ssrc + \"\\r\\n\");\n      }\n\n      return s += \"a=ssrc:\" + e.sendEncodingParameters[0].ssrc + \" cname:\" + t.localCName + \"\\r\\n\", e.rtpSender && e.sendEncodingParameters[0].rtx && (s += \"a=ssrc:\" + e.sendEncodingParameters[0].rtx.ssrc + \" cname:\" + t.localCName + \"\\r\\n\"), s;\n    }, t.getDirection = function (e, i) {\n      for (var r = t.splitLines(e), n = 0; n < r.length; n++) {\n        switch (r[n]) {\n          case \"a=sendrecv\":\n          case \"a=sendonly\":\n          case \"a=recvonly\":\n          case \"a=inactive\":\n            return r[n].substr(2);\n        }\n      }\n\n      return i ? t.getDirection(i) : \"sendrecv\";\n    }, t.getKind = function (e) {\n      return t.splitLines(e)[0].split(\" \")[0].substr(2);\n    }, t.isRejected = function (e) {\n      return \"0\" === e.split(\" \", 2)[1];\n    }, t.parseMLine = function (e) {\n      var i = t.splitLines(e)[0].substr(2).split(\" \");\n      return {\n        kind: i[0],\n        port: mr(i[1], 10),\n        protocol: i[2],\n        fmt: Bs(i).call(i, 3).join(\" \")\n      };\n    }, t.parseOLine = function (e) {\n      var i = t.matchPrefix(e, \"o=\")[0].substr(2).split(\" \");\n      return {\n        username: i[0],\n        sessionId: i[1],\n        sessionVersion: mr(i[2], 10),\n        netType: i[3],\n        addressType: i[4],\n        address: i[5]\n      };\n    }, t.isValidSDP = function (e) {\n      if (\"string\" != typeof e || 0 === e.length) return !1;\n\n      for (var i = t.splitLines(e), r = 0; r < i.length; r++) {\n        if (i[r].length < 2 || \"=\" !== i[r].charAt(1)) return !1;\n      }\n\n      return !0;\n    }, e.exports = t;\n  });\n\n  function bo(e, t, i, r, n) {\n    var s = Oo.writeRtpDescription(e.kind, t);\n\n    if (s += Oo.writeIceParameters(e.iceGatherer.getLocalParameters()), s += Oo.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), \"offer\" === i ? \"actpass\" : n || \"active\"), s += \"a=mid:\" + e.mid + \"\\r\\n\", e.rtpSender && e.rtpReceiver ? s += \"a=sendrecv\\r\\n\" : e.rtpSender ? s += \"a=sendonly\\r\\n\" : e.rtpReceiver ? s += \"a=recvonly\\r\\n\" : s += \"a=inactive\\r\\n\", e.rtpSender) {\n      var o = e.rtpSender._initialTrackId || e.rtpSender.track.id;\n      e.rtpSender._initialTrackId = o;\n      var a = \"msid:\" + (r ? r.id : \"-\") + \" \" + o + \"\\r\\n\";\n      s += \"a=\" + a, s += \"a=ssrc:\" + e.sendEncodingParameters[0].ssrc + \" \" + a, e.sendEncodingParameters[0].rtx && (s += \"a=ssrc:\" + e.sendEncodingParameters[0].rtx.ssrc + \" \" + a, s += \"a=ssrc-group:FID \" + e.sendEncodingParameters[0].ssrc + \" \" + e.sendEncodingParameters[0].rtx.ssrc + \"\\r\\n\");\n    }\n\n    return s += \"a=ssrc:\" + e.sendEncodingParameters[0].ssrc + \" cname:\" + Oo.localCName + \"\\r\\n\", e.rtpSender && e.sendEncodingParameters[0].rtx && (s += \"a=ssrc:\" + e.sendEncodingParameters[0].rtx.ssrc + \" cname:\" + Oo.localCName + \"\\r\\n\"), s;\n  }\n\n  function Do(e, t) {\n    var i = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: []\n    },\n        r = function r(e, t) {\n      e = parseInt(e, 10);\n\n      for (var i = 0; i < t.length; i++) {\n        if (t[i].payloadType === e || t[i].preferredPayloadType === e) return t[i];\n      }\n    },\n        n = function n(e, t, i, _n4) {\n      var s = r(e.parameters.apt, i),\n          o = r(t.parameters.apt, _n4);\n      return s && o && s.name.toLowerCase() === o.name.toLowerCase();\n    };\n\n    return e.codecs.forEach(function (r) {\n      for (var s = 0; s < t.codecs.length; s++) {\n        var o = t.codecs[s];\n\n        if (r.name.toLowerCase() === o.name.toLowerCase() && r.clockRate === o.clockRate) {\n          if (\"rtx\" === r.name.toLowerCase() && r.parameters && o.parameters.apt && !n(r, o, e.codecs, t.codecs)) continue;\n          (o = JSON.parse(JSON.stringify(o))).numChannels = Math.min(r.numChannels, o.numChannels), i.codecs.push(o), o.rtcpFeedback = o.rtcpFeedback.filter(function (e) {\n            for (var t = 0; t < r.rtcpFeedback.length; t++) {\n              if (r.rtcpFeedback[t].type === e.type && r.rtcpFeedback[t].parameter === e.parameter) return !0;\n            }\n\n            return !1;\n          });\n          break;\n        }\n      }\n    }), e.headerExtensions.forEach(function (e) {\n      for (var r = 0; r < t.headerExtensions.length; r++) {\n        var n = t.headerExtensions[r];\n\n        if (e.uri === n.uri) {\n          i.headerExtensions.push(n);\n          break;\n        }\n      }\n    }), i;\n  }\n\n  function ko(e, t, i) {\n    return -1 !== {\n      offer: {\n        setLocalDescription: [\"stable\", \"have-local-offer\"],\n        setRemoteDescription: [\"stable\", \"have-remote-offer\"]\n      },\n      answer: {\n        setLocalDescription: [\"have-remote-offer\", \"have-local-pranswer\"],\n        setRemoteDescription: [\"have-local-offer\", \"have-remote-pranswer\"]\n      }\n    }[t][e].indexOf(i);\n  }\n\n  function Lo(e, t) {\n    var i = e.getRemoteCandidates().find(function (e) {\n      return t.foundation === e.foundation && t.ip === e.ip && t.port === e.port && t.priority === e.priority && t.protocol === e.protocol && t.type === e.type;\n    });\n    return i || e.addRemoteCandidate(t), !i;\n  }\n\n  function Po(e, t) {\n    var i = new Error(t);\n    return i.name = e, i.code = {\n      NotSupportedError: 9,\n      InvalidStateError: 11,\n      InvalidAccessError: 15,\n      TypeError: void 0,\n      OperationError: void 0\n    }[e], i;\n  }\n\n  var Bo = function Bo(e, t) {\n    function i(t, i) {\n      i.addTrack(t), i.dispatchEvent(new e.MediaStreamTrackEvent(\"addtrack\", {\n        track: t\n      }));\n    }\n\n    function r(t, i, r, n) {\n      var s = new Event(\"track\");\n      s.track = i, s.receiver = r, s.transceiver = {\n        receiver: r\n      }, s.streams = n, e.setTimeout(function () {\n        t._dispatchEvent(\"track\", s);\n      });\n    }\n\n    var n = function n(i) {\n      var r = this,\n          n = document.createDocumentFragment();\n      if ([\"addEventListener\", \"removeEventListener\", \"dispatchEvent\"].forEach(function (e) {\n        r[e] = n[e].bind(n);\n      }), this.canTrickleIceCandidates = null, this.needNegotiation = !1, this.localStreams = [], this.remoteStreams = [], this._localDescription = null, this._remoteDescription = null, this.signalingState = \"stable\", this.iceConnectionState = \"new\", this.connectionState = \"new\", this.iceGatheringState = \"new\", i = JSON.parse(JSON.stringify(i || {})), this.usingBundle = \"max-bundle\" === i.bundlePolicy, \"negotiate\" === i.rtcpMuxPolicy) throw Po(\"NotSupportedError\", \"rtcpMuxPolicy 'negotiate' is not supported\");\n\n      switch (i.rtcpMuxPolicy || (i.rtcpMuxPolicy = \"require\"), i.iceTransportPolicy) {\n        case \"all\":\n        case \"relay\":\n          break;\n\n        default:\n          i.iceTransportPolicy = \"all\";\n      }\n\n      switch (i.bundlePolicy) {\n        case \"balanced\":\n        case \"max-compat\":\n        case \"max-bundle\":\n          break;\n\n        default:\n          i.bundlePolicy = \"balanced\";\n      }\n\n      if (i.iceServers = function (e, t) {\n        var i = !1;\n        return (e = JSON.parse(JSON.stringify(e))).filter(function (e) {\n          if (e && (e.urls || e.url)) {\n            var r = e.urls || e.url;\n            e.url && !e.urls && console.warn(\"RTCIceServer.url is deprecated! Use urls instead.\");\n            var n = \"string\" == typeof r;\n            return n && (r = [r]), r = r.filter(function (e) {\n              return 0 !== e.indexOf(\"turn:\") || -1 === e.indexOf(\"transport=udp\") || -1 !== e.indexOf(\"turn:[\") || i ? 0 === e.indexOf(\"stun:\") && t >= 14393 && -1 === e.indexOf(\"?transport=udp\") : (i = !0, !0);\n            }), delete e.url, e.urls = n ? r[0] : r, !!r.length;\n          }\n        });\n      }(i.iceServers || [], t), this._iceGatherers = [], i.iceCandidatePoolSize) for (var s = i.iceCandidatePoolSize; s > 0; s--) {\n        this._iceGatherers.push(new e.RTCIceGatherer({\n          iceServers: i.iceServers,\n          gatherPolicy: i.iceTransportPolicy\n        }));\n      } else i.iceCandidatePoolSize = 0;\n      this._config = i, this.transceivers = [], this._sdpSessionId = Oo.generateSessionId(), this._sdpSessionVersion = 0, this._dtlsRole = void 0, this._isClosed = !1;\n    };\n\n    Object.defineProperty(n.prototype, \"localDescription\", {\n      configurable: !0,\n      get: function get() {\n        return this._localDescription;\n      }\n    }), Object.defineProperty(n.prototype, \"remoteDescription\", {\n      configurable: !0,\n      get: function get() {\n        return this._remoteDescription;\n      }\n    }), n.prototype.onicecandidate = null, n.prototype.onaddstream = null, n.prototype.ontrack = null, n.prototype.onremovestream = null, n.prototype.onsignalingstatechange = null, n.prototype.oniceconnectionstatechange = null, n.prototype.onconnectionstatechange = null, n.prototype.onicegatheringstatechange = null, n.prototype.onnegotiationneeded = null, n.prototype.ondatachannel = null, n.prototype._dispatchEvent = function (e, t) {\n      this._isClosed || (this.dispatchEvent(t), \"function\" == typeof this[\"on\" + e] && this[\"on\" + e](t));\n    }, n.prototype._emitGatheringStateChange = function () {\n      var e = new Event(\"icegatheringstatechange\");\n\n      this._dispatchEvent(\"icegatheringstatechange\", e);\n    }, n.prototype.getConfiguration = function () {\n      return this._config;\n    }, n.prototype.getLocalStreams = function () {\n      return this.localStreams;\n    }, n.prototype.getRemoteStreams = function () {\n      return this.remoteStreams;\n    }, n.prototype._createTransceiver = function (e, t) {\n      var i = this.transceivers.length > 0,\n          r = {\n        track: null,\n        iceGatherer: null,\n        iceTransport: null,\n        dtlsTransport: null,\n        localCapabilities: null,\n        remoteCapabilities: null,\n        rtpSender: null,\n        rtpReceiver: null,\n        kind: e,\n        mid: null,\n        sendEncodingParameters: null,\n        recvEncodingParameters: null,\n        stream: null,\n        associatedRemoteMediaStreams: [],\n        wantReceive: !0\n      };\n      if (this.usingBundle && i) r.iceTransport = this.transceivers[0].iceTransport, r.dtlsTransport = this.transceivers[0].dtlsTransport;else {\n        var n = this._createIceAndDtlsTransports();\n\n        r.iceTransport = n.iceTransport, r.dtlsTransport = n.dtlsTransport;\n      }\n      return t || this.transceivers.push(r), r;\n    }, n.prototype.addTrack = function (t, i) {\n      if (this._isClosed) throw Po(\"InvalidStateError\", \"Attempted to call addTrack on a closed peerconnection.\");\n      var r;\n      if (this.transceivers.find(function (e) {\n        return e.track === t;\n      })) throw Po(\"InvalidAccessError\", \"Track already exists.\");\n\n      for (var n = 0; n < this.transceivers.length; n++) {\n        this.transceivers[n].track || this.transceivers[n].kind !== t.kind || (r = this.transceivers[n]);\n      }\n\n      return r || (r = this._createTransceiver(t.kind)), this._maybeFireNegotiationNeeded(), -1 === this.localStreams.indexOf(i) && this.localStreams.push(i), r.track = t, r.stream = i, r.rtpSender = new e.RTCRtpSender(t, r.dtlsTransport), r.rtpSender;\n    }, n.prototype.addStream = function (e) {\n      var i = this;\n      if (t >= 15025) e.getTracks().forEach(function (t) {\n        i.addTrack(t, e);\n      });else {\n        var r = e.clone();\n        e.getTracks().forEach(function (e, t) {\n          var i = r.getTracks()[t];\n          e.addEventListener(\"enabled\", function (e) {\n            i.enabled = e.enabled;\n          });\n        }), r.getTracks().forEach(function (e) {\n          i.addTrack(e, r);\n        });\n      }\n    }, n.prototype.removeTrack = function (t) {\n      if (this._isClosed) throw Po(\"InvalidStateError\", \"Attempted to call removeTrack on a closed peerconnection.\");\n      if (!(t instanceof e.RTCRtpSender)) throw new TypeError(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\");\n      var i = this.transceivers.find(function (e) {\n        return e.rtpSender === t;\n      });\n      if (!i) throw Po(\"InvalidAccessError\", \"Sender was not created by this connection.\");\n      var r = i.stream;\n      i.rtpSender.stop(), i.rtpSender = null, i.track = null, i.stream = null, -1 === this.transceivers.map(function (e) {\n        return e.stream;\n      }).indexOf(r) && this.localStreams.indexOf(r) > -1 && this.localStreams.splice(this.localStreams.indexOf(r), 1), this._maybeFireNegotiationNeeded();\n    }, n.prototype.removeStream = function (e) {\n      var t = this;\n      e.getTracks().forEach(function (e) {\n        var i = t.getSenders().find(function (t) {\n          return t.track === e;\n        });\n        i && t.removeTrack(i);\n      });\n    }, n.prototype.getSenders = function () {\n      return this.transceivers.filter(function (e) {\n        return !!e.rtpSender;\n      }).map(function (e) {\n        return e.rtpSender;\n      });\n    }, n.prototype.getReceivers = function () {\n      return this.transceivers.filter(function (e) {\n        return !!e.rtpReceiver;\n      }).map(function (e) {\n        return e.rtpReceiver;\n      });\n    }, n.prototype._createIceGatherer = function (t, i) {\n      var r = this;\n      if (i && t > 0) return this.transceivers[0].iceGatherer;\n      if (this._iceGatherers.length) return this._iceGatherers.shift();\n      var n = new e.RTCIceGatherer({\n        iceServers: this._config.iceServers,\n        gatherPolicy: this._config.iceTransportPolicy\n      });\n      return Object.defineProperty(n, \"state\", {\n        value: \"new\",\n        writable: !0\n      }), this.transceivers[t].bufferedCandidateEvents = [], this.transceivers[t].bufferCandidates = function (e) {\n        var i = !e.candidate || 0 === Object.keys(e.candidate).length;\n        n.state = i ? \"completed\" : \"gathering\", null !== r.transceivers[t].bufferedCandidateEvents && r.transceivers[t].bufferedCandidateEvents.push(e);\n      }, n.addEventListener(\"localcandidate\", this.transceivers[t].bufferCandidates), n;\n    }, n.prototype._gather = function (t, i) {\n      var r = this,\n          n = this.transceivers[i].iceGatherer;\n\n      if (!n.onlocalcandidate) {\n        var s = this.transceivers[i].bufferedCandidateEvents;\n        this.transceivers[i].bufferedCandidateEvents = null, n.removeEventListener(\"localcandidate\", this.transceivers[i].bufferCandidates), n.onlocalcandidate = function (e) {\n          if (!(r.usingBundle && i > 0)) {\n            var s = new Event(\"icecandidate\");\n            s.candidate = {\n              sdpMid: t,\n              sdpMLineIndex: i\n            };\n            var o = e.candidate,\n                a = !o || 0 === Object.keys(o).length;\n            if (a) \"new\" !== n.state && \"gathering\" !== n.state || (n.state = \"completed\");else {\n              \"new\" === n.state && (n.state = \"gathering\"), o.component = 1, o.ufrag = n.getLocalParameters().usernameFragment;\n              var c = Oo.writeCandidate(o);\n              s.candidate = Object.assign(s.candidate, Oo.parseCandidate(c)), s.candidate.candidate = c, s.candidate.toJSON = function () {\n                return {\n                  candidate: s.candidate.candidate,\n                  sdpMid: s.candidate.sdpMid,\n                  sdpMLineIndex: s.candidate.sdpMLineIndex,\n                  usernameFragment: s.candidate.usernameFragment\n                };\n              };\n            }\n            var d = Oo.getMediaSections(r._localDescription.sdp);\n            d[s.candidate.sdpMLineIndex] += a ? \"a=end-of-candidates\\r\\n\" : \"a=\" + s.candidate.candidate + \"\\r\\n\", r._localDescription.sdp = Oo.getDescription(r._localDescription.sdp) + d.join(\"\");\n            var l = r.transceivers.every(function (e) {\n              return e.iceGatherer && \"completed\" === e.iceGatherer.state;\n            });\n            \"gathering\" !== r.iceGatheringState && (r.iceGatheringState = \"gathering\", r._emitGatheringStateChange()), a || r._dispatchEvent(\"icecandidate\", s), l && (r._dispatchEvent(\"icecandidate\", new Event(\"icecandidate\")), r.iceGatheringState = \"complete\", r._emitGatheringStateChange());\n          }\n        }, e.setTimeout(function () {\n          s.forEach(function (e) {\n            n.onlocalcandidate(e);\n          });\n        }, 0);\n      }\n    }, n.prototype._createIceAndDtlsTransports = function () {\n      var t = this,\n          i = new e.RTCIceTransport(null);\n\n      i.onicestatechange = function () {\n        t._updateIceConnectionState(), t._updateConnectionState();\n      };\n\n      var r = new e.RTCDtlsTransport(i);\n      return r.ondtlsstatechange = function () {\n        t._updateConnectionState();\n      }, r.onerror = function () {\n        Object.defineProperty(r, \"state\", {\n          value: \"failed\",\n          writable: !0\n        }), t._updateConnectionState();\n      }, {\n        iceTransport: i,\n        dtlsTransport: r\n      };\n    }, n.prototype._disposeIceAndDtlsTransports = function (e) {\n      var t = this.transceivers[e].iceGatherer;\n      t && (delete t.onlocalcandidate, delete this.transceivers[e].iceGatherer);\n      var i = this.transceivers[e].iceTransport;\n      i && (delete i.onicestatechange, delete this.transceivers[e].iceTransport);\n      var r = this.transceivers[e].dtlsTransport;\n      r && (delete r.ondtlsstatechange, delete r.onerror, delete this.transceivers[e].dtlsTransport);\n    }, n.prototype._transceive = function (e, i, r) {\n      var n = Do(e.localCapabilities, e.remoteCapabilities);\n      i && e.rtpSender && (n.encodings = e.sendEncodingParameters, n.rtcp = {\n        cname: Oo.localCName,\n        compound: e.rtcpParameters.compound\n      }, e.recvEncodingParameters.length && (n.rtcp.ssrc = e.recvEncodingParameters[0].ssrc), e.rtpSender.send(n)), r && e.rtpReceiver && n.codecs.length > 0 && (\"video\" === e.kind && e.recvEncodingParameters && t < 15019 && e.recvEncodingParameters.forEach(function (e) {\n        delete e.rtx;\n      }), e.recvEncodingParameters.length ? n.encodings = e.recvEncodingParameters : n.encodings = [{}], n.rtcp = {\n        compound: e.rtcpParameters.compound\n      }, e.rtcpParameters.cname && (n.rtcp.cname = e.rtcpParameters.cname), e.sendEncodingParameters.length && (n.rtcp.ssrc = e.sendEncodingParameters[0].ssrc), e.rtpReceiver.receive(n));\n    }, n.prototype.setLocalDescription = function (e) {\n      var t,\n          i,\n          r = this;\n      if (-1 === [\"offer\", \"answer\"].indexOf(e.type)) return Promise.reject(Po(\"TypeError\", 'Unsupported type \"' + e.type + '\"'));\n      if (!ko(\"setLocalDescription\", e.type, r.signalingState) || r._isClosed) return Promise.reject(Po(\"InvalidStateError\", \"Can not set local \" + e.type + \" in state \" + r.signalingState));\n      if (\"offer\" === e.type) t = Oo.splitSections(e.sdp), i = t.shift(), t.forEach(function (e, t) {\n        var i = Oo.parseRtpParameters(e);\n        r.transceivers[t].localCapabilities = i;\n      }), r.transceivers.forEach(function (e, t) {\n        r._gather(e.mid, t);\n      });else if (\"answer\" === e.type) {\n        t = Oo.splitSections(r._remoteDescription.sdp), i = t.shift();\n        var n = Oo.matchPrefix(i, \"a=ice-lite\").length > 0;\n        t.forEach(function (e, t) {\n          var s = r.transceivers[t],\n              o = s.iceGatherer,\n              a = s.iceTransport,\n              c = s.dtlsTransport,\n              d = s.localCapabilities,\n              l = s.remoteCapabilities;\n\n          if (!(Oo.isRejected(e) && 0 === Oo.matchPrefix(e, \"a=bundle-only\").length) && !s.rejected) {\n            var A = Oo.getIceParameters(e, i),\n                u = Oo.getDtlsParameters(e, i);\n            n && (u.role = \"server\"), r.usingBundle && 0 !== t || (r._gather(s.mid, t), \"new\" === a.state && a.start(o, A, n ? \"controlling\" : \"controlled\"), \"new\" === c.state && c.start(u));\n            var h = Do(d, l);\n\n            r._transceive(s, h.codecs.length > 0, !1);\n          }\n        });\n      }\n      return r._localDescription = {\n        type: e.type,\n        sdp: e.sdp\n      }, \"offer\" === e.type ? r._updateSignalingState(\"have-local-offer\") : r._updateSignalingState(\"stable\"), Promise.resolve();\n    }, n.prototype.setRemoteDescription = function (n) {\n      var s = this;\n      if (-1 === [\"offer\", \"answer\"].indexOf(n.type)) return Promise.reject(Po(\"TypeError\", 'Unsupported type \"' + n.type + '\"'));\n      if (!ko(\"setRemoteDescription\", n.type, s.signalingState) || s._isClosed) return Promise.reject(Po(\"InvalidStateError\", \"Can not set remote \" + n.type + \" in state \" + s.signalingState));\n      var o = {};\n      s.remoteStreams.forEach(function (e) {\n        o[e.id] = e;\n      });\n      var a = [],\n          c = Oo.splitSections(n.sdp),\n          d = c.shift(),\n          l = Oo.matchPrefix(d, \"a=ice-lite\").length > 0,\n          A = Oo.matchPrefix(d, \"a=group:BUNDLE \").length > 0;\n      s.usingBundle = A;\n      var u = Oo.matchPrefix(d, \"a=ice-options:\")[0];\n      return s.canTrickleIceCandidates = !!u && u.substr(14).split(\" \").indexOf(\"trickle\") >= 0, c.forEach(function (r, c) {\n        var u = Oo.splitLines(r),\n            h = Oo.getKind(r),\n            p = Oo.isRejected(r) && 0 === Oo.matchPrefix(r, \"a=bundle-only\").length,\n            E = u[0].substr(2).split(\" \")[2],\n            g = Oo.getDirection(r, d),\n            _ = Oo.parseMsid(r),\n            I = Oo.getMid(r) || Oo.generateIdentifier();\n\n        if (p || \"application\" === h && (\"DTLS/SCTP\" === E || \"UDP/DTLS/SCTP\" === E)) s.transceivers[c] = {\n          mid: I,\n          kind: h,\n          protocol: E,\n          rejected: !0\n        };else {\n          var f, m, C, S, R, T, v, y, w;\n          !p && s.transceivers[c] && s.transceivers[c].rejected && (s.transceivers[c] = s._createTransceiver(h, !0));\n          var N,\n              O,\n              b = Oo.parseRtpParameters(r);\n          p || (N = Oo.getIceParameters(r, d), (O = Oo.getDtlsParameters(r, d)).role = \"client\"), v = Oo.parseRtpEncodingParameters(r);\n          var D = Oo.parseRtcpParameters(r),\n              k = Oo.matchPrefix(r, \"a=end-of-candidates\", d).length > 0,\n              L = Oo.matchPrefix(r, \"a=candidate:\").map(function (e) {\n            return Oo.parseCandidate(e);\n          }).filter(function (e) {\n            return 1 === e.component;\n          });\n\n          if ((\"offer\" === n.type || \"answer\" === n.type) && !p && A && c > 0 && s.transceivers[c] && (s._disposeIceAndDtlsTransports(c), s.transceivers[c].iceGatherer = s.transceivers[0].iceGatherer, s.transceivers[c].iceTransport = s.transceivers[0].iceTransport, s.transceivers[c].dtlsTransport = s.transceivers[0].dtlsTransport, s.transceivers[c].rtpSender && s.transceivers[c].rtpSender.setTransport(s.transceivers[0].dtlsTransport), s.transceivers[c].rtpReceiver && s.transceivers[c].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)), \"offer\" !== n.type || p) {\n            if (\"answer\" === n.type && !p) {\n              m = (f = s.transceivers[c]).iceGatherer, C = f.iceTransport, S = f.dtlsTransport, R = f.rtpReceiver, T = f.sendEncodingParameters, y = f.localCapabilities, s.transceivers[c].recvEncodingParameters = v, s.transceivers[c].remoteCapabilities = b, s.transceivers[c].rtcpParameters = D, L.length && \"new\" === C.state && (!l && !k || A && 0 !== c ? L.forEach(function (e) {\n                Lo(f.iceTransport, e);\n              }) : C.setRemoteCandidates(L)), A && 0 !== c || (\"new\" === C.state && C.start(m, N, \"controlling\"), \"new\" === S.state && S.start(O)), !Do(f.localCapabilities, f.remoteCapabilities).codecs.filter(function (e) {\n                return \"rtx\" === e.name.toLowerCase();\n              }).length && f.sendEncodingParameters[0].rtx && delete f.sendEncodingParameters[0].rtx, s._transceive(f, \"sendrecv\" === g || \"recvonly\" === g, \"sendrecv\" === g || \"sendonly\" === g), !R || \"sendrecv\" !== g && \"sendonly\" !== g ? delete f.rtpReceiver : (w = R.track, _ ? (o[_.stream] || (o[_.stream] = new e.MediaStream()), i(w, o[_.stream]), a.push([w, R, o[_.stream]])) : (o.default || (o.default = new e.MediaStream()), i(w, o.default), a.push([w, R, o.default])));\n            }\n          } else {\n            (f = s.transceivers[c] || s._createTransceiver(h)).mid = I, f.iceGatherer || (f.iceGatherer = s._createIceGatherer(c, A)), L.length && \"new\" === f.iceTransport.state && (!k || A && 0 !== c ? L.forEach(function (e) {\n              Lo(f.iceTransport, e);\n            }) : f.iceTransport.setRemoteCandidates(L)), y = e.RTCRtpReceiver.getCapabilities(h), t < 15019 && (y.codecs = y.codecs.filter(function (e) {\n              return \"rtx\" !== e.name;\n            })), T = f.sendEncodingParameters || [{\n              ssrc: 1001 * (2 * c + 2)\n            }];\n            var P,\n                B = !1;\n\n            if (\"sendrecv\" === g || \"sendonly\" === g) {\n              if (B = !f.rtpReceiver, R = f.rtpReceiver || new e.RTCRtpReceiver(f.dtlsTransport, h), B) w = R.track, _ && \"-\" === _.stream || (_ ? (o[_.stream] || (o[_.stream] = new e.MediaStream(), Object.defineProperty(o[_.stream], \"id\", {\n                get: function get() {\n                  return _.stream;\n                }\n              })), Object.defineProperty(w, \"id\", {\n                get: function get() {\n                  return _.track;\n                }\n              }), P = o[_.stream]) : (o.default || (o.default = new e.MediaStream()), P = o.default)), P && (i(w, P), f.associatedRemoteMediaStreams.push(P)), a.push([w, R, P]);\n            } else f.rtpReceiver && f.rtpReceiver.track && (f.associatedRemoteMediaStreams.forEach(function (t) {\n              var i = t.getTracks().find(function (e) {\n                return e.id === f.rtpReceiver.track.id;\n              });\n              i && function (t, i) {\n                i.removeTrack(t), i.dispatchEvent(new e.MediaStreamTrackEvent(\"removetrack\", {\n                  track: t\n                }));\n              }(i, t);\n            }), f.associatedRemoteMediaStreams = []);\n\n            f.localCapabilities = y, f.remoteCapabilities = b, f.rtpReceiver = R, f.rtcpParameters = D, f.sendEncodingParameters = T, f.recvEncodingParameters = v, s._transceive(s.transceivers[c], !1, B);\n          }\n        }\n      }), void 0 === s._dtlsRole && (s._dtlsRole = \"offer\" === n.type ? \"active\" : \"passive\"), s._remoteDescription = {\n        type: n.type,\n        sdp: n.sdp\n      }, \"offer\" === n.type ? s._updateSignalingState(\"have-remote-offer\") : s._updateSignalingState(\"stable\"), Object.keys(o).forEach(function (t) {\n        var i = o[t];\n\n        if (i.getTracks().length) {\n          if (-1 === s.remoteStreams.indexOf(i)) {\n            s.remoteStreams.push(i);\n            var n = new Event(\"addstream\");\n            n.stream = i, e.setTimeout(function () {\n              s._dispatchEvent(\"addstream\", n);\n            });\n          }\n\n          a.forEach(function (e) {\n            var t = e[0],\n                n = e[1];\n            i.id === e[2].id && r(s, t, n, [i]);\n          });\n        }\n      }), a.forEach(function (e) {\n        e[2] || r(s, e[0], e[1], []);\n      }), e.setTimeout(function () {\n        s && s.transceivers && s.transceivers.forEach(function (e) {\n          e.iceTransport && \"new\" === e.iceTransport.state && e.iceTransport.getRemoteCandidates().length > 0 && (console.warn(\"Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification\"), e.iceTransport.addRemoteCandidate({}));\n        });\n      }, 4e3), Promise.resolve();\n    }, n.prototype.close = function () {\n      this.transceivers.forEach(function (e) {\n        e.iceTransport && e.iceTransport.stop(), e.dtlsTransport && e.dtlsTransport.stop(), e.rtpSender && e.rtpSender.stop(), e.rtpReceiver && e.rtpReceiver.stop();\n      }), this._isClosed = !0, this._updateSignalingState(\"closed\");\n    }, n.prototype._updateSignalingState = function (e) {\n      this.signalingState = e;\n      var t = new Event(\"signalingstatechange\");\n\n      this._dispatchEvent(\"signalingstatechange\", t);\n    }, n.prototype._maybeFireNegotiationNeeded = function () {\n      var t = this;\n      \"stable\" === this.signalingState && !0 !== this.needNegotiation && (this.needNegotiation = !0, e.setTimeout(function () {\n        if (t.needNegotiation) {\n          t.needNegotiation = !1;\n          var e = new Event(\"negotiationneeded\");\n\n          t._dispatchEvent(\"negotiationneeded\", e);\n        }\n      }, 0));\n    }, n.prototype._updateIceConnectionState = function () {\n      var e,\n          t = {\n        new: 0,\n        closed: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        disconnected: 0,\n        failed: 0\n      };\n\n      if (this.transceivers.forEach(function (e) {\n        e.iceTransport && !e.rejected && t[e.iceTransport.state]++;\n      }), e = \"new\", t.failed > 0 ? e = \"failed\" : t.checking > 0 ? e = \"checking\" : t.disconnected > 0 ? e = \"disconnected\" : t.new > 0 ? e = \"new\" : t.connected > 0 ? e = \"connected\" : t.completed > 0 && (e = \"completed\"), e !== this.iceConnectionState) {\n        this.iceConnectionState = e;\n        var i = new Event(\"iceconnectionstatechange\");\n\n        this._dispatchEvent(\"iceconnectionstatechange\", i);\n      }\n    }, n.prototype._updateConnectionState = function () {\n      var e,\n          t = {\n        new: 0,\n        closed: 0,\n        connecting: 0,\n        connected: 0,\n        completed: 0,\n        disconnected: 0,\n        failed: 0\n      };\n\n      if (this.transceivers.forEach(function (e) {\n        e.iceTransport && e.dtlsTransport && !e.rejected && (t[e.iceTransport.state]++, t[e.dtlsTransport.state]++);\n      }), t.connected += t.completed, e = \"new\", t.failed > 0 ? e = \"failed\" : t.connecting > 0 ? e = \"connecting\" : t.disconnected > 0 ? e = \"disconnected\" : t.new > 0 ? e = \"new\" : t.connected > 0 && (e = \"connected\"), e !== this.connectionState) {\n        this.connectionState = e;\n        var i = new Event(\"connectionstatechange\");\n\n        this._dispatchEvent(\"connectionstatechange\", i);\n      }\n    }, n.prototype.createOffer = function () {\n      var i = this;\n      if (i._isClosed) return Promise.reject(Po(\"InvalidStateError\", \"Can not call createOffer after close\"));\n      var r = i.transceivers.filter(function (e) {\n        return \"audio\" === e.kind;\n      }).length,\n          n = i.transceivers.filter(function (e) {\n        return \"video\" === e.kind;\n      }).length,\n          s = arguments[0];\n\n      if (s) {\n        if (s.mandatory || s.optional) throw new TypeError(\"Legacy mandatory/optional constraints not supported.\");\n        void 0 !== s.offerToReceiveAudio && (r = !0 === s.offerToReceiveAudio ? 1 : !1 === s.offerToReceiveAudio ? 0 : s.offerToReceiveAudio), void 0 !== s.offerToReceiveVideo && (n = !0 === s.offerToReceiveVideo ? 1 : !1 === s.offerToReceiveVideo ? 0 : s.offerToReceiveVideo);\n      }\n\n      for (i.transceivers.forEach(function (e) {\n        \"audio\" === e.kind ? --r < 0 && (e.wantReceive = !1) : \"video\" === e.kind && --n < 0 && (e.wantReceive = !1);\n      }); r > 0 || n > 0;) {\n        r > 0 && (i._createTransceiver(\"audio\"), r--), n > 0 && (i._createTransceiver(\"video\"), n--);\n      }\n\n      var o = Oo.writeSessionBoilerplate(i._sdpSessionId, i._sdpSessionVersion++);\n      i.transceivers.forEach(function (r, n) {\n        var s = r.track,\n            o = r.kind,\n            a = r.mid || Oo.generateIdentifier();\n        r.mid = a, r.iceGatherer || (r.iceGatherer = i._createIceGatherer(n, i.usingBundle));\n        var c = e.RTCRtpSender.getCapabilities(o);\n        t < 15019 && (c.codecs = c.codecs.filter(function (e) {\n          return \"rtx\" !== e.name;\n        })), c.codecs.forEach(function (e) {\n          \"H264\" === e.name && void 0 === e.parameters[\"level-asymmetry-allowed\"] && (e.parameters[\"level-asymmetry-allowed\"] = \"1\"), r.remoteCapabilities && r.remoteCapabilities.codecs && r.remoteCapabilities.codecs.forEach(function (t) {\n            e.name.toLowerCase() === t.name.toLowerCase() && e.clockRate === t.clockRate && (e.preferredPayloadType = t.payloadType);\n          });\n        }), c.headerExtensions.forEach(function (e) {\n          (r.remoteCapabilities && r.remoteCapabilities.headerExtensions || []).forEach(function (t) {\n            e.uri === t.uri && (e.id = t.id);\n          });\n        });\n        var d = r.sendEncodingParameters || [{\n          ssrc: 1001 * (2 * n + 1)\n        }];\n        s && t >= 15019 && \"video\" === o && !d[0].rtx && (d[0].rtx = {\n          ssrc: d[0].ssrc + 1\n        }), r.wantReceive && (r.rtpReceiver = new e.RTCRtpReceiver(r.dtlsTransport, o)), r.localCapabilities = c, r.sendEncodingParameters = d;\n      }), \"max-compat\" !== i._config.bundlePolicy && (o += \"a=group:BUNDLE \" + i.transceivers.map(function (e) {\n        return e.mid;\n      }).join(\" \") + \"\\r\\n\"), o += \"a=ice-options:trickle\\r\\n\", i.transceivers.forEach(function (e, t) {\n        o += bo(e, e.localCapabilities, \"offer\", e.stream, i._dtlsRole), o += \"a=rtcp-rsize\\r\\n\", !e.iceGatherer || \"new\" === i.iceGatheringState || 0 !== t && i.usingBundle || (e.iceGatherer.getLocalCandidates().forEach(function (e) {\n          e.component = 1, o += \"a=\" + Oo.writeCandidate(e) + \"\\r\\n\";\n        }), \"completed\" === e.iceGatherer.state && (o += \"a=end-of-candidates\\r\\n\"));\n      });\n      var a = new e.RTCSessionDescription({\n        type: \"offer\",\n        sdp: o\n      });\n      return Promise.resolve(a);\n    }, n.prototype.createAnswer = function () {\n      var i = this;\n      if (i._isClosed) return Promise.reject(Po(\"InvalidStateError\", \"Can not call createAnswer after close\"));\n      if (\"have-remote-offer\" !== i.signalingState && \"have-local-pranswer\" !== i.signalingState) return Promise.reject(Po(\"InvalidStateError\", \"Can not call createAnswer in signalingState \" + i.signalingState));\n      var r = Oo.writeSessionBoilerplate(i._sdpSessionId, i._sdpSessionVersion++);\n      i.usingBundle && (r += \"a=group:BUNDLE \" + i.transceivers.map(function (e) {\n        return e.mid;\n      }).join(\" \") + \"\\r\\n\"), r += \"a=ice-options:trickle\\r\\n\";\n      var n = Oo.getMediaSections(i._remoteDescription.sdp).length;\n      i.transceivers.forEach(function (e, s) {\n        if (!(s + 1 > n)) {\n          if (e.rejected) return \"application\" === e.kind ? \"DTLS/SCTP\" === e.protocol ? r += \"m=application 0 DTLS/SCTP 5000\\r\\n\" : r += \"m=application 0 \" + e.protocol + \" webrtc-datachannel\\r\\n\" : \"audio\" === e.kind ? r += \"m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\na=rtpmap:0 PCMU/8000\\r\\n\" : \"video\" === e.kind && (r += \"m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\na=rtpmap:120 VP8/90000\\r\\n\"), void (r += \"c=IN IP4 0.0.0.0\\r\\na=inactive\\r\\na=mid:\" + e.mid + \"\\r\\n\");\n          var o;\n          if (e.stream) \"audio\" === e.kind ? o = e.stream.getAudioTracks()[0] : \"video\" === e.kind && (o = e.stream.getVideoTracks()[0]), o && t >= 15019 && \"video\" === e.kind && !e.sendEncodingParameters[0].rtx && (e.sendEncodingParameters[0].rtx = {\n            ssrc: e.sendEncodingParameters[0].ssrc + 1\n          });\n          var a = Do(e.localCapabilities, e.remoteCapabilities);\n          !a.codecs.filter(function (e) {\n            return \"rtx\" === e.name.toLowerCase();\n          }).length && e.sendEncodingParameters[0].rtx && delete e.sendEncodingParameters[0].rtx, r += bo(e, a, \"answer\", e.stream, i._dtlsRole), e.rtcpParameters && e.rtcpParameters.reducedSize && (r += \"a=rtcp-rsize\\r\\n\");\n        }\n      });\n      var s = new e.RTCSessionDescription({\n        type: \"answer\",\n        sdp: r\n      });\n      return Promise.resolve(s);\n    }, n.prototype.addIceCandidate = function (e) {\n      var t,\n          i = this;\n      return e && void 0 === e.sdpMLineIndex && !e.sdpMid ? Promise.reject(new TypeError(\"sdpMLineIndex or sdpMid required\")) : new Promise(function (r, n) {\n        if (!i._remoteDescription) return n(Po(\"InvalidStateError\", \"Can not add ICE candidate without a remote description\"));\n\n        if (e && \"\" !== e.candidate) {\n          var s = e.sdpMLineIndex;\n          if (e.sdpMid) for (var o = 0; o < i.transceivers.length; o++) {\n            if (i.transceivers[o].mid === e.sdpMid) {\n              s = o;\n              break;\n            }\n          }\n          var a = i.transceivers[s];\n          if (!a) return n(Po(\"OperationError\", \"Can not add ICE candidate\"));\n          if (a.rejected) return r();\n          var c = Object.keys(e.candidate).length > 0 ? Oo.parseCandidate(e.candidate) : {};\n          if (\"tcp\" === c.protocol && (0 === c.port || 9 === c.port)) return r();\n          if (c.component && 1 !== c.component) return r();\n          if ((0 === s || s > 0 && a.iceTransport !== i.transceivers[0].iceTransport) && !Lo(a.iceTransport, c)) return n(Po(\"OperationError\", \"Can not add ICE candidate\"));\n          var d = e.candidate.trim();\n          0 === d.indexOf(\"a=\") && (d = d.substr(2)), (t = Oo.getMediaSections(i._remoteDescription.sdp))[s] += \"a=\" + (c.type ? d : \"end-of-candidates\") + \"\\r\\n\", i._remoteDescription.sdp = Oo.getDescription(i._remoteDescription.sdp) + t.join(\"\");\n        } else for (var l = 0; l < i.transceivers.length && (i.transceivers[l].rejected || (i.transceivers[l].iceTransport.addRemoteCandidate({}), (t = Oo.getMediaSections(i._remoteDescription.sdp))[l] += \"a=end-of-candidates\\r\\n\", i._remoteDescription.sdp = Oo.getDescription(i._remoteDescription.sdp) + t.join(\"\"), !i.usingBundle)); l++) {\n          ;\n        }\n\n        r();\n      });\n    }, n.prototype.getStats = function (t) {\n      if (t && t instanceof e.MediaStreamTrack) {\n        var i = null;\n        if (this.transceivers.forEach(function (e) {\n          e.rtpSender && e.rtpSender.track === t ? i = e.rtpSender : e.rtpReceiver && e.rtpReceiver.track === t && (i = e.rtpReceiver);\n        }), !i) throw Po(\"InvalidAccessError\", \"Invalid selector.\");\n        return i.getStats();\n      }\n\n      var r = [];\n      return this.transceivers.forEach(function (e) {\n        [\"rtpSender\", \"rtpReceiver\", \"iceGatherer\", \"iceTransport\", \"dtlsTransport\"].forEach(function (t) {\n          e[t] && r.push(e[t].getStats());\n        });\n      }), Promise.all(r).then(function (e) {\n        var t = new Map();\n        return e.forEach(function (e) {\n          e.forEach(function (e) {\n            t.set(e.id, e);\n          });\n        }), t;\n      });\n    };\n    [\"RTCRtpSender\", \"RTCRtpReceiver\", \"RTCIceGatherer\", \"RTCIceTransport\", \"RTCDtlsTransport\"].forEach(function (t) {\n      var i = e[t];\n\n      if (i && i.prototype && i.prototype.getStats) {\n        var r = i.prototype.getStats;\n\n        i.prototype.getStats = function () {\n          return r.apply(this).then(function (e) {\n            var t = new Map();\n            return Object.keys(e).forEach(function (i) {\n              var r;\n              e[i].type = {\n                inboundrtp: \"inbound-rtp\",\n                outboundrtp: \"outbound-rtp\",\n                candidatepair: \"candidate-pair\",\n                localcandidate: \"local-candidate\",\n                remotecandidate: \"remote-candidate\"\n              }[(r = e[i]).type] || r.type, t.set(i, e[i]);\n            }), t;\n          });\n        };\n      }\n    });\n    var s = [\"createOffer\", \"createAnswer\"];\n    return s.forEach(function (e) {\n      var t = n.prototype[e];\n\n      n.prototype[e] = function () {\n        var e = arguments;\n        return \"function\" == typeof e[0] || \"function\" == typeof e[1] ? t.apply(this, [arguments[2]]).then(function (t) {\n          \"function\" == typeof e[0] && e[0].apply(null, [t]);\n        }, function (t) {\n          \"function\" == typeof e[1] && e[1].apply(null, [t]);\n        }) : t.apply(this, arguments);\n      };\n    }), (s = [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"]).forEach(function (e) {\n      var t = n.prototype[e];\n\n      n.prototype[e] = function () {\n        var e = arguments;\n        return \"function\" == typeof e[1] || \"function\" == typeof e[2] ? t.apply(this, arguments).then(function () {\n          \"function\" == typeof e[1] && e[1].apply(null);\n        }, function (t) {\n          \"function\" == typeof e[2] && e[2].apply(null, [t]);\n        }) : t.apply(this, arguments);\n      };\n    }), [\"getStats\"].forEach(function (e) {\n      var t = n.prototype[e];\n\n      n.prototype[e] = function () {\n        var e = arguments;\n        return \"function\" == typeof e[1] ? t.apply(this, arguments).then(function () {\n          \"function\" == typeof e[1] && e[1].apply(null);\n        }) : t.apply(this, arguments);\n      };\n    }), n;\n  };\n\n  function Mo(e) {\n    var t;\n    var i = e && e.navigator,\n        r = qs(t = i.mediaDevices.getUserMedia).call(t, i.mediaDevices);\n\n    i.mediaDevices.getUserMedia = function (e) {\n      return r(e).catch(function (e) {\n        return As.reject(function (e) {\n          return {\n            name: {\n              PermissionDeniedError: \"NotAllowedError\"\n            }[e.name] || e.name,\n            message: e.message,\n            constraint: e.constraint,\n            toString: function toString() {\n              return this.name;\n            }\n          };\n        }(e));\n      });\n    };\n  }\n\n  function Uo(e) {\n    var t;\n    \"getDisplayMedia\" in e.navigator && e.navigator.mediaDevices && (e.navigator.mediaDevices && \"getDisplayMedia\" in e.navigator.mediaDevices || (e.navigator.mediaDevices.getDisplayMedia = qs(t = e.navigator.getDisplayMedia).call(t, e.navigator)));\n  }\n\n  function Qo(e) {\n    var t = Or(e);\n\n    if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function (e) {\n      return e;\n    }), e.RTCSessionDescription || (e.RTCSessionDescription = function (e) {\n      return e;\n    }), t.version < 15025)) {\n      var _t11 = Br(e.MediaStreamTrack.prototype, \"enabled\");\n\n      dr(e.MediaStreamTrack.prototype, \"enabled\", {\n        set: function set(e) {\n          _t11.set.call(this, e);\n\n          var i = new Event(\"enabled\");\n          i.enabled = e, this.dispatchEvent(i);\n        }\n      });\n    }\n\n    e.RTCRtpSender && !(\"dtmf\" in e.RTCRtpSender.prototype) && dr(e.RTCRtpSender.prototype, \"dtmf\", {\n      get: function get() {\n        return void 0 === this._dtmf && (\"audio\" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : \"video\" === this.track.kind && (this._dtmf = null)), this._dtmf;\n      }\n    }), e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender);\n    var i = Bo(e, t.version);\n    e.RTCPeerConnection = function (e) {\n      return e && e.iceServers && (e.iceServers = function (e, t) {\n        var i = !1;\n        return e = JSON.parse(ge(e)), Fr(e).call(e, function (e) {\n          if (e && (e.urls || e.url)) {\n            var t = e.urls || e.url;\n            e.url && !e.urls && Nr(\"RTCIceServer.url\", \"RTCIceServer.urls\");\n\n            var _r8 = \"string\" == typeof t;\n\n            return _r8 && (t = [t]), t = Fr(t).call(t, function (e) {\n              if (0 === Os(e).call(e, \"stun:\")) return !1;\n              var t = Ro(e).call(e, \"turn\") && !Ro(e).call(e, \"turn:[\") && eo(e).call(e, \"transport=udp\");\n              return t && !i ? (i = !0, !0) : t && !i;\n            }), delete e.url, e.urls = _r8 ? t[0] : t, !!t.length;\n          }\n        });\n      }(e.iceServers, t.version), wr(\"ICE servers after filtering:\", e.iceServers)), new i(e);\n    }, e.RTCPeerConnection.prototype = i.prototype;\n  }\n\n  function Fo(e) {\n    e.RTCRtpSender && !(\"replaceTrack\" in e.RTCRtpSender.prototype) && (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack);\n  }\n\n  var xo = Object.freeze({\n    __proto__: null,\n    shimPeerConnection: Qo,\n    shimReplaceTrack: Fo,\n    shimGetUserMedia: Mo,\n    shimGetDisplayMedia: Uo\n  });\n\n  function Vo(e) {\n    var t = Or(e),\n        i = e && e.navigator,\n        r = e && e.MediaStreamTrack;\n\n    if (i.getUserMedia = function (e, t, r) {\n      Nr(\"navigator.getUserMedia\", \"navigator.mediaDevices.getUserMedia\"), i.mediaDevices.getUserMedia(e).then(t, r);\n    }, !(t.version > 55 && \"autoGainControl\" in i.mediaDevices.getSupportedConstraints())) {\n      var n;\n\n      var _e5 = function _e5(e, t, i) {\n        t in e && !(i in e) && (e[i] = e[t], delete e[t]);\n      },\n          _t12 = qs(n = i.mediaDevices.getUserMedia).call(n, i.mediaDevices);\n\n      if (i.mediaDevices.getUserMedia = function (i) {\n        return \"object\" == typeof i && \"object\" == typeof i.audio && (i = JSON.parse(ge(i)), _e5(i.audio, \"autoGainControl\", \"mozAutoGainControl\"), _e5(i.audio, \"noiseSuppression\", \"mozNoiseSuppression\")), _t12(i);\n      }, r && r.prototype.getSettings) {\n        var _t13 = r.prototype.getSettings;\n\n        r.prototype.getSettings = function () {\n          var i = _t13.apply(this, arguments);\n\n          return _e5(i, \"mozAutoGainControl\", \"autoGainControl\"), _e5(i, \"mozNoiseSuppression\", \"noiseSuppression\"), i;\n        };\n      }\n\n      if (r && r.prototype.applyConstraints) {\n        var _t14 = r.prototype.applyConstraints;\n\n        r.prototype.applyConstraints = function (i) {\n          return \"audio\" === this.kind && \"object\" == typeof i && (i = JSON.parse(ge(i)), _e5(i, \"autoGainControl\", \"mozAutoGainControl\"), _e5(i, \"noiseSuppression\", \"mozNoiseSuppression\")), _t14.apply(this, [i]);\n        };\n      }\n    }\n  }\n\n  function Go(e) {\n    \"object\" == typeof e && e.RTCTrackEvent && \"receiver\" in e.RTCTrackEvent.prototype && !(\"transceiver\" in e.RTCTrackEvent.prototype) && dr(e.RTCTrackEvent.prototype, \"transceiver\", {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n\n  function jo(e) {\n    var t = Or(e);\n    if (\"object\" != typeof e || !e.RTCPeerConnection && !e.mozRTCPeerConnection) return;\n    var i;\n    (!e.RTCPeerConnection && e.mozRTCPeerConnection && (e.RTCPeerConnection = e.mozRTCPeerConnection), t.version < 53) && Xi(i = [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"]).call(i, function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n          r = _defineProperty({}, t, function () {\n        return arguments[0] = new (\"addIceCandidate\" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), i.apply(this, arguments);\n      });\n\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n    var r = e.RTCPeerConnection.prototype.addIceCandidate;\n\n    e.RTCPeerConnection.prototype.addIceCandidate = function () {\n      return arguments[0] ? t.version < 68 && arguments[0] && \"\" === arguments[0].candidate ? As.resolve() : r.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), As.resolve());\n    };\n\n    var n = {\n      inboundrtp: \"inbound-rtp\",\n      outboundrtp: \"outbound-rtp\",\n      candidatepair: \"candidate-pair\",\n      localcandidate: \"local-candidate\",\n      remotecandidate: \"remote-candidate\"\n    },\n        s = e.RTCPeerConnection.prototype.getStats;\n\n    e.RTCPeerConnection.prototype.getStats = function () {\n      var _arguments2 = Array.prototype.slice.call(arguments),\n          e = _arguments2[0],\n          i = _arguments2[1],\n          r = _arguments2[2];\n\n      return s.apply(this, [e || null]).then(function (e) {\n        if (t.version < 53 && !i) try {\n          Xi(e).call(e, function (e) {\n            e.type = n[e.type] || e.type;\n          });\n        } catch (t) {\n          if (\"TypeError\" !== t.name) throw t;\n          Xi(e).call(e, function (t, i) {\n            e.set(i, er({}, t, {\n              type: n[t.type] || t.type\n            }));\n          });\n        }\n        return e;\n      }).then(i, r);\n    };\n  }\n\n  function Ko(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender) return;\n    if (e.RTCRtpSender && \"getStats\" in e.RTCRtpSender.prototype) return;\n    var t = e.RTCPeerConnection.prototype.getSenders;\n    t && (e.RTCPeerConnection.prototype.getSenders = function () {\n      var _this16 = this;\n\n      var e = t.apply(this, []);\n      return Xi(e).call(e, function (e) {\n        return e._pc = _this16;\n      }), e;\n    });\n    var i = e.RTCPeerConnection.prototype.addTrack;\n    i && (e.RTCPeerConnection.prototype.addTrack = function () {\n      var e = i.apply(this, arguments);\n      return e._pc = this, e;\n    }), e.RTCRtpSender.prototype.getStats = function () {\n      return this.track ? this._pc.getStats(this.track) : As.resolve(new Li());\n    };\n  }\n\n  function Wo(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender) return;\n    if (e.RTCRtpSender && \"getStats\" in e.RTCRtpReceiver.prototype) return;\n    var t = e.RTCPeerConnection.prototype.getReceivers;\n    t && (e.RTCPeerConnection.prototype.getReceivers = function () {\n      var _this17 = this;\n\n      var e = t.apply(this, []);\n      return Xi(e).call(e, function (e) {\n        return e._pc = _this17;\n      }), e;\n    }), Tr(e, \"track\", function (e) {\n      return e.receiver._pc = e.srcElement, e;\n    }), e.RTCRtpReceiver.prototype.getStats = function () {\n      return this._pc.getStats(this.track);\n    };\n  }\n\n  function Ho(e) {\n    e.RTCPeerConnection && !(\"removeStream\" in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.removeStream = function (e) {\n      var _this18 = this;\n\n      var t;\n      Nr(\"removeStream\", \"removeTrack\"), Xi(t = this.getSenders()).call(t, function (t) {\n        var i;\n        t.track && eo(i = e.getTracks()).call(i, t.track) && _this18.removeTrack(t);\n      });\n    });\n  }\n\n  function Yo(e) {\n    e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel);\n  }\n\n  var qo = Object.freeze({\n    __proto__: null,\n    shimOnTrack: Go,\n    shimPeerConnection: jo,\n    shimSenderGetStats: Ko,\n    shimReceiverGetStats: Wo,\n    shimRemoveStream: Ho,\n    shimRTCDataChannel: Yo,\n    shimGetUserMedia: Vo,\n    shimGetDisplayMedia: function shimGetDisplayMedia(e, t) {\n      e.navigator.mediaDevices && \"getDisplayMedia\" in e.navigator.mediaDevices || e.navigator.mediaDevices && (e.navigator.mediaDevices.getDisplayMedia = function (i) {\n        if (!i || !i.video) {\n          var _e6 = new DOMException(\"getDisplayMedia without video constraints is undefined\");\n\n          return _e6.name = \"NotFoundError\", _e6.code = 8, As.reject(_e6);\n        }\n\n        return !0 === i.video ? i.video = {\n          mediaSource: t\n        } : i.video.mediaSource = t, e.navigator.mediaDevices.getUserMedia(i);\n      });\n    }\n  });\n\n  function Jo(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection) {\n      if (\"getLocalStreams\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function () {\n        return this._localStreams || (this._localStreams = []), this._localStreams;\n      }), !(\"addStream\" in e.RTCPeerConnection.prototype)) {\n        var _t15 = e.RTCPeerConnection.prototype.addTrack;\n        e.RTCPeerConnection.prototype.addStream = function (e) {\n          var _this19 = this;\n\n          var i, r, n;\n          this._localStreams || (this._localStreams = []), eo(i = this._localStreams).call(i, e) || this._localStreams.push(e), Xi(r = e.getAudioTracks()).call(r, function (i) {\n            return _t15.call(_this19, i, e);\n          }), Xi(n = e.getVideoTracks()).call(n, function (i) {\n            return _t15.call(_this19, i, e);\n          });\n        }, e.RTCPeerConnection.prototype.addTrack = function (e, i) {\n          var r;\n          i && (this._localStreams ? eo(r = this._localStreams).call(r, i) || this._localStreams.push(i) : this._localStreams = [i]);\n          return _t15.call(this, e, i);\n        };\n      }\n\n      \"removeStream\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) {\n        var _this20 = this;\n\n        var t, i, r;\n        this._localStreams || (this._localStreams = []);\n        var n = Os(t = this._localStreams).call(t, e);\n        if (-1 === n) return;\n        Ss(i = this._localStreams).call(i, n, 1);\n        var s = e.getTracks();\n        Xi(r = this.getSenders()).call(r, function (e) {\n          eo(s).call(s, e.track) && _this20.removeTrack(e);\n        });\n      });\n    }\n  }\n\n  function Xo(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && (\"getRemoteStreams\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function () {\n      return this._remoteStreams ? this._remoteStreams : [];\n    }), !(\"onaddstream\" in e.RTCPeerConnection.prototype))) {\n      dr(e.RTCPeerConnection.prototype, \"onaddstream\", {\n        get: function get() {\n          return this._onaddstream;\n        },\n        set: function set(e) {\n          var _this21 = this;\n\n          this._onaddstream && (this.removeEventListener(\"addstream\", this._onaddstream), this.removeEventListener(\"track\", this._onaddstreampoly)), this.addEventListener(\"addstream\", this._onaddstream = e), this.addEventListener(\"track\", this._onaddstreampoly = function (e) {\n            var t;\n            Xi(t = e.streams).call(t, function (e) {\n              var t;\n              if (_this21._remoteStreams || (_this21._remoteStreams = []), eo(t = _this21._remoteStreams).call(t, e)) return;\n\n              _this21._remoteStreams.push(e);\n\n              var i = new Event(\"addstream\");\n              i.stream = e, _this21.dispatchEvent(i);\n            });\n          });\n        }\n      });\n      var _t16 = e.RTCPeerConnection.prototype.setRemoteDescription;\n\n      e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n        var e = this;\n        return this._onaddstreampoly || this.addEventListener(\"track\", this._onaddstreampoly = function (t) {\n          var i;\n          Xi(i = t.streams).call(i, function (t) {\n            var i;\n            if (e._remoteStreams || (e._remoteStreams = []), Os(i = e._remoteStreams).call(i, t) >= 0) return;\n\n            e._remoteStreams.push(t);\n\n            var r = new Event(\"addstream\");\n            r.stream = t, e.dispatchEvent(r);\n          });\n        }), _t16.apply(e, arguments);\n      };\n    }\n  }\n\n  function zo(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype,\n        i = t.createOffer,\n        r = t.createAnswer,\n        n = t.setLocalDescription,\n        s = t.setRemoteDescription,\n        o = t.addIceCandidate;\n    t.createOffer = function (e, t) {\n      var r = arguments.length >= 2 ? arguments[2] : arguments[0],\n          n = i.apply(this, [r]);\n      return t ? (n.then(e, t), As.resolve()) : n;\n    }, t.createAnswer = function (e, t) {\n      var i = arguments.length >= 2 ? arguments[2] : arguments[0],\n          n = r.apply(this, [i]);\n      return t ? (n.then(e, t), As.resolve()) : n;\n    };\n\n    var a = function a(e, t, i) {\n      var r = n.apply(this, [e]);\n      return i ? (r.then(t, i), As.resolve()) : r;\n    };\n\n    t.setLocalDescription = a, a = function a(e, t, i) {\n      var r = s.apply(this, [e]);\n      return i ? (r.then(t, i), As.resolve()) : r;\n    }, t.setRemoteDescription = a, a = function a(e, t, i) {\n      var r = o.apply(this, [e]);\n      return i ? (r.then(t, i), As.resolve()) : r;\n    }, t.addIceCandidate = a;\n  }\n\n  function Zo(e) {\n    var t = e && e.navigator;\n\n    if (t.mediaDevices && t.mediaDevices.getUserMedia) {\n      var i;\n\n      var _e7 = t.mediaDevices,\n          _r10 = qs(i = _e7.getUserMedia).call(i, _e7);\n\n      t.mediaDevices.getUserMedia = function (e) {\n        return _r10($o(e));\n      };\n    }\n\n    var r;\n    !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = qs(r = function r(e, i, _r11) {\n      t.mediaDevices.getUserMedia(e).then(i, _r11);\n    }).call(r, t));\n  }\n\n  function $o(e) {\n    return e && void 0 !== e.video ? er({}, e, {\n      video: Dr(e.video)\n    }) : e;\n  }\n\n  function ea(e) {\n    var t = e.RTCPeerConnection;\n    e.RTCPeerConnection = function (e, i) {\n      if (e && e.iceServers) {\n        var _t17 = [];\n\n        for (var _i7 = 0; _i7 < e.iceServers.length; _i7++) {\n          var _r12 = e.iceServers[_i7];\n          !_r12.hasOwnProperty(\"urls\") && _r12.hasOwnProperty(\"url\") ? (Nr(\"RTCIceServer.url\", \"RTCIceServer.urls\"), _r12 = JSON.parse(ge(_r12)), _r12.urls = _r12.url, delete _r12.url, _t17.push(_r12)) : _t17.push(e.iceServers[_i7]);\n        }\n\n        e.iceServers = _t17;\n      }\n\n      return new t(e, i);\n    }, e.RTCPeerConnection.prototype = t.prototype, \"generateCertificate\" in e.RTCPeerConnection && dr(e.RTCPeerConnection, \"generateCertificate\", {\n      get: function get() {\n        return t.generateCertificate;\n      }\n    });\n  }\n\n  function ta(e) {\n    \"object\" == typeof e && e.RTCPeerConnection && \"receiver\" in e.RTCTrackEvent.prototype && !e.RTCTransceiver && dr(e.RTCTrackEvent.prototype, \"transceiver\", {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n\n  function ia(e) {\n    var t = e.RTCPeerConnection.prototype.createOffer;\n\n    e.RTCPeerConnection.prototype.createOffer = function (e) {\n      if (e) {\n        var i, r;\n        void 0 !== e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);\n\n        var _t18 = Vs(i = this.getTransceivers()).call(i, function (e) {\n          return \"audio\" === e.receiver.track.kind;\n        });\n\n        !1 === e.offerToReceiveAudio && _t18 ? \"sendrecv\" === _t18.direction ? _t18.setDirection ? _t18.setDirection(\"sendonly\") : _t18.direction = \"sendonly\" : \"recvonly\" === _t18.direction && (_t18.setDirection ? _t18.setDirection(\"inactive\") : _t18.direction = \"inactive\") : !0 !== e.offerToReceiveAudio || _t18 || this.addTransceiver(\"audio\"), void 0 !== e.offerToReceiveVideo && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);\n\n        var _n5 = Vs(r = this.getTransceivers()).call(r, function (e) {\n          return \"video\" === e.receiver.track.kind;\n        });\n\n        !1 === e.offerToReceiveVideo && _n5 ? \"sendrecv\" === _n5.direction ? _n5.setDirection ? _n5.setDirection(\"sendonly\") : _n5.direction = \"sendonly\" : \"recvonly\" === _n5.direction && (_n5.setDirection ? _n5.setDirection(\"inactive\") : _n5.direction = \"inactive\") : !0 !== e.offerToReceiveVideo || _n5 || this.addTransceiver(\"video\");\n      }\n\n      return t.apply(this, arguments);\n    };\n  }\n\n  var ra = Object.freeze({\n    __proto__: null,\n    shimLocalStreamsAPI: Jo,\n    shimRemoteStreamsAPI: Xo,\n    shimCallbacksAPI: zo,\n    shimGetUserMedia: Zo,\n    shimConstraints: $o,\n    shimRTCIceServerUrls: ea,\n    shimTrackEventTransceiver: ta,\n    shimCreateOfferLegacy: ia\n  });\n\n  function na(e) {\n    if (!e.RTCIceCandidate || e.RTCIceCandidate && \"foundation\" in e.RTCIceCandidate.prototype) return;\n    var t = e.RTCIceCandidate;\n    e.RTCIceCandidate = function (e) {\n      var i;\n\n      if (\"object\" == typeof e && e.candidate && 0 === Os(i = e.candidate).call(i, \"a=\") && ((e = JSON.parse(ge(e))).candidate = e.candidate.substr(2)), e.candidate && e.candidate.length) {\n        var _i8 = new t(e),\n            _r13 = Oo.parseCandidate(e.candidate),\n            _n6 = er(_i8, _r13);\n\n        return _n6.toJSON = function () {\n          return {\n            candidate: _n6.candidate,\n            sdpMid: _n6.sdpMid,\n            sdpMLineIndex: _n6.sdpMLineIndex,\n            usernameFragment: _n6.usernameFragment\n          };\n        }, _n6;\n      }\n\n      return new t(e);\n    }, e.RTCIceCandidate.prototype = t.prototype, Tr(e, \"icecandidate\", function (t) {\n      return t.candidate && dr(t, \"candidate\", {\n        value: new e.RTCIceCandidate(t.candidate),\n        writable: \"false\"\n      }), t;\n    });\n  }\n\n  function sa(e) {\n    if (!e.RTCPeerConnection) return;\n    var t = Or(e);\n    \"sctp\" in e.RTCPeerConnection.prototype || dr(e.RTCPeerConnection.prototype, \"sctp\", {\n      get: function get() {\n        return void 0 === this._sctp ? null : this._sctp;\n      }\n    });\n\n    var i = function i(e) {\n      if (!e || !e.sdp) return !1;\n      var t = Oo.splitSections(e.sdp);\n      return t.shift(), no(t).call(t, function (e) {\n        var t;\n        var i = Oo.parseMLine(e);\n        return i && \"application\" === i.kind && -1 !== Os(t = i.protocol).call(t, \"SCTP\");\n      });\n    },\n        r = function r(e) {\n      var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (null === t || t.length < 2) return -1;\n      var i = mr(t[1], 10);\n      return i != i ? -1 : i;\n    },\n        n = function n(e) {\n      var i = 65536;\n      return \"firefox\" === t.browser && (i = t.version < 57 ? -1 === e ? 16384 : 2147483637 : t.version < 60 ? 57 === t.version ? 65535 : 65536 : 2147483637), i;\n    },\n        s = function s(e, i) {\n      var r = 65536;\n      \"firefox\" === t.browser && 57 === t.version && (r = 65535);\n      var n = Oo.matchPrefix(e.sdp, \"a=max-message-size:\");\n      return n.length > 0 ? r = mr(n[0].substr(19), 10) : \"firefox\" === t.browser && -1 !== i && (r = 2147483637), r;\n    },\n        o = e.RTCPeerConnection.prototype.setRemoteDescription;\n\n    e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n      if (this._sctp = null, \"chrome\" === t.browser && t.version >= 76) {\n        var _this$getConfiguratio = this.getConfiguration(),\n            _e8 = _this$getConfiguratio.sdpSemantics;\n\n        \"plan-b\" === _e8 && dr(this, \"sctp\", {\n          get: function get() {\n            return void 0 === this._sctp ? null : this._sctp;\n          },\n          enumerable: !0,\n          configurable: !0\n        });\n      }\n\n      if (i(arguments[0])) {\n        var _e9 = r(arguments[0]),\n            _t19 = n(_e9),\n            _i9 = s(arguments[0], _e9);\n\n        var _o3;\n\n        _o3 = 0 === _t19 && 0 === _i9 ? Number.POSITIVE_INFINITY : 0 === _t19 || 0 === _i9 ? Math.max(_t19, _i9) : Math.min(_t19, _i9);\n        var _a2 = {};\n        dr(_a2, \"maxMessageSize\", {\n          get: function get() {\n            return _o3;\n          }\n        }), this._sctp = _a2;\n      }\n\n      return o.apply(this, arguments);\n    };\n  }\n\n  function oa(e) {\n    if (!e.RTCPeerConnection || !(\"createDataChannel\" in e.RTCPeerConnection.prototype)) return;\n\n    function t(e, t) {\n      var i = e.send;\n\n      e.send = function () {\n        var r = arguments[0],\n            n = r.length || r.size || r.byteLength;\n        if (\"open\" === e.readyState && t.sctp && n > t.sctp.maxMessageSize) throw new TypeError(\"Message too large (can send a maximum of \" + t.sctp.maxMessageSize + \" bytes)\");\n        return i.apply(e, arguments);\n      };\n    }\n\n    var i = e.RTCPeerConnection.prototype.createDataChannel;\n    e.RTCPeerConnection.prototype.createDataChannel = function () {\n      var e = i.apply(this, arguments);\n      return t(e, this), e;\n    }, Tr(e, \"datachannel\", function (e) {\n      return t(e.channel, e.target), e;\n    });\n  }\n\n  function aa(e) {\n    var t;\n    if (!e.RTCPeerConnection || \"connectionState\" in e.RTCPeerConnection.prototype) return;\n    var i = e.RTCPeerConnection.prototype;\n    dr(i, \"connectionState\", {\n      get: function get() {\n        return {\n          completed: \"connected\",\n          checking: \"connecting\"\n        }[this.iceConnectionState] || this.iceConnectionState;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), dr(i, \"onconnectionstatechange\", {\n      get: function get() {\n        return this._onconnectionstatechange || null;\n      },\n      set: function set(e) {\n        this._onconnectionstatechange && (this.removeEventListener(\"connectionstatechange\", this._onconnectionstatechange), delete this._onconnectionstatechange), e && this.addEventListener(\"connectionstatechange\", this._onconnectionstatechange = e);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Xi(t = [\"setLocalDescription\", \"setRemoteDescription\"]).call(t, function (e) {\n      var t = i[e];\n\n      i[e] = function () {\n        return this._connectionstatechangepoly || (this._connectionstatechangepoly = function (e) {\n          var t = e.target;\n\n          if (t._lastConnectionState !== t.connectionState) {\n            t._lastConnectionState = t.connectionState;\n\n            var _i10 = new Event(\"connectionstatechange\", e);\n\n            t.dispatchEvent(_i10);\n          }\n\n          return e;\n        }, this.addEventListener(\"iceconnectionstatechange\", this._connectionstatechangepoly)), t.apply(this, arguments);\n      };\n    });\n  }\n\n  function ca(e) {\n    if (!e.RTCPeerConnection) return;\n    var t = Or(e);\n    if (\"chrome\" === t.browser && t.version >= 71) return;\n    var i = e.RTCPeerConnection.prototype.setRemoteDescription;\n\n    e.RTCPeerConnection.prototype.setRemoteDescription = function (e) {\n      var t, r;\n      e && e.sdp && -1 !== Os(t = e.sdp).call(t, \"\\na=extmap-allow-mixed\") && (e.sdp = Fr(r = e.sdp.split(\"\\n\")).call(r, function (e) {\n        return \"a=extmap-allow-mixed\" !== No(e).call(e);\n      }).join(\"\\n\"));\n      return i.apply(this, arguments);\n    };\n  }\n\n  var da = Object.freeze({\n    __proto__: null,\n    shimRTCIceCandidate: na,\n    shimMaxMessageSize: sa,\n    shimSendThrowTypeError: oa,\n    shimConnectionState: aa,\n    removeAllowExtmapMixed: ca\n  });\n  !function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        e = _ref.window;\n\n    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      shimChrome: !0,\n      shimFirefox: !0,\n      shimEdge: !0,\n      shimSafari: !0\n    };\n    var i = wr,\n        r = Or(e),\n        n = {\n      browserDetails: r,\n      commonShim: da,\n      extractVersion: Rr,\n      disableLog: vr,\n      disableWarnings: yr\n    };\n\n    switch (r.browser) {\n      case \"chrome\":\n        if (!_o || !Eo || !t.shimChrome) return i(\"Chrome shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming chrome.\"), n.browserShim = _o, oo(e), ao(e), Eo(e), co(e), po(e), lo(e), Ao(e), uo(e), go(e), na(e), aa(e), sa(e), oa(e), ca(e);\n        break;\n\n      case \"firefox\":\n        if (!qo || !jo || !t.shimFirefox) return i(\"Firefox shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming firefox.\"), n.browserShim = qo, Vo(e), jo(e), Go(e), Ho(e), Ko(e), Wo(e), Yo(e), na(e), aa(e), sa(e), oa(e);\n        break;\n\n      case \"edge\":\n        if (!xo || !Qo || !t.shimEdge) return i(\"MS edge shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming edge.\"), n.browserShim = xo, Mo(e), Uo(e), Qo(e), Fo(e), sa(e), oa(e);\n        break;\n\n      case \"safari\":\n        if (!ra || !t.shimSafari) return i(\"Safari shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming safari.\"), n.browserShim = ra, ea(e), ia(e), zo(e), Jo(e), Xo(e), ta(e), Zo(e), na(e), sa(e), oa(e), ca(e);\n        break;\n\n      default:\n        i(\"Unsupported browser!\");\n    }\n  }({\n    window: window\n  });\n  var la, Aa;\n  !function (e) {\n    e.WIN_10 = \"Windows 10\", e.WIN_81 = \"Windows 8.1\", e.WIN_8 = \"Windows 8\", e.WIN_7 = \"Windows 7\", e.WIN_VISTA = \"Windows Vista\", e.WIN_SERVER_2003 = \"Windows Server 2003\", e.WIN_XP = \"Windows XP\", e.WIN_2000 = \"Windows 2000\", e.ANDROID = \"Android\", e.OPEN_BSD = \"Open BSD\", e.SUN_OS = \"Sun OS\", e.LINUX = \"Linux\", e.IOS = \"iOS\", e.MAC_OS = \"Mac OS\", e.QNX = \"QNX\", e.UNIX = \"UNIX\", e.BEOS = \"BeOS\", e.OS_2 = \"OS/2\", e.SEARCH_BOT = \"Search Bot\";\n  }(la || (la = {})), function (e) {\n    e.CHROME = \"Chrome\", e.SAFARI = \"Safari\", e.EDGE = \"Edge\", e.FIREFOX = \"Firefox\", e.OPERA = \"OPR\", e.QQ = \"QQBrowser\", e.WECHAT = \"MicroMessenger\";\n  }(Aa || (Aa = {}));\n  var ua = new (t(function (t, i) {\n    /*!@license\n    \t * UAParser.js v0.7.28\n    \t * Lightweight JavaScript-based User-Agent string parser\n    \t * https://github.com/faisalman/ua-parser-js\n    \t *\n    \t * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n    \t * Licensed under MIT License\n    \t */\n    !function (e, r) {\n      var n = \"function\",\n          s = \"object\",\n          o = \"string\",\n          a = \"model\",\n          c = \"name\",\n          d = \"type\",\n          l = \"vendor\",\n          A = \"version\",\n          u = \"architecture\",\n          h = \"console\",\n          p = \"mobile\",\n          E = \"tablet\",\n          g = \"smarttv\",\n          _ = \"wearable\",\n          I = \"embedded\",\n          f = {\n        extend: function extend(e, t) {\n          var i = {};\n\n          for (var r in e) {\n            t[r] && t[r].length % 2 == 0 ? i[r] = t[r].concat(e[r]) : i[r] = e[r];\n          }\n\n          return i;\n        },\n        has: function has(e, t) {\n          return typeof e === o && -1 !== t.toLowerCase().indexOf(e.toLowerCase());\n        },\n        lowerize: function lowerize(e) {\n          return e.toLowerCase();\n        },\n        major: function major(e) {\n          return typeof e === o ? e.replace(/[^\\d\\.]/g, \"\").split(\".\")[0] : r;\n        },\n        trim: function trim(e, t) {\n          return e = e.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\"), void 0 === t ? e : e.substring(0, 255);\n        }\n      },\n          m = {\n        rgx: function rgx(e, t) {\n          for (var i, o, a, c, d, l, A = 0; A < t.length && !d;) {\n            var u = t[A],\n                h = t[A + 1];\n\n            for (i = o = 0; i < u.length && !d;) {\n              if (d = u[i++].exec(e)) for (a = 0; a < h.length; a++) {\n                l = d[++o], typeof (c = h[a]) === s && c.length > 0 ? 2 == c.length ? typeof c[1] == n ? this[c[0]] = c[1].call(this, l) : this[c[0]] = c[1] : 3 == c.length ? typeof c[1] !== n || c[1].exec && c[1].test ? this[c[0]] = l ? l.replace(c[1], c[2]) : r : this[c[0]] = l ? c[1].call(this, l, c[2]) : r : 4 == c.length && (this[c[0]] = l ? c[3].call(this, l.replace(c[1], c[2])) : r) : this[c] = l || r;\n              }\n            }\n\n            A += 2;\n          }\n        },\n        str: function str(e, t) {\n          for (var i in t) {\n            if (typeof t[i] === s && t[i].length > 0) {\n              for (var n = 0; n < t[i].length; n++) {\n                if (f.has(t[i][n], e)) return \"?\" === i ? r : i;\n              }\n            } else if (f.has(t[i], e)) return \"?\" === i ? r : i;\n          }\n\n          return e;\n        }\n      },\n          C = {\n        browser: {\n          oldSafari: {\n            version: {\n              \"1.0\": \"/8\",\n              1.2: \"/1\",\n              1.3: \"/3\",\n              \"2.0\": \"/412\",\n              \"2.0.2\": \"/416\",\n              \"2.0.3\": \"/417\",\n              \"2.0.4\": \"/419\",\n              \"?\": \"/\"\n            }\n          },\n          oldEdge: {\n            version: {\n              .1: \"12.\",\n              21: \"13.\",\n              31: \"14.\",\n              39: \"15.\",\n              41: \"16.\",\n              42: \"17.\",\n              44: \"18.\"\n            }\n          }\n        },\n        os: {\n          windows: {\n            version: {\n              ME: \"4.90\",\n              \"NT 3.11\": \"NT3.51\",\n              \"NT 4.0\": \"NT4.0\",\n              2e3: \"NT 5.0\",\n              XP: [\"NT 5.1\", \"NT 5.2\"],\n              Vista: \"NT 6.0\",\n              7: \"NT 6.1\",\n              8: \"NT 6.2\",\n              8.1: \"NT 6.3\",\n              10: [\"NT 6.4\", \"NT 10.0\"],\n              RT: \"ARM\"\n            }\n          }\n        }\n      },\n          S = {\n        browser: [[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i], [A, [c, \"Chrome\"]], [/edg(?:e|ios|a)?\\/([\\w\\.]+)/i], [A, [c, \"Edge\"]], [/(opera\\smini)\\/([\\w\\.-]+)/i, /(opera\\s[mobiletab]{3,6})\\b.+version\\/([\\w\\.-]+)/i, /(opera)(?:.+version\\/|[\\/\\s]+)([\\w\\.]+)/i], [c, A], [/opios[\\/\\s]+([\\w\\.]+)/i], [A, [c, \"Opera Mini\"]], [/\\sopr\\/([\\w\\.]+)/i], [A, [c, \"Opera\"]], [/(kindle)\\/([\\w\\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i, /(avant\\s|iemobile|slim)(?:browser)?[\\/\\s]?([\\w\\.]*)/i, /(ba?idubrowser)[\\/\\s]?([\\w\\.]+)/i, /(?:ms|\\()(ie)\\s([\\w\\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\\/([\\w\\.-]+)/i, /(rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([\\w\\.]+)/i, /(weibo)__([\\d\\.]+)/i], [c, A], [/(?:[\\s\\/]uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i], [A, [c, \"UCBrowser\"]], [/(?:windowswechat)?\\sqbcore\\/([\\w\\.]+)\\b.*(?:windowswechat)?/i], [A, [c, \"WeChat(Win) Desktop\"]], [/micromessenger\\/([\\w\\.]+)/i], [A, [c, \"WeChat\"]], [/konqueror\\/([\\w\\.]+)/i], [A, [c, \"Konqueror\"]], [/trident.+rv[:\\s]([\\w\\.]{1,9})\\b.+like\\sgecko/i], [A, [c, \"IE\"]], [/yabrowser\\/([\\w\\.]+)/i], [A, [c, \"Yandex\"]], [/(avast|avg)\\/([\\w\\.]+)/i], [[c, /(.+)/, \"$1 Secure Browser\"], A], [/focus\\/([\\w\\.]+)/i], [A, [c, \"Firefox Focus\"]], [/opt\\/([\\w\\.]+)/i], [A, [c, \"Opera Touch\"]], [/coc_coc_browser\\/([\\w\\.]+)/i], [A, [c, \"Coc Coc\"]], [/dolfin\\/([\\w\\.]+)/i], [A, [c, \"Dolphin\"]], [/coast\\/([\\w\\.]+)/i], [A, [c, \"Opera Coast\"]], [/xiaomi\\/miuibrowser\\/([\\w\\.]+)/i], [A, [c, \"MIUI Browser\"]], [/fxios\\/([\\w\\.-]+)/i], [A, [c, \"Firefox\"]], [/(qihu|qhbrowser|qihoobrowser|360browser)/i], [[c, \"360 Browser\"]], [/(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i], [[c, /(.+)/, \"$1 Browser\"], A], [/(comodo_dragon)\\/([\\w\\.]+)/i], [[c, /_/g, \" \"], A], [/\\s(electron)\\/([\\w\\.]+)\\ssafari/i, /(tesla)(?:\\sqtcarbrowser|\\/(20[12]\\d\\.[\\w\\.-]+))/i, /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/\\s]?([\\w\\.]+)/i], [c, A], [/(MetaSr)[\\/\\s]?([\\w\\.]+)/i, /(LBBROWSER)/i], [c], [/;fbav\\/([\\w\\.]+);/i], [A, [c, \"Facebook\"]], [/FBAN\\/FBIOS|FB_IAB\\/FB4A/i], [[c, \"Facebook\"]], [/safari\\s(line)\\/([\\w\\.]+)/i, /\\b(line)\\/([\\w\\.]+)\\/iab/i, /(chromium|instagram)[\\/\\s]([\\w\\.-]+)/i], [c, A], [/\\bgsa\\/([\\w\\.]+)\\s.*safari\\//i], [A, [c, \"GSA\"]], [/headlesschrome(?:\\/([\\w\\.]+)|\\s)/i], [A, [c, \"Chrome Headless\"]], [/\\swv\\).+(chrome)\\/([\\w\\.]+)/i], [[c, \"Chrome WebView\"], A], [/droid.+\\sversion\\/([\\w\\.]+)\\b.+(?:mobile\\ssafari|safari)/i], [A, [c, \"Android Browser\"]], [/(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i], [c, A], [/version\\/([\\w\\.]+)\\s.*mobile\\/\\w+\\s(safari)/i], [A, [c, \"Mobile Safari\"]], [/version\\/([\\w\\.]+)\\s.*(mobile\\s?safari|safari)/i], [A, c], [/webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i], [c, [A, m.str, C.browser.oldSafari.version]], [/(webkit|khtml)\\/([\\w\\.]+)/i], [c, A], [/(navigator|netscape)\\/([\\w\\.-]+)/i], [[c, \"Netscape\"], A], [/ile\\svr;\\srv:([\\w\\.]+)\\).+firefox/i], [A, [c, \"Firefox Reality\"]], [/ekiohf.+(flow)\\/([\\w\\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)$/i, /(firefox)\\/([\\w\\.]+)\\s[\\w\\s\\-]+\\/[\\w\\.]+$/i, /(mozilla)\\/([\\w\\.]+)\\s.+rv\\:.+gecko\\/\\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i, /(links)\\s\\(([\\w\\.]+)/i, /(gobrowser)\\/?([\\w\\.]*)/i, /(ice\\s?browser)\\/v?([\\w\\._]+)/i, /(mosaic)[\\/\\s]([\\w\\.]+)/i], [c, A]],\n        cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i], [[u, \"amd64\"]], [/(ia32(?=;))/i], [[u, f.lowerize]], [/((?:i[346]|x)86)[;\\)]/i], [[u, \"ia32\"]], [/\\b(aarch64|armv?8e?l?)\\b/i], [[u, \"arm64\"]], [/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i], [[u, \"armhf\"]], [/windows\\s(ce|mobile);\\sppc;/i], [[u, \"arm\"]], [/((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i], [[u, /ower/, \"\", f.lowerize]], [/(sun4\\w)[;\\)]/i], [[u, \"sparc\"]], [/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i], [[u, f.lowerize]]],\n        device: [[/\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus\\s10)/i], [a, [l, \"Samsung\"], [d, E]], [/\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy\\snexus)/i, /\\ssamsung[\\s-]([\\w-]+)/i, /sec-(sgh\\w+)/i], [a, [l, \"Samsung\"], [d, p]], [/\\((ip(?:hone|od)[\\s\\w]*);/i], [a, [l, \"Apple\"], [d, p]], [/\\((ipad);[\\w\\s\\),;-]+apple/i, /applecoremedia\\/[\\w\\.]+\\s\\((ipad)/i, /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i], [a, [l, \"Apple\"], [d, E]], [/\\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\\d{2})/i], [a, [l, \"Huawei\"], [d, E]], [/d\\/huawei([\\w\\s-]+)[;\\)]/i, /\\b(nexus\\s6p|vog-[at]?l\\d\\d|ane-[at]?l[x\\d]\\d|eml-a?l\\d\\da?|lya-[at]?l\\d[\\dc]|clt-a?l\\d\\di?|ele-l\\d\\d)/i, /\\b(\\w{2,4}-[atu][ln][01259][019])[;\\)\\s]/i], [a, [l, \"Huawei\"], [d, p]], [/\\b(poco[\\s\\w]+)(?:\\sbuild|\\))/i, /\\b;\\s(\\w+)\\sbuild\\/hm\\1/i, /\\b(hm[\\s\\-_]?note?[\\s_]?(?:\\d\\w)?)\\sbuild/i, /\\b(redmi[\\s\\-_]?(?:note|k)?[\\w\\s_]+)(?:\\sbuild|\\))/i, /\\b(mi[\\s\\-_]?(?:a\\d|one|one[\\s_]plus|note lte)?[\\s_]?(?:\\d?\\w?)[\\s_]?(?:plus)?)\\sbuild/i], [[a, /_/g, \" \"], [l, \"Xiaomi\"], [d, p]], [/\\b(mi[\\s\\-_]?(?:pad)(?:[\\w\\s_]+))(?:\\sbuild|\\))/i], [[a, /_/g, \" \"], [l, \"Xiaomi\"], [d, E]], [/;\\s(\\w+)\\sbuild.+\\soppo/i, /\\s(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007)\\b/i], [a, [l, \"OPPO\"], [d, p]], [/\\svivo\\s(\\w+)(?:\\sbuild|\\))/i, /\\s(v[12]\\d{3}\\w?[at])(?:\\sbuild|;)/i], [a, [l, \"Vivo\"], [d, p]], [/\\s(rmx[12]\\d{3})(?:\\sbuild|;)/i], [a, [l, \"Realme\"], [d, p]], [/\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)\\b[\\w\\s]+build\\//i, /\\smot(?:orola)?[\\s-](\\w*)/i, /((?:moto[\\s\\w\\(\\)]+|xt\\d{3,4}|nexus\\s6)(?=\\sbuild|\\)))/i], [a, [l, \"Motorola\"], [d, p]], [/\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i], [a, [l, \"Motorola\"], [d, E]], [/((?=lg)?[vl]k\\-?\\d{3})\\sbuild|\\s3\\.[\\s\\w;-]{10}lg?-([06cv9]{3,4})/i], [a, [l, \"LG\"], [d, E]], [/(lm-?f100[nv]?|nexus\\s[45])/i, /lg[e;\\s\\/-]+((?!browser|netcast)\\w+)/i, /\\blg(\\-?[\\d\\w]+)\\sbuild/i], [a, [l, \"LG\"], [d, p]], [/(ideatab[\\w\\-\\s]+)/i, /lenovo\\s?(s(?:5000|6000)(?:[\\w-]+)|tab(?:[\\s\\w]+)|yt[\\d\\w-]{6}|tb[\\d\\w-]{6})/i], [a, [l, \"Lenovo\"], [d, E]], [/(?:maemo|nokia).*(n900|lumia\\s\\d+)/i, /nokia[\\s_-]?([\\w\\.-]*)/i], [[a, /_/g, \" \"], [l, \"Nokia\"], [d, p]], [/droid.+;\\s(pixel\\sc)[\\s)]/i], [a, [l, \"Google\"], [d, E]], [/droid.+;\\s(pixel[\\s\\daxl]{0,6})(?:\\sbuild|\\))/i], [a, [l, \"Google\"], [d, p]], [/droid.+\\s([c-g]\\d{4}|so[-l]\\w+|xq-a\\w[4-7][12])(?=\\sbuild\\/|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i], [a, [l, \"Sony\"], [d, p]], [/sony\\stablet\\s[ps]\\sbuild\\//i, /(?:sony)?sgp\\w+(?:\\sbuild\\/|\\))/i], [[a, \"Xperia Tablet\"], [l, \"Sony\"], [d, E]], [/\\s(kb2005|in20[12]5|be20[12][59])\\b/i, /\\ba000(1)\\sbuild/i, /\\boneplus\\s(a\\d{4})[\\s)]/i], [a, [l, \"OnePlus\"], [d, p]], [/(alexa)webm/i, /(kf[a-z]{2}wi)(\\sbuild\\/|\\))/i, /(kf[a-z]+)(\\sbuild\\/|\\)).+silk\\//i], [a, [l, \"Amazon\"], [d, E]], [/(sd|kf)[0349hijorstuw]+(\\sbuild\\/|\\)).+silk\\//i], [[a, \"Fire Phone\"], [l, \"Amazon\"], [d, p]], [/\\((playbook);[\\w\\s\\),;-]+(rim)/i], [a, l, [d, E]], [/((?:bb[a-f]|st[hv])100-\\d)/i, /\\(bb10;\\s(\\w+)/i], [a, [l, \"BlackBerry\"], [d, p]], [/(?:\\b|asus_)(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus\\s7|padfone|p00[cj])/i], [a, [l, \"ASUS\"], [d, E]], [/\\s(z[es]6[027][01][km][ls]|zenfone\\s\\d\\w?)\\b/i], [a, [l, \"ASUS\"], [d, p]], [/(nexus\\s9)/i], [a, [l, \"HTC\"], [d, E]], [/(htc)[;_\\s-]{1,2}([\\w\\s]+(?=\\)|\\sbuild)|\\w+)/i, /(zte)-(\\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i], [l, [a, /_/g, \" \"], [d, p]], [/droid[x\\d\\.\\s;]+\\s([ab][1-7]\\-?[0178a]\\d\\d?)/i], [a, [l, \"Acer\"], [d, E]], [/droid.+;\\s(m[1-5]\\snote)\\sbuild/i, /\\bmz-([\\w-]{2,})/i], [a, [l, \"Meizu\"], [d, p]], [/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i, /(hp)\\s([\\w\\s]+\\w)/i, /(asus)-?(\\w+)/i, /(microsoft);\\s(lumia[\\s\\w]+)/i, /(lenovo)[_\\s-]?([\\w-]+)/i, /linux;.+(jolla);/i, /droid.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i], [l, a, [d, p]], [/(archos)\\s(gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\\/([\\w\\.]+)/i, /\\s(nook)[\\w\\s]+build\\/(\\w+)/i, /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i, /[;\\/]\\s?(le[\\s\\-]+pan)[\\s\\-]+(\\w{1,9})\\sbuild/i, /[;\\/]\\s?(trinity)[\\-\\s]*(t\\d{3})\\sbuild/i, /\\b(gigaset)[\\s\\-]+(q\\w{1,9})\\sbuild/i, /\\b(vodafone)\\s([\\w\\s]+)(?:\\)|\\sbuild)/i], [l, a, [d, E]], [/\\s(surface\\sduo)\\s/i], [a, [l, \"Microsoft\"], [d, E]], [/droid\\s[\\d\\.]+;\\s(fp\\du?)\\sbuild/i], [a, [l, \"Fairphone\"], [d, p]], [/\\s(u304aa)\\sbuild/i], [a, [l, \"AT&T\"], [d, p]], [/sie-(\\w*)/i], [a, [l, \"Siemens\"], [d, p]], [/[;\\/]\\s?(rct\\w+)\\sbuild/i], [a, [l, \"RCA\"], [d, E]], [/[;\\/\\s](venue[\\d\\s]{2,7})\\sbuild/i], [a, [l, \"Dell\"], [d, E]], [/[;\\/]\\s?(q(?:mv|ta)\\w+)\\sbuild/i], [a, [l, \"Verizon\"], [d, E]], [/[;\\/]\\s(?:barnes[&\\s]+noble\\s|bn[rt])([\\w\\s\\+]*)\\sbuild/i], [a, [l, \"Barnes & Noble\"], [d, E]], [/[;\\/]\\s(tm\\d{3}\\w+)\\sbuild/i], [a, [l, \"NuVision\"], [d, E]], [/;\\s(k88)\\sbuild/i], [a, [l, \"ZTE\"], [d, E]], [/;\\s(nx\\d{3}j)\\sbuild/i], [a, [l, \"ZTE\"], [d, p]], [/[;\\/]\\s?(gen\\d{3})\\sbuild.*49h/i], [a, [l, \"Swiss\"], [d, p]], [/[;\\/]\\s?(zur\\d{3})\\sbuild/i], [a, [l, \"Swiss\"], [d, E]], [/[;\\/]\\s?((zeki)?tb.*\\b)\\sbuild/i], [a, [l, \"Zeki\"], [d, E]], [/[;\\/]\\s([yr]\\d{2})\\sbuild/i, /[;\\/]\\s(dragon[\\-\\s]+touch\\s|dt)(\\w{5})\\sbuild/i], [[l, \"Dragon Touch\"], a, [d, E]], [/[;\\/]\\s?(ns-?\\w{0,9})\\sbuild/i], [a, [l, \"Insignia\"], [d, E]], [/[;\\/]\\s?((nxa|Next)-?\\w{0,9})\\sbuild/i], [a, [l, \"NextBook\"], [d, E]], [/[;\\/]\\s?(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05]))\\sbuild/i], [[l, \"Voice\"], a, [d, p]], [/[;\\/]\\s?(lvtel\\-)?(v1[12])\\sbuild/i], [[l, \"LvTel\"], a, [d, p]], [/;\\s(ph-1)\\s/i], [a, [l, \"Essential\"], [d, p]], [/[;\\/]\\s?(v(100md|700na|7011|917g).*\\b)\\sbuild/i], [a, [l, \"Envizen\"], [d, E]], [/[;\\/]\\s?(trio[\\s\\w\\-\\.]+)\\sbuild/i], [a, [l, \"MachSpeed\"], [d, E]], [/[;\\/]\\s?tu_(1491)\\sbuild/i], [a, [l, \"Rotor\"], [d, E]], [/(shield[\\w\\s]+)\\sbuild/i], [a, [l, \"Nvidia\"], [d, E]], [/(sprint)\\s(\\w+)/i], [l, a, [d, p]], [/(kin\\.[onetw]{3})/i], [[a, /\\./g, \" \"], [l, \"Microsoft\"], [d, p]], [/droid\\s[\\d\\.]+;\\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i], [a, [l, \"Zebra\"], [d, E]], [/droid\\s[\\d\\.]+;\\s(ec30|ps20|tc[2-8]\\d[kx])\\)/i], [a, [l, \"Zebra\"], [d, p]], [/\\s(ouya)\\s/i, /(nintendo)\\s([wids3utch]+)/i], [l, a, [d, h]], [/droid.+;\\s(shield)\\sbuild/i], [a, [l, \"Nvidia\"], [d, h]], [/(playstation\\s[345portablevi]+)/i], [a, [l, \"Sony\"], [d, h]], [/[\\s\\(;](xbox(?:\\sone)?(?!;\\sxbox))[\\s\\);]/i], [a, [l, \"Microsoft\"], [d, h]], [/smart-tv.+(samsung)/i], [l, [d, g]], [/hbbtv.+maple;(\\d+)/i], [[a, /^/, \"SmartTV\"], [l, \"Samsung\"], [d, g]], [/(?:linux;\\snetcast.+smarttv|lg\\snetcast\\.tv-201\\d)/i], [[l, \"LG\"], [d, g]], [/(apple)\\s?tv/i], [l, [a, \"Apple TV\"], [d, g]], [/crkey/i], [[a, \"Chromecast\"], [l, \"Google\"], [d, g]], [/droid.+aft([\\w])(\\sbuild\\/|\\))/i], [a, [l, \"Amazon\"], [d, g]], [/\\(dtv[\\);].+(aquos)/i], [a, [l, \"Sharp\"], [d, g]], [/hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i], [[l, f.trim], [a, f.trim], [d, g]], [/[\\s\\/\\(](android\\s|smart[-\\s]?|opera\\s)tv[;\\)\\s]/i], [[d, g]], [/((pebble))app\\/[\\d\\.]+\\s/i], [l, a, [d, _]], [/droid.+;\\s(glass)\\s\\d/i], [a, [l, \"Google\"], [d, _]], [/droid\\s[\\d\\.]+;\\s(wt63?0{2,3})\\)/i], [a, [l, \"Zebra\"], [d, _]], [/(tesla)(?:\\sqtcarbrowser|\\/20[12]\\d\\.[\\w\\.-]+)/i], [l, [d, I]], [/droid .+?; ([^;]+?)(?: build|\\) applewebkit).+? mobile safari/i], [a, [d, p]], [/droid .+?;\\s([^;]+?)(?: build|\\) applewebkit).+?(?! mobile) safari/i], [a, [d, E]], [/\\s(tablet|tab)[;\\/]/i, /\\s(mobile)(?:[;\\/]|\\ssafari)/i], [[d, f.lowerize]], [/(android[\\w\\.\\s\\-]{0,9});.+build/i], [a, [l, \"Generic\"]], [/(phone)/i], [[d, p]]],\n        engine: [[/windows.+\\sedge\\/([\\w\\.]+)/i], [A, [c, \"EdgeHTML\"]], [/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i], [A, [c, \"Blink\"]], [/(presto)\\/([\\w\\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, /ekioh(flow)\\/([\\w\\.]+)/i, /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i, /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i], [c, A], [/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i], [A, c]],\n        os: [[/microsoft\\s(windows)\\s(vista|xp)/i], [c, A], [/(windows)\\snt\\s6\\.2;\\s(arm)/i, /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i, /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)(?!.+xbox)/i], [c, [A, m.str, C.os.windows.version]], [/(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i], [[c, \"Windows\"], [A, m.str, C.os.windows.version]], [/ip[honead]{2,4}\\b(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i, /cfnetwork\\/.+darwin/i], [[A, /_/g, \".\"], [c, \"iOS\"]], [/(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i, /(macintosh|mac(?=_powerpc)\\s)(?!.+haiku)/i], [[c, \"Mac OS\"], [A, /_/g, \".\"]], [/(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|sailfish|contiki)[\\/\\s-]?([\\w\\.]*)/i, /(blackberry)\\w*\\/([\\w\\.]*)/i, /(tizen|kaios)[\\/\\s]([\\w\\.]+)/i, /\\((series40);/i], [c, A], [/\\(bb(10);/i], [A, [c, \"BlackBerry\"]], [/(?:symbian\\s?os|symbos|s60(?=;)|series60)[\\/\\s-]?([\\w\\.]*)/i], [A, [c, \"Symbian\"]], [/mozilla.+\\(mobile;.+gecko.+firefox/i], [[c, \"Firefox OS\"]], [/web0s;.+rt(tv)/i, /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i], [A, [c, \"webOS\"]], [/crkey\\/([\\d\\.]+)/i], [A, [c, \"Chromecast\"]], [/(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i], [[c, \"Chromium OS\"], A], [/(nintendo|playstation)\\s([wids345portablevuch]+)/i, /(xbox);\\s+xbox\\s([^\\);]+)/i, /(mint)[\\/\\s\\(\\)]?(\\w*)/i, /(mageia|vectorlinux)[;\\s]/i, /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\\sgnu\\/linux)?(?:\\slinux)?[\\/\\s-]?(?!chrom|package)([\\w\\.-]*)/i, /(hurd|linux)\\s?([\\w\\.]*)/i, /(gnu)\\s?([\\w\\.]*)/i, /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, /(haiku)\\s(\\w+)/i], [c, A], [/(sunos)\\s?([\\w\\.\\d]*)/i], [[c, \"Solaris\"], A], [/((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i, /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i, /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i, /(unix)\\s?([\\w\\.]*)/i], [c, A]]\n      },\n          R = function R(t, i) {\n        if (\"object\" == typeof t && (i = t, t = r), !(this instanceof R)) return new R(t, i).getResult();\n        var n = t || (void 0 !== e && e.navigator && e.navigator.userAgent ? e.navigator.userAgent : \"\"),\n            s = i ? f.extend(S, i) : S;\n        return this.getBrowser = function () {\n          var e = {\n            name: r,\n            version: r\n          };\n          return m.rgx.call(e, n, s.browser), e.major = f.major(e.version), e;\n        }, this.getCPU = function () {\n          var e = {\n            architecture: r\n          };\n          return m.rgx.call(e, n, s.cpu), e;\n        }, this.getDevice = function () {\n          var e = {\n            vendor: r,\n            model: r,\n            type: r\n          };\n          return m.rgx.call(e, n, s.device), e;\n        }, this.getEngine = function () {\n          var e = {\n            name: r,\n            version: r\n          };\n          return m.rgx.call(e, n, s.engine), e;\n        }, this.getOS = function () {\n          var e = {\n            name: r,\n            version: r\n          };\n          return m.rgx.call(e, n, s.os), e;\n        }, this.getResult = function () {\n          return {\n            ua: this.getUA(),\n            browser: this.getBrowser(),\n            engine: this.getEngine(),\n            os: this.getOS(),\n            device: this.getDevice(),\n            cpu: this.getCPU()\n          };\n        }, this.getUA = function () {\n          return n;\n        }, this.setUA = function (e) {\n          return n = typeof e === o && e.length > 255 ? f.trim(e, 255) : e, this;\n        }, this.setUA(n), this;\n      };\n\n      R.VERSION = \"0.7.28\", R.BROWSER = {\n        NAME: c,\n        MAJOR: \"major\",\n        VERSION: A\n      }, R.CPU = {\n        ARCHITECTURE: u\n      }, R.DEVICE = {\n        MODEL: a,\n        VENDOR: l,\n        TYPE: d,\n        CONSOLE: h,\n        MOBILE: p,\n        SMARTTV: g,\n        TABLET: E,\n        WEARABLE: _,\n        EMBEDDED: I\n      }, R.ENGINE = {\n        NAME: c,\n        VERSION: A\n      }, R.OS = {\n        NAME: c,\n        VERSION: A\n      }, t.exports && (i = t.exports = R), i.UAParser = R;\n      var T = void 0 !== e && (e.jQuery || e.Zepto);\n\n      if (T && !T.ua) {\n        var v = new R();\n        T.ua = v.getResult(), T.ua.get = function () {\n          return v.getUA();\n        }, T.ua.set = function (e) {\n          v.setUA(e);\n          var t = v.getResult();\n\n          for (var i in t) {\n            T.ua[i] = t[i];\n          }\n        };\n      }\n    }(\"object\" == typeof window ? window : e);\n  }))();\n  var ha = ua.getResult();\n\n  function pa(e) {\n    return e && ua.setUA(e), ha = ua.getResult(), {\n      name: Ea(ha),\n      version: ga(ha),\n      os: _a(ha),\n      osVersion: ha.os.version\n    };\n  }\n\n  function Ea(e) {\n    if (\"Blink\" === e.engine.name && \"WeChat\" !== e.browser.name) return Aa.CHROME;\n\n    switch (e.browser.name) {\n      case \"Chrome Headless\":\n      case \"Chrome\":\n      case \"Chromium\":\n        return Aa.CHROME;\n\n      case \"Safari\":\n      case \"Mobile Safari\":\n        return Aa.SAFARI;\n\n      case \"Edge\":\n        return Aa.EDGE;\n\n      case \"Firefox\":\n        return Aa.FIREFOX;\n\n      case \"QQBrowser\":\n        return Aa.QQ;\n\n      case \"Opera\":\n        return Aa.OPERA;\n\n      case \"WeChat\":\n        return Aa.WECHAT;\n\n      default:\n        return e.browser.name || \"\";\n    }\n  }\n\n  function ga(e) {\n    var t;\n    return t = \"Blink\" === e.engine.name ? e.engine.version || \"\" : e.browser.version || \"\", t.split(\".\")[0];\n  }\n\n  function _a(e) {\n    switch (e.os.name) {\n      case \"Windows\":\n        return e.os.version ? e.os.name + \" \" + e.os.version : e.os.name;\n\n      default:\n        return e.os.name || \"\";\n    }\n  }\n\n  function Ia() {\n    return pa().os;\n  }\n\n  function fa() {\n    var e = pa();\n    return !!(\"WebKit\" === ha.engine.name && e.os === la.MAC_OS && navigator.maxTouchPoints && navigator.maxTouchPoints > 0 && e.name !== Aa.SAFARI || va() && e.name !== Aa.SAFARI);\n  }\n\n  function ma() {\n    var e = pa();\n\n    if (fa()) {\n      if (e.os === la.MAC_OS) return !0;\n\n      if (e.os === la.IOS) {\n        var _e10 = ha.os.version && ha.os.version.split(\".\");\n\n        if (_e10 && 14 === Number(_e10[0]) && _e10[1] && Number(_e10[1]) >= 3) return !0;\n        if (_e10 && Number(_e10[0]) > 14) return !0;\n      }\n    }\n\n    return !1;\n  }\n\n  function Ca() {\n    return \"WebKit\" === ha.engine.name;\n  }\n\n  function Sa() {\n    return pa().name === Aa.CHROME;\n  }\n\n  function Ra() {\n    return pa().name === Aa.SAFARI;\n  }\n\n  function Ta() {\n    return pa().name === Aa.FIREFOX;\n  }\n\n  function va() {\n    return pa().os === la.IOS;\n  }\n\n  function ya() {\n    var e = pa();\n    if (e.os !== la.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]);\n  }\n\n  function wa() {\n    var e = pa();\n    if (e.os !== la.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]) && 0 === Number(t[1]);\n  }\n\n  function Na() {\n    var e = pa();\n    if (e.os !== la.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]) && Number(t[1]) >= 1;\n  }\n\n  function Oa() {\n    return Ra() && navigator.maxTouchPoints > 0;\n  }\n\n  function ba() {\n    return pa().name === Aa.WECHAT;\n  }\n\n  function Da() {\n    return window.navigator.appVersion && null !== window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./) && window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1] <= 35;\n  }\n\n  function ka() {\n    var e = pa();\n    if (e.name === Aa.EDGE || e.name === Aa.SAFARI) return !1;\n    return !!navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i);\n  }\n\n  G({\n    target: \"Date\",\n    stat: !0\n  }, {\n    now: function now() {\n      return new Date().getTime();\n    }\n  });\n\n  var La = L.Date.now,\n      Pa = [].slice,\n      Ba = /MSIE .\\./.test(Pe),\n      Ma = function Ma(e) {\n    return function (t, i) {\n      var r = arguments.length > 2,\n          n = r ? Pa.call(arguments, 2) : void 0;\n      return e(r ? function () {\n        (\"function\" == typeof t ? t : Function(t)).apply(this, n);\n      } : t, i);\n    };\n  };\n\n  G({\n    global: !0,\n    bind: !0,\n    forced: Ba\n  }, {\n    setTimeout: Ma(r.setTimeout),\n    setInterval: Ma(r.setInterval)\n  });\n\n  var Ua = L.setTimeout,\n      Qa = function Qa(e, t) {\n    return function () {\n      for (var i = new Array(arguments.length), r = 0; r < i.length; r++) {\n        i[r] = arguments[r];\n      }\n\n      return e.apply(t, i);\n    };\n  },\n      Fa = Object.prototype.toString;\n\n  function xa(e) {\n    return \"[object Array]\" === Fa.call(e);\n  }\n\n  function Va(e) {\n    return null !== e && \"object\" == typeof e;\n  }\n\n  function Ga(e) {\n    return \"[object Function]\" === Fa.call(e);\n  }\n\n  function ja(e, t) {\n    if (null != e) if (\"object\" != typeof e && (e = [e]), xa(e)) for (var i = 0, r = e.length; i < r; i++) {\n      t.call(null, e[i], i, e);\n    } else for (var n in e) {\n      Object.prototype.hasOwnProperty.call(e, n) && t.call(null, e[n], n, e);\n    }\n  }\n\n  var Ka = {\n    isArray: xa,\n    isArrayBuffer: function isArrayBuffer(e) {\n      return \"[object ArrayBuffer]\" === Fa.call(e);\n    },\n    isBuffer: function isBuffer(e) {\n      return null != e && null != e.constructor && \"function\" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e);\n    },\n    isFormData: function isFormData(e) {\n      return \"undefined\" != typeof FormData && e instanceof FormData;\n    },\n    isArrayBufferView: function isArrayBufferView(e) {\n      return \"undefined\" != typeof ArrayBuffer && ArrayBuffer.isView ? ArrayBuffer.isView(e) : e && e.buffer && e.buffer instanceof ArrayBuffer;\n    },\n    isString: function isString(e) {\n      return \"string\" == typeof e;\n    },\n    isNumber: function isNumber(e) {\n      return \"number\" == typeof e;\n    },\n    isObject: Va,\n    isUndefined: function isUndefined(e) {\n      return void 0 === e;\n    },\n    isDate: function isDate(e) {\n      return \"[object Date]\" === Fa.call(e);\n    },\n    isFile: function isFile(e) {\n      return \"[object File]\" === Fa.call(e);\n    },\n    isBlob: function isBlob(e) {\n      return \"[object Blob]\" === Fa.call(e);\n    },\n    isFunction: Ga,\n    isStream: function isStream(e) {\n      return Va(e) && Ga(e.pipe);\n    },\n    isURLSearchParams: function isURLSearchParams(e) {\n      return \"undefined\" != typeof URLSearchParams && e instanceof URLSearchParams;\n    },\n    isStandardBrowserEnv: function isStandardBrowserEnv() {\n      return (\"undefined\" == typeof navigator || \"ReactNative\" !== navigator.product && \"NativeScript\" !== navigator.product && \"NS\" !== navigator.product) && \"undefined\" != typeof window && \"undefined\" != typeof document;\n    },\n    forEach: ja,\n    merge: function e() {\n      var t = {};\n\n      function i(i, r) {\n        \"object\" == typeof t[r] && \"object\" == typeof i ? t[r] = e(t[r], i) : t[r] = i;\n      }\n\n      for (var r = 0, n = arguments.length; r < n; r++) {\n        ja(arguments[r], i);\n      }\n\n      return t;\n    },\n    deepMerge: function e() {\n      var t = {};\n\n      function i(i, r) {\n        \"object\" == typeof t[r] && \"object\" == typeof i ? t[r] = e(t[r], i) : t[r] = \"object\" == typeof i ? e({}, i) : i;\n      }\n\n      for (var r = 0, n = arguments.length; r < n; r++) {\n        ja(arguments[r], i);\n      }\n\n      return t;\n    },\n    extend: function extend(e, t, i) {\n      return ja(t, function (t, r) {\n        e[r] = i && \"function\" == typeof t ? Qa(t, i) : t;\n      }), e;\n    },\n    trim: function trim(e) {\n      return e.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n    }\n  };\n\n  function Wa(e) {\n    return encodeURIComponent(e).replace(/%40/gi, \"@\").replace(/%3A/gi, \":\").replace(/%24/g, \"$\").replace(/%2C/gi, \",\").replace(/%20/g, \"+\").replace(/%5B/gi, \"[\").replace(/%5D/gi, \"]\");\n  }\n\n  var Ha = function Ha(e, t, i) {\n    if (!t) return e;\n    var r;\n    if (i) r = i(t);else if (Ka.isURLSearchParams(t)) r = t.toString();else {\n      var n = [];\n      Ka.forEach(t, function (e, t) {\n        null != e && (Ka.isArray(e) ? t += \"[]\" : e = [e], Ka.forEach(e, function (e) {\n          Ka.isDate(e) ? e = e.toISOString() : Ka.isObject(e) && (e = JSON.stringify(e)), n.push(Wa(t) + \"=\" + Wa(e));\n        }));\n      }), r = n.join(\"&\");\n    }\n\n    if (r) {\n      var s = e.indexOf(\"#\");\n      -1 !== s && (e = e.slice(0, s)), e += (-1 === e.indexOf(\"?\") ? \"?\" : \"&\") + r;\n    }\n\n    return e;\n  };\n\n  function Ya() {\n    this.handlers = [];\n  }\n\n  Ya.prototype.use = function (e, t) {\n    return this.handlers.push({\n      fulfilled: e,\n      rejected: t\n    }), this.handlers.length - 1;\n  }, Ya.prototype.eject = function (e) {\n    this.handlers[e] && (this.handlers[e] = null);\n  }, Ya.prototype.forEach = function (e) {\n    Ka.forEach(this.handlers, function (t) {\n      null !== t && e(t);\n    });\n  };\n\n  var qa = Ya,\n      Ja = function Ja(e, t, i) {\n    return Ka.forEach(i, function (i) {\n      e = i(e, t);\n    }), e;\n  },\n      Xa = function Xa(e) {\n    return !(!e || !e.__CANCEL__);\n  },\n      za = function za(e, t) {\n    Ka.forEach(e, function (i, r) {\n      r !== t && r.toUpperCase() === t.toUpperCase() && (e[t] = i, delete e[r]);\n    });\n  },\n      Za = function Za(e, t, i, r, n) {\n    return function (e, t, i, r, n) {\n      return e.config = t, i && (e.code = i), e.request = r, e.response = n, e.isAxiosError = !0, e.toJSON = function () {\n        return {\n          message: this.message,\n          name: this.name,\n          description: this.description,\n          number: this.number,\n          fileName: this.fileName,\n          lineNumber: this.lineNumber,\n          columnNumber: this.columnNumber,\n          stack: this.stack,\n          config: this.config,\n          code: this.code\n        };\n      }, e;\n    }(new Error(e), t, i, r, n);\n  },\n      $a = [\"age\", \"authorization\", \"content-length\", \"content-type\", \"etag\", \"expires\", \"from\", \"host\", \"if-modified-since\", \"if-unmodified-since\", \"last-modified\", \"location\", \"max-forwards\", \"proxy-authorization\", \"referer\", \"retry-after\", \"user-agent\"],\n      ec = Ka.isStandardBrowserEnv() ? function () {\n    var e,\n        t = /(msie|trident)/i.test(navigator.userAgent),\n        i = document.createElement(\"a\");\n\n    function r(e) {\n      var r = e;\n      return t && (i.setAttribute(\"href\", r), r = i.href), i.setAttribute(\"href\", r), {\n        href: i.href,\n        protocol: i.protocol ? i.protocol.replace(/:$/, \"\") : \"\",\n        host: i.host,\n        search: i.search ? i.search.replace(/^\\?/, \"\") : \"\",\n        hash: i.hash ? i.hash.replace(/^#/, \"\") : \"\",\n        hostname: i.hostname,\n        port: i.port,\n        pathname: \"/\" === i.pathname.charAt(0) ? i.pathname : \"/\" + i.pathname\n      };\n    }\n\n    return e = r(window.location.href), function (t) {\n      var i = Ka.isString(t) ? r(t) : t;\n      return i.protocol === e.protocol && i.host === e.host;\n    };\n  }() : function () {\n    return !0;\n  },\n      tc = Ka.isStandardBrowserEnv() ? {\n    write: function write(e, t, i, r, n, s) {\n      var o = [];\n      o.push(e + \"=\" + encodeURIComponent(t)), Ka.isNumber(i) && o.push(\"expires=\" + new Date(i).toGMTString()), Ka.isString(r) && o.push(\"path=\" + r), Ka.isString(n) && o.push(\"domain=\" + n), !0 === s && o.push(\"secure\"), document.cookie = o.join(\"; \");\n    },\n    read: function read(e) {\n      var t = document.cookie.match(new RegExp(\"(^|;\\\\s*)(\" + e + \")=([^;]*)\"));\n      return t ? decodeURIComponent(t[3]) : null;\n    },\n    remove: function remove(e) {\n      this.write(e, \"\", Date.now() - 864e5);\n    }\n  } : {\n    write: function write() {},\n    read: function read() {\n      return null;\n    },\n    remove: function remove() {}\n  },\n      ic = function ic(e) {\n    return new Promise(function (t, i) {\n      var r = e.data,\n          n = e.headers;\n      Ka.isFormData(r) && delete n[\"Content-Type\"];\n      var s = new XMLHttpRequest();\n\n      if (e.auth) {\n        var o = e.auth.username || \"\",\n            a = e.auth.password || \"\";\n        n.Authorization = \"Basic \" + btoa(o + \":\" + a);\n      }\n\n      if (s.open(e.method.toUpperCase(), Ha(e.url, e.params, e.paramsSerializer), !0), s.timeout = e.timeout, s.onreadystatechange = function () {\n        if (s && 4 === s.readyState && (0 !== s.status || s.responseURL && 0 === s.responseURL.indexOf(\"file:\"))) {\n          var r,\n              n,\n              o,\n              a,\n              c,\n              d = \"getAllResponseHeaders\" in s ? (r = s.getAllResponseHeaders(), c = {}, r ? (Ka.forEach(r.split(\"\\n\"), function (e) {\n            if (a = e.indexOf(\":\"), n = Ka.trim(e.substr(0, a)).toLowerCase(), o = Ka.trim(e.substr(a + 1)), n) {\n              if (c[n] && $a.indexOf(n) >= 0) return;\n              c[n] = \"set-cookie\" === n ? (c[n] ? c[n] : []).concat([o]) : c[n] ? c[n] + \", \" + o : o;\n            }\n          }), c) : c) : null,\n              l = {\n            data: e.responseType && \"text\" !== e.responseType ? s.response : s.responseText,\n            status: s.status,\n            statusText: s.statusText,\n            headers: d,\n            config: e,\n            request: s\n          };\n          !function (e, t, i) {\n            var r = i.config.validateStatus;\n            !r || r(i.status) ? e(i) : t(Za(\"Request failed with status code \" + i.status, i.config, null, i.request, i));\n          }(t, i, l), s = null;\n        }\n      }, s.onabort = function () {\n        s && (i(Za(\"Request aborted\", e, \"ECONNABORTED\", s)), s = null);\n      }, s.onerror = function () {\n        i(Za(\"Network Error\", e, null, s)), s = null;\n      }, s.ontimeout = function () {\n        i(Za(\"timeout of \" + e.timeout + \"ms exceeded\", e, \"ECONNABORTED\", s)), s = null;\n      }, Ka.isStandardBrowserEnv()) {\n        var c = tc,\n            d = (e.withCredentials || ec(e.url)) && e.xsrfCookieName ? c.read(e.xsrfCookieName) : void 0;\n        d && (n[e.xsrfHeaderName] = d);\n      }\n\n      if (\"setRequestHeader\" in s && Ka.forEach(n, function (e, t) {\n        void 0 === r && \"content-type\" === t.toLowerCase() ? delete n[t] : s.setRequestHeader(t, e);\n      }), e.withCredentials && (s.withCredentials = !0), e.responseType) try {\n        s.responseType = e.responseType;\n      } catch (t) {\n        if (\"json\" !== e.responseType) throw t;\n      }\n      \"function\" == typeof e.onDownloadProgress && s.addEventListener(\"progress\", e.onDownloadProgress), \"function\" == typeof e.onUploadProgress && s.upload && s.upload.addEventListener(\"progress\", e.onUploadProgress), e.cancelToken && e.cancelToken.promise.then(function (e) {\n        s && (s.abort(), i(e), s = null);\n      }), void 0 === r && (r = null), s.send(r);\n    });\n  },\n      rc = {\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\n  };\n\n  function nc(e, t) {\n    !Ka.isUndefined(e) && Ka.isUndefined(e[\"Content-Type\"]) && (e[\"Content-Type\"] = t);\n  }\n\n  var sc = {\n    adapter: function () {\n      var e;\n      return (\"undefined\" != typeof process && \"[object process]\" === Object.prototype.toString.call(process) || \"undefined\" != typeof XMLHttpRequest) && (e = ic), e;\n    }(),\n    transformRequest: [function (e, t) {\n      return za(t, \"Accept\"), za(t, \"Content-Type\"), Ka.isFormData(e) || Ka.isArrayBuffer(e) || Ka.isBuffer(e) || Ka.isStream(e) || Ka.isFile(e) || Ka.isBlob(e) ? e : Ka.isArrayBufferView(e) ? e.buffer : Ka.isURLSearchParams(e) ? (nc(t, \"application/x-www-form-urlencoded;charset=utf-8\"), e.toString()) : Ka.isObject(e) ? (nc(t, \"application/json;charset=utf-8\"), JSON.stringify(e)) : e;\n    }],\n    transformResponse: [function (e) {\n      if (\"string\" == typeof e) try {\n        e = JSON.parse(e);\n      } catch (e) {}\n      return e;\n    }],\n    timeout: 0,\n    xsrfCookieName: \"XSRF-TOKEN\",\n    xsrfHeaderName: \"X-XSRF-TOKEN\",\n    maxContentLength: -1,\n    validateStatus: function validateStatus(e) {\n      return e >= 200 && e < 300;\n    },\n    headers: {\n      common: {\n        Accept: \"application/json, text/plain, */*\"\n      }\n    }\n  };\n  Ka.forEach([\"delete\", \"get\", \"head\"], function (e) {\n    sc.headers[e] = {};\n  }), Ka.forEach([\"post\", \"put\", \"patch\"], function (e) {\n    sc.headers[e] = Ka.merge(rc);\n  });\n  var oc = sc;\n\n  function ac(e) {\n    e.cancelToken && e.cancelToken.throwIfRequested();\n  }\n\n  var cc = function cc(e) {\n    var t, i;\n    return ac(e), e.baseURL && !function (e) {\n      return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(e);\n    }(e.url) && (e.url = (t = e.baseURL, (i = e.url) ? t.replace(/\\/+$/, \"\") + \"/\" + i.replace(/^\\/+/, \"\") : t)), e.headers = e.headers || {}, e.data = Ja(e.data, e.headers, e.transformRequest), e.headers = Ka.merge(e.headers.common || {}, e.headers[e.method] || {}, e.headers || {}), Ka.forEach([\"delete\", \"get\", \"head\", \"post\", \"put\", \"patch\", \"common\"], function (t) {\n      delete e.headers[t];\n    }), (e.adapter || oc.adapter)(e).then(function (t) {\n      return ac(e), t.data = Ja(t.data, t.headers, e.transformResponse), t;\n    }, function (t) {\n      return Xa(t) || (ac(e), t && t.response && (t.response.data = Ja(t.response.data, t.response.headers, e.transformResponse))), Promise.reject(t);\n    });\n  },\n      dc = function dc(e, t) {\n    t = t || {};\n    var i = {};\n    return Ka.forEach([\"url\", \"method\", \"params\", \"data\"], function (e) {\n      void 0 !== t[e] && (i[e] = t[e]);\n    }), Ka.forEach([\"headers\", \"auth\", \"proxy\"], function (r) {\n      Ka.isObject(t[r]) ? i[r] = Ka.deepMerge(e[r], t[r]) : void 0 !== t[r] ? i[r] = t[r] : Ka.isObject(e[r]) ? i[r] = Ka.deepMerge(e[r]) : void 0 !== e[r] && (i[r] = e[r]);\n    }), Ka.forEach([\"baseURL\", \"transformRequest\", \"transformResponse\", \"paramsSerializer\", \"timeout\", \"withCredentials\", \"adapter\", \"responseType\", \"xsrfCookieName\", \"xsrfHeaderName\", \"onUploadProgress\", \"onDownloadProgress\", \"maxContentLength\", \"validateStatus\", \"maxRedirects\", \"httpAgent\", \"httpsAgent\", \"cancelToken\", \"socketPath\"], function (r) {\n      void 0 !== t[r] ? i[r] = t[r] : void 0 !== e[r] && (i[r] = e[r]);\n    }), i;\n  };\n\n  function lc(e) {\n    this.defaults = e, this.interceptors = {\n      request: new qa(),\n      response: new qa()\n    };\n  }\n\n  lc.prototype.request = function (e) {\n    \"string\" == typeof e ? (e = arguments[1] || {}).url = arguments[0] : e = e || {}, (e = dc(this.defaults, e)).method = e.method ? e.method.toLowerCase() : \"get\";\n    var t = [cc, void 0],\n        i = Promise.resolve(e);\n\n    for (this.interceptors.request.forEach(function (e) {\n      t.unshift(e.fulfilled, e.rejected);\n    }), this.interceptors.response.forEach(function (e) {\n      t.push(e.fulfilled, e.rejected);\n    }); t.length;) {\n      i = i.then(t.shift(), t.shift());\n    }\n\n    return i;\n  }, lc.prototype.getUri = function (e) {\n    return e = dc(this.defaults, e), Ha(e.url, e.params, e.paramsSerializer).replace(/^\\?/, \"\");\n  }, Ka.forEach([\"delete\", \"get\", \"head\", \"options\"], function (e) {\n    lc.prototype[e] = function (t, i) {\n      return this.request(Ka.merge(i || {}, {\n        method: e,\n        url: t\n      }));\n    };\n  }), Ka.forEach([\"post\", \"put\", \"patch\"], function (e) {\n    lc.prototype[e] = function (t, i, r) {\n      return this.request(Ka.merge(r || {}, {\n        method: e,\n        url: t,\n        data: i\n      }));\n    };\n  });\n  var Ac = lc;\n\n  function uc(e) {\n    this.message = e;\n  }\n\n  uc.prototype.toString = function () {\n    return \"Cancel\" + (this.message ? \": \" + this.message : \"\");\n  }, uc.prototype.__CANCEL__ = !0;\n  var hc = uc;\n\n  function pc(e) {\n    if (\"function\" != typeof e) throw new TypeError(\"executor must be a function.\");\n    var t;\n    this.promise = new Promise(function (e) {\n      t = e;\n    });\n    var i = this;\n    e(function (e) {\n      i.reason || (i.reason = new hc(e), t(i.reason));\n    });\n  }\n\n  pc.prototype.throwIfRequested = function () {\n    if (this.reason) throw this.reason;\n  }, pc.source = function () {\n    var e;\n    return {\n      token: new pc(function (t) {\n        e = t;\n      }),\n      cancel: e\n    };\n  };\n  var Ec = pc;\n\n  function gc(e) {\n    var t = new Ac(e),\n        i = Qa(Ac.prototype.request, t);\n    return Ka.extend(i, Ac.prototype, t), Ka.extend(i, t), i;\n  }\n\n  var _c = gc(oc);\n\n  _c.Axios = Ac, _c.create = function (e) {\n    return gc(dc(_c.defaults, e));\n  }, _c.Cancel = hc, _c.CancelToken = Ec, _c.isCancel = Xa, _c.all = function (e) {\n    return Promise.all(e);\n  }, _c.spread = function (e) {\n    return function (t) {\n      return e.apply(null, t);\n    };\n  };\n  var Ic = _c,\n      fc = _c;\n  Ic.default = fc;\n  var mc = Ic;\n\n  function Cc() {\n    var e = new Date();\n    return e.toTimeString().split(\" \")[0] + \":\" + e.getMilliseconds();\n  }\n\n  var Sc = {\n    DEBUG: 0,\n    INFO: 1,\n    WARNING: 2,\n    ERROR: 3,\n    NONE: 4\n  },\n      Rc = La(),\n      Tc = function Tc(e) {\n    for (var _t20 in Sc) {\n      if (Object.prototype.hasOwnProperty.call(Sc, _t20) && Sc[_t20] === e) return _t20;\n    }\n\n    return \"DEFAULT\";\n  };\n\n  var vc = new (\n  /*#__PURE__*/\n  function () {\n    function _class() {\n      _classCallCheck(this, _class);\n\n      this.logLevel = Sc.DEBUG, this.uploadState = \"collecting\", this.uploadLogWaitingList = [], this.uploadLogUploadingList = [], this.uploadErrorCount = 0, this.currentLogID = 0;\n    }\n\n    _createClass(_class, [{\n      key: \"debug\",\n      value: function debug() {\n        var t;\n\n        for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {\n          e[_key] = arguments[_key];\n        }\n\n        var i = Xe(t = [Sc.DEBUG]).call(t, e);\n        this.log.apply(this, i);\n      }\n    }, {\n      key: \"info\",\n      value: function info() {\n        var t;\n\n        for (var _len2 = arguments.length, e = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          e[_key2] = arguments[_key2];\n        }\n\n        var i = Xe(t = [Sc.INFO]).call(t, e);\n        this.log.apply(this, i);\n      }\n    }, {\n      key: \"warning\",\n      value: function warning() {\n        var t;\n\n        for (var _len3 = arguments.length, e = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          e[_key3] = arguments[_key3];\n        }\n\n        var i = Xe(t = [Sc.WARNING]).call(t, e);\n        this.log.apply(this, i);\n      }\n    }, {\n      key: \"error\",\n      value: function error() {\n        var t;\n\n        for (var _len4 = arguments.length, e = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          e[_key4] = arguments[_key4];\n        }\n\n        var i = Xe(t = [Sc.ERROR]).call(t, e);\n        this.log.apply(this, i);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload() {\n        var t;\n\n        for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          e[_key5] = arguments[_key5];\n        }\n\n        var i = Xe(t = [Sc.DEBUG]).call(t, e);\n        this.uploadLog.apply(this, i);\n      }\n    }, {\n      key: \"setLogLevel\",\n      value: function setLogLevel(e) {\n        e = Math.min(Math.max(0, e), 4), this.logLevel = e;\n      }\n    }, {\n      key: \"enableLogUpload\",\n      value: function enableLogUpload() {\n        Qc(\"UPLOAD_LOG\", !0);\n      }\n    }, {\n      key: \"disableLogUpload\",\n      value: function disableLogUpload() {\n        Qc(\"UPLOAD_LOG\", !1), this.uploadLogUploadingList = [], this.uploadLogWaitingList = [];\n      }\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        this.proxyServerURL = e;\n      }\n    }, {\n      key: \"log\",\n      value: function log() {\n        var _this22 = this;\n\n        for (var _len6 = arguments.length, e = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          e[_key6] = arguments[_key6];\n        }\n\n        var t, i, r, n;\n        if (La() - Rc < 100) return void Ua(function () {\n          _this22.log.apply(_this22, e);\n        }, La() - Rc);\n        var s = Math.max(0, Math.min(4, e[0]));\n        if (e[0] = Cc() + \" Agora-SDK [\".concat(Tc(s), \"]:\"), this.appendLogToWaitingList(s, e), s < this.logLevel) return;\n        var o = Cc() + \" %cAgora-SDK [\".concat(Tc(s), \"]:\");\n        var a = [];\n\n        switch (s) {\n          case Sc.DEBUG:\n            a = Xe(t = [o, \"color: #64B5F6;\"]).call(t, Bs(e).call(e, 1)), console.log.apply(console, a);\n            break;\n\n          case Sc.INFO:\n            a = Xe(i = [o, \"color: #1E88E5; font-weight: bold;\"]).call(i, Bs(e).call(e, 1)), console.log.apply(console, a);\n            break;\n\n          case Sc.WARNING:\n            a = Xe(r = [o, \"color: #FB8C00; font-weight: bold;\"]).call(r, Bs(e).call(e, 1)), console.warn.apply(console, a);\n            break;\n\n          case Sc.ERROR:\n            a = Xe(n = [o, \"color: #B00020; font-weight: bold;\"]).call(n, Bs(e).call(e, 1)), console.error.apply(console, a);\n        }\n      }\n    }, {\n      key: \"uploadLog\",\n      value: function uploadLog() {\n        var _this23 = this;\n\n        for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n          e[_key7] = arguments[_key7];\n        }\n\n        if (La() - Rc < 100) return void Ua(function () {\n          _this23.uploadLog.apply(_this23, e);\n        }, La() - Rc);\n        var t = Math.max(0, Math.min(4, e[0]));\n        e[0] = Cc() + \" Agora-SDK [\".concat(Tc(t), \"]:\"), this.appendLogToWaitingList(t, e);\n      }\n    }, {\n      key: \"appendLogToWaitingList\",\n      value: function appendLogToWaitingList(e) {\n        if (!Fc(\"UPLOAD_LOG\")) return;\n        var i = \"\";\n\n        for (var _len8 = arguments.length, t = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n          t[_key8 - 1] = arguments[_key8];\n        }\n\n        Xi(t).call(t, function (e) {\n          \"object\" == typeof e && (e = ge(e)), i += \"\".concat(e, \" \");\n        }), this.uploadLogWaitingList.push({\n          payload_str: i,\n          log_level: e,\n          log_item_id: this.currentLogID++\n        }), \"uploading\" === this.uploadState && 0 === this.uploadLogUploadingList.length && this.uploadLogInterval();\n      }\n    }, {\n      key: \"startUpload\",\n      value: function startUpload() {\n        this.uploadState = \"uploading\", 0 === this.uploadLogUploadingList.length && this.uploadLogInterval();\n      }\n    }, {\n      key: \"uploadLogs\",\n      value: function () {\n        var _uploadLogs = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var e, t, i, r;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  t = this.uploadLogUploadingList;\n                  i = {\n                    sdk_version: wc,\n                    process_id: Fc(\"PROCESS_ID\"),\n                    payload: ge(t)\n                  };\n                  _context.next = 4;\n                  return mc.post(this.url || (this.proxyServerURL ? Xe(e = \"https://\".concat(this.proxyServerURL, \"/ls/?h=\")).call(e, Fc(\"LOG_UPLOAD_SERVER\"), \"&p=443&d=upload/v1\") : \"https://\".concat(Fc(\"LOG_UPLOAD_SERVER\"), \"/upload/v1\")), i, {\n                    responseType: \"text\"\n                  });\n\n                case 4:\n                  r = _context.sent;\n\n                  if (!(\"OK\" !== r.data)) {\n                    _context.next = 7;\n                    break;\n                  }\n\n                  throw new Error(\"unexpected upload log response: \" + r.data);\n\n                case 7:\n                  this.uploadLogUploadingList = [];\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function uploadLogs() {\n          return _uploadLogs.apply(this, arguments);\n        }\n\n        return uploadLogs;\n      }()\n    }, {\n      key: \"uploadLogInterval\",\n      value: function uploadLogInterval() {\n        var _this24 = this;\n\n        if (0 !== this.uploadLogUploadingList.length || 0 !== this.uploadLogWaitingList.length) {\n          var e;\n          if (0 === this.uploadLogUploadingList.length) this.uploadLogUploadingList = Ss(e = this.uploadLogWaitingList).call(e, 0, 10);\n          this.uploadLogs().then(function () {\n            _this24.uploadErrorCount = 0, _this24.uploadLogWaitingList.length > 0 && window.setTimeout(function () {\n              return _this24.uploadLogInterval();\n            }, 3e3);\n          }).catch(function (e) {\n            _this24.uploadErrorCount += 1, _this24.uploadErrorCount < 2 ? window.setTimeout(function () {\n              return _this24.uploadLogInterval();\n            }, 200) : window.setTimeout(function () {\n              return _this24.uploadLogInterval();\n            }, 1e3);\n          });\n        }\n      }\n    }]);\n\n    return _class;\n  }())(),\n      yc = \"v4.8.1-0-ge9003043(1/5/2022, 3:55:58 PM)\",\n      wc = function (e) {\n    if (e.match(/[0-9]+\\.[0-9]+\\.[0-9]+$/)) return e;\n    var t = e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-alpha\\.([0-9]+)/);\n\n    if (t && t[1] && t[2]) {\n      var i;\n      var _e11 = t[1],\n          _r14 = t[2];\n      return Xe(i = \"\".concat(_e11, \".\")).call(i, _r14);\n    }\n\n    var r = e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-special\\.([0-9]+)/);\n\n    if (r && r[1] && r[2]) {\n      var n;\n      var _e12 = r[1],\n          _t21 = r[2];\n      return Xe(n = \"\".concat(_e12, \".\")).call(n, 100 * (Number(_t21) + 1));\n    }\n\n    return \"4.0.0.999\";\n  }(\"4.8.1\"),\n      Nc = function () {\n    try {\n      return !0 === JSON.parse(\"true\");\n    } catch (e) {\n      return !0;\n    }\n  }(),\n      Oc = {\n    username: \"test\",\n    password: \"111111\",\n    turnServerURL: \"\",\n    tcpport: 3433,\n    udpport: 3478,\n    forceturn: !1\n  };\n\n  var bc = {\n    \"90p\": jc(160, 90),\n    \"90p_1\": jc(160, 90),\n    \"120p\": jc(160, 120, 15, 30, 65),\n    \"120p_1\": jc(160, 120, 15, 30, 65),\n    \"120p_3\": jc(120, 120, 15, 30, 50),\n    \"120p_4\": jc(212, 120),\n    \"180p\": jc(320, 180, 15, 30, 140),\n    \"180p_1\": jc(320, 180, 15, 30, 140),\n    \"180p_3\": jc(180, 180, 15, 30, 100),\n    \"180p_4\": jc(240, 180, 15, 30, 120),\n    \"240p\": jc(320, 240, 15, 40, 200),\n    \"240p_1\": jc(320, 240, 15, 40, 200),\n    \"240p_3\": jc(240, 240, 15, 40, 140),\n    \"240p_4\": jc(424, 240, 15, 40, 220),\n    \"360p\": jc(640, 360, 15, 80, 400),\n    \"360p_1\": jc(640, 360, 15, 80, 400),\n    \"360p_3\": jc(360, 360, 15, 80, 260),\n    \"360p_4\": jc(640, 360, 30, 80, 600),\n    \"360p_6\": jc(360, 360, 30, 80, 400),\n    \"360p_7\": jc(480, 360, 15, 80, 320),\n    \"360p_8\": jc(480, 360, 30, 80, 490),\n    \"360p_9\": jc(640, 360, 15, 80, 800),\n    \"360p_10\": jc(640, 360, 24, 80, 800),\n    \"360p_11\": jc(640, 360, 24, 80, 1e3),\n    \"480p\": jc(640, 480, 15, 100, 500),\n    \"480p_1\": jc(640, 480, 15, 100, 500),\n    \"480p_2\": jc(640, 480, 30, 100, 1e3),\n    \"480p_3\": jc(480, 480, 15, 100, 400),\n    \"480p_4\": jc(640, 480, 30, 100, 750),\n    \"480p_6\": jc(480, 480, 30, 100, 600),\n    \"480p_8\": jc(848, 480, 15, 100, 610),\n    \"480p_9\": jc(848, 480, 30, 100, 930),\n    \"480p_10\": jc(640, 480, 10, 100, 400),\n    \"720p\": jc(1280, 720, 15, 120, 1130),\n    \"720p_1\": jc(1280, 720, 15, 120, 1130),\n    \"720p_2\": jc(1280, 720, 30, 120, 2e3),\n    \"720p_3\": jc(1280, 720, 30, 120, 1710),\n    \"720p_5\": jc(960, 720, 15, 120, 910),\n    \"720p_6\": jc(960, 720, 30, 120, 1380),\n    \"1080p\": jc(1920, 1080, 15, 120, 2080),\n    \"1080p_1\": jc(1920, 1080, 15, 120, 2080),\n    \"1080p_2\": jc(1920, 1080, 30, 120, 3e3),\n    \"1080p_3\": jc(1920, 1080, 30, 120, 3150),\n    \"1080p_5\": jc(1920, 1080, 60, 120, 4780),\n    \"1440p\": jc(2560, 1440, 30, 120, 4850),\n    \"1440p_1\": jc(2560, 1440, 30, 120, 4850),\n    \"1440p_2\": jc(2560, 1440, 60, 120, 7350),\n    \"4k\": jc(3840, 2160, 30, 120, 8910),\n    \"4k_1\": jc(3840, 2160, 30, 120, 8910),\n    \"4k_3\": jc(3840, 2160, 60, 120, 13500)\n  },\n      Dc = {\n    \"480p\": Kc(640, 480, 5),\n    \"480p_1\": Kc(640, 480, 5),\n    \"480p_2\": Kc(640, 480, 30),\n    \"480p_3\": Kc(640, 480, 15),\n    \"720p\": Kc(1280, 720, 5),\n    \"720p_1\": Kc(1280, 720, 5),\n    \"720p_2\": Kc(1280, 720, 30),\n    \"720p_3\": Kc(1280, 720, 15),\n    \"1080p\": Kc(1920, 1080, 5),\n    \"1080p_1\": Kc(1920, 1080, 5),\n    \"1080p_2\": Kc(1920, 1080, 30),\n    \"1080p_3\": Kc(1920, 1080, 15)\n  },\n      kc = {\n    \"1SL1TL\": Wc(1, 1),\n    \"3SL3TL\": Wc(3, 3),\n    \"2SL3TL\": Wc(2, 3)\n  };\n\n  function Lc(e) {\n    return \"string\" == typeof e ? er({}, bc[e]) : e;\n  }\n\n  function Pc(e) {\n    return \"string\" == typeof e ? er({}, Dc[e]) : e;\n  }\n\n  function Bc(e) {\n    return \"string\" == typeof e ? er({}, kc[e]) : e;\n  }\n\n  var Mc = {\n    speech_low_quality: Gc(16e3, !1),\n    speech_standard: Gc(32e3, !1, 18),\n    music_standard: Gc(48e3, !1),\n    standard_stereo: Gc(48e3, !0, 56),\n    high_quality: Gc(48e3, !1, 128),\n    high_quality_stereo: Gc(48e3, !0, 192)\n  };\n\n  function Uc(e) {\n    return \"string\" == typeof e ? er({}, Mc[e]) : e;\n  }\n\n  function Qc(e, t, i) {\n    var r, n;\n    eo(r = ir(xc)).call(r, e) && (!i && eo(n = ir(Vc)).call(n, e) || (xc[e] = t));\n  }\n\n  function Fc(e) {\n    return xc[e];\n  }\n\n  var xc = {\n    PROCESS_ID: \"\",\n    ENCRYPT_AES: !0,\n    AREAS: [\"CHINA\", \"GLOBAL\"],\n    WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\", \"webrtc2-2.ap.sd-rtn.com\"],\n    WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\", \"webrtc2-4.ap.sd-rtn.com\"],\n    PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n    CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-web-2.ap.sd-rtn.com\", \"cds-ap-web-3.agora.io\", \"cds-web-4.ap.sd-rtn.com\"],\n    ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-web-2.ap.sd-rtn.com\", \"sua-ap-web-3.agora.io\", \"sua-web-4.ap.sd-rtn.com\"],\n    UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-web-2.ap.sd-rtn.com\", \"uap-ap-web-3.agora.io\", \"uap-web-4.ap.sd-rtn.com\"],\n    LOG_UPLOAD_SERVER: \"logservice.agora.io\",\n    EVENT_REPORT_DOMAIN: \"statscollector-1.agora.io\",\n    EVENT_REPORT_BACKUP_DOMAIN: \"web-2.statscollector.sd-rtn.com\",\n    GATEWAY_ADDRESS: [],\n    GATEWAY_WSS_ADDRESS: \"\",\n    LIVE_STREAMING_ADDRESS: \"\",\n    HTTP_CONNECT_TIMEOUT: 5e3,\n    SIGNAL_REQUEST_TIMEOUT: 1e4,\n    REPORT_STATS: !0,\n    UPLOAD_LOG: !1,\n    NOT_REPORT_EVENT: [],\n    SUBSCRIBE_TCC: !0,\n    PING_PONG_TIME_OUT: 10,\n    WEBSOCKET_TIMEOUT_MIN: 1e4,\n    EVENT_REPORT_SEND_INTERVAL: 3e3,\n    CONFIG_DISTRIBUTE_INTERVAL: 3e5,\n    CANDIDATE_TIMEOUT: 5e3,\n    SHOW_REPORT_INVOKER_LOG: !1,\n    JOIN_EXTEND: \"\",\n    PUB_EXTEND: \"\",\n    SUB_EXTEND: \"\",\n    FORCE_TURN: !1,\n    TURN_ENABLE_TCP: !0,\n    TURN_ENABLE_UDP: !0,\n    MAX_UPLOAD_CACHE: 50,\n    UPLOAD_CACHE_INTERVAL: 2e3,\n    AJAX_REQUEST_CONCURRENT: 3,\n    REPORT_APP_SCENARIO: void 0,\n    GATEWAY_DOMAINS: [\"edge.agora.io\", \"edge.sd-rtn.com\"],\n    WORKER_DOMAIN: \"edge.agora.io\",\n    TURN_DOMAIN: \"edge.agora.io\",\n    EVENT_REPORT_RETRY: !0,\n    CHROME_FORCE_PLAN_B: !1,\n    AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL: 400,\n    AUDIO_SOURCE_AVG_VOLUME_DURATION: 3e3,\n    AUDIO_VOLUME_INDICATION_INTERVAL: 2e3,\n    VOLUME_VOICE_WEIGHT: 10,\n    NORMAL_EVENT_QUEUE_CAPACITY: 100,\n    CUSTOM_REPORT: !0,\n    CUSTOM_REPORT_LIMIT: 20,\n    PROXY_SERVER_TYPE2: \"webnginx-proxy.agora.io\",\n    PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\", \"webrtc-cloud-proxy.agora.io\"],\n    CUSTOM_PUB_ANSWER_MODIFIER: null,\n    CUSTOM_SUB_ANSWER_MODIFIER: null,\n    CUSTOM_PUB_OFFER_MODIFIER: null,\n    CUSTOM_SUB_OFFER_MODIFIER: null,\n    DSCP_TYPE: \"high\",\n    REMOVE_NEW_CODECS: !0,\n    FRAGEMENT_LENGTH: 3,\n    WEBSOCKET_COMPRESS: !1,\n    SIMULCAST: !1,\n    PRELOAD_MEDIA_COUNT: 0,\n    USE_RTX: !1,\n    CHECK_VIDEO_VISIBLE_INTERVAL: 3e4,\n    SDK_FALLBACK: !0,\n    ENUMERATE_DEVICES_INTERVAL: !0,\n    H264_PROFILE_LEVEL_ID: \"\",\n    SDP_LOGGING: !1,\n    ACCOUNT_REGISTER_RETRY_TIMEOUT: 1,\n    ACCOUNT_REGISTER_RETRY_RATIO: 2,\n    ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX: 6e4,\n    ACCOUNT_REGISTER_RETRY_COUNT_MAX: 1e5,\n    AUDIO_CONTEXT: null,\n    WEBCS_BACKUP_CONNECT_TIMEOUT: 6e3,\n    PLAYER_STATE_DEFER: 2e3,\n    SIGNAL_REQUEST_WATCH_INTERVAL: 1e3,\n    FILEPATH_LENMAX: 255,\n    DUALSTREAM_OPERATION_CHECK: !0,\n    MEDIA_ELEMENT_EXISTS_DEPTH: 3,\n    SHIM_CANDIDATE: !1,\n    LEAVE_MSG_TIMEOUT: 2e3,\n    STATS_FILTER: {\n      transportId: !0,\n      googTrackId: !0\n    },\n    USE_NEW_TOKEN: !0\n  },\n      Vc = {};\n\n  function Gc(e, t, i) {\n    return {\n      sampleRate: e,\n      stereo: t,\n      bitrate: i\n    };\n  }\n\n  function jc(e, t, i, r, n) {\n    return {\n      width: e,\n      height: t,\n      frameRate: i,\n      bitrateMin: r,\n      bitrateMax: n\n    };\n  }\n\n  function Kc(e, t, i, r, n) {\n    return {\n      width: {\n        max: e\n      },\n      height: {\n        max: t\n      },\n      frameRate: i,\n      bitrateMin: r,\n      bitrateMax: n\n    };\n  }\n\n  function Wc(e, t) {\n    return {\n      numSpatialLayers: e,\n      numTemporalLayers: t\n    };\n  }\n\n  Nc || (xc.WEBCS_DOMAIN = [\"ap-web-1-oversea.agora.io\", \"ap-web-1-north-america.agora.io\"], xc.WEBCS_DOMAIN_BACKUP_LIST = [\"ap-web-2-oversea.agora.io\", \"ap-web-2-north-america.agora.io\"], xc.PROXY_CS = [\"proxy-ap-web-oversea.agora.io\", \"proxy-ap-web-america.agora.io\"], xc.CDS_AP = [\"cds-ap-web-oversea.agora.io\", \"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"], xc.ACCOUNT_REGISTER = [\"sua-ap-web-oversea.agora.io\", \"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"], xc.UAP_AP = [\"uap-ap-web-oversea.agora.io\", \"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"], xc.LOG_UPLOAD_SERVER = \"logservice-oversea.agora.io\", xc.EVENT_REPORT_DOMAIN = \"statscollector-1-oversea.agora.io\", xc.EVENT_REPORT_BACKUP_DOMAIN = \"statscollector-2-oversea.agora.io\", xc.PROXY_SERVER_TYPE3 = \"webrtc-cloud-proxy.agora.io\", xc.AREAS = [\"NORTH_AMERICA\", \"OVERSEA\"]);\n  var Hc = [[0, 1, 2, 3, 4, 5, 5], [0, 2, 2, 3, 4, 5, 5], [0, 3, 3, 3, 4, 5, 5], [0, 4, 4, 4, 4, 5, 5], [0, 5, 5, 5, 5, 5, 5]],\n      Yc = [],\n      qc = [];\n\n  function Jc(e) {\n    eo(Yc).call(Yc, e) || Yc.push(e);\n  }\n\n  function Xc(e) {\n    var t = Os(Yc).call(Yc, e);\n    -1 !== t && Ss(Yc).call(Yc, t, 1);\n  }\n\n  function zc(e) {\n    eo(qc).call(qc, e) || qc.push(e);\n  }\n\n  function Zc(e) {\n    var t = Os(qc).call(qc, e);\n    -1 !== t && Ss(qc).call(qc, t, 1);\n  }\n\n  var $c = [],\n      ed = $c.sort,\n      td = n(function () {\n    $c.sort(void 0);\n  }),\n      id = n(function () {\n    $c.sort(null);\n  }),\n      rd = Ki(\"sort\");\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: td || !id || rd\n  }, {\n    sort: function sort(e) {\n      return void 0 === e ? ed.call(Ie(this)) : ed.call(Ie(this), P(e));\n    }\n  });\n\n  var nd = Ye(\"Array\").sort,\n      sd = Array.prototype,\n      od = function od(e) {\n    var t = e.sort;\n    return e === sd || e instanceof Array && t === sd.sort ? nd : t;\n  };\n\n  G({\n    target: \"Array\",\n    stat: !0\n  }, {\n    isArray: _e\n  });\n  var ad,\n      cd,\n      dd,\n      ld = L.Array.isArray;\n  !function (e) {\n    e.UNEXPECTED_ERROR = \"UNEXPECTED_ERROR\", e.UNEXPECTED_RESPONSE = \"UNEXPECTED_RESPONSE\", e.TIMEOUT = \"TIMEOUT\", e.INVALID_PARAMS = \"INVALID_PARAMS\", e.NOT_READABLE = \"NOT_READABLE\", e.NOT_SUPPORTED = \"NOT_SUPPORTED\", e.INVALID_OPERATION = \"INVALID_OPERATION\", e.OPERATION_ABORTED = \"OPERATION_ABORTED\", e.WEB_SECURITY_RESTRICT = \"WEB_SECURITY_RESTRICT\", e.EXCHANGE_SDP_FAILED = \"EXCHANGE_SDP_FAILED\", e.NETWORK_ERROR = \"NETWORK_ERROR\", e.NETWORK_TIMEOUT = \"NETWORK_TIMEOUT\", e.NETWORK_RESPONSE_ERROR = \"NETWORK_RESPONSE_ERROR\", e.API_INVOKE_TIMEOUT = \"API_INVOKE_TIMEOUT\", e.ENUMERATE_DEVICES_FAILED = \"ENUMERATE_DEVICES_FAILED\", e.DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\", e.ELECTRON_IS_NULL = \"ELECTRON_IS_NULL\", e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR = \"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\", e.CHROME_PLUGIN_NO_RESPONSE = \"CHROME_PLUGIN_NO_RESPONSE\", e.CHROME_PLUGIN_NOT_INSTALL = \"CHROME_PLUGIN_NOT_INSTALL\", e.MEDIA_OPTION_INVALID = \"MEDIA_OPTION_INVALID\", e.PERMISSION_DENIED = \"PERMISSION_DENIED\", e.CONSTRAINT_NOT_SATISFIED = \"CONSTRAINT_NOT_SATISFIED\", e.TRACK_IS_DISABLED = \"TRACK_IS_DISABLED\", e.GET_VIDEO_ELEMENT_VISIBLE_ERROR = \"GET_VIDEO_ELEMENT_VISIBLE_ERROR\", e.SHARE_AUDIO_NOT_ALLOWED = \"SHARE_AUDIO_NOT_ALLOWED\", e.LOW_STREAM_ENCODING_ERROR = \"LOW_STREAM_ENCODING_ERROR\", e.SET_ENCODING_PARAMETER_ERROR = \"SET_ENCODING_PARAMETER_ERROR\", e.TRACK_STATE_UNREACHABLE = \"TRACK_STATE_UNREACHABLE\", e.INVALID_UINT_UID_FROM_STRING_UID = \"INVALID_UINT_UID_FROM_STRING_UID\", e.CAN_NOT_GET_PROXY_SERVER = \"CAN_NOT_GET_PROXY_SERVER\", e.CAN_NOT_GET_GATEWAY_SERVER = \"CAN_NOT_GET_GATEWAY_SERVER\", e.VOID_GATEWAY_ADDRESS = \"VOID_GATEWAY_ADDRESS\", e.UID_CONFLICT = \"UID_CONFLICT\", e.MULTI_UNILBS_RESPONSE_ERROR = \"MULTI_UNILBS_RESPONSE_ERROR\", e.UPDATE_TICKET_FAILED = \"UPDATE_TICKET_FAILED\", e.INVALID_LOCAL_TRACK = \"INVALID_LOCAL_TRACK\", e.INVALID_TRACK = \"INVALID_TRACK\", e.SENDER_NOT_FOUND = \"SENDER_NOT_FOUND\", e.CREATE_OFFER_FAILED = \"CREATE_OFFER_FAILED\", e.SET_ANSWER_FAILED = \"SET_ANSWER_FAILED\", e.ICE_FAILED = \"ICE_FAILED\", e.PC_CLOSED = \"PC_CLOSED\", e.SENDER_REPLACE_FAILED = \"SENDER_REPLACE_FAILED\", e.GET_LOCAL_CAPABILITIES_FAILED = \"GET_LOCAL_CAPABILITIES_FAILED\", e.GET_LOCAL_CONNECTION_PARAMS_FAILED = \"GET_LOCAL_CONNECTION_PARAMS_FAILED\", e.SUBSCRIBE_FAILED = \"SUBSCRIBE_FAILED\", e.UNSUBSCRIBE_FAILED = \"UNSUBSCRIBE_FAILED\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NO_ICE_CANDIDATE = \"NO_ICE_CANDIDATE\", e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS = \"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\", e.EXIST_DISABLED_VIDEO_TRACK = \"EXIST_DISABLED_VIDEO_TRACK\", e.INVALID_REMOTE_USER = \"INVALID_REMOTE_USER\", e.REMOTE_USER_IS_NOT_PUBLISHED = \"REMOTE_USER_IS_NOT_PUBLISHED\", e.CUSTOM_REPORT_SEND_FAILED = \"CUSTOM_REPORT_SEND_FAILED\", e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH = \"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\", e.FETCH_AUDIO_FILE_FAILED = \"FETCH_AUDIO_FILE_FAILED\", e.READ_LOCAL_AUDIO_FILE_ERROR = \"READ_LOCAL_AUDIO_FILE_ERROR\", e.DECODE_AUDIO_FILE_FAILED = \"DECODE_AUDIO_FILE_FAILED\", e.WS_ABORT = \"WS_ABORT\", e.WS_DISCONNECT = \"WS_DISCONNECT\", e.WS_ERR = \"WS_ERR\", e.LIVE_STREAMING_TASK_CONFLICT = \"LIVE_STREAMING_TASK_CONFLICT\", e.LIVE_STREAMING_INVALID_ARGUMENT = \"LIVE_STREAMING_INVALID_ARGUMENT\", e.LIVE_STREAMING_INTERNAL_SERVER_ERROR = \"LIVE_STREAMING_INTERNAL_SERVER_ERROR\", e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED = \"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\", e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED = \"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\", e.LIVE_STREAMING_CDN_ERROR = \"LIVE_STREAMING_CDN_ERROR\", e.LIVE_STREAMING_INVALID_RAW_STREAM = \"LIVE_STREAMING_INVALID_RAW_STREAM\", e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT = \"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\", e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE = \"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\", e.LIVE_STREAMING_WARN_FREQUENT_REQUEST = \"LIVE_STREAMING_WARN_FREQUENT_REQUEST\", e.WEBGL_INTERNAL_ERROR = \"WEBGL_INTERNAL_ERROR\", e.BEAUTY_PROCESSOR_INTERNAL_ERROR = \"BEAUTY_PROCESSOR_INTERNAL_ERROR\", e.CROSS_CHANNEL_WAIT_STATUS_ERROR = \"CROSS_CHANNEL_WAIT_STATUS_ERROR\", e.CROSS_CHANNEL_FAILED_JOIN_SRC = \"CROSS_CHANNEL_FAILED_JOIN_SEC\", e.CROSS_CHANNEL_FAILED_JOIN_DEST = \"CROSS_CHANNEL_FAILED_JOIN_DEST\", e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST = \"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\", e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE = \"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\", e.METADATA_OUT_OF_RANGE = \"METADATA_OUT_OF_RANGE\", e.LOCAL_AEC_ERROR = \"LOCAL_AEC_ERROR\", e.INVALID_PLUGIN = \"INVALID_PLUGIN\", e.DISCONNECT_P2P = \"DISCONNECT_P2P\";\n  }(ad || (ad = {}));\n\n  var Ad =\n  /*#__PURE__*/\n  function (_Error) {\n    _inherits(Ad, _Error);\n\n    function Ad(e) {\n      var _this25;\n\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var i = arguments.length > 2 ? arguments[2] : undefined;\n\n      _classCallCheck(this, Ad);\n\n      var r;\n      _this25 = _possibleConstructorReturn(this, _getPrototypeOf(Ad).call(this, t)), _this25.name = \"AgoraRTCException\", _this25.code = e, _this25.message = Xe(r = \"AgoraRTCError \".concat(_this25.code, \": \")).call(r, t), _this25.data = i;\n      return _this25;\n    }\n\n    _createClass(Ad, [{\n      key: \"toString\",\n      value: function toString() {\n        var e;\n        return this.data ? Xe(e = \"data: \".concat(ge(this.data), \"\\n\")).call(e, this.stack) : \"\".concat(this.stack);\n      }\n    }, {\n      key: \"print\",\n      value: function print() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"error\";\n        return \"error\" === e && vc.error(this.toString()), \"warning\" === e && vc.warning(this.toString()), this;\n      }\n    }, {\n      key: \"throw\",\n      value: function _throw() {\n        throw this.print(), this;\n      }\n    }]);\n\n    return Ad;\n  }(_wrapNativeSuper(Error));\n\n  function ud(e, t) {\n    if (\"boolean\" != typeof e) throw new Ad(ad.INVALID_PARAMS, \"Invalid \".concat(t, \": The value is of the boolean type.\"));\n  }\n\n  function hd(e, t, i) {\n    var r;\n    if (eo(i).call(i, e)) return;\n    throw new Ad(ad.INVALID_PARAMS, Xe(r = \"\".concat(t, \" can only be set as \")).call(r, ge(i)));\n  }\n\n  function pd(e, t) {\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1e4;\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;\n\n    if (e < i || e > r || n && !function (e) {\n      return \"number\" == typeof e && e % 1 == 0;\n    }(e)) {\n      var s, o;\n      throw new Ad(ad.INVALID_PARAMS, Xe(s = Xe(o = \"invalid \".concat(t, \": the value range is [\")).call(o, i, \", \")).call(s, r, \"]. integer only\"));\n    }\n  }\n\n  function Ed(e, t) {\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 255;\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;\n    if (null == e) throw new Ad(ad.INVALID_PARAMS, \"\".concat(t || \"param\", \" cannot be empty\"));\n    var s, o, a;\n    if (!md(e, i, r, n)) throw new Ad(ad.INVALID_PARAMS, Xe(s = Xe(o = Xe(a = \"Invalid \".concat(t || \"string param\", \": Length of the string: [\")).call(a, i, \",\")).call(o, r, \"].\")).call(s, n ? \" ASCII characters only.\" : \"\"));\n  }\n\n  function gd(e, t) {\n    if (!ld(e)) throw new Ad(ad.INVALID_PARAMS, \"\".concat(t, \" should be an array\"));\n  }\n\n  function _d(e) {\n    if (\"string\" != typeof e || !/^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(e)) throw vc.error(\"Invalid Channel Name \".concat(e)), new Ad(ad.INVALID_PARAMS, \"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,\");\n  }\n\n  function Id(e) {\n    var t, i;\n    if (!(i = e, \"number\" == typeof i && Math.floor(i) === i && 0 <= i && i <= 4294967295 || md(e, 1, 255))) throw vc.error(Xe(t = \"Invalid UID \".concat(e, \" \")).call(t, typeof e)), new Ad(ad.INVALID_PARAMS, \"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]\");\n    \"string\" == typeof e && vc.warning(\"You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.\");\n  }\n\n  function fd(e) {\n    return null == e;\n  }\n\n  function md(e) {\n    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 255;\n    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n    return \"string\" == typeof e && e.length <= i && e.length >= t && (!r || function (e) {\n      if (\"string\" != typeof e) return !1;\n\n      for (var _t22 = 0; _t22 < e.length; _t22 += 1) {\n        var _i11 = e.charCodeAt(_t22);\n\n        if (_i11 < 0 || _i11 > 255) return !1;\n      }\n\n      return !0;\n    }(e));\n  }\n\n  !function (e) {\n    e.FREE = \"free\", e.UPLOADING = \"uploading\";\n  }(cd || (cd = {})), function (e) {\n    e.NONE = \"none\", e.INIT = \"init\", e.CANPLAY = \"canplay\", e.PLAYING = \"playing\", e.PAUSED = \"paused\", e.SUSPEND = \"suspend\", e.STALLED = \"stalled\", e.WAITING = \"waiting\", e.ERROR = \"error\", e.DESTROYED = \"destroyed\", e.ABORT = \"abort\", e.ENDED = \"ended\", e.EMPTIED = \"emptied\", e.LOADEDDATA = \"loadeddata\";\n  }(dd || (dd = {}));\n  var Cd = {\n    uninit: 100,\n    none: 110,\n    init: 120,\n    loadeddata: 130,\n    canplay: 200,\n    playing: 210,\n    paused: 220,\n    suspend: 300,\n    stalled: 310,\n    waiting: 320,\n    error: 330,\n    destroyed: 340,\n    abort: 350,\n    ended: 360,\n    emptied: 370\n  };\n  G({\n    target: \"Number\",\n    stat: !0\n  }, {\n    MAX_SAFE_INTEGER: 9007199254740991\n  });\n  var Sd = 9007199254740991;\n  G({\n    target: \"Number\",\n    stat: !0\n  }, {\n    MIN_SAFE_INTEGER: -9007199254740991\n  });\n  var Rd = -9007199254740991;\n\n  function Td(e) {\n    return Ed(e.reportId, \"params.reportId\", 0, 100, !1), Ed(e.category, \"params.category\", 0, 100, !1), Ed(e.event, \"params.event\", 0, 100, !1), Ed(e.label, \"params.label\", 0, 100, !1), pd(e.value, \"params.value\", Rd, Sd, !1), !0;\n  }\n\n  var vd = {\n    sid: \"\",\n    lts: 0,\n    success: null,\n    cname: null,\n    uid: null,\n    peer: null,\n    cid: null,\n    elapse: null,\n    extend: null,\n    vid: 0\n  };\n  var yd, wd, Nd, Od, bd, Dd, kd, Ld, Pd, Bd, Md, Ud, Qd, Fd, xd, Vd, Gd, jd, Kd, Wd, Hd;\n\n  function Yd(e) {\n    return pd(e.timeout, \"config.timeout\", 0, 1e5), pd(e.timeoutFactor, \"config.timeoutFactor\", 0, 100, !1), pd(e.maxRetryCount, \"config.maxRetryConfig\", 0, 1 / 0), pd(e.maxRetryTimeout, \"config.maxRetryTimeout\", 0, 1 / 0), !0;\n  }\n\n  function qd(e) {\n    if (!ld(e) || e.length < 1) return !1;\n\n    try {\n      Xi(e).call(e, function (e) {\n        if (!e.urls) throw Error();\n      });\n    } catch (e) {\n      return !1;\n    }\n\n    return !0;\n  }\n\n  function Jd(e) {\n    return Ed(e.turnServerURL, \"turnServerURL\"), Ed(e.username, \"username\"), Ed(e.password, \"password\"), e.udpport && pd(e.udpport, \"udpport\", 1, 99999, !0), e.forceturn && ud(e.forceturn, \"forceturn\"), e.security && ud(e.security, \"security\"), e.tcpport && pd(e.tcpport, \"tcpport\", 1, 99999, !0), !0;\n  }\n\n  function Xd(e) {\n    return void 0 !== e.level && hd(e.level, \"level\", [1, 2, 3]), !0;\n  }\n\n  !function (e) {\n    e.PUBLISH = \"publish\", e.SUBSCRIBE = \"subscribe\", e.WS_COMPRESSOR_INIT = \"ws_compressor_init\", e.SESSION_INIT = \"session_init\", e.JOIN_CHOOSE_SERVER = \"join_choose_server\", e.REQ_USER_ACCOUNT = \"req_user_account\", e.JOIN_GATEWAY = \"join_gateway\", e.STREAM_SWITCH = \"stream_switch\", e.REQUEST_PROXY_WORKER_MANAGER = \"request_proxy_worker_manager\", e.REQUEST_PROXY_APPCENTER = \"request_proxy_appcenter\", e.FIRST_VIDEO_RECEIVED = \"first_video_received\", e.FIRST_AUDIO_RECEIVED = \"first_audio_received\", e.FIRST_VIDEO_DECODE = \"first_video_decode\", e.FIRST_AUDIO_DECODE = \"first_audio_decode\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_UPDATE_STREAM = \"on_update_stream\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.USER_ANALYTICS = \"req_user_analytics\";\n  }(yd || (yd = {})), function (e) {\n    e.SESSION = \"io.agora.pb.Wrtc.Session\", e.JOIN_CHOOSE_SERVER = \"io.agora.pb.Wrtc.JoinChooseServer\", e.REQ_USER_ACCOUNT = \"io.agora.pb.Wrtc.ReqUserAccount\", e.JOIN_GATEWAT = \"io.agora.pb.Wrtc.JoinGateway\", e.PUBLISH = \"io.agora.pb.Wrtc.Publish\", e.SUBSCRIBE = \"io.agora.pb.Wrtc.Subscribe\", e.WS_COMPRESSOR_INIT = \"io.agora.pb.Wrtc.WsCompressorInit\", e.STREAM_SWITCH = \"io.agora.pb.Wrtc.StreamSwitch\", e.AUDIO_SENDING_STOPPED = \"io.agora.pb.Wrtc.AudioSendingStopped\", e.VIDEO_SENDING_STOPPED = \"io.agora.pb.Wrtc.VideoSendingStopped\", e.REQUEST_PROXY_APPCENTER = \"io.agora.pb.Wrtc.RequestProxyAppCenter\", e.REQUEST_PROXY_WORKER_MANAGER = \"io.agora.pb.Wrtc.RequestProxyWorkerManager\", e.API_INVOKE = \"io.agora.pb.Wrtc.ApiInvoke\", e.FIRST_VIDEO_RECEIVED = \"io.agora.pb.Wrtc.FirstVideoReceived\", e.FIRST_AUDIO_RECEIVED = \"io.agora.pb.Wrtc.FirstAudioReceived\", e.FIRST_VIDEO_DECODE = \"io.agora.pb.Wrtc.FirstVideoDecode\", e.FIRST_AUDIO_DECODE = \"io.agora.pb.Wrtc.FirstAudioDecode\", e.ON_ADD_AUDIO_STREAM = \"io.agora.pb.Wrtc.OnAddAudioStream\", e.ON_ADD_VIDEO_STREAM = \"io.agora.pb.Wrtc.OnAddVideoStream\", e.ON_UPDATE_STREAM = \"io.agora.pb.Wrtc.OnUpdateStream\", e.ON_REMOVE_STREAM = \"io.agora.pb.Wrtc.OnRemoveStream\", e.JOIN_CHANNEL_TIMEOUT = \"io.agora.pb.Wrtc.JoinChannelTimeout\", e.PEER_PUBLISH_STATUS = \"io.agora.pb.Wrtc.PeerPublishStatus\", e.WORKER_EVENT = \"io.agora.pb.Wrtc.WorkerEvent\", e.AP_WORKER_EVENT = \"io.agora.pb.Wrtc.APWorkerEvent\", e.JOIN_WEB_PROXY_AP = \"io.agora.pb.Wrtc.JoinWebProxyAP\", e.WEBSOCKET_QUIT = \"io.agora.pb.Wrtc.WebSocketQuit\", e.USER_ANALYTICS = \"io.agora.pb.Wrtc.UserAnalytics\", e.AUTOPLAY_FAILED = \"io.agora.pb.Wrtc.AutoplayFailed\";\n  }(wd || (wd = {})), function (e) {\n    e[e.WORKER_EVENT = 156] = \"WORKER_EVENT\", e[e.AP_WORKER_EVENT = 160] = \"AP_WORKER_EVENT\";\n  }(Nd || (Nd = {})), function (e) {\n    e.CREATE_CLIENT = \"createClient\", e.CHECK_SYSTEM_REQUIREMENTS = \"checkSystemRequirements\", e.SET_AREA = \"setArea\", e.CHECK_VIDEO_TRACK_IS_ACTIVE = \"checkVideoTrackIsActive\", e.CHECK_AUDIO_TRACK_IS_ACTIVE = \"checkAudioTrackIsActive\", e.CREATE_MIC_AUDIO_TRACK = \"createMicrophoneAudioTrack\", e.CREATE_CUSTOM_AUDIO_TRACK = \"createCustomAudioTrack\", e.CREATE_BUFFER_AUDIO_TRACK = \"createBufferSourceAudioTrack\", e.CREATE_CAM_VIDEO_TRACK = \"createCameraVideoTrack\", e.CREATE_CUSTOM_VIDEO_TRACK = \"createCustomVideoTrack\", e.CREATE_MIC_AND_CAM_TRACKS = \"createMicrophoneAndCameraTracks\", e.CREATE_SCREEN_VIDEO_TRACK = \"createScreenVideoTrack\", e.SET_ENCRYPTION_CONFIG = \"Client.setEncryptionConfig\", e.START_PROXY_SERVER = \"Client.startProxyServer\", e.STOP_PROXY_SERVER = \"Client.stopProxyServer\", e.SET_PROXY_SERVER = \"Client.setProxyServer\", e.SET_TURN_SERVER = \"Client.setTurnServer\", e.SET_CLIENT_ROLE = \"Client.setClientRole\", e.SET_LOW_STREAM_PARAMETER = \"Client.setLowStreamParameter\", e.ENABLE_DUAL_STREAM = \"Client.enableDualStream\", e.DISABLE_DUAL_STREAM = \"Client.disableDualStream\", e.JOIN = \"Client.join\", e.LEAVE = \"Client.leave\", e.PUBLISH = \"Client.publish\", e.UNPUBLISH = \"Client.unpublish\", e.SUBSCRIBE = \"Client.subscribe\", e.UNSUBSCRIBE = \"Client.unsubscribe\", e.RENEW_TOKEN = \"Client.renewToken\", e.SET_REMOTE_VIDEO_STREAM_TYPE = \"Client.setRemoteVideoStreamType\", e.SET_STREAM_FALLBACK_OPTION = \"Client.setStreamFallbackOption\", e.ENABLE_AUDIO_VOLUME_INDICATOR = \"Client.enableAudioVolumeIndicator\", e.SEND_CUSTOM_REPORT_MESSAGE = \"Client.sendCustomReportMessage\", e.ON_LIVE_STREAM_WARNING = \"Client.onLiveStreamWarning\", e.ON_LIVE_STREAM_ERROR = \"Client.onLiveStreamingError\", e.START_LIVE_STREAMING = \"Client.startLiveStreaming\", e.SET_LIVE_TRANSCODING = \"Client.setLiveTranscoding\", e.STOP_LIVE_STREAMING = \"Client.stopLiveStreaming\", e.ADD_INJECT_STREAM_URL = \"Client.addInjectStreamUrl\", e.REMOVE_INJECT_STREAM_URL = \"Client.removeInjectStreamUrl\", e.START_CHANNEL_MEDIA_RELAY = \"Client.startChannelMediaRelay\", e.UPDATE_CHANNEL_MEDIA_RELAY = \"Client.updateChannelMediaRelay\", e.STOP_CHANNEL_MEDIA_RELAY = \"Client.stopChannelMediaRelay\", e.REQUEST_CONFIG_DISTRIBUTE = \"_config-distribute-request\", e.SET_CONFIG_DISTRIBUTE = \"_configDistribute\", e.LOCAL_TRACK_SET_MUTED = \"LocalTrack.setMute\", e.LOCAL_AUDIO_TRACK_PLAY = \"LocalAudioTrack.play\", e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT = \"LocalAudioTrack.playInElement\", e.LOCAL_AUDIO_TRACK_STOP = \"LocalAudioTrack.stop\", e.LOCAL_AUDIO_TRACK_SET_VOLUME = \"LocalAudioTrack.setVolume\", e.MIC_AUDIO_TRACK_SET_DEVICE = \"MicrophoneAudioTrack.setDevice\", e.BUFFER_AUDIO_TRACK_START = \"BufferSourceAudioTrack.startProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_STOP = \"BufferSourceAudioTrack.stopProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_PAUSE = \"BufferSourceAudioTrack.pauseProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_RESUME = \"BufferSourceAudioTrack.resumeProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_SEEK = \"BufferSourceAudioTrack.seekAudioBuffer\", e.LOCAL_VIDEO_TRACK_PLAY = \"LocalVideoTrack.play\", e.LOCAL_VIDEO_TRACK_STOP = \"LocalVideoTrack.stop\", e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE = \"LocalVideoTrack.getVideoElementVisibleStatus\", e.LOCAL_VIDEO_TRACK_BEAUTY = \"LocalVideoTrack.setBeautyEffect\", e.CAM_VIDEO_TRACK_SET_DEVICE = \"CameraVideoTrack.setDevice\", e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG = \"CameraVideoTrack.setEncoderConfiguration\", e.REMOTE_VIDEO_TRACK_PLAY = \"RemoteVideoTrack.play\", e.REMOTE_VIDEO_TRACK_STOP = \"RemoteVideoTrack.stop\", e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE = \"RemoteVideoTrack.getVideoElementVisibleStatus\", e.REMOTE_AUDIO_TRACK_PLAY = \"RemoteAudioTrack.play\", e.REMOTE_AUDIO_TRACK_STOP = \"RemoteAudioTrack.stop\", e.REMOTE_AUDIO_SET_VOLUME = \"RemoteAudioTrack.setVolume\", e.REMOTE_AUDIO_SET_OUTPUT_DEVICE = \"RemoteAudioTrack.setOutputDevice\", e.GET_MEDIA_STREAM_TRACK = \"Track.getMediaStreamTrack\", e.STREAM_TYPE_CHANGE = \"streamTypeChange\", e.CONNECTION_STATE_CHANGE = \"connectionStateChange\", e.LOAD_CONFIG_FROM_LOCALSTORAGE = \"loadConfigFromLocalStorage\";\n  }(Od || (Od = {})), function (e) {\n    e.TRACER = \"tracer\";\n  }(bd || (bd = {})), function (e) {\n    e.IDLE = \"IDLE\", e.INITING = \"INITING\", e.INITEND = \"INITEND\";\n  }(Dd || (Dd = {})), function (e) {\n    e.STATE_CHANGE = \"state_change\", e.RECORDING_DEVICE_CHANGED = \"recordingDeviceChanged\", e.PLAYOUT_DEVICE_CHANGED = \"playoutDeviceChanged\", e.CAMERA_DEVICE_CHANGED = \"cameraDeviceChanged\";\n  }(kd || (kd = {})), function (e) {\n    e[e.ACCESS_POINT = 101] = \"ACCESS_POINT\", e[e.UNILBS = 201] = \"UNILBS\", e[e.STRING_UID_ALLOCATOR = 901] = \"STRING_UID_ALLOCATOR\";\n  }(Ld || (Ld = {})), function (e) {\n    e[e.IIIEGAL_APPID = 1] = \"IIIEGAL_APPID\", e[e.IIIEGAL_UID = 2] = \"IIIEGAL_UID\", e[e.INTERNAL_ERROR = 3] = \"INTERNAL_ERROR\";\n  }(Pd || (Pd = {})), function (e) {\n    e[e.INVALID_VENDOR_KEY = 5] = \"INVALID_VENDOR_KEY\", e[e.INVALID_CHANNEL_NAME = 7] = \"INVALID_CHANNEL_NAME\", e[e.INTERNAL_ERROR = 8] = \"INTERNAL_ERROR\", e[e.NO_AUTHORIZED = 9] = \"NO_AUTHORIZED\", e[e.DYNAMIC_KEY_TIMEOUT = 10] = \"DYNAMIC_KEY_TIMEOUT\", e[e.NO_ACTIVE_STATUS = 11] = \"NO_ACTIVE_STATUS\", e[e.DYNAMIC_KEY_EXPIRED = 13] = \"DYNAMIC_KEY_EXPIRED\", e[e.STATIC_USE_DYNAMIC_KEY = 14] = \"STATIC_USE_DYNAMIC_KEY\", e[e.DYNAMIC_USE_STATIC_KEY = 15] = \"DYNAMIC_USE_STATIC_KEY\", e[e.USER_OVERLOAD = 16] = \"USER_OVERLOAD\", e[e.FORBIDDEN_REGION = 18] = \"FORBIDDEN_REGION\", e[e.CANNOT_MEET_AREA_DEMAND = 19] = \"CANNOT_MEET_AREA_DEMAND\";\n  }(Bd || (Bd = {})), function (e) {\n    e[e.NO_FLAG_SET = 100] = \"NO_FLAG_SET\", e[e.FLAG_SET_BUT_EMPTY = 101] = \"FLAG_SET_BUT_EMPTY\", e[e.INVALID_FALG_SET = 102] = \"INVALID_FALG_SET\", e[e.NO_SERVICE_AVAILABLE = 200] = \"NO_SERVICE_AVAILABLE\", e[e.NO_SERVICE_AVAILABLE_P2P = 201] = \"NO_SERVICE_AVAILABLE_P2P\", e[e.NO_SERVICE_AVAILABLE_VOICE = 202] = \"NO_SERVICE_AVAILABLE_VOICE\", e[e.NO_SERVICE_AVAILABLE_WEBRTC = 203] = \"NO_SERVICE_AVAILABLE_WEBRTC\", e[e.NO_SERVICE_AVAILABLE_CDS = 204] = \"NO_SERVICE_AVAILABLE_CDS\", e[e.NO_SERVICE_AVAILABLE_CDN = 205] = \"NO_SERVICE_AVAILABLE_CDN\", e[e.NO_SERVICE_AVAILABLE_TDS = 206] = \"NO_SERVICE_AVAILABLE_TDS\", e[e.NO_SERVICE_AVAILABLE_REPORT = 207] = \"NO_SERVICE_AVAILABLE_REPORT\", e[e.NO_SERVICE_AVAILABLE_APP_CENTER = 208] = \"NO_SERVICE_AVAILABLE_APP_CENTER\", e[e.NO_SERVICE_AVAILABLE_ENV0 = 209] = \"NO_SERVICE_AVAILABLE_ENV0\", e[e.NO_SERVICE_AVAILABLE_VOET = 210] = \"NO_SERVICE_AVAILABLE_VOET\", e[e.NO_SERVICE_AVAILABLE_STRING_UID = 211] = \"NO_SERVICE_AVAILABLE_STRING_UID\", e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS = 212] = \"NO_SERVICE_AVAILABLE_WEBRTC_UNILBS\", e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV = 213] = \"NO_SERVICE_AVAILABLE_UNILBS_FLV\";\n  }(Md || (Md = {})), function (e) {\n    e[e.K_TIMESTAMP_EXPIRED = 2] = \"K_TIMESTAMP_EXPIRED\", e[e.K_CHANNEL_PERMISSION_INVALID = 3] = \"K_CHANNEL_PERMISSION_INVALID\", e[e.K_CERTIFICATE_INVALID = 4] = \"K_CERTIFICATE_INVALID\", e[e.K_CHANNEL_NAME_EMPTY = 5] = \"K_CHANNEL_NAME_EMPTY\", e[e.K_CHANNEL_NOT_FOUND = 6] = \"K_CHANNEL_NOT_FOUND\", e[e.K_TICKET_INVALID = 7] = \"K_TICKET_INVALID\", e[e.K_CHANNEL_CONFLICTED = 8] = \"K_CHANNEL_CONFLICTED\", e[e.K_SERVICE_NOT_READY = 9] = \"K_SERVICE_NOT_READY\", e[e.K_SERVICE_TOO_HEAVY = 10] = \"K_SERVICE_TOO_HEAVY\", e[e.K_UID_BANNED = 14] = \"K_UID_BANNED\", e[e.K_IP_BANNED = 15] = \"K_IP_BANNED\", e[e.K_CHANNEL_BANNED = 16] = \"K_CHANNEL_BANNED\", e[e.WARN_NO_AVAILABLE_CHANNEL = 103] = \"WARN_NO_AVAILABLE_CHANNEL\", e[e.WARN_LOOKUP_CHANNEL_TIMEOUT = 104] = \"WARN_LOOKUP_CHANNEL_TIMEOUT\", e[e.WARN_LOOKUP_CHANNEL_REJECTED = 105] = \"WARN_LOOKUP_CHANNEL_REJECTED\", e[e.WARN_OPEN_CHANNEL_TIMEOUT = 106] = \"WARN_OPEN_CHANNEL_TIMEOUT\", e[e.WARN_OPEN_CHANNEL_REJECTED = 107] = \"WARN_OPEN_CHANNEL_REJECTED\", e[e.WARN_REQUEST_DEFERRED = 108] = \"WARN_REQUEST_DEFERRED\", e[e.ERR_DYNAMIC_KEY_TIMEOUT = 109] = \"ERR_DYNAMIC_KEY_TIMEOUT\", e[e.ERR_NO_AUTHORIZED = 110] = \"ERR_NO_AUTHORIZED\", e[e.ERR_VOM_SERVICE_UNAVAILABLE = 111] = \"ERR_VOM_SERVICE_UNAVAILABLE\", e[e.ERR_NO_CHANNEL_AVAILABLE_CODE = 112] = \"ERR_NO_CHANNEL_AVAILABLE_CODE\", e[e.ERR_MASTER_VOCS_UNAVAILABLE = 114] = \"ERR_MASTER_VOCS_UNAVAILABLE\", e[e.ERR_INTERNAL_ERROR = 115] = \"ERR_INTERNAL_ERROR\", e[e.ERR_NO_ACTIVE_STATUS = 116] = \"ERR_NO_ACTIVE_STATUS\", e[e.ERR_INVALID_UID = 117] = \"ERR_INVALID_UID\", e[e.ERR_DYNAMIC_KEY_EXPIRED = 118] = \"ERR_DYNAMIC_KEY_EXPIRED\", e[e.ERR_STATIC_USE_DYANMIC_KE = 119] = \"ERR_STATIC_USE_DYANMIC_KE\", e[e.ERR_DYNAMIC_USE_STATIC_KE = 120] = \"ERR_DYNAMIC_USE_STATIC_KE\", e[e.ERR_NO_VOCS_AVAILABLE = 2e3] = \"ERR_NO_VOCS_AVAILABLE\", e[e.ERR_NO_VOS_AVAILABLE = 2001] = \"ERR_NO_VOS_AVAILABLE\", e[e.ERR_JOIN_CHANNEL_TIMEOUT = 2002] = \"ERR_JOIN_CHANNEL_TIMEOUT\", e[e.ERR_REPEAT_JOIN_CHANNEL = 2003] = \"ERR_REPEAT_JOIN_CHANNEL\", e[e.ERR_JOIN_BY_MULTI_IP = 2004] = \"ERR_JOIN_BY_MULTI_IP\", e[e.ERR_NOT_JOINED = 2011] = \"ERR_NOT_JOINED\", e[e.ERR_REPEAT_JOIN_REQUEST = 2012] = \"ERR_REPEAT_JOIN_REQUEST\", e[e.ERR_INVALID_VENDOR_KEY = 2013] = \"ERR_INVALID_VENDOR_KEY\", e[e.ERR_INVALID_CHANNEL_NAME = 2014] = \"ERR_INVALID_CHANNEL_NAME\", e[e.ERR_INVALID_STRINGUID = 2015] = \"ERR_INVALID_STRINGUID\", e[e.ERR_TOO_MANY_USERS = 2016] = \"ERR_TOO_MANY_USERS\", e[e.ERR_SET_CLIENT_ROLE_TIMEOUT = 2017] = \"ERR_SET_CLIENT_ROLE_TIMEOUT\", e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION = 2018] = \"ERR_SET_CLIENT_ROLE_NO_PERMISSION\", e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE = 2019] = \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\", e[e.ERR_PUBLISH_REQUEST_INVALID = 2020] = \"ERR_PUBLISH_REQUEST_INVALID\", e[e.ERR_SUBSCRIBE_REQUEST_INVALID = 2021] = \"ERR_SUBSCRIBE_REQUEST_INVALID\", e[e.ERR_NOT_SUPPORTED_MESSAGE = 2022] = \"ERR_NOT_SUPPORTED_MESSAGE\", e[e.ERR_ILLEAGAL_PLUGIN = 2023] = \"ERR_ILLEAGAL_PLUGIN\", e[e.ERR_REJOIN_TOKEN_INVALID = 2024] = \"ERR_REJOIN_TOKEN_INVALID\", e[e.ERR_REJOIN_USER_NOT_JOINED = 2025] = \"ERR_REJOIN_USER_NOT_JOINED\", e[e.ERR_INVALID_OPTIONAL_INFO = 2027] = \"ERR_INVALID_OPTIONAL_INFO\", e[e.ILLEGAL_AES_PASSWORD = 2028] = \"ILLEGAL_AES_PASSWORD\", e[e.ILLEGAL_CLIENT_ROLE_LEVEL = 2029] = \"ILLEGAL_CLIENT_ROLE_LEVEL\", e[e.ERR_TEST_RECOVER = 9e3] = \"ERR_TEST_RECOVER\", e[e.ERR_TEST_TRYNEXT = 9001] = \"ERR_TEST_TRYNEXT\", e[e.ERR_TEST_RETRY = 9002] = \"ERR_TEST_RETRY\";\n  }(Ud || (Ud = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.MEDIA_RECONNECT_START = \"media-reconnect-start\", e.MEDIA_RECONNECT_END = \"media-reconnect-end\", e.IS_USING_CLOUD_PROXY = \"is-using-cloud-proxy\", e.USER_JOINED = \"user-joined\", e.USER_LEAVED = \"user-left\", e.USER_PUBLISHED = \"user-published\", e.USER_UNPUBLISHED = \"user-unpublished\", e.USER_INFO_UPDATED = \"user-info-updated\", e.CLIENT_BANNED = \"client-banned\", e.CHANNEL_MEDIA_RELAY_STATE = \"channel-media-relay-state\", e.CHANNEL_MEDIA_RELAY_EVENT = \"channel-media-relay-event\", e.VOLUME_INDICATOR = \"volume-indicator\", e.CRYPT_ERROR = \"crypt-error\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"token-privilege-will-expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"token-privilege-did-expire\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGED = \"stream-type-changed\", e.STREAM_FALLBACK = \"stream-fallback\", e.RECEIVE_METADATA = \"receive-metadata\", e.STREAM_MESSAGE = \"stream-message\", e.LIVE_STREAMING_ERROR = \"live-streaming-error\", e.LIVE_STREAMING_WARNING = \"live-streaming-warning\", e.INJECT_STREAM_STATUS = \"stream-inject-status\", e.EXCEPTION = \"exception\", e.ERROR = \"error\", e.P2P_LOST = \"p2p_lost\";\n  }(Qd || (Qd = {})), function (e) {\n    e.NETWORK_ERROR = \"NETWORK_ERROR\", e.SERVER_ERROR = \"SERVER_ERROR\", e.MULTI_IP = \"MULTI_IP\", e.TIMEOUT = \"TIMEOUT\", e.OFFLINE = \"OFFLINE\", e.LEAVE = \"LEAVE\", e.P2P_FAILED = \"P2P_FAILED\";\n  }(Fd || (Fd = {})), function (e) {\n    e.CONNECTING = \"connecting\", e.CONNECTED = \"connected\", e.RECONNECTING = \"reconnecting\", e.CLOSED = \"closed\";\n  }(xd || (xd = {})), function (e) {\n    e.WS_CONNECTED = \"ws_connected\", e.WS_RECONNECTING = \"ws_reconnecting\", e.WS_CLOSED = \"ws_closed\", e.ON_BINARY_DATA = \"on_binary_data\", e.REQUEST_RECOVER = \"request_recover\", e.REQUEST_JOIN_INFO = \"request_join_info\", e.REQUEST_REJOIN_INFO = \"req_rejoin_info\", e.IS_P2P_DISCONNECTED = \"is_p2p_dis\", e.DISCONNECT_P2P = \"dis_p2p\", e.NEED_RENEW_SESSION = \"need-sid\", e.REPORT_JOIN_GATEWAY = \"report_join_gateway\", e.REQUEST_TIMEOUT = \"request_timeout\", e.REQUEST_SUCCESS = \"request_success\", e.JOIN_RESPONSE = \"join_response\";\n  }(Vd || (Vd = {})), function (e) {\n    e.PING = \"ping\", e.PING_BACK = \"ping_back\", e.JOIN = \"join_v3\", e.REJOIN = \"rejoin_v3\", e.LEAVE = \"leave\", e.SET_CLIENT_ROLE = \"set_client_role\", e.PUBLISH = \"publish\", e.UNPUBLISH = \"unpublish\", e.SUBSCRIBE = \"subscribe\", e.UNSUBSCRIBE = \"unsubscribe\", e.SUBSCRIBE_CHANGE = \"subscribe_change\", e.TRAFFIC_STATS = \"traffic_stats\", e.RENEW_TOKEN = \"renew_token\", e.SWITCH_VIDEO_STREAM = \"switch_video_stream\", e.SET_FALLBACK_OPTION = \"set_fallback_option\", e.GATEWAY_INFO = \"gateway_info\", e.CONTROL = \"control\", e.SEND_METADATA = \"send_metadata\", e.DATA_STREAM = \"data_stream\", e.PICK_SVC_LAYER = \"pick_svc_layer\", e.RESTART_ICE = \"restart_ice\", e.CONNECT_PC = \"connect_pc\";\n  }(Gd || (Gd = {})), function (e) {\n    e.PUBLISH_STATS = \"publish_stats\", e.PUBLISH_RELATED_STATS = \"publish_related_stats\", e.SUBSCRIBE_STATS = \"subscribe_stats\", e.SUBSCRIBE_RELATED_STATS = \"subscribe_related_stats\", e.WS_INFLATE_DATA_LENGTH = \"ws_inflate_data_length\";\n  }(jd || (jd = {})), function (e) {\n    e.ON_USER_ONLINE = \"on_user_online\", e.ON_USER_OFFLINE = \"on_user_offline\", e.ON_STREAM_FALLBACK_UPDATE = \"on_stream_fallback_update\", e.ON_PUBLISH_STREAM = \"on_publish_stream\", e.ON_UPLINK_STATS = \"on_uplink_stats\", e.ON_P2P_LOST = \"on_p2p_lost\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"on_token_privilege_will_expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"on_token_privilege_did_expire\", e.ON_USER_BANNED = \"on_user_banned\", e.ON_NOTIFICATION = \"on_notification\", e.ON_CRYPT_ERROR = \"on_crypt_error\", e.MUTE_AUDIO = \"mute_audio\", e.MUTE_VIDEO = \"mute_video\", e.UNMUTE_AUDIO = \"unmute_audio\", e.UNMUTE_VIDEO = \"unmute_video\", e.ON_P2P_OK = \"on_p2p_ok\", e.RECEIVE_METADATA = \"receive_metadata\", e.ON_DATA_STREAM = \"on_data_stream\", e.ENABLE_LOCAL_VIDEO = \"enable_local_video\", e.DISABLE_LOCAL_VIDEO = \"disable_local_video\", e.ENABLE_LOCAL_AUDIO = \"enable_local_audio\", e.DISABLE_LOCAL_AUDIO = \"disable_local_audio\";\n  }(Kd || (Kd = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"CONNECTION_STATE_CHANGE\", e.NEED_ANSWER = \"NEED_ANSWER\", e.NEED_RENEGOTIATE = \"NEED_RENEGOTIATE\", e.P2P_LOST = \"P2P_LOST\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NEED_UNPUB = \"NEED_UNPUB\", e.NEED_UNSUB = \"NEED_UNSUB\", e.NEED_UPLOAD = \"NEED_UPLOAD\", e.NEED_CONTROL = \"NEED_CONTROL\", e.START_RECONNECT = \"START_RECONNECT\", e.END_RECONNECT = \"END_RECONNECT\", e.NEED_SIGNAL_RTT = \"NEED_SIGNAL_RTT\";\n  }(Wd || (Wd = {})), function (e) {\n    e.AUDIO_SOURCE_STATE_CHANGE = \"audio_source_state_change\", e.RECEIVE_TRACK_BUFFER = \"receive_track_buffer\", e.ON_AUDIO_BUFFER = \"on_audio_buffer\";\n  }(Hd || (Hd = {}));\n  var zd = {\n    sendVolumeLevel: 0,\n    sendBitrate: 0,\n    sendBytes: 0,\n    sendPackets: 0,\n    sendPacketsLost: 0,\n    currentPacketLossRate: 0\n  },\n      Zd = {\n    sendBytes: 0,\n    sendBitrate: 0,\n    sendPackets: 0,\n    sendPacketsLost: 0,\n    sendResolutionHeight: 0,\n    sendResolutionWidth: 0,\n    captureResolutionHeight: 0,\n    captureResolutionWidth: 0,\n    targetSendBitrate: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    currentPacketLossRate: 0\n  },\n      $d = {\n    transportDelay: 0,\n    end2EndDelay: 0,\n    receiveBitrate: 0,\n    receiveLevel: 0,\n    receiveBytes: 0,\n    receiveDelay: 0,\n    receivePackets: 0,\n    receivePacketsLost: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    freezeRate: 0,\n    packetLossRate: 0,\n    currentPacketLossRate: 0,\n    publishDuration: -1\n  },\n      el = {\n    uplinkNetworkQuality: 0,\n    downlinkNetworkQuality: 0\n  },\n      tl = {\n    transportDelay: 0,\n    end2EndDelay: 0,\n    receiveBitrate: 0,\n    receiveBytes: 0,\n    receiveDelay: 0,\n    receivePackets: 0,\n    receivePacketsLost: 0,\n    receiveResolutionHeight: 0,\n    receiveResolutionWidth: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    freezeRate: 0,\n    packetLossRate: 0,\n    currentPacketLossRate: 0,\n    publishDuration: -1\n  };\n  var il, rl;\n  !function (e) {\n    e.CONNECTED = \"websocket:connected\", e.RECONNECTING = \"websocket:reconnecting\", e.WILL_RECONNECT = \"websocket:will_reconnect\", e.CLOSED = \"websocket:closed\", e.FAILED = \"websocket:failed\", e.ON_MESSAGE = \"websocket:on_message\", e.REQUEST_NEW_URLS = \"websocket:request_new_urls\";\n  }(il || (il = {})), function (e) {\n    e.TRANSCODE = \"mix_streaming\", e.RAW = \"raw_streaming\", e.INJECT = \"inject_streaming\";\n  }(rl || (rl = {}));\n  var nl = {\n    alpha: 1,\n    height: 640,\n    width: 360,\n    x: 0,\n    y: 0,\n    zOrder: 0,\n    audioChannel: 0\n  },\n      sl = {\n    x: 0,\n    y: 0,\n    width: 160,\n    height: 160,\n    zOrder: 255,\n    alpha: 1\n  };\n\n  function ol(e, t) {\n    Ed(e.url, \"\".concat(t, \".url\"), 1, 1e3, !1), fd(e.x) || pd(e.x, \"\".concat(t, \".x\"), 0, 1e4), fd(e.y) || pd(e.y, \"\".concat(t, \".y\"), 0, 1e4), fd(e.width) || pd(e.width, \"\".concat(t, \".width\"), 0, 1e4), fd(e.height) || pd(e.height, \"\".concat(t, \".height\"), 0, 1e4), fd(e.zOrder) || pd(e.zOrder, \"\".concat(t, \".zOrder\"), 0, 255), fd(e.alpha) || pd(e.alpha, \"\".concat(t, \".alpha\"), 0, 1, !1);\n  }\n\n  var al = {\n    audioBitrate: 48,\n    audioChannels: 1,\n    audioSampleRate: 48e3,\n    backgroundColor: 0,\n    height: 360,\n    lowLatency: !1,\n    videoBitrate: 400,\n    videoCodecProfile: 100,\n    videoCodecType: 1,\n    videoFrameRate: 15,\n    videoGop: 30,\n    width: 640,\n    images: [],\n    userConfigs: [],\n    userConfigExtraInfo: \"\"\n  },\n      cl = {\n    audioBitrate: 48,\n    audioChannels: 2,\n    audioVolume: 100,\n    audioSampleRate: 48e3,\n    height: 0,\n    width: 0,\n    videoBitrate: 400,\n    videoFramerate: 15,\n    videoGop: 30\n  };\n\n  var dl, ll, Al, ul, hl, pl, El, gl, _l, Il, fl;\n\n  function ml(e) {\n    if (!e.channelName) throw new Ad(ad.INVALID_PARAMS, \"invalid channelName in info\");\n    if (!e.uid || \"number\" != typeof e.uid) throw new Ad(ad.INVALID_PARAMS, \"invalid uid in info, uid must be a number\");\n    return e.token && Ed(e.token, \"info.token\", 1, 2047), Id(e.uid), _d(e.channelName), !0;\n  }\n\n  function Cl(e) {\n    return hd(e, \"mediaSource\", [\"screen\", \"window\", \"application\"]), !0;\n  }\n\n  !function (e) {\n    e.WARNING = \"@live_uap-warning\", e.ERROR = \"@line_uap-error\", e.PUBLISH_STREAM_STATUS = \"@live_uap-publish-status\", e.INJECT_STREAM_STATUS = \"@live_uap-inject-status\", e.WORKER_STATUS = \"@live_uap-worker-status\", e.REQUEST_NEW_ADDRESS = \"@live_uap-request-address\";\n  }(dl || (dl = {})), function (e) {\n    e.REQUEST_WORKER_MANAGER_LIST = \"@live_req_worker_manager\";\n  }(ll || (ll = {})), function (e) {\n    e[e.LIVE_STREAM_RESPONSE_SUCCEED = 200] = \"LIVE_STREAM_RESPONSE_SUCCEED\", e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM = 454] = \"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\", e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR = 450] = \"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_BAD_STREAM = 451] = \"LIVE_STREAM_RESPONSE_BAD_STREAM\", e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR = 400] = \"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST = 404] = \"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\", e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED = 456] = \"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\", e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE = 457] = \"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\", e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN = 429] = \"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\", e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH = 452] = \"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\", e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED = 453] = \"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\", e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM = 455] = \"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\", e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR = 500] = \"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WORKER_LOST = 501] = \"LIVE_STREAM_RESPONSE_WORKER_LOST\", e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT = 502] = \"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\", e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT = 503] = \"LIVE_STREAM_RESPONSE_WORKER_QUIT\", e[e.ERROR_FAIL_SEND_MESSAGE = 504] = \"ERROR_FAIL_SEND_MESSAGE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE = 30] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT = 31] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH = 32] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\", e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN = 33] = \"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\";\n  }(Al || (Al = {})), function (e) {\n    e.CONNECT_FAILED = \"connect failed\", e.CONNECT_TIMEOUT = \"connect timeout\", e.WS_DISCONNECTED = \"websocket disconnected\", e.REQUEST_TIMEOUT = \"request timeout\", e.REQUEST_FAILED = \"request failed\", e.WAIT_STATUS_TIMEOUT = \"wait status timeout\", e.WAIT_STATUS_ERROR = \"wait status error\", e.BAD_STATE = \"bad state\", e.WS_ABORT = \"ws abort\", e.AP_REQUEST_TIMEOUT = \"AP request timeout\", e.AP_JSON_PARSE_ERROR = \"AP json parse error\", e.AP_REQUEST_ERROR = \"AP request error\", e.AP_REQUEST_ABORT = \"AP request abort\";\n  }(ul || (ul = {})), function (e) {\n    e[e.SetSdkProfile = 0] = \"SetSdkProfile\", e[e.SetSourceChannel = 1] = \"SetSourceChannel\", e[e.SetSourceUserId = 2] = \"SetSourceUserId\", e[e.SetDestChannel = 3] = \"SetDestChannel\", e[e.StartPacketTransfer = 4] = \"StartPacketTransfer\", e[e.StopPacketTransfer = 5] = \"StopPacketTransfer\", e[e.UpdateDestChannel = 6] = \"UpdateDestChannel\", e[e.Reconnect = 7] = \"Reconnect\", e[e.SetVideoProfile = 8] = \"SetVideoProfile\";\n  }(hl || (hl = {})), function (e) {\n    e.High = \"high\", e.Low = \"low\", e.Audio = \"audio\", e.Screen = \"screen\", e.ScreenLow = \"screen_low\";\n  }(pl || (pl = {})), function (e) {\n    e.DISCONNECT = \"disconnect\", e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGE = \"stream-type-change\", e.IS_P2P_DISCONNECTED = \"is-p2p-dis\", e.DISCONNECT_P2P = \"dis-p2p\", e.REQUEST_NEW_GATEWAY_LIST = \"req-gate-url\", e.NEED_RENEW_SESSION = \"need-sid\", e.REQUEST_P2P_CONNECTION_PARAMS = \"request-p2p-connection-params\", e.JOIN_RESPONSE = \"join-response\";\n  }(El || (El = {})), function (e) {\n    e.NEED_RENEGOTIATE = \"@need_renegotiate\", e.NEED_REPLACE_TRACK = \"@need_replace_track\", e.NEED_CLOSE = \"@need_close\", e.NEED_ENABLE_TRACK = \"@need_enable_track\", e.NEED_DISABLE_TRACK = \"@need_disable_track\", e.NEED_SESSION_ID = \"@need_sid\", e.SET_OPTIMIZATION_MODE = \"@set_optimization_mode\", e.GET_STATS = \"@get_stats\", e.GET_LOW_VIDEO_TRACK = \"@get_low_video_track\", e.NEED_RESET_REMOTE_SDP = \"@need_reset_remote_sdp\", e.NEED_UPDATE_VIDEO_ENCODER = \"@need_update_video_encoder\", e.NEED_MUTE_TRACK = \"@need_mute_track\", e.NEED_UNMUTE_TRACK = \"@need_unmute_track\";\n  }(gl || (gl = {})), function (e) {\n    e.SCREEN_TRACK = \"screen_track\", e.LOW_STREAM = \"low_stream\";\n  }(_l || (_l = {})), function (e) {\n    e.SOURCE_STATE_CHANGE = \"source-state-change\", e.TRACK_ENDED = \"track-ended\", e.BEAUTY_EFFECT_OVERLOAD = \"beauty-effect-overload\", e.VIDEO_ELEMENT_VISIBLE_STATUS = \"video-element-visible-status\";\n  }(Il || (Il = {})), function (e) {\n    e.FIRST_FRAME_DECODED = \"first-frame-decoded\", e.VIDEO_ELEMENT_VISIBLE_STATUS = \"video-element-visible-status\";\n  }(fl || (fl = {}));\n  var Sl = [\"AFRICA\", \"ASIA\", \"CHINA\", \"EUROPE\", \"GLOBAL\", \"INDIA\", \"JAPAN\", \"NORTH_AMERICA\", \"OCEANIA\", \"OVERSEA\", \"SOUTH_AMERICA\", \"KOREA\"];\n  var Rl;\n  !function (e) {\n    e.CHINA = \"CN\", e.ASIA = \"AS\", e.NORTH_AMERICA = \"NA\", e.EUROPE = \"EU\", e.JAPAN = \"JP\", e.INDIA = \"IN\", e.KOREA = \"KR\", e.OCEANIA = \"OC\", e.SOUTH_AMERICA = \"SA\", e.AFRICA = \"AF\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n  }(Rl || (Rl = {}));\n  var Tl = {\n    CHINA: {},\n    ASIA: {\n      CODE: Rl.ASIA,\n      WEBCS_DOMAIN: [\"ap-web-1-asia.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-asia.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-asia.agora.io\"],\n      CDS_AP: [\"cds-ap-web-asia.agora.io\", \"cds-ap-web-asia2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-asia.agora.io\", \"sua-ap-web-asia2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-asia.agora.io\", \"uap-ap-web-asia2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-asia.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-asia.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-asia.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    NORTH_AMERICA: {\n      CODE: Rl.NORTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-north-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-north-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-north-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-north-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-north-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    EUROPE: {\n      CODE: Rl.EUROPE,\n      WEBCS_DOMAIN: [\"ap-web-1-europe.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-europe.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-europe.agora.io\"],\n      CDS_AP: [\"cds-ap-web-europe.agora.io\", \"cds-ap-web-europe2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-europe.agora.io\", \"sua-ap-web-europe.agora.io\"],\n      UAP_AP: [\"uap-ap-web-europe.agora.io\", \"uap-ap-web-europe2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-europe.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-europe.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-europe.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"europe.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    JAPAN: {\n      CODE: Rl.JAPAN,\n      WEBCS_DOMAIN: [\"ap-web-1-japan.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-japan.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-japan.agora.io\"],\n      CDS_AP: [\"cds-ap-web-japan.agora.io\", \"cds-ap-web-japan2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-japan.agora.io\", \"sua-ap-web-japan2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-japan.agora.io\", \"\\tuap-ap-web-japan2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-japan.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-japan.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-japan.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"japan.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    INDIA: {\n      CODE: Rl.INDIA,\n      WEBCS_DOMAIN: [\"ap-web-1-india.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-india.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-india.agora.io\"],\n      CDS_AP: [\"cds-ap-web-india.agora.io\", \"cds-ap-web-india2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-india.agora.io\", \"sua-ap-web-india2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-india.agora.io\", \"uap-ap-web-india2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-india.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-india.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-india.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"india.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    KOREA: {\n      CODE: Rl.KOREA,\n      WEBCS_DOMAIN: [\"ap-web-1-korea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-korea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-korea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-korea.agora.io\", \"cds-ap-web-korea2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-korea.agora.io\", \"sua-ap-web-korea2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-korea.agora.io\", \"uap-ap-web-korea2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-korea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-korea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-korea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"korea.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OVERSEA: {\n      CODE: Rl.OVERSEA,\n      WEBCS_DOMAIN: [\"ap-web-1-oversea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oversea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oversea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oversea.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oversea.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oversea.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oversea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oversea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oversea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.agora.io\"]\n    },\n    GLOBAL: {\n      CODE: Rl.GLOBAL,\n      WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\"],\n      PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n      CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-ap-web-3.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-ap-web-3.agora.io\"],\n      UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-ap-web-3.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OCEANIA: {\n      CODE: Rl.OCEANIA,\n      WEBCS_DOMAIN: [\"ap-web-1-oceania.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oceania.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oceania.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oceania.agora.io\", \"cds-ap-web-oceania2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oceania.agora.io\", \"sua-ap-web-oceania2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oceania.agora.io\", \"uap-ap-web-oceania2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oceania.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oceania.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oceania.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    SOUTH_AMERICA: {\n      CODE: Rl.SOUTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-south-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-south-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-south-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-south-america.agora.io\", \"cds-ap-web-south-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-south-america.agora.io\", \"sua-ap-web-south-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-south-america.agora.io\", \"uap-ap-web-south-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-south-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-south-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    AFRICA: {\n      CODE: Rl.AFRICA,\n      WEBCS_DOMAIN: [\"ap-web-1-africa.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-africa.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-africa.agora.io\"],\n      CDS_AP: [\"cds-ap-web-africa.agora.io\", \"cds-ap-web-africa2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-africa.agora.io\", \"sua-ap-web-africa2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-africa.agora.io\", \"uap-ap-web-africa2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-africa.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-africa.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-africa.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"africa.webrtc-cloud-proxy.sd-rtn.com\"]\n    }\n  };\n  var vl, yl, wl, Nl, Ol, bl, Dl, kl;\n  Nc && (Tl.CHINA = {\n    CODE: Rl.CHINA,\n    WEBCS_DOMAIN: [\"webrtc2-2.ap.sd-rtn.com\"],\n    WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-4.ap.sd-rtn.com\"],\n    PROXY_CS: [\"proxy-web.ap.sd-rtn.com\"],\n    CDS_AP: [\"cds-web-2.ap.sd-rtn.com\", \"cds-web-4.ap.sd-rtn.com\"],\n    ACCOUNT_REGISTER: [\"sua-web-2.ap.sd-rtn.com\", \"sua-web-4.ap.sd-rtn.com\"],\n    UAP_AP: [\"uap-web-2.ap.sd-rtn.com\", \"uap-web-4.ap.sd-rtn.com\"],\n    EVENT_REPORT_DOMAIN: [\"web-3.statscollector.sd-rtn.com\"],\n    EVENT_REPORT_BACKUP_DOMAIN: [\"web-4.statscollector.sd-rtn.com\"],\n    LOG_UPLOAD_SERVER: [\"logservice-china.agora.io\"],\n    PROXY_SERVER_TYPE3: [\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]\n  }), function (e) {\n    e.UPDATE_BITRATE_LIMIT = \"update_bitrate_limit\";\n  }(vl || (vl = {}));\n\n  var Ll =\n  /*#__PURE__*/\n  function () {\n    function Ll() {\n      _classCallCheck(this, Ll);\n\n      this._events = {}, this.addListener = this.on;\n    }\n\n    _createClass(Ll, [{\n      key: \"getListeners\",\n      value: function getListeners(e) {\n        var t;\n        return this._events[e] ? Es(t = this._events[e]).call(t, function (e) {\n          return e.listener;\n        }) : [];\n      }\n    }, {\n      key: \"on\",\n      value: function on(e, t) {\n        this._events[e] || (this._events[e] = []);\n        var i = this._events[e];\n        -1 === this._indexOfListener(i, t) && i.push({\n          listener: t,\n          once: !1\n        });\n      }\n    }, {\n      key: \"once\",\n      value: function once(e, t) {\n        this._events[e] || (this._events[e] = []);\n        var i = this._events[e];\n        -1 === this._indexOfListener(i, t) && i.push({\n          listener: t,\n          once: !0\n        });\n      }\n    }, {\n      key: \"off\",\n      value: function off(e, t) {\n        if (!this._events[e]) return;\n\n        var i = this._events[e],\n            r = this._indexOfListener(i, t);\n\n        -1 !== r && Ss(i).call(i, r, 1), 0 === this._events[e].length && delete this._events[e];\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(e) {\n        e ? delete this._events[e] : this._events = {};\n      }\n    }, {\n      key: \"emit\",\n      value: function emit(e) {\n        var i;\n        this._events[e] || (this._events[e] = []);\n        var r = Es(i = this._events[e]).call(i, function (e) {\n          return e;\n        });\n\n        for (var _len9 = arguments.length, t = new Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n          t[_key9 - 1] = arguments[_key9];\n        }\n\n        for (var _i12 = 0; _i12 < r.length; _i12 += 1) {\n          var _n7 = r[_i12];\n          _n7.once && this.off(e, _n7.listener), _n7.listener.apply(this, t || []);\n        }\n      }\n    }, {\n      key: \"_indexOfListener\",\n      value: function _indexOfListener(e, t) {\n        var i = e.length;\n\n        for (; i--;) {\n          if (e[i].listener === t) return i;\n        }\n\n        return -1;\n      }\n    }]);\n\n    return Ll;\n  }();\n\n  var Pl =\n  /*#__PURE__*/\n  function (_Ll) {\n    _inherits(Pl, _Ll);\n\n    function Pl(e, t) {\n      _classCallCheck(this, Pl);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(Pl).call(this));\n    }\n\n    return Pl;\n  }(Ll);\n\n  !function (e) {\n    e.SEND = \"sendonly\", e.RECV = \"recvonly\", e.SENDRECV = \"sendrecv\", e.INACTIVE = \"inactive\";\n  }(yl || (yl = {})), function (e) {\n    e.VIDEO = \"video\", e.AUDIO = \"audio\";\n  }(wl || (wl = {})), function (e) {\n    e.LocalVideoTrack = \"videoTrack\", e.LocalAudioTrack = \"audioTrack\", e.LocalVideoLowTrack = \"videoLowTrack\";\n  }(Nl || (Nl = {})), function (e) {\n    e.New = \"new\", e.Connected = \"connected\", e.Reconnecting = \"reconnecting\", e.Disconnected = \"disconnected\";\n  }(Ol || (Ol = {})), function (e) {\n    e.StateChange = \"stateChange\", e.IceConnectionStateChange = \"iceConnectionStateChange\", e.RequestMuteLocal = \"requestMuteLocal\", e.RequestUnmuteLocal = \"requestUnmuteLocal\", e.RequestRePublish = \"requestRePublish\", e.RequestReSubscribe = \"requestReSubscribe\", e.RequestUploadStats = \"requestUploadStats\", e.MediaReconnectStart = \"MediaReconnectStart\", e.MediaReconnectEnd = \"MediaReconnectEnd\", e.NeedSignalRTT = \"NeedSignalRTT\", e.RequestRestartICE = \"RequestRestartIce\", e.PeerConnectionStateChange = \"PeerConnectionStateChange\", e.RequestReconnect = \"RequestReconnect\", e.RequestReconnectPC = \"RequestReconnectPC\", e.RequestUnpublishForReconnectPC = \"RequestUnpublishForReconnectPC\", e.P2PLost = \"P2PLost\";\n  }(bl || (bl = {})), function (e) {\n    e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(Dl || (Dl = {})), function (e) {\n    e.NETWORK_STATE_CHANGE = \"NETWORK_STATE_CHANGE\", e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(kl || (kl = {}));\n  var Bl = {\n    join: [\"startJoin\", \"startRequestAp\", \"startJoinGateway\", \"finishJoin\"],\n    publish: [\"startPublish\"]\n  },\n      Ml = {\n    getDisplayMedia: !1,\n    getStreamFromExtension: !1,\n    supportUnifiedPlan: !1,\n    supportMinBitrate: !1,\n    supportSetRtpSenderParameters: !1,\n    supportDualStream: !0,\n    webAudioMediaStreamDest: !1,\n    supportReplaceTrack: !1,\n    supportWebGL: !1,\n    webAudioWithAEC: !1,\n    supportRequestFrame: !1,\n    supportShareAudio: !1,\n    supportDualStreamEncoding: !1\n  };\n\n  function Ul() {\n    return Ml;\n  }\n\n  var Ql = ie.concat(\"length\", \"prototype\"),\n      Fl = {\n    f: Object.getOwnPropertyNames || function (e) {\n      return te(e, Ql);\n    }\n  },\n      xl = ae(\"Reflect\", \"ownKeys\") || function (e) {\n    var t = Fl.f(M(e)),\n        i = zi.f;\n    return i ? t.concat(i(e)) : t;\n  };\n\n  G({\n    target: \"Object\",\n    stat: !0,\n    sham: !s\n  }, {\n    getOwnPropertyDescriptors: function getOwnPropertyDescriptors(e) {\n      for (var t, i, r = E(e), n = v.f, s = xl(r), o = {}, a = 0; s.length > a;) {\n        void 0 !== (i = n(r, t = s[a++])) && fe(o, t, i);\n      }\n\n      return o;\n    }\n  });\n\n  var Vl = L.Object.getOwnPropertyDescriptors,\n      Gl = Fl.f,\n      jl = {}.toString,\n      Kl = \"object\" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],\n      Wl = {\n    f: function f(e) {\n      return Kl && \"[object Window]\" == jl.call(e) ? function (e) {\n        try {\n          return Gl(e);\n        } catch (e) {\n          return Kl.slice();\n        }\n      }(e) : Gl(E(e));\n    }\n  },\n      Hl = {\n    f: De\n  },\n      Yl = Q.f,\n      ql = function ql(e) {\n    var t = L.Symbol || (L.Symbol = {});\n    f(t, e) || Yl(t, e, {\n      value: Hl.f(e)\n    });\n  },\n      Jl = St.forEach,\n      Xl = wt(\"hidden\"),\n      zl = \"Symbol\",\n      Zl = De(\"toPrimitive\"),\n      $l = Pt.set,\n      eA = Pt.getterFor(zl),\n      tA = Object.prototype,\n      _iA = r.Symbol,\n      rA = ae(\"JSON\", \"stringify\"),\n      nA = v.f,\n      sA = Q.f,\n      oA = Wl.f,\n      aA = c.f,\n      cA = Se(\"symbols\"),\n      dA = Se(\"op-symbols\"),\n      lA = Se(\"string-to-symbol-registry\"),\n      AA = Se(\"symbol-to-string-registry\"),\n      uA = Se(\"wks\"),\n      hA = r.QObject,\n      pA = !hA || !hA.prototype || !hA.prototype.findChild,\n      EA = s && n(function () {\n    return 7 != Kt(sA({}, \"a\", {\n      get: function get() {\n        return sA(this, \"a\", {\n          value: 7\n        }).a;\n      }\n    })).a;\n  }) ? function (e, t, i) {\n    var r = nA(tA, t);\n    r && delete tA[t], sA(e, t, i), r && e !== tA && sA(tA, t, r);\n  } : sA,\n      gA = function gA(e, t) {\n    var i = cA[e] = Kt(_iA.prototype);\n    return $l(i, {\n      type: zl,\n      tag: e,\n      description: t\n    }), s || (i.description = t), i;\n  },\n      _A = ye && \"symbol\" == typeof _iA.iterator ? function (e) {\n    return \"symbol\" == typeof e;\n  } : function (e) {\n    return Object(e) instanceof _iA;\n  },\n      IA = function IA(e, t, i) {\n    e === tA && IA(dA, t, i), M(e);\n\n    var r = _(t, !0);\n\n    return M(i), f(cA, r) ? (i.enumerable ? (f(e, Xl) && e[Xl][r] && (e[Xl][r] = !1), i = Kt(i, {\n      enumerable: d(0, !1)\n    })) : (f(e, Xl) || sA(e, Xl, d(1, {})), e[Xl][r] = !0), EA(e, r, i)) : sA(e, r, i);\n  },\n      fA = function fA(e, t) {\n    M(e);\n    var i = E(t),\n        r = re(i).concat(RA(i));\n    return Jl(r, function (t) {\n      s && !mA.call(i, t) || IA(e, t, i[t]);\n    }), e;\n  },\n      mA = function mA(e) {\n    var t = _(e, !0),\n        i = aA.call(this, t);\n\n    return !(this === tA && f(cA, t) && !f(dA, t)) && (!(i || !f(this, t) || !f(cA, t) || f(this, Xl) && this[Xl][t]) || i);\n  },\n      CA = function CA(e, t) {\n    var i = E(e),\n        r = _(t, !0);\n\n    if (i !== tA || !f(cA, r) || f(dA, r)) {\n      var n = nA(i, r);\n      return !n || !f(cA, r) || f(i, Xl) && i[Xl][r] || (n.enumerable = !0), n;\n    }\n  },\n      SA = function SA(e) {\n    var t = oA(E(e)),\n        i = [];\n    return Jl(t, function (e) {\n      f(cA, e) || f($, e) || i.push(e);\n    }), i;\n  },\n      RA = function RA(e) {\n    var t = e === tA,\n        i = oA(t ? dA : E(e)),\n        r = [];\n    return Jl(i, function (e) {\n      !f(cA, e) || t && !f(tA, e) || r.push(cA[e]);\n    }), r;\n  };\n\n  if (ye || (qt((_iA = function iA() {\n    if (this instanceof _iA) throw TypeError(\"Symbol is not a constructor\");\n\n    var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0,\n        t = ve(e),\n        i = function i(e) {\n      this === tA && i.call(dA, e), f(this, Xl) && f(this[Xl], t) && (this[Xl][t] = !1), EA(this, t, d(1, e));\n    };\n\n    return s && pA && EA(tA, t, {\n      configurable: !0,\n      set: i\n    }), gA(t, e);\n  }).prototype, \"toString\", function () {\n    return eA(this).tag;\n  }), c.f = mA, Q.f = IA, v.f = CA, Fl.f = Wl.f = SA, zi.f = RA, s && sA(_iA.prototype, \"description\", {\n    configurable: !0,\n    get: function get() {\n      return eA(this).description;\n    }\n  })), we || (Hl.f = function (e) {\n    return gA(De(e), e);\n  }), G({\n    global: !0,\n    wrap: !0,\n    forced: !ye,\n    sham: !ye\n  }, {\n    Symbol: _iA\n  }), Jl(re(uA), function (e) {\n    ql(e);\n  }), G({\n    target: zl,\n    stat: !0,\n    forced: !ye\n  }, {\n    for: function _for(e) {\n      var t = String(e);\n      if (f(lA, t)) return lA[t];\n\n      var i = _iA(t);\n\n      return lA[t] = i, AA[i] = t, i;\n    },\n    keyFor: function keyFor(e) {\n      if (!_A(e)) throw TypeError(e + \" is not a symbol\");\n      if (f(AA, e)) return AA[e];\n    },\n    useSetter: function useSetter() {\n      pA = !0;\n    },\n    useSimple: function useSimple() {\n      pA = !1;\n    }\n  }), G({\n    target: \"Object\",\n    stat: !0,\n    forced: !ye,\n    sham: !s\n  }, {\n    create: function create(e, t) {\n      return void 0 === t ? Kt(e) : fA(Kt(e), t);\n    },\n    defineProperty: IA,\n    defineProperties: fA,\n    getOwnPropertyDescriptor: CA\n  }), G({\n    target: \"Object\",\n    stat: !0,\n    forced: !ye\n  }, {\n    getOwnPropertyNames: SA,\n    getOwnPropertySymbols: RA\n  }), G({\n    target: \"Object\",\n    stat: !0,\n    forced: n(function () {\n      zi.f(1);\n    })\n  }, {\n    getOwnPropertySymbols: function getOwnPropertySymbols(e) {\n      return zi.f(Ie(e));\n    }\n  }), rA) {\n    var TA = !ye || n(function () {\n      var e = _iA();\n\n      return \"[null]\" != rA([e]) || \"{}\" != rA({\n        a: e\n      }) || \"{}\" != rA(Object(e));\n    });\n    G({\n      target: \"JSON\",\n      stat: !0,\n      forced: TA\n    }, {\n      stringify: function stringify(e, t, i) {\n        for (var r, n = [e], s = 1; arguments.length > s;) {\n          n.push(arguments[s++]);\n        }\n\n        if (r = t, (g(t) || void 0 !== e) && !_A(e)) return _e(t) || (t = function t(e, _t23) {\n          if (\"function\" == typeof r && (_t23 = r.call(this, e, _t23)), !_A(_t23)) return _t23;\n        }), n[1] = t, rA.apply(null, n);\n      }\n    });\n  }\n\n  _iA.prototype[Zl] || F(_iA.prototype, Zl, _iA.prototype.valueOf), ft(_iA, zl), $[Xl] = !0;\n  var vA = L.Object.getOwnPropertySymbols,\n      yA = cr;\n\n  var wA,\n      NA = function NA(e, t, i) {\n    return t in e ? yA(e, t, {\n      value: i,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = i, e;\n  };\n\n  !function (e) {\n    e[e.CHOOSE_SERVER = 11] = \"CHOOSE_SERVER\", e[e.CLOUD_PROXY = 18] = \"CLOUD_PROXY\", e[e.CLOUD_PROXY_5 = 20] = \"CLOUD_PROXY_5\";\n  }(wA || (wA = {}));\n\n  var OA = Ye(\"Array\").entries,\n      bA = Array.prototype,\n      DA = {\n    DOMTokenList: !0,\n    NodeList: !0\n  },\n      kA = function kA(e) {\n    var t = e.entries;\n    return e === bA || e instanceof Array && t === bA.entries || DA.hasOwnProperty(lt(e)) ? OA : t;\n  },\n      LA = function LA(e) {\n    var t,\n        i,\n        r,\n        n,\n        s,\n        o = Ie(e),\n        a = \"function\" == typeof this ? this : Array,\n        c = arguments.length,\n        d = c > 1 ? arguments[1] : void 0,\n        l = void 0 !== d,\n        A = 0,\n        u = ut(o);\n    if (l && (d = B(d, c > 2 ? arguments[2] : void 0, 2)), null == u || a == Array && it(u)) for (i = new a(t = Y(o.length)); t > A; A++) {\n      fe(i, A, l ? d(o[A], A) : o[A]);\n    } else for (s = (n = u.call(o)).next, i = new a(); !(r = s.call(n)).done; A++) {\n      fe(i, A, l ? ht(n, d, [r.value, A], !0) : r.value);\n    }\n    return i.length = A, i;\n  },\n      PA = !qr(function (e) {\n    Array.from(e);\n  });\n\n  G({\n    target: \"Array\",\n    stat: !0,\n    forced: PA\n  }, {\n    from: LA\n  });\n\n  var BA = L.Array.from,\n      MA = Ye(\"Array\").keys,\n      UA = Array.prototype,\n      QA = {\n    DOMTokenList: !0,\n    NodeList: !0\n  },\n      FA = function FA(e) {\n    var t = e.keys;\n    return e === UA || e instanceof Array && t === UA.keys || QA.hasOwnProperty(lt(e)) ? MA : t;\n  };\n\n  function xA(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  var VA = 0,\n      GA = 0;\n\n  function jA(e, t, i) {\n    return new As(function (r, n) {\n      t.timeout = t.timeout || Fc(\"HTTP_CONNECT_TIMEOUT\"), t.responseType = t.responseType || \"json\", t.data && !i ? (t.data = ge(t.data), VA += Sh(t.data)) : i && (t.data.size ? VA += t.data.size : t.data instanceof FormData ? VA += function (e) {\n        var t = 0;\n        /DingTalk/i.test(navigator.userAgent) && e.realFormData && (e = e.realFormData);\n        return Xi(e).call(e, function (e) {\n          t += \"string\" == typeof e ? Sh(e) : e.size;\n        }), t + 138;\n      }(t.data) : VA += Sh(ge(t.data))), t.headers = t.headers || {}, t.headers[\"Content-Type\"] = t.headers[\"Content-Type\"] || \"application/json\", t.method = \"POST\", t.url = e, mc.request(t).then(function (e) {\n        \"string\" == typeof e.data ? GA += Sh(e.data) : e.data instanceof ArrayBuffer || e.data instanceof Uint8Array ? GA += e.data.byteLength : GA += Sh(ge(e.data)), r(e.data);\n      }).catch(function (e) {\n        mc.isCancel(e) ? n(new Ad(ad.OPERATION_ABORTED, \"cancel token canceled\")) : \"ECONNABORTED\" === e.code ? n(new Ad(ad.NETWORK_TIMEOUT, e.message)) : e.response ? n(new Ad(ad.NETWORK_RESPONSE_ERROR, e.response.status)) : n(new Ad(ad.NETWORK_ERROR, e.message));\n      });\n    });\n  }\n\n  function KA(_x, _x2) {\n    return _KA.apply(this, arguments);\n  }\n\n  function _KA() {\n    _KA = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee331(e, t) {\n      var i;\n      return _regeneratorRuntime.wrap(function _callee331$(_context331) {\n        while (1) {\n          switch (_context331.prev = _context331.next) {\n            case 0:\n              i = new Blob([t.data], {\n                type: \"buffer\"\n              });\n              _context331.next = 3;\n              return jA(e, function (e) {\n                for (var t = 1; t < arguments.length; t++) {\n                  var i,\n                      r = null != arguments[t] ? arguments[t] : {};\n                  if (t % 2) Xi(i = xA(Object(r), !0)).call(i, function (t) {\n                    NA(e, t, r[t]);\n                  });else if (Vl) se(e, Vl(r));else {\n                    var n;\n                    Xi(n = xA(Object(r))).call(n, function (t) {\n                      dr(e, t, Br(r, t));\n                    });\n                  }\n                }\n\n                return e;\n              }({}, t, {\n                data: i,\n                headers: {\n                  \"Content-Type\": \"application/octet-stream\"\n                }\n              }), !0);\n\n            case 3:\n              return _context331.abrupt(\"return\", _context331.sent);\n\n            case 4:\n            case \"end\":\n              return _context331.stop();\n          }\n        }\n      }, _callee331, this);\n    }));\n    return _KA.apply(this, arguments);\n  }\n\n  var WA = new (\n  /*#__PURE__*/\n  function (_Ll2) {\n    _inherits(_class2, _Ll2);\n\n    function _class2() {\n      var _this26;\n\n      _classCallCheck(this, _class2);\n\n      _this26 = _possibleConstructorReturn(this, _getPrototypeOf(_class2).call(this)), _this26._moduleName = \"network-indicator\", _this26._networkState = Dl.ONLINE, window.addEventListener(\"online\", function () {\n        _this26.networkState = Dl.ONLINE;\n      }), window.addEventListener(\"offline\", function () {\n        _this26.networkState = Dl.OFFLINE;\n      });\n      return _this26;\n    }\n\n    _createClass(_class2, [{\n      key: \"networkState\",\n      set: function set(e) {\n        var _this27 = this;\n\n        vc.info(\"[\".concat(this._moduleName, \"]\") + \"network state changed, \" + this._networkState + \" -> \" + e), this.emit(kl.NETWORK_STATE_CHANGE, e, this._networkState), e === Dl.ONLINE ? this.emit(kl.ONLINE) : e === Dl.OFFLINE && (this.onlineWaiter = new As(function (e) {\n          _this27.once(kl.ONLINE, function () {\n            _this27.onlineWaiter = void 0, e(Dl.ONLINE);\n          });\n        }), this.emit(kl.OFFLINE)), this._networkState = e;\n      },\n      get: function get() {\n        return this._networkState;\n      }\n    }]);\n\n    return _class2;\n  }(Ll))(),\n      HA = {\n    timeout: 500,\n    timeoutFactor: 1.5,\n    maxRetryCount: 1 / 0,\n    maxRetryTimeout: 1e4\n  };\n\n  function YA(e, t) {\n    var i = t.timeout * Math.pow(t.timeoutFactor, e);\n    return Math.min(t.maxRetryTimeout, i);\n  }\n\n  function qA(e, t, i, r) {\n    var n = er({}, HA, r);\n    var s = n.timeout;\n\n    var o =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return Th(s);\n\n              case 2:\n                s *= n.timeoutFactor;\n                s = Math.min(n.maxRetryTimeout, s);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function o() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    var a = !1;\n    var c = new As(\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(r, s) {\n        var _c2, _i13;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                t = t || function () {\n                  return !1;\n                }, i = i || function () {\n                  return !0;\n                };\n                _c2 = 0;\n\n              case 2:\n                if (!(_c2 < n.maxRetryCount)) {\n                  _context3.next = 28;\n                  break;\n                }\n\n                if (!a) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", s(new Ad(ad.OPERATION_ABORTED)));\n\n              case 5:\n                _context3.prev = 5;\n                _context3.next = 8;\n                return e();\n\n              case 8:\n                _i13 = _context3.sent;\n\n                if (t(_i13, _c2)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", r(_i13));\n\n              case 11:\n                if (!(_c2 + 1 === n.maxRetryCount)) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", r(_i13));\n\n              case 13:\n                _context3.next = 15;\n                return o();\n\n              case 15:\n                _context3.next = 25;\n                break;\n\n              case 17:\n                _context3.prev = 17;\n                _context3.t0 = _context3[\"catch\"](5);\n\n                if (i(_context3.t0, _c2)) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", s(_context3.t0));\n\n              case 21:\n                if (!(_c2 + 1 === n.maxRetryCount)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", s(_context3.t0));\n\n              case 23:\n                _context3.next = 25;\n                return o();\n\n              case 25:\n                _c2 += 1;\n                _context3.next = 2;\n                break;\n\n              case 28:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[5, 17]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    return c.cancel = function () {\n      return a = !0;\n    }, c;\n  }\n\n  var JA = !1;\n  var XA = new (\n  /*#__PURE__*/\n  function (_Ll3) {\n    _inherits(_class3, _Ll3);\n\n    function _class3() {\n      _classCallCheck(this, _class3);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(_class3).apply(this, arguments));\n    }\n\n    return _class3;\n  }(Ll))();\n\n  function zA() {\n    var e = pa();\n\n    if (!JA) {\n      var _t24 = function _t24(i) {\n        i.preventDefault(), JA = !1, \"Android\" !== e.os || \"Chrome\" !== e.name && e.name !== Aa.WECHAT ? (document.body.removeEventListener(\"touchstart\", _t24, !0), document.body.removeEventListener(\"mousedown\", _t24, !0)) : document.body.removeEventListener(\"click\", _t24, !0);\n      };\n\n      JA = !0, \"Android\" !== e.os || \"Chrome\" !== e.name && e.name !== Aa.WECHAT ? (document.body.addEventListener(\"touchstart\", _t24, !0), document.body.addEventListener(\"mousedown\", _t24, !0)) : document.body.addEventListener(\"click\", _t24, !0), vc.info(\"detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web\"), XA.onAutoplayFailed ? XA.onAutoplayFailed() : XA.onAudioAutoplayFailed ? vc.warning(\"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\\n\\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\") : vc.warning(\"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\\n\\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\\n\\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"), XA.emit(\"autoplay-failed\");\n    }\n  }\n\n  function ZA(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function $A(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = ZA(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = ZA(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function eu() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      report: iu\n    };\n    return function (t, i, r) {\n      var n = t[i];\n\n      if (\"function\" == typeof n) {\n        var _s4 = \"AgoraRTCClient\" === t.constructor.name ? \"Client\" : t.constructor.name;\n\n        r.value = function () {\n          for (var _len10 = arguments.length, t = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n            t[_key10] = arguments[_key10];\n          }\n\n          var r;\n          var o = e.report.reportApiInvoke(this._sessionId || null, {\n            name: Xe(r = \"\".concat(_s4, \".\")).call(r, i),\n            options: t,\n            tag: bd.TRACER\n          });\n\n          try {\n            var _e13 = n.apply(this, t);\n\n            return o.onSuccess(), _e13;\n          } catch (e) {\n            throw o.onError(e), e;\n          }\n        };\n      }\n\n      return r;\n    };\n  }\n\n  function tu() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      report: iu\n    };\n    return function (t, i, r) {\n      var n = t[i];\n\n      if (\"function\" == typeof n) {\n        var _s5 = \"AgoraRTCClient\" === t.constructor.name ? \"Client\" : t.constructor.name;\n\n        r.value =\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee4() {\n          var _len11,\n              t,\n              _key11,\n              r,\n              o,\n              _e14,\n              _args4 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  for (_len11 = _args4.length, t = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n                    t[_key11] = _args4[_key11];\n                  }\n\n                  o = e.report.reportApiInvoke(this._sessionId || null, {\n                    name: Xe(r = \"\".concat(_s5, \".\")).call(r, i),\n                    options: t,\n                    tag: bd.TRACER\n                  });\n                  _context4.prev = 2;\n                  _context4.next = 5;\n                  return n.apply(this, t);\n\n                case 5:\n                  _e14 = _context4.sent;\n                  return _context4.abrupt(\"return\", (o.onSuccess(), _e14));\n\n                case 9:\n                  _context4.prev = 9;\n                  _context4.t0 = _context4[\"catch\"](2);\n                  throw o.onError(_context4.t0), _context4.t0;\n\n                case 12:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this, [[2, 9]]);\n        }));\n      }\n\n      return r;\n    };\n  }\n\n  var iu = new (\n  /*#__PURE__*/\n  function () {\n    function _class4() {\n      _classCallCheck(this, _class4);\n\n      var e, t;\n      this.baseInfoMap = new Li(), this.clientList = Yc, this.keyEventUploadPendingItems = [], this.normalEventUploadPendingItems = [], this.apiInvokeUploadPendingItems = [], this.apiInvokeCount = 0, this.ltsList = [], this.lastSendNormalEventTime = La(), this.customReportCount = 0, this.eventUploadTimer = window.setInterval(qs(e = this.doSend).call(e, this), Fc(\"EVENT_REPORT_SEND_INTERVAL\")), this.setSessionIdTimer = window.setInterval(qs(t = this.appendSessionId).call(t, this), Fc(\"EVENT_REPORT_SEND_INTERVAL\"));\n    }\n\n    _createClass(_class4, [{\n      key: \"reportApiInvoke\",\n      value: function reportApiInvoke(e, t, i) {\n        var _this28 = this;\n\n        t.timeout = t.timeout || 6e4, t.reportResult = void 0 === t.reportResult || t.reportResult;\n        var r = La();\n        this.apiInvokeCount += 1;\n\n        var n = this.apiInvokeCount,\n            s = function s() {\n          return {\n            tag: t.tag,\n            invokeId: n,\n            sid: e,\n            name: t.name,\n            apiInvokeTime: r,\n            options: t.options,\n            states: t.states || null\n          };\n        },\n            o = !!Fc(\"SHOW_REPORT_INVOKER_LOG\");\n\n        o && vc.info(\"\".concat(t.name, \" start\"), t.options);\n        var a = !1;\n        Th(t.timeout).then(function () {\n          a || (_this28.sendApiInvoke($A({}, s(), {\n            error: ad.API_INVOKE_TIMEOUT,\n            success: !1\n          })), vc.debug(\"\".concat(t.name, \" timeout\")));\n        });\n        var c = new Ad(ad.UNEXPECTED_ERROR, \"\".concat(t.name, \": this api invoke is end\"));\n        return {\n          onSuccess: function onSuccess(e) {\n            var r = function r() {\n              if (a) throw c;\n              return a = !0, _this28.sendApiInvoke($A({}, s(), {\n                success: !0\n              }, t.reportResult && {\n                result: e\n              })), o && vc.info(\"\".concat(t.name, \" onSuccess\")), e;\n            };\n\n            return i ? Wh(r, t.name + \"Success\", i, function () {\n              return a = !0;\n            }) : r();\n          },\n          onError: function onError(e) {\n            var r = function r() {\n              if (a) throw e;\n              a = !0, _this28.sendApiInvoke($A({}, s(), {\n                success: !1,\n                error: e.toString()\n              })), o && vc.info(\"\".concat(t.name, \" onFailure\"), e.toString());\n            };\n\n            return i ? Wh(r, t.name + \"Error\", i, function () {\n              return a = !0;\n            }) : r();\n          }\n        };\n      }\n    }, {\n      key: \"sessionInit\",\n      value: function sessionInit(e, t) {\n        if (this.baseInfoMap.has(e)) return;\n        var i = La(),\n            r = this.createBaseInfo(e, i);\n        r.cname = t.cname;\n        var n = er({}, {\n          willUploadConsoleLog: Fc(\"UPLOAD_LOG\"),\n          maxTouchPoints: navigator.maxTouchPoints,\n          areaVersion: Nc ? \"global\" : \"oversea\",\n          areas: Fc(\"AREAS\") && Fc(\"AREAS\").join(\",\")\n        }, t.extend),\n            s = La(),\n            o = $A({}, r, {\n          eventType: yd.SESSION_INIT,\n          appid: t.appid,\n          browser: navigator.userAgent,\n          build: yc,\n          lts: s,\n          elapse: s - i,\n          extend: ge(n),\n          mode: t.mode,\n          process: Fc(\"PROCESS_ID\"),\n          success: !0,\n          version: wc\n        });\n        this.send({\n          type: wd.SESSION,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"joinChooseServer\",\n      value: function joinChooseServer(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.JOIN_CHOOSE_SERVER,\n          lts: n,\n          eventElapse: n - t.lts,\n          chooseServerAddr: t.csAddr,\n          errorCode: t.ec,\n          elapse: n - i.startTime,\n          success: t.succ,\n          chooseServerAddrList: ge(t.serverList),\n          uid: t.uid ? mr(t.uid) : null,\n          cid: t.cid ? mr(t.cid) : null,\n          chooseServerIp: t.csIp || \"\",\n          opid: t.opid,\n          unilbsServerIds: t.unilbsServerIds,\n          extend: t.extend || void 0\n        });\n        this.send({\n          type: wd.JOIN_CHOOSE_SERVER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"reqUserAccount\",\n      value: function reqUserAccount(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.REQ_USER_ACCOUNT,\n          lts: n,\n          success: t.success,\n          serverAddress: t.serverAddr,\n          stringUid: t.stringUid,\n          uid: t.uid,\n          errorCode: t.errorCode,\n          elapse: n - i.startTime,\n          eventElapse: n - t.lts,\n          extend: ge(t.extend)\n        });\n        this.send({\n          type: wd.REQ_USER_ACCOUNT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinGateway\",\n      value: function joinGateway(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info;\n        t.vid && (r.vid = t.vid), r.uid = t.uid, r.cid = t.cid;\n        var n = La(),\n            s = $A({}, r, {\n          eventType: yd.JOIN_GATEWAY,\n          lts: n,\n          gatewayAddr: t.addr,\n          success: t.succ,\n          errorCode: t.ec,\n          elapse: n - i.startTime,\n          eventElapse: n - t.lts\n        });\n        t.succ && (i.lastJoinSuccessTime = n), this.send({\n          type: wd.JOIN_GATEWAT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinChannelTimeout\",\n      value: function joinChannelTimeout(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = La(),\n            n = $A({}, i.info, {\n          lts: r,\n          timeout: t,\n          elapse: r - i.startTime\n        });\n        this.send({\n          type: wd.JOIN_CHANNEL_TIMEOUT,\n          data: n\n        }, !0);\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.PUBLISH,\n          lts: n,\n          eventElapse: t.eventElapse,\n          elapse: n - i.startTime,\n          success: t.succ,\n          errorCode: t.ec,\n          videoName: t.videoName,\n          audioName: t.audioName,\n          screenName: t.screenName,\n          screenshare: t.screenshare,\n          audio: t.audio,\n          video: t.video,\n          p2pid: t.p2pid,\n          publishRequestid: t.publishRequestid\n        });\n        this.send({\n          type: wd.PUBLISH,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.SUBSCRIBE,\n          lts: n,\n          eventElapse: t.eventElapse,\n          elapse: n - i.startTime,\n          success: t.succ,\n          errorCode: t.ec,\n          video: t.video,\n          audio: t.audio,\n          subscribeRequestid: t.subscribeRequestid,\n          p2pid: t.p2pid\n        });\n        \"string\" == typeof t.peerid ? s.peerSuid = t.peerid : s.peer = t.peerid, this.send({\n          type: wd.SUBSCRIBE,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"wsCompressorInit\",\n      value: function wsCompressorInit(e) {\n        var t;\n\n        var i = _toConsumableArray(FA(t = this.baseInfoMap).call(t)),\n            r = i.length ? i[0] : \"UnableToGetSid\",\n            n = this.baseInfoMap.get(r);\n\n        if (!n) return;\n        var s = n.info,\n            o = La(),\n            a = $A({}, s, {\n          eventType: yd.WS_COMPRESSOR_INIT,\n          lts: o,\n          eventElapse: e.eventElapse,\n          elapse: o - n.startTime,\n          status: e.status ? 1 : 2\n        });\n        this.send({\n          type: wd.WS_COMPRESSOR_INIT,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"firstRemoteFrame\",\n      value: function firstRemoteFrame(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var s = n.info,\n            o = La(),\n            a = $A({}, s, {}, r, {\n          elapse: o - n.startTime,\n          eventType: t,\n          lts: o\n        });\n        this.send({\n          type: i,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"onGatewayStream\",\n      value: function onGatewayStream(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var s = $A({}, n.info, {}, r, {\n          eventType: t,\n          lts: La()\n        });\n        this.send({\n          type: i,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"streamSwitch\",\n      value: function streamSwitch(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.STREAM_SWITCH,\n          lts: n,\n          isDual: t.isdual,\n          elapse: n - i.startTime,\n          success: t.succ\n        });\n        this.send({\n          type: wd.STREAM_SWITCH,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyAppCenter\",\n      value: function requestProxyAppCenter(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.REQUEST_PROXY_APPCENTER,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          APAddr: t.APAddr,\n          workerManagerList: t.workerManagerList,\n          response: t.response,\n          errorCode: t.ec,\n          success: t.succ\n        });\n        this.send({\n          type: wd.REQUEST_PROXY_APPCENTER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyWorkerManager\",\n      value: function requestProxyWorkerManager(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          eventType: yd.REQUEST_PROXY_WORKER_MANAGER,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          workerManagerAddr: t.workerManagerAddr,\n          response: t.response,\n          errorCode: t.ec,\n          success: t.succ\n        });\n        this.send({\n          type: wd.REQUEST_PROXY_WORKER_MANAGER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        this.proxyServer = e, e ? vc.debug(\"reportProxyServerurl: \".concat(e)) : vc.debug(\"disable reportProxyServerurl: \".concat(e));\n      }\n    }, {\n      key: \"peerPublishStatus\",\n      value: function peerPublishStatus(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {\n          subscribeElapse: t.subscribeElapse,\n          peer: t.peer,\n          peerPublishDuration: Math.max(t.audioPublishDuration, t.videoPublishDuration),\n          audiotag: t.audioPublishDuration > 0 ? 1 : -1,\n          videotag: t.videoPublishDuration > 0 ? 1 : -1,\n          lts: n,\n          elapse: n - i.startTime,\n          joinChannelSuccessElapse: n - (i.lastJoinSuccessTime || n)\n        });\n        this.send({\n          type: wd.PEER_PUBLISH_STATUS,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"workerEvent\",\n      value: function workerEvent(e, t) {\n        var _this29 = this;\n\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = Rh($A({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n,\n          productType: \"WebRTC\"\n        }), \"payload\", 1300);\n        Xi(s).call(s, function (e) {\n          return _this29.send({\n            type: wd.WORKER_EVENT,\n            data: e\n          }, !0);\n        });\n      }\n    }, {\n      key: \"apworkerEvent\",\n      value: function apworkerEvent(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n\n        });\n        this.send({\n          type: wd.AP_WORKER_EVENT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinWebProxyAP\",\n      value: function joinWebProxyAP(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n,\n          extend: t.extend || void 0\n        });\n        this.send({\n          type: wd.JOIN_WEB_PROXY_AP,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"WebSocketQuit\",\n      value: function WebSocketQuit(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = $A({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n\n        });\n        this.send({\n          type: wd.WEBSOCKET_QUIT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee5(e, t) {\n          var _this30 = this;\n\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  if (!(this.customReportCount += t.length, this.customReportCount > Fc(\"CUSTOM_REPORT_LIMIT\"))) {\n                    _context5.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);\n\n                case 2:\n                  this.customReportCounterTimer || (this.customReportCounterTimer = window.setInterval(function () {\n                    _this30.customReportCount = 0;\n                  }, 5e3));\n                  i = Es(t).call(t, function (t) {\n                    return {\n                      type: wd.USER_ANALYTICS,\n                      data: $A({\n                        sid: e\n                      }, t)\n                    };\n                  }), r = {\n                    msgType: \"EventMessages\",\n                    sentTs: Math.round(La() / 1e3),\n                    payloads: Es(i).call(i, function (e) {\n                      return ge(e);\n                    })\n                  };\n                  _context5.prev = 4;\n                  _context5.next = 7;\n                  return this.postDataToStatsCollector(r);\n\n                case 7:\n                  _context5.next = 12;\n                  break;\n\n                case 9:\n                  _context5.prev = 9;\n                  _context5.t0 = _context5[\"catch\"](4);\n                  throw vc.error(\"send custom report message failed\", _context5.t0.toString()), new Ad(ad.CUSTOM_REPORT_SEND_FAILED, _context5.t0.message);\n\n                case 12:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, this, [[4, 9]]);\n        }));\n\n        function sendCustomReportMessage(_x5, _x6) {\n          return _sendCustomReportMessage.apply(this, arguments);\n        }\n\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"autoplayFailed\",\n      value: function autoplayFailed(e, t, i, r) {\n        if (!e) return;\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var s = n.info,\n            o = La(),\n            a = $A({}, s, {\n          vid: void 0 === s.vid ? 0 : Number(s.vid),\n          lts: o,\n          elapse: o - n.startTime,\n          cbRegistered: XA.onAutoplayFailed || XA.onAudioAutoplayFailed ? 1 : -1,\n          errorMsg: i,\n          mediaType: t,\n          trackId: r,\n          extend: void 0\n        });\n        this.send({\n          type: wd.AUTOPLAY_FAILED,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"sendApiInvoke\",\n      value: function sendApiInvoke(e) {\n        var t = Fc(\"NOT_REPORT_EVENT\");\n        if (e.tag && eo(t) && eo(t).call(t, e.tag)) return !1;\n        if (null === e.sid) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var i = this.baseInfoMap.get(e.sid);\n        if (!i) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var _i$info = i.info,\n            r = _i$info.cname,\n            n = _i$info.uid,\n            s = _i$info.cid;\n        e.lts = e.lts || La();\n        var o = {\n          invokeId: e.invokeId,\n          sid: e.sid,\n          cname: r,\n          cid: s,\n          uid: n,\n          lts: e.lts,\n          success: e.success,\n          elapse: e.lts - i.startTime,\n          execElapse: e.lts - e.apiInvokeTime,\n          apiName: e.name,\n          options: e.options ? ge(e.options) : void 0,\n          execStates: e.states ? ge(e.states) : void 0,\n          execResult: e.result ? ge(e.result) : void 0,\n          errorCode: e.error ? ge(e.error) : void 0\n        };\n        return this.send({\n          type: wd.API_INVOKE,\n          data: o\n        }, !1), !0;\n      }\n    }, {\n      key: \"appendSessionId\",\n      value: function appendSessionId() {\n        var _this31 = this;\n\n        var e;\n        Xi(e = this.clientList).call(e, function (e) {\n          if (e._sessionId) {\n            var _t25 = _this31.apiInvokeUploadPendingItems.length;\n\n            for (var _i14 = 0; _i14 < _t25; _i14++) {\n              var _t26 = _this31.apiInvokeUploadPendingItems.shift();\n\n              _t26 && (_t26.sid = e._sessionId, _this31.sendApiInvoke(er({}, _t26)));\n            }\n          }\n        });\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        if (t) return this.keyEventUploadPendingItems.push(e), void this.sendItems(this.keyEventUploadPendingItems, !0);\n        var i;\n        (this.normalEventUploadPendingItems.push(e), this.normalEventUploadPendingItems.length > Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\")) && Ss(i = this.normalEventUploadPendingItems).call(i, 0, 1);\n        this.normalEventUploadPendingItems.length >= 10 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"doSend\",\n      value: function doSend() {\n        this.keyEventUploadPendingItems.length > 0 && this.sendItems(this.keyEventUploadPendingItems, !0), this.normalEventUploadPendingItems.length > 0 && La() - this.lastSendNormalEventTime >= 5e3 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"sendItems\",\n      value: function sendItems(e, t) {\n        var _this32 = this;\n\n        var i = [],\n            r = [];\n\n        for (; e.length;) {\n          var _t27 = e.shift();\n\n          i.length < 20 ? i.push(_t27) : r.push(_t27);\n        }\n\n        e.push.apply(e, r);\n\n        var _arr = [].concat(i);\n\n        for (var _i15 = 0; _i15 < _arr.length; _i15++) {\n          var _e15 = _arr[_i15];\n          var n, s;\n          if (-1 !== Os(n = this.ltsList).call(n, _e15.data.lts)) _e15.data.lts = this.ltsList[this.ltsList.length - 1] + 1, this.ltsList.push(_e15.data.lts);else this.ltsList.push(_e15.data.lts), od(s = this.ltsList).call(s, function (e, t) {\n            return e - t;\n          });\n        }\n\n        t || (this.lastSendNormalEventTime = La());\n        var o = {\n          msgType: \"EventMessages\",\n          sentTs: Math.round(La() / 1e3),\n          payloads: Es(i).call(i, function (e) {\n            return ge(e);\n          }),\n          vid: function (e) {\n            var t = e && e.data.sid && _this32.baseInfoMap.get(e.data.sid);\n\n            return t && t.info.vid && +t.info.vid || 0;\n          }(i[0])\n        };\n        return i.length && this.postDataToStatsCollector(o).catch(function (e) {\n          return function (i) {\n            var r, n, s;\n            Fc(\"EVENT_REPORT_RETRY\") && (t ? _this32.keyEventUploadPendingItems = Xe(r = _this32.keyEventUploadPendingItems).call(r, e) : (_this32.normalEventUploadPendingItems = Xe(n = _this32.normalEventUploadPendingItems).call(n, e), _this32.normalEventUploadPendingItems.length > Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\") && (Ss(s = _this32.normalEventUploadPendingItems).call(s, 0, _this32.normalEventUploadPendingItems.length - Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\")), vc.warning(\"report: drop normal events\"))));\n          };\n        }(i)), e;\n      }\n    }, {\n      key: \"postDataToStatsCollector\",\n      value: function () {\n        var _postDataToStatsCollector = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee6(e) {\n          var t,\n              i,\n              r,\n              n,\n              s,\n              o,\n              _i16,\n              a,\n              c,\n              d,\n              _args6 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  t = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : !1;\n                  _context6.t0 = WA.networkState === Dl.OFFLINE;\n\n                  if (!_context6.t0) {\n                    _context6.next = 5;\n                    break;\n                  }\n\n                  _context6.next = 5;\n                  return As.race([WA.onlineWaiter, Th(2 * HA.maxRetryTimeout)]);\n\n                case 5:\n                  s = t ? \"/events/proto-raws\" : \"/events/messages\";\n                  o = this.url || (this.proxyServer ? Xe(i = Xe(r = \"https://\".concat(this.proxyServer, \"/rs/?h=\")).call(r, Fc(\"EVENT_REPORT_DOMAIN\"), \"&p=6443&d=\")).call(i, s) : Xe(n = \"https://\".concat(Fc(\"EVENT_REPORT_DOMAIN\"), \":6443\")).call(n, s));\n                  _i16 = 0;\n\n                case 8:\n                  if (!(_i16 < 2)) {\n                    _context6.next = 29;\n                    break;\n                  }\n\n                  if (1 === _i16) o = this.backupUrl || (this.proxyServer ? Xe(a = Xe(c = \"https://\".concat(this.proxyServer, \"/rs/?h=\")).call(c, Fc(\"EVENT_REPORT_BACKUP_DOMAIN\"), \"&p=6443&d=\")).call(a, s) : Xe(d = \"https://\".concat(Fc(\"EVENT_REPORT_BACKUP_DOMAIN\"), \":6443\")).call(d, s));\n                  _context6.prev = 10;\n\n                  if (!t) {\n                    _context6.next = 16;\n                    break;\n                  }\n\n                  _context6.next = 14;\n                  return KA(o, {\n                    timeout: 1e4,\n                    data: e\n                  });\n\n                case 14:\n                  _context6.next = 18;\n                  break;\n\n                case 16:\n                  _context6.next = 18;\n                  return jA(o, {\n                    timeout: 1e4,\n                    data: e\n                  });\n\n                case 18:\n                  _context6.next = 25;\n                  break;\n\n                case 20:\n                  _context6.prev = 20;\n                  _context6.t1 = _context6[\"catch\"](10);\n\n                  if (!(1 === _i16)) {\n                    _context6.next = 24;\n                    break;\n                  }\n\n                  throw _context6.t1;\n\n                case 24:\n                  return _context6.abrupt(\"continue\", 26);\n\n                case 25:\n                  return _context6.abrupt(\"return\");\n\n                case 26:\n                  _i16 += 1;\n                  _context6.next = 8;\n                  break;\n\n                case 29:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6, this, [[10, 20]]);\n        }));\n\n        function postDataToStatsCollector(_x7) {\n          return _postDataToStatsCollector.apply(this, arguments);\n        }\n\n        return postDataToStatsCollector;\n      }()\n    }, {\n      key: \"createBaseInfo\",\n      value: function createBaseInfo(e, t) {\n        var i = er({}, vd);\n        return i.sid = e, this.baseInfoMap.set(e, {\n          info: i,\n          startTime: t\n        }), i;\n      }\n    }, {\n      key: \"reportResourceTiming\",\n      value: function reportResourceTiming(e, t) {\n        var i = performance.getEntriesByName(e),\n            r = i[i.length - 1];\n        r && this.reportApiInvoke(t, {\n          name: \"Client.resourceTiming\",\n          options: r,\n          tag: bd.TRACER\n        }).onSuccess();\n      }\n    }]);\n\n    return _class4;\n  }())();\n\n  var ru =\n  /*#__PURE__*/\n  function (_Ll4) {\n    _inherits(ru, _Ll4);\n\n    function ru(e, t) {\n      var _this33;\n\n      _classCallCheck(this, ru);\n\n      _this33 = _possibleConstructorReturn(this, _getPrototypeOf(ru).call(this)), _this33._hints = [], _this33._isClosed = !1, _this33._ID = t || wh(8, \"track-\"), _this33._originMediaStreamTrack = e, _this33._mediaStreamTrack = e, zc(_assertThisInitialized(_assertThisInitialized(_this33)));\n      return _this33;\n    }\n\n    _createClass(ru, [{\n      key: \"toString\",\n      value: function toString() {\n        return this._ID;\n      }\n    }, {\n      key: \"getTrackId\",\n      value: function getTrackId() {\n        return this._ID;\n      }\n    }, {\n      key: \"getMediaStreamTrack\",\n      value: function getMediaStreamTrack(e) {\n        if (!e) {\n          var _e16 = iu.reportApiInvoke(null, {\n            name: Od.GET_MEDIA_STREAM_TRACK,\n            options: [],\n            tag: bd.TRACER\n          });\n\n          this._mediaStreamTrack && \"string\" == typeof this._mediaStreamTrack.label ? _e16.onSuccess(this._mediaStreamTrack.label) : _e16.onSuccess(\"\");\n        }\n\n        return this._mediaStreamTrack;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._isClosed = !0, Zc(this);\n      }\n    }]);\n\n    return ru;\n  }(Ll);\n\n  var nu = 1;\n\n  var su =\n  /*#__PURE__*/\n  function () {\n    function su(e) {\n      _classCallCheck(this, su);\n\n      var t;\n      this.lockingPromise = As.resolve(), this.locks = 0, this.name = \"\", this.lockId = nu++, e && (this.name = e), vc.debug(Xe(t = \"[lock-\".concat(this.name, \"-\")).call(t, this.lockId, \"] is created.\"));\n    }\n\n    _createClass(su, [{\n      key: \"lock\",\n      value: function lock(e) {\n        var _this34 = this;\n\n        var t, i, r;\n        var n;\n        this.locks += 1, vc.debug(Xe(t = Xe(i = Xe(r = \"[lock-\".concat(this.name, \"-\")).call(r, this.lockId, \"] is locked, current queue \")).call(i, this.locks, \". \")).call(t, \"string\" == typeof e ? e : \"\"));\n        var s = new As(function (t) {\n          n = function n() {\n            var i, r, n;\n            _this34.locks -= 1, vc.debug(Xe(i = Xe(r = Xe(n = \"[lock-\".concat(_this34.name, \"-\")).call(n, _this34.lockId, \"] is not locked, current queue \")).call(r, _this34.locks, \". \")).call(i, \"string\" == typeof e ? e : \"\")), t();\n          };\n        }),\n            o = this.lockingPromise.then(function () {\n          return n;\n        });\n        return this.lockingPromise = this.lockingPromise.then(function () {\n          return s;\n        }), o;\n      }\n    }, {\n      key: \"isLocked\",\n      get: function get() {\n        return this.locks > 0;\n      }\n    }]);\n\n    return su;\n  }();\n\n  function ou(e, t) {\n    return function (i, r, n) {\n      var s = i[r];\n      if (\"function\" != typeof s) throw new Error(\"Cannot use mutex on object property.\");\n      return n.value =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var n,\n            o,\n            a,\n            c,\n            _len12,\n            i,\n            _key12,\n            _args7 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                o = this[t];\n\n                if (o) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw new Error(Xe(a = \"mutex property key \".concat(t, \" doesn't exist on \")).call(a, e));\n\n              case 3:\n                _context7.next = 5;\n                return o.lock(Xe(n = \"From \".concat(e, \".\")).call(n, r));\n\n              case 5:\n                c = _context7.sent;\n                _context7.prev = 6;\n\n                for (_len12 = _args7.length, i = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n                  i[_key12] = _args7[_key12];\n                }\n\n                _context7.next = 10;\n                return s.apply(this, i);\n\n              case 10:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 11:\n                _context7.prev = 11;\n                c();\n                return _context7.finish(11);\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[6,, 11, 14]]);\n      })), n;\n    };\n  }\n\n  var au =\n  /*#__PURE__*/\n  function (_ru) {\n    _inherits(au, _ru);\n\n    function au(e, t) {\n      var _this35;\n\n      _classCallCheck(this, au);\n\n      _this35 = _possibleConstructorReturn(this, _getPrototypeOf(au).call(this, e, t)), _this35._enabled = !0, _this35._muted = !1, _this35._isClosed = !1, _this35._trackProcessors = [], _this35._handleTrackEnded = function () {\n        _this35.onTrackEnded();\n      }, _this35._enabledMutex = new su(\"\".concat(t)), e.addEventListener(\"ended\", _this35._handleTrackEnded);\n      return _this35;\n    }\n\n    _createClass(au, [{\n      key: \"getTrackLabel\",\n      value: function getTrackLabel() {\n        return this._originMediaStreamTrack.label;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this._isClosed || (this.stop(), Xi(e = this._trackProcessors).call(e, function (e) {\n          return e.destroy();\n        }), this._trackProcessors = [], this._originMediaStreamTrack.stop(), this._mediaStreamTrack !== this._originMediaStreamTrack && (this._mediaStreamTrack.stop(), this._mediaStreamTrack = null), this._originMediaStreamTrack = null, this._enabledMutex = null, vc.debug(\"[\".concat(this.getTrackId(), \"] close\")), this.emit(gl.NEED_CLOSE), _get(_getPrototypeOf(au.prototype), \"close\", this).call(this));\n      }\n    }, {\n      key: \"_registerTrackProcessor\",\n      value: function () {\n        var _registerTrackProcessor2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee10(e) {\n          var _this36 = this;\n\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  if (!(-1 !== Os(t = this._trackProcessors).call(t, e))) {\n                    _context10.next = 2;\n                    break;\n                  }\n\n                  return _context10.abrupt(\"return\");\n\n                case 2:\n                  i = this._trackProcessors[this._trackProcessors.length - 1];\n\n                  this._trackProcessors.push(e);\n\n                  e.onOutputChange =\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee8() {\n                    var t;\n                    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                      while (1) {\n                        switch (_context8.prev = _context8.next) {\n                          case 0:\n                            t = e.output || _this36._originMediaStreamTrack;\n                            _this36._mediaStreamTrack = t;\n\n                            _this36._updatePlayerSource();\n\n                            _context8.next = 5;\n                            return Lh(_this36, gl.NEED_REPLACE_TRACK, _this36);\n\n                          case 5:\n                          case \"end\":\n                            return _context8.stop();\n                        }\n                      }\n                    }, _callee8, this);\n                  }));\n\n                  if (!i) {\n                    _context10.next = 11;\n                    break;\n                  }\n\n                  i.onOutputChange =\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee9() {\n                    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                      while (1) {\n                        switch (_context9.prev = _context9.next) {\n                          case 0:\n                            _context9.t0 = i.output;\n\n                            if (!_context9.t0) {\n                              _context9.next = 4;\n                              break;\n                            }\n\n                            _context9.next = 4;\n                            return e.setInput(i.output);\n\n                          case 4:\n                          case \"end\":\n                            return _context9.stop();\n                        }\n                      }\n                    }, _callee9, this);\n                  }));\n                  _context10.next = 9;\n                  return e.setInput(i.output || i.input || this._originMediaStreamTrack);\n\n                case 9:\n                  _context10.next = 13;\n                  break;\n\n                case 11:\n                  _context10.next = 13;\n                  return e.setInput(this._originMediaStreamTrack);\n\n                case 13:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10, this);\n        }));\n\n        function _registerTrackProcessor(_x8) {\n          return _registerTrackProcessor2.apply(this, arguments);\n        }\n\n        return _registerTrackProcessor;\n      }()\n    }, {\n      key: \"_getOutputFromProcessors\",\n      value: function _getOutputFromProcessors() {\n        if (0 === this._trackProcessors.length) return this._originMediaStreamTrack;\n        var e = this._trackProcessors[this._trackProcessors.length - 1];\n        return e.output || e.input || this._originMediaStreamTrack;\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function () {\n        var _updateOriginMediaStreamTrack2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee11(e, t) {\n          var _t28;\n\n          return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n            while (1) {\n              switch (_context11.prev = _context11.next) {\n                case 0:\n                  if (!(e !== this._originMediaStreamTrack)) {\n                    _context11.next = 12;\n                    break;\n                  }\n\n                  if (!(this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded), t && this._originMediaStreamTrack.stop(), e.addEventListener(\"ended\", this._handleTrackEnded), this._originMediaStreamTrack = e, this._trackProcessors.length > 0)) {\n                    _context11.next = 8;\n                    break;\n                  }\n\n                  _context11.next = 4;\n                  return this._trackProcessors[0].setInput(e);\n\n                case 4:\n                  _t28 = this._getOutputFromProcessors();\n                  this._mediaStreamTrack = _t28;\n                  _context11.next = 9;\n                  break;\n\n                case 8:\n                  this._mediaStreamTrack = this._originMediaStreamTrack;\n\n                case 9:\n                  this._updatePlayerSource();\n\n                  _context11.next = 12;\n                  return Lh(this, gl.NEED_REPLACE_TRACK, this);\n\n                case 12:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }\n          }, _callee11, this);\n        }));\n\n        function _updateOriginMediaStreamTrack(_x9, _x10) {\n          return _updateOriginMediaStreamTrack2.apply(this, arguments);\n        }\n\n        return _updateOriginMediaStreamTrack;\n      }()\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {};\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(Il.TRACK_ENDED);\n      }\n    }, {\n      key: \"stateCheck\",\n      value: function stateCheck(e, t) {\n        var i, r, n;\n        if (vc.debug(Xe(i = Xe(r = Xe(n = \"check track state, [muted: \".concat(this._muted, \", enabled: \")).call(n, this._enabled, \"] to [\")).call(r, e, \": \")).call(i, t, \"]\")), ud(t, e), this._enabled && this._muted && \"enabled\" === e && !1 === t) throw new Ad(ad.TRACK_STATE_UNREACHABLE, \"cannot set enabled while the track is muted\").print();\n        if (!this._enabled && !this._muted && \"muted\" === e && !0 === t) throw new Ad(ad.TRACK_STATE_UNREACHABLE, \"cannot set muted while the track is disabled\").print();\n      }\n    }, {\n      key: \"muted\",\n      get: function get() {\n        return this._muted;\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return this._enabled;\n      }\n    }]);\n\n    return au;\n  }(ru);\n\n  var cu;\n  !function (e) {\n    e.IOS_15_INTERRUPTION_START = \"ios15-interruption-start\", e.IOS_15_INTERRUPTION_END = \"ios15-interruption-end\", e.IOS_INTERRUPTION_START = \"ios-interruption-start\", e.IOS_INTERRUPTION_END = \"ios-interruption-end\", e.STATE_CHANGE = \"state-change\";\n  }(cu || (cu = {}));\n  var du = window.AudioContext || window.webkitAudioContext;\n  var lu = null;\n  var Au = new (\n  /*#__PURE__*/\n  function (_Ll5) {\n    _inherits(_class5, _Ll5);\n\n    function _class5() {\n      var _this37;\n\n      _classCallCheck(this, _class5);\n\n      _this37 = _possibleConstructorReturn(this, _getPrototypeOf(_class5).apply(this, arguments)), _this37.onLocalAudioTrackMute = function () {\n        vc.info(\"ios15-interruption-start\"), _this37.emit(cu.IOS_15_INTERRUPTION_START);\n      }, _this37.onLocalAudioTrackUnmute =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee12() {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                vc.info(\"ios15-interruption-end\");\n\n                if (!(\"running\" !== _this37.curState || _this37.duringInterruption)) {\n                  _context12.next = 5;\n                  break;\n                }\n\n                vc.info(\"ios15-interruption-end-canceled\");\n                _context12.next = 10;\n                break;\n\n              case 5:\n                _context12.t0 = lu;\n\n                if (!_context12.t0) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                _context12.next = 9;\n                return lu.suspend();\n\n              case 9:\n                _this37.emit(cu.IOS_15_INTERRUPTION_END);\n\n              case 10:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n      return _this37;\n    }\n\n    _createClass(_class5, [{\n      key: \"bindInterruptDetectorTrack\",\n      value: function bindInterruptDetectorTrack(e) {\n        vc.debug(\"webaudio bindInterruptDetectorTrack \".concat(e.getTrackId())), this.interruptDetectorTrack || (this.interruptDetectorTrack = e, this.interruptDetectorTrack._mediaStreamTrack.onmute = this.onLocalAudioTrackMute, this.interruptDetectorTrack._mediaStreamTrack.onunmute = this.onLocalAudioTrackUnmute);\n      }\n    }, {\n      key: \"unbindInterruptDetectorTrack\",\n      value: function unbindInterruptDetectorTrack(e) {\n        vc.debug(\"webaudio unbindInterruptDetectorTrack \".concat(e.getTrackId())), this.interruptDetectorTrack && this.interruptDetectorTrack === e && (this.interruptDetectorTrack._mediaStreamTrack && (this.interruptDetectorTrack._mediaStreamTrack.onmute = null, this.interruptDetectorTrack._mediaStreamTrack.onunmute = null), this.interruptDetectorTrack = void 0);\n      }\n    }, {\n      key: \"duringInterruption\",\n      get: function get() {\n        return \"running\" === this.prevState && \"interrupted\" === this.curState;\n      }\n    }]);\n\n    return _class5;\n  }(Ll))();\n\n  function uu() {\n    du ? (vc.info(\"create audio context\"), lu = new du(), Au.curState = lu.state, lu.onstatechange = function () {\n      var e;\n      (Au.prevState = Au.curState, Au.curState = lu ? lu.state : void 0, (va() || Oa()) && \"running\" === Au.prevState && \"interrupted\" === Au.curState && (vc.info(\"ios-interruption-start\"), Au.emit(cu.IOS_INTERRUPTION_START)), (va() || Oa()) && \"interrupted\" === Au.prevState && \"running\" === Au.curState && (vc.info(\"ios-interruption-end\"), Au.emit(cu.IOS_INTERRUPTION_END)), Au.prevState !== Au.curState) && (vc.debug(\"AudioContext State Change\", Xe(e = \"\".concat(Au.prevState, \"=>\")).call(e, Au.curState)), Au.emit(cu.STATE_CHANGE));\n    }, function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee13(e) {\n        var t, i, r, n, s, o, a, c, d, l, A, u, h, p, _t31, _r17;\n\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                p = function _ref18() {\n                  A(!0);\n                };\n\n                h = function _ref17() {\n                  i.removeEventListener(\"playing\", h), i.removeEventListener(\"abort\", h), i.removeEventListener(\"error\", h), s = !1, A(!1);\n                };\n\n                u = function _ref16(e) {\n                  if (n !== e) {\n                    n = e;\n\n                    for (var _i18 = 0, _r16 = t; _i18 < _r16.length; _i18++) {\n                      var _t30 = _r16[_i18];\n                      e ? window.addEventListener(_t30, p, {\n                        capture: !0,\n                        passive: !0\n                      }) : window.removeEventListener(_t30, p, {\n                        capture: !0,\n                        passive: !0\n                      });\n                    }\n                  }\n                };\n\n                A = function _ref15(e) {\n                  if (!s) if (i.paused) {\n                    if (e) {\n                      u(!1), s = !0;\n\n                      var _e17 = void 0;\n\n                      try {\n                        _e17 = i.play(), _e17 ? _e17.then(h, h) : (i.addEventListener(\"playing\", h), i.addEventListener(\"abort\", h), i.addEventListener(\"error\", h));\n                      } catch (e) {\n                        h();\n                      }\n                    } else u(!0);\n                  } else u(!1);\n                };\n\n                l = function _ref14() {\n                  o(!0);\n                };\n\n                d = function _ref13() {\n                  o(!1);\n                };\n\n                c = function _ref12() {\n                  o(!0);\n                };\n\n                a = function _ref11(e) {\n                  if (r !== e) {\n                    r = e;\n\n                    for (var _i17 = 0, _r15 = t; _i17 < _r15.length; _i17 += 1) {\n                      var _t29 = _r15[_i17];\n                      e ? window.addEventListener(_t29, l, {\n                        capture: !0,\n                        passive: !0\n                      }) : window.removeEventListener(_t29, l, {\n                        capture: !0,\n                        passive: !0\n                      });\n                    }\n                  }\n                };\n\n                o = function _ref10(t) {\n                  \"running\" === e.state ? a(!1) : va() || Oa() ? \"suspended\" === e.state && (a(!0), t && e.resume().then(d, d)) : \"closed\" !== e.state && (a(!0), t && e.resume().then(d, d));\n                };\n\n                t = [\"click\", \"contextmenu\", \"auxclick\", \"dblclick\", \"mousedown\", \"mouseup\", \"touchend\", \"keydown\", \"keyup\"];\n                r = !1, n = !1, s = !1;\n\n                if (va()) {\n                  _t31 = e.createMediaStreamDestination(), _r17 = document.createElement(\"div\");\n                  _r17.innerHTML = \"<audio x-webkit-airplay='deny'></audio>\", i = _r17.children.item(0), i.controls = !1, i.disableRemotePlayback = !0, i.preload = \"auto\", i.srcObject = _t31.stream, A(!0);\n                }\n\n                Au.on(cu.STATE_CHANGE, c), o(!1);\n\n              case 13:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      return function (_x11) {\n        return _ref9.apply(this, arguments);\n      };\n    }()(lu)) : vc.error(\"your browser is not support web audio\");\n  }\n\n  function hu() {\n    if (!lu) {\n      if (uu(), !lu) throw new Ad(ad.NOT_SUPPORTED, \"can not create audio context\");\n      return lu;\n    }\n\n    return lu;\n  }\n\n  function pu(e) {\n    if (function () {\n      if (null !== Eu) return Eu;\n      var e = hu(),\n          t = e.createBufferSource(),\n          i = e.createGain(),\n          r = e.createGain();\n      t.connect(i), t.connect(r), t.disconnect(i);\n      var n = !1;\n\n      try {\n        t.disconnect(i);\n      } catch (e) {\n        n = !0;\n      }\n\n      return t.disconnect(), Eu = n, n;\n    }()) return;\n    vc.debug(\"polyfill audio node\");\n    var t = e.connect,\n        i = e.disconnect;\n    e.connect = function (i, r, n) {\n      var s;\n      return e._inputNodes || (e._inputNodes = []), eo(s = e._inputNodes).call(s, i) || (i instanceof AudioNode ? (e._inputNodes.push(i), t.call(e, i, r, n)) : t.call(e, i, r)), e;\n    }, e.disconnect = function (r, n, s) {\n      i.call(e), r ? Mh(e._inputNodes, r) : e._inputNodes = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = e._inputNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _i19 = _step.value;\n          t.call(e, _i19);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    };\n  }\n\n  var Eu = null;\n\n  function gu(e, t) {\n    var i = 1 / t,\n        r = hu();\n    var n = r.createGain();\n    n.gain.value = 0, n.connect(r.destination);\n    var s = !1;\n\n    var o = function o() {\n      if (s) return void (n = null);\n      var t = r.createOscillator();\n      t.onended = o, t.connect(n), t.start(0), t.stop(r.currentTime + i), e(r.currentTime);\n    };\n\n    return o(), function () {\n      s = !0;\n    };\n  }\n\n  var _u =\n  /*#__PURE__*/\n  function (_Ll6) {\n    _inherits(_u, _Ll6);\n\n    function _u() {\n      var _this38;\n\n      _classCallCheck(this, _u);\n\n      _this38 = _possibleConstructorReturn(this, _getPrototypeOf(_u).call(this)), _this38.isPlayed = !1, _this38.audioOutputLevel = 0, _this38.isDestroyed = !1, _this38.isNoAudioInput = !1, _this38._noAudioInputCount = 0, _this38.context = hu(), _this38.playNode = _this38.context.destination, _this38.outputNode = _this38.context.createGain(), pu(_this38.outputNode), _this38.analyserNode = _this38.context.createAnalyser(), _this38.analyserNode.smoothingTimeConstant = .4, _this38.analyserNode.fftSize = 2048;\n      return _this38;\n    }\n\n    _createClass(_u, [{\n      key: \"startGetAudioBuffer\",\n      value: function startGetAudioBuffer(e) {\n        var _this39 = this;\n\n        this.audioBufferNode || (this.audioBufferNode = this.context.createScriptProcessor(e), this.outputNode.connect(this.audioBufferNode), this.audioBufferNode.connect(this.context.destination), this.audioBufferNode.onaudioprocess = function (e) {\n          _this39.emit(Hd.ON_AUDIO_BUFFER, function (e) {\n            for (var _t32 = 0; _t32 < e.outputBuffer.numberOfChannels; _t32 += 1) {\n              var _i20 = e.outputBuffer.getChannelData(_t32);\n\n              for (var _e18 = 0; _e18 < _i20.length; _e18 += 1) {\n                _i20[_e18] = 0;\n              }\n            }\n\n            return e.inputBuffer;\n          }(e));\n        });\n      }\n    }, {\n      key: \"stopGetAudioBuffer\",\n      value: function stopGetAudioBuffer() {\n        this.audioBufferNode && (this.audioBufferNode.onaudioprocess = null, this.outputNode.disconnect(this.audioBufferNode), this.audioBufferNode = void 0);\n      }\n    }, {\n      key: \"createOutputTrack\",\n      value: function createOutputTrack() {\n        if (!Ul().webAudioMediaStreamDest) throw new Ad(ad.NOT_SUPPORTED, \"your browser is not support audio processor\");\n        return this.destNode && this.outputTrack || (this.destNode = this.context.createMediaStreamDestination(), this.outputNode.connect(this.destNode), this.outputTrack = this.destNode.stream.getAudioTracks()[0]), this.outputTrack;\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        \"running\" !== this.context.state && Qh(function () {\n          Au.emit(\"autoplay-failed\");\n        }), this.isPlayed = !0, this.playNode = e || this.context.destination, this.outputNode.connect(this.playNode);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        if (this.isPlayed) try {\n          this.outputNode.disconnect(this.playNode);\n        } catch (e) {}\n        this.isPlayed = !1;\n      }\n    }, {\n      key: \"getAccurateVolumeLevel\",\n      value: function getAccurateVolumeLevel() {\n        if (!this.context || va() || Oa() || \"running\" !== this.context.state && this.context.resume(), !this.analyserNode) return 0;\n        var e = new Uint8Array(this.analyserNode.frequencyBinCount);\n        this.analyserNode.getByteFrequencyData(e);\n        var t = 0;\n\n        for (var _i21 = 0; _i21 < e.length; _i21++) {\n          t += _i21 < 64 ? Math.abs(10 * e[_i21]) : Math.abs(6 * e[_i21] / 15);\n        }\n\n        return t / e.length / 255;\n      }\n    }, {\n      key: \"checkHasAudioInput\",\n      value: function () {\n        var _checkHasAudioInput = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee14() {\n          var e,\n              t,\n              i,\n              _e19,\n              _args14 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  e = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : 0;\n\n                  if (!(e > 5)) {\n                    _context14.next = 3;\n                    break;\n                  }\n\n                  return _context14.abrupt(\"return\", (this.isNoAudioInput = !0, this.onNoAudioInput && this.onNoAudioInput(), !1));\n\n                case 3:\n                  if (!(va() || Oa() ? \"suspended\" === this.context.state && this.context.resume() : \"running\" !== this.context.state && this.context.resume(), !this.analyserNode)) {\n                    _context14.next = 5;\n                    break;\n                  }\n\n                  return _context14.abrupt(\"return\", !1);\n\n                case 5:\n                  t = new Uint8Array(this.analyserNode.frequencyBinCount);\n                  this.analyserNode.getByteFrequencyData(t);\n                  i = !1;\n\n                  for (_e19 = 0; _e19 < t.length; _e19++) {\n                    0 !== t[_e19] && (i = !0);\n                  }\n\n                  if (!i) {\n                    _context14.next = 13;\n                    break;\n                  }\n\n                  _context14.t0 = (this.isNoAudioInput = !1, !0);\n                  _context14.next = 21;\n                  break;\n\n                case 13:\n                  _context14.next = 15;\n                  return Th(200);\n\n                case 15:\n                  _context14.next = 17;\n                  return this.checkHasAudioInput(e ? e + 1 : 1);\n\n                case 17:\n                  _context14.t1 = _context14.sent;\n\n                  if (!_context14.t1) {\n                    _context14.next = 20;\n                    break;\n                  }\n\n                  _context14.t1 = i;\n\n                case 20:\n                  _context14.t0 = _context14.t1;\n\n                case 21:\n                  return _context14.abrupt(\"return\", _context14.t0);\n\n                case 22:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, _callee14, this);\n        }));\n\n        function checkHasAudioInput() {\n          return _checkHasAudioInput.apply(this, arguments);\n        }\n\n        return checkHasAudioInput;\n      }()\n    }, {\n      key: \"getAudioVolume\",\n      value: function getAudioVolume() {\n        return this.outputNode.gain.value;\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        this.outputNode.gain.setValueAtTime(e, this.context.currentTime);\n      }\n    }, {\n      key: \"setMute\",\n      value: function setMute(e) {\n        e ? (this.disconnect(), this.audioOutputLevel = 0) : this.connect();\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disconnect(), this.stop(), this.isDestroyed = !0, this.onNoAudioInput = void 0;\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.sourceNode && this.sourceNode.disconnect(), this.outputNode && this.outputNode.disconnect();\n      }\n    }, {\n      key: \"connect\",\n      value: function connect() {\n        this.sourceNode && this.sourceNode.connect(this.outputNode), this.outputNode.connect(this.analyserNode);\n      }\n    }]);\n\n    return _u;\n  }(Ll);\n\n  var Iu =\n  /*#__PURE__*/\n  function (_u2) {\n    _inherits(Iu, _u2);\n\n    function Iu(e, t) {\n      var _this40;\n\n      _classCallCheck(this, Iu);\n\n      var i;\n      if (_this40 = _possibleConstructorReturn(this, _getPrototypeOf(Iu).call(this)), _this40.isCurrentTrackCloned = !1, _this40.isRemoteTrack = !1, _this40.rebuildWebAudio =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee15() {\n        var e, t, i;\n        return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                vc.debug(\"ready to rebuild web audio, state:\", _this40.context.state);\n                _context15.t0 = _this40.isNoAudioInput;\n\n                if (!_context15.t0) {\n                  _context15.next = 5;\n                  break;\n                }\n\n                _context15.next = 5;\n                return _this40.checkHasAudioInput();\n\n              case 5:\n                if (!(!_this40.isNoAudioInput || _this40.isDestroyed)) {\n                  _context15.next = 7;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\", (document.body.removeEventListener(\"click\", _this40.rebuildWebAudio, !0), void vc.debug(\"rebuild web audio success, current volume status\", _this40.getAccurateVolumeLevel())));\n\n              case 7:\n                _this40.context.resume().then(function () {\n                  return vc.info(\"resume success\");\n                }), vc.debug(\"rebuild web audio because of ios 12 bugs\"), _this40.disconnect();\n                e = _this40.track;\n                _this40.track = _this40.track.clone(), _this40.isCurrentTrackCloned ? e.stop() : _this40.isCurrentTrackCloned = !0;\n                t = new MediaStream([_this40.track]);\n                _this40.sourceNode = _this40.context.createMediaStreamSource(t), pu(_this40.sourceNode), _this40.analyserNode = _this40.context.createAnalyser();\n                i = _this40.outputNode.gain.value;\n                _this40.outputNode = _this40.context.createGain(), _this40.outputNode.gain.setValueAtTime(i, _this40.context.currentTime), pu(_this40.outputNode), _this40.connect(), _this40.audioElement.srcObject = t, _this40.isPlayed && _this40.play(_this40.playNode), _this40.checkHasAudioInput();\n\n              case 14:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      })), \"audio\" !== e.kind) throw new Ad(ad.UNEXPECTED_ERROR);\n      _this40.track = e;\n      var r = new MediaStream([_this40.track]);\n      _this40.isRemoteTrack = !!t, _this40.sourceNode = _this40.context.createMediaStreamSource(r), pu(_this40.sourceNode), _this40.connect(), _this40.audioElement = document.createElement(\"audio\"), _this40.audioElement.srcObject = r;\n      var n = pa();\n      t && n.os === la.IOS && Number(null === (i = n.osVersion) || void 0 === i ? void 0 : i.split(\".\")[0]) < 15 && (Au.on(cu.STATE_CHANGE, function () {\n        \"suspended\" === _this40.context.state ? document.body.addEventListener(\"click\", _this40.rebuildWebAudio, !0) : \"running\" === _this40.context.state && _this40.rebuildWebAudio();\n      }), _this40.checkHasAudioInput().then(function (e) {\n        e || document.body.addEventListener(\"click\", _this40.rebuildWebAudio, !0);\n      }));\n      return _possibleConstructorReturn(_this40);\n    }\n\n    _createClass(Iu, [{\n      key: \"updateTrack\",\n      value: function updateTrack(e) {\n        this.sourceNode.disconnect(), this.track = e, this.isCurrentTrackCloned = !1;\n        var t = new MediaStream([e]);\n        this.sourceNode = this.context.createMediaStreamSource(t), pu(this.sourceNode), this.sourceNode.connect(this.outputNode), this.audioElement.srcObject = t;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.audioElement.srcObject = null, this.audioElement.remove(), Au.off(\"state-change\", this.rebuildWebAudio), _get(_getPrototypeOf(Iu.prototype), \"destroy\", this).call(this);\n      }\n    }, {\n      key: \"isFreeze\",\n      get: function get() {\n        return !1;\n      }\n    }]);\n\n    return Iu;\n  }(_u);\n\n  function fu(_x12, _x13) {\n    return _fu.apply(this, arguments);\n  }\n\n  function _fu() {\n    _fu = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee332(e, t) {\n      var i, r;\n      return _regeneratorRuntime.wrap(function _callee332$(_context332) {\n        while (1) {\n          switch (_context332.prev = _context332.next) {\n            case 0:\n              i = function i(e, t) {\n                return e ? \"number\" != typeof e ? e.max || e.exact || e.ideal || e.min || t : e : t;\n              }, r = {\n                audio: !1,\n                video: {\n                  mandatory: {\n                    chromeMediaSource: \"desktop\",\n                    chromeMediaSourceId: e,\n                    maxHeight: i(t.height, 1080),\n                    maxWidth: i(t.width, 1920)\n                  }\n                }\n              };\n              t.frameRate && \"number\" != typeof t.frameRate ? (r.video.mandatory.maxFrameRate = t.frameRate.max, r.video.mandatory.minFrameRate = t.frameRate.min) : \"number\" == typeof t.frameRate && (r.video.mandatory.maxFrameRate = t.frameRate);\n              _context332.next = 4;\n              return navigator.mediaDevices.getUserMedia(r);\n\n            case 4:\n              return _context332.abrupt(\"return\", _context332.sent);\n\n            case 5:\n            case \"end\":\n              return _context332.stop();\n          }\n        }\n      }, _callee332, this);\n    }));\n    return _fu.apply(this, arguments);\n  }\n\n  function mu(_x14) {\n    return _mu.apply(this, arguments);\n  }\n\n  function _mu() {\n    _mu = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee333(e) {\n      var t, i;\n      return _regeneratorRuntime.wrap(function _callee333$(_context333) {\n        while (1) {\n          switch (_context333.prev = _context333.next) {\n            case 0:\n              _context333.next = 2;\n              return Cu(e.mediaSource);\n\n            case 2:\n              t = _context333.sent;\n              _context333.next = 5;\n              return function (e) {\n                return new As(function (t, i) {\n                  var r = document.createElement(\"div\");\n                  r.innerText = \"share screen\", r.setAttribute(\"style\", \"text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;\");\n                  var n = document.createElement(\"div\");\n                  n.setAttribute(\"style\", \"width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;\");\n                  var s = document.createElement(\"div\");\n                  s.innerText = \"Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.\", s.setAttribute(\"style\", \"height: 12%;\");\n                  var o = document.createElement(\"div\");\n                  o.setAttribute(\"style\", \"width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;\");\n                  var a = document.createElement(\"div\");\n                  a.setAttribute(\"style\", \"text-align: right; padding: 16px 0;\");\n                  var c = document.createElement(\"button\");\n                  c.innerHTML = \"cancel\", c.setAttribute(\"style\", \"width: 85px;\"), c.onclick = function () {\n                    document.body.removeChild(d);\n                    var e = new Error(\"NotAllowedError\");\n                    e.name = \"NotAllowedError\", i(e);\n                  }, a.appendChild(c), n.appendChild(s), n.appendChild(o), n.appendChild(a);\n                  var d = document.createElement(\"div\");\n                  d.setAttribute(\"style\", \"position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\"), d.appendChild(r), d.appendChild(n), document.body.appendChild(d), Es(e).call(e, function (e) {\n                    if (e.id) {\n                      var _i143 = document.createElement(\"div\");\n\n                      _i143.setAttribute(\"style\", \"width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;\");\n\n                      var _r91 = e.thumbnail;\n\n                      var _r91$getSize = _r91.getSize(),\n                          _n56 = _r91$getSize.width;\n\n                      _n56 > 1920 && (_r91 = _r91.resize({\n                        width: 1920\n                      })), _i143.innerHTML = '<div style=\"height: 120px; display: table-cell; vertical-align: middle;\"><img style=\"width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);\" src=' + _r91.toDataURL() + ' /></div><span style=\"\\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">' + (e.name.replace(/[\\u00A0-\\u9999<>\\&]/g, function (e) {\n                        return \"&#\" + e.charCodeAt(0) + \";\";\n                      }) + \"</span>\"), _i143.onclick = function () {\n                        document.body.removeChild(d), t(e.id);\n                      }, o.appendChild(_i143);\n                    }\n                  });\n                });\n              }(t);\n\n            case 5:\n              i = _context333.sent;\n              _context333.next = 8;\n              return fu(i, e);\n\n            case 8:\n              return _context333.abrupt(\"return\", _context333.sent);\n\n            case 9:\n            case \"end\":\n              return _context333.stop();\n          }\n        }\n      }, _callee333, this);\n    }));\n    return _mu.apply(this, arguments);\n  }\n\n  function Cu(_x15) {\n    return _Cu.apply(this, arguments);\n  }\n\n  function _Cu() {\n    _Cu = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee334(e) {\n      var t, i, r;\n      return _regeneratorRuntime.wrap(function _callee334$(_context334) {\n        while (1) {\n          switch (_context334.prev = _context334.next) {\n            case 0:\n              t = [\"window\", \"screen\"];\n              \"application\" !== e && \"window\" !== e || (t = [\"window\"]), \"screen\" === e && (t = [\"screen\"]);\n              i = Ru();\n\n              if (i) {\n                _context334.next = 5;\n                break;\n              }\n\n              throw new Ad(ad.ELECTRON_IS_NULL);\n\n            case 5:\n              r = null;\n\n              try {\n                r = i.desktopCapturer.getSources({\n                  types: t\n                });\n              } catch (e) {\n                r = null;\n              }\n\n              r && r.then || (r = new As(function (e, r) {\n                i.desktopCapturer.getSources({\n                  types: t\n                }, function (t, i) {\n                  t ? r(t) : e(i);\n                });\n              }));\n              _context334.prev = 8;\n              _context334.next = 11;\n              return r;\n\n            case 11:\n              return _context334.abrupt(\"return\", _context334.sent);\n\n            case 14:\n              _context334.prev = 14;\n              _context334.t0 = _context334[\"catch\"](8);\n              throw new Ad(ad.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR, _context334.t0.toString());\n\n            case 17:\n            case \"end\":\n              return _context334.stop();\n          }\n        }\n      }, _callee334, this, [[8, 14]]);\n    }));\n    return _Cu.apply(this, arguments);\n  }\n\n  var Su = null;\n\n  function Ru() {\n    if (Su) return Su;\n\n    try {\n      return Su = window.require(\"electron\"), Su;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  var Tu = new su(\"safari\");\n  var vu = !1,\n      yu = !1;\n\n  function wu(_x16, _x17) {\n    return _wu.apply(this, arguments);\n  }\n\n  function _wu() {\n    _wu = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee335(e, t) {\n      var i, r, n, s, _r92;\n\n      return _regeneratorRuntime.wrap(function _callee335$(_context335) {\n        while (1) {\n          switch (_context335.prev = _context335.next) {\n            case 0:\n              i = 0, r = null;\n\n            case 1:\n              if (!(i < 2)) {\n                _context335.next = 23;\n                break;\n              }\n\n              _context335.prev = 2;\n              _context335.next = 5;\n              return Nu(e, t, i > 0);\n\n            case 5:\n              r = _context335.sent;\n              return _context335.abrupt(\"break\", 23);\n\n            case 9:\n              _context335.prev = 9;\n              _context335.t0 = _context335[\"catch\"](2);\n\n              if (!(_context335.t0 instanceof Ad)) {\n                _context335.next = 13;\n                break;\n              }\n\n              throw vc.error(Xe(s = \"[\".concat(t, \"] \")).call(s, _context335.t0.toString())), _context335.t0;\n\n            case 13:\n              _r92 = Ou(_context335.t0.name || _context335.t0.code || _context335.t0, _context335.t0.message);\n\n              if (!(_r92.code === ad.MEDIA_OPTION_INVALID)) {\n                _context335.next = 20;\n                break;\n              }\n\n              vc.debug(\"[\".concat(t, \"] detect media option invalid, retry\"));\n              i += 1;\n              _context335.next = 19;\n              return Th(500);\n\n            case 19:\n              return _context335.abrupt(\"continue\", 21);\n\n            case 20:\n              throw vc.error(Xe(n = \"[\".concat(t, \"] \")).call(n, _r92.toString())), _r92;\n\n            case 21:\n              _context335.next = 1;\n              break;\n\n            case 23:\n              if (r) {\n                _context335.next = 25;\n                break;\n              }\n\n              throw new Ad(ad.UNEXPECTED_ERROR, \"can not find stream after getUserMedia\");\n\n            case 25:\n              return _context335.abrupt(\"return\", r);\n\n            case 26:\n            case \"end\":\n              return _context335.stop();\n          }\n        }\n      }, _callee335, this, [[2, 9]]);\n    }));\n    return _wu.apply(this, arguments);\n  }\n\n  function Nu(_x18, _x19, _x20) {\n    return _Nu.apply(this, arguments);\n  }\n\n  function _Nu() {\n    _Nu = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee336(e, t, i) {\n      var r, n, _i144, _i145, s, _i146, o, a, c, d, l;\n\n      return _regeneratorRuntime.wrap(function _callee336$(_context336) {\n        while (1) {\n          switch (_context336.prev = _context336.next) {\n            case 0:\n              if (!(!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia)) {\n                _context336.next = 2;\n                break;\n              }\n\n              throw new Ad(ad.NOT_SUPPORTED, \"can not find getUserMedia\");\n\n            case 2:\n              i && (e.video && (delete e.video.width, delete e.video.height), e.screen && (delete e.screen.width, delete e.screen.height));\n              r = Ul(), n = new MediaStream();\n\n              if (!(e.audioSource && n.addTrack(e.audioSource), e.videoSource && n.addTrack(e.videoSource), !e.audio && !e.video && !e.screen)) {\n                _context336.next = 6;\n                break;\n              }\n\n              return _context336.abrupt(\"return\", (vc.debug(\"Using Video Source/ Audio Source\"), n));\n\n            case 6:\n              if (!e.screen) {\n                _context336.next = 64;\n                break;\n              }\n\n              if (!Ru()) {\n                _context336.next = 25;\n                break;\n              }\n\n              if (!e.screen.sourceId) {\n                _context336.next = 17;\n                break;\n              }\n\n              _context336.t0 = bu;\n              _context336.t1 = n;\n              _context336.next = 13;\n              return fu(e.screen.sourceId, e.screen);\n\n            case 13:\n              _context336.t2 = _context336.sent;\n              (0, _context336.t0)(_context336.t1, _context336.t2);\n              _context336.next = 23;\n              break;\n\n            case 17:\n              _context336.t3 = bu;\n              _context336.t4 = n;\n              _context336.next = 21;\n              return mu(e.screen);\n\n            case 21:\n              _context336.t5 = _context336.sent;\n              (0, _context336.t3)(_context336.t4, _context336.t5);\n\n            case 23:\n              _context336.next = 64;\n              break;\n\n            case 25:\n              if (!(Sa() && e.screen.extensionId && e.screen.mandatory)) {\n                _context336.next = 41;\n                break;\n              }\n\n              if (r.getStreamFromExtension) {\n                _context336.next = 28;\n                break;\n              }\n\n              throw new Ad(ad.NOT_SUPPORTED, \"This browser does not support screen sharing\");\n\n            case 28:\n              vc.debug(\"[\".concat(t, '] Screen access on chrome stable, looking for extension\"'));\n              _context336.next = 31;\n              return o = e.screen.extensionId, a = t, new As(function (e, t) {\n                try {\n                  chrome.runtime.sendMessage(o, {\n                    getStream: !0\n                  }, function (i) {\n                    if (!i || !i.streamId) return vc.error(\"[\".concat(a, \"] No response from Chrome Plugin. Plugin not installed properly\"), i), void t(new Ad(ad.CHROME_PLUGIN_NO_RESPONSE, \"No response from Chrome Plugin. Plugin not installed properly\"));\n                    e(i.streamId);\n                  });\n                } catch (e) {\n                  var i;\n                  vc.error(Xe(i = \"[\".concat(a, \"] AgoraRTC screensharing plugin is not accessible(\")).call(i, o, \")\"), e.toString()), t(new Ad(ad.CHROME_PLUGIN_NOT_INSTALL));\n                }\n              });\n\n            case 31:\n              _i144 = _context336.sent;\n              e.screen.mandatory.chromeMediaSourceId = _i144;\n              _context336.t6 = bu;\n              _context336.t7 = n;\n              _context336.next = 37;\n              return navigator.mediaDevices.getUserMedia({\n                video: {\n                  mandatory: e.screen.mandatory\n                }\n              });\n\n            case 37:\n              _context336.t8 = _context336.sent;\n              (0, _context336.t6)(_context336.t7, _context336.t8);\n              _context336.next = 64;\n              break;\n\n            case 41:\n              if (!r.getDisplayMedia) {\n                _context336.next = 53;\n                break;\n              }\n\n              e.screen.mediaSource && Cl(e.screen.mediaSource);\n              _i145 = {\n                width: e.screen.width,\n                height: e.screen.height,\n                frameRate: e.screen.frameRate,\n                displaySurface: \"screen\" === e.screen.mediaSource ? \"monitor\" : e.screen.mediaSource\n              };\n              vc.debug(\"[\".concat(t, \"] getDisplayMedia:\"), ge({\n                video: _i145,\n                audio: !!e.screenAudio\n              }));\n              _context336.t9 = bu;\n              _context336.t10 = n;\n              _context336.next = 49;\n              return navigator.mediaDevices.getDisplayMedia({\n                video: _i145,\n                audio: !!e.screenAudio\n              });\n\n            case 49:\n              _context336.t11 = _context336.sent;\n              (0, _context336.t9)(_context336.t10, _context336.t11);\n              _context336.next = 64;\n              break;\n\n            case 53:\n              if (Ta()) {\n                _context336.next = 55;\n                break;\n              }\n\n              throw vc.error(\"[\".concat(t, \"] This browser does not support screenSharing\")), new Ad(ad.NOT_SUPPORTED, \"This browser does not support screen sharing\");\n\n            case 55:\n              e.screen.mediaSource && Cl(e.screen.mediaSource);\n              _i146 = {\n                video: {\n                  mediaSource: e.screen.mediaSource,\n                  width: e.screen.width,\n                  height: e.screen.height,\n                  frameRate: e.screen.frameRate\n                }\n              };\n              vc.debug(Xe(s = \"[\".concat(t, \"] getUserMedia: \")).call(s, ge(_i146)));\n              _context336.t12 = bu;\n              _context336.t13 = n;\n              _context336.next = 62;\n              return navigator.mediaDevices.getUserMedia(_i146);\n\n            case 62:\n              _context336.t14 = _context336.sent;\n              (0, _context336.t12)(_context336.t13, _context336.t14);\n\n            case 64:\n              if (!(!e.video && !e.audio)) {\n                _context336.next = 66;\n                break;\n              }\n\n              return _context336.abrupt(\"return\", n);\n\n            case 66:\n              c = {\n                video: e.video,\n                audio: e.audio\n              };\n              vc.debug(\"[\".concat(t, \"] GetUserMedia\"), ge(c));\n              pa();\n              l = null;\n              _context336.t15 = Ra() || va() || fa();\n\n              if (!_context336.t15) {\n                _context336.next = 75;\n                break;\n              }\n\n              _context336.next = 74;\n              return Tu.lock();\n\n            case 74:\n              l = _context336.sent;\n\n            case 75:\n              _context336.prev = 75;\n              _context336.next = 78;\n              return navigator.mediaDevices.getUserMedia(c);\n\n            case 78:\n              d = _context336.sent;\n              _context336.next = 84;\n              break;\n\n            case 81:\n              _context336.prev = 81;\n              _context336.t16 = _context336[\"catch\"](75);\n              throw l && l(), _context336.t16;\n\n            case 84:\n              return _context336.abrupt(\"return\", (c.audio && (vu = !0), c.video && (yu = !0), bu(n, d), l && l(), n));\n\n            case 85:\n            case \"end\":\n              return _context336.stop();\n          }\n        }\n      }, _callee336, this, [[75, 81]]);\n    }));\n    return _Nu.apply(this, arguments);\n  }\n\n  function Ou(e, t) {\n    switch (e) {\n      case \"Starting video failed\":\n      case \"OverconstrainedError\":\n      case \"TrackStartError\":\n        var i;\n        return new Ad(ad.MEDIA_OPTION_INVALID, Xe(i = \"\".concat(e, \": \")).call(i, t));\n\n      case \"NotFoundError\":\n      case \"DevicesNotFoundError\":\n        var r;\n        return new Ad(ad.DEVICE_NOT_FOUND, Xe(r = \"\".concat(e, \": \")).call(r, t));\n\n      case \"NotSupportedError\":\n        var n;\n        return new Ad(ad.NOT_SUPPORTED, Xe(n = \"\".concat(e, \": \")).call(n, t));\n\n      case \"NotReadableError\":\n        var s;\n        return new Ad(ad.NOT_READABLE, Xe(s = \"\".concat(e, \": \")).call(s, t));\n\n      case \"InvalidStateError\":\n      case \"NotAllowedError\":\n      case \"PERMISSION_DENIED\":\n      case \"PermissionDeniedError\":\n        var o;\n        return new Ad(ad.PERMISSION_DENIED, Xe(o = \"\".concat(e, \": \")).call(o, t));\n\n      case \"ConstraintNotSatisfiedError\":\n        var a;\n        return new Ad(ad.CONSTRAINT_NOT_SATISFIED, Xe(a = \"\".concat(e, \": \")).call(a, t));\n\n      default:\n        var c;\n        return vc.error(\"getUserMedia unexpected error\", e), new Ad(ad.UNEXPECTED_ERROR, Xe(c = \"\".concat(e, \": \")).call(c, t));\n    }\n  }\n\n  function bu(e, t) {\n    var i = e.getVideoTracks()[0],\n        r = e.getAudioTracks()[0],\n        n = t.getVideoTracks()[0],\n        s = t.getAudioTracks()[0];\n    s && (r && e.removeTrack(r), e.addTrack(s)), n && (i && e.removeTrack(i), e.addTrack(n));\n  }\n\n  var Du = new (\n  /*#__PURE__*/\n  function (_Ll7) {\n    _inherits(_class6, _Ll7);\n\n    function _class6() {\n      var _this41;\n\n      _classCallCheck(this, _class6);\n\n      _this41 = _possibleConstructorReturn(this, _getPrototypeOf(_class6).call(this)), _this41._state = Dd.IDLE, _this41.isAccessMicrophonePermission = !1, _this41.isAccessCameraPermission = !1, _this41.lastAccessMicrophonePermission = !1, _this41.lastAccessCameraPermission = !1, _this41.checkdeviceMatched = !1, _this41.deviceInfoMap = new Li(), _this41.init().then(function () {\n        var e;\n        navigator.mediaDevices.addEventListener && navigator.mediaDevices.addEventListener(\"devicechange\", qs(e = _this41.updateDevicesInfo).call(e, _assertThisInitialized(_assertThisInitialized(_this41)))), window.setInterval(function () {\n          return !ba() && Fc(\"ENUMERATE_DEVICES_INTERVAL\") && _this41.updateDevicesInfo();\n        }, 6e4);\n      }).catch(function (e) {\n        return vc.error(e.toString());\n      });\n      return _this41;\n    }\n\n    _createClass(_class6, [{\n      key: \"enumerateDevices\",\n      value: function () {\n        var _enumerateDevices = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee16(e, t) {\n          var i,\n              r,\n              n,\n              s,\n              o,\n              a,\n              c,\n              d,\n              _t33,\n              _t34,\n              _t35,\n              l,\n              A,\n              u,\n              _e20,\n              h,\n              p,\n              E,\n              _args16 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n            while (1) {\n              switch (_context16.prev = _context16.next) {\n                case 0:\n                  i = _args16.length > 2 && _args16[2] !== undefined ? _args16[2] : !1;\n\n                  if (!(!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices)) {\n                    _context16.next = 3;\n                    break;\n                  }\n\n                  return _context16.abrupt(\"return\", new Ad(ad.NOT_SUPPORTED, \"enumerateDevices() not supported.\").throw());\n\n                case 3:\n                  _context16.next = 5;\n                  return navigator.mediaDevices.enumerateDevices();\n\n                case 5:\n                  r = _context16.sent;\n                  n = this.checkMediaDeviceInfoIsOk(r);\n                  s = !this.isAccessMicrophonePermission && e, o = !this.isAccessCameraPermission && t;\n                  n.audio && (s = !1), n.video && (o = !1);\n                  a = null, c = null, d = null;\n\n                  if (!(!i && (s || o))) {\n                    _context16.next = 65;\n                    break;\n                  }\n\n                  if (!Tu.isLocked) {\n                    _context16.next = 18;\n                    break;\n                  }\n\n                  vc.debug(\"[device manager] wait GUM lock\");\n                  _context16.next = 15;\n                  return Tu.lock();\n\n                case 15:\n                  _context16.t0 = _context16.sent;\n                  (0, _context16.t0)();\n                  vc.debug(\"[device manager] GUM unlock\");\n\n                case 18:\n                  if (!(vu && (s = !1, this.isAccessMicrophonePermission = !0), yu && (o = !1, this.isAccessCameraPermission = !0), vc.debug(\"[device manager] check media device permissions\", e, t, s, o), s && o)) {\n                    _context16.next = 34;\n                    break;\n                  }\n\n                  _context16.prev = 19;\n                  _context16.next = 22;\n                  return navigator.mediaDevices.getUserMedia({\n                    audio: !0,\n                    video: !0\n                  });\n\n                case 22:\n                  d = _context16.sent;\n                  _context16.next = 31;\n                  break;\n\n                case 25:\n                  _context16.prev = 25;\n                  _context16.t1 = _context16[\"catch\"](19);\n                  _t33 = Ou(_context16.t1.name || _context16.t1.code || _context16.t1, _context16.t1.message);\n\n                  if (!(_t33.code === ad.PERMISSION_DENIED)) {\n                    _context16.next = 30;\n                    break;\n                  }\n\n                  throw _t33;\n\n                case 30:\n                  vc.warning(\"getUserMedia failed in getDevices\", _t33);\n\n                case 31:\n                  this.isAccessCameraPermission = !0, this.isAccessMicrophonePermission = !0;\n                  _context16.next = 64;\n                  break;\n\n                case 34:\n                  if (!s) {\n                    _context16.next = 50;\n                    break;\n                  }\n\n                  _context16.prev = 35;\n                  _context16.next = 38;\n                  return navigator.mediaDevices.getUserMedia({\n                    audio: e\n                  });\n\n                case 38:\n                  a = _context16.sent;\n                  _context16.next = 47;\n                  break;\n\n                case 41:\n                  _context16.prev = 41;\n                  _context16.t2 = _context16[\"catch\"](35);\n                  _t34 = Ou(_context16.t2.name || _context16.t2.code || _context16.t2, _context16.t2.message);\n\n                  if (!(_t34.code === ad.PERMISSION_DENIED)) {\n                    _context16.next = 46;\n                    break;\n                  }\n\n                  throw _t34;\n\n                case 46:\n                  vc.warning(\"getUserMedia failed in getDevices\", _t34);\n\n                case 47:\n                  this.isAccessMicrophonePermission = !0;\n                  _context16.next = 64;\n                  break;\n\n                case 50:\n                  if (!o) {\n                    _context16.next = 64;\n                    break;\n                  }\n\n                  _context16.prev = 51;\n                  _context16.next = 54;\n                  return navigator.mediaDevices.getUserMedia({\n                    video: t\n                  });\n\n                case 54:\n                  c = _context16.sent;\n                  _context16.next = 63;\n                  break;\n\n                case 57:\n                  _context16.prev = 57;\n                  _context16.t3 = _context16[\"catch\"](51);\n                  _t35 = Ou(_context16.t3.name || _context16.t3.code || _context16.t3, _context16.t3.message);\n\n                  if (!(_t35.code === ad.PERMISSION_DENIED)) {\n                    _context16.next = 62;\n                    break;\n                  }\n\n                  throw _t35;\n\n                case 62:\n                  vc.warning(\"getUserMedia failed in getDevices\", _t35);\n\n                case 63:\n                  this.isAccessCameraPermission = !0;\n\n                case 64:\n                  vc.debug(\"[device manager] mic permission\", e, \"cam permission\", t);\n\n                case 65:\n                  _context16.prev = 65;\n                  _context16.next = 68;\n                  return navigator.mediaDevices.enumerateDevices();\n\n                case 68:\n                  _e20 = _context16.sent;\n                  return _context16.abrupt(\"return\", (a && Xi(l = a.getTracks()).call(l, function (e) {\n                    return e.stop();\n                  }), c && Xi(A = c.getTracks()).call(A, function (e) {\n                    return e.stop();\n                  }), d && Xi(u = d.getTracks()).call(u, function (e) {\n                    return e.stop();\n                  }), a = null, c = null, d = null, _e20));\n\n                case 72:\n                  _context16.prev = 72;\n                  _context16.t4 = _context16[\"catch\"](65);\n                  a && Xi(h = a.getTracks()).call(h, function (e) {\n                    return e.stop();\n                  }), c && Xi(p = c.getTracks()).call(p, function (e) {\n                    return e.stop();\n                  }), d && Xi(E = d.getTracks()).call(E, function (e) {\n                    return e.stop();\n                  }), a = null, c = null, d = null;\n                  return _context16.abrupt(\"return\", new Ad(ad.ENUMERATE_DEVICES_FAILED, _context16.t4.toString()).throw());\n\n                case 76:\n                case \"end\":\n                  return _context16.stop();\n              }\n            }\n          }, _callee16, this, [[19, 25], [35, 41], [51, 57], [65, 72]]);\n        }));\n\n        function enumerateDevices(_x21, _x22) {\n          return _enumerateDevices.apply(this, arguments);\n        }\n\n        return enumerateDevices;\n      }()\n    }, {\n      key: \"getRecordingDevices\",\n      value: function () {\n        var _getRecordingDevices = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee17() {\n          var e,\n              t,\n              _args17 = arguments;\n          return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n            while (1) {\n              switch (_context17.prev = _context17.next) {\n                case 0:\n                  e = _args17.length > 0 && _args17[0] !== undefined ? _args17[0] : !1;\n                  _context17.next = 3;\n                  return this.enumerateDevices(!0, !1, e);\n\n                case 3:\n                  t = _context17.sent;\n                  return _context17.abrupt(\"return\", Fr(t).call(t, function (e) {\n                    return \"audioinput\" === e.kind;\n                  }));\n\n                case 5:\n                case \"end\":\n                  return _context17.stop();\n              }\n            }\n          }, _callee17, this);\n        }));\n\n        function getRecordingDevices() {\n          return _getRecordingDevices.apply(this, arguments);\n        }\n\n        return getRecordingDevices;\n      }()\n    }, {\n      key: \"getCamerasDevices\",\n      value: function () {\n        var _getCamerasDevices = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee18() {\n          var e,\n              t,\n              _args18 = arguments;\n          return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n            while (1) {\n              switch (_context18.prev = _context18.next) {\n                case 0:\n                  e = _args18.length > 0 && _args18[0] !== undefined ? _args18[0] : !1;\n                  _context18.next = 3;\n                  return this.enumerateDevices(!1, !0, e);\n\n                case 3:\n                  t = _context18.sent;\n                  return _context18.abrupt(\"return\", Fr(t).call(t, function (e) {\n                    return \"videoinput\" === e.kind;\n                  }));\n\n                case 5:\n                case \"end\":\n                  return _context18.stop();\n              }\n            }\n          }, _callee18, this);\n        }));\n\n        function getCamerasDevices() {\n          return _getCamerasDevices.apply(this, arguments);\n        }\n\n        return getCamerasDevices;\n      }()\n    }, {\n      key: \"getSpeakers\",\n      value: function () {\n        var _getSpeakers = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee19() {\n          var e,\n              t,\n              _args19 = arguments;\n          return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n            while (1) {\n              switch (_context19.prev = _context19.next) {\n                case 0:\n                  e = _args19.length > 0 && _args19[0] !== undefined ? _args19[0] : !1;\n                  _context19.next = 3;\n                  return this.enumerateDevices(!0, !1, e);\n\n                case 3:\n                  t = _context19.sent;\n                  return _context19.abrupt(\"return\", Fr(t).call(t, function (e) {\n                    return \"audiooutput\" === e.kind;\n                  }));\n\n                case 5:\n                case \"end\":\n                  return _context19.stop();\n              }\n            }\n          }, _callee19, this);\n        }));\n\n        function getSpeakers() {\n          return _getSpeakers.apply(this, arguments);\n        }\n\n        return getSpeakers;\n      }()\n    }, {\n      key: \"searchDeviceNameById\",\n      value: function searchDeviceNameById(e) {\n        var t = this.deviceInfoMap.get(e);\n        return t ? t.device.label || t.device.deviceId : null;\n      }\n    }, {\n      key: \"searchDeviceIdByName\",\n      value: function searchDeviceIdByName(e) {\n        var t;\n        var i = null;\n        return Xi(t = this.deviceInfoMap).call(t, function (t) {\n          t.device.label === e && (i = t.device.deviceId);\n        }), i;\n      }\n    }, {\n      key: \"getDeviceById\",\n      value: function () {\n        var _getDeviceById = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee20(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n            while (1) {\n              switch (_context20.prev = _context20.next) {\n                case 0:\n                  _context20.next = 2;\n                  return this.enumerateDevices(!0, !0, !0);\n\n                case 2:\n                  t = _context20.sent;\n                  i = Vs(t).call(t, function (t) {\n                    return t.deviceId === e;\n                  });\n\n                  if (i) {\n                    _context20.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.DEVICE_NOT_FOUND, \"deviceId: \".concat(e));\n\n                case 6:\n                  return _context20.abrupt(\"return\", i);\n\n                case 7:\n                case \"end\":\n                  return _context20.stop();\n              }\n            }\n          }, _callee20, this);\n        }));\n\n        function getDeviceById(_x23) {\n          return _getDeviceById.apply(this, arguments);\n        }\n\n        return getDeviceById;\n      }()\n    }, {\n      key: \"init\",\n      value: function () {\n        var _init = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee21() {\n          return _regeneratorRuntime.wrap(function _callee21$(_context21) {\n            while (1) {\n              switch (_context21.prev = _context21.next) {\n                case 0:\n                  this.state = Dd.INITING;\n                  _context21.prev = 1;\n                  _context21.next = 4;\n                  return this.updateDevicesInfo();\n\n                case 4:\n                  this.state = Dd.INITEND;\n                  _context21.next = 11;\n                  break;\n\n                case 7:\n                  _context21.prev = 7;\n                  _context21.t0 = _context21[\"catch\"](1);\n\n                  if (vc.warning(\"Device Detection functionality cannot start properly.\", _context21.t0.toString()), this.state = Dd.IDLE, !function () {\n                    if (\"boolean\" == typeof isSecureContext) return isSecureContext;\n                    return \"https:\" === location.protocol || \"file:\" === location.protocol || \"localhost\" === location.hostname || \"127.0.0.1\" === location.hostname || \"::1\" === location.hostname;\n                  }()) {\n                    new Ad(ad.WEB_SECURITY_RESTRICT, \"Your context is limited by web security, please try using https protocol or localhost.\").throw();\n                  }\n\n                  throw _context21.t0;\n\n                case 11:\n                case \"end\":\n                  return _context21.stop();\n              }\n            }\n          }, _callee21, this, [[1, 7]]);\n        }));\n\n        function init() {\n          return _init.apply(this, arguments);\n        }\n\n        return init;\n      }()\n    }, {\n      key: \"updateDevicesInfo\",\n      value: function () {\n        var _updateDevicesInfo = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee22() {\n          var _this42 = this;\n\n          var e, t, i, r, _e21, _i22, n, s, o;\n\n          return _regeneratorRuntime.wrap(function _callee22$(_context22) {\n            while (1) {\n              switch (_context22.prev = _context22.next) {\n                case 0:\n                  _context22.next = 2;\n                  return this.enumerateDevices(!0, !0, !0);\n\n                case 2:\n                  t = _context22.sent;\n                  i = La();\n                  r = [];\n\n                  if (t[0] && t[0].label && !1 === this.checkdeviceMatched) {\n                    this.checkdeviceMatched = !0;\n                    _e21 = Vs(t).call(t, function (e) {\n                      return \"audioinput\" === e.kind && \"default\" === e.deviceId;\n                    }), _i22 = Vs(t).call(t, function (e) {\n                      return \"audiooutput\" === e.kind && \"default\" === e.deviceId;\n                    });\n                    if (_e21 && _i22) {\n                      if (_i22.groupId === _e21.groupId) {\n                        vc.debug(Xe(n = \"[device-check] default input \".concat(_e21.label, \" and output \")).call(n, _i22.label, \" is the same group\"));\n                      } else {\n                        vc.warning(Xe(s = \"[device-check] default input \".concat(_e21.label, \" and output \")).call(s, _i22.label, \" is not the same group\"));\n                      }\n                    } else vc.debug(\"[device-check] default input or output not found\");\n                  }\n\n                  o = this.checkMediaDeviceInfoIsOk(t);\n\n                  if (!(Xi(t).call(t, function (e) {\n                    if (!e.deviceId) return;\n\n                    var t = _this42.deviceInfoMap.get(e.deviceId);\n\n                    if (\"ACTIVE\" !== (t ? t.state : \"INACTIVE\")) {\n                      var _t36 = {\n                        initAt: i,\n                        updateAt: i,\n                        device: e,\n                        state: \"ACTIVE\"\n                      };\n                      _this42.deviceInfoMap.set(e.deviceId, _t36), r.push(_t36);\n                    }\n\n                    t && (t.updateAt = i);\n                  }), Xi(e = this.deviceInfoMap).call(e, function (e, t) {\n                    \"ACTIVE\" === e.state && e.updateAt !== i && (e.state = \"INACTIVE\", r.push(e));\n                  }), this.state !== Dd.INITEND)) {\n                    _context22.next = 9;\n                    break;\n                  }\n\n                  return _context22.abrupt(\"return\", (o.audio && (this.lastAccessMicrophonePermission = !0, this.isAccessMicrophonePermission = !0), void (o.video && (this.lastAccessCameraPermission = !0, this.isAccessCameraPermission = !0))));\n\n                case 9:\n                  Xi(r).call(r, function (e) {\n                    switch (e.device.kind) {\n                      case \"audioinput\":\n                        _this42.lastAccessMicrophonePermission && _this42.isAccessMicrophonePermission && _this42.emit(kd.RECORDING_DEVICE_CHANGED, e);\n                        break;\n\n                      case \"videoinput\":\n                        _this42.lastAccessCameraPermission && _this42.isAccessCameraPermission && _this42.emit(kd.CAMERA_DEVICE_CHANGED, e);\n                        break;\n\n                      case \"audiooutput\":\n                        _this42.lastAccessMicrophonePermission && _this42.isAccessMicrophonePermission && _this42.emit(kd.PLAYOUT_DEVICE_CHANGED, e);\n                    }\n                  }), o.audio && (this.lastAccessMicrophonePermission = !0, this.isAccessMicrophonePermission = !0), o.video && (this.lastAccessCameraPermission = !0, this.isAccessCameraPermission = !0);\n\n                case 10:\n                case \"end\":\n                  return _context22.stop();\n              }\n            }\n          }, _callee22, this);\n        }));\n\n        function updateDevicesInfo() {\n          return _updateDevicesInfo.apply(this, arguments);\n        }\n\n        return updateDevicesInfo;\n      }()\n    }, {\n      key: \"checkMediaDeviceInfoIsOk\",\n      value: function checkMediaDeviceInfoIsOk(e) {\n        var t = Fr(e).call(e, function (e) {\n          return \"audioinput\" === e.kind;\n        }),\n            i = Fr(e).call(e, function (e) {\n          return \"videoinput\" === e.kind;\n        }),\n            r = {\n          audio: !1,\n          video: !1\n        };\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = t[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _e22 = _step2.value;\n\n            if (_e22.label && _e22.deviceId) {\n              r.audio = !0;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = i[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _e23 = _step3.value;\n\n            if (_e23.label && _e23.deviceId) {\n              r.video = !0;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        return r;\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        e !== this._state && (this.emit(kd.STATE_CHANGE, e), this._state = e);\n      }\n    }]);\n\n    return _class6;\n  }(Ll))();\n  var ku = [\"play\", \"playing\", \"loadeddata\", \"canplay\", \"pause\", \"stalled\", \"suspend\", \"waiting\", \"abort\", \"emptied\", \"ended\"],\n      Lu = new (\n  /*#__PURE__*/\n  function () {\n    function _class7() {\n      var _this43 = this;\n\n      _classCallCheck(this, _class7);\n\n      this.elementMap = new Li(), this.elementStateMap = new Li(), this.elementsNeedToResume = [], this.sinkIdMap = new Li(), this.autoResumeAfterInterruption = function () {\n        var e, t;\n        Xi(e = BA(kA(t = _this43.elementMap).call(t))).call(e, function (_ref20) {\n          var _ref21 = _slicedToArray(_ref20, 2),\n              e = _ref21[0],\n              t = _ref21[1];\n\n          var i = _this43.elementStateMap.get(e),\n              r = t.srcObject.getAudioTracks()[0];\n\n          ya() ? r && \"live\" === r.readyState && \"running\" === Au.curState && (vc.debug(\"auto resume after interruption for iOS 15\"), t.pause(), t.play()) : i && \"paused\" === i && r && \"live\" === r.readyState && \"running\" === Au.curState && (vc.debug(\"auto resume after interruption for iOS\"), t.play());\n        });\n      }, this.autoResumeAfterInterruptionOnIOS15 = function () {\n        var e, t;\n        Xi(e = BA(kA(t = _this43.elementMap).call(t))).call(e, function (_ref22) {\n          var _ref23 = _slicedToArray(_ref22, 2),\n              e = _ref23[0],\n              t = _ref23[1];\n\n          var i = t.srcObject.getAudioTracks()[0];\n          i && \"live\" === i.readyState && (vc.debug(\"auto resume after interruption inside autoResumeAfterInterruptionOnIOS15\"), t.pause(), t.play());\n        });\n      }, this.autoResumeAudioElement(), Au.on(cu.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), Au.on(cu.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15), Au.on(cu.STATE_CHANGE, function () {\n        va() && \"suspended\" === Au.prevState && \"running\" === Au.curState && _this43.autoResumeAfterInterruption();\n      });\n    }\n\n    _createClass(_class7, [{\n      key: \"setSinkID\",\n      value: function () {\n        var _setSinkID = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee23(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee23$(_context23) {\n            while (1) {\n              switch (_context23.prev = _context23.next) {\n                case 0:\n                  i = this.elementMap.get(e);\n\n                  if (!(this.sinkIdMap.set(e, t), i)) {\n                    _context23.next = 10;\n                    break;\n                  }\n\n                  _context23.prev = 2;\n                  _context23.next = 5;\n                  return i.setSinkId(t);\n\n                case 5:\n                  _context23.next = 10;\n                  break;\n\n                case 7:\n                  _context23.prev = 7;\n                  _context23.t0 = _context23[\"catch\"](2);\n                  throw new Ad(ad.PERMISSION_DENIED, \"can not set sink id: \" + _context23.t0.toString());\n\n                case 10:\n                case \"end\":\n                  return _context23.stop();\n              }\n            }\n          }, _callee23, this, [[2, 7]]);\n        }));\n\n        function setSinkID(_x24, _x25) {\n          return _setSinkID.apply(this, arguments);\n        }\n\n        return setSinkID;\n      }()\n    }, {\n      key: \"play\",\n      value: function play(e, t, i, r) {\n        var _this44 = this;\n\n        if (this.elementMap.has(t)) return;\n        var n = document.createElement(\"audio\");\n        n.autoplay = !0, n.srcObject = new MediaStream([e]), this.bindAudioElementEvents(t, n), this.elementMap.set(t, n), this.elementStateMap.set(t, dd.INIT), this.setVolume(t, i);\n        var s = this.sinkIdMap.get(t);\n        if (s) try {\n          n.setSinkId(s).catch(function (e) {\n            vc.warning(\"[\".concat(t, \"] set sink id failed\"), e.toString());\n          });\n        } catch (e) {\n          vc.warning(\"[\".concat(t, \"] set sink id failed\"), e.toString());\n        }\n        var o = n.play();\n        o && o.then && o.catch(function (e) {\n          r && iu.autoplayFailed(r, \"audio\", e.message, t), vc.warning(\"audio element play warning\", e.toString()), _this44.elementMap.has(t) && \"NotAllowedError\" === e.name && (vc.warning(\"detected audio element autoplay failed\"), _this44.elementsNeedToResume.push(n), Qh(function () {\n            _this44.onAutoplayFailed && _this44.onAutoplayFailed(), zA();\n          }));\n        });\n      }\n    }, {\n      key: \"updateTrack\",\n      value: function updateTrack(e, t) {\n        var i = this.elementMap.get(e);\n        i && (i.srcObject = new MediaStream([t]));\n      }\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying(e) {\n        return this.elementMap.has(e);\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(e, t) {\n        var i = this.elementMap.get(e);\n        i && (t = Math.max(0, Math.min(100, t)), i.volume = t / 100);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop(e) {\n        var t, i;\n        var r = this.elementMap.get(e);\n        if (this.sinkIdMap.delete(e), !r) return;\n        var n = Os(t = this.elementsNeedToResume).call(t, r);\n        Ss(i = this.elementsNeedToResume).call(i, n, 1), r.srcObject = null, r.remove(), this.elementMap.delete(e), this.elementStateMap.delete(e);\n      }\n    }, {\n      key: \"bindAudioElementEvents\",\n      value: function bindAudioElementEvents(e, t) {\n        var _this45 = this;\n\n        Xi(ku).call(ku, function (i) {\n          t.addEventListener(i, function (t) {\n            var i, r;\n\n            var n = _this45.elementStateMap.get(e),\n                s = \"pause\" === t.type ? \"paused\" : t.type;\n\n            vc.debug(Xe(i = Xe(r = \"[\".concat(e, \"] audio-element-status change \")).call(r, n, \" => \")).call(i, s)), _this45.elementStateMap.set(e, s);\n          });\n        });\n      }\n    }, {\n      key: \"getPlayerState\",\n      value: function getPlayerState(e) {\n        return this.elementStateMap.get(e) || \"uninit\";\n      }\n    }, {\n      key: \"autoResumeAudioElement\",\n      value: function autoResumeAudioElement() {\n        var _this46 = this;\n\n        var e = function e() {\n          var e;\n          Xi(e = _this46.elementsNeedToResume).call(e, function (e) {\n            e.play().then(function (e) {\n              vc.debug(\"Auto resume audio element success\");\n            }).catch(function (e) {\n              vc.warning(\"Auto resume audio element failed!\", e);\n            });\n          }), _this46.elementsNeedToResume = [];\n        };\n\n        new As(function (e) {\n          document.body ? e() : window.addEventListener(\"load\", function () {\n            return e();\n          });\n        }).then(function () {\n          var t = pa();\n          \"Android\" !== t.os || \"Chrome\" !== t.name && t.name !== Aa.WECHAT ? (document.body.addEventListener(\"touchstart\", e, !0), document.body.addEventListener(\"mousedown\", e, !0)) : document.body.addEventListener(\"click\", e, !0);\n        });\n      }\n    }]);\n\n    return _class7;\n  }())();\n\n  function Pu() {\n    return function (e, t, i) {\n      var r = e[t];\n      \"function\" == typeof r && (i.value = function () {\n        this._isClosed && new Ad(ad.INVALID_OPERATION, \"[\".concat(this.getTrackId(), \"] cannot operate a closed track\")).print(\"warning\");\n\n        for (var _len13 = arguments.length, e = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n          e[_key13] = arguments[_key13];\n        }\n\n        var t = r.apply(this, e);\n        return t instanceof As ? new As(function (e, i) {\n          t.then(e).catch(i);\n        }) : t;\n      });\n    };\n  }\n\n  function Bu(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Mu(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = Bu(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = Bu(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var Uu = function Uu(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      Qu = function Qu(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var Fu =\n  /*#__PURE__*/\n  function (_au) {\n    _inherits(Fu, _au);\n\n    function Fu(e, t, i) {\n      var _this47;\n\n      _classCallCheck(this, Fu);\n\n      _this47 = _possibleConstructorReturn(this, _getPrototypeOf(Fu).call(this, e, i)), _this47.trackMediaType = \"audio\", _this47._enabled = !0, _this47._volume = 100, _this47._useAudioElement = !1, _this47._bypassWebAudio = !1, _this47._encoderConfig = t, _this47._source = new Iu(e);\n      return _this47;\n    }\n\n    _createClass(Fu, [{\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        var _this48 = this;\n\n        pd(e, \"volume\", 0, 1e3);\n        var t = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.LOCAL_AUDIO_TRACK_SET_VOLUME,\n          options: [this.getTrackId(), e]\n        }, 300);\n        this._volume = e, this._source.setVolume(e / 100), this._useAudioElement && Lu.setVolume(this.getTrackId(), e);\n\n        try {\n          if (this._bypassWebAudio) return vc.debug(\"[\".concat(this.getTrackId(), \"] setVolume returned because no pass through WebAudio.\")), void t.onSuccess();\n\n          var _e24 = this._source.createOutputTrack();\n\n          this._mediaStreamTrack !== _e24 && (this._mediaStreamTrack = _e24, Lh(this, gl.NEED_REPLACE_TRACK, this).then(function () {\n            vc.debug(\"[\".concat(_this48.getTrackId(), \"] replace web audio track success\"));\n          }).catch(function (e) {\n            vc.warning(\"[\".concat(_this48.getTrackId(), \"] replace web audio track failed\"), e);\n          }));\n        } catch (e) {}\n\n        t.onSuccess();\n      }\n    }, {\n      key: \"getVolumeLevel\",\n      value: function getVolumeLevel() {\n        return this._source.getAccurateVolumeLevel();\n      }\n    }, {\n      key: \"setPlaybackDevice\",\n      value: function () {\n        var _setPlaybackDevice = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee24(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee24$(_context24) {\n            while (1) {\n              switch (_context24.prev = _context24.next) {\n                case 0:\n                  t = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.REMOTE_AUDIO_SET_OUTPUT_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._useAudioElement) {\n                    _context24.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n\n                case 3:\n                  _context24.prev = 3;\n                  _context24.next = 6;\n                  return Lu.setSinkID(this.getTrackId(), e);\n\n                case 6:\n                  _context24.next = 11;\n                  break;\n\n                case 8:\n                  _context24.prev = 8;\n                  _context24.t0 = _context24[\"catch\"](3);\n                  throw t.onError(_context24.t0), _context24.t0;\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context24.stop();\n              }\n            }\n          }, _callee24, this, [[3, 8]]);\n        }));\n\n        function setPlaybackDevice(_x26) {\n          return _setPlaybackDevice.apply(this, arguments);\n        }\n\n        return setPlaybackDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee25(e, t, i) {\n          var r;\n          return _regeneratorRuntime.wrap(function _callee25$(_context25) {\n            while (1) {\n              switch (_context25.prev = _context25.next) {\n                case 0:\n                  if (i) {\n                    _context25.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context25.next = 3;\n                    break;\n                  }\n\n                  return _context25.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  if (!(vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), e)) {\n                    _context25.next = 18;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context25.prev = 6;\n                  i || (this._enabled = !0);\n                  _context25.next = 10;\n                  return Lh(this, gl.NEED_ENABLE_TRACK, this);\n\n                case 10:\n                  vc.info(Xe(r = \"[\".concat(this.getTrackId(), \"] setEnabled to \")).call(r, e, \" success\"));\n                  _context25.next = 16;\n                  break;\n\n                case 13:\n                  _context25.prev = 13;\n                  _context25.t0 = _context25[\"catch\"](6);\n                  throw i || (this._enabled = !1), vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context25.t0.toString()), _context25.t0;\n\n                case 16:\n                  _context25.next = 27;\n                  break;\n\n                case 18:\n                  this._originMediaStreamTrack.enabled = !1, i || (this._enabled = !1);\n                  _context25.prev = 19;\n                  _context25.next = 22;\n                  return Lh(this, gl.NEED_DISABLE_TRACK, this);\n\n                case 22:\n                  _context25.next = 27;\n                  break;\n\n                case 24:\n                  _context25.prev = 24;\n                  _context25.t1 = _context25[\"catch\"](19);\n                  throw i || (this._enabled = !0), vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context25.t1.toString()), _context25.t1;\n\n                case 27:\n                case \"end\":\n                  return _context25.stop();\n              }\n            }\n          }, _callee25, this, [[6, 13], [19, 24]]);\n        }));\n\n        function setEnabled(_x27, _x28, _x29) {\n          return _setEnabled.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setMuted\",\n      value: function () {\n        var _setMuted = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee26(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee26$(_context26) {\n            while (1) {\n              switch (_context26.prev = _context26.next) {\n                case 0:\n                  _context26.t0 = e !== this._muted;\n\n                  if (!_context26.t0) {\n                    _context26.next = 13;\n                    break;\n                  }\n\n                  this.stateCheck(\"muted\", e);\n                  this._muted = e;\n                  this._mediaStreamTrack.enabled = !e;\n                  vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] start set muted: \")).call(t, e));\n\n                  if (!e) {\n                    _context26.next = 11;\n                    break;\n                  }\n\n                  _context26.next = 9;\n                  return Lh(this, gl.NEED_MUTE_TRACK, this);\n\n                case 9:\n                  _context26.next = 13;\n                  break;\n\n                case 11:\n                  _context26.next = 13;\n                  return Lh(this, gl.NEED_UNMUTE_TRACK, this);\n\n                case 13:\n                case \"end\":\n                  return _context26.stop();\n              }\n            }\n          }, _callee26, this);\n        }));\n\n        function setMuted(_x30) {\n          return _setMuted.apply(this, arguments);\n        }\n\n        return setMuted;\n      }()\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead\");\n        }, \"localAudioTrackGetStatsWarning\");\n        var e = Ph(this, gl.GET_STATS);\n        return e || Mu({}, zd);\n      }\n    }, {\n      key: \"setAudioFrameCallback\",\n      value: function setAudioFrameCallback(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4096;\n        if (!e) return this._source.removeAllListeners(Hd.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n        this._source.startGetAudioBuffer(t), this._source.removeAllListeners(Hd.ON_AUDIO_BUFFER), this._source.on(Hd.ON_AUDIO_BUFFER, function (t) {\n          return e(t);\n        });\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.LOCAL_AUDIO_TRACK_PLAY,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._useAudioElement ? (vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback in element\")), Lu.play(this._mediaStreamTrack, this.getTrackId(), this._volume)) : this._source.play(), e.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.LOCAL_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._useAudioElement ? Lu.stop(this.getTrackId()) : this._source.stop(), e.onSuccess();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(Fu.prototype), \"close\", this).call(this), this._source.destroy();\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && Lu.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function () {\n        var _updateOriginMediaStreamTrack3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee27(e, t) {\n          return _regeneratorRuntime.wrap(function _callee27$(_context27) {\n            while (1) {\n              switch (_context27.prev = _context27.next) {\n                case 0:\n                  _context27.t0 = this._originMediaStreamTrack !== e;\n\n                  if (!_context27.t0) {\n                    _context27.next = 13;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded);\n\n                  e.addEventListener(\"ended\", this._handleTrackEnded);\n                  t && this._originMediaStreamTrack.stop();\n                  this._originMediaStreamTrack = e;\n\n                  this._source.updateTrack(this._originMediaStreamTrack);\n\n                  _context27.t1 = this._mediaStreamTrack !== this._source.outputTrack;\n\n                  if (!_context27.t1) {\n                    _context27.next = 13;\n                    break;\n                  }\n\n                  this._mediaStreamTrack = this._originMediaStreamTrack;\n\n                  this._updatePlayerSource();\n\n                  _context27.next = 13;\n                  return Lh(this, gl.NEED_REPLACE_TRACK, this);\n\n                case 13:\n                case \"end\":\n                  return _context27.stop();\n              }\n            }\n          }, _callee27, this);\n        }));\n\n        function _updateOriginMediaStreamTrack(_x31, _x32) {\n          return _updateOriginMediaStreamTrack3.apply(this, arguments);\n        }\n\n        return _updateOriginMediaStreamTrack;\n      }()\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function renewMediaStreamTrack() {\n        return As.resolve(void 0);\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return this._useAudioElement ? Lu.isPlaying(this.getTrackId()) : this._source.isPlayed;\n      }\n    }]);\n\n    return Fu;\n  }(au);\n\n  Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [String]), Qu(\"design:returntype\", As)], Fu.prototype, \"setPlaybackDevice\", null), Uu([ou(\"LocalAudioTrack\", \"_enabledMutex\"), Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Boolean, Object, Boolean]), Qu(\"design:returntype\", As)], Fu.prototype, \"setEnabled\", null), Uu([ou(\"LocalAudioTrack\", \"_enabledMutex\"), Pu(), tu({\n    report: iu\n  }), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Boolean]), Qu(\"design:returntype\", As)], Fu.prototype, \"setMuted\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", Object)], Fu.prototype, \"getStats\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Object, Number]), Qu(\"design:returntype\", void 0)], Fu.prototype, \"setAudioFrameCallback\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", void 0)], Fu.prototype, \"play\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", void 0)], Fu.prototype, \"stop\", null);\n\n  var xu =\n  /*#__PURE__*/\n  function (_Fu) {\n    _inherits(xu, _Fu);\n\n    function xu(e, t, i, r) {\n      var _this49;\n\n      _classCallCheck(this, xu);\n\n      _this49 = _possibleConstructorReturn(this, _getPrototypeOf(xu).call(this, e, t.encoderConfig ? Uc(t.encoderConfig) : {}, r)), _this49._deviceName = \"default\", _this49._enabled = !0, _this49._config = t, _this49._constraints = i, _this49._deviceName = e.label, \"boolean\" == typeof t.bypassWebAudio && (_this49._bypassWebAudio = t.bypassWebAudio), ya() && Au.bindInterruptDetectorTrack(_assertThisInitialized(_assertThisInitialized(_this49)));\n      return _this49;\n    }\n\n    _createClass(xu, [{\n      key: \"setDevice\",\n      value: function () {\n        var _setDevice = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee28(e) {\n          var t, i, r, _t37, _i23, _r18, _t38;\n\n          return _regeneratorRuntime.wrap(function _callee28$(_context28) {\n            while (1) {\n              switch (_context28.prev = _context28.next) {\n                case 0:\n                  r = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.MIC_AUDIO_TRACK_SET_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (!(vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] start set device to \")).call(t, e)), this._enabled)) {\n                    _context28.next = 36;\n                    break;\n                  }\n\n                  _context28.prev = 2;\n                  _context28.next = 5;\n                  return Du.getDeviceById(e);\n\n                case 5:\n                  _t37 = _context28.sent;\n                  _i23 = {};\n                  _i23.audio = Mu({}, this._constraints), _i23.audio.deviceId = {\n                    exact: e\n                  }, this._originMediaStreamTrack.stop();\n                  _r18 = null;\n                  _context28.prev = 9;\n                  _context28.next = 12;\n                  return wu(_i23, this.getTrackId());\n\n                case 12:\n                  _r18 = _context28.sent;\n                  _context28.next = 24;\n                  break;\n\n                case 15:\n                  _context28.prev = 15;\n                  _context28.t0 = _context28[\"catch\"](9);\n                  vc.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context28.t0.toString());\n                  _context28.next = 20;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 20:\n                  _r18 = _context28.sent;\n                  _context28.next = 23;\n                  return this._updateOriginMediaStreamTrack(_r18.getAudioTracks()[0], !1);\n\n                case 23:\n                  throw _context28.t0;\n\n                case 24:\n                  _context28.next = 26;\n                  return this._updateOriginMediaStreamTrack(_r18.getAudioTracks()[0], !1);\n\n                case 26:\n                  this._deviceName = _t37.label;\n                  this._config.microphoneId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context28.next = 34;\n                  break;\n\n                case 31:\n                  _context28.prev = 31;\n                  _context28.t1 = _context28[\"catch\"](2);\n                  throw r.onError(_context28.t1), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context28.t1.toString()), _context28.t1;\n\n                case 34:\n                  _context28.next = 46;\n                  break;\n\n                case 36:\n                  _context28.prev = 36;\n                  _context28.next = 39;\n                  return Du.getDeviceById(e);\n\n                case 39:\n                  _t38 = _context28.sent;\n                  this._deviceName = _t38.label, this._config.microphoneId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context28.next = 46;\n                  break;\n\n                case 43:\n                  _context28.prev = 43;\n                  _context28.t2 = _context28[\"catch\"](36);\n                  throw r.onError(_context28.t2), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context28.t2.toString()), _context28.t2;\n\n                case 46:\n                  r.onSuccess(), vc.info(Xe(i = \"[\".concat(this.getTrackId(), \"] set device to \")).call(i, e, \" success\"));\n\n                case 47:\n                case \"end\":\n                  return _context28.stop();\n              }\n            }\n          }, _callee28, this, [[2, 31], [9, 15], [36, 43]]);\n        }));\n\n        function setDevice(_x33) {\n          return _setDevice.apply(this, arguments);\n        }\n\n        return setDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee29(e, t, i) {\n          var r, n, _e25;\n\n          return _regeneratorRuntime.wrap(function _callee29$(_context29) {\n            while (1) {\n              switch (_context29.prev = _context29.next) {\n                case 0:\n                  if (!t) {\n                    _context29.next = 5;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this.getTrackId, \"] setEnabled false (do not close microphone)\"));\n                  _context29.next = 4;\n                  return _get(_getPrototypeOf(xu.prototype), \"setEnabled\", this).call(this, e);\n\n                case 4:\n                  return _context29.abrupt(\"return\", _context29.sent);\n\n                case 5:\n                  if (i) {\n                    _context29.next = 9;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context29.next = 8;\n                    break;\n                  }\n\n                  return _context29.abrupt(\"return\");\n\n                case 8:\n                  this.stateCheck(\"enabled\", e);\n\n                case 9:\n                  if (!(vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context29.next = 20;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), i || (this._enabled = !1);\n                  _context29.prev = 11;\n                  _context29.next = 14;\n                  return Lh(this, gl.NEED_DISABLE_TRACK, this);\n\n                case 14:\n                  _context29.next = 19;\n                  break;\n\n                case 16:\n                  _context29.prev = 16;\n                  _context29.t0 = _context29[\"catch\"](11);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled false failed\"), _context29.t0.toString()), _context29.t0;\n\n                case 19:\n                  return _context29.abrupt(\"return\");\n\n                case 20:\n                  r = Mu({}, this._constraints), n = Du.searchDeviceIdByName(this._deviceName);\n                  n && !r.deviceId && (r.deviceId = n);\n                  _context29.prev = 22;\n                  i || (this._enabled = !0);\n                  _context29.next = 26;\n                  return wu({\n                    audio: this._constraints\n                  }, this.getTrackId());\n\n                case 26:\n                  _e25 = _context29.sent;\n                  _context29.next = 29;\n                  return this._updateOriginMediaStreamTrack(_e25.getAudioTracks()[0], !1);\n\n                case 29:\n                  _context29.next = 31;\n                  return Lh(this, gl.NEED_ENABLE_TRACK, this);\n\n                case 31:\n                  _context29.next = 36;\n                  break;\n\n                case 33:\n                  _context29.prev = 33;\n                  _context29.t1 = _context29[\"catch\"](22);\n                  throw i || (this._enabled = !1), vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled true failed\"), _context29.t1.toString()), _context29.t1;\n\n                case 36:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled success\"));\n\n                case 37:\n                case \"end\":\n                  return _context29.stop();\n              }\n            }\n          }, _callee29, this, [[11, 16], [22, 33]]);\n        }));\n\n        function setEnabled(_x34, _x35, _x36) {\n          return _setEnabled2.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(xu.prototype), \"close\", this).call(this), ya() && Au.unbindInterruptDetectorTrack(this);\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        var _this50 = this;\n\n        if ((va() || Oa()) && this._enabled && !this._isClosed && Au.duringInterruption) {\n          var _e26 =\n          /*#__PURE__*/\n          function () {\n            var _ref24 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee30() {\n              return _regeneratorRuntime.wrap(function _callee30$(_context30) {\n                while (1) {\n                  switch (_context30.prev = _context30.next) {\n                    case 0:\n                      Au.off(cu.IOS_INTERRUPTION_END, _e26);\n                      _context30.t0 = _this50._enabled && !_this50._isClosed;\n\n                      if (!_context30.t0) {\n                        _context30.next = 8;\n                        break;\n                      }\n\n                      vc.debug(\"[\".concat(_this50.getTrackId(), \"] try capture microphone media device for interrupted iOS device.\"));\n                      _context30.next = 6;\n                      return _this50.setEnabled(!1);\n\n                    case 6:\n                      _context30.next = 8;\n                      return _this50.setEnabled(!0);\n\n                    case 8:\n                    case \"end\":\n                      return _context30.stop();\n                  }\n                }\n              }, _callee30, this);\n            }));\n\n            return function _e26() {\n              return _ref24.apply(this, arguments);\n            };\n          }();\n\n          Au.on(cu.IOS_INTERRUPTION_END, _e26);\n        } else vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(Il.TRACK_ENDED);\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee31() {\n          var e, t, i;\n          return _regeneratorRuntime.wrap(function _callee31$(_context31) {\n            while (1) {\n              switch (_context31.prev = _context31.next) {\n                case 0:\n                  e = Mu({}, this._constraints), t = Du.searchDeviceIdByName(this._deviceName);\n                  t && !e.deviceId && (e.deviceId = t);\n                  _context31.next = 4;\n                  return wu({\n                    audio: this._constraints\n                  }, this.getTrackId());\n\n                case 4:\n                  i = _context31.sent;\n                  _context31.next = 7;\n                  return this._updateOriginMediaStreamTrack(i.getAudioTracks()[0], !0);\n\n                case 7:\n                case \"end\":\n                  return _context31.stop();\n              }\n            }\n          }, _callee31, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }]);\n\n    return xu;\n  }(Fu);\n\n  Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [String]), Qu(\"design:returntype\", As)], xu.prototype, \"setDevice\", null), Uu([ou(\"MicrophoneAudioTrack\", \"_enabledMutex\"), Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Boolean, Boolean, Boolean]), Qu(\"design:returntype\", As)], xu.prototype, \"setEnabled\", null);\n\n  var Vu =\n  /*#__PURE__*/\n  function (_Fu2) {\n    _inherits(Vu, _Fu2);\n\n    function Vu(e, t, i, r) {\n      var _this51;\n\n      _classCallCheck(this, Vu);\n\n      _this51 = _possibleConstructorReturn(this, _getPrototypeOf(Vu).call(this, t.createOutputTrack(), i, r)), _this51.source = e, _this51._bufferSource = t, _this51._bufferSource.on(Hd.AUDIO_SOURCE_STATE_CHANGE, function (e) {\n        _this51.emit(Il.SOURCE_STATE_CHANGE, e);\n      });\n\n      try {\n        _this51._mediaStreamTrack = _this51._source.createOutputTrack();\n      } catch (e) {}\n\n      return _this51;\n    }\n\n    _createClass(Vu, [{\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this._bufferSource.currentTime;\n      }\n    }, {\n      key: \"startProcessAudioBuffer\",\n      value: function startProcessAudioBuffer(e) {\n        var t = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.BUFFER_AUDIO_TRACK_START,\n          options: [this.getTrackId(), e, this.duration]\n        });\n        e && this._bufferSource.updateOptions(e), this._bufferSource.startProcessAudioBuffer(), t.onSuccess();\n      }\n    }, {\n      key: \"pauseProcessAudioBuffer\",\n      value: function pauseProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.BUFFER_AUDIO_TRACK_PAUSE,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.pauseProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"seekAudioBuffer\",\n      value: function seekAudioBuffer(e) {\n        var t = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.BUFFER_AUDIO_TRACK_SEEK,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.seekAudioBuffer(e), t.onSuccess();\n      }\n    }, {\n      key: \"resumeProcessAudioBuffer\",\n      value: function resumeProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.BUFFER_AUDIO_TRACK_RESUME,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.resumeProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"stopProcessAudioBuffer\",\n      value: function stopProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.BUFFER_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.stopProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"currentState\",\n      get: function get() {\n        return this._bufferSource.currentState;\n      }\n    }, {\n      key: \"duration\",\n      get: function get() {\n        return this._bufferSource.duration;\n      }\n    }]);\n\n    return Vu;\n  }(Fu);\n\n  Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Object]), Qu(\"design:returntype\", void 0)], Vu.prototype, \"startProcessAudioBuffer\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", void 0)], Vu.prototype, \"pauseProcessAudioBuffer\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", [Number]), Qu(\"design:returntype\", void 0)], Vu.prototype, \"seekAudioBuffer\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", void 0)], Vu.prototype, \"resumeProcessAudioBuffer\", null), Uu([Pu(), Qu(\"design:type\", Function), Qu(\"design:paramtypes\", []), Qu(\"design:returntype\", void 0)], Vu.prototype, \"stopProcessAudioBuffer\", null);\n\n  var Gu =\n  /*#__PURE__*/\n  function (_Fu3) {\n    _inherits(Gu, _Fu3);\n\n    function Gu() {\n      var _this52;\n\n      _classCallCheck(this, Gu);\n\n      var e = hu().createMediaStreamDestination();\n      _this52 = _possibleConstructorReturn(this, _getPrototypeOf(Gu).call(this, e.stream.getAudioTracks()[0], void 0, wh(8, \"track-mix-\")));\n\n      try {\n        _this52._mediaStreamTrack = _this52._source.createOutputTrack();\n      } catch (e) {}\n\n      _this52.destNode = e, _this52.trackList = [];\n      return _this52;\n    }\n\n    _createClass(Gu, [{\n      key: \"hasAudioTrack\",\n      value: function hasAudioTrack(e) {\n        var t;\n        return -1 !== Os(t = this.trackList).call(t, e);\n      }\n    }, {\n      key: \"addAudioTrack\",\n      value: function addAudioTrack(e) {\n        var t;\n        -1 === Os(t = this.trackList).call(t, e) ? (vc.debug(\"add \".concat(e.getTrackId(), \" to mixing track\")), e._source.outputNode.connect(this.destNode), this.trackList.push(e), this.updateEncoderConfig()) : vc.debug(\"track \".concat(e.getTrackId(), \" is already added\"));\n      }\n    }, {\n      key: \"removeAudioTrack\",\n      value: function removeAudioTrack(e) {\n        var t;\n\n        if (-1 !== Os(t = this.trackList).call(t, e)) {\n          vc.debug(\"remove \".concat(e.getTrackId(), \" from mixing track\"));\n\n          try {\n            e._source.outputNode.disconnect(this.destNode);\n          } catch (e) {}\n\n          Mh(this.trackList, e), this.updateEncoderConfig();\n        }\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function updateEncoderConfig() {\n        var e;\n        var t = {};\n        Xi(e = this.trackList).call(e, function (e) {\n          e._encoderConfig && ((e._encoderConfig.bitrate || 0) > (t.bitrate || 0) && (t.bitrate = e._encoderConfig.bitrate), (e._encoderConfig.sampleRate || 0) > (t.sampleRate || 0) && (t.sampleRate = e._encoderConfig.sampleRate), (e._encoderConfig.sampleSize || 0) > (t.sampleSize || 0) && (t.sampleSize = e._encoderConfig.sampleSize), e._encoderConfig.stereo && (t.stereo = !0));\n        }), this._encoderConfig = t;\n      }\n    }, {\n      key: \"isActive\",\n      get: function get() {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = this.trackList[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var _e27 = _step4.value;\n            if (_e27._enabled && !_e27._isClosed && !_e27.muted) return !0;\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        return !1;\n      }\n    }]);\n\n    return Gu;\n  }(Fu);\n\n  var ju =\n  /*#__PURE__*/\n  function (_Ll8) {\n    _inherits(ju, _Ll8);\n\n    function ju() {\n      var _this53;\n\n      _classCallCheck(this, ju);\n\n      _this53 = _possibleConstructorReturn(this, _getPrototypeOf(ju).apply(this, arguments)), _this53.resultStorage = new Li();\n      return _this53;\n    }\n\n    _createClass(ju, [{\n      key: \"setLocalAudioStats\",\n      value: function setLocalAudioStats(e, t, i) {\n        this.record(\"AUDIO_INPUT_LEVEL_TOO_LOW\", e, this.checkAudioInputLevel(i, t)), this.record(\"SEND_AUDIO_BITRATE_TOO_LOW\", e, this.checkSendAudioBitrate(i, t));\n      }\n    }, {\n      key: \"setLocalVideoStats\",\n      value: function setLocalVideoStats(e, t, i) {\n        this.record(\"SEND_VIDEO_BITRATE_TOO_LOW\", e, this.checkSendVideoBitrate(i, t)), this.record(\"FRAMERATE_INPUT_TOO_LOW\", e, this.checkFramerateInput(i, t)), this.record(\"FRAMERATE_SENT_TOO_LOW\", e, this.checkFramerateSent(i));\n      }\n    }, {\n      key: \"setRemoteAudioStats\",\n      value: function setRemoteAudioStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"AUDIO_OUTPUT_LEVEL_TOO_LOW\", i, this.checkAudioOutputLevel(t));\n      }\n    }, {\n      key: \"setRemoteVideoStats\",\n      value: function setRemoteVideoStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"RECV_VIDEO_DECODE_FAILED\", i, this.checkVideoDecode(t));\n      }\n    }, {\n      key: \"record\",\n      value: function record(e, t, i) {\n        this.resultStorage.has(e) || this.resultStorage.set(e, {\n          result: [],\n          isPrevNormal: !0\n        });\n        var r = this.resultStorage.get(e);\n\n        if (r && (r.result.push(i), r.result.length >= 5)) {\n          var n;\n\n          var _i24 = eo(n = r.result).call(n, !0);\n\n          r.isPrevNormal && !_i24 && this.emit(\"exception\", Ku[e], e, t), !r.isPrevNormal && _i24 && this.emit(\"exception\", Ku[e] + 2e3, e + \"_RECOVER\", t), r.isPrevNormal = _i24, r.result = [];\n        }\n      }\n    }, {\n      key: \"checkAudioOutputLevel\",\n      value: function checkAudioOutputLevel(e) {\n        return !(e.receiveBitrate > 0 && 0 === e.receiveLevel);\n      }\n    }, {\n      key: \"checkAudioInputLevel\",\n      value: function checkAudioInputLevel(e, t) {\n        return t instanceof Gu && !t.isActive || !!t.muted || 0 !== e.sendVolumeLevel;\n      }\n    }, {\n      key: \"checkFramerateInput\",\n      value: function checkFramerateInput(e, t) {\n        var i = null;\n        t._encoderConfig && t._encoderConfig.frameRate && (i = uh(t._encoderConfig.frameRate));\n        var r = e.captureFrameRate;\n        return !i || !r || !(i > 10 && r < 5 || i < 10 && i >= 5 && r <= 1);\n      }\n    }, {\n      key: \"checkFramerateSent\",\n      value: function checkFramerateSent(e) {\n        return !(e.captureFrameRate && e.sendFrameRate && e.captureFrameRate > 5 && e.sendFrameRate <= 1);\n      }\n    }, {\n      key: \"checkSendVideoBitrate\",\n      value: function checkSendVideoBitrate(e, t) {\n        return !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkSendAudioBitrate\",\n      value: function checkSendAudioBitrate(e, t) {\n        return t instanceof Gu && !t.isActive || !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkVideoDecode\",\n      value: function checkVideoDecode(e) {\n        return 0 === e.receiveBitrate || 0 !== e.decodeFrameRate;\n      }\n    }]);\n\n    return ju;\n  }(Ll);\n\n  var Ku = {\n    FRAMERATE_INPUT_TOO_LOW: 1001,\n    FRAMERATE_SENT_TOO_LOW: 1002,\n    SEND_VIDEO_BITRATE_TOO_LOW: 1003,\n    RECV_VIDEO_DECODE_FAILED: 1005,\n    AUDIO_INPUT_LEVEL_TOO_LOW: 2001,\n    AUDIO_OUTPUT_LEVEL_TOO_LOW: 2002,\n    SEND_AUDIO_BITRATE_TOO_LOW: 2003\n  };\n  var Wu = new (\n  /*#__PURE__*/\n  function () {\n    function _class8() {\n      _classCallCheck(this, _class8);\n    }\n\n    _createClass(_class8, [{\n      key: \"markSubscribeStart\",\n      value: function markSubscribeStart(e, t) {\n        var i;\n        performance.mark(Xe(i = \"agora-web-sdk/\".concat(e, \"/subscribe-\")).call(i, t));\n      }\n    }, {\n      key: \"markPublishStart\",\n      value: function markPublishStart(e, t) {\n        var i;\n        performance.mark(Xe(i = \"agora-web-sdk/\".concat(e, \"/publish-\")).call(i, t));\n      }\n    }, {\n      key: \"measureFromSubscribeStart\",\n      value: function measureFromSubscribeStart(e, t) {\n        var i;\n        var r = performance.getEntriesByName(Xe(i = \"agora-web-sdk/\".concat(e, \"/subscribe-\")).call(i, t));\n\n        if (r.length > 0) {\n          var _e28 = r[r.length - 1];\n          return performance.now() - _e28.startTime;\n        }\n\n        return 0;\n      }\n    }, {\n      key: \"measureFromPublishStart\",\n      value: function measureFromPublishStart(e, t) {\n        var i;\n        var r = performance.getEntriesByName(Xe(i = \"agora-web-sdk/\".concat(e, \"/publish-\")).call(i, t));\n\n        if (r.length > 0) {\n          var _e29 = r[r.length - 1];\n          return Math.round(performance.now() - _e29.startTime);\n        }\n\n        return 0;\n      }\n    }]);\n\n    return _class8;\n  }())();\n\n  function Hu(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Yu(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = Hu(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = Hu(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var qu =\n  /*#__PURE__*/\n  function () {\n    function qu(e) {\n      var _this54 = this;\n\n      _classCallCheck(this, qu);\n\n      this.localStats = new Li(), this.remoteStats = new Li(), this.trafficStatsPeerList = [], this.updateStats = function () {\n        _this54.p2pChannel && (_this54.updateRemoteStats(_this54.p2pChannel), _this54.updateLocalStats(_this54.p2pChannel));\n      }, this.store = e, this.updateStatsInterval = window.setInterval(this.updateStats, 1e3), this.exceptionMonitor = new ju(), this.exceptionMonitor.on(\"exception\", function (e, t, i) {\n        _this54.onStatsException && _this54.onStatsException(e, t, i);\n      });\n    }\n\n    _createClass(qu, [{\n      key: \"reset\",\n      value: function reset() {\n        this.localStats = new Li(), this.remoteStats = new Li(), this.trafficStats = void 0, this.trafficStatsPeerList = [], this.uplinkStats = void 0;\n      }\n    }, {\n      key: \"getLocalAudioTrackStats\",\n      value: function getLocalAudioTrackStats() {\n        return this.localStats.get(Nl.LocalAudioTrack) || Yu({}, zd);\n      }\n    }, {\n      key: \"getLocalVideoTrackStats\",\n      value: function getLocalVideoTrackStats() {\n        return this.localStats.get(Nl.LocalVideoTrack) || Yu({}, Zd);\n      }\n    }, {\n      key: \"getRemoteAudioTrackStats\",\n      value: function getRemoteAudioTrackStats(e) {\n        var _this55 = this;\n\n        var t = function t(e, _t39) {\n          var i;\n          if (!_this55.trafficStats) return _t39;\n          var r = Vs(i = _this55.trafficStats.peer_delay).call(i, function (t) {\n            return t.peer_uid === e;\n          });\n          return r && (_t39.publishDuration = r.B_ppad + (La() - _this55.trafficStats.timestamp)), _t39;\n        },\n            i = {};\n\n        if (e) {\n          var r;\n\n          var _n8 = null === (r = this.remoteStats.get(e)) || void 0 === r ? void 0 : r.audioStats;\n\n          _n8 && (i[e] = t(e, _n8));\n        } else {\n          var n, s;\n          Xi(n = BA(kA(s = this.remoteStats).call(s))).call(n, function (_ref25) {\n            var _ref26 = _slicedToArray(_ref25, 2),\n                e = _ref26[0],\n                r = _ref26[1].audioStats;\n\n            r && (i[e] = t(e, r));\n          });\n        }\n\n        return i;\n      }\n    }, {\n      key: \"getRemoteNetworkQualityStats\",\n      value: function getRemoteNetworkQualityStats(e) {\n        var t = {};\n\n        if (e) {\n          var i;\n\n          var _r19 = null === (i = this.remoteStats.get(e)) || void 0 === i ? void 0 : i.networkStats;\n\n          _r19 && (t[e] = _r19);\n        } else {\n          var r, n;\n          Xi(r = BA(kA(n = this.remoteStats).call(n))).call(r, function (_ref27) {\n            var _ref28 = _slicedToArray(_ref27, 2),\n                e = _ref28[0],\n                i = _ref28[1].networkStats;\n\n            i && (t[e] = i);\n          });\n        }\n\n        return t;\n      }\n    }, {\n      key: \"getRemoteVideoTrackStats\",\n      value: function getRemoteVideoTrackStats(e) {\n        var _this56 = this;\n\n        var t = function t(e, _t40) {\n          var i;\n          if (!_this56.trafficStats) return _t40;\n          var r = Vs(i = _this56.trafficStats.peer_delay).call(i, function (t) {\n            return t.peer_uid === e;\n          });\n          return r && (_t40.publishDuration = r.B_ppvd + (La() - _this56.trafficStats.timestamp)), _t40;\n        },\n            i = {};\n\n        if (e) {\n          var r;\n\n          var _n9 = null === (r = this.remoteStats.get(e)) || void 0 === r ? void 0 : r.videoStats;\n\n          _n9 && (i[e] = t(e, _n9));\n        } else {\n          var n, s;\n          Xi(n = BA(kA(s = this.remoteStats).call(s))).call(n, function (_ref29) {\n            var _ref30 = _slicedToArray(_ref29, 2),\n                e = _ref30[0],\n                r = _ref30[1].videoStats;\n\n            r && (i[e] = t(e, r));\n          });\n        }\n\n        return i;\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e;\n        var t = 0,\n            i = 0,\n            r = 0,\n            n = 0;\n        var s = this.localStats.get(Nl.LocalAudioTrack);\n        s && (t += s.sendBytes, i += s.sendBitrate);\n        var o = this.localStats.get(Nl.LocalVideoTrack);\n        o && (t += o.sendBytes, i += o.sendBitrate);\n        var a = this.localStats.get(Nl.LocalVideoLowTrack);\n        a && (t += a.sendBytes, i += a.sendBitrate), Xi(e = this.remoteStats).call(e, function (_ref31) {\n          var e = _ref31.audioStats,\n              t = _ref31.videoStats;\n          e && (r += e.receiveBytes, n += e.receiveBitrate), t && (r += t.receiveBytes, n += t.receiveBitrate);\n        });\n        var c = 1;\n        return this.trafficStats && (c += this.trafficStats.peer_delay.length), {\n          Duration: 0,\n          UserCount: c,\n          SendBitrate: i,\n          SendBytes: t,\n          RecvBytes: r,\n          RecvBitrate: n,\n          OutgoingAvailableBandwidth: this.uplinkStats ? this.uplinkStats.B_uab / 1e3 : 0,\n          RTT: this.trafficStats ? 2 * this.trafficStats.B_acd : 0\n        };\n      }\n    }, {\n      key: \"addLocalStats\",\n      value: function addLocalStats(e) {\n        this.localStats.set(e, void 0);\n      }\n    }, {\n      key: \"removeLocalStats\",\n      value: function removeLocalStats(e) {\n        e ? this.localStats.delete(e) : this.localStats.clear();\n      }\n    }, {\n      key: \"addRemoteStats\",\n      value: function addRemoteStats(e) {\n        this.remoteStats.set(e, {});\n      }\n    }, {\n      key: \"removeRemoteStats\",\n      value: function removeRemoteStats(e) {\n        e ? this.remoteStats.delete(e) : this.remoteStats.clear();\n      }\n    }, {\n      key: \"addP2PChannel\",\n      value: function addP2PChannel(e) {\n        this.p2pChannel = e;\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function updateTrafficStats(e) {\n        var _this57 = this;\n\n        var t;\n        var i = Fr(t = e.peer_delay).call(t, function (e) {\n          var t;\n          return -1 === Os(t = _this57.trafficStatsPeerList).call(t, e.peer_uid);\n        });\n        Xi(i).call(i, function (e) {\n          var t;\n          var i = null === (t = _this57.p2pChannel) || void 0 === t ? void 0 : t.getRemoteMedia(e.peer_uid),\n              r = null != i && i.videoSSRC ? Wu.measureFromSubscribeStart(_this57.store.clientId, i.videoSSRC) : 0,\n              n = null != i && i.audioSSRC ? Wu.measureFromSubscribeStart(_this57.store.clientId, i.audioSSRC) : 0;\n          void 0 !== e.B_ppad && void 0 !== e.B_ppvd && (_this57.onUploadPublishDuration && _this57.onUploadPublishDuration(e.peer_uid, e.B_ppad, e.B_ppvd, r > n ? r : n), _this57.trafficStatsPeerList.push(e.peer_uid));\n        }), this.trafficStats = e;\n      }\n    }, {\n      key: \"updateUplinkStats\",\n      value: function updateUplinkStats(e) {\n        var t;\n        this.uplinkStats && this.uplinkStats.B_fir !== e.B_fir && vc.debug(Xe(t = \"[\".concat(this.store.clientId, \"]: Period fir changes to \")).call(t, e.B_fir));\n        this.uplinkStats = e;\n      }\n    }, {\n      key: \"isLocalVideoFreeze\",\n      value: function isLocalVideoFreeze(e) {\n        return !(!e.inputFrame || !e.sentFrame) && e.inputFrame.frameRate > 5 && e.sentFrame.frameRate < 3;\n      }\n    }, {\n      key: \"updateLocalStats\",\n      value: function updateLocalStats(e) {\n        var _this58 = this;\n\n        var t, i;\n        Xi(t = BA(kA(i = this.localStats).call(i))).call(t, function (_ref32) {\n          var _ref33 = _slicedToArray(_ref32, 2),\n              t = _ref33[0],\n              i = _ref33[1];\n\n          switch (t) {\n            case Nl.LocalVideoTrack:\n            case Nl.LocalVideoLowTrack:\n              {\n                var _n10 = i,\n                    _s6 = Yu({}, Zd),\n                    _o4 = e.getStats(),\n                    _a3 = e.getLocalMedia(t);\n\n                if (_o4) {\n                  var r;\n\n                  var _t41 = Vs(r = _o4.videoSend).call(r, function (e) {\n                    return e.ssrc === (null == _a3 ? void 0 : _a3.ssrcs[0].ssrcId);\n                  });\n\n                  if (_t41) {\n                    var _i25 = e.getLocalVideoSize(),\n                        _r20 = e.getEncoderConfig(Nl.LocalVideoTrack);\n\n                    \"H264\" !== _t41.codec && \"VP8\" !== _t41.codec && \"VP9\" !== _t41.codec && \"AV1X\" !== _t41.codec || (_s6.codecType = _t41.codec), _s6.sendBytes = _t41.bytes, _s6.sendBitrate = _n10 ? 8 * Math.max(0, _s6.sendBytes - _n10.sendBytes) : 0, _t41.inputFrame ? (_s6.captureFrameRate = _t41.inputFrame.frameRate, _s6.captureResolutionHeight = _t41.inputFrame.height, _s6.captureResolutionWidth = _t41.inputFrame.width) : _i25 && (_s6.captureResolutionWidth = _i25.width, _s6.captureResolutionHeight = _i25.height), _t41.sentFrame ? (_s6.sendFrameRate = _t41.sentFrame.frameRate, _s6.sendResolutionHeight = _t41.sentFrame.height, _s6.sendResolutionWidth = _t41.sentFrame.width) : _i25 && (_s6.sendResolutionWidth = _i25.width, _s6.sendResolutionHeight = _i25.height), _t41.avgEncodeMs && (_s6.encodeDelay = _t41.avgEncodeMs), _r20 && _r20.bitrateMax && (_s6.targetSendBitrate = 1e3 * _r20.bitrateMax), _s6.sendPackets = _t41.packets, _s6.sendPacketsLost = _t41.packetsLost, _s6.totalDuration = _n10 ? _n10.totalDuration + 1 : 1, _s6.totalFreezeTime = _n10 ? _n10.totalFreezeTime : 0, _this58.isLocalVideoFreeze(_t41) && (_s6.totalFreezeTime += 1);\n                  }\n\n                  _this58.trafficStats && (_s6.sendPacketsLost = _this58.trafficStats.B_pvlr4 / 100);\n                }\n\n                _this58.localStats.set(t, _s6), _s6 && _a3 && _this58.exceptionMonitor.setLocalVideoStats(_this58.store.uid, _a3.track, _s6);\n                break;\n              }\n\n            case Nl.LocalAudioTrack:\n              {\n                var _r21 = i,\n                    _s7 = Yu({}, zd),\n                    _o5 = e.getStats(),\n                    _a4 = e.getLocalMedia(t);\n\n                if (_o5) {\n                  var n;\n\n                  var _t42 = Vs(n = _o5.audioSend).call(n, function (e) {\n                    return e.ssrc === (null == _a4 ? void 0 : _a4.ssrcs[0].ssrcId);\n                  });\n\n                  if (_t42) {\n                    if (\"opus\" !== _t42.codec && \"aac\" !== _t42.codec || (_s7.codecType = _t42.codec), _t42.inputLevel) _s7.sendVolumeLevel = Math.round(32767 * _t42.inputLevel);else {\n                      var _t43 = e.getLocalAudioVolume();\n\n                      _t43 && (_s7.sendVolumeLevel = Math.round(32767 * _t43));\n                    }\n                    _s7.sendBytes = _t42.bytes, _s7.sendPackets = _t42.packets, _s7.sendPacketsLost = _t42.packetsLost, _s7.sendBitrate = _r21 ? 8 * Math.max(0, _s7.sendBytes - _r21.sendBytes) : 0;\n                  }\n                }\n\n                _this58.trafficStats && (_s7.sendPacketsLost = _this58.trafficStats.B_pvlr4 / 100), _this58.localStats.set(Nl.LocalAudioTrack, _s7), _s7 && _a4 && _this58.exceptionMonitor.setLocalAudioStats(_this58.store.uid, _a4.track, _s7);\n                break;\n              }\n          }\n        });\n      }\n    }, {\n      key: \"updateRemoteStats\",\n      value: function updateRemoteStats(e) {\n        var _this59 = this;\n\n        var t, i;\n        Xi(t = BA(kA(i = this.remoteStats).call(i))).call(t, function (_ref34) {\n          var _ref35 = _slicedToArray(_ref34, 2),\n              t = _ref35[0],\n              _ref35$ = _ref35[1],\n              i = _ref35$.videoStats,\n              r = _ref35$.audioStats,\n              n = _ref35$.videoPcStats;\n\n          var s, o, a;\n\n          var c = r,\n              d = i,\n              l = n,\n              A = Yu({}, $d),\n              u = Yu({}, tl),\n              h = Yu({}, el),\n              _e$getRemoteMedia = e.getRemoteMedia(t),\n              p = _e$getRemoteMedia.audioTrack,\n              E = _e$getRemoteMedia.videoTrack,\n              g = _e$getRemoteMedia.audioSSRC,\n              _ = _e$getRemoteMedia.videoSSRC,\n              I = e.getStats(),\n              f = null == I ? void 0 : Vs(s = I.audioRecv).call(s, function (e) {\n            return e.ssrc === g;\n          }),\n              m = null == I ? void 0 : Vs(o = I.videoRecv).call(o, function (e) {\n            return e.ssrc === _;\n          }),\n              C = _this59.trafficStats && Vs(a = _this59.trafficStats.peer_delay).call(a, function (e) {\n            return e.peer_uid === t;\n          });\n\n          if (f && (\"opus\" !== f.codec && \"aac\" !== f.codec || (A.codecType = f.codec), f.outputLevel ? A.receiveLevel = Math.round(32767 * f.outputLevel) : p && (A.receiveLevel = Math.round(32767 * p.getVolumeLevel())), A.receiveBytes = f.bytes, A.receivePackets = f.packets, A.receivePacketsLost = f.packetsLost, A.packetLossRate = A.receivePacketsLost / (A.receivePackets + A.receivePacketsLost), A.receiveBitrate = c ? 8 * Math.max(0, A.receiveBytes - c.receiveBytes) : 0, A.totalDuration = c ? c.totalDuration + 1 : 1, A.totalFreezeTime = c ? c.totalFreezeTime : 0, A.freezeRate = A.totalFreezeTime / A.totalDuration, A.receiveDelay = f.jitterBufferMs, A.totalDuration > 10 && qu.isRemoteAudioFreeze(p) && (A.totalFreezeTime += 1)), m) {\n            \"H264\" !== m.codec && \"VP8\" !== m.codec && \"VP9\" !== m.codec && \"AV1X\" !== m.codec || (u.codecType = m.codec), u.receiveBytes = m.bytes, u.receiveBitrate = d ? 8 * Math.max(0, u.receiveBytes - d.receiveBytes) : 0, u.decodeFrameRate = m.decodeFrameRate < 0 ? 0 : m.decodeFrameRate, u.renderFrameRate = m.decodeFrameRate < 0 ? 0 : m.decodeFrameRate, m.outputFrame && (u.renderFrameRate = m.outputFrame.frameRate), m.receivedFrame ? (u.receiveFrameRate = m.receivedFrame.frameRate, u.receiveResolutionHeight = m.receivedFrame.height, u.receiveResolutionWidth = m.receivedFrame.width) : E && (u.receiveResolutionHeight = E._videoHeight || 0, u.receiveResolutionWidth = E._videoWidth || 0), void 0 !== m.framesRateFirefox && (u.receiveFrameRate = Math.round(m.framesRateFirefox)), u.receivePackets = m.packets, u.receivePacketsLost = m.packetsLost, u.packetLossRate = u.receivePacketsLost / (u.receivePackets + u.receivePacketsLost), u.totalDuration = d ? d.totalDuration + 1 : 1, u.totalFreezeTime = d ? d.totalFreezeTime : 0, u.receiveDelay = m.jitterBufferMs || 0;\n\n            var _t44 = !!_ && e.getRemoteVideoIsReady(_);\n\n            E && _t44 && qu.isRemoteVideoFreeze(E, m, l) && (u.totalFreezeTime += 1), u.freezeRate = u.totalFreezeTime / u.totalDuration;\n          }\n\n          C && (A.end2EndDelay = C.B_ad, u.end2EndDelay = C.B_vd, A.transportDelay = C.B_ed, u.transportDelay = C.B_ed, A.currentPacketLossRate = C.B_ealr4 / 100, u.currentPacketLossRate = C.B_evlr4 / 100, h.uplinkNetworkQuality = C.B_punq ? C.B_punq : 0, h.downlinkNetworkQuality = C.B_pdnq ? C.B_pdnq : 0), _this59.remoteStats.set(t, {\n            audioStats: A,\n            videoStats: u,\n            videoPcStats: m,\n            networkStats: h\n          }), p && _this59.exceptionMonitor.setRemoteAudioStats(p, A), E && _this59.exceptionMonitor.setRemoteVideoStats(E, u);\n        });\n      }\n    }], [{\n      key: \"isRemoteVideoFreeze\",\n      value: function isRemoteVideoFreeze(e, t, i) {\n        if (!e) return !1;\n        var r = !!i && t.framesDecodeFreezeTime > i.framesDecodeFreezeTime,\n            n = !i || t.framesDecodeCount > i.framesDecodeCount;\n        return r || !n;\n      }\n    }, {\n      key: \"isRemoteAudioFreeze\",\n      value: function isRemoteAudioFreeze(e) {\n        return !!e && e._isFreeze();\n      }\n    }]);\n\n    return qu;\n  }();\n\n  var Ju = \"\".repeat || function (e) {\n    var t = String(p(this)),\n        i = \"\",\n        r = W(e);\n    if (r < 0 || r == 1 / 0) throw RangeError(\"Wrong number of repetitions\");\n\n    for (; r > 0; (r >>>= 1) && (t += t)) {\n      1 & r && (i += t);\n    }\n\n    return i;\n  },\n      Xu = Math.ceil,\n      zu = function zu(e) {\n    return function (t, i, r) {\n      var n,\n          s,\n          o = String(p(t)),\n          a = o.length,\n          c = void 0 === r ? \" \" : String(r),\n          d = Y(i);\n      return d <= a || \"\" == c ? o : (n = d - a, (s = Ju.call(c, Xu(n / c.length))).length > n && (s = s.slice(0, n)), e ? o + s : s + o);\n    };\n  },\n      Zu = {\n    start: zu(!1),\n    end: zu(!0)\n  },\n      $u = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(Pe),\n      eh = Zu.start;\n\n  G({\n    target: \"String\",\n    proto: !0,\n    forced: $u\n  }, {\n    padStart: function padStart(e) {\n      return eh(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var th = Ye(\"String\").padStart,\n      ih = String.prototype,\n      rh = function rh(e) {\n    var t = e.padStart;\n    return \"string\" == typeof e || e === ih || e instanceof String && t === ih.padStart ? th : t;\n  };\n\n  function nh(e) {\n    return new TextEncoder().encode(e);\n  }\n\n  var sh =\n  /*#__PURE__*/\n  function () {\n    var _ref36 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee32(e) {\n      var t, i, r, n;\n      return _regeneratorRuntime.wrap(function _callee32$(_context32) {\n        while (1) {\n          switch (_context32.prev = _context32.next) {\n            case 0:\n              t = Gh(\"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\\nxQiYDz3vqa6bP29adwIDAQAB\");\n              _context32.next = 3;\n              return window.crypto.subtle.importKey(\"spki\", t, {\n                name: \"RSA-OAEP\",\n                hash: \"SHA-256\"\n              }, !0, [\"encrypt\"]);\n\n            case 3:\n              i = _context32.sent;\n              r = nh(e);\n              _context32.next = 7;\n              return window.crypto.subtle.encrypt({\n                name: \"RSA-OAEP\"\n              }, i, r);\n\n            case 7:\n              n = _context32.sent;\n              return _context32.abrupt(\"return\", jh(new Uint8Array(n)));\n\n            case 9:\n            case \"end\":\n              return _context32.stop();\n          }\n        }\n      }, _callee32, this);\n    }));\n\n    return function sh(_x37) {\n      return _ref36.apply(this, arguments);\n    };\n  }(),\n      oh =\n  /*#__PURE__*/\n  function () {\n    var _ref37 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee33(e) {\n      return _regeneratorRuntime.wrap(function _callee33$(_context33) {\n        while (1) {\n          switch (_context33.prev = _context33.next) {\n            case 0:\n              _context33.t0 = function (e, t) {\n                var i = \"\";\n                var r = new Uint8Array(e);\n                return Xi(r).call(r, function (e) {\n                  var r;\n                  i += rh(r = e.toString(t)).call(r, 2, \"0\");\n                }), i;\n              };\n\n              _context33.next = 3;\n              return crypto.subtle.digest(\"SHA-256\", nh(e));\n\n            case 3:\n              _context33.t1 = _context33.sent;\n              return _context33.abrupt(\"return\", (0, _context33.t0)(_context33.t1, 16));\n\n            case 5:\n            case \"end\":\n              return _context33.stop();\n          }\n        }\n      }, _callee33, this);\n    }));\n\n    return function oh(_x38) {\n      return _ref37.apply(this, arguments);\n    };\n  }();\n\n  function ah(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function ch(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = ah(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = ah(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function dh(e) {\n    if (!e.address || !e.tcp) throw new Ad(ad.UNEXPECTED_RESPONSE, \"Invalid address format \".concat(e));\n    return e.address.match(/^[\\.\\:\\d]+$/) ? \"\".concat(e.address.replace(/[^\\d]/g, \"-\"), \".edge.agora.io\") : (vc.info(\"Cannot recognized as IP address \".concat(e.address, \". Used As Host instead\")), Xe(t = \"\".concat(e.address, \":\")).call(t, e.tcp));\n    var t;\n  }\n\n  function lh(e) {\n    var t;\n    return e.match(/^[\\.\\:\\d]+$/) ? Xe(t = \"\".concat(e.replace(/[^\\d]/g, \"-\"), \".\")).call(t, Fc(\"TURN_DOMAIN\")) : (vc.info(\"Cannot recognized as IP address \".concat(e, \". Used As Host instead\")), e);\n  }\n\n  function Ah(e, t) {\n    var i;\n    var r = Fc(\"GATEWAY_DOMAINS\");\n    var n = r[1] && -1 !== Os(t).call(t, r[1]) ? 1 : 0;\n    e.addresses = e.addresses || [];\n    return {\n      gatewayAddrs: Es(i = e.addresses).call(i, function (e) {\n        var t, i, s;\n        return e.ip.match(/^[\\.\\:\\d]+$/) ? Xe(t = Xe(i = \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\")).call(i, r[n++ % r.length], \":\")).call(t, e.port) : (vc.info(\"Cannot recognized as IP address \".concat(e.ip, \". Used As Host instead\")), Xe(s = \"\".concat(e.ip, \":\")).call(s, e.port));\n      }),\n      uid: e.uid,\n      cid: e.cid,\n      vid: e.detail && e.detail[8],\n      uni_lbs_ip: e.detail && e.detail[1],\n      res: e,\n      csIp: e.detail && e.detail[502]\n    };\n  }\n\n  function uh(e) {\n    return \"number\" == typeof e ? e : e.exact || e.ideal || e.max || e.min || 0;\n  }\n\n  function hh(e) {\n    var t;\n    var i = e._encoderConfig;\n    if (!i) return {};\n    var r = {\n      resolution: i.width && i.height ? Xe(t = \"\".concat(uh(i.width), \"x\")).call(t, uh(i.height)) : void 0,\n      maxVideoBW: i.bitrateMax,\n      minVideoBW: i.bitrateMin\n    };\n    return \"number\" == typeof i.frameRate ? (r.maxFrameRate = i.frameRate, r.minFrameRate = i.frameRate) : i.frameRate && (r.maxFrameRate = i.frameRate.max || i.frameRate.ideal || i.frameRate.exact || i.frameRate.min, r.minFrameRate = i.frameRate.min || i.frameRate.ideal || i.frameRate.exact || i.frameRate.max), r;\n  }\n\n  function ph(e, t, i) {\n    var r, n, s;\n    var o = Vs(r = t.videoSend).call(r, function (t) {\n      return t.ssrc === e;\n    });\n    if (!o) return null;\n    var a = null == i || null === (n = Vs(s = i.videoSend).call(s, function (t) {\n      return t.ssrc === e;\n    })) || void 0 === n ? void 0 : n.inputFrame,\n        c = {\n      id: wh(10, \"\"),\n      timestamp: new Date(t.timestamp).toISOString(),\n      mediaType: \"video\",\n      type: \"ssrc\",\n      ssrc: o.ssrc.toString()\n    };\n    return o.inputFrame && (a && o.inputFrame.height === a.height || (c.A_fhi = o.inputFrame.height ? o.inputFrame.height.toString() : \"0\"), a && o.inputFrame.width === a.width || (c.A_fwi = o.inputFrame.width ? o.inputFrame.width.toString() : \"0\"), a && o.inputFrame.frameRate === a.frameRate || (c.A_fri = o.inputFrame.frameRate ? o.inputFrame.frameRate.toString() : \"0\")), c;\n  }\n\n  function Eh(e) {\n    return e >= 0 && e < .17 ? 1 : e >= .17 && e < .36 ? 2 : e >= .36 && e < .59 ? 3 : e >= .59 && e <= 1 ? 4 : e > 1 ? 5 : 0;\n  }\n\n  function gh(e, t) {\n    var i;\n    var r,\n        n,\n        s = void 0;\n\n    switch (t) {\n      case wA.CHOOSE_SERVER:\n        r = 4096, n = \"choose server\";\n        break;\n\n      case wA.CLOUD_PROXY:\n        r = 1048576, n = \"proxy\";\n        break;\n\n      case wA.CLOUD_PROXY_5:\n        r = 4194304, n = \"proxy5\";\n        break;\n\n      default:\n        throw new Ad(ad.UNEXPECTED_ERROR, \"multi unlibs response transformer get unknown service id\", {\n          csIp: e.detail && e.detail[502],\n          retry: !1\n        });\n    }\n\n    if (Xi(i = e.response_body).call(i, function (t) {\n      var i;\n      t.buffer && t.buffer.flag === r && (s = {\n        code: t.buffer.code,\n        addresses: Es(i = t.buffer.edges_services).call(i, function (e) {\n          return ch({}, e, {\n            ticket: t.buffer.cert\n          });\n        }),\n        server_ts: e.enter_ts,\n        uid: t.buffer.uid,\n        cid: t.buffer.cid,\n        cname: t.buffer.cname,\n        detail: ch({}, t.buffer.detail, {}, e.detail),\n        flag: t.buffer.flag,\n        opid: e.opid\n      });\n    }), !s) throw new Ad(ad.MULTI_UNILBS_RESPONSE_ERROR, \"cannot parse response \".concat(n, \" from multi unilbs response\"), {\n      csIp: e.detail && e.detail[502]\n    });\n    return s;\n  }\n\n  function _h(_x39, _x40) {\n    return _h2.apply(this, arguments);\n  }\n\n  function _h2() {\n    _h2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee338(e, t) {\n      var i;\n      return _regeneratorRuntime.wrap(function _callee338$(_context338) {\n        while (1) {\n          switch (_context338.prev = _context338.next) {\n            case 0:\n              _context338.next = 2;\n              return As.all(Es(i = e.addresses).call(i,\n              /*#__PURE__*/\n              function () {\n                var _ref207 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee337(e) {\n                  return _regeneratorRuntime.wrap(function _callee337$(_context337) {\n                    while (1) {\n                      switch (_context337.prev = _context337.next) {\n                        case 0:\n                          _context337.t0 = e.ip;\n                          _context337.t1 = e.port;\n                          _context337.t2 = e.port;\n                          _context337.t3 = t ? t.toString() : Oc.username;\n\n                          if (!t) {\n                            _context337.next = 10;\n                            break;\n                          }\n\n                          _context337.next = 7;\n                          return oh(t.toString());\n\n                        case 7:\n                          _context337.t4 = _context337.sent;\n                          _context337.next = 11;\n                          break;\n\n                        case 10:\n                          _context337.t4 = Oc.password;\n\n                        case 11:\n                          _context337.t5 = _context337.t4;\n                          return _context337.abrupt(\"return\", {\n                            address: _context337.t0,\n                            tcpport: _context337.t1,\n                            udpport: _context337.t2,\n                            username: _context337.t3,\n                            password: _context337.t5\n                          });\n\n                        case 13:\n                        case \"end\":\n                          return _context337.stop();\n                      }\n                    }\n                  }, _callee337, this);\n                }));\n\n                return function (_x470) {\n                  return _ref207.apply(this, arguments);\n                };\n              }()));\n\n            case 2:\n              return _context338.abrupt(\"return\", _context338.sent);\n\n            case 3:\n            case \"end\":\n              return _context338.stop();\n          }\n        }\n      }, _callee338, this);\n    }));\n    return _h2.apply(this, arguments);\n  }\n\n  function Ih(e, t) {\n    var i = t._videoHeight || t.getMediaStreamTrack(!0).getSettings().height;\n    return i ? i / uh(e.height) : 4;\n  }\n\n  var fh;\n\n  function mh(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Ch(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = mh(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = mh(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function Sh(e) {\n    return window.TextEncoder ? new TextEncoder().encode(e).length : e.length;\n  }\n\n  function Rh(e, t, i) {\n    var r = e[t];\n    if (!r || \"string\" != typeof r) return [e];\n    e[t] = \"\";\n    var n = Sh(ge(e));\n    var s = 0;\n    var o = [];\n    var a = 0;\n\n    for (var _c3 = 0; _c3 < r.length; _c3++) {\n      a += r.charCodeAt(_c3) <= 127 ? 1 : 3, a <= i - n || (o[o.length] = Ch({}, e, _defineProperty({}, t, r.substring(s, _c3))), s = _c3, a = r.charCodeAt(_c3) <= 127 ? 1 : 3);\n    }\n\n    return s !== r.length - 1 && (o[o.length] = Ch({}, e, _defineProperty({}, t, r.substring(s)))), o;\n  }\n\n  function Th(e) {\n    return new As(function (t) {\n      window.setTimeout(t, e);\n    });\n  }\n\n  function vh(e) {\n    var t = new Ad(ad.TIMEOUT, \"timeout\");\n    return new As(function (i, r) {\n      window.setTimeout(function () {\n        return r(t);\n      }, e);\n    });\n  }\n\n  function yh(e, t) {\n    return t === 1 / 0 ? e : As.race([e, vh(t)]);\n  }\n\n  function wh() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 7;\n    var t = arguments.length > 1 ? arguments[1] : undefined;\n    var i, r;\n    var n = Math.random().toString(16).substr(2, e).toLowerCase();\n    return n.length === e ? Xe(i = \"\".concat(t)).call(i, n) : Xe(r = \"\".concat(t)).call(r, n) + wh(e - n.length, \"\");\n  }\n\n  function Nh() {\n    return wh(32, \"\").toUpperCase();\n  }\n\n  var Oh = function Oh() {};\n\n  function bh(e) {\n    return new As(function (t, i) {\n      var r = !1;\n      var n = document.createElement(\"video\");\n      n.setAttribute(\"autoplay\", \"\"), n.setAttribute(\"muted\", \"\"), n.muted = !0, n.autoplay = !0, n.setAttribute(\"playsinline\", \"\"), n.setAttribute(\"style\", \"position: fixed; top: 0; left: 0; width: 1px; height: 1px\"), document.body.appendChild(n);\n      var s = va() ? \"canplay\" : \"playing\";\n      n.addEventListener(s, function () {\n        var e = n.videoWidth,\n            i = n.videoHeight;\n        !e && Ta() || (r = !0, n.srcObject = null, n.remove(), t([e, i]));\n      }), n.srcObject = new MediaStream([e]), n.play().catch(Oh), Ua(function () {\n        r || (n.srcObject = null, n.remove(), t([n.videoWidth, n.videoHeight]));\n      }, 4e3);\n    });\n  }\n\n  function Dh(e) {\n    return As.all(Es(e).call(e, function (e) {\n      return e.then(function (e) {\n        throw e;\n      }, function (e) {\n        return e;\n      });\n    })).then(function (e) {\n      throw e;\n    }, function (e) {\n      return e;\n    });\n  }\n\n  function kh(e, t) {\n    for (var _len14 = arguments.length, i = new Array(_len14 > 2 ? _len14 - 2 : 0), _key14 = 2; _key14 < _len14; _key14++) {\n      i[_key14 - 2] = arguments[_key14];\n    }\n\n    return 0 === e.getListeners(t).length ? As.reject(new Ad(ad.UNEXPECTED_ERROR, \"can not emit promise\")) : new As(function (r, n) {\n      e.emit.apply(e, [t].concat(i, [r, n]));\n    });\n  }\n\n  function Lh(e, t) {\n    for (var _len15 = arguments.length, i = new Array(_len15 > 2 ? _len15 - 2 : 0), _key15 = 2; _key15 < _len15; _key15++) {\n      i[_key15 - 2] = arguments[_key15];\n    }\n\n    return 0 === e.getListeners(t).length ? As.resolve() : kh.apply(void 0, [e, t].concat(i));\n  }\n\n  function Ph(e, t) {\n    for (var _len16 = arguments.length, i = new Array(_len16 > 2 ? _len16 - 2 : 0), _key16 = 2; _key16 < _len16; _key16++) {\n      i[_key16 - 2] = arguments[_key16];\n    }\n\n    return 0 === e.getListeners(t).length ? null : Bh.apply(void 0, [e, t].concat(i));\n  }\n\n  function Bh(e, t) {\n    var r = null,\n        n = null;\n\n    for (var _len17 = arguments.length, i = new Array(_len17 > 2 ? _len17 - 2 : 0), _key17 = 2; _key17 < _len17; _key17++) {\n      i[_key17 - 2] = arguments[_key17];\n    }\n\n    if (e.emit.apply(e, [t].concat(i, [function (e) {\n      r = e;\n    }, function (e) {\n      n = e;\n    }])), null !== n) throw n;\n    if (null === r) throw new Ad(ad.UNEXPECTED_ERROR, \"handler is not sync\");\n    return r;\n  }\n\n  function Mh(e, t) {\n    var i = Os(e).call(e, t);\n    -1 !== i && Ss(e).call(e, i, 1);\n  }\n\n  function Uh(e) {\n    var t = [];\n    return Xi(e).call(e, function (e) {\n      -1 === Os(t).call(t, e) && t.push(e);\n    }), t;\n  }\n\n  function Qh(e) {\n    As.resolve().then(e);\n  }\n\n  function Fh(e) {\n    return JSON.parse(ge(e));\n  }\n\n  var xh = {};\n\n  function Vh(e, t) {\n    xh[t] || (xh[t] = !0, e());\n  }\n\n  function Gh(e) {\n    var t = window.atob(e),\n        i = new Uint8Array(new ArrayBuffer(t.length));\n\n    for (var _e30 = 0; _e30 < t.length; _e30 += 1) {\n      i[_e30] = t.charCodeAt(_e30);\n    }\n\n    return i;\n  }\n\n  function jh(e) {\n    var t = \"\";\n\n    for (var _i26 = 0; _i26 < e.length; _i26 += 1) {\n      t += String.fromCharCode(e[_i26]);\n    }\n\n    return window.btoa(t);\n  }\n\n  var Kh = new (\n  /*#__PURE__*/\n  function () {\n    function _class9() {\n      _classCallCheck(this, _class9);\n\n      this.fnMap = new Li();\n    }\n\n    _createClass(_class9, [{\n      key: \"throttleByKey\",\n      value: function throttleByKey(e, t, i, r) {\n        var _this60 = this;\n\n        for (var _len18 = arguments.length, n = new Array(_len18 > 4 ? _len18 - 4 : 0), _key18 = 4; _key18 < _len18; _key18++) {\n          n[_key18 - 4] = arguments[_key18];\n        }\n\n        if (this.fnMap.has(t)) {\n          var _s8 = this.fnMap.get(t);\n\n          if (_s8.threshold !== i) {\n            _s8.fn.apply(_s8, _toConsumableArray(_s8.args)), clearTimeout(_s8.timer);\n\n            var _o6 = window.setTimeout(function () {\n              var e = _this60.fnMap.get(t);\n\n              e && e.fn.apply(e, _toConsumableArray(e.args)), _this60.fnMap.delete(t);\n            }, i);\n\n            this.fnMap.set(t, {\n              fn: e,\n              threshold: i,\n              timer: _o6,\n              args: n,\n              skipFn: r\n            });\n          } else _s8.skipFn && _s8.skipFn.apply(_s8, _toConsumableArray(_s8.args)), this.fnMap.set(t, Ch({}, _s8, {\n            fn: e,\n            args: n,\n            skipFn: r\n          }));\n        } else {\n          var _s9 = window.setTimeout(function () {\n            var e = _this60.fnMap.get(t);\n\n            e && e.fn.apply(e, _toConsumableArray(e.args)), _this60.fnMap.delete(t);\n          }, i);\n\n          this.fnMap.set(t, {\n            fn: e,\n            threshold: i,\n            timer: _s9,\n            args: n,\n            skipFn: r\n          });\n        }\n      }\n    }]);\n\n    return _class9;\n  }())(),\n      Wh = qs(fh = Kh.throttleByKey).call(fh, Kh),\n      Hh =\n  /*#__PURE__*/\n  function () {\n    var _ref39 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee35(_ref38) {\n      var e, t, i, r, n, s, o, a, c, d;\n      return _regeneratorRuntime.wrap(function _callee35$(_context35) {\n        while (1) {\n          switch (_context35.prev = _context35.next) {\n            case 0:\n              e = _ref38.fragementLength, t = _ref38.referenceList, i = _ref38.asyncMapHandler, r = _ref38.allFailedhandler, n = _ref38.promisesCollector;\n              s = 0;\n              o = e;\n              c = 0;\n\n              d =\n              /*#__PURE__*/\n              function () {\n                var _ref40 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee34() {\n                  var e;\n                  return _regeneratorRuntime.wrap(function _callee34$(_context34) {\n                    while (1) {\n                      switch (_context34.prev = _context34.next) {\n                        case 0:\n                          e = function () {\n                            var e = s * o,\n                                r = e + o,\n                                n = Bs(t).call(t, e, r);\n                            return Es(n).call(n, i);\n                          }();\n\n                          n && n.push.apply(n, _toConsumableArray(e));\n                          _context34.prev = 2;\n                          _context34.next = 5;\n                          return Dh(e);\n\n                        case 5:\n                          a = _context34.sent;\n                          _context34.next = 15;\n                          break;\n\n                        case 8:\n                          _context34.prev = 8;\n                          _context34.t0 = _context34[\"catch\"](2);\n\n                          if (!(c += o, s++, !(c >= t.length))) {\n                            _context34.next = 14;\n                            break;\n                          }\n\n                          _context34.next = 13;\n                          return d();\n\n                        case 13:\n                          return _context34.abrupt(\"return\", void _context34.sent);\n\n                        case 14:\n                          r(_context34.t0);\n\n                        case 15:\n                          Xi(e).call(e, function (e) {\n                            return e.cancel();\n                          });\n\n                        case 16:\n                        case \"end\":\n                          return _context34.stop();\n                      }\n                    }\n                  }, _callee34, this, [[2, 8]]);\n                }));\n\n                return function d() {\n                  return _ref40.apply(this, arguments);\n                };\n              }();\n\n              _context35.next = 7;\n              return d();\n\n            case 7:\n              return _context35.abrupt(\"return\", a);\n\n            case 8:\n            case \"end\":\n              return _context35.stop();\n          }\n        }\n      }, _callee35, this);\n    }));\n\n    return function Hh(_x41) {\n      return _ref39.apply(this, arguments);\n    };\n  }();\n\n  var Yh = Ye(\"Array\").values,\n      qh = Array.prototype,\n      Jh = {\n    DOMTokenList: !0,\n    NodeList: !0\n  },\n      Xh = function Xh(e) {\n    var t = e.values;\n    return e === qh || e instanceof Array && t === qh.values || Jh.hasOwnProperty(lt(e)) ? Yh : t;\n  };\n\n  var zh = (_zh = {}, _defineProperty(_zh, Ld.ACCESS_POINT, (_Ld$ACCESS_POINT = {}, _defineProperty(_Ld$ACCESS_POINT, Md.NO_FLAG_SET, {\n    desc: \"flag is zero\",\n    retry: !1\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.FLAG_SET_BUT_EMPTY, {\n    desc: \"flag is empty\",\n    retry: !1\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.INVALID_FALG_SET, {\n    desc: \"invalid flag\",\n    retry: !1\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE, {\n    desc: \"no service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_P2P, {\n    desc: \"no unilbs p2p service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_VOET, {\n    desc: \"no unilbs voice service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_WEBRTC, {\n    desc: \"no unilbs webrtc service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_CDS, {\n    desc: \"no cds service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_CDN, {\n    desc: \"no cdn dispatcher service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_TDS, {\n    desc: \"no tds service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_REPORT, {\n    desc: \"no unilbs report service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_APP_CENTER, {\n    desc: \"no app center service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_ENV0, {\n    desc: \"no unilbs sig env0 service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_VOET, {\n    desc: \"no unilbs voet service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_STRING_UID, {\n    desc: \"no string uid service available\",\n    retry: !0\n  }), _defineProperty(_Ld$ACCESS_POINT, Md.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS, {\n    desc: \"no webrtc unilbs service available\",\n    retry: !0\n  }), _Ld$ACCESS_POINT)), _defineProperty(_zh, Ld.UNILBS, (_Ld$UNILBS = {}, _defineProperty(_Ld$UNILBS, Bd.INVALID_VENDOR_KEY, {\n    desc: \"invalid vendor key, can not find appid\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.INVALID_CHANNEL_NAME, {\n    desc: \"invalid channel name\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.INTERNAL_ERROR, {\n    desc: \"unilbs internal error\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.NO_AUTHORIZED, {\n    desc: \"invalid token, authorized failed\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.DYNAMIC_KEY_TIMEOUT, {\n    desc: \"dynamic key or token timeout\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.NO_ACTIVE_STATUS, {\n    desc: \"no active status\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.DYNAMIC_KEY_EXPIRED, {\n    desc: \"dynamic key expired\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.STATIC_USE_DYNAMIC_KEY, {\n    desc: \"static use dynamic key\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.DYNAMIC_USE_STATIC_KEY, {\n    desc: \"dynamic use static key\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.USER_OVERLOAD, {\n    desc: \"amount of users over load\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.FORBIDDEN_REGION, {\n    desc: \"the request is forbidden in this area\",\n    retry: !1\n  }), _defineProperty(_Ld$UNILBS, Bd.CANNOT_MEET_AREA_DEMAND, {\n    desc: \"unable to allocate services in this area\",\n    retry: !1\n  }), _Ld$UNILBS)), _defineProperty(_zh, Ld.STRING_UID_ALLOCATOR, (_Ld$STRING_UID_ALLOCA = {}, _defineProperty(_Ld$STRING_UID_ALLOCA, Pd.IIIEGAL_APPID, {\n    desc: \"invalid appid\",\n    retry: !1\n  }), _defineProperty(_Ld$STRING_UID_ALLOCA, Pd.IIIEGAL_UID, {\n    desc: \"invalid string uid\",\n    retry: !1\n  }), _defineProperty(_Ld$STRING_UID_ALLOCA, Pd.INTERNAL_ERROR, {\n    desc: \"string uid allocator internal error\",\n    retry: !0\n  }), _Ld$STRING_UID_ALLOCA)), _zh);\n\n  function Zh(e) {\n    var t = zh[Math.floor(e / 1e4)];\n    if (!t) return {\n      desc: \"unkonw error\",\n      retry: !1\n    };\n    var i = t[e % 1e4];\n\n    if (!i) {\n      if (Math.floor(e / 1e4) === Ld.ACCESS_POINT) {\n        var _t45 = e % 1e4;\n\n        if (\"1\" === _t45.toString()[0]) return {\n          desc: e.toString(),\n          retry: !1\n        };\n        if (\"2\" === _t45.toString()[0]) return {\n          desc: e.toString(),\n          retry: !0\n        };\n      }\n\n      return {\n        desc: \"unkonw error\",\n        retry: !1\n      };\n    }\n\n    return i;\n  }\n\n  var $h = (_$h = {}, _defineProperty(_$h, Ud.K_TIMESTAMP_EXPIRED, {\n    desc: \"K_TIMESTAMP_EXPIRED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_CHANNEL_PERMISSION_INVALID, {\n    desc: \"K_CHANNEL_PERMISSION_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_CERTIFICATE_INVALID, {\n    desc: \"K_CERTIFICATE_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_CHANNEL_NAME_EMPTY, {\n    desc: \"K_CHANNEL_NAME_EMPTY\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_CHANNEL_NOT_FOUND, {\n    desc: \"K_CHANNEL_NOT_FOUND\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_TICKET_INVALID, {\n    desc: \"K_TICKET_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_CHANNEL_CONFLICTED, {\n    desc: \"K_CHANNEL_CONFLICTED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_SERVICE_NOT_READY, {\n    desc: \"K_SERVICE_NOT_READY\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.K_SERVICE_TOO_HEAVY, {\n    desc: \"K_SERVICE_TOO_HEAVY\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.K_UID_BANNED, {\n    desc: \"K_UID_BANNED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.K_IP_BANNED, {\n    desc: \"K_IP_BANNED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_VENDOR_KEY, {\n    desc: \"ERR_INVALID_VENDOR_KEY\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_CHANNEL_NAME, {\n    desc: \"ERR_INVALID_CHANNEL_NAME\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.WARN_NO_AVAILABLE_CHANNEL, {\n    desc: \"WARN_NO_AVAILABLE_CHANNEL\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.WARN_LOOKUP_CHANNEL_TIMEOUT, {\n    desc: \"WARN_LOOKUP_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.WARN_LOOKUP_CHANNEL_REJECTED, {\n    desc: \"WARN_LOOKUP_CHANNEL_REJECTED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.WARN_OPEN_CHANNEL_TIMEOUT, {\n    desc: \"WARN_OPEN_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.WARN_OPEN_CHANNEL_REJECTED, {\n    desc: \"WARN_OPEN_CHANNEL_REJECTED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.WARN_REQUEST_DEFERRED, {\n    desc: \"WARN_REQUEST_DEFERRED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_DYNAMIC_KEY_TIMEOUT, {\n    desc: \"ERR_DYNAMIC_KEY_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_NO_AUTHORIZED, {\n    desc: \"ERR_NO_AUTHORIZED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_VOM_SERVICE_UNAVAILABLE, {\n    desc: \"ERR_VOM_SERVICE_UNAVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_NO_CHANNEL_AVAILABLE_CODE, {\n    desc: \"ERR_NO_CHANNEL_AVAILABLE_CODE\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_MASTER_VOCS_UNAVAILABLE, {\n    desc: \"ERR_MASTER_VOCS_UNAVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_INTERNAL_ERROR, {\n    desc: \"ERR_INTERNAL_ERROR\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_NO_ACTIVE_STATUS, {\n    desc: \"ERR_NO_ACTIVE_STATUS\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_UID, {\n    desc: \"ERR_INVALID_UID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_DYNAMIC_KEY_EXPIRED, {\n    desc: \"ERR_DYNAMIC_KEY_EXPIRED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_STATIC_USE_DYANMIC_KE, {\n    desc: \"ERR_STATIC_USE_DYANMIC_KE\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_DYNAMIC_USE_STATIC_KE, {\n    desc: \"ERR_DYNAMIC_USE_STATIC_KE\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_NO_VOCS_AVAILABLE, {\n    desc: \"ERR_NO_VOCS_AVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_NO_VOS_AVAILABLE, {\n    desc: \"ERR_NO_VOS_AVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_JOIN_CHANNEL_TIMEOUT, {\n    desc: \"ERR_JOIN_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_JOIN_BY_MULTI_IP, {\n    desc: \"ERR_JOIN_BY_MULTI_IP\",\n    action: \"recover\"\n  }), _defineProperty(_$h, Ud.ERR_NOT_JOINED, {\n    desc: \"ERR_NOT_JOINED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_REPEAT_JOIN_REQUEST, {\n    desc: \"ERR_REPEAT_JOIN_REQUEST\",\n    action: \"quit\"\n  }), _defineProperty(_$h, Ud.ERR_REPEAT_JOIN_CHANNEL, {\n    desc: \"ERR_REPEAT_JOIN_CHANNEL\",\n    action: \"quit\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_VENDOR_KEY, {\n    desc: \"ERR_INVALID_VENDOR_KEY\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_CHANNEL_NAME, {\n    desc: \"ERR_INVALID_CHANNEL_NAME\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_STRINGUID, {\n    desc: \"ERR_INVALID_STRINGUID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_TOO_MANY_USERS, {\n    desc: \"ERR_TOO_MANY_USERS\",\n    action: \"tryNext\"\n  }), _defineProperty(_$h, Ud.ERR_SET_CLIENT_ROLE_TIMEOUT, {\n    desc: \"ERR_SET_CLIENT_ROLE_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_SET_CLIENT_ROLE_NO_PERMISSION, {\n    desc: \"ERR_SET_CLIENT_ROLE_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE, {\n    desc: \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",\n    action: \"success\"\n  }), _defineProperty(_$h, Ud.ERR_PUBLISH_REQUEST_INVALID, {\n    desc: \"ERR_PUBLISH_REQUEST_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_SUBSCRIBE_REQUEST_INVALID, {\n    desc: \"ERR_SUBSCRIBE_REQUEST_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_NOT_SUPPORTED_MESSAGE, {\n    desc: \"ERR_NOT_SUPPORTED_MESSAGE\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_ILLEAGAL_PLUGIN, {\n    desc: \"ERR_ILLEAGAL_PLUGIN\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ILLEGAL_CLIENT_ROLE_LEVEL, {\n    desc: \"ILLEGAL_CLIENT_ROLE_LEVEL\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_REJOIN_TOKEN_INVALID, {\n    desc: \"ERR_REJOIN_TOKEN_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_REJOIN_USER_NOT_JOINED, {\n    desc: \"ERR_REJOIN_NOT_JOINED\",\n    action: \"failed\"\n  }), _defineProperty(_$h, Ud.ERR_INVALID_OPTIONAL_INFO, {\n    desc: \"ERR_INVALID_OPTIONAL_INFO\",\n    action: \"quit\"\n  }), _defineProperty(_$h, Ud.ERR_TEST_RECOVER, {\n    desc: \"ERR_TEST_RECOVER\",\n    action: \"recover\"\n  }), _defineProperty(_$h, Ud.ERR_TEST_TRYNEXT, {\n    desc: \"ERR_TEST_TRYNEXT\",\n    action: \"recover\"\n  }), _defineProperty(_$h, Ud.ERR_TEST_RETRY, {\n    desc: \"ERR_TEST_RETRY\",\n    action: \"recover\"\n  }), _defineProperty(_$h, Ud.ILLEGAL_AES_PASSWORD, {\n    desc: \"ERR_TEST_RETRY\",\n    action: \"failed\"\n  }), _$h);\n\n  function ep(e) {\n    var t = $h[e];\n    return t || {\n      desc: \"UNKNOW_ERROR_\".concat(e),\n      action: \"failed\"\n    };\n  }\n\n  var tp = t(function (e, t) {\n    e.exports = function () {\n      var e = {\n        d: function d(t, i) {\n          for (var r in i) {\n            e.o(i, r) && !e.o(t, r) && Object.defineProperty(t, r, {\n              enumerable: !0,\n              get: i[r]\n            });\n          }\n        },\n        o: function o(e, t) {\n          return Object.prototype.hasOwnProperty.call(e, t);\n        },\n        r: function r(e) {\n          \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n            value: \"Module\"\n          }), Object.defineProperty(e, \"__esModule\", {\n            value: !0\n          });\n        }\n      },\n          t = {};\n      e.r(t), e.d(t, {\n        DataViewIndexOutOfBoundsError: function DataViewIndexOutOfBoundsError() {\n          return x;\n        },\n        DecodeError: function DecodeError() {\n          return I;\n        },\n        Decoder: function Decoder() {\n          return j;\n        },\n        EXT_TIMESTAMP: function EXT_TIMESTAMP() {\n          return f;\n        },\n        Encoder: function Encoder() {\n          return O;\n        },\n        ExtData: function ExtData() {\n          return g;\n        },\n        ExtensionCodec: function ExtensionCodec() {\n          return y;\n        },\n        decode: function decode() {\n          return W;\n        },\n        decodeArrayStream: function decodeArrayStream() {\n          return $;\n        },\n        decodeAsync: function decodeAsync() {\n          return Z;\n        },\n        decodeMulti: function decodeMulti() {\n          return H;\n        },\n        decodeMultiStream: function decodeMultiStream() {\n          return ee;\n        },\n        decodeStream: function decodeStream() {\n          return te;\n        },\n        decodeTimestampExtension: function decodeTimestampExtension() {\n          return T;\n        },\n        decodeTimestampToTimeSpec: function decodeTimestampToTimeSpec() {\n          return R;\n        },\n        encode: function encode() {\n          return D;\n        },\n        encodeDateToTimeSpec: function encodeDateToTimeSpec() {\n          return C;\n        },\n        encodeTimeSpecToTimestamp: function encodeTimeSpecToTimestamp() {\n          return m;\n        },\n        encodeTimestampExtension: function encodeTimestampExtension() {\n          return S;\n        }\n      });\n      var i = 4294967295;\n\n      function r(e, t, i) {\n        var r = Math.floor(i / 4294967296),\n            n = i;\n        e.setUint32(t, r), e.setUint32(t + 4, n);\n      }\n\n      function n(e, t) {\n        return 4294967296 * e.getInt32(t) + e.getUint32(t + 4);\n      }\n\n      var s = function s(e, t) {\n        var i = \"function\" == typeof Symbol && e[Symbol.iterator];\n        if (!i) return e;\n        var r,\n            n,\n            s = i.call(e),\n            o = [];\n\n        try {\n          for (; (void 0 === t || t-- > 0) && !(r = s.next()).done;) {\n            o.push(r.value);\n          }\n        } catch (e) {\n          n = {\n            error: e\n          };\n        } finally {\n          try {\n            r && !r.done && (i = s.return) && i.call(s);\n          } finally {\n            if (n) throw n.error;\n          }\n        }\n\n        return o;\n      },\n          o = function o(e, t) {\n        for (var i = 0, r = t.length, n = e.length; i < r; i++, n++) {\n          e[n] = t[i];\n        }\n\n        return e;\n      },\n          a = \"undefined\" != typeof TextEncoder && \"undefined\" != typeof TextDecoder;\n\n      function c(e) {\n        for (var t = e.length, i = 0, r = 0; r < t;) {\n          var n = e.charCodeAt(r++);\n          if (0 != (4294967168 & n)) {\n            if (0 == (4294965248 & n)) i += 2;else {\n              if (n >= 55296 && n <= 56319 && r < t) {\n                var s = e.charCodeAt(r);\n                56320 == (64512 & s) && (++r, n = ((1023 & n) << 10) + (1023 & s) + 65536);\n              }\n\n              i += 0 == (4294901760 & n) ? 3 : 4;\n            }\n          } else i++;\n        }\n\n        return i;\n      }\n\n      var d = a ? new TextEncoder() : void 0,\n          l = a ? \"undefined\" != typeof process ? 200 : 0 : i,\n          A = (null == d ? void 0 : d.encodeInto) ? function (e, t, i) {\n        d.encodeInto(e, t.subarray(i));\n      } : function (e, t, i) {\n        t.set(d.encode(e), i);\n      };\n\n      function u(e, t, i) {\n        for (var r = t, n = r + i, a = [], c = \"\"; r < n;) {\n          var d = e[r++];\n          if (0 == (128 & d)) a.push(d);else if (192 == (224 & d)) {\n            var l = 63 & e[r++];\n            a.push((31 & d) << 6 | l);\n          } else if (224 == (240 & d)) {\n            l = 63 & e[r++];\n            var A = 63 & e[r++];\n            a.push((31 & d) << 12 | l << 6 | A);\n          } else if (240 == (248 & d)) {\n            var u = (7 & d) << 18 | (l = 63 & e[r++]) << 12 | (A = 63 & e[r++]) << 6 | 63 & e[r++];\n            u > 65535 && (u -= 65536, a.push(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), a.push(u);\n          } else a.push(d);\n          a.length >= 4096 && (c += String.fromCharCode.apply(String, o([], s(a))), a.length = 0);\n        }\n\n        return a.length > 0 && (c += String.fromCharCode.apply(String, o([], s(a)))), c;\n      }\n\n      var _h3,\n          p = a ? new TextDecoder() : null,\n          E = a ? \"undefined\" != typeof process ? 200 : 0 : i,\n          g = function g(e, t) {\n        this.type = e, this.data = t;\n      },\n          _ = (_h3 = function h(e, t) {\n        return (_h3 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (e, t) {\n          e.__proto__ = t;\n        } || function (e, t) {\n          for (var i in t) {\n            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n          }\n        })(e, t);\n      }, function (e, t) {\n        if (\"function\" != typeof t && null !== t) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n\n        function i() {\n          this.constructor = e;\n        }\n\n        _h3(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n      }),\n          I = function (e) {\n        function t(i) {\n          var r = e.call(this, i) || this,\n              n = Object.create(t.prototype);\n          return Object.setPrototypeOf(r, n), Object.defineProperty(r, \"name\", {\n            configurable: !0,\n            enumerable: !1,\n            value: t.name\n          }), r;\n        }\n\n        return _(t, e), t;\n      }(Error),\n          f = -1;\n\n      function m(e) {\n        var t,\n            i = e.sec,\n            n = e.nsec;\n\n        if (i >= 0 && n >= 0 && i <= 17179869183) {\n          if (0 === n && i <= 4294967295) {\n            var s = new Uint8Array(4);\n            return (t = new DataView(s.buffer)).setUint32(0, i), s;\n          }\n\n          var o = i / 4294967296,\n              a = 4294967295 & i;\n          return s = new Uint8Array(8), (t = new DataView(s.buffer)).setUint32(0, n << 2 | 3 & o), t.setUint32(4, a), s;\n        }\n\n        return s = new Uint8Array(12), (t = new DataView(s.buffer)).setUint32(0, n), r(t, 4, i), s;\n      }\n\n      function C(e) {\n        var t = e.getTime(),\n            i = Math.floor(t / 1e3),\n            r = 1e6 * (t - 1e3 * i),\n            n = Math.floor(r / 1e9);\n        return {\n          sec: i + n,\n          nsec: r - 1e9 * n\n        };\n      }\n\n      function S(e) {\n        return e instanceof Date ? m(C(e)) : null;\n      }\n\n      function R(e) {\n        var t = new DataView(e.buffer, e.byteOffset, e.byteLength);\n\n        switch (e.byteLength) {\n          case 4:\n            return {\n              sec: t.getUint32(0),\n              nsec: 0\n            };\n\n          case 8:\n            var i = t.getUint32(0);\n            return {\n              sec: 4294967296 * (3 & i) + t.getUint32(4),\n              nsec: i >>> 2\n            };\n\n          case 12:\n            return {\n              sec: n(t, 4),\n              nsec: t.getUint32(0)\n            };\n\n          default:\n            throw new I(\"Unrecognized data size for timestamp (expected 4, 8, or 12): \" + e.length);\n        }\n      }\n\n      function T(e) {\n        var t = R(e);\n        return new Date(1e3 * t.sec + t.nsec / 1e6);\n      }\n\n      var v = {\n        type: f,\n        encode: S,\n        decode: T\n      },\n          y = function () {\n        function e() {\n          this.builtInEncoders = [], this.builtInDecoders = [], this.encoders = [], this.decoders = [], this.register(v);\n        }\n\n        return e.prototype.register = function (e) {\n          var t = e.type,\n              i = e.encode,\n              r = e.decode;\n          if (t >= 0) this.encoders[t] = i, this.decoders[t] = r;else {\n            var n = 1 + t;\n            this.builtInEncoders[n] = i, this.builtInDecoders[n] = r;\n          }\n        }, e.prototype.tryToEncode = function (e, t) {\n          for (var i = 0; i < this.builtInEncoders.length; i++) {\n            if (null != (r = this.builtInEncoders[i]) && null != (n = r(e, t))) return new g(-1 - i, n);\n          }\n\n          for (i = 0; i < this.encoders.length; i++) {\n            var r, n;\n            if (null != (r = this.encoders[i]) && null != (n = r(e, t))) return new g(i, n);\n          }\n\n          return e instanceof g ? e : null;\n        }, e.prototype.decode = function (e, t, i) {\n          var r = t < 0 ? this.builtInDecoders[-1 - t] : this.decoders[t];\n          return r ? r(e, t, i) : new g(t, e);\n        }, e.defaultCodec = new e(), e;\n      }();\n\n      function w(e) {\n        return e instanceof Uint8Array ? e : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : e instanceof ArrayBuffer ? new Uint8Array(e) : Uint8Array.from(e);\n      }\n\n      var N = function N(e) {\n        var t = \"function\" == typeof Symbol && Symbol.iterator,\n            i = t && e[t],\n            r = 0;\n        if (i) return i.call(e);\n        if (e && \"number\" == typeof e.length) return {\n          next: function next() {\n            return e && r >= e.length && (e = void 0), {\n              value: e && e[r++],\n              done: !e\n            };\n          }\n        };\n        throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n      },\n          O = function () {\n        function e(e, t, i, r, n, s, o, a) {\n          void 0 === e && (e = y.defaultCodec), void 0 === t && (t = void 0), void 0 === i && (i = 100), void 0 === r && (r = 2048), void 0 === n && (n = !1), void 0 === s && (s = !1), void 0 === o && (o = !1), void 0 === a && (a = !1), this.extensionCodec = e, this.context = t, this.maxDepth = i, this.initialBufferSize = r, this.sortKeys = n, this.forceFloat32 = s, this.ignoreUndefined = o, this.forceIntegerToFloat = a, this.pos = 0, this.view = new DataView(new ArrayBuffer(this.initialBufferSize)), this.bytes = new Uint8Array(this.view.buffer);\n        }\n\n        return e.prototype.getUint8Array = function () {\n          return this.bytes.subarray(0, this.pos);\n        }, e.prototype.reinitializeState = function () {\n          this.pos = 0;\n        }, e.prototype.encode = function (e) {\n          return this.reinitializeState(), this.doEncode(e, 1), this.getUint8Array();\n        }, e.prototype.doEncode = function (e, t) {\n          if (t > this.maxDepth) throw new Error(\"Too deep objects in depth \" + t);\n          null == e ? this.encodeNil() : \"boolean\" == typeof e ? this.encodeBoolean(e) : \"number\" == typeof e ? this.encodeNumber(e) : \"string\" == typeof e ? this.encodeString(e) : this.encodeObject(e, t);\n        }, e.prototype.ensureBufferSizeToWrite = function (e) {\n          var t = this.pos + e;\n          this.view.byteLength < t && this.resizeBuffer(2 * t);\n        }, e.prototype.resizeBuffer = function (e) {\n          var t = new ArrayBuffer(e),\n              i = new Uint8Array(t),\n              r = new DataView(t);\n          i.set(this.bytes), this.view = r, this.bytes = i;\n        }, e.prototype.encodeNil = function () {\n          this.writeU8(192);\n        }, e.prototype.encodeBoolean = function (e) {\n          !1 === e ? this.writeU8(194) : this.writeU8(195);\n        }, e.prototype.encodeNumber = function (e) {\n          Number.isSafeInteger(e) && !this.forceIntegerToFloat ? e >= 0 ? e < 128 ? this.writeU8(e) : e < 256 ? (this.writeU8(204), this.writeU8(e)) : e < 65536 ? (this.writeU8(205), this.writeU16(e)) : e < 4294967296 ? (this.writeU8(206), this.writeU32(e)) : (this.writeU8(207), this.writeU64(e)) : e >= -32 ? this.writeU8(224 | e + 32) : e >= -128 ? (this.writeU8(208), this.writeI8(e)) : e >= -32768 ? (this.writeU8(209), this.writeI16(e)) : e >= -2147483648 ? (this.writeU8(210), this.writeI32(e)) : (this.writeU8(211), this.writeI64(e)) : this.forceFloat32 ? (this.writeU8(202), this.writeF32(e)) : (this.writeU8(203), this.writeF64(e));\n        }, e.prototype.writeStringHeader = function (e) {\n          if (e < 32) this.writeU8(160 + e);else if (e < 256) this.writeU8(217), this.writeU8(e);else if (e < 65536) this.writeU8(218), this.writeU16(e);else {\n            if (!(e < 4294967296)) throw new Error(\"Too long string: \" + e + \" bytes in UTF-8\");\n            this.writeU8(219), this.writeU32(e);\n          }\n        }, e.prototype.encodeString = function (e) {\n          if (e.length > l) {\n            var t = c(e);\n            this.ensureBufferSizeToWrite(5 + t), this.writeStringHeader(t), A(e, this.bytes, this.pos), this.pos += t;\n          } else t = c(e), this.ensureBufferSizeToWrite(5 + t), this.writeStringHeader(t), function (e, t, i) {\n            for (var r = e.length, n = i, s = 0; s < r;) {\n              var o = e.charCodeAt(s++);\n\n              if (0 != (4294967168 & o)) {\n                if (0 == (4294965248 & o)) t[n++] = o >> 6 & 31 | 192;else {\n                  if (o >= 55296 && o <= 56319 && s < r) {\n                    var a = e.charCodeAt(s);\n                    56320 == (64512 & a) && (++s, o = ((1023 & o) << 10) + (1023 & a) + 65536);\n                  }\n\n                  0 == (4294901760 & o) ? (t[n++] = o >> 12 & 15 | 224, t[n++] = o >> 6 & 63 | 128) : (t[n++] = o >> 18 & 7 | 240, t[n++] = o >> 12 & 63 | 128, t[n++] = o >> 6 & 63 | 128);\n                }\n                t[n++] = 63 & o | 128;\n              } else t[n++] = o;\n            }\n          }(e, this.bytes, this.pos), this.pos += t;\n        }, e.prototype.encodeObject = function (e, t) {\n          var i = this.extensionCodec.tryToEncode(e, this.context);\n          if (null != i) this.encodeExtension(i);else if (Array.isArray(e)) this.encodeArray(e, t);else if (ArrayBuffer.isView(e)) this.encodeBinary(e);else {\n            if (\"object\" != typeof e) throw new Error(\"Unrecognized object: \" + Object.prototype.toString.apply(e));\n            this.encodeMap(e, t);\n          }\n        }, e.prototype.encodeBinary = function (e) {\n          var t = e.byteLength;\n          if (t < 256) this.writeU8(196), this.writeU8(t);else if (t < 65536) this.writeU8(197), this.writeU16(t);else {\n            if (!(t < 4294967296)) throw new Error(\"Too large binary: \" + t);\n            this.writeU8(198), this.writeU32(t);\n          }\n          var i = w(e);\n          this.writeU8a(i);\n        }, e.prototype.encodeArray = function (e, t) {\n          var i,\n              r,\n              n = e.length;\n          if (n < 16) this.writeU8(144 + n);else if (n < 65536) this.writeU8(220), this.writeU16(n);else {\n            if (!(n < 4294967296)) throw new Error(\"Too large array: \" + n);\n            this.writeU8(221), this.writeU32(n);\n          }\n\n          try {\n            for (var s = N(e), o = s.next(); !o.done; o = s.next()) {\n              var a = o.value;\n              this.doEncode(a, t + 1);\n            }\n          } catch (e) {\n            i = {\n              error: e\n            };\n          } finally {\n            try {\n              o && !o.done && (r = s.return) && r.call(s);\n            } finally {\n              if (i) throw i.error;\n            }\n          }\n        }, e.prototype.countWithoutUndefined = function (e, t) {\n          var i,\n              r,\n              n = 0;\n\n          try {\n            for (var s = N(t), o = s.next(); !o.done; o = s.next()) {\n              void 0 !== e[o.value] && n++;\n            }\n          } catch (e) {\n            i = {\n              error: e\n            };\n          } finally {\n            try {\n              o && !o.done && (r = s.return) && r.call(s);\n            } finally {\n              if (i) throw i.error;\n            }\n          }\n\n          return n;\n        }, e.prototype.encodeMap = function (e, t) {\n          var i,\n              r,\n              n = Object.keys(e);\n          this.sortKeys && n.sort();\n          var s = this.ignoreUndefined ? this.countWithoutUndefined(e, n) : n.length;\n          if (s < 16) this.writeU8(128 + s);else if (s < 65536) this.writeU8(222), this.writeU16(s);else {\n            if (!(s < 4294967296)) throw new Error(\"Too large map object: \" + s);\n            this.writeU8(223), this.writeU32(s);\n          }\n\n          try {\n            for (var o = N(n), a = o.next(); !a.done; a = o.next()) {\n              var c = a.value,\n                  d = e[c];\n              this.ignoreUndefined && void 0 === d || (this.encodeString(c), this.doEncode(d, t + 1));\n            }\n          } catch (e) {\n            i = {\n              error: e\n            };\n          } finally {\n            try {\n              a && !a.done && (r = o.return) && r.call(o);\n            } finally {\n              if (i) throw i.error;\n            }\n          }\n        }, e.prototype.encodeExtension = function (e) {\n          var t = e.data.length;\n          if (1 === t) this.writeU8(212);else if (2 === t) this.writeU8(213);else if (4 === t) this.writeU8(214);else if (8 === t) this.writeU8(215);else if (16 === t) this.writeU8(216);else if (t < 256) this.writeU8(199), this.writeU8(t);else if (t < 65536) this.writeU8(200), this.writeU16(t);else {\n            if (!(t < 4294967296)) throw new Error(\"Too large extension object: \" + t);\n            this.writeU8(201), this.writeU32(t);\n          }\n          this.writeI8(e.type), this.writeU8a(e.data);\n        }, e.prototype.writeU8 = function (e) {\n          this.ensureBufferSizeToWrite(1), this.view.setUint8(this.pos, e), this.pos++;\n        }, e.prototype.writeU8a = function (e) {\n          var t = e.length;\n          this.ensureBufferSizeToWrite(t), this.bytes.set(e, this.pos), this.pos += t;\n        }, e.prototype.writeI8 = function (e) {\n          this.ensureBufferSizeToWrite(1), this.view.setInt8(this.pos, e), this.pos++;\n        }, e.prototype.writeU16 = function (e) {\n          this.ensureBufferSizeToWrite(2), this.view.setUint16(this.pos, e), this.pos += 2;\n        }, e.prototype.writeI16 = function (e) {\n          this.ensureBufferSizeToWrite(2), this.view.setInt16(this.pos, e), this.pos += 2;\n        }, e.prototype.writeU32 = function (e) {\n          this.ensureBufferSizeToWrite(4), this.view.setUint32(this.pos, e), this.pos += 4;\n        }, e.prototype.writeI32 = function (e) {\n          this.ensureBufferSizeToWrite(4), this.view.setInt32(this.pos, e), this.pos += 4;\n        }, e.prototype.writeF32 = function (e) {\n          this.ensureBufferSizeToWrite(4), this.view.setFloat32(this.pos, e), this.pos += 4;\n        }, e.prototype.writeF64 = function (e) {\n          this.ensureBufferSizeToWrite(8), this.view.setFloat64(this.pos, e), this.pos += 8;\n        }, e.prototype.writeU64 = function (e) {\n          this.ensureBufferSizeToWrite(8), function (e, t, i) {\n            var r = i / 4294967296,\n                n = i;\n            e.setUint32(t, r), e.setUint32(t + 4, n);\n          }(this.view, this.pos, e), this.pos += 8;\n        }, e.prototype.writeI64 = function (e) {\n          this.ensureBufferSizeToWrite(8), r(this.view, this.pos, e), this.pos += 8;\n        }, e;\n      }(),\n          b = {};\n\n      function D(e, t) {\n        return void 0 === t && (t = b), new O(t.extensionCodec, t.context, t.maxDepth, t.initialBufferSize, t.sortKeys, t.forceFloat32, t.ignoreUndefined, t.forceIntegerToFloat).encode(e);\n      }\n\n      function k(e) {\n        return (e < 0 ? \"-\" : \"\") + \"0x\" + Math.abs(e).toString(16).padStart(2, \"0\");\n      }\n\n      var L = function () {\n        function e(e, t) {\n          void 0 === e && (e = 16), void 0 === t && (t = 16), this.maxKeyLength = e, this.maxLengthPerKey = t, this.hit = 0, this.miss = 0, this.caches = [];\n\n          for (var i = 0; i < this.maxKeyLength; i++) {\n            this.caches.push([]);\n          }\n        }\n\n        return e.prototype.canBeCached = function (e) {\n          return e > 0 && e <= this.maxKeyLength;\n        }, e.prototype.find = function (e, t, i) {\n          var r,\n              n,\n              s = this.caches[i - 1];\n\n          try {\n            e: for (var o = function (e) {\n              var t = \"function\" == typeof Symbol && Symbol.iterator,\n                  i = t && e[t],\n                  r = 0;\n              if (i) return i.call(e);\n              if (e && \"number\" == typeof e.length) return {\n                next: function next() {\n                  return e && r >= e.length && (e = void 0), {\n                    value: e && e[r++],\n                    done: !e\n                  };\n                }\n              };\n              throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n            }(s), a = o.next(); !a.done; a = o.next()) {\n              for (var c = a.value, d = c.bytes, l = 0; l < i; l++) {\n                if (d[l] !== e[t + l]) continue e;\n              }\n\n              return c.str;\n            }\n          } catch (e) {\n            r = {\n              error: e\n            };\n          } finally {\n            try {\n              a && !a.done && (n = o.return) && n.call(o);\n            } finally {\n              if (r) throw r.error;\n            }\n          }\n\n          return null;\n        }, e.prototype.store = function (e, t) {\n          var i = this.caches[e.length - 1],\n              r = {\n            bytes: e,\n            str: t\n          };\n          i.length >= this.maxLengthPerKey ? i[Math.random() * i.length | 0] = r : i.push(r);\n        }, e.prototype.decode = function (e, t, i) {\n          var r = this.find(e, t, i);\n          if (null != r) return this.hit++, r;\n          this.miss++;\n          var n = u(e, t, i),\n              s = Uint8Array.prototype.slice.call(e, t, t + i);\n          return this.store(s, n), n;\n        }, e;\n      }(),\n          P = function P(e, t) {\n        var i,\n            r,\n            n,\n            s,\n            o = {\n          label: 0,\n          sent: function sent() {\n            if (1 & n[0]) throw n[1];\n            return n[1];\n          },\n          trys: [],\n          ops: []\n        };\n        return s = {\n          next: a(0),\n          throw: a(1),\n          return: a(2)\n        }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n          return this;\n        }), s;\n\n        function a(s) {\n          return function (a) {\n            return function (s) {\n              if (i) throw new TypeError(\"Generator is already executing.\");\n\n              for (; o;) {\n                try {\n                  if (i = 1, r && (n = 2 & s[0] ? r.return : s[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, s[1])).done) return n;\n\n                  switch (r = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n                    case 0:\n                    case 1:\n                      n = s;\n                      break;\n\n                    case 4:\n                      return o.label++, {\n                        value: s[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      o.label++, r = s[1], s = [0];\n                      continue;\n\n                    case 7:\n                      s = o.ops.pop(), o.trys.pop();\n                      continue;\n\n                    default:\n                      if (!((n = (n = o.trys).length > 0 && n[n.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                        o = 0;\n                        continue;\n                      }\n\n                      if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                        o.label = s[1];\n                        break;\n                      }\n\n                      if (6 === s[0] && o.label < n[1]) {\n                        o.label = n[1], n = s;\n                        break;\n                      }\n\n                      if (n && o.label < n[2]) {\n                        o.label = n[2], o.ops.push(s);\n                        break;\n                      }\n\n                      n[2] && o.ops.pop(), o.trys.pop();\n                      continue;\n                  }\n\n                  s = t.call(e, o);\n                } catch (e) {\n                  s = [6, e], r = 0;\n                } finally {\n                  i = n = 0;\n                }\n              }\n\n              if (5 & s[0]) throw s[1];\n              return {\n                value: s[0] ? s[1] : void 0,\n                done: !0\n              };\n            }([s, a]);\n          };\n        }\n      },\n          B = function B(e) {\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var t,\n            i = e[Symbol.asyncIterator];\n        return i ? i.call(e) : (e = \"function\" == typeof __values ? __values(e) : e[Symbol.iterator](), t = {}, r(\"next\"), r(\"throw\"), r(\"return\"), t[Symbol.asyncIterator] = function () {\n          return this;\n        }, t);\n\n        function r(i) {\n          t[i] = e[i] && function (t) {\n            return new Promise(function (r, n) {\n              !function (e, t, i, r) {\n                Promise.resolve(r).then(function (t) {\n                  e({\n                    value: t,\n                    done: i\n                  });\n                }, t);\n              }(r, n, (t = e[i](t)).done, t.value);\n            });\n          };\n        }\n      },\n          M = function M(e) {\n        return this instanceof M ? (this.v = e, this) : new M(e);\n      },\n          U = function U(e, t, i) {\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var r,\n            n = i.apply(e, t || []),\n            s = [];\n        return r = {}, o(\"next\"), o(\"throw\"), o(\"return\"), r[Symbol.asyncIterator] = function () {\n          return this;\n        }, r;\n\n        function o(e) {\n          n[e] && (r[e] = function (t) {\n            return new Promise(function (i, r) {\n              s.push([e, t, i, r]) > 1 || a(e, t);\n            });\n          });\n        }\n\n        function a(e, t) {\n          try {\n            (i = n[e](t)).value instanceof M ? Promise.resolve(i.value.v).then(c, d) : l(s[0][2], i);\n          } catch (e) {\n            l(s[0][3], e);\n          }\n\n          var i;\n        }\n\n        function c(e) {\n          a(\"next\", e);\n        }\n\n        function d(e) {\n          a(\"throw\", e);\n        }\n\n        function l(e, t) {\n          e(t), s.shift(), s.length && a(s[0][0], s[0][1]);\n        }\n      },\n          Q = new DataView(new ArrayBuffer(0)),\n          F = new Uint8Array(Q.buffer),\n          x = function () {\n        try {\n          Q.getInt8(0);\n        } catch (e) {\n          return e.constructor;\n        }\n\n        throw new Error(\"never reached\");\n      }(),\n          V = new x(\"Insufficient data\"),\n          G = new L(),\n          j = function () {\n        function e(e, t, r, n, s, o, a, c) {\n          void 0 === e && (e = y.defaultCodec), void 0 === t && (t = void 0), void 0 === r && (r = i), void 0 === n && (n = i), void 0 === s && (s = i), void 0 === o && (o = i), void 0 === a && (a = i), void 0 === c && (c = G), this.extensionCodec = e, this.context = t, this.maxStrLength = r, this.maxBinLength = n, this.maxArrayLength = s, this.maxMapLength = o, this.maxExtLength = a, this.keyDecoder = c, this.totalPos = 0, this.pos = 0, this.view = Q, this.bytes = F, this.headByte = -1, this.stack = [];\n        }\n\n        return e.prototype.reinitializeState = function () {\n          this.totalPos = 0, this.headByte = -1, this.stack.length = 0;\n        }, e.prototype.setBuffer = function (e) {\n          this.bytes = w(e), this.view = function (e) {\n            if (e instanceof ArrayBuffer) return new DataView(e);\n            var t = w(e);\n            return new DataView(t.buffer, t.byteOffset, t.byteLength);\n          }(this.bytes), this.pos = 0;\n        }, e.prototype.appendBuffer = function (e) {\n          if (-1 !== this.headByte || this.hasRemaining(1)) {\n            var t = this.bytes.subarray(this.pos),\n                i = w(e),\n                r = new Uint8Array(t.length + i.length);\n            r.set(t), r.set(i, t.length), this.setBuffer(r);\n          } else this.setBuffer(e);\n        }, e.prototype.hasRemaining = function (e) {\n          return this.view.byteLength - this.pos >= e;\n        }, e.prototype.createExtraByteError = function (e) {\n          var t = this.view,\n              i = this.pos;\n          return new RangeError(\"Extra \" + (t.byteLength - i) + \" of \" + t.byteLength + \" byte(s) found at buffer[\" + e + \"]\");\n        }, e.prototype.decode = function (e) {\n          this.reinitializeState(), this.setBuffer(e);\n          var t = this.doDecodeSync();\n          if (this.hasRemaining(1)) throw this.createExtraByteError(this.pos);\n          return t;\n        }, e.prototype.decodeMulti = function (e) {\n          return P(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.reinitializeState(), this.setBuffer(e), t.label = 1;\n\n              case 1:\n                return this.hasRemaining(1) ? [4, this.doDecodeSync()] : [3, 3];\n\n              case 2:\n                return t.sent(), [3, 1];\n\n              case 3:\n                return [2];\n            }\n          });\n        }, e.prototype.decodeAsync = function (e) {\n          var t, i, r, n, s, o, a, c;\n          return s = this, o = void 0, c = function c() {\n            var s, o, a, c, d, l, A, u;\n            return P(this, function (h) {\n              switch (h.label) {\n                case 0:\n                  s = !1, h.label = 1;\n\n                case 1:\n                  h.trys.push([1, 6, 7, 12]), t = B(e), h.label = 2;\n\n                case 2:\n                  return [4, t.next()];\n\n                case 3:\n                  if ((i = h.sent()).done) return [3, 5];\n                  if (a = i.value, s) throw this.createExtraByteError(this.totalPos);\n                  this.appendBuffer(a);\n\n                  try {\n                    o = this.doDecodeSync(), s = !0;\n                  } catch (e) {\n                    if (!(e instanceof x)) throw e;\n                  }\n\n                  this.totalPos += this.pos, h.label = 4;\n\n                case 4:\n                  return [3, 2];\n\n                case 5:\n                  return [3, 12];\n\n                case 6:\n                  return c = h.sent(), r = {\n                    error: c\n                  }, [3, 12];\n\n                case 7:\n                  return h.trys.push([7,, 10, 11]), i && !i.done && (n = t.return) ? [4, n.call(t)] : [3, 9];\n\n                case 8:\n                  h.sent(), h.label = 9;\n\n                case 9:\n                  return [3, 11];\n\n                case 10:\n                  if (r) throw r.error;\n                  return [7];\n\n                case 11:\n                  return [7];\n\n                case 12:\n                  if (s) {\n                    if (this.hasRemaining(1)) throw this.createExtraByteError(this.totalPos);\n                    return [2, o];\n                  }\n\n                  throw l = (d = this).headByte, A = d.pos, u = d.totalPos, new RangeError(\"Insufficient data in parsing \" + k(l) + \" at \" + u + \" (\" + A + \" in the current buffer)\");\n              }\n            });\n          }, new ((a = void 0) || (a = Promise))(function (e, t) {\n            function i(e) {\n              try {\n                n(c.next(e));\n              } catch (e) {\n                t(e);\n              }\n            }\n\n            function r(e) {\n              try {\n                n(c.throw(e));\n              } catch (e) {\n                t(e);\n              }\n            }\n\n            function n(t) {\n              var n;\n              t.done ? e(t.value) : (n = t.value, n instanceof a ? n : new a(function (e) {\n                e(n);\n              })).then(i, r);\n            }\n\n            n((c = c.apply(s, o || [])).next());\n          });\n        }, e.prototype.decodeArrayStream = function (e) {\n          return this.decodeMultiAsync(e, !0);\n        }, e.prototype.decodeStream = function (e) {\n          return this.decodeMultiAsync(e, !1);\n        }, e.prototype.decodeMultiAsync = function (e, t) {\n          return U(this, arguments, function () {\n            var i, r, n, s, o, a, c, d, l;\n            return P(this, function (A) {\n              switch (A.label) {\n                case 0:\n                  i = t, r = -1, A.label = 1;\n\n                case 1:\n                  A.trys.push([1, 13, 14, 19]), n = B(e), A.label = 2;\n\n                case 2:\n                  return [4, M(n.next())];\n\n                case 3:\n                  if ((s = A.sent()).done) return [3, 12];\n                  if (o = s.value, t && 0 === r) throw this.createExtraByteError(this.totalPos);\n                  this.appendBuffer(o), i && (r = this.readArraySize(), i = !1, this.complete()), A.label = 4;\n\n                case 4:\n                  A.trys.push([4, 9,, 10]), A.label = 5;\n\n                case 5:\n                  return [4, M(this.doDecodeSync())];\n\n                case 6:\n                  return [4, A.sent()];\n\n                case 7:\n                  return A.sent(), 0 == --r ? [3, 8] : [3, 5];\n\n                case 8:\n                  return [3, 10];\n\n                case 9:\n                  if (!((a = A.sent()) instanceof x)) throw a;\n                  return [3, 10];\n\n                case 10:\n                  this.totalPos += this.pos, A.label = 11;\n\n                case 11:\n                  return [3, 2];\n\n                case 12:\n                  return [3, 19];\n\n                case 13:\n                  return c = A.sent(), d = {\n                    error: c\n                  }, [3, 19];\n\n                case 14:\n                  return A.trys.push([14,, 17, 18]), s && !s.done && (l = n.return) ? [4, M(l.call(n))] : [3, 16];\n\n                case 15:\n                  A.sent(), A.label = 16;\n\n                case 16:\n                  return [3, 18];\n\n                case 17:\n                  if (d) throw d.error;\n                  return [7];\n\n                case 18:\n                  return [7];\n\n                case 19:\n                  return [2];\n              }\n            });\n          });\n        }, e.prototype.doDecodeSync = function () {\n          e: for (;;) {\n            var e = this.readHeadByte(),\n                t = void 0;\n            if (e >= 224) t = e - 256;else if (e < 192) {\n              if (e < 128) t = e;else if (e < 144) {\n                if (0 != (r = e - 128)) {\n                  this.pushMapState(r), this.complete();\n                  continue e;\n                }\n\n                t = {};\n              } else if (e < 160) {\n                if (0 != (r = e - 144)) {\n                  this.pushArrayState(r), this.complete();\n                  continue e;\n                }\n\n                t = [];\n              } else {\n                var i = e - 160;\n                t = this.decodeUtf8String(i, 0);\n              }\n            } else if (192 === e) t = null;else if (194 === e) t = !1;else if (195 === e) t = !0;else if (202 === e) t = this.readF32();else if (203 === e) t = this.readF64();else if (204 === e) t = this.readU8();else if (205 === e) t = this.readU16();else if (206 === e) t = this.readU32();else if (207 === e) t = this.readU64();else if (208 === e) t = this.readI8();else if (209 === e) t = this.readI16();else if (210 === e) t = this.readI32();else if (211 === e) t = this.readI64();else if (217 === e) i = this.lookU8(), t = this.decodeUtf8String(i, 1);else if (218 === e) i = this.lookU16(), t = this.decodeUtf8String(i, 2);else if (219 === e) i = this.lookU32(), t = this.decodeUtf8String(i, 4);else if (220 === e) {\n              if (0 !== (r = this.readU16())) {\n                this.pushArrayState(r), this.complete();\n                continue e;\n              }\n\n              t = [];\n            } else if (221 === e) {\n              if (0 !== (r = this.readU32())) {\n                this.pushArrayState(r), this.complete();\n                continue e;\n              }\n\n              t = [];\n            } else if (222 === e) {\n              if (0 !== (r = this.readU16())) {\n                this.pushMapState(r), this.complete();\n                continue e;\n              }\n\n              t = {};\n            } else if (223 === e) {\n              if (0 !== (r = this.readU32())) {\n                this.pushMapState(r), this.complete();\n                continue e;\n              }\n\n              t = {};\n            } else if (196 === e) {\n              var r = this.lookU8();\n              t = this.decodeBinary(r, 1);\n            } else if (197 === e) r = this.lookU16(), t = this.decodeBinary(r, 2);else if (198 === e) r = this.lookU32(), t = this.decodeBinary(r, 4);else if (212 === e) t = this.decodeExtension(1, 0);else if (213 === e) t = this.decodeExtension(2, 0);else if (214 === e) t = this.decodeExtension(4, 0);else if (215 === e) t = this.decodeExtension(8, 0);else if (216 === e) t = this.decodeExtension(16, 0);else if (199 === e) r = this.lookU8(), t = this.decodeExtension(r, 1);else if (200 === e) r = this.lookU16(), t = this.decodeExtension(r, 2);else {\n              if (201 !== e) throw new I(\"Unrecognized type byte: \" + k(e));\n              r = this.lookU32(), t = this.decodeExtension(r, 4);\n            }\n            this.complete();\n\n            for (var n = this.stack; n.length > 0;) {\n              var s = n[n.length - 1];\n\n              if (0 === s.type) {\n                if (s.array[s.position] = t, s.position++, s.position !== s.size) continue e;\n                n.pop(), t = s.array;\n              } else {\n                if (1 === s.type) {\n                  if (\"string\" != (o = typeof t) && \"number\" !== o) throw new I(\"The type of key must be string or number but \" + typeof t);\n                  if (\"__proto__\" === t) throw new I(\"The key __proto__ is not allowed\");\n                  s.key = t, s.type = 2;\n                  continue e;\n                }\n\n                if (s.map[s.key] = t, s.readCount++, s.readCount !== s.size) {\n                  s.key = null, s.type = 1;\n                  continue e;\n                }\n\n                n.pop(), t = s.map;\n              }\n            }\n\n            return t;\n          }\n\n          var o;\n        }, e.prototype.readHeadByte = function () {\n          return -1 === this.headByte && (this.headByte = this.readU8()), this.headByte;\n        }, e.prototype.complete = function () {\n          this.headByte = -1;\n        }, e.prototype.readArraySize = function () {\n          var e = this.readHeadByte();\n\n          switch (e) {\n            case 220:\n              return this.readU16();\n\n            case 221:\n              return this.readU32();\n\n            default:\n              if (e < 160) return e - 144;\n              throw new I(\"Unrecognized array type byte: \" + k(e));\n          }\n        }, e.prototype.pushMapState = function (e) {\n          if (e > this.maxMapLength) throw new I(\"Max length exceeded: map length (\" + e + \") > maxMapLengthLength (\" + this.maxMapLength + \")\");\n          this.stack.push({\n            type: 1,\n            size: e,\n            key: null,\n            readCount: 0,\n            map: {}\n          });\n        }, e.prototype.pushArrayState = function (e) {\n          if (e > this.maxArrayLength) throw new I(\"Max length exceeded: array length (\" + e + \") > maxArrayLength (\" + this.maxArrayLength + \")\");\n          this.stack.push({\n            type: 0,\n            size: e,\n            array: new Array(e),\n            position: 0\n          });\n        }, e.prototype.decodeUtf8String = function (e, t) {\n          var i;\n          if (e > this.maxStrLength) throw new I(\"Max length exceeded: UTF-8 byte length (\" + e + \") > maxStrLength (\" + this.maxStrLength + \")\");\n          if (this.bytes.byteLength < this.pos + t + e) throw V;\n          var r,\n              n = this.pos + t;\n          return r = this.stateIsMapKey() && (null === (i = this.keyDecoder) || void 0 === i ? void 0 : i.canBeCached(e)) ? this.keyDecoder.decode(this.bytes, n, e) : e > E ? function (e, t, i) {\n            var r = e.subarray(t, t + i);\n            return p.decode(r);\n          }(this.bytes, n, e) : u(this.bytes, n, e), this.pos += t + e, r;\n        }, e.prototype.stateIsMapKey = function () {\n          return this.stack.length > 0 && 1 === this.stack[this.stack.length - 1].type;\n        }, e.prototype.decodeBinary = function (e, t) {\n          if (e > this.maxBinLength) throw new I(\"Max length exceeded: bin length (\" + e + \") > maxBinLength (\" + this.maxBinLength + \")\");\n          if (!this.hasRemaining(e + t)) throw V;\n          var i = this.pos + t,\n              r = this.bytes.subarray(i, i + e);\n          return this.pos += t + e, r;\n        }, e.prototype.decodeExtension = function (e, t) {\n          if (e > this.maxExtLength) throw new I(\"Max length exceeded: ext length (\" + e + \") > maxExtLength (\" + this.maxExtLength + \")\");\n          var i = this.view.getInt8(this.pos + t),\n              r = this.decodeBinary(e, t + 1);\n          return this.extensionCodec.decode(r, i, this.context);\n        }, e.prototype.lookU8 = function () {\n          return this.view.getUint8(this.pos);\n        }, e.prototype.lookU16 = function () {\n          return this.view.getUint16(this.pos);\n        }, e.prototype.lookU32 = function () {\n          return this.view.getUint32(this.pos);\n        }, e.prototype.readU8 = function () {\n          var e = this.view.getUint8(this.pos);\n          return this.pos++, e;\n        }, e.prototype.readI8 = function () {\n          var e = this.view.getInt8(this.pos);\n          return this.pos++, e;\n        }, e.prototype.readU16 = function () {\n          var e = this.view.getUint16(this.pos);\n          return this.pos += 2, e;\n        }, e.prototype.readI16 = function () {\n          var e = this.view.getInt16(this.pos);\n          return this.pos += 2, e;\n        }, e.prototype.readU32 = function () {\n          var e = this.view.getUint32(this.pos);\n          return this.pos += 4, e;\n        }, e.prototype.readI32 = function () {\n          var e = this.view.getInt32(this.pos);\n          return this.pos += 4, e;\n        }, e.prototype.readU64 = function () {\n          var e,\n              t,\n              i = (e = this.view, t = this.pos, 4294967296 * e.getUint32(t) + e.getUint32(t + 4));\n          return this.pos += 8, i;\n        }, e.prototype.readI64 = function () {\n          var e = n(this.view, this.pos);\n          return this.pos += 8, e;\n        }, e.prototype.readF32 = function () {\n          var e = this.view.getFloat32(this.pos);\n          return this.pos += 4, e;\n        }, e.prototype.readF64 = function () {\n          var e = this.view.getFloat64(this.pos);\n          return this.pos += 8, e;\n        }, e;\n      }(),\n          K = {};\n\n      function W(e, t) {\n        return void 0 === t && (t = K), new j(t.extensionCodec, t.context, t.maxStrLength, t.maxBinLength, t.maxArrayLength, t.maxMapLength, t.maxExtLength).decode(e);\n      }\n\n      function H(e, t) {\n        return void 0 === t && (t = K), new j(t.extensionCodec, t.context, t.maxStrLength, t.maxBinLength, t.maxArrayLength, t.maxMapLength, t.maxExtLength).decodeMulti(e);\n      }\n\n      var Y = function Y(e, t) {\n        var i,\n            r,\n            n,\n            s,\n            o = {\n          label: 0,\n          sent: function sent() {\n            if (1 & n[0]) throw n[1];\n            return n[1];\n          },\n          trys: [],\n          ops: []\n        };\n        return s = {\n          next: a(0),\n          throw: a(1),\n          return: a(2)\n        }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n          return this;\n        }), s;\n\n        function a(s) {\n          return function (a) {\n            return function (s) {\n              if (i) throw new TypeError(\"Generator is already executing.\");\n\n              for (; o;) {\n                try {\n                  if (i = 1, r && (n = 2 & s[0] ? r.return : s[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, s[1])).done) return n;\n\n                  switch (r = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n                    case 0:\n                    case 1:\n                      n = s;\n                      break;\n\n                    case 4:\n                      return o.label++, {\n                        value: s[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      o.label++, r = s[1], s = [0];\n                      continue;\n\n                    case 7:\n                      s = o.ops.pop(), o.trys.pop();\n                      continue;\n\n                    default:\n                      if (!((n = (n = o.trys).length > 0 && n[n.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                        o = 0;\n                        continue;\n                      }\n\n                      if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                        o.label = s[1];\n                        break;\n                      }\n\n                      if (6 === s[0] && o.label < n[1]) {\n                        o.label = n[1], n = s;\n                        break;\n                      }\n\n                      if (n && o.label < n[2]) {\n                        o.label = n[2], o.ops.push(s);\n                        break;\n                      }\n\n                      n[2] && o.ops.pop(), o.trys.pop();\n                      continue;\n                  }\n\n                  s = t.call(e, o);\n                } catch (e) {\n                  s = [6, e], r = 0;\n                } finally {\n                  i = n = 0;\n                }\n              }\n\n              if (5 & s[0]) throw s[1];\n              return {\n                value: s[0] ? s[1] : void 0,\n                done: !0\n              };\n            }([s, a]);\n          };\n        }\n      },\n          q = function q(e) {\n        return this instanceof q ? (this.v = e, this) : new q(e);\n      },\n          J = function J(e, t, i) {\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var r,\n            n = i.apply(e, t || []),\n            s = [];\n        return r = {}, o(\"next\"), o(\"throw\"), o(\"return\"), r[Symbol.asyncIterator] = function () {\n          return this;\n        }, r;\n\n        function o(e) {\n          n[e] && (r[e] = function (t) {\n            return new Promise(function (i, r) {\n              s.push([e, t, i, r]) > 1 || a(e, t);\n            });\n          });\n        }\n\n        function a(e, t) {\n          try {\n            (i = n[e](t)).value instanceof q ? Promise.resolve(i.value.v).then(c, d) : l(s[0][2], i);\n          } catch (e) {\n            l(s[0][3], e);\n          }\n\n          var i;\n        }\n\n        function c(e) {\n          a(\"next\", e);\n        }\n\n        function d(e) {\n          a(\"throw\", e);\n        }\n\n        function l(e, t) {\n          e(t), s.shift(), s.length && a(s[0][0], s[0][1]);\n        }\n      };\n\n      function X(e) {\n        if (null == e) throw new Error(\"Assertion Failure: value must not be null nor undefined\");\n      }\n\n      function z(e) {\n        return null != e[Symbol.asyncIterator] ? e : function (e) {\n          return J(this, arguments, function () {\n            var t, i, r, n;\n            return Y(this, function (s) {\n              switch (s.label) {\n                case 0:\n                  t = e.getReader(), s.label = 1;\n\n                case 1:\n                  s.trys.push([1,, 9, 10]), s.label = 2;\n\n                case 2:\n                  return [4, q(t.read())];\n\n                case 3:\n                  return i = s.sent(), r = i.done, n = i.value, r ? [4, q(void 0)] : [3, 5];\n\n                case 4:\n                  return [2, s.sent()];\n\n                case 5:\n                  return X(n), [4, q(n)];\n\n                case 6:\n                  return [4, s.sent()];\n\n                case 7:\n                  return s.sent(), [3, 2];\n\n                case 8:\n                  return [3, 10];\n\n                case 9:\n                  return t.releaseLock(), [7];\n\n                case 10:\n                  return [2];\n              }\n            });\n          });\n        }(e);\n      }\n\n      function Z(e, t) {\n        return void 0 === t && (t = K), i = this, r = void 0, s = function s() {\n          var i;\n          return function (e, t) {\n            var i,\n                r,\n                n,\n                s,\n                o = {\n              label: 0,\n              sent: function sent() {\n                if (1 & n[0]) throw n[1];\n                return n[1];\n              },\n              trys: [],\n              ops: []\n            };\n            return s = {\n              next: a(0),\n              throw: a(1),\n              return: a(2)\n            }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n              return this;\n            }), s;\n\n            function a(s) {\n              return function (a) {\n                return function (s) {\n                  if (i) throw new TypeError(\"Generator is already executing.\");\n\n                  for (; o;) {\n                    try {\n                      if (i = 1, r && (n = 2 & s[0] ? r.return : s[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, s[1])).done) return n;\n\n                      switch (r = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n                        case 0:\n                        case 1:\n                          n = s;\n                          break;\n\n                        case 4:\n                          return o.label++, {\n                            value: s[1],\n                            done: !1\n                          };\n\n                        case 5:\n                          o.label++, r = s[1], s = [0];\n                          continue;\n\n                        case 7:\n                          s = o.ops.pop(), o.trys.pop();\n                          continue;\n\n                        default:\n                          if (!((n = (n = o.trys).length > 0 && n[n.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                            o = 0;\n                            continue;\n                          }\n\n                          if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                            o.label = s[1];\n                            break;\n                          }\n\n                          if (6 === s[0] && o.label < n[1]) {\n                            o.label = n[1], n = s;\n                            break;\n                          }\n\n                          if (n && o.label < n[2]) {\n                            o.label = n[2], o.ops.push(s);\n                            break;\n                          }\n\n                          n[2] && o.ops.pop(), o.trys.pop();\n                          continue;\n                      }\n\n                      s = t.call(e, o);\n                    } catch (e) {\n                      s = [6, e], r = 0;\n                    } finally {\n                      i = n = 0;\n                    }\n                  }\n\n                  if (5 & s[0]) throw s[1];\n                  return {\n                    value: s[0] ? s[1] : void 0,\n                    done: !0\n                  };\n                }([s, a]);\n              };\n            }\n          }(this, function (r) {\n            return i = z(e), [2, new j(t.extensionCodec, t.context, t.maxStrLength, t.maxBinLength, t.maxArrayLength, t.maxMapLength, t.maxExtLength).decodeAsync(i)];\n          });\n        }, new ((n = void 0) || (n = Promise))(function (e, t) {\n          function o(e) {\n            try {\n              c(s.next(e));\n            } catch (e) {\n              t(e);\n            }\n          }\n\n          function a(e) {\n            try {\n              c(s.throw(e));\n            } catch (e) {\n              t(e);\n            }\n          }\n\n          function c(t) {\n            var i;\n            t.done ? e(t.value) : (i = t.value, i instanceof n ? i : new n(function (e) {\n              e(i);\n            })).then(o, a);\n          }\n\n          c((s = s.apply(i, r || [])).next());\n        });\n        var i, r, n, s;\n      }\n\n      function $(e, t) {\n        void 0 === t && (t = K);\n        var i = z(e);\n        return new j(t.extensionCodec, t.context, t.maxStrLength, t.maxBinLength, t.maxArrayLength, t.maxMapLength, t.maxExtLength).decodeArrayStream(i);\n      }\n\n      function ee(e, t) {\n        void 0 === t && (t = K);\n        var i = z(e);\n        return new j(t.extensionCodec, t.context, t.maxStrLength, t.maxBinLength, t.maxArrayLength, t.maxMapLength, t.maxExtLength).decodeStream(i);\n      }\n\n      function te(e, t) {\n        return void 0 === t && (t = K), ee(e, t);\n      }\n\n      return t;\n    }();\n  }),\n      ip = Math.min;\n  G({\n    target: \"Array\",\n    proto: !0\n  }, {\n    copyWithin: [].copyWithin || function (e, t) {\n      var i = Ie(this),\n          r = Y(i.length),\n          n = X(e, r),\n          s = X(t, r),\n          o = arguments.length > 2 ? arguments[2] : void 0,\n          a = ip((void 0 === o ? r : X(o, r)) - s, r - n),\n          c = 1;\n\n      for (s < n && n < s + a && (c = -1, s += a - 1, n += a - 1); a-- > 0;) {\n        s in i ? i[n] = i[s] : delete i[n], n += c, s += c;\n      }\n\n      return i;\n    }\n  });\n\n  var rp = Ye(\"Array\").copyWithin,\n      np = Array.prototype,\n      sp = function sp(e) {\n    var t = e.copyWithin;\n    return e === np || e instanceof Array && t === np.copyWithin ? rp : t;\n  },\n      op = St.every;\n\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: Ki(\"every\")\n  }, {\n    every: function every(e) {\n      return op(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var ap = Ye(\"Array\").every,\n      cp = Array.prototype,\n      dp = function dp(e) {\n    var t = e.every;\n    return e === cp || e instanceof Array && t === cp.every ? ap : t;\n  },\n      lp = Ze.getWeakData,\n      Ap = Pt.set,\n      up = Pt.getterFor,\n      hp = St.find,\n      pp = St.findIndex,\n      Ep = 0,\n      gp = function gp(e) {\n    return e.frozen || (e.frozen = new _p());\n  },\n      _p = function _p() {\n    this.entries = [];\n  },\n      Ip = function Ip(e, t) {\n    return hp(e.entries, function (e) {\n      return e[0] === t;\n    });\n  };\n\n  _p.prototype = {\n    get: function get(e) {\n      var t = Ip(this, e);\n      if (t) return t[1];\n    },\n    has: function has(e) {\n      return !!Ip(this, e);\n    },\n    set: function set(e, t) {\n      var i = Ip(this, e);\n      i ? i[1] = t : this.entries.push([e, t]);\n    },\n    delete: function _delete(e) {\n      var t = pp(this.entries, function (t) {\n        return t[0] === e;\n      });\n      return ~t && this.entries.splice(t, 1), !!~t;\n    }\n  };\n  var fp = {\n    getConstructor: function getConstructor(e, t, i, r) {\n      var n = e(function (e, s) {\n        Et(e, n, t), Ap(e, {\n          type: t,\n          id: Ep++,\n          frozen: void 0\n        }), null != s && pt(s, e[r], e, i);\n      }),\n          s = up(t),\n          o = function o(e, t, i) {\n        var r = s(e),\n            n = lp(M(t), !0);\n        return !0 === n ? gp(r).set(t, i) : n[r.id] = i, e;\n      };\n\n      return Jt(n.prototype, {\n        delete: function _delete(e) {\n          var t = s(this);\n          if (!g(e)) return !1;\n          var i = lp(e);\n          return !0 === i ? gp(t).delete(e) : i && f(i, t.id) && delete i[t.id];\n        },\n        has: function has(e) {\n          var t = s(this);\n          if (!g(e)) return !1;\n          var i = lp(e);\n          return !0 === i ? gp(t).has(e) : i && f(i, t.id);\n        }\n      }), Jt(n.prototype, i ? {\n        get: function get(e) {\n          var t = s(this);\n\n          if (g(e)) {\n            var i = lp(e);\n            return !0 === i ? gp(t).get(e) : i ? i[t.id] : void 0;\n          }\n        },\n        set: function set(e, t) {\n          return o(this, e, t);\n        }\n      } : {\n        add: function add(e) {\n          return o(this, e, !0);\n        }\n      }), n;\n    }\n  },\n      mp = (t(function (e) {\n    var t,\n        i = Pt.enforce,\n        n = !r.ActiveXObject && \"ActiveXObject\" in r,\n        s = Object.isExtensible,\n        o = function o(e) {\n      return function () {\n        return e(this, arguments.length ? arguments[0] : void 0);\n      };\n    },\n        a = e.exports = Ft(\"WeakMap\", o, fp);\n\n    if (vt && n) {\n      t = fp.getConstructor(o, \"WeakMap\", !0), Ze.REQUIRED = !0;\n      var c = a.prototype,\n          d = c.delete,\n          l = c.has,\n          A = c.get,\n          u = c.set;\n      Jt(c, {\n        delete: function _delete(e) {\n          if (g(e) && !s(e)) {\n            var r = i(this);\n            return r.frozen || (r.frozen = new t()), d.call(this, e) || r.frozen.delete(e);\n          }\n\n          return d.call(this, e);\n        },\n        has: function has(e) {\n          if (g(e) && !s(e)) {\n            var r = i(this);\n            return r.frozen || (r.frozen = new t()), l.call(this, e) || r.frozen.has(e);\n          }\n\n          return l.call(this, e);\n        },\n        get: function get(e) {\n          if (g(e) && !s(e)) {\n            var r = i(this);\n            return r.frozen || (r.frozen = new t()), l.call(this, e) ? A.call(this, e) : r.frozen.get(e);\n          }\n\n          return A.call(this, e);\n        },\n        set: function set(e, r) {\n          if (g(e) && !s(e)) {\n            var n = i(this);\n            n.frozen || (n.frozen = new t()), l.call(this, e) ? u.call(this, e, r) : n.frozen.set(e, r);\n          } else u.call(this, e, r);\n\n          return this;\n        }\n      });\n    }\n  }), Math.min),\n      Cp = [].lastIndexOf,\n      Sp = !!Cp && 1 / [1].lastIndexOf(1, -0) < 0,\n      Rp = Ki(\"lastIndexOf\"),\n      Tp = Sp || Rp ? function (e) {\n    if (Sp) return Cp.apply(this, arguments) || 0;\n    var t = E(this),\n        i = Y(t.length),\n        r = i - 1;\n\n    for (arguments.length > 1 && (r = mp(r, W(arguments[1]))), r < 0 && (r = i + r); r >= 0; r--) {\n      if (r in t && t[r] === e) return r || 0;\n    }\n\n    return -1;\n  } : Cp;\n  G({\n    target: \"Array\",\n    proto: !0,\n    forced: Tp !== [].lastIndexOf\n  }, {\n    lastIndexOf: Tp\n  });\n\n  var vp = Ye(\"Array\").lastIndexOf,\n      yp = Array.prototype,\n      wp = function wp(e) {\n    var t = e.lastIndexOf;\n    return e === yp || e instanceof Array && t === yp.lastIndexOf ? vp : t;\n  };\n\n  var Np = function Np() {\n    return function (e) {\n      var t;\n      var i = Es(t = window.atob(e).split(\"\")).call(t, function (e) {\n        return e.charCodeAt(0);\n      });\n      return new Uint8Array(i, 0, i.length / Uint8Array.BYTES_PER_ELEMENT);\n    }(\"AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==\");\n  };\n\n  var Op, bp;\n\n  function Dp() {\n    return _Dp.apply(this, arguments);\n  }\n\n  function _Dp() {\n    _Dp = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee340() {\n      var e, t, i, r, n, s, o, a, c, d, l, A, u, h, p, E, g, _, I, f, m, C, S, R, T, v, y, w, N, O, b, D, k, L, P, B, M, U, Q, F, x, V, G, j, K, W;\n\n      return _regeneratorRuntime.wrap(function _callee340$(_context340) {\n        while (1) {\n          switch (_context340.prev = _context340.next) {\n            case 0:\n              W = function _ref216(e) {\n                function t() {\n                  M || (M = !0, i.calledRun = !0, A || (P(v), P(y), i.onRuntimeInitialized && i.onRuntimeInitialized(), function () {\n                    if (i.postRun) for (\"function\" == typeof i.postRun && (i.postRun = [i.postRun]); i.postRun.length;) {\n                      e = i.postRun.shift(), w.unshift(e);\n                    }\n                    var e;\n                    P(w);\n                  }()));\n                }\n\n                N > 0 || (!function () {\n                  if (i.preRun) for (\"function\" == typeof i.preRun && (i.preRun = [i.preRun]); i.preRun.length;) {\n                    e = i.preRun.shift(), T.unshift(e);\n                  }\n                  var e;\n                  P(T);\n                }(), N > 0 || (i.setStatus ? (i.setStatus(\"Running...\"), Ua(function () {\n                  Ua(function () {\n                    i.setStatus(\"\");\n                  }, 1), t();\n                }, 1)) : t()));\n              };\n\n              P = function _ref215(e) {\n                for (; e.length > 0;) {\n                  var _t209 = e.shift();\n\n                  if (\"function\" == typeof _t209) {\n                    _t209(i);\n\n                    continue;\n                  }\n\n                  var _r95 = _t209.func;\n                  \"number\" == typeof _r95 ? void 0 === _t209.arg ? R.get(_r95)() : R.get(_r95)(_t209.arg) : _r95(void 0 === _t209.arg ? null : _t209.arg);\n                }\n              };\n\n              b = function _ref214(e) {\n                i.onAbort && i.onAbort(e), d(e += \"\"), A = !0, e = \"abort(\" + e + \"). Build with -s ASSERTIONS=1 for more info.\";\n                throw new WebAssembly.RuntimeError(e);\n              };\n\n              h = function _ref213(e, t, i, r, n) {\n                var s = {\n                  string: function string(e) {\n                    var t = 0;\n\n                    if (null != e && 0 !== e) {\n                      var _i147 = 1 + (e.length << 2);\n\n                      t = K(_i147), function (e, t, i) {\n                        (function (e, t, i, r) {\n                          if (!(r > 0)) return 0;\n                          var n = i,\n                              s = i + r - 1;\n\n                          for (var _r93 = 0; _r93 < e.length; ++_r93) {\n                            var _n57 = e.charCodeAt(_r93);\n\n                            if (_n57 >= 55296 && _n57 <= 57343) {\n                              _n57 = 65536 + ((1023 & _n57) << 10) | 1023 & e.charCodeAt(++_r93);\n                            }\n\n                            if (_n57 <= 127) {\n                              if (i >= s) break;\n                              t[i++] = _n57;\n                            } else if (_n57 <= 2047) {\n                              if (i + 1 >= s) break;\n                              t[i++] = 192 | _n57 >> 6, t[i++] = 128 | 63 & _n57;\n                            } else if (_n57 <= 65535) {\n                              if (i + 2 >= s) break;\n                              t[i++] = 224 | _n57 >> 12, t[i++] = 128 | _n57 >> 6 & 63, t[i++] = 128 | 63 & _n57;\n                            } else {\n                              if (i + 3 >= s) break;\n                              t[i++] = 240 | _n57 >> 18, t[i++] = 128 | _n57 >> 12 & 63, t[i++] = 128 | _n57 >> 6 & 63, t[i++] = 128 | 63 & _n57;\n                            }\n                          }\n\n                          t[i] = 0;\n                        })(e, g, t, i);\n                      }(e, t, _i147);\n                    }\n\n                    return t;\n                  },\n                  array: function array(e) {\n                    var t = K(e.length);\n                    var i, r;\n                    return i = e, r = t, E.set(i, r), t;\n                  }\n                };\n                var o = u(e),\n                    a = [];\n                var c = 0;\n                if (r) for (var _e257 = 0; _e257 < r.length; _e257++) {\n                  var _t208 = s[i[_e257]];\n                  _t208 ? (0 === c && (c = G()), a[_e257] = _t208(r[_e257])) : a[_e257] = r[_e257];\n                }\n                var d = o.apply(null, a);\n                return d = function (e) {\n                  return \"string\" === t ? (i = e) ? function (e, t, i) {\n                    var r = t + i;\n                    var n = t,\n                        s = \"\";\n\n                    for (; e[n] && !(n >= r);) {\n                      ++n;\n                    }\n\n                    if (n - t > 16 && e.subarray && p) return p.decode(e.subarray(t, n));\n\n                    for (; t < n;) {\n                      var _i148 = e[t++];\n\n                      if (!(128 & _i148)) {\n                        s += String.fromCharCode(_i148);\n                        continue;\n                      }\n\n                      var _r94 = 63 & e[t++];\n\n                      if (192 == (224 & _i148)) {\n                        s += String.fromCharCode((31 & _i148) << 6 | _r94);\n                        continue;\n                      }\n\n                      var _n58 = 63 & e[t++];\n\n                      if (_i148 = 224 == (240 & _i148) ? (15 & _i148) << 12 | _r94 << 6 | _n58 : (7 & _i148) << 18 | _r94 << 12 | _n58 << 6 | 63 & e[t++], _i148 < 65536) s += String.fromCharCode(_i148);else {\n                        var _e258 = _i148 - 65536;\n\n                        s += String.fromCharCode(55296 | _e258 >> 10, 56320 | 1023 & _e258);\n                      }\n                    }\n\n                    return s;\n                  }(g, i, r) : \"\" : \"boolean\" === t ? Boolean(e) : e;\n                  var i, r;\n                }(d), 0 !== c && j(c), d;\n              };\n\n              u = function _ref212(e) {\n                var t = i[\"_\" + e];\n                var r;\n                return r = \"Cannot call unknown function \" + e + \", make sure it is exported\", t || b(\"Assertion failed: \" + r), t;\n              };\n\n              if (!Op) {\n                _context340.next = 7;\n                break;\n              }\n\n              return _context340.abrupt(\"return\", Op);\n\n            case 7:\n              i = {};\n              n = {};\n\n              for (r in i) {\n                Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r]);\n              }\n\n              s = !1, o = !1, a = !1;\n              s = \"object\" == typeof window, o = \"function\" == typeof importScripts, a = \"object\" == typeof process && \"object\" == typeof process.versions && \"string\" == typeof process.versions.node;\n              c = \"\";\n              (s || o) && (o ? c = self.location.href : \"undefined\" != typeof document && document.currentScript && (c = document.currentScript.src), c = 0 !== Os(c).call(c, \"blob:\") ? c.substr(0, wp(c).call(c, \"/\") + 1) : \"\");\n              i.print || qs(e = console.log).call(e, console);\n              d = i.printErr || qs(t = console.warn).call(t, console);\n\n              for (r in n) {\n                Object.prototype.hasOwnProperty.call(n, r) && (i[r] = n[r]);\n              }\n\n              n = null, \"object\" != typeof WebAssembly && b(\"no native wasm support detected\");\n              A = !1;\n              p = \"undefined\" != typeof TextDecoder ? new TextDecoder(\"utf8\") : void 0;\n              \"undefined\" != typeof TextDecoder && new TextDecoder(\"utf-16le\");\n              T = [], v = [], y = [], w = [];\n              v.push({\n                func: function func() {\n                  U();\n                }\n              });\n              N = 0, O = null;\n              i.preloadedImages = {}, i.preloadedAudios = {};\n              D = \"deflate.wasm\";\n              L = \"data:application/octet-stream;base64,\", Ro(k = D).call(k, L) || (D = function (e) {\n                return i.locateFile ? i.locateFile(e, c) : c + e;\n              }(D));\n              B = {\n                emscripten_memcpy_big: function emscripten_memcpy_big(e, t, i) {\n                  sp(g).call(g, e, t, t + i);\n                },\n                emscripten_resize_heap: function emscripten_resize_heap(e) {\n                  b(\"OOM\");\n                }\n              };\n              _context340.next = 30;\n              return _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee339() {\n                var e, t, r, n;\n                return _regeneratorRuntime.wrap(function _callee339$(_context339) {\n                  while (1) {\n                    switch (_context339.prev = _context339.next) {\n                      case 0:\n                        n = function _ref211(t) {\n                          return new As(function (e, t) {\n                            e(Np().buffer);\n                          }).then(function (t) {\n                            return WebAssembly.instantiate(t, e);\n                          }).then(t, function (e) {\n                            d(\"failed to asynchronously prepare wasm: \" + e), b(e);\n                          });\n                        };\n\n                        r = function _ref210(e) {\n                          t(e.instance);\n                        };\n\n                        t = function _ref209(e, t) {\n                          var r = e.exports;\n                          var n;\n                          i.asm = r, l = i.asm.memory, n = l.buffer, i.HEAP8 = E = new Int8Array(n), i.HEAP16 = _ = new Int16Array(n), i.HEAP32 = f = new Int32Array(n), i.HEAPU8 = g = new Uint8Array(n), i.HEAPU16 = I = new Uint16Array(n), i.HEAPU32 = m = new Uint32Array(n), i.HEAPF32 = C = new Float32Array(n), i.HEAPF64 = S = new Float64Array(n), R = i.asm.__indirect_function_table, function (e) {\n                            if (N--, i.monitorRunDependencies && i.monitorRunDependencies(N), 0 == N && O) {\n                              var _e259 = O;\n                              O = null, _e259();\n                            }\n                          }();\n                        };\n\n                        e = {\n                          env: B,\n                          wasi_snapshot_preview1: B\n                        };\n\n                        if (!(N++, i.monitorRunDependencies && i.monitorRunDependencies(N), i.instantiateWasm)) {\n                          _context339.next = 12;\n                          break;\n                        }\n\n                        _context339.prev = 5;\n                        return _context339.abrupt(\"return\", i.instantiateWasm(e, t));\n\n                      case 9:\n                        _context339.prev = 9;\n                        _context339.t0 = _context339[\"catch\"](5);\n                        return _context339.abrupt(\"return\", (d(\"Module.instantiateWasm callback failed with error: \" + _context339.t0), !1));\n\n                      case 12:\n                        _context339.next = 14;\n                        return n(r);\n\n                      case 14:\n                        return _context339.abrupt(\"return\", {});\n\n                      case 15:\n                      case \"end\":\n                        return _context339.stop();\n                    }\n                  }\n                }, _callee339, this, [[5, 9]]);\n              }))();\n\n            case 30:\n              U = i.___wasm_call_ctors = function () {\n                return (U = i.___wasm_call_ctors = i.asm.__wasm_call_ctors).apply(null, arguments);\n              }, Q = i._malloc = function () {\n                return (Q = i._malloc = i.asm.malloc).apply(null, arguments);\n              }, F = i._free = function () {\n                return (F = i._free = i.asm.free).apply(null, arguments);\n              }, x = i.___errno_location = function () {\n                return (x = i.___errno_location = i.asm.__errno_location).apply(null, arguments);\n              }, V = i._zlibCompress = function () {\n                return (V = i._zlibCompress = i.asm.zlibCompress).apply(null, arguments);\n              }, G = i.stackSave = function () {\n                return (G = i.stackSave = i.asm.stackSave).apply(null, arguments);\n              }, j = i.stackRestore = function () {\n                return (j = i.stackRestore = i.asm.stackRestore).apply(null, arguments);\n              }, K = i.stackAlloc = function () {\n                return (K = i.stackAlloc = i.asm.stackAlloc).apply(null, arguments);\n              };\n              if (i.ccall = h, i.cwrap = function (e, t, i, r) {\n                var n = dp(i = i || []).call(i, function (e) {\n                  return \"number\" === e;\n                });\n                return \"string\" !== t && n && !r ? u(e) : function () {\n                  return h(e, t, i, arguments);\n                };\n              }, i.allocate = function (e, t) {\n                var i;\n                return i = 1 == t ? K(e.length) : Q(e.length), e.subarray || Bs(e) ? g.set(e, i) : g.set(new Uint8Array(e), i), i;\n              }, O = function e() {\n                M || W(), M || (O = e);\n              }, i.run = W, i.preInit) for (\"function\" == typeof i.preInit && (i.preInit = [i.preInit]); i.preInit.length > 0;) {\n                i.preInit.pop()();\n              }\n              return _context340.abrupt(\"return\", (W(), Op = i, i));\n\n            case 33:\n            case \"end\":\n              return _context340.stop();\n          }\n        }\n      }, _callee340, this);\n    }));\n    return _Dp.apply(this, arguments);\n  }\n\n  var kp = Uint8Array.BYTES_PER_ELEMENT;\n  var Lp = {\n    bytesReceived: \"br\",\n    frameDropped: \"fd\",\n    frameReceived: \"fr\",\n    googJitterReceived: \"jr\",\n    isAudioMute: \"am\",\n    isFreeze: \"fz\",\n    mediaType: \"mt\",\n    packetsLost: \"pl\",\n    packetsReceived: \"pr\",\n    peerId: \"pid\",\n    id: \"id\",\n    ssrc: \"ssrc\",\n    timestamp: \"ts\",\n    type: \"tp\",\n    frameRateInput: \"fi\",\n    frameRateSent: \"fs\",\n    googRtt: \"rt\",\n    isVideoMute: \"vm\"\n  },\n      Pp = {\n    stats: \"sts\",\n    state: \"st\",\n    stream_id: \"stid\",\n    session_id: \"seid\",\n    stream_type: \"stt\",\n    app_id: \"aid\",\n    channel_key: \"ck\",\n    channel_name: \"cn\",\n    sdk_version: \"sv\",\n    browser: \"b\",\n    process_id: \"pcid\",\n    mode: \"m\",\n    codec: \"c\",\n    role: \"r\",\n    has_changed_gateway: \"hcg\",\n    ap_response: \"ar\",\n    extends: \"es\",\n    details: \"d\",\n    features: \"ft\",\n    p2p_id: \"ppid\",\n    sdp: \"sdp\",\n    audio: \"a\",\n    video: \"v\",\n    attributes: \"at\",\n    hq: \"h\",\n    lq: \"l\",\n    stereo: \"str\",\n    speech: \"spe\",\n    extend: \"e\",\n    pingpongElapse: \"ppe\"\n  },\n      Bp = {\n    _message: \"m\",\n    _type: \"t\",\n    _id: \"id\"\n  },\n      Mp = {\n    join_v2: \"j2\",\n    publish: \"pub\",\n    publish_related_stats: \"prs\",\n    ping: \"pi\",\n    traffic_stats: \"ts\",\n    ping_back: \"pib\",\n    publish_stats: \"pubs\"\n  };\n  var Up;\n\n  var Qp =\n  /*#__PURE__*/\n  function () {\n    function Qp() {\n      _classCallCheck(this, Qp);\n    }\n\n    _createClass(Qp, [{\n      key: \"init\",\n      value: function () {\n        var _init2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee37() {\n          var _e31;\n\n          return _regeneratorRuntime.wrap(function _callee37$(_context37) {\n            while (1) {\n              switch (_context37.prev = _context37.next) {\n                case 0:\n                  if (Up) {\n                    _context37.next = 5;\n                    break;\n                  }\n\n                  _context37.next = 3;\n                  return _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee36() {\n                    return _regeneratorRuntime.wrap(function _callee36$(_context36) {\n                      while (1) {\n                        switch (_context36.prev = _context36.next) {\n                          case 0:\n                            _context36.t0 = bp;\n\n                            if (_context36.t0) {\n                              _context36.next = 5;\n                              break;\n                            }\n\n                            _context36.next = 4;\n                            return Dp();\n\n                          case 4:\n                            bp = _context36.sent;\n\n                          case 5:\n                            return _context36.abrupt(\"return\", {\n                              zlibCompress: function zlibCompress(e) {\n                                var t;\n\n                                var i = new Uint8Array(e),\n                                    r = kp * i.byteLength,\n                                    n = bp._malloc(r),\n                                    s = bp._malloc(3 * r);\n\n                                for (var _e32 = 0; _e32 < r; _e32++) {\n                                  bp.HEAP8[n / kp + _e32] = i[_e32];\n                                }\n\n                                var o = bp._zlibCompress(n, r, s),\n                                    a = new Uint8Array(Bs(t = bp.HEAP8).call(t, s, s + o));\n\n                                return bp._free(n), bp._free(s), a;\n                              }\n                            });\n\n                          case 6:\n                          case \"end\":\n                            return _context36.stop();\n                        }\n                      }\n                    }, _callee36, this);\n                  }))();\n\n                case 3:\n                  _e31 = _context37.sent;\n                  Up = _e31.zlibCompress;\n\n                case 5:\n                  this.zlibCompress = Up;\n\n                case 6:\n                case \"end\":\n                  return _context37.stop();\n              }\n            }\n          }, _callee37, this);\n        }));\n\n        function init() {\n          return _init2.apply(this, arguments);\n        }\n\n        return init;\n      }()\n    }, {\n      key: \"msgPackCompress\",\n      value: function msgPackCompress(e) {\n        return tp.encode(e);\n      }\n    }, {\n      key: \"compress\",\n      value: function compress(e) {\n        var t = La(),\n            i = this.compressKeyAndValue(JSON.parse(ge(e))),\n            r = this.msgPackCompress(i),\n            n = this.zlibCompress(r),\n            s = new Uint8Array([49, 49, 49, 50].concat(_toConsumableArray(BA(n))));\n        return {\n          origin: er({}, e),\n          originLength: ge(e).length,\n          shortKeyAndValue: i,\n          msgpackSer: r,\n          compressed: s,\n          compressedLength: s.length,\n          time: La() - t\n        };\n      }\n    }, {\n      key: \"compressKeyAndValue\",\n      value: function compressKeyAndValue(e) {\n        return this._ObjectKeyCompress(this._typeCompress(e));\n      }\n    }, {\n      key: \"_typeCompress\",\n      value: function _typeCompress(e) {\n        var t = e._type;\n        if (!t) return e;\n        var i = Mp[t];\n        return e._type = i || t, e;\n      }\n    }, {\n      key: \"_ObjectKeyCompress\",\n      value: function _ObjectKeyCompress(e) {\n        var t = e._message;\n\n        if (t) {\n          var _i27 = t.stats;\n          _i27 && (t.stats = this._statsCompress(_i27)), e._message = this._messageCompress(t);\n        }\n\n        return this._reportCompress(e);\n      }\n    }, {\n      key: \"_statsCompress\",\n      value: function _statsCompress(e) {\n        return this._keyCompress(e, Lp);\n      }\n    }, {\n      key: \"_messageCompress\",\n      value: function _messageCompress(e) {\n        return this._keyCompress(e, Pp);\n      }\n    }, {\n      key: \"_reportCompress\",\n      value: function _reportCompress(e) {\n        return this._keyCompress(e, Bp);\n      }\n    }, {\n      key: \"_keyCompress\",\n      value: function _keyCompress(e, t) {\n        var i = {},\n            r = ir(e);\n        return ar(r).call(r, function (r, n) {\n          var s = e[n];\n          return t[n] ? i[t[n]] = s : i[n] = s, i;\n        }, i), i;\n      }\n    }]);\n\n    return Qp;\n  }();\n\n  var Fp =\n  /*#__PURE__*/\n  function (_Ll9) {\n    _inherits(Fp, _Ll9);\n\n    function Fp(e) {\n      var _this61;\n\n      _classCallCheck(this, Fp);\n\n      _this61 = _possibleConstructorReturn(this, _getPrototypeOf(Fp).call(this)), _this61.lowPriorityQueue = [], _this61.highPriorityQueue = [], _this61.AgoraWebSocketManager = e;\n      return _this61;\n    }\n\n    _createClass(Fp, [{\n      key: \"reset\",\n      value: function reset() {\n        this.lowPriorityQueue = [], this.highPriorityQueue = [];\n      }\n    }, {\n      key: \"pushMessage\",\n      value: function pushMessage(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        t ? this.highPriorityQueue.push(e) : this.lowPriorityQueue.push(e), this.sendMessage();\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage() {\n        var _this62 = this;\n\n        var e = this.queue.length;\n        var t = 0;\n        t = e < 5 ? 15 * e : 60 + 3 * (e - 4), Ua(function () {\n          _this62._sendMessage();\n        }, t);\n      }\n    }, {\n      key: \"_sendMessage\",\n      value: function _sendMessage() {\n        var e;\n        if (!this.queue.length) return;\n        var t = this.AgoraWebSocketManager.getConnection();\n        if (!t || 1 !== t.readyState) return;\n        var i = this.queue.shift();\n        return eo(e = this.lowPriorityQueue).call(e, i) ? this.lowPriorityQueue.shift() : this.highPriorityQueue.shift(), t.send(i.compressed), i;\n      }\n    }, {\n      key: \"queue\",\n      get: function get() {\n        return [].concat(_toConsumableArray(this.highPriorityQueue), _toConsumableArray(this.lowPriorityQueue));\n      }\n    }]);\n\n    return Fp;\n  }(Ll);\n\n  var xp =\n  /*#__PURE__*/\n  function (_Ll10) {\n    _inherits(xp, _Ll10);\n\n    function xp(e, t) {\n      var _this63;\n\n      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n\n      _classCallCheck(this, xp);\n\n      _this63 = _possibleConstructorReturn(this, _getPrototypeOf(xp).call(this)), _this63.connectionID = 0, _this63.currentURLIndex = 0, _this63.reconnectMode = \"tryNext\", _this63._state = \"closed\", _this63.reconnectCount = 0, _this63.isCompressorInitSuccess = !1, _this63.tryDoubleDomain = !1, _this63.wsInflateLength = 0, _this63.wsDeflateLength = 0, _this63.closeEstablishingWs = function () {}, _this63.name = e, _this63.retryConfig = t, _this63.useCompress = i, _this63.tryDoubleDomain = r;\n      return _this63;\n    }\n\n    _createClass(xp, [{\n      key: \"getConnection\",\n      value: function getConnection() {\n        return this.websocket || void 0;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var _this64 = this;\n\n        var t = function t(_t46, i) {\n          _this64.urls = e;\n          var r = _this64.urls[_this64.currentURLIndex];\n          _this64.state = \"connecting\", _this64.messageSender = new Fp(_this64), _this64.createWebSocketConnection(r).then(_t46).catch(i), _this64.once(il.CLOSED, function () {\n            return i(new Ad(ad.WS_DISCONNECT));\n          }), _this64.once(il.CONNECTED, function () {\n            return _t46();\n          });\n        };\n\n        return new As(function (e, i) {\n          _this64.compressor = new Qp(), _this64.compressor.init().then(function () {\n            var r;\n            vc.debug(\"websocket compressor initialized successfully\"), iu.wsCompressorInit({\n              status: !0,\n              ec: null,\n              eventElapse: 1\n            }), _this64.isCompressorInitSuccess = !0, _this64.compress = qs(r = _this64.compressor.compress).call(r, _this64.compressor), t(e, i);\n          }).catch(function (r) {\n            t(e, i), vc.debug(\"websocket compressor failed to initialize\"), iu.wsCompressorInit({\n              status: !1,\n              ec: r ? r.message || r.toString() : \"Empty Error\",\n              eventElapse: 1\n            });\n          });\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e, t) {\n        if (this.currentURLIndex = 0, this.reconnectCount = 0, this.websocket) {\n          this.websocket.onclose = null, this.websocket.onopen = null, this.websocket.onmessage = null;\n          var _e33 = this.websocket;\n          t ? Ua(function () {\n            return _e33.close();\n          }, 500) : _e33.close(), this.websocket = void 0;\n        }\n\n        this.state = e ? \"failed\" : \"closed\", this.closeEstablishingWs && this.closeEstablishingWs();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        if (!this.websocket) return void vc.warning(\"[\".concat(this.name, \"] can not reconnect, no websocket\"));\n        void 0 !== e && (this.reconnectMode = e), vc.debug(\"[\".concat(this.name, \"] reconnect is triggered initiative\"));\n        var i = this.websocket.onclose;\n        this.websocket.onclose = null, this.websocket.close(), i && qs(i).call(i, this.websocket)({\n          code: 9999,\n          reason: t\n        });\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        if (!this.websocket || this.websocket.readyState !== WebSocket.OPEN) throw new Ad(ad.WS_ABORT, \"websocket is not ready\");\n\n        try {\n          var _i28 = null;\n          if (this.isCompressorInitSuccess && this.useCompress && Fc(\"WEBSOCKET_COMPRESS\")) _i28 = this.compress(e), this.setWsInflateData(_i28);else {\n            if (this.isCompressorInitSuccess && this.useCompress) {\n              var _t48 = this.compress(e);\n\n              this.setWsInflateData(_t48);\n            }\n\n            var _t47 = ge(e);\n\n            _i28 = {\n              compressed: _t47,\n              compressedLength: _t47.length,\n              origin: e\n            };\n          }\n          t ? this.websocket.send(_i28.compressed) : this.messageSender.pushMessage(_i28);\n        } catch (e) {\n          throw new Ad(ad.WS_ERR, \"send websocket message error\" + e.toString());\n        }\n      }\n    }, {\n      key: \"setWsInflateData\",\n      value: function setWsInflateData(e) {\n        this.wsDeflateLength = this.wsDeflateLength + e.originLength, this.wsInflateLength = this.wsInflateLength + e.compressedLength;\n      }\n    }, {\n      key: \"getWsInflateData\",\n      value: function getWsInflateData() {\n        var e = this.wsInflateLength,\n            t = this.wsDeflateLength;\n        return this.clearWsInflateData(), {\n          wsInflateLength: e,\n          wsDeflateLength: t\n        };\n      }\n    }, {\n      key: \"clearWsInflateData\",\n      value: function clearWsInflateData() {\n        this.wsInflateLength = 0, this.wsDeflateLength = 0;\n      }\n    }, {\n      key: \"createWebSocketConnection\",\n      value: function () {\n        var _createWebSocketConnection = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee39(e, t) {\n          var _this65 = this;\n\n          return _regeneratorRuntime.wrap(function _callee39$(_context39) {\n            while (1) {\n              switch (_context39.prev = _context39.next) {\n                case 0:\n                  this.connectionID += 1;\n                  this.connectionID;\n                  return _context39.abrupt(\"return\", new As(function (i, r) {\n                    var n, s;\n\n                    var o = function o() {\n                      vc.debug(\"[\".concat(_this65.name, \"] websocket opened:\"), e), _this65.reconnectMode = \"retry\", _this65.state = \"connected\", _this65.reconnectCount = 0, i();\n                    },\n                        a =\n                    /*#__PURE__*/\n                    function () {\n                      var _ref42 = _asyncToGenerator(\n                      /*#__PURE__*/\n                      _regeneratorRuntime.mark(function _callee38(e) {\n                        var t, n, s, o, _t49, _n11;\n\n                        return _regeneratorRuntime.wrap(function _callee38$(_context38) {\n                          while (1) {\n                            switch (_context38.prev = _context38.next) {\n                              case 0:\n                                if (!(vc.debug(Xe(t = Xe(n = Xe(s = Xe(o = \"[\".concat(_this65.name, \"] websocket close \")).call(o, _this65.websocket && _this65.websocket.url, \", code: \")).call(s, e.code, \", reason: \")).call(n, e.reason, \", current mode: \")).call(t, _this65.reconnectMode)), _this65.reconnectCount < _this65.retryConfig.maxRetryCount)) {\n                                  _context38.next = 13;\n                                  break;\n                                }\n\n                                \"connected\" === _this65.state && (_this65.reconnectReason = e.reason, _this65.state = \"reconnecting\");\n                                _t49 = Ph(_this65, il.WILL_RECONNECT, _this65.reconnectMode) || _this65.reconnectMode;\n                                _context38.next = 5;\n                                return _this65.reconnectWithAction(_t49);\n\n                              case 5:\n                                _n11 = _context38.sent;\n\n                                if (!(\"closed\" === _this65.state)) {\n                                  _context38.next = 8;\n                                  break;\n                                }\n\n                                return _context38.abrupt(\"return\", void vc.debug(\"[\".concat(_this65.connectionID, \"] ws is closed, no need to reconnect\")));\n\n                              case 8:\n                                if (_n11) {\n                                  _context38.next = 10;\n                                  break;\n                                }\n\n                                return _context38.abrupt(\"return\", (r(new Ad(ad.WS_DISCONNECT, \"websocket reconnect failed: \".concat(e.code))), void _this65.close(!0)));\n\n                              case 10:\n                                i();\n                                _context38.next = 14;\n                                break;\n\n                              case 13:\n                                r(new Ad(ad.WS_DISCONNECT, \"websocket close: \".concat(e.code))), _this65.close();\n\n                              case 14:\n                              case \"end\":\n                                return _context38.stop();\n                            }\n                          }\n                        }, _callee38, this);\n                      }));\n\n                      return function a(_x44) {\n                        return _ref42.apply(this, arguments);\n                      };\n                    }(),\n                        c = function c(e) {\n                      _this65.emit(il.ON_MESSAGE, e);\n                    };\n\n                    _this65.websocket && (_this65.websocket.onclose = null, _this65.websocket.close()), Fc(\"GATEWAY_WSS_ADDRESS\") && Ro(n = _this65.name).call(n, \"gateway\") && (e = Fc(\"GATEWAY_WSS_ADDRESS\")), vc.debug(Xe(s = \"[\".concat(_this65.name, \"] start connect, url: \")).call(s, e)), _this65.chooseBestWebsocketConnection(e, !!t).then(function (e) {\n                      _this65.websocket = e, o && o(), e.onclose = a, e.onmessage = c;\n                    }).catch(function (e) {\n                      if (\"closed\" !== _this65.state) {\n                        if (e instanceof Ad && e.code === ad.WS_ERR) {\n                          var t;\n\n                          var _i29 = new Ad(ad.WS_ERR, \"init websocket failed! Error: \".concat(e.toString()));\n\n                          return vc.error(Xe(t = \"[\".concat(_this65.name, \"]\")).call(t, _i29)), void r(_i29);\n                        }\n\n                        a && a(e);\n                      } else r(new Ad(ad.WS_DISCONNECT, \"websocket is closed: \".concat(e.toString())));\n                    });\n                  }));\n\n                case 3:\n                case \"end\":\n                  return _context39.stop();\n              }\n            }\n          }, _callee39, this);\n        }));\n\n        function createWebSocketConnection(_x42, _x43) {\n          return _createWebSocketConnection.apply(this, arguments);\n        }\n\n        return createWebSocketConnection;\n      }()\n    }, {\n      key: \"reconnectWithAction\",\n      value: function () {\n        var _reconnectWithAction = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee40(e, t) {\n          var _this66 = this;\n\n          var i, r, n, _e34, s, o, _e35, _e36;\n\n          return _regeneratorRuntime.wrap(function _callee40$(_context40) {\n            while (1) {\n              switch (_context40.prev = _context40.next) {\n                case 0:\n                  if (!(!t && this.reconnectCount >= this.retryConfig.maxRetryCount)) {\n                    _context40.next = 2;\n                    break;\n                  }\n\n                  return _context40.abrupt(\"return\", !1);\n\n                case 2:\n                  if (this.urls) {\n                    _context40.next = 4;\n                    break;\n                  }\n\n                  return _context40.abrupt(\"return\", !1);\n\n                case 4:\n                  if (!(\"closed\" === this.state)) {\n                    _context40.next = 6;\n                    break;\n                  }\n\n                  return _context40.abrupt(\"return\", !1);\n\n                case 6:\n                  this.onlineReconnectListener || WA.networkState !== Dl.OFFLINE || (this.onlineReconnectListener = WA.onlineWaiter && WA.onlineWaiter.then(function () {\n                    _this66.onlineReconnectListener = void 0;\n                  }));\n                  n = YA(this.reconnectCount, this.retryConfig);\n                  vc.debug(Xe(i = Xe(r = \"[\".concat(this.name, \"] wait \")).call(r, n, \"ms to reconnect websocket, mode: \")).call(i, e));\n                  _context40.next = 11;\n                  return As.race([Th(n), this.onlineReconnectListener || new As(function () {})]);\n\n                case 11:\n                  if (!(\"closed\" === this.state)) {\n                    _context40.next = 13;\n                    break;\n                  }\n\n                  return _context40.abrupt(\"return\", !1);\n\n                case 13:\n                  this.reconnectCount += 1;\n                  _context40.prev = 14;\n\n                  if (!(\"retry\" === e)) {\n                    _context40.next = 21;\n                    break;\n                  }\n\n                  _e34 = this.urls[this.currentURLIndex];\n                  _context40.next = 19;\n                  return this.createWebSocketConnection(_e34);\n\n                case 19:\n                  _context40.next = 41;\n                  break;\n\n                case 21:\n                  if (!(\"tryNext\" === e)) {\n                    _context40.next = 32;\n                    break;\n                  }\n\n                  if (!(this.currentURLIndex += 1, this.currentURLIndex >= this.urls.length)) {\n                    _context40.next = 26;\n                    break;\n                  }\n\n                  _context40.next = 25;\n                  return this.reconnectWithAction(\"recover\");\n\n                case 25:\n                  return _context40.abrupt(\"return\", _context40.sent);\n\n                case 26:\n                  vc.debug(Xe(s = Xe(o = \"[\".concat(this.name, \"] websocket url length: \")).call(o, this.urls.length, \" current index: \")).call(s, this.currentURLIndex));\n                  _e35 = this.urls[this.currentURLIndex];\n                  _context40.next = 30;\n                  return this.createWebSocketConnection(_e35);\n\n                case 30:\n                  _context40.next = 41;\n                  break;\n\n                case 32:\n                  if (!(\"recover\" === e)) {\n                    _context40.next = 41;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this.name, \"] request new urls\"));\n                  _context40.next = 36;\n                  return kh(this, il.REQUEST_NEW_URLS);\n\n                case 36:\n                  this.urls = _context40.sent;\n                  this.currentURLIndex = 0;\n                  _e36 = this.urls[this.currentURLIndex];\n                  _context40.next = 41;\n                  return this.createWebSocketConnection(_e36);\n\n                case 41:\n                  return _context40.abrupt(\"return\", !0);\n\n                case 44:\n                  _context40.prev = 44;\n                  _context40.t0 = _context40[\"catch\"](14);\n                  vc.error(\"[\".concat(this.name, \"] reconnect failed\"), _context40.t0.toString());\n                  _context40.next = 49;\n                  return this.reconnectWithAction(e);\n\n                case 49:\n                  return _context40.abrupt(\"return\", _context40.sent);\n\n                case 50:\n                case \"end\":\n                  return _context40.stop();\n              }\n            }\n          }, _callee40, this, [[14, 44]]);\n        }));\n\n        function reconnectWithAction(_x45, _x46) {\n          return _reconnectWithAction.apply(this, arguments);\n        }\n\n        return reconnectWithAction;\n      }()\n    }, {\n      key: \"chooseBestWebsocketConnection\",\n      value: function () {\n        var _chooseBestWebsocketConnection = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee41(e, t) {\n          var _this67 = this;\n\n          return _regeneratorRuntime.wrap(function _callee41$(_context41) {\n            while (1) {\n              switch (_context41.prev = _context41.next) {\n                case 0:\n                  return _context41.abrupt(\"return\", new As(function (i, r) {\n                    var n = !1;\n                    var s = [];\n\n                    _this67.closeEstablishingWs = function () {\n                      vc.debug(\"[choose-best-ws] close establishing websockets\"), Xi(s).call(s, function (e) {\n                        e.onclose = null, e.onopen = null, e.onmessage = null, e.close();\n                      }), r(new Ad(ad.WS_ABORT, \"choose best websocket aborted\"));\n                    };\n\n                    var o = Fc(\"GATEWAY_DOMAINS\");\n                    var a;\n                    var c = Os(e).call(e, \"?h=\"),\n                        d = Vs(o).call(o, function (t) {\n                      return -1 !== c ? eo(e).call(e, t, c) : eo(e).call(e, t);\n                    });\n                    vc.debug(\"[choose-best-ws] currentDomain: \", d, \", domains: \", o);\n                    var l = !_this67.tryDoubleDomain || t || !d;\n\n                    if (!l && d) {\n                      try {\n                        Xi(o).call(o, function (t) {\n                          var i = -1 === c ? e.replace(d, t) : e.substr(0, c) + e.substr(c).replace(d, t),\n                              r = new WebSocket(i);\n                          r.binaryType = \"arraybuffer\", s.push(r), vc.debug(\"[choose-best-ws] ws is connecting:\", r.url);\n                        });\n                      } catch (e) {\n                        for (vc.debug(\"[choose-best-ws] ws create failed, fallback to single url\"), Xi(s).call(s, function (e) {\n                          return e.close();\n                        }); s.length;) {\n                          s.pop();\n                        }\n\n                        l = !0;\n                      }\n\n                      Xi(s).call(s, function (e) {\n                        e.onopen = function () {\n                          var t;\n                          n || (Xi(t = Fr(s).call(s, function (t) {\n                            return t !== e;\n                          })).call(t, function (e) {\n                            vc.debug(\"[choose-best-ws]close backup websocket: \".concat(e.url)), e.close();\n                          }), n = !0, i(e));\n                        }, e.onclose = function (e) {\n                          if (a = e, n) return;\n                          Vs(s).call(s, function (e) {\n                            return !(e.readyState === WebSocket.CLOSED || e.readyState === WebSocket.CLOSING);\n                          }) || (vc.debug(\"[choose-best-ws] all websocket is closed\"), n = !0, r(a));\n                        }, e.onmessage = function (t) {\n                          var i;\n                          vc.debug(Xe(i = \"[choose-best-ws]\".concat(e.url, \" onmessage: \")).call(i, t.data));\n                        };\n                      }), Th(5e3).then(function () {\n                        Xi(s).call(s, function (e) {\n                          e.readyState !== WebSocket.OPEN && e.close();\n                        });\n                      });\n                    }\n\n                    if (l) {\n                      var _t50;\n\n                      vc.debug(\"[choose-best-ws] use single url: \", e);\n\n                      try {\n                        _t50 = new WebSocket(e), s.push(_t50), _t50.binaryType = \"arraybuffer\";\n                      } catch (e) {\n                        var A;\n\n                        var _t51 = new Ad(ad.WS_ERR, \"init websocket failed! Error: \".concat(e.toString()));\n\n                        return vc.error(Xe(A = \"[\".concat(_this67.name, \"]\")).call(A, _t51)), void r(_t51);\n                      }\n\n                      _t50.onopen = function () {\n                        i(_t50);\n                      }, _t50.onclose = function (e) {\n                        r(e);\n                      }, _t50.onmessage = function (e) {\n                        var i;\n                        vc.debug(Xe(i = \"[choose-best-ws]\".concat(_t50.url, \" onmessage: \")).call(i, e.data));\n                      }, Th(5e3).then(function () {\n                        _t50 && _t50.readyState !== WebSocket.OPEN && _t50.close();\n                      });\n                    }\n                  }).finally(function () {\n                    _this67.closeEstablishingWs = void 0;\n                  }));\n\n                case 1:\n                case \"end\":\n                  return _context41.stop();\n              }\n            }\n          }, _callee41, this);\n        }));\n\n        function chooseBestWebsocketConnection(_x47, _x48) {\n          return _chooseBestWebsocketConnection.apply(this, arguments);\n        }\n\n        return chooseBestWebsocketConnection;\n      }()\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"ipPortTuple\",\n      get: function get() {\n        if (!this.url) return [void 0, void 0];\n        var e = /^wss:\\/\\/(\\d+-\\d+-\\d+-\\d+)\\..+:(\\d+)\\/?$/.exec(this.url);\n\n        if (e && e[1] && e[2]) {\n          return [e[1].split(\"-\").join(\".\"), e[2]];\n        }\n\n        return [void 0, void 0];\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        e !== this._state && (this._state = e, \"reconnecting\" === this._state ? this.emit(il.RECONNECTING, this.reconnectReason) : \"connected\" === this._state ? this.emit(il.CONNECTED) : \"closed\" === this._state ? this.emit(il.CLOSED) : \"failed\" === this._state && this.emit(il.FAILED));\n      }\n    }]);\n\n    return xp;\n  }(Ll);\n\n  var Vp =\n  /*#__PURE__*/\n  function () {\n    function Vp(e) {\n      _classCallCheck(this, Vp);\n\n      this.input = [], this.size = e;\n    }\n\n    _createClass(Vp, [{\n      key: \"add\",\n      value: function add(e) {\n        var t;\n        (this.input.push(e), this.input.length > this.size) && Ss(t = this.input).call(t, 0, 1);\n      }\n    }, {\n      key: \"mean\",\n      value: function mean() {\n        var e;\n        return 0 === this.input.length ? 0 : ar(e = this.input).call(e, function (e, t) {\n          return e + t;\n        }) / this.input.length;\n      }\n    }]);\n\n    return Vp;\n  }();\n\n  var Gp =\n  /*#__PURE__*/\n  function (_Ll11) {\n    _inherits(Gp, _Ll11);\n\n    function Gp(e) {\n      var _this68;\n\n      _classCallCheck(this, Gp);\n\n      _this68 = _possibleConstructorReturn(this, _getPrototypeOf(Gp).call(this)), _this68._connectionState = xd.CLOSED, _this68.openConnectionTime = La(), _this68.lastMsgTime = La(), _this68.uploadCache = [], _this68.rttRolling = new Vp(5), _this68.pingpongTimeoutCount = 0, _this68.onWebsocketMessage = function (e) {\n        if (e.data instanceof ArrayBuffer) return void _this68.emit(Vd.ON_BINARY_DATA, e.data);\n        var t = JSON.parse(e.data);\n\n        if (_this68.lastMsgTime = La(), Object.prototype.hasOwnProperty.call(t, \"_id\")) {\n          var _e37 = \"res-@\".concat(t._id);\n\n          _this68.emit(_e37, t._result, t._message);\n        } else if (Object.prototype.hasOwnProperty.call(t, \"_type\") && (_this68.emit(t._type, t._message), t._type === Kd.ON_NOTIFICATION && _this68.handleNotification(t._message), t._type === Kd.ON_USER_BANNED)) switch (t._message.error_code) {\n          case 14:\n            _this68.close(\"UID_BANNED\");\n\n            break;\n\n          case 15:\n            _this68.close(\"IP_BANNED\");\n\n            break;\n\n          case 16:\n            _this68.close(\"CHANNEL_BANNED\");\n\n        }\n      }, _this68.clientId = e.clientId, _this68.spec = e, _this68.websocket = new xp(\"gateway-\".concat(_this68.clientId), _this68.spec.retryConfig, !0, !0), _this68.handleWebsocketEvents(), window.addEventListener(\"offline\", function () {\n        _this68.connectionState === xd.CONNECTED && _this68.reconnect(\"retry\", Fd.OFFLINE);\n      });\n      return _this68;\n    }\n\n    _createClass(Gp, [{\n      key: \"request\",\n      value: function () {\n        var _request = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee42(e, t, i, r) {\n          var _this69 = this;\n\n          var n, s, o, a, c, d, l, A, u, h, p, E, g, _;\n\n          return _regeneratorRuntime.wrap(function _callee42$(_context42) {\n            while (1) {\n              switch (_context42.prev = _context42.next) {\n                case 0:\n                  d = wh(6, \"\"), l = {\n                    _id: d,\n                    _type: e,\n                    _message: t\n                  }, A = this.websocket.connectionID, u = function u() {\n                    return new As(function (t, i) {\n                      if (_this69.connectionState === xd.CONNECTED) return t();\n\n                      var r = function r() {\n                        _this69.off(Vd.WS_CLOSED, n), t();\n                      },\n                          n = function n() {\n                        _this69.off(Vd.WS_CONNECTED, r), i(new Ad(ad.WS_ABORT));\n                      };\n\n                      _this69.once(Vd.WS_CONNECTED, r), _this69.once(Vd.WS_CLOSED, n), e !== Gd.PUBLISH && e !== Gd.SUBSCRIBE && e !== Gd.UNSUBSCRIBE && e !== Gd.UNPUBLISH && e !== Gd.CONTROL || _this69.once(Vd.DISCONNECT_P2P, function () {\n                        i(new Ad(ad.DISCONNECT_P2P));\n                      });\n                    });\n                  };\n                  _context42.t0 = this.connectionState !== xd.CONNECTING && this.connectionState !== xd.RECONNECTING || e === Gd.JOIN || e === Gd.REJOIN;\n\n                  if (_context42.t0) {\n                    _context42.next = 5;\n                    break;\n                  }\n\n                  _context42.next = 5;\n                  return u();\n\n                case 5:\n                  this.websocket.sendMessage(l, !0);\n\n                  if (!r) {\n                    _context42.next = 8;\n                    break;\n                  }\n\n                  return _context42.abrupt(\"return\");\n\n                case 8:\n                  h = new As(function (i, r) {\n                    var n = !1;\n\n                    var s = function s(r, _s10) {\n                      n = !0, i({\n                        isSuccess: \"success\" === r,\n                        message: _s10 || {}\n                      }), _this69.off(Vd.WS_CLOSED, o), _this69.off(Vd.WS_RECONNECTING, o), _this69.emit(Vd.REQUEST_SUCCESS, e, t);\n                    };\n\n                    _this69.once(\"res-@\".concat(d), s);\n\n                    var o = function o() {\n                      r(new Ad(ad.WS_ABORT, \"type: \".concat(e))), _this69.off(Vd.WS_CLOSED, o), _this69.off(Vd.WS_RECONNECTING, o), _this69.off(\"res-@\".concat(d), s);\n                    };\n\n                    _this69.once(Vd.WS_CLOSED, o), _this69.once(Vd.WS_RECONNECTING, o), Th(Fc(\"SIGNAL_REQUEST_TIMEOUT\")).then(function () {\n                      _this69.websocket.connectionID !== A || n || (vc.warning(\"ws request timeout, type: \".concat(e)), _this69.emit(Vd.REQUEST_TIMEOUT, e, t));\n                    });\n                  });\n                  p = null;\n                  _context42.prev = 10;\n                  _context42.next = 13;\n                  return h;\n\n                case 13:\n                  p = _context42.sent;\n                  _context42.next = 35;\n                  break;\n\n                case 16:\n                  _context42.prev = 16;\n                  _context42.t1 = _context42[\"catch\"](10);\n\n                  if (!(this.connectionState === xd.CLOSED || e === Gd.LEAVE)) {\n                    _context42.next = 20;\n                    break;\n                  }\n\n                  throw new Ad(ad.WS_ABORT);\n\n                case 20:\n                  if (!(!this.spec.forceWaitGatewayResponse || i)) {\n                    _context42.next = 24;\n                    break;\n                  }\n\n                  _context42.t2 = _context42.t1.throw();\n                  _context42.next = 34;\n                  break;\n\n                case 24:\n                  if (!(e === Gd.JOIN || e === Gd.REJOIN)) {\n                    _context42.next = 28;\n                    break;\n                  }\n\n                  _context42.t3 = null;\n                  _context42.next = 33;\n                  break;\n\n                case 28:\n                  _context42.next = 30;\n                  return u();\n\n                case 30:\n                  _context42.next = 32;\n                  return this.request(e, t);\n\n                case 32:\n                  _context42.t3 = _context42.sent;\n\n                case 33:\n                  _context42.t2 = _context42.t3;\n\n                case 34:\n                  return _context42.abrupt(\"return\", _context42.t2);\n\n                case 35:\n                  if (!p.isSuccess) {\n                    _context42.next = 37;\n                    break;\n                  }\n\n                  return _context42.abrupt(\"return\", p.message);\n\n                case 37:\n                  E = Number(p.message.error_code || p.message.code), g = ep(E), _ = new Ad(ad.UNEXPECTED_RESPONSE, Xe(n = \"\".concat(g.desc, \": \")).call(n, p.message.error_str), {\n                    code: E,\n                    data: p.message\n                  });\n\n                  if (!(\"success\" === g.action)) {\n                    _context42.next = 42;\n                    break;\n                  }\n\n                  _context42.t4 = p.message;\n                  _context42.next = 62;\n                  break;\n\n                case 42:\n                  vc.warning(Xe(s = Xe(o = Xe(a = Xe(c = \"[\".concat(this.websocket.connectionID, \"] unexpected response from type \")).call(c, e, \", error_code: \")).call(a, E, \", message: \")).call(o, g.desc, \", action: \")).call(s, g.action));\n\n                  if (!(\"failed\" === g.action)) {\n                    _context42.next = 47;\n                    break;\n                  }\n\n                  _context42.t5 = _.throw();\n                  _context42.next = 61;\n                  break;\n\n                case 47:\n                  if (!(\"quit\" === g.action)) {\n                    _context42.next = 51;\n                    break;\n                  }\n\n                  _context42.t6 = (this.initError = _, this.close(), _.throw());\n                  _context42.next = 60;\n                  break;\n\n                case 51:\n                  E === Ud.ERR_JOIN_BY_MULTI_IP ? (this.multiIpOption = p.message.option, vc.warning(\"[\".concat(this.clientId, \"] detect multi ip, recover\")), this.reconnect(\"recover\", Fd.MULTI_IP)) : this.reconnect(g.action, Fd.SERVER_ERROR);\n\n                  if (!(e === Gd.JOIN || e === Gd.REJOIN)) {\n                    _context42.next = 56;\n                    break;\n                  }\n\n                  _context42.t7 = null;\n                  _context42.next = 59;\n                  break;\n\n                case 56:\n                  _context42.next = 58;\n                  return this.request(e, t);\n\n                case 58:\n                  _context42.t7 = _context42.sent;\n\n                case 59:\n                  _context42.t6 = _context42.t7;\n\n                case 60:\n                  _context42.t5 = _context42.t6;\n\n                case 61:\n                  _context42.t4 = _context42.t5;\n\n                case 62:\n                  return _context42.abrupt(\"return\", _context42.t4);\n\n                case 63:\n                case \"end\":\n                  return _context42.stop();\n              }\n            }\n          }, _callee42, this, [[10, 16]]);\n        }));\n\n        function request(_x49, _x50, _x51, _x52) {\n          return _request.apply(this, arguments);\n        }\n\n        return request;\n      }()\n    }, {\n      key: \"waitMessage\",\n      value: function waitMessage(e, t) {\n        var _this70 = this;\n\n        return new As(function (i) {\n          var r = function r(n) {\n            (!t || t(n)) && (_this70.off(e, r), i(n));\n          };\n\n          _this70.on(e, r);\n        });\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(e, t) {\n        var _this71 = this;\n\n        var i = {\n          _type: e,\n          _message: t\n        };\n\n        try {\n          this.websocket.sendMessage(i);\n        } catch (e) {\n          var _t52 = Fc(\"MAX_UPLOAD_CACHE\") || 50;\n\n          var r;\n          if (this.uploadCache.push(i), this.uploadCache.length > _t52) Ss(r = this.uploadCache).call(r, 0, 1);\n          this.uploadCache.length > 0 && !this.uploadCacheInterval && (this.uploadCacheInterval = window.setInterval(function () {\n            var e;\n            if (_this71.connectionState !== xd.CONNECTED) return;\n            var t = Ss(e = _this71.uploadCache).call(e, 0, 1)[0];\n            0 === _this71.uploadCache.length && (window.clearInterval(_this71.uploadCacheInterval), _this71.uploadCacheInterval = void 0), _this71.upload(t._type, t._message);\n          }, Fc(\"UPLOAD_CACHE_INTERVAL\") || 2e3));\n        }\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = {\n          _type: e,\n          _message: t\n        };\n        this.websocket.sendMessage(i);\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var _this72 = this;\n\n        return this.initError = void 0, this.multiIpOption = void 0, this.joinResponse = void 0, this.reconnectToken = void 0, new As(function (t, i) {\n          _this72.once(Vd.WS_CONNECTED, function () {\n            return t(_this72.joinResponse);\n          }), _this72.once(Vd.WS_CLOSED, function () {\n            return i(_this72.initError || new Ad(ad.WS_ABORT));\n          }), _this72.connectionState = xd.CONNECTING, _this72.websocket.init(e).catch(i), _this72.wsInflateDataTimer && window.clearInterval(_this72.wsInflateDataTimer), _this72.wsInflateDataTimer = window.setInterval(function () {\n            _this72.handleWsInflateData();\n          }, 2e4);\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.wsInflateDataTimer && (this.handleWsInflateData(), window.clearInterval(this.wsInflateDataTimer), this.wsInflateDataTimer = void 0), this.reconnectToken = void 0, this.joinResponse = void 0, this._disconnectedReason = e || \"LEAVE\", this.connectionState = xd.CLOSED, this.websocket.close();\n      }\n    }, {\n      key: \"join\",\n      value: function () {\n        var _join = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee43() {\n          var e, _e38, _t53;\n\n          return _regeneratorRuntime.wrap(function _callee43$(_context43) {\n            while (1) {\n              switch (_context43.prev = _context43.next) {\n                case 0:\n                  if (this.joinResponse) {\n                    _context43.next = 10;\n                    break;\n                  }\n\n                  _context43.next = 3;\n                  return kh(this, Vd.REQUEST_JOIN_INFO);\n\n                case 3:\n                  _e38 = _context43.sent;\n                  _context43.next = 6;\n                  return this.request(Gd.JOIN, _e38);\n\n                case 6:\n                  _t53 = _context43.sent;\n\n                  if (_t53) {\n                    _context43.next = 9;\n                    break;\n                  }\n\n                  return _context43.abrupt(\"return\", (this.emit(Vd.REPORT_JOIN_GATEWAY, ad.TIMEOUT, this.url || \"\"), !1));\n\n                case 9:\n                  this.joinResponse = _t53, this.emit(Vd.JOIN_RESPONSE, this.joinResponse), this.reconnectToken = this.joinResponse.rejoin_token;\n\n                case 10:\n                  return _context43.abrupt(\"return\", (this.connectionState = xd.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(qs(e = this.handlePingPong).call(e, this), 3e3), !0));\n\n                case 11:\n                case \"end\":\n                  return _context43.stop();\n              }\n            }\n          }, _callee43, this);\n        }));\n\n        function join() {\n          return _join.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"rejoin\",\n      value: function () {\n        var _rejoin = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee44() {\n          var _this73 = this;\n\n          var e, t, i, r;\n          return _regeneratorRuntime.wrap(function _callee44$(_context44) {\n            while (1) {\n              switch (_context44.prev = _context44.next) {\n                case 0:\n                  if (this.reconnectToken) {\n                    _context44.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"can not rejoin, no rejoin token\");\n\n                case 2:\n                  i = Bh(this, Vd.REQUEST_REJOIN_INFO);\n                  i.token = this.reconnectToken;\n                  _context44.next = 6;\n                  return this.request(Gd.REJOIN, i);\n\n                case 6:\n                  r = _context44.sent;\n                  return _context44.abrupt(\"return\", !!r && (this.connectionState = xd.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(qs(e = this.handlePingPong).call(e, this), 3e3), r.peers && Xi(t = r.peers).call(t, function (e) {\n                    _this73.emit(Kd.ON_USER_ONLINE, {\n                      uid: e.uid\n                    }), e.audio_mute ? _this73.emit(Kd.MUTE_AUDIO, {\n                      uid: e.uid\n                    }) : _this73.emit(Kd.UNMUTE_AUDIO, {\n                      uid: e.uid\n                    }), e.video_mute ? _this73.emit(Kd.MUTE_VIDEO, {\n                      uid: e.uid\n                    }) : _this73.emit(Kd.UNMUTE_VIDEO, {\n                      uid: e.uid\n                    }), e.audio_enable_local ? _this73.emit(Kd.ENABLE_LOCAL_AUDIO, {\n                      uid: e.uid\n                    }) : _this73.emit(Kd.DISABLE_LOCAL_AUDIO, {\n                      uid: e.uid\n                    }), e.video_enable_local ? _this73.emit(Kd.ENABLE_LOCAL_VIDEO, {\n                      uid: e.uid\n                    }) : _this73.emit(Kd.DISABLE_LOCAL_VIDEO, {\n                      uid: e.uid\n                    }), e.audio || e.video || _this73.emit(Kd.ON_REMOVE_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id\n                    }), e.audio && _this73.emit(Kd.ON_ADD_AUDIO_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id,\n                      audio: !0\n                    }), e.video && _this73.emit(Kd.ON_ADD_VIDEO_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id,\n                      video: !0\n                    });\n                  }), !0));\n\n                case 8:\n                case \"end\":\n                  return _context44.stop();\n              }\n            }\n          }, _callee44, this);\n        }));\n\n        function rejoin() {\n          return _rejoin.apply(this, arguments);\n        }\n\n        return rejoin;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.websocket.reconnect(e, t);\n      }\n    }, {\n      key: \"handleNotification\",\n      value: function handleNotification(e) {\n        vc.debug(\"[\".concat(this.clientId, \"] receive notification: \"), e);\n        var t = ep(e.code);\n\n        if (\"success\" !== t.action) {\n          if (\"failed\" !== t.action) return \"quit\" === t.action ? (\"ERR_REPEAT_JOIN_CHANNEL\" === t.desc && this.close(\"UID_BANNED\"), void this.close()) : void this.reconnect(t.action, Fd.SERVER_ERROR);\n          vc.error(\"[\".concat(this.clientId, \"] ignore error: \"), t.desc);\n        }\n      }\n    }, {\n      key: \"handlePingPong\",\n      value: function handlePingPong() {\n        var _this74 = this;\n\n        if (!this.websocket || \"connected\" !== this.websocket.state) return;\n        this.pingpongTimeoutCount > 0 && this.rttRolling.add(3e3), this.pingpongTimeoutCount += 1;\n        var e = Fc(\"PING_PONG_TIME_OUT\"),\n            t = La();\n        this.pingpongTimeoutCount >= e && (vc.warning(\"PINGPONG Timeout. Last Socket Message: \".concat(t - this.lastMsgTime, \"ms\")), t - this.lastMsgTime > Fc(\"WEBSOCKET_TIMEOUT_MIN\")) ? this.reconnect(\"retry\", Fd.TIMEOUT) : this.request(Gd.PING, void 0, !0).then(function () {\n          _this74.pingpongTimeoutCount = 0;\n          var e = La() - t;\n          _this74.rttRolling.add(e), Fc(\"REPORT_STATS\") && _this74.send(Gd.PING_BACK, {\n            pingpongElapse: e\n          });\n        }).catch(function (e) {});\n      }\n    }, {\n      key: \"handleWsInflateData\",\n      value: function handleWsInflateData() {\n        var _this$websocket$getWs = this.websocket.getWsInflateData(),\n            e = _this$websocket$getWs.wsInflateLength,\n            t = _this$websocket$getWs.wsDeflateLength;\n\n        0 !== e && 0 !== t && this.upload(jd.WS_INFLATE_DATA_LENGTH, {\n          ws_deflate_length: t,\n          ws_inflate_length: e\n        });\n      }\n    }, {\n      key: \"handleWebsocketEvents\",\n      value: function handleWebsocketEvents() {\n        var _this75 = this;\n\n        this.websocket.on(il.ON_MESSAGE, this.onWebsocketMessage), this.websocket.on(il.CLOSED, function () {\n          _this75.connectionState = xd.CLOSED;\n        }), this.websocket.on(il.FAILED, function () {\n          _this75._disconnectedReason = \"NETWORK_ERROR\", _this75.connectionState = xd.CLOSED;\n        }), this.websocket.on(il.RECONNECTING, function (e) {\n          _this75._websocketReconnectReason = e, _this75.joinResponse = void 0, _this75.connectionState === xd.CONNECTED ? _this75.connectionState = xd.RECONNECTING : _this75.connectionState = xd.CONNECTING;\n        }), this.websocket.on(il.WILL_RECONNECT, function (e, t) {\n          if (Bh(_this75, Vd.IS_P2P_DISCONNECTED) && \"retry\" === e) return _this75.reconnectToken = void 0, _this75.emit(Vd.NEED_RENEW_SESSION), _this75.emit(Vd.DISCONNECT_P2P), t(\"tryNext\");\n          \"retry\" !== e && (_this75.reconnectToken = void 0, _this75.emit(Vd.NEED_RENEW_SESSION), _this75.emit(Vd.DISCONNECT_P2P)), t(e);\n        }), this.websocket.on(il.CONNECTED, function () {\n          _this75.openConnectionTime = La(), _this75.reconnectToken ? _this75.rejoin().catch(function (e) {\n            var t;\n            vc.warning(Xe(t = \"[\".concat(_this75.clientId, \"] rejoin failed \")).call(t, e)), _this75.reconnect(\"tryNext\", Fd.SERVER_ERROR);\n          }) : _this75.join().catch(function (e) {\n            if (_this75.emit(Vd.REPORT_JOIN_GATEWAY, e.message || e.code, _this75.url || \"\"), e instanceof Ad && e.code === ad.UNEXPECTED_RESPONSE && e.data.code === Ud.ERR_NO_AUTHORIZED) return vc.warning(\"[\".concat(_this75.clientId, \"] reconnect no authorized, recover\")), void _this75.reconnect(\"recover\", Fd.SERVER_ERROR);\n            vc.error(\"[\".concat(_this75.clientId, \"] join gateway request failed\"), e.toString()), _this75.spec.forceWaitGatewayResponse ? _this75.reconnect(\"tryNext\", Fd.SERVER_ERROR) : (_this75.initError = e, _this75.close());\n          });\n        }), this.websocket.on(il.REQUEST_NEW_URLS, function (e, t) {\n          kh(_this75, Vd.REQUEST_RECOVER, _this75.multiIpOption).then(e).catch(t);\n        });\n      }\n    }, {\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        e !== this._connectionState && (this._connectionState = e, e === xd.CONNECTED ? this.emit(Vd.WS_CONNECTED) : e === xd.RECONNECTING ? this.emit(Vd.WS_RECONNECTING, this._websocketReconnectReason) : e === xd.CLOSED && this.emit(Vd.WS_CLOSED, this._disconnectedReason));\n      }\n    }, {\n      key: \"currentURLIndex\",\n      get: function get() {\n        return this.websocket.currentURLIndex;\n      }\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"rtt\",\n      get: function get() {\n        return this.rttRolling.mean();\n      }\n    }]);\n\n    return Gp;\n  }(Ll);\n\n  function jp(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Kp(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = jp(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = jp(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var Wp = new Li();\n\n  var Hp =\n  /*#__PURE__*/\n  function (_Ll12) {\n    _inherits(Hp, _Ll12);\n\n    function Hp(e, t) {\n      var _this76;\n\n      _classCallCheck(this, Hp);\n\n      _this76 = _possibleConstructorReturn(this, _getPrototypeOf(Hp).call(this)), _this76.inChannelInfo = {\n        joinAt: null,\n        duration: 0\n      }, _this76._state = \"DISCONNECTED\", _this76.isSignalRecover = !1, _this76.hasChangeBGPAddress = !1, _this76.joinGatewayStartTime = 0, _this76._signalTimeout = !1, _this76.store = e, _this76.spec = t, _this76.signal = new Gp(Kp({}, t, {\n        retryConfig: t.websocketRetryConfig\n      })), _this76._statsCollector = t.statsCollector, _this76.role = t.role || \"audience\", _this76._clientRoleOptions = t.clientRoleOptions, _this76.handleSignalEvents();\n      return _this76;\n    }\n\n    _createClass(Hp, [{\n      key: \"join\",\n      value: function () {\n        var _join2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee45(e, t) {\n          var _this77 = this;\n\n          var i, r, n, s, _t54, o, a;\n\n          return _regeneratorRuntime.wrap(function _callee45$(_context45) {\n            while (1) {\n              switch (_context45.prev = _context45.next) {\n                case 0:\n                  this.store.joinGatewayStart(), \"disabled\" !== e.cloudProxyServer && (this.hasChangeBGPAddress = !0);\n                  n = La();\n                  s = Wp.get(e.cname);\n\n                  if (!(s || (s = new Li(), Wp.set(e.cname, s)), s.has(e.uid))) {\n                    _context45.next = 6;\n                    break;\n                  }\n\n                  _t54 = new Ad(ad.UID_CONFLICT);\n                  throw iu.joinGateway(e.sid, {\n                    lts: n,\n                    succ: !1,\n                    ec: _t54.message,\n                    addr: null,\n                    uid: e.uid,\n                    cid: e.cid\n                  }), _t54;\n\n                case 6:\n                  s.set(e.uid, !0), this.joinInfo = e, this.key = t;\n                  o = e.proxyServer ? Es(i = e.gatewayAddrs).call(i, function (t) {\n                    var i, r;\n                    var n = t.split(\":\");\n                    return Xe(i = Xe(r = \"wss://\".concat(e.proxyServer, \"/ws/?h=\")).call(r, n[0], \"&p=\")).call(i, n[1]);\n                  }) : Es(r = e.gatewayAddrs).call(r, function (e) {\n                    return \"wss://\".concat(e);\n                  });\n                  a = 0;\n                  this.joinGatewayStartTime = n;\n                  _context45.prev = 10;\n                  _context45.next = 13;\n                  return this.signal.init(o);\n\n                case 13:\n                  a = _context45.sent.uid;\n                  _context45.next = 19;\n                  break;\n\n                case 16:\n                  _context45.prev = 16;\n                  _context45.t0 = _context45[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.store.clientId, \"] User join failed\"), _context45.t0.toString()), iu.joinGateway(e.sid, {\n                    lts: n,\n                    succ: !1,\n                    ec: _context45.t0.message,\n                    addr: this.signal.url,\n                    uid: e.uid,\n                    cid: e.cid\n                  }), s.delete(e.uid), this.signal.close(), _context45.t0;\n\n                case 19:\n                  return _context45.abrupt(\"return\", (this.state = \"CONNECTED\", this.inChannelInfo.joinAt = La(), vc.debug(\"[\".concat(this.store.clientId, \"] Connected to gateway server\")), this.trafficStatsInterval = window.setInterval(function () {\n                    _this77.updateTrafficStats().catch(function (e) {\n                      vc.warning(\"[\".concat(_this77.store.clientId, \"] get traffic stats error\"), e.toString());\n                    });\n                  }, 3e3), this.networkQualityInterval = window.setInterval(function () {\n                    navigator && void 0 !== navigator.onLine && !navigator.onLine ? _this77.emit(El.NETWORK_QUALITY, {\n                      downlinkNetworkQuality: 6,\n                      uplinkNetworkQuality: 6\n                    }) : _this77._signalTimeout ? _this77.emit(El.NETWORK_QUALITY, {\n                      downlinkNetworkQuality: 5,\n                      uplinkNetworkQuality: 5\n                    }) : \"CONNECTED\" === _this77.state && _this77._statsCollector.trafficStats ? _this77.emit(El.NETWORK_QUALITY, {\n                      uplinkNetworkQuality: Eh(_this77._statsCollector.trafficStats.B_unq),\n                      downlinkNetworkQuality: Eh(_this77._statsCollector.trafficStats.B_dnq)\n                    }) : _this77.emit(El.NETWORK_QUALITY, {\n                      uplinkNetworkQuality: 0,\n                      downlinkNetworkQuality: 0\n                    });\n                  }, 2e3), this.store.joinGatewayEnd(), a));\n\n                case 20:\n                case \"end\":\n                  return _context45.stop();\n              }\n            }\n          }, _callee45, this, [[10, 16]]);\n        }));\n\n        function join(_x53, _x54) {\n          return _join2.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee46() {\n          var e,\n              _args46 = arguments;\n          return _regeneratorRuntime.wrap(function _callee46$(_context46) {\n            while (1) {\n              switch (_context46.prev = _context46.next) {\n                case 0:\n                  e = _args46.length > 0 && _args46[0] !== undefined ? _args46[0] : !1;\n\n                  if (!(\"DISCONNECTED\" !== this.state)) {\n                    _context46.next = 14;\n                    break;\n                  }\n\n                  this.state = \"DISCONNECTING\";\n                  _context46.prev = 3;\n                  _context46.t0 = e || this.signal.connectionState !== xd.CONNECTED;\n\n                  if (_context46.t0) {\n                    _context46.next = 8;\n                    break;\n                  }\n\n                  _context46.next = 8;\n                  return yh(this.signal.request(Gd.LEAVE, void 0, !0), 3e3);\n\n                case 8:\n                  _context46.next = 13;\n                  break;\n\n                case 10:\n                  _context46.prev = 10;\n                  _context46.t1 = _context46[\"catch\"](3);\n                  vc.warning(\"[\".concat(this.store.clientId, \"] leave request failed, ignore\"), _context46.t1);\n\n                case 13:\n                  this.signal.close(), this.reset(), this.state = \"DISCONNECTED\";\n\n                case 14:\n                case \"end\":\n                  return _context46.stop();\n              }\n            }\n          }, _callee46, this, [[3, 10]]);\n        }));\n\n        function leave() {\n          return _leave.apply(this, arguments);\n        }\n\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee47(e, t, i) {\n          var r;\n          return _regeneratorRuntime.wrap(function _callee47$(_context47) {\n            while (1) {\n              switch (_context47.prev = _context47.next) {\n                case 0:\n                  if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                    _context47.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish when connection state is \".concat(this.state));\n\n                case 2:\n                  r = {\n                    state: \"offer\",\n                    p2p_id: this.store.p2pId,\n                    ortc: t,\n                    mode: this.spec.mode,\n                    extend: Fc(\"PUB_EXTEND\")\n                  };\n                  _context47.prev = 3;\n                  _context47.next = 6;\n                  return this.signal.request(Gd.PUBLISH, r, !0);\n\n                case 6:\n                  return _context47.abrupt(\"return\", _context47.sent._message);\n\n                case 9:\n                  _context47.prev = 9;\n                  _context47.t0 = _context47[\"catch\"](3);\n\n                  if (!(i && _context47.t0.data && _context47.t0.data.code === Ud.ERR_PUBLISH_REQUEST_INVALID)) {\n                    _context47.next = 16;\n                    break;\n                  }\n\n                  vc.warning(\"[\".concat(this.store.clientId, \"] receive publish error code, retry\"), _context47.t0.toString());\n                  _context47.next = 15;\n                  return this.tryUnpubBeforeRepub(e, t);\n\n                case 15:\n                  return _context47.abrupt(\"return\", this.publish(e, t, !1));\n\n                case 16:\n                  throw _context47.t0;\n\n                case 17:\n                case \"end\":\n                  return _context47.stop();\n              }\n            }\n          }, _callee47, this, [[3, 9]]);\n        }));\n\n        function publish(_x55, _x56, _x57) {\n          return _publish.apply(this, arguments);\n        }\n\n        return publish;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee48(e, t) {\n          return _regeneratorRuntime.wrap(function _callee48$(_context48) {\n            while (1) {\n              switch (_context48.prev = _context48.next) {\n                case 0:\n                  _context48.prev = 0;\n\n                  if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                    _context48.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish when connection state is \".concat(this.state));\n\n                case 3:\n                  _context48.next = 5;\n                  return this.signal.request(Gd.UNPUBLISH, {\n                    stream_id: t,\n                    ortc: e\n                  }, !0);\n\n                case 5:\n                  _context48.next = 10;\n                  break;\n\n                case 7:\n                  _context48.prev = 7;\n                  _context48.t0 = _context48[\"catch\"](0);\n                  vc.warning(\"unpublish warning: \", _context48.t0);\n\n                case 10:\n                case \"end\":\n                  return _context48.stop();\n              }\n            }\n          }, _callee48, this, [[0, 7]]);\n        }));\n\n        function unpublish(_x58, _x59) {\n          return _unpublish.apply(this, arguments);\n        }\n\n        return unpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee49(e, t, i) {\n          var r;\n          return _regeneratorRuntime.wrap(function _callee49$(_context49) {\n            while (1) {\n              switch (_context49.prev = _context49.next) {\n                case 0:\n                  if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                    _context49.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not subscribe when connection state is \".concat(this.state));\n\n                case 2:\n                  r = {\n                    stream_id: e,\n                    stream_type: t.stream_type,\n                    mode: this.spec.mode,\n                    codec: this.spec.codec,\n                    p2p_id: this.store.p2pId,\n                    tcc: !!Fc(\"SUBSCRIBE_TCC\"),\n                    extend: Fc(\"SUB_EXTEND\"),\n                    ssrcId: t.ssrcId\n                  };\n                  _context49.prev = 3;\n                  _context49.next = 6;\n                  return this.signal.request(Gd.SUBSCRIBE, r, !0);\n\n                case 6:\n                  return _context49.abrupt(\"return\", _context49.sent._message);\n\n                case 9:\n                  _context49.prev = 9;\n                  _context49.t0 = _context49[\"catch\"](3);\n\n                  if (!(i && _context49.t0.data && _context49.t0.data.code === Ud.ERR_SUBSCRIBE_REQUEST_INVALID)) {\n                    _context49.next = 18;\n                    break;\n                  }\n\n                  vc.warning(\"[\".concat(this.store.clientId, \"] receiver subscribe error code, retry\"), _context49.t0.toString());\n                  _context49.next = 15;\n                  return this.tryUnsubBeforeResub(e, t);\n\n                case 15:\n                  _context49.next = 17;\n                  return this.subscribe(e, t, !1);\n\n                case 17:\n                  return _context49.abrupt(\"return\", _context49.sent);\n\n                case 18:\n                  throw _context49.t0;\n\n                case 19:\n                case \"end\":\n                  return _context49.stop();\n              }\n            }\n          }, _callee49, this, [[3, 9]]);\n        }));\n\n        function subscribe(_x60, _x61, _x62) {\n          return _subscribe.apply(this, arguments);\n        }\n\n        return subscribe;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee50(e, t) {\n          return _regeneratorRuntime.wrap(function _callee50$(_context50) {\n            while (1) {\n              switch (_context50.prev = _context50.next) {\n                case 0:\n                  _context50.prev = 0;\n                  _context50.next = 3;\n                  return this.signal.request(Gd.UNSUBSCRIBE, {\n                    p2p_id: this.store.p2pId,\n                    ortc: e,\n                    stream_id: t\n                  }, !0);\n\n                case 3:\n                  _context50.next = 8;\n                  break;\n\n                case 5:\n                  _context50.prev = 5;\n                  _context50.t0 = _context50[\"catch\"](0);\n                  vc.warning(\"unsubscribe warning: \", _context50.t0);\n\n                case 8:\n                case \"end\":\n                  return _context50.stop();\n              }\n            }\n          }, _callee50, this, [[0, 5]]);\n        }));\n\n        function unsubscribe(_x63, _x64) {\n          return _unsubscribe.apply(this, arguments);\n        }\n\n        return unsubscribe;\n      }()\n    }, {\n      key: \"reconnectPC\",\n      value: function () {\n        var _reconnectPC = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee51(e) {\n          var t, i, r;\n          return _regeneratorRuntime.wrap(function _callee51$(_context51) {\n            while (1) {\n              switch (_context51.prev = _context51.next) {\n                case 0:\n                  t = e.iceParameters, i = e.dtlsParameters, r = e.rtpCapabilities;\n                  _context51.next = 3;\n                  return this.signal.request(Gd.CONNECT_PC, {\n                    p2p_id: this.store.p2pId,\n                    stream_id: this.store.uid,\n                    ortc: {\n                      iceParameters: t,\n                      dtlsParameters: i,\n                      rtpCapabilities: r\n                    }\n                  }, !0);\n\n                case 3:\n                  _context51.t0 = _context51.sent;\n                  return _context51.abrupt(\"return\", {\n                    gatewayEstablishParams: _context51.t0\n                  });\n\n                case 5:\n                case \"end\":\n                  return _context51.stop();\n              }\n            }\n          }, _callee51, this);\n        }));\n\n        function reconnectPC(_x65) {\n          return _reconnectPC.apply(this, arguments);\n        }\n\n        return reconnectPC;\n      }()\n    }, {\n      key: \"getGatewayInfo\",\n      value: function getGatewayInfo() {\n        return this.signal.request(Gd.GATEWAY_INFO);\n      }\n    }, {\n      key: \"renewToken\",\n      value: function renewToken(e) {\n        return this.signal.request(Gd.RENEW_TOKEN, e);\n      }\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee52(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee52$(_context52) {\n            while (1) {\n              switch (_context52.prev = _context52.next) {\n                case 0:\n                  if (!(t && (this._clientRoleOptions = er({}, t)), \"CONNECTED\" !== this.state)) {\n                    _context52.next = 2;\n                    break;\n                  }\n\n                  return _context52.abrupt(\"return\", void (this.role = e));\n\n                case 2:\n                  i = void 0;\n                  i = \"audience\" === e ? this._clientRoleOptions && this._clientRoleOptions.level ? this._clientRoleOptions.level : 2 : 0;\n                  _context52.next = 6;\n                  return this.signal.request(Gd.SET_CLIENT_ROLE, {\n                    role: e,\n                    level: i\n                  });\n\n                case 6:\n                  this.role = e;\n\n                case 7:\n                case \"end\":\n                  return _context52.stop();\n              }\n            }\n          }, _callee52, this);\n        }));\n\n        function setClientRole(_x66, _x67) {\n          return _setClientRole.apply(this, arguments);\n        }\n\n        return setClientRole;\n      }()\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee53(e, t) {\n          return _regeneratorRuntime.wrap(function _callee53$(_context53) {\n            while (1) {\n              switch (_context53.prev = _context53.next) {\n                case 0:\n                  _context53.next = 2;\n                  return this.signal.request(Gd.SWITCH_VIDEO_STREAM, {\n                    stream_id: e,\n                    stream_type: t\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context53.stop();\n              }\n            }\n          }, _callee53, this);\n        }));\n\n        function setRemoteVideoStreamType(_x68, _x69) {\n          return _setRemoteVideoStreamType.apply(this, arguments);\n        }\n\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee54(e, t) {\n          return _regeneratorRuntime.wrap(function _callee54$(_context54) {\n            while (1) {\n              switch (_context54.prev = _context54.next) {\n                case 0:\n                  _context54.next = 2;\n                  return this.signal.request(Gd.SET_FALLBACK_OPTION, {\n                    stream_id: e,\n                    fallback_type: t\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context54.stop();\n              }\n            }\n          }, _callee54, this);\n        }));\n\n        function setStreamFallbackOption(_x70, _x71) {\n          return _setStreamFallbackOption.apply(this, arguments);\n        }\n\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee55(e, t) {\n          return _regeneratorRuntime.wrap(function _callee55$(_context55) {\n            while (1) {\n              switch (_context55.prev = _context55.next) {\n                case 0:\n                  _context55.next = 2;\n                  return this.signal.request(Gd.PICK_SVC_LAYER, {\n                    stream_id: e,\n                    spatial_layer: t.spatialLayer,\n                    temporal_layer: t.temporalLayer\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context55.stop();\n              }\n            }\n          }, _callee55, this);\n        }));\n\n        function pickSVCLayer(_x72, _x73) {\n          return _pickSVCLayer.apply(this, arguments);\n        }\n\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"getInChannelInfo\",\n      value: function getInChannelInfo() {\n        return this.inChannelInfo.joinAt && (this.inChannelInfo.duration = La() - this.inChannelInfo.joinAt), Kp({}, this.inChannelInfo);\n      }\n    }, {\n      key: \"getGatewayVersion\",\n      value: function () {\n        var _getGatewayVersion = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee56() {\n          return _regeneratorRuntime.wrap(function _callee56$(_context56) {\n            while (1) {\n              switch (_context56.prev = _context56.next) {\n                case 0:\n                  _context56.next = 2;\n                  return this.signal.request(Gd.GATEWAY_INFO);\n\n                case 2:\n                  return _context56.abrupt(\"return\", _context56.sent.version);\n\n                case 3:\n                case \"end\":\n                  return _context56.stop();\n              }\n            }\n          }, _callee56, this);\n        }));\n\n        function getGatewayVersion() {\n          return _getGatewayVersion.apply(this, arguments);\n        }\n\n        return getGatewayVersion;\n      }()\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        if (this.inChannelInfo.joinAt && (this.inChannelInfo.duration = La() - this.inChannelInfo.joinAt, this.inChannelInfo.joinAt = null), this.trafficStatsInterval && (window.clearInterval(this.trafficStatsInterval), this.trafficStatsInterval = void 0), this.joinInfo) {\n          var _e39 = Wp.get(this.joinInfo.cname);\n\n          _e39 && _e39.delete(this.joinInfo.uid);\n        }\n\n        this.joinInfo = void 0, this.key = void 0, this.networkQualityInterval && (window.clearInterval(this.networkQualityInterval), this.networkQualityInterval = void 0);\n      }\n    }, {\n      key: \"updateTurnConfigFromSignal\",\n      value: function updateTurnConfigFromSignal() {\n        if (!this.joinInfo) return;\n\n        var e = function (e) {\n          var t = e.match(/(wss\\:\\/\\/)?([^:]+):(\\d+)/);\n          return t ? {\n            username: Oc.username,\n            password: Oc.password,\n            turnServerURL: t[2],\n            tcpport: mr(t[3]) + 30,\n            udpport: mr(t[3]) + 30,\n            forceturn: !1\n          } : null;\n        }((\"disabled\" === this.joinInfo.cloudProxyServer ? this.signal.url : this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]) || \"\");\n\n        this.joinInfo.turnServer.serversFromGateway = [], e && \"off\" !== this.joinInfo.turnServer.mode && \"disabled\" === this.joinInfo.cloudProxyServer && this.joinInfo.turnServer.serversFromGateway.push(Kp({}, Oc, {\n          turnServerURL: e.turnServerURL,\n          tcpport: e.tcpport,\n          udpport: e.udpport,\n          username: this.joinInfo.uid.toString(),\n          password: this.joinInfo.token\n        }));\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function () {\n        var _updateTrafficStats = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee57() {\n          var _this78 = this;\n\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee57$(_context57) {\n            while (1) {\n              switch (_context57.prev = _context57.next) {\n                case 0:\n                  if (!(\"CONNECTED\" !== this.state)) {\n                    _context57.next = 2;\n                    break;\n                  }\n\n                  return _context57.abrupt(\"return\");\n\n                case 2:\n                  _context57.next = 4;\n                  return this.signal.request(Gd.TRAFFIC_STATS, void 0, !0);\n\n                case 4:\n                  t = _context57.sent;\n                  t.timestamp = La(), Xi(e = t.peer_delay).call(e, function (e) {\n                    var t;\n                    var i = _this78._statsCollector.trafficStats && Vs(t = _this78._statsCollector.trafficStats.peer_delay).call(t, function (t) {\n                      return t.peer_uid === e.peer_uid;\n                    });\n                    i && i.B_st !== e.B_st && Qh(function () {\n                      _this78.emit(El.STREAM_TYPE_CHANGE, e.peer_uid, e.B_st);\n                    });\n                  }), this._statsCollector.updateTrafficStats(t);\n\n                case 6:\n                case \"end\":\n                  return _context57.stop();\n              }\n            }\n          }, _callee57, this);\n        }));\n\n        function updateTrafficStats() {\n          return _updateTrafficStats.apply(this, arguments);\n        }\n\n        return updateTrafficStats;\n      }()\n    }, {\n      key: \"getJoinMessage\",\n      value: function getJoinMessage(e) {\n        if (!this.joinInfo || !this.key) throw new Ad(ad.UNEXPECTED_ERROR, \"can not generate join message, no join info\");\n        var t = er({}, this.joinInfo.apResponse);\n        var i = Fc(\"REPORT_APP_SCENARIO\");\n        if (\"string\" != typeof i) try {\n          i = ge(i);\n        } catch (e) {\n          i = void 0;\n        }\n        i && i.length > 128 && (i = void 0);\n        var r = Kp({\n          p2p_id: this.store.p2pId,\n          session_id: this.joinInfo.sid,\n          app_id: this.joinInfo.appId,\n          channel_key: this.key,\n          channel_name: this.joinInfo.cname,\n          sdk_version: wc,\n          browser: navigator.userAgent,\n          process_id: Fc(\"PROCESS_ID\"),\n          mode: this.spec.mode,\n          codec: this.spec.codec,\n          role: this.role,\n          has_changed_gateway: this.hasChangeBGPAddress,\n          ap_response: t,\n          extend: Fc(\"JOIN_EXTEND\"),\n          details: {\n            6: this.joinInfo.stringUid,\n            cservice_map: \"proxy3\" === this.joinInfo.cloudProxyServer ? \"1\" : void 0\n          },\n          features: {\n            rejoin: !0\n          },\n          optionalInfo: this.joinInfo.optionalInfo,\n          appScenario: i\n        }, e);\n        return this.joinInfo.stringUid && (r.string_uid = this.joinInfo.stringUid), this.joinInfo.aesmode && this.joinInfo.aespassword && (r.aes_mode = this.joinInfo.aesmode, Fc(\"ENCRYPT_AES\") ? (r.aes_secret = this.joinInfo.aespassword, r.aes_encrypt = !0) : r.aes_secret = this.joinInfo.aespassword, this.joinInfo.aessalt && (r.aes_salt = this.joinInfo.aessalt)), t.addresses[this.signal.websocket.currentURLIndex] && (r.ap_response.ticket = t.addresses[this.signal.websocket.currentURLIndex].ticket, delete t.addresses), r;\n      }\n    }, {\n      key: \"getRejoinMessage\",\n      value: function getRejoinMessage() {\n        if (!this.joinInfo) throw new Ad(ad.UNEXPECTED_ERROR, \"can not generate rejoin message, no join info\");\n        return {\n          session_id: this.joinInfo.sid,\n          channel_name: this.joinInfo.cname,\n          cid: this.joinInfo.cid,\n          uid: this.joinInfo.uid,\n          vid: Number(this.joinInfo.vid)\n        };\n      }\n    }, {\n      key: \"handleSignalEvents\",\n      value: function handleSignalEvents() {\n        var _this79 = this;\n\n        this.signal.on(Vd.WS_RECONNECTING, function (e) {\n          _this79.joinInfo && iu.WebSocketQuit(_this79.joinInfo.sid, {\n            lts: La(),\n            succ: -1,\n            cname: _this79.joinInfo.cname,\n            uid: _this79.joinInfo.uid,\n            cid: _this79.joinInfo.cid,\n            errorCode: e || Fd.NETWORK_ERROR\n          }), _this79.joinInfo && (_this79.state = \"RECONNECTING\", iu.sessionInit(_this79.joinInfo.sid, {\n            lts: new Date().getTime(),\n            extend: _this79.isSignalRecover ? {\n              recover: !0\n            } : {\n              rejoin: !0\n            },\n            cname: _this79.joinInfo.cname,\n            appid: _this79.joinInfo.appId,\n            mode: _this79.spec.mode\n          }), _this79.isSignalRecover = !1, _this79.joinGatewayStartTime = La());\n        }), this.signal.on(Vd.WS_CLOSED, function (e) {\n          var t;\n\n          switch (e) {\n            case \"LEAVE\":\n              t = Fd.LEAVE;\n              break;\n\n            case \"UID_BANNED\":\n            case \"IP_BANNED\":\n            case \"CHANNEL_BANNED\":\n            case \"SERVER_ERROR\":\n              t = Fd.SERVER_ERROR;\n              break;\n\n            default:\n              t = Fd.NETWORK_ERROR;\n          }\n\n          vc.debug(\"[signal] websocket closed, reason: \".concat(t || \"undefined -> \" + Fd.NETWORK_ERROR)), _this79.joinInfo && iu.WebSocketQuit(_this79.joinInfo.sid, {\n            lts: La(),\n            succ: \"LEAVE\" === e ? 1 : -1,\n            cname: _this79.joinInfo.cname,\n            uid: _this79.joinInfo.uid,\n            cid: _this79.joinInfo.cid,\n            errorCode: t\n          }), _this79.reset(), _this79._disconnectedReason = e, _this79.state = \"DISCONNECTED\";\n        }), this.signal.on(Vd.WS_CONNECTED, function () {\n          if (_this79.updateTurnConfigFromSignal(), _this79.state = \"CONNECTED\", _this79.joinInfo) {\n            var e, t, i;\n            if (\"audience\" === _this79.role && _this79._clientRoleOptions && _this79._clientRoleOptions.level) vc.debug(Xe(e = Xe(t = Xe(i = \"[\".concat(_this79.store.clientId, \"] patch to send set client role, role: \")).call(i, _this79.role, \", mode: \")).call(t, _this79.spec.mode, \", level: \")).call(e, _this79._clientRoleOptions && _this79._clientRoleOptions.level)), _this79.setClientRole(_this79.role, _this79._clientRoleOptions);\n\n            if (iu.joinGateway(_this79.joinInfo.sid, {\n              lts: _this79.joinGatewayStartTime,\n              succ: !0,\n              ec: null,\n              vid: _this79.joinInfo.vid,\n              addr: _this79.signal.url,\n              uid: _this79.joinInfo.uid,\n              cid: _this79.joinInfo.cid\n            }), _this79.joinInfo.useLocalAccessPoint) {\n              var _e40 = _this79.signal.url && _this79.signal.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/);\n\n              var r;\n              if (!_e40) return void vc.error(Xe(r = \"[\".concat(_this79.store.clientId, \"] set local access point after joined failed: \")).call(r, _e40));\n              Qc(\"EVENT_REPORT_DOMAIN\", _e40[1]), Qc(\"EVENT_REPORT_BACKUP_DOMAIN\", _e40[1]), Qc(\"LOG_UPLOAD_SERVER\", \"\".concat(_e40[1], \":6444\"));\n            }\n          }\n        }), this.signal.on(Kd.ON_UPLINK_STATS, function (e) {\n          _this79._statsCollector.updateUplinkStats(e);\n        }), this.signal.on(Vd.REQUEST_RECOVER, function (e, t, i) {\n          if (!_this79.joinInfo) return i(new Ad(ad.UNEXPECTED_ERROR, \"gateway: can not recover, no join info\"));\n          e && (_this79.joinInfo.multiIP = e, _this79.hasChangeBGPAddress = !0), _this79.isSignalRecover = !0, kh(_this79, El.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i);\n        }), this.signal.on(Vd.REQUEST_JOIN_INFO,\n        /*#__PURE__*/\n        function () {\n          var _ref43 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee58(e) {\n            var t, _ref44, i, r, n;\n\n            return _regeneratorRuntime.wrap(function _callee58$(_context58) {\n              while (1) {\n                switch (_context58.prev = _context58.next) {\n                  case 0:\n                    _this79.updateTurnConfigFromSignal();\n\n                    _context58.next = 3;\n                    return kh(_this79, El.REQUEST_P2P_CONNECTION_PARAMS, {\n                      turnServer: null === (t = _this79.joinInfo) || void 0 === t ? void 0 : t.turnServer\n                    });\n\n                  case 3:\n                    _ref44 = _context58.sent;\n                    i = _ref44.iceParameters;\n                    r = _ref44.dtlsParameters;\n                    n = _ref44.rtpCapabilities;\n                    e(_this79.getJoinMessage({\n                      ortc: {\n                        iceParameters: i,\n                        dtlsParameters: r,\n                        rtpCapabilities: n\n                      }\n                    }));\n\n                  case 8:\n                  case \"end\":\n                    return _context58.stop();\n                }\n              }\n            }, _callee58, this);\n          }));\n\n          return function (_x74) {\n            return _ref43.apply(this, arguments);\n          };\n        }()), this.signal.on(Vd.REQUEST_REJOIN_INFO, function (e) {\n          e(_this79.getRejoinMessage());\n        }), this.signal.on(Vd.REPORT_JOIN_GATEWAY, function (e, t) {\n          _this79.joinInfo && iu.joinGateway(_this79.joinInfo.sid, {\n            lts: _this79.joinGatewayStartTime,\n            succ: !1,\n            ec: e,\n            addr: t,\n            uid: _this79.joinInfo.uid,\n            cid: _this79.joinInfo.cid\n          });\n        }), this.signal.on(Vd.IS_P2P_DISCONNECTED, function (e) {\n          e(Bh(_this79, El.IS_P2P_DISCONNECTED));\n        }), this.signal.on(Vd.DISCONNECT_P2P, function () {\n          _this79.emit(El.DISCONNECT_P2P);\n        }), this.signal.on(Vd.NEED_RENEW_SESSION, function () {\n          _this79.emit(El.NEED_RENEW_SESSION);\n        }), this.signal.on(Vd.REQUEST_SUCCESS, function () {\n          _this79._signalTimeout = !1;\n        }), this.signal.on(Vd.REQUEST_TIMEOUT, function () {\n          _this79._signalTimeout = !0;\n        }), this.signal.on(Vd.JOIN_RESPONSE, function (e) {\n          _this79.emit(El.JOIN_RESPONSE, e);\n        });\n      }\n    }, {\n      key: \"tryUnsubBeforeResub\",\n      value: function () {\n        var _tryUnsubBeforeResub = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee59(e, t) {\n          return _regeneratorRuntime.wrap(function _callee59$(_context59) {\n            while (1) {\n              switch (_context59.prev = _context59.next) {\n                case 0:\n                  _context59.prev = 0;\n                  _context59.next = 3;\n                  return this.signal.request(Gd.UNSUBSCRIBE, {\n                    p2p_id: this.store.p2pId,\n                    stream_id: e,\n                    ortc: [t]\n                  }, !0);\n\n                case 3:\n                  _context59.next = 8;\n                  break;\n\n                case 5:\n                  _context59.prev = 5;\n                  _context59.t0 = _context59[\"catch\"](0);\n                  throw vc.warning(\"unsubscribe warning\", _context59.t0), _context59.t0;\n\n                case 8:\n                case \"end\":\n                  return _context59.stop();\n              }\n            }\n          }, _callee59, this, [[0, 5]]);\n        }));\n\n        function tryUnsubBeforeResub(_x75, _x76) {\n          return _tryUnsubBeforeResub.apply(this, arguments);\n        }\n\n        return tryUnsubBeforeResub;\n      }()\n    }, {\n      key: \"tryUnpubBeforeRepub\",\n      value: function () {\n        var _tryUnpubBeforeRepub = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee60(e, t) {\n          return _regeneratorRuntime.wrap(function _callee60$(_context60) {\n            while (1) {\n              switch (_context60.prev = _context60.next) {\n                case 0:\n                  _context60.prev = 0;\n                  _context60.next = 3;\n                  return this.signal.request(Gd.UNPUBLISH, {\n                    stream_id: e,\n                    ortc: t\n                  }, !0);\n\n                case 3:\n                  _context60.next = 8;\n                  break;\n\n                case 5:\n                  _context60.prev = 5;\n                  _context60.t0 = _context60[\"catch\"](0);\n                  throw vc.warning(\"unpublish warning: \", _context60.t0), _context60.t0;\n\n                case 8:\n                case \"end\":\n                  return _context60.stop();\n              }\n            }\n          }, _callee60, this, [[0, 5]]);\n        }));\n\n        function tryUnpubBeforeRepub(_x77, _x78) {\n          return _tryUnpubBeforeRepub.apply(this, arguments);\n        }\n\n        return tryUnpubBeforeRepub;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee61(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee61$(_context61) {\n            while (1) {\n              switch (_context61.prev = _context61.next) {\n                case 0:\n                  i = {\n                    action: Vs(e).call(e, function (e) {\n                      return e.stream_type === pl.Audio;\n                    }) ? \"mute_local_audio\" : \"mute_local_video\",\n                    p2p_id: this.store.p2pId,\n                    ortc: e,\n                    stream_id: t\n                  };\n                  _context61.prev = 1;\n                  _context61.next = 4;\n                  return this.signal.request(Gd.CONTROL, i, !0, !0);\n\n                case 4:\n                  _context61.next = 9;\n                  break;\n\n                case 6:\n                  _context61.prev = 6;\n                  _context61.t0 = _context61[\"catch\"](1);\n                  throw vc.warning(\"gateway unmuteLocal warning: \", _context61.t0), _context61.t0;\n\n                case 9:\n                case \"end\":\n                  return _context61.stop();\n              }\n            }\n          }, _callee61, this, [[1, 6]]);\n        }));\n\n        function muteLocal(_x79, _x80) {\n          return _muteLocal.apply(this, arguments);\n        }\n\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee62(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee62$(_context62) {\n            while (1) {\n              switch (_context62.prev = _context62.next) {\n                case 0:\n                  i = {\n                    action: Vs(e).call(e, function (e) {\n                      return e.stream_type === pl.Audio;\n                    }) ? \"unmute_local_audio\" : \"unmute_local_video\",\n                    p2p_id: this.store.p2pId,\n                    ortc: e,\n                    stream_id: t\n                  };\n                  _context62.prev = 1;\n                  _context62.next = 4;\n                  return this.signal.request(Gd.CONTROL, i, !0, !0);\n\n                case 4:\n                  _context62.next = 9;\n                  break;\n\n                case 6:\n                  _context62.prev = 6;\n                  _context62.t0 = _context62[\"catch\"](1);\n                  throw vc.warning(\"gateway muteLocal warning: \", _context62.t0), _context62.t0;\n\n                case 9:\n                case \"end\":\n                  return _context62.stop();\n              }\n            }\n          }, _callee62, this, [[1, 6]]);\n        }));\n\n        function unmuteLocal(_x81, _x82) {\n          return _unmuteLocal.apply(this, arguments);\n        }\n\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"uploadStats\",\n      value: function uploadStats(e, t) {\n        this.signal.upload(e, t);\n      }\n    }, {\n      key: \"getSignalRTT\",\n      value: function getSignalRTT() {\n        return this.signal.rtt;\n      }\n    }, {\n      key: \"restartICE\",\n      value: function () {\n        var _restartICE = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee63(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee63$(_context63) {\n            while (1) {\n              switch (_context63.prev = _context63.next) {\n                case 0:\n                  t = {\n                    p2p_id: this.store.p2pId,\n                    stream_id: this.store.uid,\n                    ortc: e\n                  };\n                  _context63.prev = 1;\n                  _context63.next = 4;\n                  return this.signal.request(Gd.RESTART_ICE, t, !0);\n\n                case 4:\n                  _context63.t0 = _context63.sent;\n                  return _context63.abrupt(\"return\", {\n                    response: _context63.t0\n                  });\n\n                case 8:\n                  _context63.prev = 8;\n                  _context63.t1 = _context63[\"catch\"](1);\n                  throw vc.warning(\"P2PChannel.restartICE warning: \", _context63.t1), _context63.t1;\n\n                case 11:\n                case \"end\":\n                  return _context63.stop();\n              }\n            }\n          }, _callee63, this, [[1, 8]]);\n        }));\n\n        function restartICE(_x83) {\n          return _restartICE.apply(this, arguments);\n        }\n\n        return restartICE;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        \"CONNECTED\" === this.state && this.signal.reconnect(void 0, Fd.P2P_FAILED);\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        if (e === this._state) return;\n        var t = this._state;\n        this._state = e, \"DISCONNECTED\" === e && this._disconnectedReason ? this.emit(El.CONNECTION_STATE_CHANGE, e, t, this._disconnectedReason) : this.emit(El.CONNECTION_STATE_CHANGE, e, t);\n      }\n    }]);\n\n    return Hp;\n  }(Ll);\n\n  var Yp = De(\"iterator\"),\n      qp = !n(function () {\n    var e = new URL(\"b?a=1&b=2&c=3\", \"http://a\"),\n        t = e.searchParams,\n        i = \"\";\n    return e.pathname = \"c%20d\", t.forEach(function (e, r) {\n      t.delete(\"b\"), i += r + e;\n    }), !e.toJSON || !t.sort || \"http://a/c%20d?a=1&c=3\" !== e.href || \"3\" !== t.get(\"c\") || \"a=1\" !== String(new URLSearchParams(\"?a=1\")) || !t[Yp] || \"a\" !== new URL(\"https://a@b\").username || \"b\" !== new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\") || \"xn--e1aybc\" !== new URL(\"http://тест\").host || \"#%D0%B1\" !== new URL(\"http://a#б\").hash || \"a1c3\" !== i || \"x\" !== new URL(\"http://x\", void 0).host;\n  }),\n      Jp = 2147483647,\n      Xp = /[^\\0-\\u007E]/,\n      zp = /[.\\u3002\\uFF0E\\uFF61]/g,\n      Zp = \"Overflow: input needs wider integers to process\",\n      $p = Math.floor,\n      eE = String.fromCharCode,\n      tE = function tE(e) {\n    return e + 22 + 75 * (e < 26);\n  },\n      iE = function iE(e, t, i) {\n    var r = 0;\n\n    for (e = i ? $p(e / 700) : e >> 1, e += $p(e / t); e > 455; r += 36) {\n      e = $p(e / 35);\n    }\n\n    return $p(r + 36 * e / (e + 38));\n  },\n      rE = function rE(e) {\n    var t,\n        i,\n        r = [],\n        n = (e = function (e) {\n      for (var t = [], i = 0, r = e.length; i < r;) {\n        var n = e.charCodeAt(i++);\n\n        if (n >= 55296 && n <= 56319 && i < r) {\n          var s = e.charCodeAt(i++);\n          56320 == (64512 & s) ? t.push(((1023 & n) << 10) + (1023 & s) + 65536) : (t.push(n), i--);\n        } else t.push(n);\n      }\n\n      return t;\n    }(e)).length,\n        s = 128,\n        o = 0,\n        a = 72;\n\n    for (t = 0; t < e.length; t++) {\n      (i = e[t]) < 128 && r.push(eE(i));\n    }\n\n    var c = r.length,\n        d = c;\n\n    for (c && r.push(\"-\"); d < n;) {\n      var l = Jp;\n\n      for (t = 0; t < e.length; t++) {\n        (i = e[t]) >= s && i < l && (l = i);\n      }\n\n      var A = d + 1;\n      if (l - s > $p((Jp - o) / A)) throw RangeError(Zp);\n\n      for (o += (l - s) * A, s = l, t = 0; t < e.length; t++) {\n        if ((i = e[t]) < s && ++o > Jp) throw RangeError(Zp);\n\n        if (i == s) {\n          for (var u = o, h = 36;; h += 36) {\n            var p = h <= a ? 1 : h >= a + 26 ? 26 : h - a;\n            if (u < p) break;\n            var E = u - p,\n                g = 36 - p;\n            r.push(eE(tE(p + E % g))), u = $p(E / g);\n          }\n\n          r.push(eE(tE(u))), a = iE(o, A, d == c), o = 0, ++d;\n        }\n      }\n\n      ++o, ++s;\n    }\n\n    return r.join(\"\");\n  },\n      nE = function nE(e) {\n    var t = ut(e);\n    if (\"function\" != typeof t) throw TypeError(String(e) + \" is not iterable\");\n    return M(t.call(e));\n  },\n      sE = ae(\"fetch\"),\n      oE = ae(\"Headers\"),\n      aE = De(\"iterator\"),\n      cE = \"URLSearchParams\",\n      dE = \"URLSearchParamsIterator\",\n      lE = Pt.set,\n      AE = Pt.getterFor(cE),\n      uE = Pt.getterFor(dE),\n      hE = /\\+/g,\n      pE = Array(4),\n      EE = function EE(e) {\n    return pE[e - 1] || (pE[e - 1] = RegExp(\"((?:%[\\\\da-f]{2}){\" + e + \"})\", \"gi\"));\n  },\n      gE = function gE(e) {\n    try {\n      return decodeURIComponent(e);\n    } catch (t) {\n      return e;\n    }\n  },\n      _E = function _E(e) {\n    var t = e.replace(hE, \" \"),\n        i = 4;\n\n    try {\n      return decodeURIComponent(t);\n    } catch (e) {\n      for (; i;) {\n        t = t.replace(EE(i--), gE);\n      }\n\n      return t;\n    }\n  },\n      IE = /[!'()~]|%20/g,\n      fE = {\n    \"!\": \"%21\",\n    \"'\": \"%27\",\n    \"(\": \"%28\",\n    \")\": \"%29\",\n    \"~\": \"%7E\",\n    \"%20\": \"+\"\n  },\n      mE = function mE(e) {\n    return fE[e];\n  },\n      CE = function CE(e) {\n    return encodeURIComponent(e).replace(IE, mE);\n  },\n      SE = function SE(e, t) {\n    if (t) for (var i, r, n = t.split(\"&\"), s = 0; s < n.length;) {\n      (i = n[s++]).length && (r = i.split(\"=\"), e.push({\n        key: _E(r.shift()),\n        value: _E(r.join(\"=\"))\n      }));\n    }\n  },\n      RE = function RE(e) {\n    this.entries.length = 0, SE(this.entries, e);\n  },\n      TE = function TE(e, t) {\n    if (e < t) throw TypeError(\"Not enough arguments\");\n  },\n      vE = ni(function (e, t) {\n    lE(this, {\n      type: dE,\n      iterator: nE(AE(e).entries),\n      kind: t\n    });\n  }, \"Iterator\", function () {\n    var e = uE(this),\n        t = e.kind,\n        i = e.iterator.next(),\n        r = i.value;\n    return i.done || (i.value = \"keys\" === t ? r.key : \"values\" === t ? r.value : [r.key, r.value]), i;\n  }),\n      yE = function yE() {\n    Et(this, yE, cE);\n    var e,\n        t,\n        i,\n        r,\n        n,\n        s,\n        o,\n        a,\n        c,\n        d = arguments.length > 0 ? arguments[0] : void 0,\n        l = this,\n        A = [];\n    if (lE(l, {\n      type: cE,\n      entries: A,\n      updateURL: function updateURL() {},\n      updateSearchParams: RE\n    }), void 0 !== d) if (g(d)) {\n      if (\"function\" == typeof (e = ut(d))) for (i = (t = e.call(d)).next; !(r = i.call(t)).done;) {\n        if ((o = (s = (n = nE(M(r.value))).next).call(n)).done || (a = s.call(n)).done || !s.call(n).done) throw TypeError(\"Expected sequence with length 2\");\n        A.push({\n          key: o.value + \"\",\n          value: a.value + \"\"\n        });\n      } else for (c in d) {\n        f(d, c) && A.push({\n          key: c,\n          value: d[c] + \"\"\n        });\n      }\n    } else SE(A, \"string\" == typeof d ? \"?\" === d.charAt(0) ? d.slice(1) : d : d + \"\");\n  },\n      wE = yE.prototype;\n\n  Jt(wE, {\n    append: function append(e, t) {\n      TE(arguments.length, 2);\n      var i = AE(this);\n      i.entries.push({\n        key: e + \"\",\n        value: t + \"\"\n      }), i.updateURL();\n    },\n    delete: function _delete(e) {\n      TE(arguments.length, 1);\n\n      for (var t = AE(this), i = t.entries, r = e + \"\", n = 0; n < i.length;) {\n        i[n].key === r ? i.splice(n, 1) : n++;\n      }\n\n      t.updateURL();\n    },\n    get: function get(e) {\n      TE(arguments.length, 1);\n\n      for (var t = AE(this).entries, i = e + \"\", r = 0; r < t.length; r++) {\n        if (t[r].key === i) return t[r].value;\n      }\n\n      return null;\n    },\n    getAll: function getAll(e) {\n      TE(arguments.length, 1);\n\n      for (var t = AE(this).entries, i = e + \"\", r = [], n = 0; n < t.length; n++) {\n        t[n].key === i && r.push(t[n].value);\n      }\n\n      return r;\n    },\n    has: function has(e) {\n      TE(arguments.length, 1);\n\n      for (var t = AE(this).entries, i = e + \"\", r = 0; r < t.length;) {\n        if (t[r++].key === i) return !0;\n      }\n\n      return !1;\n    },\n    set: function set(e, t) {\n      TE(arguments.length, 1);\n\n      for (var i, r = AE(this), n = r.entries, s = !1, o = e + \"\", a = t + \"\", c = 0; c < n.length; c++) {\n        (i = n[c]).key === o && (s ? n.splice(c--, 1) : (s = !0, i.value = a));\n      }\n\n      s || n.push({\n        key: o,\n        value: a\n      }), r.updateURL();\n    },\n    sort: function sort() {\n      var e,\n          t,\n          i,\n          r = AE(this),\n          n = r.entries,\n          s = n.slice();\n\n      for (n.length = 0, i = 0; i < s.length; i++) {\n        for (e = s[i], t = 0; t < i; t++) {\n          if (n[t].key > e.key) {\n            n.splice(t, 0, e);\n            break;\n          }\n        }\n\n        t === i && n.push(e);\n      }\n\n      r.updateURL();\n    },\n    forEach: function forEach(e) {\n      for (var t, i = AE(this).entries, r = B(e, arguments.length > 1 ? arguments[1] : void 0, 3), n = 0; n < i.length;) {\n        r((t = i[n++]).value, t.key, this);\n      }\n    },\n    keys: function keys() {\n      return new vE(this, \"keys\");\n    },\n    values: function values() {\n      return new vE(this, \"values\");\n    },\n    entries: function entries() {\n      return new vE(this, \"entries\");\n    }\n  }, {\n    enumerable: !0\n  }), qt(wE, aE, wE.entries), qt(wE, \"toString\", function () {\n    for (var e, t = AE(this).entries, i = [], r = 0; r < t.length;) {\n      e = t[r++], i.push(CE(e.key) + \"=\" + CE(e.value));\n    }\n\n    return i.join(\"&\");\n  }, {\n    enumerable: !0\n  }), ft(yE, cE), G({\n    global: !0,\n    forced: !qp\n  }, {\n    URLSearchParams: yE\n  }), qp || \"function\" != typeof sE || \"function\" != typeof oE || G({\n    global: !0,\n    enumerable: !0,\n    forced: !0\n  }, {\n    fetch: function fetch(e) {\n      var t,\n          i,\n          r,\n          n = [e];\n      return arguments.length > 1 && (g(t = arguments[1]) && (i = t.body, lt(i) === cE && ((r = t.headers ? new oE(t.headers) : new oE()).has(\"content-type\") || r.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\"), t = Kt(t, {\n        body: d(0, String(i)),\n        headers: d(0, r)\n      }))), n.push(t)), sE.apply(this, n);\n    }\n  });\n\n  var NE,\n      OE = {\n    URLSearchParams: yE,\n    getState: AE\n  },\n      bE = Ci.codeAt,\n      DE = r.URL,\n      kE = OE.URLSearchParams,\n      LE = OE.getState,\n      PE = Pt.set,\n      BE = Pt.getterFor(\"URL\"),\n      ME = Math.floor,\n      UE = Math.pow,\n      QE = \"Invalid scheme\",\n      FE = \"Invalid host\",\n      xE = \"Invalid port\",\n      VE = /[A-Za-z]/,\n      GE = /[\\d+\\-.A-Za-z]/,\n      jE = /\\d/,\n      KE = /^(0x|0X)/,\n      WE = /^[0-7]+$/,\n      HE = /^\\d+$/,\n      YE = /^[\\dA-Fa-f]+$/,\n      qE = /[\\u0000\\u0009\\u000A\\u000D #%/:?@[\\\\]]/,\n      JE = /[\\u0000\\u0009\\u000A\\u000D #/:?@[\\\\]]/,\n      XE = /^[\\u0000-\\u001F ]+|[\\u0000-\\u001F ]+$/g,\n      zE = /[\\u0009\\u000A\\u000D]/g,\n      ZE = function ZE(e, t) {\n    var i, r, n;\n\n    if (\"[\" == t.charAt(0)) {\n      if (\"]\" != t.charAt(t.length - 1)) return FE;\n      if (!(i = eg(t.slice(1, -1)))) return FE;\n      e.host = i;\n    } else if (cg(e)) {\n      if (t = function (e) {\n        var t,\n            i,\n            r = [],\n            n = e.toLowerCase().replace(zp, \".\").split(\".\");\n\n        for (t = 0; t < n.length; t++) {\n          i = n[t], r.push(Xp.test(i) ? \"xn--\" + rE(i) : i);\n        }\n\n        return r.join(\".\");\n      }(t), qE.test(t)) return FE;\n      if (null === (i = $E(t))) return FE;\n      e.host = i;\n    } else {\n      if (JE.test(t)) return FE;\n\n      for (i = \"\", r = LA(t), n = 0; n < r.length; n++) {\n        i += og(r[n], ig);\n      }\n\n      e.host = i;\n    }\n  },\n      $E = function $E(e) {\n    var t,\n        i,\n        r,\n        n,\n        s,\n        o,\n        a,\n        c = e.split(\".\");\n    if (c.length && \"\" == c[c.length - 1] && c.pop(), (t = c.length) > 4) return e;\n\n    for (i = [], r = 0; r < t; r++) {\n      if (\"\" == (n = c[r])) return e;\n      if (s = 10, n.length > 1 && \"0\" == n.charAt(0) && (s = KE.test(n) ? 16 : 8, n = n.slice(8 == s ? 1 : 2)), \"\" === n) o = 0;else {\n        if (!(10 == s ? HE : 8 == s ? WE : YE).test(n)) return e;\n        o = parseInt(n, s);\n      }\n      i.push(o);\n    }\n\n    for (r = 0; r < t; r++) {\n      if (o = i[r], r == t - 1) {\n        if (o >= UE(256, 5 - t)) return null;\n      } else if (o > 255) return null;\n    }\n\n    for (a = i.pop(), r = 0; r < i.length; r++) {\n      a += i[r] * UE(256, 3 - r);\n    }\n\n    return a;\n  },\n      eg = function eg(e) {\n    var t,\n        i,\n        r,\n        n,\n        s,\n        o,\n        a,\n        c = [0, 0, 0, 0, 0, 0, 0, 0],\n        d = 0,\n        l = null,\n        A = 0,\n        u = function u() {\n      return e.charAt(A);\n    };\n\n    if (\":\" == u()) {\n      if (\":\" != e.charAt(1)) return;\n      A += 2, l = ++d;\n    }\n\n    for (; u();) {\n      if (8 == d) return;\n\n      if (\":\" != u()) {\n        for (t = i = 0; i < 4 && YE.test(u());) {\n          t = 16 * t + parseInt(u(), 16), A++, i++;\n        }\n\n        if (\".\" == u()) {\n          if (0 == i) return;\n          if (A -= i, d > 6) return;\n\n          for (r = 0; u();) {\n            if (n = null, r > 0) {\n              if (!(\".\" == u() && r < 4)) return;\n              A++;\n            }\n\n            if (!jE.test(u())) return;\n\n            for (; jE.test(u());) {\n              if (s = parseInt(u(), 10), null === n) n = s;else {\n                if (0 == n) return;\n                n = 10 * n + s;\n              }\n              if (n > 255) return;\n              A++;\n            }\n\n            c[d] = 256 * c[d] + n, 2 != ++r && 4 != r || d++;\n          }\n\n          if (4 != r) return;\n          break;\n        }\n\n        if (\":\" == u()) {\n          if (A++, !u()) return;\n        } else if (u()) return;\n\n        c[d++] = t;\n      } else {\n        if (null !== l) return;\n        A++, l = ++d;\n      }\n    }\n\n    if (null !== l) for (o = d - l, d = 7; 0 != d && o > 0;) {\n      a = c[d], c[d--] = c[l + o - 1], c[l + --o] = a;\n    } else if (8 != d) return;\n    return c;\n  },\n      tg = function tg(e) {\n    var t, i, r, n;\n\n    if (\"number\" == typeof e) {\n      for (t = [], i = 0; i < 4; i++) {\n        t.unshift(e % 256), e = ME(e / 256);\n      }\n\n      return t.join(\".\");\n    }\n\n    if (\"object\" == typeof e) {\n      for (t = \"\", r = function (e) {\n        for (var t = null, i = 1, r = null, n = 0, s = 0; s < 8; s++) {\n          0 !== e[s] ? (n > i && (t = r, i = n), r = null, n = 0) : (null === r && (r = s), ++n);\n        }\n\n        return n > i && (t = r, i = n), t;\n      }(e), i = 0; i < 8; i++) {\n        n && 0 === e[i] || (n && (n = !1), r === i ? (t += i ? \":\" : \"::\", n = !0) : (t += e[i].toString(16), i < 7 && (t += \":\")));\n      }\n\n      return \"[\" + t + \"]\";\n    }\n\n    return e;\n  },\n      ig = {},\n      rg = $i({}, ig, {\n    \" \": 1,\n    '\"': 1,\n    \"<\": 1,\n    \">\": 1,\n    \"`\": 1\n  }),\n      ng = $i({}, rg, {\n    \"#\": 1,\n    \"?\": 1,\n    \"{\": 1,\n    \"}\": 1\n  }),\n      sg = $i({}, ng, {\n    \"/\": 1,\n    \":\": 1,\n    \";\": 1,\n    \"=\": 1,\n    \"@\": 1,\n    \"[\": 1,\n    \"\\\\\": 1,\n    \"]\": 1,\n    \"^\": 1,\n    \"|\": 1\n  }),\n      og = function og(e, t) {\n    var i = bE(e, 0);\n    return i > 32 && i < 127 && !f(t, e) ? e : encodeURIComponent(e);\n  },\n      ag = {\n    ftp: 21,\n    file: null,\n    http: 80,\n    https: 443,\n    ws: 80,\n    wss: 443\n  },\n      cg = function cg(e) {\n    return f(ag, e.scheme);\n  },\n      dg = function dg(e) {\n    return \"\" != e.username || \"\" != e.password;\n  },\n      lg = function lg(e) {\n    return !e.host || e.cannotBeABaseURL || \"file\" == e.scheme;\n  },\n      Ag = function Ag(e, t) {\n    var i;\n    return 2 == e.length && VE.test(e.charAt(0)) && (\":\" == (i = e.charAt(1)) || !t && \"|\" == i);\n  },\n      ug = function ug(e) {\n    var t;\n    return e.length > 1 && Ag(e.slice(0, 2)) && (2 == e.length || \"/\" === (t = e.charAt(2)) || \"\\\\\" === t || \"?\" === t || \"#\" === t);\n  },\n      hg = function hg(e) {\n    var t = e.path,\n        i = t.length;\n    !i || \"file\" == e.scheme && 1 == i && Ag(t[0], !0) || t.pop();\n  },\n      pg = function pg(e) {\n    return \".\" === e || \"%2e\" === e.toLowerCase();\n  },\n      Eg = {},\n      gg = {},\n      _g = {},\n      Ig = {},\n      fg = {},\n      mg = {},\n      Cg = {},\n      Sg = {},\n      Rg = {},\n      Tg = {},\n      vg = {},\n      yg = {},\n      wg = {},\n      Ng = {},\n      Og = {},\n      bg = {},\n      Dg = {},\n      kg = {},\n      Lg = {},\n      Pg = {},\n      Bg = {},\n      Mg = function Mg(e, t, i, r) {\n    var n,\n        s,\n        o,\n        a,\n        c,\n        d = i || Eg,\n        l = 0,\n        A = \"\",\n        u = !1,\n        h = !1,\n        p = !1;\n\n    for (i || (e.scheme = \"\", e.username = \"\", e.password = \"\", e.host = null, e.port = null, e.path = [], e.query = null, e.fragment = null, e.cannotBeABaseURL = !1, t = t.replace(XE, \"\")), t = t.replace(zE, \"\"), n = LA(t); l <= n.length;) {\n      switch (s = n[l], d) {\n        case Eg:\n          if (!s || !VE.test(s)) {\n            if (i) return QE;\n            d = _g;\n            continue;\n          }\n\n          A += s.toLowerCase(), d = gg;\n          break;\n\n        case gg:\n          if (s && (GE.test(s) || \"+\" == s || \"-\" == s || \".\" == s)) A += s.toLowerCase();else {\n            if (\":\" != s) {\n              if (i) return QE;\n              A = \"\", d = _g, l = 0;\n              continue;\n            }\n\n            if (i && (cg(e) != f(ag, A) || \"file\" == A && (dg(e) || null !== e.port) || \"file\" == e.scheme && !e.host)) return;\n            if (e.scheme = A, i) return void (cg(e) && ag[e.scheme] == e.port && (e.port = null));\n            A = \"\", \"file\" == e.scheme ? d = Ng : cg(e) && r && r.scheme == e.scheme ? d = Ig : cg(e) ? d = Sg : \"/\" == n[l + 1] ? (d = fg, l++) : (e.cannotBeABaseURL = !0, e.path.push(\"\"), d = Lg);\n          }\n          break;\n\n        case _g:\n          if (!r || r.cannotBeABaseURL && \"#\" != s) return QE;\n\n          if (r.cannotBeABaseURL && \"#\" == s) {\n            e.scheme = r.scheme, e.path = r.path.slice(), e.query = r.query, e.fragment = \"\", e.cannotBeABaseURL = !0, d = Bg;\n            break;\n          }\n\n          d = \"file\" == r.scheme ? Ng : mg;\n          continue;\n\n        case Ig:\n          if (\"/\" != s || \"/\" != n[l + 1]) {\n            d = mg;\n            continue;\n          }\n\n          d = Rg, l++;\n          break;\n\n        case fg:\n          if (\"/\" == s) {\n            d = Tg;\n            break;\n          }\n\n          d = kg;\n          continue;\n\n        case mg:\n          if (e.scheme = r.scheme, s == NE) e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = r.query;else if (\"/\" == s || \"\\\\\" == s && cg(e)) d = Cg;else if (\"?\" == s) e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = \"\", d = Pg;else {\n            if (\"#\" != s) {\n              e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.path.pop(), d = kg;\n              continue;\n            }\n\n            e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = r.query, e.fragment = \"\", d = Bg;\n          }\n          break;\n\n        case Cg:\n          if (!cg(e) || \"/\" != s && \"\\\\\" != s) {\n            if (\"/\" != s) {\n              e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, d = kg;\n              continue;\n            }\n\n            d = Tg;\n          } else d = Rg;\n\n          break;\n\n        case Sg:\n          if (d = Rg, \"/\" != s || \"/\" != A.charAt(l + 1)) continue;\n          l++;\n          break;\n\n        case Rg:\n          if (\"/\" != s && \"\\\\\" != s) {\n            d = Tg;\n            continue;\n          }\n\n          break;\n\n        case Tg:\n          if (\"@\" == s) {\n            u && (A = \"%40\" + A), u = !0, o = LA(A);\n\n            for (var E = 0; E < o.length; E++) {\n              var g = o[E];\n\n              if (\":\" != g || p) {\n                var _ = og(g, sg);\n\n                p ? e.password += _ : e.username += _;\n              } else p = !0;\n            }\n\n            A = \"\";\n          } else if (s == NE || \"/\" == s || \"?\" == s || \"#\" == s || \"\\\\\" == s && cg(e)) {\n            if (u && \"\" == A) return \"Invalid authority\";\n            l -= LA(A).length + 1, A = \"\", d = vg;\n          } else A += s;\n\n          break;\n\n        case vg:\n        case yg:\n          if (i && \"file\" == e.scheme) {\n            d = bg;\n            continue;\n          }\n\n          if (\":\" != s || h) {\n            if (s == NE || \"/\" == s || \"?\" == s || \"#\" == s || \"\\\\\" == s && cg(e)) {\n              if (cg(e) && \"\" == A) return FE;\n              if (i && \"\" == A && (dg(e) || null !== e.port)) return;\n              if (a = ZE(e, A)) return a;\n              if (A = \"\", d = Dg, i) return;\n              continue;\n            }\n\n            \"[\" == s ? h = !0 : \"]\" == s && (h = !1), A += s;\n          } else {\n            if (\"\" == A) return FE;\n            if (a = ZE(e, A)) return a;\n            if (A = \"\", d = wg, i == yg) return;\n          }\n\n          break;\n\n        case wg:\n          if (!jE.test(s)) {\n            if (s == NE || \"/\" == s || \"?\" == s || \"#\" == s || \"\\\\\" == s && cg(e) || i) {\n              if (\"\" != A) {\n                var I = parseInt(A, 10);\n                if (I > 65535) return xE;\n                e.port = cg(e) && I === ag[e.scheme] ? null : I, A = \"\";\n              }\n\n              if (i) return;\n              d = Dg;\n              continue;\n            }\n\n            return xE;\n          }\n\n          A += s;\n          break;\n\n        case Ng:\n          if (e.scheme = \"file\", \"/\" == s || \"\\\\\" == s) d = Og;else {\n            if (!r || \"file\" != r.scheme) {\n              d = kg;\n              continue;\n            }\n\n            if (s == NE) e.host = r.host, e.path = r.path.slice(), e.query = r.query;else if (\"?\" == s) e.host = r.host, e.path = r.path.slice(), e.query = \"\", d = Pg;else {\n              if (\"#\" != s) {\n                ug(n.slice(l).join(\"\")) || (e.host = r.host, e.path = r.path.slice(), hg(e)), d = kg;\n                continue;\n              }\n\n              e.host = r.host, e.path = r.path.slice(), e.query = r.query, e.fragment = \"\", d = Bg;\n            }\n          }\n          break;\n\n        case Og:\n          if (\"/\" == s || \"\\\\\" == s) {\n            d = bg;\n            break;\n          }\n\n          r && \"file\" == r.scheme && !ug(n.slice(l).join(\"\")) && (Ag(r.path[0], !0) ? e.path.push(r.path[0]) : e.host = r.host), d = kg;\n          continue;\n\n        case bg:\n          if (s == NE || \"/\" == s || \"\\\\\" == s || \"?\" == s || \"#\" == s) {\n            if (!i && Ag(A)) d = kg;else if (\"\" == A) {\n              if (e.host = \"\", i) return;\n              d = Dg;\n            } else {\n              if (a = ZE(e, A)) return a;\n              if (\"localhost\" == e.host && (e.host = \"\"), i) return;\n              A = \"\", d = Dg;\n            }\n            continue;\n          }\n\n          A += s;\n          break;\n\n        case Dg:\n          if (cg(e)) {\n            if (d = kg, \"/\" != s && \"\\\\\" != s) continue;\n          } else if (i || \"?\" != s) {\n            if (i || \"#\" != s) {\n              if (s != NE && (d = kg, \"/\" != s)) continue;\n            } else e.fragment = \"\", d = Bg;\n          } else e.query = \"\", d = Pg;\n\n          break;\n\n        case kg:\n          if (s == NE || \"/\" == s || \"\\\\\" == s && cg(e) || !i && (\"?\" == s || \"#\" == s)) {\n            if (\"..\" === (c = (c = A).toLowerCase()) || \"%2e.\" === c || \".%2e\" === c || \"%2e%2e\" === c ? (hg(e), \"/\" == s || \"\\\\\" == s && cg(e) || e.path.push(\"\")) : pg(A) ? \"/\" == s || \"\\\\\" == s && cg(e) || e.path.push(\"\") : (\"file\" == e.scheme && !e.path.length && Ag(A) && (e.host && (e.host = \"\"), A = A.charAt(0) + \":\"), e.path.push(A)), A = \"\", \"file\" == e.scheme && (s == NE || \"?\" == s || \"#\" == s)) for (; e.path.length > 1 && \"\" === e.path[0];) {\n              e.path.shift();\n            }\n            \"?\" == s ? (e.query = \"\", d = Pg) : \"#\" == s && (e.fragment = \"\", d = Bg);\n          } else A += og(s, ng);\n\n          break;\n\n        case Lg:\n          \"?\" == s ? (e.query = \"\", d = Pg) : \"#\" == s ? (e.fragment = \"\", d = Bg) : s != NE && (e.path[0] += og(s, ig));\n          break;\n\n        case Pg:\n          i || \"#\" != s ? s != NE && (\"'\" == s && cg(e) ? e.query += \"%27\" : e.query += \"#\" == s ? \"%23\" : og(s, ig)) : (e.fragment = \"\", d = Bg);\n          break;\n\n        case Bg:\n          s != NE && (e.fragment += og(s, rg));\n      }\n\n      l++;\n    }\n  },\n      Ug = function Ug(e) {\n    var t,\n        i,\n        r = Et(this, Ug, \"URL\"),\n        n = arguments.length > 1 ? arguments[1] : void 0,\n        o = String(e),\n        a = PE(r, {\n      type: \"URL\"\n    });\n    if (void 0 !== n) if (n instanceof Ug) t = BE(n);else if (i = Mg(t = {}, String(n))) throw TypeError(i);\n    if (i = Mg(a, o, null, t)) throw TypeError(i);\n    var c = a.searchParams = new kE(),\n        d = LE(c);\n    d.updateSearchParams(a.query), d.updateURL = function () {\n      a.query = String(c) || null;\n    }, s || (r.href = Fg.call(r), r.origin = xg.call(r), r.protocol = Vg.call(r), r.username = Gg.call(r), r.password = jg.call(r), r.host = Kg.call(r), r.hostname = Wg.call(r), r.port = Hg.call(r), r.pathname = Yg.call(r), r.search = qg.call(r), r.searchParams = Jg.call(r), r.hash = Xg.call(r));\n  },\n      Qg = Ug.prototype,\n      Fg = function Fg() {\n    var e = BE(this),\n        t = e.scheme,\n        i = e.username,\n        r = e.password,\n        n = e.host,\n        s = e.port,\n        o = e.path,\n        a = e.query,\n        c = e.fragment,\n        d = t + \":\";\n    return null !== n ? (d += \"//\", dg(e) && (d += i + (r ? \":\" + r : \"\") + \"@\"), d += tg(n), null !== s && (d += \":\" + s)) : \"file\" == t && (d += \"//\"), d += e.cannotBeABaseURL ? o[0] : o.length ? \"/\" + o.join(\"/\") : \"\", null !== a && (d += \"?\" + a), null !== c && (d += \"#\" + c), d;\n  },\n      xg = function xg() {\n    var e = BE(this),\n        t = e.scheme,\n        i = e.port;\n    if (\"blob\" == t) try {\n      return new URL(t.path[0]).origin;\n    } catch (e) {\n      return \"null\";\n    }\n    return \"file\" != t && cg(e) ? t + \"://\" + tg(e.host) + (null !== i ? \":\" + i : \"\") : \"null\";\n  },\n      Vg = function Vg() {\n    return BE(this).scheme + \":\";\n  },\n      Gg = function Gg() {\n    return BE(this).username;\n  },\n      jg = function jg() {\n    return BE(this).password;\n  },\n      Kg = function Kg() {\n    var e = BE(this),\n        t = e.host,\n        i = e.port;\n    return null === t ? \"\" : null === i ? tg(t) : tg(t) + \":\" + i;\n  },\n      Wg = function Wg() {\n    var e = BE(this).host;\n    return null === e ? \"\" : tg(e);\n  },\n      Hg = function Hg() {\n    var e = BE(this).port;\n    return null === e ? \"\" : String(e);\n  },\n      Yg = function Yg() {\n    var e = BE(this),\n        t = e.path;\n    return e.cannotBeABaseURL ? t[0] : t.length ? \"/\" + t.join(\"/\") : \"\";\n  },\n      qg = function qg() {\n    var e = BE(this).query;\n    return e ? \"?\" + e : \"\";\n  },\n      Jg = function Jg() {\n    return BE(this).searchParams;\n  },\n      Xg = function Xg() {\n    var e = BE(this).fragment;\n    return e ? \"#\" + e : \"\";\n  },\n      zg = function zg(e, t) {\n    return {\n      get: e,\n      set: t,\n      configurable: !0,\n      enumerable: !0\n    };\n  };\n\n  if (s && ne(Qg, {\n    href: zg(Fg, function (e) {\n      var t = BE(this),\n          i = String(e),\n          r = Mg(t, i);\n      if (r) throw TypeError(r);\n      LE(t.searchParams).updateSearchParams(t.query);\n    }),\n    origin: zg(xg),\n    protocol: zg(Vg, function (e) {\n      var t = BE(this);\n      Mg(t, String(e) + \":\", Eg);\n    }),\n    username: zg(Gg, function (e) {\n      var t = BE(this),\n          i = LA(String(e));\n\n      if (!lg(t)) {\n        t.username = \"\";\n\n        for (var r = 0; r < i.length; r++) {\n          t.username += og(i[r], sg);\n        }\n      }\n    }),\n    password: zg(jg, function (e) {\n      var t = BE(this),\n          i = LA(String(e));\n\n      if (!lg(t)) {\n        t.password = \"\";\n\n        for (var r = 0; r < i.length; r++) {\n          t.password += og(i[r], sg);\n        }\n      }\n    }),\n    host: zg(Kg, function (e) {\n      var t = BE(this);\n      t.cannotBeABaseURL || Mg(t, String(e), vg);\n    }),\n    hostname: zg(Wg, function (e) {\n      var t = BE(this);\n      t.cannotBeABaseURL || Mg(t, String(e), yg);\n    }),\n    port: zg(Hg, function (e) {\n      var t = BE(this);\n      lg(t) || (\"\" == (e = String(e)) ? t.port = null : Mg(t, e, wg));\n    }),\n    pathname: zg(Yg, function (e) {\n      var t = BE(this);\n      t.cannotBeABaseURL || (t.path = [], Mg(t, e + \"\", Dg));\n    }),\n    search: zg(qg, function (e) {\n      var t = BE(this);\n      \"\" == (e = String(e)) ? t.query = null : (\"?\" == e.charAt(0) && (e = e.slice(1)), t.query = \"\", Mg(t, e, Pg)), LE(t.searchParams).updateSearchParams(t.query);\n    }),\n    searchParams: zg(Jg),\n    hash: zg(Xg, function (e) {\n      var t = BE(this);\n      \"\" != (e = String(e)) ? (\"#\" == e.charAt(0) && (e = e.slice(1)), t.fragment = \"\", Mg(t, e, Bg)) : t.fragment = null;\n    })\n  }), qt(Qg, \"toJSON\", function () {\n    return Fg.call(this);\n  }, {\n    enumerable: !0\n  }), qt(Qg, \"toString\", function () {\n    return Fg.call(this);\n  }, {\n    enumerable: !0\n  }), DE) {\n    var Zg = DE.createObjectURL,\n        $g = DE.revokeObjectURL;\n    Zg && qt(Ug, \"createObjectURL\", function (e) {\n      return Zg.apply(DE, arguments);\n    }), $g && qt(Ug, \"revokeObjectURL\", function (e) {\n      return $g.apply(DE, arguments);\n    });\n  }\n\n  ft(Ug, \"URL\"), G({\n    global: !0,\n    forced: !qp,\n    sham: !s\n  }, {\n    URL: Ug\n  });\n  var e_ = L.URL;\n\n  function t_(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  !function () {\n    var t;\n\n    function i(e) {\n      var t = 0;\n      return function () {\n        return t < e.length ? {\n          done: !1,\n          value: e[t++]\n        } : {\n          done: !0\n        };\n      };\n    }\n\n    var r = \"function\" == typeof Object.defineProperties ? Object.defineProperty : function (e, t, i) {\n      return e == Array.prototype || e == Object.prototype || (e[t] = i.value), e;\n    };\n\n    var n,\n        s = function (t) {\n      t = [\"object\" == typeof globalThis && globalThis, t, \"object\" == typeof window && window, \"object\" == typeof self && self, \"object\" == typeof e && e];\n\n      for (var i = 0; i < t.length; ++i) {\n        var r = t[i];\n        if (r && r.Math == Math) return r;\n      }\n\n      throw Error(\"Cannot find global object\");\n    }(this);\n\n    function o(e, t) {\n      if (t) e: {\n        var i = s;\n        e = e.split(\".\");\n\n        for (var n = 0; n < e.length - 1; n++) {\n          var o = e[n];\n          if (!(o in i)) break e;\n          i = i[o];\n        }\n\n        (t = t(n = i[e = e[e.length - 1]])) != n && null != t && r(i, e, {\n          configurable: !0,\n          writable: !0,\n          value: t\n        });\n      }\n    }\n\n    function a(e) {\n      return (e = {\n        next: e\n      })[Symbol.iterator] = function () {\n        return this;\n      }, e;\n    }\n\n    function c(e) {\n      var t = \"undefined\" != typeof Symbol && Symbol.iterator && e[Symbol.iterator];\n      return t ? t.call(e) : {\n        next: i(e)\n      };\n    }\n\n    if (o(\"Symbol\", function (e) {\n      function t(e, t) {\n        this.A = e, r(this, \"description\", {\n          configurable: !0,\n          writable: !0,\n          value: t\n        });\n      }\n\n      if (e) return e;\n\n      t.prototype.toString = function () {\n        return this.A;\n      };\n\n      var i = \"jscomp_symbol_\" + (1e9 * Math.random() >>> 0) + \"_\",\n          n = 0;\n      return function e(r) {\n        if (this instanceof e) throw new TypeError(\"Symbol is not a constructor\");\n        return new t(i + (r || \"\") + \"_\" + n++, r);\n      };\n    }), o(\"Symbol.iterator\", function (e) {\n      if (e) return e;\n      e = Symbol(\"Symbol.iterator\");\n\n      for (var t = \"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"), n = 0; n < t.length; n++) {\n        var o = s[t[n]];\n        \"function\" == typeof o && \"function\" != typeof o.prototype[e] && r(o.prototype, e, {\n          configurable: !0,\n          writable: !0,\n          value: function value() {\n            return a(i(this));\n          }\n        });\n      }\n\n      return e;\n    }), \"function\" == typeof Object.setPrototypeOf) n = Object.setPrototypeOf;else {\n      var d;\n\n      e: {\n        var l = {};\n\n        try {\n          l.__proto__ = {\n            a: !0\n          }, d = l.a;\n          break e;\n        } catch (e) {}\n\n        d = !1;\n      }\n\n      n = d ? function (e, t) {\n        if (e.__proto__ = t, e.__proto__ !== t) throw new TypeError(e + \" is not extensible\");\n        return e;\n      } : null;\n    }\n    var A = n;\n\n    function u() {\n      this.m = !1, this.j = null, this.v = void 0, this.h = 1, this.u = this.C = 0, this.l = null;\n    }\n\n    function h(e) {\n      if (e.m) throw new TypeError(\"Generator is already running\");\n      e.m = !0;\n    }\n\n    function p(e, t) {\n      return e.h = 3, {\n        value: t\n      };\n    }\n\n    function E(e) {\n      this.g = new u(), this.G = e;\n    }\n\n    function g(e, t, i, r) {\n      try {\n        var n = t.call(e.g.j, i);\n        if (!(n instanceof Object)) throw new TypeError(\"Iterator result \" + n + \" is not an object\");\n        if (!n.done) return e.g.m = !1, n;\n        var s = n.value;\n      } catch (t) {\n        return e.g.j = null, e.g.s(t), _(e);\n      }\n\n      return e.g.j = null, r.call(e.g, s), _(e);\n    }\n\n    function _(e) {\n      for (; e.g.h;) {\n        try {\n          var t = e.G(e.g);\n          if (t) return e.g.m = !1, {\n            value: t.value,\n            done: !1\n          };\n        } catch (t) {\n          e.g.v = void 0, e.g.s(t);\n        }\n      }\n\n      if (e.g.m = !1, e.g.l) {\n        if (t = e.g.l, e.g.l = null, t.F) throw t.D;\n        return {\n          value: t.return,\n          done: !0\n        };\n      }\n\n      return {\n        value: void 0,\n        done: !0\n      };\n    }\n\n    function I(e) {\n      this.next = function (t) {\n        return e.o(t);\n      }, this.throw = function (t) {\n        return e.s(t);\n      }, this.return = function (t) {\n        return function (e, t) {\n          h(e.g);\n          var i = e.g.j;\n          return i ? g(e, \"return\" in i ? i.return : function (e) {\n            return {\n              value: e,\n              done: !0\n            };\n          }, t, e.g.return) : (e.g.return(t), _(e));\n        }(e, t);\n      }, this[Symbol.iterator] = function () {\n        return this;\n      };\n    }\n\n    function f(e, t) {\n      return t = new I(new E(t)), A && e.prototype && A(t, e.prototype), t;\n    }\n\n    if (u.prototype.o = function (e) {\n      this.v = e;\n    }, u.prototype.s = function (e) {\n      this.l = {\n        D: e,\n        F: !0\n      }, this.h = this.C || this.u;\n    }, u.prototype.return = function (e) {\n      this.l = {\n        return: e\n      }, this.h = this.u;\n    }, E.prototype.o = function (e) {\n      return h(this.g), this.g.j ? g(this, this.g.j.next, e, this.g.o) : (this.g.o(e), _(this));\n    }, E.prototype.s = function (e) {\n      return h(this.g), this.g.j ? g(this, this.g.j.throw, e, this.g.o) : (this.g.s(e), _(this));\n    }, o(\"Array.prototype.entries\", function (e) {\n      return e || function () {\n        return function (e, t) {\n          e instanceof String && (e += \"\");\n          var i = 0,\n              r = !1,\n              n = {\n            next: function next() {\n              if (!r && i < e.length) {\n                var n = i++;\n                return {\n                  value: t(n, e[n]),\n                  done: !1\n                };\n              }\n\n              return r = !0, {\n                done: !0,\n                value: void 0\n              };\n            }\n          };\n          return n[Symbol.iterator] = function () {\n            return n;\n          }, n;\n        }(this, function (e, t) {\n          return [e, t];\n        });\n      };\n    }), \"undefined\" != typeof Blob && (\"undefined\" == typeof FormData || !FormData.prototype.keys)) {\n      var m = function m(e, t) {\n        for (var i = 0; i < e.length; i++) {\n          t(e[i]);\n        }\n      },\n          C = function C(e) {\n        return e.replace(/\\r?\\n|\\r/g, \"\\r\\n\");\n      },\n          S = function S(e, t, i) {\n        return t instanceof Blob ? (i = void 0 !== i ? String(i + \"\") : \"string\" == typeof t.name ? t.name : \"blob\", t.name === i && \"[object Blob]\" !== Object.prototype.toString.call(t) || (t = new File([t], i)), [String(e), t]) : [String(e), String(t)];\n      },\n          R = function R(e, t) {\n        if (e.length < t) throw new TypeError(t + \" argument required, but only \" + e.length + \" present.\");\n      },\n          T = \"object\" == typeof globalThis ? globalThis : \"object\" == typeof window ? window : \"object\" == typeof self ? self : this,\n          v = T.FormData,\n          y = T.XMLHttpRequest && T.XMLHttpRequest.prototype.send,\n          w = T.Request && T.fetch,\n          N = T.navigator && T.navigator.sendBeacon,\n          O = T.Element && T.Element.prototype,\n          b = T.Symbol && Symbol.toStringTag;\n\n      b && (Blob.prototype[b] || (Blob.prototype[b] = \"Blob\"), \"File\" in T && !File.prototype[b] && (File.prototype[b] = \"File\"));\n\n      try {\n        new File([], \"\");\n      } catch (e) {\n        T.File = function (e, t, i) {\n          return e = new Blob(e, i || {}), Object.defineProperties(e, {\n            name: {\n              value: t\n            },\n            lastModified: {\n              value: +(i && void 0 !== i.lastModified ? new Date(i.lastModified) : new Date())\n            },\n            toString: {\n              value: function value() {\n                return \"[object File]\";\n              }\n            }\n          }), b && Object.defineProperty(e, b, {\n            value: \"File\"\n          }), e;\n        };\n      }\n\n      var D = function D(e) {\n        return e.replace(/\\n/g, \"%0A\").replace(/\\r/g, \"%0D\").replace(/\"/g, \"%22\");\n      },\n          k = function k(e) {\n        this.i = [];\n        var t = this;\n        e && m(e.elements, function (e) {\n          if (e.name && !e.disabled && \"submit\" !== e.type && \"button\" !== e.type && !e.matches(\"form fieldset[disabled] *\")) if (\"file\" === e.type) {\n            var i = e.files && e.files.length ? e.files : [new File([], \"\", {\n              type: \"application/octet-stream\"\n            })];\n            m(i, function (i) {\n              t.append(e.name, i);\n            });\n          } else \"select-multiple\" === e.type || \"select-one\" === e.type ? m(e.options, function (i) {\n            !i.disabled && i.selected && t.append(e.name, i.value);\n          }) : \"checkbox\" === e.type || \"radio\" === e.type ? e.checked && t.append(e.name, e.value) : (i = \"textarea\" === e.type ? C(e.value) : e.value, t.append(e.name, i));\n        });\n      };\n\n      if ((t = k.prototype).append = function (e, t, i) {\n        R(arguments, 2), this.i.push(S(e, t, i));\n      }, t.delete = function (e) {\n        R(arguments, 1);\n        var t = [];\n        e = String(e), m(this.i, function (i) {\n          i[0] !== e && t.push(i);\n        }), this.i = t;\n      }, t.entries = function e() {\n        var t,\n            i = this;\n        return f(e, function (e) {\n          if (1 == e.h && (t = 0), 3 != e.h) return t < i.i.length ? e = p(e, i.i[t]) : (e.h = 0, e = void 0), e;\n          t++, e.h = 2;\n        });\n      }, t.forEach = function (e, t) {\n        R(arguments, 1);\n\n        for (var i = c(this), r = i.next(); !r.done; r = i.next()) {\n          var n = c(r.value);\n          r = n.next().value, n = n.next().value, e.call(t, n, r, this);\n        }\n      }, t.get = function (e) {\n        R(arguments, 1);\n        var t = this.i;\n        e = String(e);\n\n        for (var i = 0; i < t.length; i++) {\n          if (t[i][0] === e) return t[i][1];\n        }\n\n        return null;\n      }, t.getAll = function (e) {\n        R(arguments, 1);\n        var t = [];\n        return e = String(e), m(this.i, function (i) {\n          i[0] === e && t.push(i[1]);\n        }), t;\n      }, t.has = function (e) {\n        R(arguments, 1), e = String(e);\n\n        for (var t = 0; t < this.i.length; t++) {\n          if (this.i[t][0] === e) return !0;\n        }\n\n        return !1;\n      }, t.keys = function e() {\n        var t,\n            i,\n            r,\n            n,\n            s = this;\n        return f(e, function (e) {\n          if (1 == e.h && (t = c(s), i = t.next()), 3 != e.h) return i.done ? void (e.h = 0) : (r = i.value, n = c(r), p(e, n.next().value));\n          i = t.next(), e.h = 2;\n        });\n      }, t.set = function (e, t, i) {\n        R(arguments, 2), e = String(e);\n        var r = [],\n            n = S(e, t, i),\n            s = !0;\n        m(this.i, function (t) {\n          t[0] === e ? s && (s = !r.push(n)) : r.push(t);\n        }), s && r.push(n), this.i = r;\n      }, t.values = function e() {\n        var t,\n            i,\n            r,\n            n,\n            s = this;\n        return f(e, function (e) {\n          if (1 == e.h && (t = c(s), i = t.next()), 3 != e.h) return i.done ? void (e.h = 0) : (r = i.value, (n = c(r)).next(), p(e, n.next().value));\n          i = t.next(), e.h = 2;\n        });\n      }, k.prototype._asNative = function () {\n        for (var e = new v(), t = c(this), i = t.next(); !i.done; i = t.next()) {\n          var r = c(i.value);\n          i = r.next().value, r = r.next().value, e.append(i, r);\n        }\n\n        return e;\n      }, k.prototype._blob = function () {\n        var e = \"----formdata-polyfill-\" + Math.random(),\n            t = [],\n            i = \"--\" + e + '\\r\\nContent-Disposition: form-data; name=\"';\n        return this.forEach(function (e, r) {\n          return \"string\" == typeof e ? t.push(i + D(C(r)) + '\"\\r\\n\\r\\n' + C(e) + \"\\r\\n\") : t.push(i + D(C(r)) + '\"; filename=\"' + D(e.name) + '\"\\r\\nContent-Type: ' + (e.type || \"application/octet-stream\") + \"\\r\\n\\r\\n\", e, \"\\r\\n\");\n        }), t.push(\"--\" + e + \"--\"), new Blob(t, {\n          type: \"multipart/form-data; boundary=\" + e\n        });\n      }, k.prototype[Symbol.iterator] = function () {\n        return this.entries();\n      }, k.prototype.toString = function () {\n        return \"[object FormData]\";\n      }, O && !O.matches && (O.matches = O.matchesSelector || O.mozMatchesSelector || O.msMatchesSelector || O.oMatchesSelector || O.webkitMatchesSelector || function (e) {\n        for (var t = (e = (this.document || this.ownerDocument).querySelectorAll(e)).length; 0 <= --t && e.item(t) !== this;) {\n          ;\n        }\n\n        return -1 < t;\n      }), b && (k.prototype[b] = \"FormData\"), y) {\n        var L = T.XMLHttpRequest.prototype.setRequestHeader;\n        T.XMLHttpRequest.prototype.setRequestHeader = function (e, t) {\n          L.call(this, e, t), \"content-type\" === e.toLowerCase() && (this.B = !0);\n        }, T.XMLHttpRequest.prototype.send = function (e) {\n          e instanceof k ? (e = e._blob(), this.B || this.setRequestHeader(\"Content-Type\", e.type), y.call(this, e)) : y.call(this, e);\n        };\n      }\n\n      w && (T.fetch = function (e, t) {\n        return t && t.body && t.body instanceof k && (t.body = t.body._blob()), w.call(this, e, t);\n      }), N && (T.navigator.sendBeacon = function (e, t) {\n        return t instanceof k && (t = t._asNative()), N.call(this, e, t);\n      }), T.FormData = k;\n    }\n  }();\n  var i_ = 1;\n\n  function r_(e, t, i, r, n) {\n    i_ += 1;\n    var s = {\n      sid: i.sid,\n      command: \"convergeAllocateEdge\",\n      uid: \"666\",\n      appId: i.appId,\n      ts: Math.floor(La() / 1e3),\n      seq: i_,\n      requestId: i_,\n      version: wc,\n      cname: i.cname\n    },\n        o = {\n      service_name: t,\n      json_body: ge(s)\n    };\n    var a,\n        c,\n        d = e[0];\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee64() {\n      var e, _t55, i, n, _e41, _e42, s;\n\n      return _regeneratorRuntime.wrap(function _callee64$(_context64) {\n        while (1) {\n          switch (_context64.prev = _context64.next) {\n            case 0:\n              a = La();\n              _context64.next = 3;\n              return jA(d, {\n                data: o,\n                cancelToken: r,\n                headers: {\n                  \"X-Packet-Service-Type\": \"0\",\n                  \"X-Packet-URI\": \"61\"\n                }\n              });\n\n            case 3:\n              e = _context64.sent;\n\n              if (!(c = La() - a, 0 !== e.code)) {\n                _context64.next = 7;\n                break;\n              }\n\n              _t55 = new Ad(ad.UNEXPECTED_RESPONSE, \"live streaming ap error, code\" + e.code, {\n                retry: !0,\n                responseTime: c\n              });\n              throw vc.error(_t55.toString()), _t55;\n\n            case 7:\n              i = JSON.parse(e.json_body);\n\n              if (!(200 !== i.code)) {\n                _context64.next = 11;\n                break;\n              }\n\n              _e41 = new Ad(ad.UNEXPECTED_RESPONSE, Xe(n = \"live streaming app center error, code: \".concat(i.code, \", reason: \")).call(n, i.reason), {\n                code: i.code,\n                responseTime: c\n              });\n              throw vc.error(_e41.toString()), _e41;\n\n            case 11:\n              if (!(!i.servers || 0 === i.servers.length)) {\n                _context64.next = 14;\n                break;\n              }\n\n              _e42 = new Ad(ad.UNEXPECTED_RESPONSE, \"live streaming app center empty server\", {\n                code: i.code,\n                responseTime: c\n              });\n              throw vc.error(_e42.toString()), _e42;\n\n            case 14:\n              s = function (e, t) {\n                var i;\n                return {\n                  addressList: Es(i = e.servers).call(i, function (e) {\n                    var i, r, n;\n                    return Xe(i = Xe(r = Xe(n = \"wss://\".concat(e.address.replace(/\\./g, \"-\"), \".\")).call(n, Fc(\"WORKER_DOMAIN\"), \":\")).call(r, e.wss, \"?serviceName=\")).call(i, encodeURIComponent(t));\n                  }),\n                  workerToken: e.workerToken,\n                  vid: e.vid\n                };\n              }(i, t);\n\n              return _context64.abrupt(\"return\", (Fc(\"LIVE_STREAMING_ADDRESS\") && (s.addressList = Fc(\"LIVE_STREAMING_ADDRESS\") instanceof Array ? Fc(\"LIVE_STREAMING_ADDRESS\") : [Fc(\"LIVE_STREAMING_ADDRESS\")]), function (e) {\n                for (var t = 1; t < arguments.length; t++) {\n                  var i,\n                      r = null != arguments[t] ? arguments[t] : {};\n                  if (t % 2) Xi(i = t_(Object(r), !0)).call(i, function (t) {\n                    NA(e, t, r[t]);\n                  });else if (Vl) se(e, Vl(r));else {\n                    var n;\n                    Xi(n = t_(Object(r))).call(n, function (t) {\n                      dr(e, t, Br(r, t));\n                    });\n                  }\n                }\n\n                return e;\n              }({}, s, {\n                responseTime: c\n              })));\n\n            case 16:\n            case \"end\":\n              return _context64.stop();\n          }\n        }\n      }, _callee64, this);\n    })), function (r, n) {\n      return iu.apworkerEvent(i.sid, {\n        success: !0,\n        sc: 200,\n        serviceName: t,\n        responseDetail: ge(r.addressList),\n        firstSuccess: 0 === n,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !1;\n    }, function (r, n) {\n      return iu.apworkerEvent(i.sid, {\n        success: !1,\n        sc: r.data && r.data.code || 200,\n        serviceName: t,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !!(r.code !== ad.OPERATION_ABORTED && r.code !== ad.UNEXPECTED_RESPONSE || r.data && r.data.retry) && (d = e[(n + 1) % e.length], !0);\n    }, n);\n  }\n\n  var n_ = 1;\n\n  function s_(_ref46, i, r, n) {\n    var e = _ref46.url,\n        t = _ref46.areaCode;\n\n    var s = La(),\n        _l_ = l_(i, t, [wA.CHOOSE_SERVER]),\n        _l_2 = _slicedToArray(_l_, 2),\n        o = _l_2[0],\n        a = _l_2[1];\n\n    var c = WA.networkState;\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee65() {\n      var t, a;\n      return _regeneratorRuntime.wrap(function _callee65$(_context65) {\n        while (1) {\n          switch (_context65.prev = _context65.next) {\n            case 0:\n              _context65.t0 = c && WA.networkState === Dl.OFFLINE && WA.onlineWaiter;\n\n              if (!_context65.t0) {\n                _context65.next = 4;\n                break;\n              }\n\n              _context65.next = 4;\n              return As.race([WA.onlineWaiter, Th(n && n.maxRetryTimeout || HA.maxRetryTimeout)]);\n\n            case 4:\n              c = WA.networkState;\n              _context65.next = 7;\n              return jA(e, {\n                data: o,\n                cancelToken: r,\n                headers: {\n                  \"Content-Type\": \"multipart/form-data;\"\n                }\n              }, !0);\n\n            case 7:\n              t = _context65.sent;\n              iu.reportResourceTiming(e, i.sid), a_(t, e, i, s, [wA.CHOOSE_SERVER]);\n              a = gh(t, wA.CHOOSE_SERVER);\n              return _context65.abrupt(\"return\", (c_(a), Ah(a, e)));\n\n            case 11:\n            case \"end\":\n              return _context65.stop();\n          }\n        }\n      }, _callee65, this);\n    })), function (t) {\n      return t && iu.joinChooseServer(i.sid, {\n        lts: s,\n        succ: !0,\n        csAddr: e,\n        opid: a,\n        serverList: t.gatewayAddrs,\n        ec: null,\n        cid: t.cid.toString(),\n        uid: t.uid.toString(),\n        csIp: t.csIp,\n        unilbsServerIds: [wA.CHOOSE_SERVER].toString()\n      }), !1;\n    }, function (t) {\n      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? t.data.retry : (iu.joinChooseServer(i.sid, {\n        lts: s,\n        succ: !1,\n        csAddr: e,\n        serverList: null,\n        opid: a,\n        ec: t.code,\n        csIp: t.data && t.data.csIp,\n        unilbsServerIds: [wA.CHOOSE_SERVER].toString(),\n        extend: ge({\n          networkState: c\n        })\n      }), vc.warning(\"[\".concat(i.clientId, \"] Choose server network error, retry\"), t), !0));\n    }, n);\n  }\n\n  function o_(_ref48, r, n, s) {\n    var e = _ref48.url,\n        t = _ref48.areaCode,\n        i = _ref48.serviceIds;\n\n    var o = La(),\n        _l_3 = l_(r, t, i),\n        _l_4 = _slicedToArray(_l_3, 2),\n        a = _l_4[0],\n        c = _l_4[1];\n\n    var d = void 0;\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee66() {\n      var t, c, l;\n      return _regeneratorRuntime.wrap(function _callee66$(_context66) {\n        while (1) {\n          switch (_context66.prev = _context66.next) {\n            case 0:\n              _context66.t0 = d && WA.networkState === Dl.OFFLINE && WA.onlineWaiter;\n\n              if (!_context66.t0) {\n                _context66.next = 4;\n                break;\n              }\n\n              _context66.next = 4;\n              return As.race([WA.onlineWaiter, Th(s && s.maxRetryTimeout || HA.maxRetryTimeout)]);\n\n            case 4:\n              d = WA.networkState;\n              _context66.next = 7;\n              return jA(e, {\n                data: a,\n                cancelToken: n,\n                headers: {\n                  \"Content-Type\": \"multipart/form-data;\"\n                }\n              }, !0);\n\n            case 7:\n              t = _context66.sent;\n              iu.reportResourceTiming(e, r.sid), a_(t, e, r, o, i);\n              c = gh(t, wA.CHOOSE_SERVER), l = gh(t, \"proxy5\" === r.cloudProxyServer ? wA.CLOUD_PROXY_5 : wA.CLOUD_PROXY);\n              return _context66.abrupt(\"return\", (c_(c), {\n                gatewayInfo: Ah(c, e),\n                proxyInfo: l,\n                url: e\n              }));\n\n            case 11:\n            case \"end\":\n              return _context66.stop();\n          }\n        }\n      }, _callee66, this);\n    })), function (t) {\n      var n;\n      return t.gatewayInfo && iu.joinChooseServer(r.sid, {\n        lts: o,\n        succ: !0,\n        csAddr: e,\n        serverList: t.gatewayInfo.gatewayAddrs,\n        ec: null,\n        opid: c,\n        cid: t.gatewayInfo.cid.toString(),\n        uid: t.gatewayInfo.uid.toString(),\n        csIp: t.gatewayInfo.csIp,\n        unilbsServerIds: i.toString()\n      }), t.proxyInfo && iu.joinWebProxyAP(r.sid, {\n        lts: o,\n        sucess: 1,\n        apServerAddr: e,\n        turnServerAddrList: Es(n = t.proxyInfo.addresses).call(n, function (e) {\n          return e.ip;\n        }).join(\",\"),\n        errorCode: null,\n        eventType: r.cloudProxyServer,\n        unilbsServerIds: i.toString()\n      }), !1;\n    }, function (t) {\n      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? t.data.retry : (iu.joinWebProxyAP(r.sid, {\n        lts: o,\n        sucess: 0,\n        apServerAddr: e,\n        turnServerAddrList: null,\n        errorCode: t.code,\n        eventType: r.cloudProxyServer,\n        unilbsServerIds: i.toString(),\n        extend: ge({\n          networkState: d\n        })\n      }), vc.warning(\"[\".concat(r.clientId, \"] multi unilbs network error, retry\"), t), !0));\n    }, s);\n  }\n\n  var a_ = function a_(e, t, i, r, n) {\n    var s, o, a;\n    var c = [];\n    if (Xi(s = e.response_body).call(s, function (s) {\n      var o = s.buffer.code;\n\n      if (0 !== o) {\n        var _a5 = Zh(o),\n            _d2 = {\n          error: new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, _a5.desc, {\n            retry: _a5.retry,\n            csIp: e.detail[502]\n          }),\n          flag: s.buffer.flag\n        };\n\n        c.push(_d2), 4096 === _d2.flag ? iu.joinChooseServer(i.sid, {\n          lts: r,\n          succ: !1,\n          csAddr: t,\n          opid: e.opid,\n          serverList: null,\n          ec: _d2.error.message,\n          csIp: _d2.error.data && _d2.error.data.csIp,\n          unilbsServerIds: n.toString()\n        }) : 1048576 !== _d2.flag && 4194304 !== _d2.flag || iu.joinWebProxyAP(i.sid, {\n          lts: r,\n          sucess: 0,\n          apServerAddr: t,\n          turnServerAddrList: null,\n          errorCode: _d2.error.code,\n          eventType: i.cloudProxyServer,\n          unilbsServerIds: n.toString()\n        });\n      }\n    }), c.length) throw vc.warning(Xe(o = Xe(a = \"[\".concat(i.clientId, \"] multi unilbs \")).call(a, t, \" failed, \")).call(o, Es(c).call(c, function (e) {\n      var t, i;\n      return Xe(t = Xe(i = \"flag: \".concat(e.flag, \", message: \")).call(i, e.error.message, \", retry: \")).call(t, e.error.data.retry);\n    }).join(\" | \"))), new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, Es(c).call(c, function (e) {\n      var t;\n      return Xe(t = \"flag: \".concat(e.flag, \", message: \")).call(t, e.error.message);\n    }).join(\" | \"), {\n      retry: !!Vs(c).call(c, function (e) {\n        return e.error.data.retry;\n      }),\n      csIp: e.detail[502]\n    });\n  },\n      c_ = function c_(e) {\n    if (e.addresses && 0 === e.addresses.length && 0 === e.code) throw new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, \"void gateway address\", {\n      retry: !0,\n      csIp: e.detail && e.detail[502]\n    });\n\n    if (Fc(\"GATEWAY_ADDRESS\") && Fc(\"GATEWAY_ADDRESS\").length > 0) {\n      var t;\n      vc.debug(\"assign gateway address to\", Fc(\"GATEWAY_ADDRESS\"));\n\n      var _i30 = Es(t = Fc(\"GATEWAY_ADDRESS\")).call(t, function (t) {\n        return {\n          ip: t.ip,\n          port: t.port,\n          ticket: e.addresses[0] && e.addresses[0].ticket\n        };\n      });\n\n      e.addresses = _i30;\n    }\n  },\n      d_ = function d_(e, t) {\n    if (e.response_body && e.response_body.length) {\n      var _t56 = e.response_body[0];\n\n      if (0 !== _t56.buffer.code) {\n        var i;\n\n        var _e43 = Zh(_t56.buffer.code);\n\n        throw new Ad(ad.UPDATE_TICKET_FAILED, Xe(i = \"[\".concat(_t56.buffer.code, \"]: \")).call(i, _e43.desc), {\n          retry: _e43.retry\n        });\n      }\n\n      return _t56.buffer.ticket;\n    }\n\n    throw vc.debug(\"update ticket request received ap response without response body:\", t), new Ad(ad.UPDATE_TICKET_FAILED, \"cannot find response body from ap response\", {\n      retry: !1\n    });\n  },\n      l_ = function l_(e, t, i) {\n    var r;\n    var n = Math.floor(Math.random() * Math.pow(10, 12)),\n        s = {\n      appid: e.appId,\n      client_ts: La(),\n      opid: n,\n      sid: e.sid,\n      request_bodies: [{\n        uri: 22,\n        buffer: {\n          cname: e.cname,\n          detail: {\n            6: e.stringUid,\n            11: t,\n            12: Fc(\"USE_NEW_TOKEN\") ? \"1\" : void 0\n          },\n          key: e.token,\n          service_ids: i,\n          uid: e.uid || 0\n        }\n      }]\n    };\n    Xi(r = s.request_bodies).call(r, function (t) {\n      e.multiIP && e.multiIP.gateway_ip && (t.buffer.detail[5] = ge({\n        vocs_ip: [e.multiIP.uni_lbs_ip],\n        vos_ip: [e.multiIP.gateway_ip]\n      }));\n    });\n    var o = new FormData();\n    return o.append(\"request\", ge(s)), [o, n];\n  },\n      A_ = function A_(e, t) {\n    var i;\n    var r = Math.floor(Math.random() * Math.pow(10, 12)),\n        n = {\n      appid: e.appId,\n      client_ts: La(),\n      opid: r,\n      sid: e.sid,\n      request_bodies: [{\n        uri: 28,\n        buffer: {\n          cname: e.cname,\n          detail: {\n            1: \"\",\n            12: \"1\"\n          },\n          token: e.token,\n          service_ids: t,\n          uid: e.uid || 0,\n          edges_services: Es(i = e.apResponse.addresses).call(i, function (e) {\n            return {\n              ip: e.ip,\n              port: e.port\n            };\n          })\n        }\n      }]\n    },\n        s = new FormData();\n    return s.append(\"request\", ge(n)), [s, r];\n  },\n      u_ = function u_() {\n    var e = Fc(\"AREAS\");\n    0 === e.length && e.push(\"GLOBAL\");\n    return ar(e).call(e, function (e, t, i) {\n      var r = h_(t);\n      var n;\n      return r ? 0 === i ? r : Xe(n = \"\".concat(e, \",\")).call(n, r) : e;\n    }, \"\");\n  },\n      h_ = function h_(e) {\n    var t, i, r, n, s;\n    return \"OVERSEA\" === e ? Xe(t = Xe(i = Xe(r = Xe(n = Xe(s = \"\".concat(Rl.ASIA, \",\")).call(s, Rl.EUROPE, \",\")).call(n, Rl.AFRICA, \",\")).call(r, Rl.NORTH_AMERICA, \",\")).call(i, Rl.SOUTH_AMERICA, \",\")).call(t, Rl.OCEANIA) : Rl[e];\n  },\n      p_ = {\n    GLOBAL: {\n      ASIA: [\"CHINA\", \"JAPAN\", \"INDIA\", \"KOREA\"],\n      EUROPE: [],\n      NORTH_AMERICA: [],\n      SOUTH_AMERICA: [],\n      OCEANIA: [],\n      AFRICA: []\n    }\n  },\n      E_ = ir(p_.GLOBAL),\n      g_ = [\"CHINA\", \"NORTH_AMERICA\", \"EUROPE\", \"ASIA\", \"JAPAN\", \"INDIA\", \"OCEANIA\", \"SOUTH_AMERICA\", \"AFRICA\", \"KOREA\"],\n      __ = function __(e, t) {\n    var i = [];\n\n    if (eo(e).call(e, \"GLOBAL\")) {\n      var _n12 = [\"GLOBAL\", \"OVERSEA\"],\n          _s11 = ir(Tl);\n\n      if (\"GLOBAL\" === t) throw new Ad(ad.INVALID_PARAMS, \"GLOBAL is an invalid excludedArea value\");\n      if (\"CHINA\" === t) i = [\"OVERSEA\"];else if (r = t, eo(E_).call(E_, r)) {\n        var _e44 = p_.GLOBAL[t] || [],\n            _r22 = [].concat(_n12, [t], _toConsumableArray(_e44));\n\n        i = Fr(_s11).call(_s11, function (e) {\n          return !eo(_r22).call(_r22, e);\n        });\n      } else if (function (e) {\n        var t = !1;\n        return Xi(E_).call(E_, function (i) {\n          var r;\n          eo(r = p_.GLOBAL[i]).call(r, e) && (t = !0);\n        }), t;\n      }(t)) {\n        var _e45 = function (e) {\n          var t;\n          return Xi(E_).call(E_, function (i) {\n            var r;\n            eo(r = p_.GLOBAL[i]).call(r, e) && (t = i);\n          }), t;\n        }(t),\n            _r23 = [].concat(_n12, [_e45, t]);\n\n        i = Fr(_s11).call(_s11, function (e) {\n          return !eo(_r23).call(_r23, e);\n        });\n      } else i = e;\n\n      i = function (e) {\n        var t = [];\n        return Xi(g_).call(g_, function (i) {\n          eo(e).call(e, i) && t.push(i);\n        }), Xe(t).call(t, Fr(e).call(e, function (e) {\n          return !eo(g_).call(g_, e);\n        }));\n      }(i);\n    } else i = e;\n\n    var r;\n    return i;\n  };\n\n  function I_(e) {\n    var t = iu.reportApiInvoke(null, {\n      name: Od.SET_AREA,\n      options: e,\n      tag: bd.TRACER\n    });\n\n    try {\n      var i;\n      var _t57 = [];\n\n      if (\"string\" == typeof e && (_t57 = [e]), ld(e) && (Xi(e).call(e, function (e) {\n        if (!eo(Sl).call(Sl, e)) throw new Ad(ad.INVALID_PARAMS, \"invalid area code\");\n      }), _t57 = e), \"[object Object]\" === Object.prototype.toString.call(e)) {\n        var _i31 = e.areaCode,\n            _r25 = e.excludedArea;\n        if (!_i31) throw new Ad(ad.INVALID_PARAMS, \"area code is needed\");\n        var _n13 = _i31;\n        \"string\" == typeof _i31 && (_n13 = [_i31]), _t57 = _r25 ? __(_n13, _r25) : _n13;\n      }\n\n      Qc(\"AREAS\", _t57);\n\n      var _r24 = function (e) {\n        var t = {\n          CODE: \"\",\n          WEBCS_DOMAIN: [],\n          WEBCS_DOMAIN_BACKUP_LIST: [],\n          PROXY_CS: [],\n          CDS_AP: [],\n          ACCOUNT_REGISTER: [],\n          UAP_AP: [],\n          EVENT_REPORT_DOMAIN: [],\n          EVENT_REPORT_BACKUP_DOMAIN: [],\n          LOG_UPLOAD_SERVER: [],\n          PROXY_SERVER_TYPE3: []\n        };\n        return Es(e).call(e, function (e) {\n          var i = Tl[e],\n              r = ir(i);\n          r && Es(r).call(r, function (e) {\n            var r;\n            \"CODE\" !== e && (t[e] = Xe(r = t[e]).call(r, i[e]));\n          });\n        }), t;\n      }(_t57);\n\n      Es(i = ir(_r24)).call(i, function (e) {\n        if (\"LOG_UPLOAD_SERVER\" === e || \"EVENT_REPORT_DOMAIN\" === e || \"EVENT_REPORT_BACKUP_DOMAIN\" === e || \"PROXY_SERVER_TYPE3\" === e) {\n          Qc(e, _r24[e][0]);\n        } else Qc(e, _r24[e]);\n      }), vc.debug(\"set area success:\", _t57.join(\",\"));\n    } catch (e) {\n      throw t.onError(e), e;\n    }\n\n    t.onSuccess();\n  }\n\n  function f_(_x84, _x85, _x86) {\n    return _f_.apply(this, arguments);\n  }\n\n  function _f_() {\n    _f_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee344(e, t, i) {\n      var r;\n      return _regeneratorRuntime.wrap(function _callee344$(_context344) {\n        while (1) {\n          switch (_context344.prev = _context344.next) {\n            case 0:\n              r = function () {\n                var _ref217 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee343(e, t, i) {\n                  var r, n, s, o, a, c, d;\n                  return _regeneratorRuntime.wrap(function _callee343$(_context343) {\n                    while (1) {\n                      switch (_context343.prev = _context343.next) {\n                        case 0:\n                          s = Es(r = Bs(n = Fc(\"WEBCS_DOMAIN\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t) {\n                            var i;\n                            return {\n                              url: e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                              areaCode: u_()\n                            };\n                          });\n                          o = null;\n                          a = [], c =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref218 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee341() {\n                              return _regeneratorRuntime.wrap(function _callee341$(_context341) {\n                                while (1) {\n                                  switch (_context341.prev = _context341.next) {\n                                    case 0:\n                                      _context341.next = 2;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: s,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), s_(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: a\n                                      });\n\n                                    case 2:\n                                      return _context341.abrupt(\"return\", _context341.sent);\n\n                                    case 3:\n                                    case \"end\":\n                                      return _context341.stop();\n                                  }\n                                }\n                              }, _callee341, this);\n                            }));\n\n                            return function c() {\n                              return _ref218.apply(this, arguments);\n                            };\n                          }(), d =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref219 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee342() {\n                              var r, n;\n                              return _regeneratorRuntime.wrap(function _callee342$(_context342) {\n                                while (1) {\n                                  switch (_context342.prev = _context342.next) {\n                                    case 0:\n                                      _context342.next = 2;\n                                      return Th(1e3);\n\n                                    case 2:\n                                      if (!(null !== o)) {\n                                        _context342.next = 4;\n                                        break;\n                                      }\n\n                                      return _context342.abrupt(\"return\", o);\n\n                                    case 4:\n                                      n = Es(r = Fc(\"WEBCS_DOMAIN_BACKUP_LIST\")).call(r, function (t) {\n                                        var i;\n                                        return {\n                                          url: e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                                          areaCode: u_()\n                                        };\n                                      });\n                                      _context342.next = 7;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: n,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), s_(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: a\n                                      });\n\n                                    case 7:\n                                      return _context342.abrupt(\"return\", _context342.sent);\n\n                                    case 8:\n                                    case \"end\":\n                                      return _context342.stop();\n                                  }\n                                }\n                              }, _callee342, this);\n                            }));\n\n                            return function d() {\n                              return _ref219.apply(this, arguments);\n                            };\n                          }();\n                          _context343.prev = 3;\n                          _context343.next = 6;\n                          return Dh([c(), d()]);\n\n                        case 6:\n                          o = _context343.sent;\n                          a.length && Xi(a).call(a, function (e) {\n                            return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n                          });\n                          return _context343.abrupt(\"return\", o);\n\n                        case 11:\n                          _context343.prev = 11;\n                          _context343.t0 = _context343[\"catch\"](3);\n                          throw _context343.t0[0];\n\n                        case 14:\n                        case \"end\":\n                          return _context343.stop();\n                      }\n                    }\n                  }, _callee343, this, [[3, 11]]);\n                }));\n\n                return function (_x471, _x472, _x473) {\n                  return _ref217.apply(this, arguments);\n                };\n              }()(e, t, i);\n\n              _context344.next = 3;\n              return r;\n\n            case 3:\n              _context344.t0 = _context344.sent;\n              return _context344.abrupt(\"return\", {\n                gatewayInfo: _context344.t0\n              });\n\n            case 5:\n            case \"end\":\n              return _context344.stop();\n          }\n        }\n      }, _callee344, this);\n    }));\n    return _f_.apply(this, arguments);\n  }\n\n  function m_(_x87, _x88, _x89, _x90) {\n    return _m_.apply(this, arguments);\n  }\n\n  function _m_() {\n    _m_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee348(e, t, i, r) {\n      var n, s, o, _ref220, _ref221, a, _n59, _ref222, _r96, _n60;\n\n      return _regeneratorRuntime.wrap(function _callee348$(_context348) {\n        while (1) {\n          switch (_context348.prev = _context348.next) {\n            case 0:\n              if (!(\"disabled\" === e.cloudProxyServer)) {\n                _context348.next = 9;\n                break;\n              }\n\n              if (!r) {\n                _context348.next = 7;\n                break;\n              }\n\n              _context348.next = 4;\n              return f_(e, t, i);\n\n            case 4:\n              _context348.t0 = _context348.sent;\n              _context348.next = 8;\n              break;\n\n            case 7:\n              _context348.t0 = void 0;\n\n            case 8:\n              return _context348.abrupt(\"return\", _context348.t0);\n\n            case 9:\n              if (!(\"443only\" === e.cloudProxyServer || \"normal\" === e.cloudProxyServer)) {\n                _context348.next = 48;\n                break;\n              }\n\n              if (!r) {\n                _context348.next = 32;\n                break;\n              }\n\n              if (!(\"normal\" !== e.cloudProxyServer)) {\n                _context348.next = 21;\n                break;\n              }\n\n              _context348.next = 14;\n              return As.all([S_(e, t, i), f_(e, t, i)]);\n\n            case 14:\n              _ref220 = _context348.sent;\n              _ref221 = _slicedToArray(_ref220, 2);\n              _n59 = _ref221[0];\n              o = _ref221[1];\n              _ref220;\n              _context348.next = 30;\n              break;\n\n            case 21:\n              _context348.next = 23;\n              return S_(e, t, i);\n\n            case 23:\n              _n59 = _context348.sent;\n              e.proxyServer = _n59.addresses[0];\n              iu.setProxyServer(e.proxyServer);\n              vc.setProxyServer(e.proxyServer);\n              _context348.next = 29;\n              return f_(e, t, i);\n\n            case 29:\n              o = _context348.sent;\n\n            case 30:\n              _context348.next = 45;\n              break;\n\n            case 32:\n              o = void 0;\n\n              if (!(\"normal\" !== e.cloudProxyServer)) {\n                _context348.next = 39;\n                break;\n              }\n\n              _context348.next = 36;\n              return S_(e, t, i);\n\n            case 36:\n              _n59 = _context348.sent;\n              _context348.next = 45;\n              break;\n\n            case 39:\n              _context348.next = 41;\n              return S_(e, t, i);\n\n            case 41:\n              _n59 = _context348.sent;\n              e.proxyServer = _n59.addresses[0];\n              iu.setProxyServer(e.proxyServer);\n              vc.setProxyServer(e.proxyServer);\n\n            case 45:\n              e.turnServer = {\n                mode: \"manual\",\n                servers: Es(a = _n59.addresses).call(a, function (t) {\n                  return {\n                    turnServerURL: t,\n                    tcpport: \"proxy3\" === e.cloudProxyServer ? void 0 : _n59.serverResponse.tcpport ? _n59.serverResponse.tcpport : Oc.tcpport,\n                    udpport: \"proxy4\" === e.cloudProxyServer ? void 0 : _n59.serverResponse.udpport ? _n59.serverResponse.udpport : Oc.udpport,\n                    username: _n59.serverResponse.username || Oc.username,\n                    password: _n59.serverResponse.password || Oc.password,\n                    forceturn: \"proxy4\" !== e.cloudProxyServer && \"proxy5\" !== e.cloudProxyServer,\n                    security: \"proxy5\" === e.cloudProxyServer\n                  };\n                })\n              };\n              _context348.next = 54;\n              break;\n\n            case 48:\n              _context348.next = 50;\n              return function () {\n                var _ref223 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee347(e, t, i) {\n                  var r, n, s, o, a, c, d, l, A, u, h, p, _ref226, _t210;\n\n                  return _regeneratorRuntime.wrap(function _callee347$(_context347) {\n                    while (1) {\n                      switch (_context347.prev = _context347.next) {\n                        case 0:\n                          s = Fc(\"PROXY_SERVER_TYPE3\"), o = function o(e, t) {\n                            var i;\n                            var r = s;\n                            return ld(r) && (r = t % 2 == 0 ? s[1] : s[0]), Xe(i = \"https://\".concat(r, \"/ap/?url=\")).call(i, e);\n                          }, a = Es(r = Bs(n = Fc(\"WEBCS_DOMAIN\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t, i) {\n                            return {\n                              url: o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i),\n                              areaCode: u_(),\n                              serviceIds: [wA.CHOOSE_SERVER, \"proxy5\" === e.cloudProxyServer ? wA.CLOUD_PROXY_5 : wA.CLOUD_PROXY]\n                            };\n                          });\n                          c = null;\n                          d = [], l =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref224 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee345() {\n                              return _regeneratorRuntime.wrap(function _callee345$(_context345) {\n                                while (1) {\n                                  switch (_context345.prev = _context345.next) {\n                                    case 0:\n                                      _context345.next = 2;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: a,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), o_(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: d\n                                      });\n\n                                    case 2:\n                                      return _context345.abrupt(\"return\", _context345.sent);\n\n                                    case 3:\n                                    case \"end\":\n                                      return _context345.stop();\n                                  }\n                                }\n                              }, _callee345, this);\n                            }));\n\n                            return function l() {\n                              return _ref224.apply(this, arguments);\n                            };\n                          }(), A =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref225 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee346() {\n                              var r, n;\n                              return _regeneratorRuntime.wrap(function _callee346$(_context346) {\n                                while (1) {\n                                  switch (_context346.prev = _context346.next) {\n                                    case 0:\n                                      _context346.next = 2;\n                                      return Th(1e3);\n\n                                    case 2:\n                                      if (!(null !== c)) {\n                                        _context346.next = 4;\n                                        break;\n                                      }\n\n                                      return _context346.abrupt(\"return\", c);\n\n                                    case 4:\n                                      n = Es(r = Fc(\"WEBCS_DOMAIN_BACKUP_LIST\")).call(r, function (e, t) {\n                                        return {\n                                          url: o(\"\".concat(e, \"/api/v2/transpond/webrtc?v=2\"), t),\n                                          areaCode: u_(),\n                                          serviceIds: [11, 18]\n                                        };\n                                      });\n                                      _context346.next = 7;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: n,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), o_(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: d\n                                      });\n\n                                    case 7:\n                                      return _context346.abrupt(\"return\", _context346.sent);\n\n                                    case 8:\n                                    case \"end\":\n                                      return _context346.stop();\n                                  }\n                                }\n                              }, _callee346, this);\n                            }));\n\n                            return function A() {\n                              return _ref225.apply(this, arguments);\n                            };\n                          }();\n                          _context347.prev = 3;\n                          _context347.next = 6;\n                          return Dh([l(), A()]);\n\n                        case 6:\n                          _ref226 = _context347.sent;\n                          u = _ref226.gatewayInfo;\n                          h = _ref226.proxyInfo;\n                          p = _ref226.url;\n                          _context347.next = 15;\n                          break;\n\n                        case 12:\n                          _context347.prev = 12;\n                          _context347.t0 = _context347[\"catch\"](3);\n                          throw _context347.t0[0];\n\n                        case 15:\n                          d.length && Xi(d).call(d, function (e) {\n                            return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n                          });\n\n                          if (!(!u || !h)) {\n                            _context347.next = 18;\n                            break;\n                          }\n\n                          throw new Ad(ad.UNEXPECTED_ERROR, \"missing gateway or proxy response\").print();\n\n                        case 18:\n                          if (ld(s) && p) {\n                            _t210 = new e_(p).host;\n                            eo(s).call(s, _t210) && (e.proxyServer = _t210, vc.setProxyServer(_t210), iu.setProxyServer(_t210));\n                          }\n\n                          _context347.t1 = u;\n                          _context347.next = 22;\n                          return _h(h, u.uid);\n\n                        case 22:\n                          _context347.t2 = _context347.sent;\n                          c = {\n                            gatewayInfo: _context347.t1,\n                            proxyInfo: _context347.t2\n                          };\n                          return _context347.abrupt(\"return\", c);\n\n                        case 25:\n                        case \"end\":\n                          return _context347.stop();\n                      }\n                    }\n                  }, _callee347, this, [[3, 12]]);\n                }));\n\n                return function (_x474, _x475, _x476) {\n                  return _ref223.apply(this, arguments);\n                };\n              }()(e, t, i);\n\n            case 50:\n              _ref222 = _context348.sent;\n              _r96 = _ref222.proxyInfo;\n              _n60 = _ref222.gatewayInfo;\n              o = {\n                gatewayInfo: _n60\n              }, e.turnServer = {\n                mode: \"manual\",\n                servers: Es(_r96).call(_r96, function (t) {\n                  return {\n                    turnServerURL: t.address,\n                    tcpport: \"proxy3\" === e.cloudProxyServer ? void 0 : t.tcpport ? t.tcpport : Oc.tcpport,\n                    udpport: \"proxy4\" === e.cloudProxyServer ? void 0 : t.udpport ? t.udpport : Oc.udpport,\n                    username: t.username || Oc.username,\n                    password: t.password || Oc.password,\n                    forceturn: \"proxy4\" !== e.cloudProxyServer && \"proxy5\" !== e.cloudProxyServer,\n                    security: \"proxy5\" === e.cloudProxyServer\n                  };\n                })\n              };\n\n            case 54:\n              return _context348.abrupt(\"return\", (vc.debug(Xe(n = Xe(s = \"[\".concat(e.clientId, \"] set proxy server: \")).call(s, e.proxyServer, \", mode: \")).call(n, e.cloudProxyServer)), o));\n\n            case 55:\n            case \"end\":\n              return _context348.stop();\n          }\n        }\n      }, _callee348, this);\n    }));\n    return _m_.apply(this, arguments);\n  }\n\n  function C_(_x91, _x92, _x93, _x94) {\n    return _C_.apply(this, arguments);\n  }\n\n  function _C_() {\n    _C_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee350(e, t, i, r) {\n      var n, s, o;\n      return _regeneratorRuntime.wrap(function _callee350$(_context350) {\n        while (1) {\n          switch (_context350.prev = _context350.next) {\n            case 0:\n              s = Bs(n = Fc(\"ACCOUNT_REGISTER\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"));\n              o = [];\n              o = t.proxyServer ? Es(s).call(s, function (e) {\n                var i;\n                return Xe(i = \"https://\".concat(t.proxyServer, \"/ap/?url=\")).call(i, e + \"/api/v1\");\n              }) : Es(s).call(s, function (e) {\n                return \"https://\".concat(e, \"/api/v1\");\n              });\n              _context350.next = 5;\n              return function () {\n                var _ref227 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee349(e, t, i, r, n) {\n                  var s, o, a, c, _e260;\n\n                  return _regeneratorRuntime.wrap(function _callee349$(_context349) {\n                    while (1) {\n                      switch (_context349.prev = _context349.next) {\n                        case 0:\n                          s = La(), o = {\n                            sid: i.sid,\n                            opid: 10,\n                            appid: i.appId,\n                            string_uid: t\n                          };\n                          a = e[0];\n                          _context349.next = 4;\n                          return qA(function () {\n                            return jA(a + \"\".concat(-1 === Os(a).call(a, \"?\") ? \"?\" : \"&\", \"action=stringuid\"), {\n                              data: o,\n                              cancelToken: r,\n                              headers: {\n                                \"X-Packet-Service-Type\": 0,\n                                \"X-Packet-URI\": 72\n                              }\n                            });\n                          }, function (i, r) {\n                            if (0 === i.code) {\n                              var n;\n                              if (i.uid <= 0 || i.uid >= Math.pow(2, 32)) throw vc.error(Xe(n = \"Invalid Uint Uid \".concat(t, \" => \")).call(n, i.uid), i), iu.reqUserAccount(o.sid, {\n                                lts: s,\n                                success: !1,\n                                serverAddr: a,\n                                stringUid: o.string_uid,\n                                uid: i.uid,\n                                errorCode: ad.INVALID_UINT_UID_FROM_STRING_UID,\n                                extend: o\n                              }), new Ad(ad.INVALID_UINT_UID_FROM_STRING_UID);\n                              return iu.reqUserAccount(o.sid, {\n                                lts: s,\n                                success: !0,\n                                serverAddr: a,\n                                stringUid: o.string_uid,\n                                uid: i.uid,\n                                errorCode: null,\n                                extend: o\n                              }), !1;\n                            }\n\n                            var c = Zh(i.code);\n                            return c.retry && (a = e[(r + 1) % e.length]), iu.reqUserAccount(o.sid, {\n                              lts: s,\n                              success: !1,\n                              serverAddr: a,\n                              stringUid: o.string_uid,\n                              uid: i.uid,\n                              errorCode: c.desc,\n                              extend: o\n                            }), c.retry;\n                          }, function (t, i) {\n                            return t.code !== ad.OPERATION_ABORTED && (iu.reqUserAccount(o.sid, {\n                              lts: s,\n                              success: !1,\n                              serverAddr: a,\n                              stringUid: o.string_uid,\n                              uid: null,\n                              errorCode: t.code,\n                              extend: o\n                            }), a = e[(i + 1) % e.length], !0);\n                          }, n);\n\n                        case 4:\n                          c = _context349.sent;\n\n                          if (!(0 !== c.code)) {\n                            _context349.next = 8;\n                            break;\n                          }\n\n                          _e260 = Zh(c.code);\n                          throw new Ad(ad.UNEXPECTED_RESPONSE, _e260.desc);\n\n                        case 8:\n                          return _context349.abrupt(\"return\", c);\n\n                        case 9:\n                        case \"end\":\n                          return _context349.stop();\n                      }\n                    }\n                  }, _callee349, this);\n                }));\n\n                return function (_x477, _x478, _x479, _x480, _x481) {\n                  return _ref227.apply(this, arguments);\n                };\n              }()(o, e, t, i, r);\n\n            case 5:\n              return _context350.abrupt(\"return\", _context350.sent.uid);\n\n            case 6:\n            case \"end\":\n              return _context350.stop();\n          }\n        }\n      }, _callee350, this);\n    }));\n    return _C_.apply(this, arguments);\n  }\n\n  function S_(_x95, _x96, _x97) {\n    return _S_.apply(this, arguments);\n  }\n\n  function _S_() {\n    _S_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee354(e, t, i) {\n      var r, n, s, o, _r97, _n61, _s47, a, c, d, l, A;\n\n      return _regeneratorRuntime.wrap(function _callee354$(_context354) {\n        while (1) {\n          switch (_context354.prev = _context354.next) {\n            case 0:\n              s = La();\n              o = Es(r = Fc(\"normal\" === e.cloudProxyServer ? \"PROXY_CS\" : \"WEBCS_DOMAIN\")).call(r, function (t) {\n                var i;\n                return e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v1\") : \"https://\".concat(t, \"/api/v1\");\n              });\n\n              if (!(\"proxy3\" === e.cloudProxyServer || \"proxy4\" === e.cloudProxyServer || \"proxy5\" === e.cloudProxyServer)) {\n                _context354.next = 12;\n                break;\n              }\n\n              _r97 = Es(o).call(o, function (e) {\n                return {\n                  url: e,\n                  areaCode: u_()\n                };\n              });\n              _n61 = null;\n              _context354.next = 7;\n              return Hh({\n                fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                referenceList: _r97,\n                asyncMapHandler: function asyncMapHandler(r) {\n                  return function (_ref228, i, r, n) {\n                    var e = _ref228.url,\n                        t = _ref228.areaCode;\n                    var s = La(),\n                        o = {\n                      opid: 133,\n                      flag: \"proxy5\" === i.cloudProxyServer ? 4194304 : 1048576,\n                      ts: +new Date(),\n                      key: i.token,\n                      cname: i.cname,\n                      sid: i.sid,\n                      detail: {\n                        6: i.stringUid,\n                        11: t\n                      },\n                      uid: i.uid || 0\n                    };\n                    return qA(\n                    /*#__PURE__*/\n                    _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee351() {\n                      return _regeneratorRuntime.wrap(function _callee351$(_context351) {\n                        while (1) {\n                          switch (_context351.prev = _context351.next) {\n                            case 0:\n                              _context351.next = 2;\n                              return jA(e, {\n                                data: o,\n                                cancelToken: r,\n                                headers: {\n                                  \"X-Packet-Service-Type\": 0,\n                                  \"X-Packet-URI\": 69\n                                }\n                              });\n\n                            case 2:\n                              return _context351.abrupt(\"return\", _context351.sent);\n\n                            case 3:\n                            case \"end\":\n                              return _context351.stop();\n                          }\n                        }\n                      }, _callee351, this);\n                    })), function (t) {\n                      var r;\n                      if (0 === t.code) return iu.joinWebProxyAP(i.sid, {\n                        lts: s,\n                        sucess: 1,\n                        apServerAddr: e,\n                        turnServerAddrList: Es(r = t.addresses).call(r, function (e) {\n                          return e.ip;\n                        }).join(\",\"),\n                        errorCode: null,\n                        eventType: i.cloudProxyServer\n                      }), !1;\n                      var n = Zh(t.code);\n                      throw new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, n.desc, {\n                        retry: n.retry\n                      });\n                    }, function (t) {\n                      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? (iu.joinWebProxyAP(o.sid, {\n                        lts: s,\n                        sucess: 0,\n                        apServerAddr: e,\n                        turnServerAddrList: null,\n                        errorCode: t.code,\n                        eventType: i.cloudProxyServer\n                      }), vc.warning(Xe(r = Xe(n = Xe(a = \"[\".concat(i.clientId, \"] proxy ap server \")).call(a, e, \" failed, message: \")).call(n, t.message, \", retry: \")).call(r, t.data.retry)), t.data.retry) : (iu.joinWebProxyAP(o.sid, {\n                        lts: s,\n                        sucess: 0,\n                        apServerAddr: e,\n                        turnServerAddrList: null,\n                        errorCode: t.code,\n                        eventType: i.cloudProxyServer\n                      }), !0));\n                      var r, n, a;\n                    }, n);\n                  }(r, e, t, i);\n                },\n                allFailedhandler: function allFailedhandler() {\n                  throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n                }\n              });\n\n            case 7:\n              _n61 = _context354.sent;\n              _s47 = _n61.addresses;\n\n              if (!(!_s47 || 0 === _s47.length)) {\n                _context354.next = 11;\n                break;\n              }\n\n              throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server, empty proxy server list\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER, \"empty proxy server list\");\n\n            case 11:\n              return _context354.abrupt(\"return\", {\n                addresses: Es(_s47).call(_s47, function (e) {\n                  return e.ip;\n                }),\n                serverResponse: {\n                  tcpport: _s47[0].port || 443,\n                  udpport: _s47[0].port || Oc.udpport,\n                  username: Oc.username,\n                  password: Oc.password\n                }\n              });\n\n            case 12:\n              a = null;\n              _context354.next = 15;\n              return Hh({\n                fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                referenceList: o,\n                asyncMapHandler: function asyncMapHandler(r) {\n                  return function (e, t, i, r) {\n                    var n = La(),\n                        s = {\n                      command: \"convergeAllocateEdge\",\n                      sid: t.sid,\n                      appId: t.appId,\n                      token: t.token,\n                      uid: t.uid,\n                      cname: t.cname,\n                      ts: Math.floor(La() / 1e3),\n                      version: wc,\n                      seq: 0,\n                      requestId: 1\n                    };\n                    return qA(\n                    /*#__PURE__*/\n                    _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee352() {\n                      return _regeneratorRuntime.wrap(function _callee352$(_context352) {\n                        while (1) {\n                          switch (_context352.prev = _context352.next) {\n                            case 0:\n                              _context352.next = 2;\n                              return jA(e, {\n                                data: {\n                                  service_name: \"webrtc_proxy\",\n                                  json_body: ge(s)\n                                },\n                                cancelToken: i,\n                                headers: {\n                                  \"X-Packet-Service-Type\": 0,\n                                  \"X-Packet-URI\": 61\n                                }\n                              });\n\n                            case 2:\n                              _context352.t0 = _context352.sent;\n                              _context352.t1 = e;\n                              return _context352.abrupt(\"return\", {\n                                res: _context352.t0,\n                                url: _context352.t1\n                              });\n\n                            case 5:\n                            case \"end\":\n                              return _context352.stop();\n                          }\n                        }\n                      }, _callee352, this);\n                    })), function (e) {\n                      if (!e.res.json_body) throw vc.debug(\"[\".concat(t.clientId, \"] Get proxy server failed: no json_body\")), new Ad(ad.UNEXPECTED_RESPONSE, ge(e.res));\n                      var i = JSON.parse(e.res.json_body);\n                      var r, n;\n                      if (200 !== i.code) throw vc.debug(Xe(r = Xe(n = \"[\".concat(t.clientId, \"] Get proxy server failed: response code [\")).call(n, i.code, \"], reason [\")).call(r, i.reason, \"]\")), new Ad(ad.UNEXPECTED_RESPONSE, ge(e.res));\n                      return vc.debug(\"[\".concat(t.clientId, \"] App return server length\"), i.servers.length), !1;\n                    }, function (t) {\n                      return t.code !== ad.OPERATION_ABORTED && (iu.requestProxyAppCenter(s.sid, {\n                        lts: n,\n                        succ: !1,\n                        APAddr: e,\n                        workerManagerList: null,\n                        ec: t.code,\n                        response: t.message\n                      }), !0);\n                    }, r);\n                  }(r, e, t, i);\n                },\n                allFailedhandler: function allFailedhandler() {\n                  throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n                }\n              });\n\n            case 15:\n              a = _context354.sent;\n              c = JSON.parse(a.res.json_body), d = Es(n = c.servers).call(n, dh);\n\n              if (!(\"443only\" === e.cloudProxyServer)) {\n                _context354.next = 19;\n                break;\n              }\n\n              return _context354.abrupt(\"return\", {\n                addresses: d,\n                serverResponse: {\n                  tcpport: 443,\n                  udpport: Oc.udpport,\n                  username: Oc.username,\n                  password: Oc.password\n                }\n              });\n\n            case 19:\n              iu.requestProxyAppCenter(e.sid, {\n                lts: s,\n                succ: !0,\n                APAddr: a.url,\n                workerManagerList: ge(d),\n                ec: null,\n                response: ge(a.res)\n              }), s = La();\n              l = Es(d).call(d, function (r) {\n                return function (e, t, i, r) {\n                  var n = La();\n                  var s = e;\n                  Ro(e).call(e, \"http\") || (s = \"https://\".concat(e, \":4000/v2/machine\"));\n                  var o = {\n                    command: \"request\",\n                    gatewayType: \"http\",\n                    appId: t.appId,\n                    cname: t.cname,\n                    uid: (t.uid || \"\").toString(),\n                    sdkVersion: \"2.3.1\",\n                    sid: t.sid,\n                    seq: 1,\n                    ts: La(),\n                    requestId: 3,\n                    clientRequest: {\n                      appId: t.appId,\n                      cname: t.cname,\n                      uid: (t.uid || \"\").toString(),\n                      sid: t.sid\n                    }\n                  };\n                  return qA(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee353() {\n                    return _regeneratorRuntime.wrap(function _callee353$(_context353) {\n                      while (1) {\n                        switch (_context353.prev = _context353.next) {\n                          case 0:\n                            _context353.next = 2;\n                            return jA(s, {\n                              data: o,\n                              cancelToken: i\n                            });\n\n                          case 2:\n                            _context353.t0 = _context353.sent;\n                            _context353.t1 = e;\n                            return _context353.abrupt(\"return\", {\n                              res: _context353.t0,\n                              url: _context353.t1\n                            });\n\n                          case 5:\n                          case \"end\":\n                            return _context353.stop();\n                        }\n                      }\n                    }, _callee353, this);\n                  })), function (e) {\n                    if (!e.res.serverResponse) throw new Ad(ad.UNEXPECTED_RESPONSE, \"requeet worker manager server failed: serverResponse is undefined\");\n                    return !1;\n                  }, function (t) {\n                    return t.code !== ad.OPERATION_ABORTED && (iu.requestProxyWorkerManager(o.sid, {\n                      lts: n,\n                      succ: !1,\n                      workerManagerAddr: e,\n                      ec: t.code,\n                      response: t.message\n                    }), !0);\n                  }, r);\n                }(r, e, t, i);\n              });\n              A = null;\n              _context354.prev = 22;\n              _context354.next = 25;\n              return Dh(l);\n\n            case 25:\n              A = _context354.sent;\n              _context354.next = 31;\n              break;\n\n            case 28:\n              _context354.prev = 28;\n              _context354.t0 = _context354[\"catch\"](22);\n              throw vc.error(\"[\".concat(e.clientId, \"] can not get worker manager after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n\n            case 31:\n              return _context354.abrupt(\"return\", (Xi(l).call(l, function (e) {\n                return e.cancel();\n              }), iu.requestProxyWorkerManager(e.sid, {\n                lts: s,\n                succ: !0,\n                workerManagerAddr: A.url,\n                ec: null,\n                response: ge(A.res)\n              }), {\n                addresses: [A.url],\n                serverResponse: A.res.serverResponse\n              }));\n\n            case 32:\n            case \"end\":\n              return _context354.stop();\n          }\n        }\n      }, _callee354, this, [[22, 28]]);\n    }));\n    return _S_.apply(this, arguments);\n  }\n\n  function R_(_x98, _x99, _x100) {\n    return _R_.apply(this, arguments);\n  }\n\n  function _R_() {\n    _R_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee355(e, t, i) {\n      var r, n, s, o, a, c, d;\n      return _regeneratorRuntime.wrap(function _callee355$(_context355) {\n        while (1) {\n          switch (_context355.prev = _context355.next) {\n            case 0:\n              s = Es(r = Bs(n = Fc(\"CDS_AP\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t) {\n                var i;\n                return e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v1\") : \"https://\".concat(t, \"/api/v1?action=config\");\n              }), o = Es(s).call(s, function (r) {\n                return function (e, t, i, r) {\n                  var n = pa(),\n                      s = {\n                    flag: 64,\n                    cipher_method: 0,\n                    features: {\n                      device: n.name,\n                      system: n.os,\n                      system_general: navigator.userAgent,\n                      vendor: t.appId,\n                      version: wc,\n                      cname: t.cname,\n                      sid: t.sid,\n                      session_id: t.sid,\n                      detail: \"\",\n                      proxyServer: t.proxyServer\n                    }\n                  };\n                  return qA(function () {\n                    return jA(e, {\n                      data: s,\n                      timeout: 1e3,\n                      cancelToken: i,\n                      headers: {\n                        \"X-Packet-Service-Type\": 0,\n                        \"X-Packet-URI\": 54\n                      }\n                    });\n                  }, void 0, function (e) {\n                    return e.code !== ad.OPERATION_ABORTED;\n                  }, r);\n                }(r, e, t, i);\n              });\n              a = null, c = null, d = {};\n              _context355.prev = 2;\n              _context355.next = 5;\n              return Dh(o);\n\n            case 5:\n              a = _context355.sent;\n              _context355.next = 13;\n              break;\n\n            case 8:\n              _context355.prev = 8;\n              _context355.t0 = _context355[\"catch\"](2);\n\n              if (!(_context355.t0.code === ad.OPERATION_ABORTED)) {\n                _context355.next = 12;\n                break;\n              }\n\n              throw _context355.t0;\n\n            case 12:\n              c = _context355.t0;\n\n            case 13:\n              Xi(o).call(o, function (e) {\n                return e.cancel();\n              });\n              if (iu.reportApiInvoke(e.sid, {\n                name: Od.REQUEST_CONFIG_DISTRIBUTE,\n                options: {\n                  error: c,\n                  res: a\n                }\n              }).onSuccess(), a && a.test_tags) try {\n                d = function (e) {\n                  if (!e.test_tags) return {};\n                  var t = e.test_tags,\n                      i = ir(t),\n                      r = {};\n                  return Xi(i).call(i, function (e) {\n                    var i;\n                    var n = No(i = Bs(e).call(e, 4)).call(i),\n                        s = JSON.parse(t[e])[1];\n                    r[n] = s;\n                  }), r;\n                }(a);\n              } catch (e) {}\n              return _context355.abrupt(\"return\", d);\n\n            case 16:\n            case \"end\":\n              return _context355.stop();\n          }\n        }\n      }, _callee355, this, [[2, 8]]);\n    }));\n    return _R_.apply(this, arguments);\n  }\n\n  function T_(_x101, _x102, _x103, _x104) {\n    return _T_.apply(this, arguments);\n  }\n\n  function _T_() {\n    _T_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee356(e, t, i, r) {\n      var n, s, o;\n      return _regeneratorRuntime.wrap(function _callee356$(_context356) {\n        while (1) {\n          switch (_context356.prev = _context356.next) {\n            case 0:\n              o = Es(n = Bs(s = Fc(\"UAP_AP\")).call(s, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(n, function (e) {\n                var i;\n                return t.proxyServer ? Xe(i = \"https://\".concat(t.proxyServer, \"/ap/?url=\")).call(i, e + \"/api/v1?action=uap\") : \"https://\".concat(e, \"/api/v1?action=uap\");\n              });\n              _context356.next = 3;\n              return r_(o, e, t, i, r);\n\n            case 3:\n              return _context356.abrupt(\"return\", _context356.sent);\n\n            case 4:\n            case \"end\":\n              return _context356.stop();\n          }\n        }\n      }, _callee356, this);\n    }));\n    return _T_.apply(this, arguments);\n  }\n\n  function v_(_x105, _x106, _x107) {\n    return _v_.apply(this, arguments);\n  }\n\n  function _v_() {\n    _v_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee358(e, t, i) {\n      var r, n, s, o, _e264;\n\n      return _regeneratorRuntime.wrap(function _callee358$(_context358) {\n        while (1) {\n          switch (_context358.prev = _context358.next) {\n            case 0:\n              s = Es(r = Bs(n = Fc(\"UAP_AP\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t) {\n                var i;\n                return e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v1?action=uap\") : \"https://\".concat(t, \"/api/v1?action=uap\");\n              }), o = Es(s).call(s, function (r) {\n                return function (e, t, i, r) {\n                  var n = {\n                    command: \"convergeAllocateEdge\",\n                    sid: t.sid,\n                    appId: t.appId,\n                    token: t.token,\n                    ts: La(),\n                    version: wc,\n                    cname: t.cname,\n                    uid: t.uid.toString(),\n                    requestId: n_,\n                    seq: n_\n                  };\n                  n_ += 1;\n                  var s = {\n                    service_name: \"tele_channel\",\n                    json_body: ge(n)\n                  };\n                  return qA(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee357() {\n                    var t, r, _e261, n, o, _e262, _e263;\n\n                    return _regeneratorRuntime.wrap(function _callee357$(_context357) {\n                      while (1) {\n                        switch (_context357.prev = _context357.next) {\n                          case 0:\n                            _context357.next = 2;\n                            return jA(e, {\n                              data: s,\n                              cancelToken: i,\n                              headers: {\n                                \"X-Packet-Service-Type\": 0,\n                                \"X-Packet-URI\": 61\n                              }\n                            });\n\n                          case 2:\n                            r = _context357.sent;\n\n                            if (!(0 !== r.code)) {\n                              _context357.next = 6;\n                              break;\n                            }\n\n                            _e261 = new Ad(ad.UNEXPECTED_RESPONSE, \"cross channel ap error, code\" + r.code, {\n                              retry: !0\n                            });\n                            throw vc.error(_e261.toString()), _e261;\n\n                          case 6:\n                            n = JSON.parse(r.json_body);\n\n                            if (!(200 !== n.code)) {\n                              _context357.next = 10;\n                              break;\n                            }\n\n                            _e262 = new Ad(ad.UNEXPECTED_RESPONSE, Xe(o = \"cross channel app center error, code: \".concat(n.code, \", reason: \")).call(o, n.reason));\n                            throw vc.error(_e262.toString()), _e262;\n\n                          case 10:\n                            if (!(!n.servers || 0 === n.servers.length)) {\n                              _context357.next = 13;\n                              break;\n                            }\n\n                            _e263 = new Ad(ad.UNEXPECTED_RESPONSE, \"cross channel app center empty server\");\n                            throw vc.error(_e263.toString()), _e263;\n\n                          case 13:\n                            return _context357.abrupt(\"return\", {\n                              vid: n.vid,\n                              workerToken: n.workerToken,\n                              addressList: Es(t = n.servers).call(t, function (e) {\n                                var t, i;\n                                return Xe(t = Xe(i = \"wss://\".concat(e.address.replace(/\\./g, \"-\"), \".\")).call(i, Fc(\"WORKER_DOMAIN\"), \":\")).call(t, e.wss);\n                              })\n                            });\n\n                          case 14:\n                          case \"end\":\n                            return _context357.stop();\n                        }\n                      }\n                    }, _callee357, this);\n                  })), void 0, function (e) {\n                    return !!(e.code !== ad.OPERATION_ABORTED && e.code !== ad.UNEXPECTED_RESPONSE || e.data && e.data.retry);\n                  }, r);\n                }(r, e, t, i);\n              });\n              _context358.prev = 1;\n              _context358.next = 4;\n              return Dh(o);\n\n            case 4:\n              _e264 = _context358.sent;\n              return _context358.abrupt(\"return\", (Xi(o).call(o, function (e) {\n                return e.cancel();\n              }), _e264));\n\n            case 8:\n              _context358.prev = 8;\n              _context358.t0 = _context358[\"catch\"](1);\n              throw _context358.t0[0];\n\n            case 11:\n            case \"end\":\n              return _context358.stop();\n          }\n        }\n      }, _callee358, this, [[1, 8]]);\n    }));\n    return _v_.apply(this, arguments);\n  }\n\n  function y_(_x108, _x109, _x110) {\n    return _y_.apply(this, arguments);\n  }\n\n  function _y_() {\n    _y_ = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee361(e, t, i) {\n      var r, n, s;\n      return _regeneratorRuntime.wrap(function _callee361$(_context361) {\n        while (1) {\n          switch (_context361.prev = _context361.next) {\n            case 0:\n              r = null;\n              n = [], s =\n              /*#__PURE__*/\n              function () {\n                var _ref233 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee360(_s48) {\n                  var o, a;\n                  return _regeneratorRuntime.wrap(function _callee360$(_context360) {\n                    while (1) {\n                      switch (_context360.prev = _context360.next) {\n                        case 0:\n                          a = Es(o = Fc(_s48 ? \"WEBCS_DOMAIN_BACKUP_LIST\" : \"WEBCS_DOMAIN\")).call(o, function (t) {\n                            var i;\n                            return e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\");\n                          });\n                          _context360.t0 = _s48;\n\n                          if (!_context360.t0) {\n                            _context360.next = 6;\n                            break;\n                          }\n\n                          _context360.next = 5;\n                          return Th(1e3);\n\n                        case 5:\n                          _context360.t0 = null !== r;\n\n                        case 6:\n                          if (!_context360.t0) {\n                            _context360.next = 10;\n                            break;\n                          }\n\n                          _context360.t1 = r;\n                          _context360.next = 13;\n                          break;\n\n                        case 10:\n                          _context360.next = 12;\n                          return Hh({\n                            fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                            referenceList: a,\n                            asyncMapHandler: function asyncMapHandler(r) {\n                              var n;\n                              return vc.debug(Xe(n = \"[\".concat(e.clientId, \"] update ticket, Connect to \")).call(n, _s48 ? \"backup\" : \"\", \" choose_server:\"), r), function (e, t, i, r) {\n                                var _A_ = A_(t, [wA.CHOOSE_SERVER]),\n                                    _A_2 = _slicedToArray(_A_, 1),\n                                    n = _A_2[0];\n\n                                var s = WA.networkState;\n                                return qA(\n                                /*#__PURE__*/\n                                _asyncToGenerator(\n                                /*#__PURE__*/\n                                _regeneratorRuntime.mark(function _callee359() {\n                                  var t;\n                                  return _regeneratorRuntime.wrap(function _callee359$(_context359) {\n                                    while (1) {\n                                      switch (_context359.prev = _context359.next) {\n                                        case 0:\n                                          _context359.t0 = s && WA.networkState === Dl.OFFLINE && WA.onlineWaiter;\n\n                                          if (!_context359.t0) {\n                                            _context359.next = 4;\n                                            break;\n                                          }\n\n                                          _context359.next = 4;\n                                          return As.race([WA.onlineWaiter, Th(r && r.maxRetryTimeout || HA.maxRetryTimeout)]);\n\n                                        case 4:\n                                          s = WA.networkState;\n                                          _context359.next = 7;\n                                          return jA(e, {\n                                            data: n,\n                                            cancelToken: i,\n                                            headers: {\n                                              \"Content-Type\": \"multipart/form-data;\"\n                                            }\n                                          }, !0);\n\n                                        case 7:\n                                          t = _context359.sent;\n                                          return _context359.abrupt(\"return\", d_(t, e));\n\n                                        case 9:\n                                        case \"end\":\n                                          return _context359.stop();\n                                      }\n                                    }\n                                  }, _callee359, this);\n                                })), function () {\n                                  return !1;\n                                }, function (e) {\n                                  return e.code !== ad.OPERATION_ABORTED && (e.code === ad.UPDATE_TICKET_FAILED ? e.data.retry : (vc.warning(\"[\".concat(t.clientId, \"] update ticket network error, retry\"), e), !0));\n                                }, r);\n                              }(r, e, t, i);\n                            },\n                            allFailedhandler: function allFailedhandler(e) {\n                              throw e[0];\n                            },\n                            promisesCollector: n\n                          });\n\n                        case 12:\n                          _context360.t1 = _context360.sent;\n\n                        case 13:\n                          return _context360.abrupt(\"return\", _context360.t1);\n\n                        case 14:\n                        case \"end\":\n                          return _context360.stop();\n                      }\n                    }\n                  }, _callee360, this);\n                }));\n\n                return function s(_x482) {\n                  return _ref233.apply(this, arguments);\n                };\n              }();\n              _context361.prev = 2;\n              _context361.next = 5;\n              return Dh([s(!1), s(!0)]);\n\n            case 5:\n              r = _context361.sent;\n              n.length && Xi(n).call(n, function (e) {\n                return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n              });\n              return _context361.abrupt(\"return\", r);\n\n            case 10:\n              _context361.prev = 10;\n              _context361.t0 = _context361[\"catch\"](2);\n              throw _context361.t0[0];\n\n            case 13:\n            case \"end\":\n              return _context361.stop();\n          }\n        }\n      }, _callee361, this, [[2, 10]]);\n    }));\n    return _y_.apply(this, arguments);\n  }\n\n  function w_(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function N_(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = w_(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = w_(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var O_ =\n  /*#__PURE__*/\n  function (_Ll13) {\n    _inherits(O_, _Ll13);\n\n    function O_() {\n      var _this80;\n\n      _classCallCheck(this, O_);\n\n      _this80 = _possibleConstructorReturn(this, _getPrototypeOf(O_).call(this)), _this80.retryConfig = {\n        timeout: 3e3,\n        timeoutFactor: 1.5,\n        maxRetryCount: 1,\n        maxRetryTimeout: 1e4\n      }, _this80.mutex = new su(\"config-distribute\"), _this80.mutableParamsRead = !1;\n      return _this80;\n    }\n\n    _createClass(O_, [{\n      key: \"startGetConfigDistribute\",\n      value: function startGetConfigDistribute(e, t) {\n        var _this81 = this;\n\n        this.joinInfo = e, this.cancelToken = t, this.interval && this.stopGetConfigDistribute(), this.updateConfigDistribute(), this.interval = window.setInterval(function () {\n          _this81.updateConfigDistribute();\n        }, Fc(\"CONFIG_DISTRIBUTE_INTERVAL\"));\n      }\n    }, {\n      key: \"stopGetConfigDistribute\",\n      value: function stopGetConfigDistribute() {\n        this.interval && clearInterval(this.interval), this.interval = void 0, this.joinInfo = void 0, this.cancelToken = void 0;\n      }\n    }, {\n      key: \"awaitConfigDistributeComplete\",\n      value: function () {\n        var _awaitConfigDistributeComplete = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee67() {\n          return _regeneratorRuntime.wrap(function _callee67$(_context67) {\n            while (1) {\n              switch (_context67.prev = _context67.next) {\n                case 0:\n                  if (this.mutex.isLocked) {\n                    _context67.next = 2;\n                    break;\n                  }\n\n                  return _context67.abrupt(\"return\");\n\n                case 2:\n                  _context67.next = 4;\n                  return this.mutex.lock();\n\n                case 4:\n                  _context67.t0 = _context67.sent;\n                  (0, _context67.t0)();\n\n                case 6:\n                case \"end\":\n                  return _context67.stop();\n              }\n            }\n          }, _callee67, this);\n        }));\n\n        function awaitConfigDistributeComplete() {\n          return _awaitConfigDistributeComplete.apply(this, arguments);\n        }\n\n        return awaitConfigDistributeComplete;\n      }()\n    }, {\n      key: \"updateConfigDistribute\",\n      value: function () {\n        var _updateConfigDistribute = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee68() {\n          var e, t, _t58;\n\n          return _regeneratorRuntime.wrap(function _callee68$(_context68) {\n            while (1) {\n              switch (_context68.prev = _context68.next) {\n                case 0:\n                  if (!this.mutableParamsRead) {\n                    this.mutableParamsRead = !0;\n                    iu.reportApiInvoke(null, {\n                      options: void 0,\n                      name: Od.LOAD_CONFIG_FROM_LOCALSTORAGE,\n                      tag: bd.TRACER\n                    }).onSuccess(ge(Vc));\n                  }\n\n                  if (!(!this.joinInfo || !this.cancelToken || !this.retryConfig)) {\n                    _context68.next = 3;\n                    break;\n                  }\n\n                  return _context68.abrupt(\"return\", void vc.debug(\"[config-distribute] get config distribute interrupted have no joininfo\"));\n\n                case 3:\n                  _context68.next = 5;\n                  return this.mutex.lock();\n\n                case 5:\n                  t = _context68.sent;\n                  _context68.prev = 6;\n                  _context68.next = 9;\n                  return R_(this.joinInfo, this.cancelToken, this.retryConfig);\n\n                case 9:\n                  e = _context68.sent;\n                  vc.debug(\"[config-distribute] get config distribute\", ge(e));\n                  e.limit_bitrate && this.handleBitrateLimit(e.limit_bitrate);\n                  this.cacheGlobalParameterConfig(e);\n                  this.configs = e;\n                  _context68.next = 20;\n                  break;\n\n                case 16:\n                  _context68.prev = 16;\n                  _context68.t0 = _context68[\"catch\"](6);\n                  _t58 = new Ad(ad.NETWORK_RESPONSE_ERROR, _context68.t0);\n                  vc.warning(\"[config-distribute] \".concat(_t58.toString()));\n\n                case 20:\n                  _context68.prev = 20;\n                  t();\n                  return _context68.finish(20);\n\n                case 23:\n                case \"end\":\n                  return _context68.stop();\n              }\n            }\n          }, _callee68, this, [[6, 16, 20, 23]]);\n        }));\n\n        function updateConfigDistribute() {\n          return _updateConfigDistribute.apply(this, arguments);\n        }\n\n        return updateConfigDistribute;\n      }()\n    }, {\n      key: \"getBitrateLimit\",\n      value: function getBitrateLimit() {\n        return this.configs ? this.configs.limit_bitrate : void 0;\n      }\n    }, {\n      key: \"handleBitrateLimit\",\n      value: function handleBitrateLimit(e) {\n        var t;\n        (t = e) && t.uplink && t.id && void 0 !== t.uplink.max_bitrate && void 0 !== t.uplink.min_bitrate && (this.configs && this.configs.limit_bitrate ? this.configs && this.configs.limit_bitrate && this.configs.limit_bitrate.id !== e.id && this.emit(vl.UPDATE_BITRATE_LIMIT, e) : this.emit(vl.UPDATE_BITRATE_LIMIT, e));\n      }\n    }, {\n      key: \"getLowStreamConfigDistribute\",\n      value: function getLowStreamConfigDistribute() {\n        return this.configs && this.configs.limit_bitrate && N_({}, this.configs.limit_bitrate.low_stream_uplink);\n      }\n    }, {\n      key: \"cacheGlobalParameterConfig\",\n      value: function cacheGlobalParameterConfig(e) {\n        var t, i;\n        var r = od(t = Fr(i = ir(e)).call(i, function (e) {\n          return /^webrtc_ng_global_parameter/.test(e);\n        })).call(t);\n\n        for (var _t59 = 0; _t59 < r.length; _t59++) {\n          for (var _i32 = r.length - 1; _i32 > _t59; _i32--) {\n            var _t60 = r[_i32];\n\n            if (\"number\" == typeof e[_t60].__priority) {\n              var _n14 = e[_t60].__priority,\n                  _s12 = r[_i32 - 1];\n\n              if (\"number\" == typeof e[_s12].__priority) {\n                if (!(_n14 > e[_s12].__priority)) continue;\n                {\n                  var _e46 = _t60;\n                  r[_i32] = r[_i32 - 1], r[_i32 - 1] = _e46;\n                }\n              } else {\n                var _e47 = _t60;\n                r[_i32] = r[_i32 - 1], r[_i32 - 1] = _e47;\n              }\n            }\n          }\n        }\n\n        var n = {};\n        Xi(r).call(r, function (t) {\n          var i;\n          var r = e[t],\n              s = r.__expires;\n          Xi(i = ir(r)).call(i, function (e) {\n            \"__priority\" !== e && \"__expires\" !== e && !Object.prototype.hasOwnProperty.call(n, e) && r[e] && (n[e] = N_({\n              value: r[e]\n            }, s && {\n              expires: s\n            }));\n          });\n        });\n\n        try {\n          var _e48 = ge(n),\n              _t61 = window.btoa(_e48);\n\n          window.localStorage.setItem(\"websdk_ng_global_parameter\", _t61), vc.debug(\"Caching global parameters \".concat(_e48));\n        } catch (e) {\n          vc.error(\"Error caching global parameters:\", e.message);\n        }\n      }\n    }]);\n\n    return O_;\n  }(Ll);\n\n  function b_(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function D_(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = b_(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = b_(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var k_ =\n  /*#__PURE__*/\n  function (_Ll14) {\n    _inherits(k_, _Ll14);\n\n    function k_(e, t, i, r) {\n      var _this82;\n\n      _classCallCheck(this, k_);\n\n      _this82 = _possibleConstructorReturn(this, _getPrototypeOf(k_).call(this)), _this82.reconnectMode = \"retry\", _this82.reqId = 0, _this82.commandReqId = 0, _this82.handleWebSocketOpen = function () {\n        _this82.reconnectMode = \"retry\", _this82.startPingPong();\n      }, _this82.handleWebSocketMessage = function (e) {\n        if (!e.data) return;\n        var t = JSON.parse(e.data);\n        var i;\n        t.requestId ? _this82.emit(Xe(i = \"@\".concat(t.requestId, \"-\")).call(i, t.sid), t) : _this82.serviceMode === rl.INJECT ? _this82.emit(dl.INJECT_STREAM_STATUS, t) : (iu.workerEvent(_this82.spec.sid, {\n          actionType: \"status\",\n          serverCode: t.code,\n          workerType: _this82.serviceMode === rl.TRANSCODE ? 1 : 2\n        }), _this82.emit(dl.PUBLISH_STREAM_STATUS, t));\n      }, _this82.spec = t, _this82.token = e, _this82.serviceMode = r, _this82.websocket = new xp(\"live-streaming\", i), _this82.websocket.on(il.CONNECTED, _this82.handleWebSocketOpen), _this82.websocket.on(il.ON_MESSAGE, _this82.handleWebSocketMessage), _this82.websocket.on(il.REQUEST_NEW_URLS, function (e, t) {\n        kh(_assertThisInitialized(_assertThisInitialized(_this82)), dl.REQUEST_NEW_ADDRESS).then(e).catch(t);\n      }), _this82.websocket.on(il.RECONNECTING, function () {\n        _this82.websocket.reconnectMode = _this82.reconnectMode;\n      });\n      return _this82;\n    }\n\n    _createClass(k_, [{\n      key: \"init\",\n      value: function init(e) {\n        return this.websocket.init(e);\n      }\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee69(e, t, i, r) {\n          var _this83 = this;\n\n          var n, s, o, a, c, d, l;\n          return _regeneratorRuntime.wrap(function _callee69$(_context69) {\n            while (1) {\n              switch (_context69.prev = _context69.next) {\n                case 0:\n                  this.reqId += 1, \"request\" === e && (this.commandReqId += 1);\n                  n = this.commandReqId, s = this.reqId;\n\n                  if (!(!s || !this.websocket)) {\n                    _context69.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR);\n\n                case 4:\n                  o = D_({\n                    command: e,\n                    sdkVersion: \"4.8.1\" === wc ? \"0.0.1\" : wc,\n                    seq: s,\n                    requestId: s,\n                    allocate: i,\n                    cname: this.spec.cname,\n                    appId: this.spec.appId,\n                    sid: this.spec.sid,\n                    uid: this.spec.uid.toString(),\n                    ts: Math.floor(La() / 1e3)\n                  }, t);\n\n                  if (!(\"closed\" === this.websocket.state)) {\n                    _context69.next = 7;\n                    break;\n                  }\n\n                  throw new Ad(ad.WS_DISCONNECT);\n\n                case 7:\n                  a = function a() {\n                    return new As(function (e, t) {\n                      _this83.websocket.once(il.CLOSED, function () {\n                        return t(new Ad(ad.WS_ABORT));\n                      }), _this83.websocket.once(il.CONNECTED, e);\n                    });\n                  };\n\n                  _context69.t0 = \"connected\" !== this.websocket.state;\n\n                  if (!_context69.t0) {\n                    _context69.next = 12;\n                    break;\n                  }\n\n                  _context69.next = 12;\n                  return a();\n\n                case 12:\n                  o.clientRequest && (o.clientRequest.workerToken = this.token);\n                  c = new As(function (e, t) {\n                    var i;\n\n                    var r = function r() {\n                      t(new Ad(ad.WS_ABORT));\n                    };\n\n                    _this83.websocket.once(il.RECONNECTING, r), _this83.websocket.once(il.CLOSED, r), _this83.once(Xe(i = \"@\".concat(s, \"-\")).call(i, _this83.spec.sid), function (t) {\n                      e(t);\n                    });\n                  });\n                  r && iu.workerEvent(this.spec.sid, D_({}, r, {\n                    requestId: n,\n                    actionType: \"request\",\n                    payload: ge(t.clientRequest),\n                    serverCode: 0,\n                    code: 0\n                  }));\n                  d = La();\n                  this.websocket.sendMessage(o);\n                  l = null;\n                  _context69.prev = 18;\n                  _context69.next = 21;\n                  return c;\n\n                case 21:\n                  l = _context69.sent;\n                  _context69.next = 33;\n                  break;\n\n                case 24:\n                  _context69.prev = 24;\n                  _context69.t1 = _context69[\"catch\"](18);\n\n                  if (!(\"closed\" === this.websocket.state)) {\n                    _context69.next = 28;\n                    break;\n                  }\n\n                  throw _context69.t1;\n\n                case 28:\n                  _context69.next = 30;\n                  return a();\n\n                case 30:\n                  _context69.next = 32;\n                  return this.request(e, t, i);\n\n                case 32:\n                  return _context69.abrupt(\"return\", _context69.sent);\n\n                case 33:\n                  return _context69.abrupt(\"return\", (r && iu.workerEvent(this.spec.sid, D_({}, r, {\n                    requestId: n,\n                    actionType: \"response\",\n                    payload: ge(l.serverResponse),\n                    serverCode: l.code,\n                    success: 200 === l.code,\n                    responseTime: La() - d\n                  })), 200 !== l.code && this.handleResponseError(l), l));\n\n                case 34:\n                case \"end\":\n                  return _context69.stop();\n              }\n            }\n          }, _callee69, this, [[18, 24]]);\n        }));\n\n        function request(_x111, _x112, _x113, _x114) {\n          return _request2.apply(this, arguments);\n        }\n\n        return request;\n      }()\n    }, {\n      key: \"tryNextAddress\",\n      value: function tryNextAddress() {\n        this.reconnectMode = \"tryNext\", this.websocket.reconnect(\"tryNext\");\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e = \"4.8.1\" === wc ? \"0.0.1\" : wc;\n        this.reqId += 1, \"connected\" === this.websocket.state ? (this.websocket.sendMessage({\n          command: \"request\",\n          appId: this.spec.appId,\n          cname: this.spec.cname,\n          uid: this.spec.uid.toString(),\n          sdkVersion: e,\n          sid: this.spec.sid,\n          seq: this.reqId,\n          ts: Math.floor(La() / 1e3),\n          requestId: this.reqId,\n          clientRequest: {\n            command: \"DestroyWorker\"\n          }\n        }), this.websocket.close(!1, !0)) : this.websocket.close(!1), this.pingpongTimer && (window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0);\n      }\n    }, {\n      key: \"handleResponseError\",\n      value: function handleResponseError(e) {\n        switch (e.code) {\n          case Al.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:\n            return void vc.warning(\"live stream response already exists stream\");\n\n          case Al.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:\n          case Al.LIVE_STREAM_RESPONSE_BAD_STREAM:\n          case Al.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:\n            return new Ad(ad.LIVE_STREAMING_INVALID_ARGUMENT, \"\", {\n              code: e.code\n            }).throw();\n\n          case Al.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            throw new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n              retry: !0\n            });\n\n          case Al.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:\n            return new Ad(ad.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED, \"\", {\n              code: e.code\n            }).throw();\n\n          case Al.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:\n            {\n              var _t62 = new Ad(ad.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);\n\n              return this.emit(dl.WARNING, _t62, e.serverResponse.url);\n            }\n\n          case Al.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:\n            {\n              var _t63 = new Ad(ad.LIVE_STREAMING_WARN_FREQUENT_REQUEST);\n\n              return this.emit(dl.WARNING, _t63, e.serverResponse.url);\n            }\n\n          case Al.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:\n            throw new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n              retry: !0\n            });\n\n          case Al.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:\n            return new Ad(ad.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED, \"\", {\n              code: e.code\n            }).throw();\n\n          case Al.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:\n            {\n              var _t64 = new Ad(ad.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);\n\n              return this.emit(dl.WARNING, _t64, e.serverResponse.url);\n            }\n\n          case Al.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:\n            return new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n              code: e.code\n            }).throw();\n\n          case Al.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:\n            throw new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream resource limit\", {\n              retry: !0,\n              changeAddress: !0\n            });\n\n          case Al.LIVE_STREAM_RESPONSE_WORKER_LOST:\n          case Al.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            throw new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              retry: !0,\n              changeAddress: !0\n            });\n\n          case Al.ERROR_FAIL_SEND_MESSAGE:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            if (\"UpdateTranscoding\" === e.serverResponse.command || \"ControlStream\" === e.serverResponse.command) return new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              code: e.code\n            }).throw();\n            throw new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              retry: !0,\n              changeAddress: !0\n            });\n\n          case Al.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n            return new Ad(ad.LIVE_STREAMING_CDN_ERROR, \"\", {\n              code: e.code\n            }).throw();\n        }\n      }\n    }, {\n      key: \"startPingPong\",\n      value: function startPingPong() {\n        var _this84 = this;\n\n        this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(function () {\n          \"connected\" === _this84.websocket.state && _this84.request(\"ping\", {}).catch(Oh);\n        }, 6e3);\n      }\n    }]);\n\n    return k_;\n  }(Ll);\n\n  function L_(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function P_(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = L_(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = L_(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var B_ =\n  /*#__PURE__*/\n  function (_Ll15) {\n    _inherits(B_, _Ll15);\n\n    function B_(e) {\n      var _this85;\n\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : HA;\n      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : HA;\n\n      _classCallCheck(this, B_);\n\n      _this85 = _possibleConstructorReturn(this, _getPrototypeOf(B_).call(this)), _this85.retryTimeout = 1e4, _this85.streamingTasks = new Li(), _this85.isStartingStreamingTask = !1, _this85.taskMutex = new su(\"live-streaming\"), _this85.cancelToken = mc.CancelToken.source(), _this85.injectConfig = P_({}, cl), _this85.injectLoopTimes = 0, _this85.lastTaskId = 1, _this85.statusError = new Li(), _this85.spec = e, _this85.httpRetryConfig = i, _this85.wsRetryConfig = t;\n      return _this85;\n    }\n\n    _createClass(B_, [{\n      key: \"setTranscodingConfig\",\n      value: function () {\n        var _setTranscodingConfig = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee70(e) {\n          var _this86 = this;\n\n          var t, i, r, n, s, o, a, c, d, l, A, u, _e49, h;\n\n          return _regeneratorRuntime.wrap(function _callee70$(_context70) {\n            while (1) {\n              switch (_context70.prev = _context70.next) {\n                case 0:\n                  i = P_({}, al, {}, e);\n                  66 !== i.videoCodecProfile && 77 !== i.videoCodecProfile && 100 !== i.videoCodecProfile && (vc.debug(Xe(r = \"[\".concat(this.spec.clientId, \"] set transcoding config, fix video codec profile: \")).call(r, i.videoCodecProfile, \" -> 100\")), i.videoCodecProfile = 100);\n                  (i.transcodingUsers || (i.transcodingUsers = i.userConfigs), i.transcodingUsers) && (i.transcodingUsers = Es(n = i.transcodingUsers).call(n, function (e) {\n                    return P_({}, nl, {}, e, {\n                      zOrder: e.zOrder ? e.zOrder + 1 : 1\n                    });\n                  }));\n                  !function (e) {\n                    var t, i;\n                    fd(e.width) || pd(e.width, \"config.width\", 0, 1e4), fd(e.height) || pd(e.height, \"config.height\", 0, 1e4), fd(e.videoBitrate) || pd(e.videoBitrate, \"config.videoBitrate\", 1, 1e6), fd(e.videoFrameRate) || pd(e.videoFrameRate, \"config.videoFrameRate\"), fd(e.lowLatency) || ud(e.lowLatency, \"config.lowLatency\"), fd(e.audioSampleRate) || hd(e.audioSampleRate, \"config.audioSampleRate\", [32e3, 44100, 48e3]), fd(e.audioBitrate) || pd(e.audioBitrate, \"config.audioBitrate\", 1, 128), fd(e.audioChannels) || hd(e.audioChannels, \"config.audioChannels\", [1, 2, 3, 4, 5]), fd(e.videoGop) || pd(e.videoGop, \"config.videoGop\"), fd(e.videoCodecProfile) || hd(e.videoCodecProfile, \"config.videoCodecProfile\", [66, 77, 100]), fd(e.userCount) || pd(e.userCount, \"config.userCount\", 0, 17), fd(e.backgroundColor) || pd(e.backgroundColor, \"config.backgroundColor\", 0, 16777215), fd(e.userConfigExtraInfo) || Ed(e.userConfigExtraInfo, \"config.userConfigExtraInfo\", 0, 4096, !1), e.transcodingUsers && !fd(e.transcodingUsers) && (gd(e.transcodingUsers, \"config.transcodingUsers\"), Xi(t = e.transcodingUsers).call(t, function (e, t) {\n                      Id(e.uid), fd(e.x) || pd(e.x, \"transcodingUser[\".concat(t, \"].x\"), 0, 1e4), fd(e.y) || pd(e.y, \"transcodingUser[\".concat(t, \"].y\"), 0, 1e4), fd(e.width) || pd(e.width, \"transcodingUser[\".concat(t, \"].width\"), 0, 1e4), fd(e.height) || pd(e.height, \"transcodingUser[\".concat(t, \"].height\"), 0, 1e4), fd(e.zOrder) || pd(e.zOrder - 1, \"transcodingUser[\".concat(t, \"].zOrder\"), 0, 100), fd(e.alpha) || pd(e.alpha, \"transcodingUser[\".concat(t, \"].alpha\"), 0, 1, !1);\n                    })), fd(e.watermark) || ol(e.watermark, \"watermark\"), fd(e.backgroundImage) || ol(e.backgroundImage, \"backgroundImage\"), e.images && !fd(e.images) && (gd(e.images, \"config.images\"), Xi(i = e.images).call(i, function (e, t) {\n                      ol(e, \"images[\".concat(t, \"]\"));\n                    }));\n                  }(i);\n                  s = [];\n                  i.images && s.push.apply(s, _toConsumableArray(Es(o = i.images).call(o, function (e) {\n                    return P_({}, sl, {}, e, {\n                      zOrder: 255\n                    });\n                  })));\n                  (i.backgroundImage && (s.push(P_({}, sl, {}, i.backgroundImage, {\n                    zOrder: 0\n                  })), delete i.backgroundImage), i.watermark && (s.push(P_({}, sl, {}, i.watermark, {\n                    zOrder: 255\n                  })), delete i.watermark), i.images = s, i.transcodingUsers) && (i.userConfigs = Es(a = i.transcodingUsers).call(a, function (e) {\n                    return P_({}, e);\n                  }), i.userCount = i.transcodingUsers.length, delete i.transcodingUsers);\n                  c = Es(t = i.userConfigs || []).call(t, function (e) {\n                    return \"number\" == typeof e.uid ? As.resolve(e.uid) : C_(e.uid, _this86.spec, _this86.cancelToken.token, _this86.httpRetryConfig);\n                  });\n                  _context70.next = 10;\n                  return As.all(c);\n\n                case 10:\n                  d = _context70.sent;\n\n                  if (!(Xi(d).call(d, function (e, t) {\n                    i.userConfigs && i.userConfigs[t] && (i.userConfigs[t].uid = e);\n                  }), this.transcodingConfig = i, this.connection)) {\n                    _context70.next = 24;\n                    break;\n                  }\n\n                  _context70.prev = 12;\n                  _context70.next = 15;\n                  return this.connection.request(\"request\", {\n                    clientRequest: {\n                      command: \"UpdateTranscoding\",\n                      transcodingConfig: this.transcodingConfig\n                    }\n                  }, !1, {\n                    command: \"UpdateTranscoding\",\n                    workerType: 1,\n                    requestByUser: !0,\n                    tid: Es(l = BA(Xh(A = this.streamingTasks).call(A))).call(l, function (e) {\n                      return e.taskId;\n                    }).join(\"#\")\n                  });\n\n                case 15:\n                  _e49 = _context70.sent;\n                  vc.debug(Xe(u = \"[\".concat(this.spec.clientId, \"] update live transcoding config success, code: \")).call(u, _e49.code, \", config:\"), ge(this.transcodingConfig));\n                  _context70.next = 24;\n                  break;\n\n                case 19:\n                  _context70.prev = 19;\n                  _context70.t0 = _context70[\"catch\"](12);\n\n                  if (!(!_context70.t0.data || !_context70.t0.data.retry)) {\n                    _context70.next = 23;\n                    break;\n                  }\n\n                  throw _context70.t0;\n\n                case 23:\n                  _context70.t0.data.changeAddress && this.connection.tryNextAddress(), Xi(h = this.streamingTasks).call(h, function (t) {\n                    vc.warning(\"[\".concat(_this86.spec.clientId, \"] live streaming receive error\"), _context70.t0.toString(), \"try to republish\", t.url), _this86.startLiveStreamingTask(t.url, t.mode, _context70.t0).then(function () {\n                      var e;\n                      vc.debug(Xe(e = \"[\".concat(_this86.spec.clientId, \"] live streaming republish \")).call(e, t.url, \" success\"));\n                    }).catch(function (e) {\n                      vc.error(\"[\".concat(_this86.spec.clientId, \"] live streaming republish failed\"), t.url, e.toString()), _this86.onLiveStreamError && _this86.onLiveStreamError(t.url, e);\n                    });\n                  });\n\n                case 24:\n                case \"end\":\n                  return _context70.stop();\n              }\n            }\n          }, _callee70, this, [[12, 19]]);\n        }));\n\n        function setTranscodingConfig(_x115) {\n          return _setTranscodingConfig.apply(this, arguments);\n        }\n\n        return setTranscodingConfig;\n      }()\n    }, {\n      key: \"setInjectStreamConfig\",\n      value: function setInjectStreamConfig(e, t) {\n        this.injectConfig = er({}, this.injectConfig, e), this.injectLoopTimes = t;\n      }\n    }, {\n      key: \"startLiveStreamingTask\",\n      value: function () {\n        var _startLiveStreamingTask = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee71(e, t, i) {\n          var _this87 = this;\n\n          var r, n, s, o, a, c, d, l, _r26, _n15;\n\n          return _regeneratorRuntime.wrap(function _callee71$(_context71) {\n            while (1) {\n              switch (_context71.prev = _context71.next) {\n                case 0:\n                  if (!(Vs(r = BA(Xh(n = this.streamingTasks).call(n))).call(r, function (e) {\n                    return e.mode === rl.INJECT;\n                  }) && t === rl.INJECT)) {\n                    _context71.next = 2;\n                    break;\n                  }\n\n                  return _context71.abrupt(\"return\", new Ad(ad.LIVE_STREAMING_TASK_CONFLICT, \"inject stream over limit\").throw());\n\n                case 2:\n                  if (!(!this.transcodingConfig && t === rl.TRANSCODE)) {\n                    _context71.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");\n\n                case 4:\n                  a = {\n                    command: \"PublishStream\",\n                    ts: La(),\n                    url: e,\n                    uid: this.spec.uid.toString(),\n                    autoDestroyTime: 100,\n                    acceptImageTimeout: !0\n                  };\n                  vc.debug(Xe(s = Xe(o = \"[\".concat(this.spec.clientId, \"] start live streaming \")).call(o, e, \", mode: \")).call(s, t));\n                  _context71.next = 8;\n                  return this.taskMutex.lock();\n\n                case 8:\n                  c = _context71.sent;\n\n                  if (!(!this.connection && i)) {\n                    _context71.next = 11;\n                    break;\n                  }\n\n                  return _context71.abrupt(\"return\", void c());\n\n                case 11:\n                  if (!(this.streamingTasks.get(e) && !i)) {\n                    _context71.next = 13;\n                    break;\n                  }\n\n                  return _context71.abrupt(\"return\", (c(), new Ad(ad.LIVE_STREAMING_TASK_CONFLICT).throw()));\n\n                case 13:\n                  _context71.prev = 13;\n                  _context71.t0 = this.connection;\n\n                  if (_context71.t0) {\n                    _context71.next = 19;\n                    break;\n                  }\n\n                  _context71.next = 18;\n                  return this.connect(t);\n\n                case 18:\n                  this.connection = _context71.sent;\n\n                case 19:\n                  _context71.next = 24;\n                  break;\n\n                case 21:\n                  _context71.prev = 21;\n                  _context71.t1 = _context71[\"catch\"](13);\n                  throw c(), _context71.t1;\n\n                case 24:\n                  _context71.t2 = t;\n                  _context71.next = _context71.t2 === rl.TRANSCODE ? 27 : _context71.t2 === rl.RAW ? 29 : _context71.t2 === rl.INJECT ? 30 : 31;\n                  break;\n\n                case 27:\n                  a.transcodingConfig = P_({}, this.transcodingConfig);\n                  return _context71.abrupt(\"break\", 31);\n\n                case 29:\n                  return _context71.abrupt(\"break\", 31);\n\n                case 30:\n                  a = {\n                    cname: this.spec.cname,\n                    command: \"InjectStream\",\n                    sid: this.spec.sid,\n                    transcodingConfig: this.injectConfig,\n                    ts: La(),\n                    url: e,\n                    loopTimes: this.injectLoopTimes\n                  };\n\n                case 31:\n                  this.uapResponse && this.uapResponse.vid && (a.vid = this.uapResponse.vid), this.isStartingStreamingTask = !0;\n                  d = this.lastTaskId++;\n                  _context71.prev = 33;\n                  _r26 = new As(function (t, r) {\n                    Th(_this87.retryTimeout).then(function () {\n                      if (i) return r(i);\n\n                      var t = _this87.statusError.get(e);\n\n                      return t ? (_this87.statusError.delete(e), r(t)) : void 0;\n                    });\n                  });\n                  _context71.next = 37;\n                  return As.race([this.connection.request(\"request\", {\n                    clientRequest: a\n                  }, !0, {\n                    url: e,\n                    command: \"PublishStream\",\n                    workerType: t === rl.TRANSCODE ? 1 : 2,\n                    requestByUser: !i,\n                    tid: d.toString()\n                  }), _r26]);\n\n                case 37:\n                  _n15 = _context71.sent;\n                  this.isStartingStreamingTask = !1, vc.debug(Xe(l = \"[\".concat(this.spec.clientId, \"] live streaming started, code: \")).call(l, _n15.code)), this.streamingTasks.set(e, {\n                    clientRequest: a,\n                    mode: t,\n                    url: e,\n                    taskId: d\n                  }), c();\n                  _context71.next = 56;\n                  break;\n\n                case 41:\n                  _context71.prev = 41;\n                  _context71.t3 = _context71[\"catch\"](33);\n\n                  if (!(c(), this.isStartingStreamingTask = !1, !_context71.t3.data || !_context71.t3.data.retry || i)) {\n                    _context71.next = 45;\n                    break;\n                  }\n\n                  throw _context71.t3;\n\n                case 45:\n                  if (!_context71.t3.data.changeAddress) {\n                    _context71.next = 52;\n                    break;\n                  }\n\n                  this.connection.tryNextAddress();\n                  _context71.next = 49;\n                  return this.startLiveStreamingTask(e, t, _context71.t3);\n\n                case 49:\n                  _context71.t4 = _context71.sent;\n                  _context71.next = 55;\n                  break;\n\n                case 52:\n                  _context71.next = 54;\n                  return this.startLiveStreamingTask(e, t, _context71.t3);\n\n                case 54:\n                  _context71.t4 = _context71.sent;\n\n                case 55:\n                  return _context71.abrupt(\"return\", _context71.t4);\n\n                case 56:\n                case \"end\":\n                  return _context71.stop();\n              }\n            }\n          }, _callee71, this, [[13, 21], [33, 41]]);\n        }));\n\n        function startLiveStreamingTask(_x116, _x117, _x118) {\n          return _startLiveStreamingTask.apply(this, arguments);\n        }\n\n        return startLiveStreamingTask;\n      }()\n    }, {\n      key: \"stopLiveStreamingTask\",\n      value: function stopLiveStreamingTask(e) {\n        var _this88 = this;\n\n        return new As(function (t, i) {\n          var r = _this88.streamingTasks.get(e);\n\n          if (!r || !_this88.connection) return new Ad(ad.UNEXPECTED_ERROR, \"can not find streaming task to stop\").throw();\n          var n = r.mode;\n          r.abortTask = function () {\n            vc.debug(\"[\".concat(_this88.spec.clientId, \"] stop live streaming success(worker exception)\")), _this88.streamingTasks.delete(e), t();\n          }, _this88.connection.request(\"request\", {\n            clientRequest: {\n              command: n === rl.INJECT ? \"UninjectStream\" : \"UnpublishStream\",\n              url: r.url\n            }\n          }, !1, {\n            url: e,\n            command: \"UnPublishStream\",\n            workerType: n === rl.TRANSCODE ? 1 : 2,\n            requestByUser: !0,\n            tid: (_this88.lastTaskId++).toString()\n          }).then(function (i) {\n            var r;\n            vc.debug(Xe(r = \"[\".concat(_this88.spec.clientId, \"] stop live streaming success, code: \")).call(r, i.code)), _this88.streamingTasks.delete(e), 0 === _this88.streamingTasks.size && n !== rl.INJECT && (_this88.connection && _this88.connection.close(), _this88.connection = void 0), t(), n === rl.INJECT && _this88.onInjectStatusChange && _this88.onInjectStatusChange(5, _this88.spec.uid, e);\n          }).catch(i);\n        });\n      }\n    }, {\n      key: \"controlInjectStream\",\n      value: function () {\n        var _controlInjectStream = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee72(e, t, i, r) {\n          var n;\n          return _regeneratorRuntime.wrap(function _callee72$(_context72) {\n            while (1) {\n              switch (_context72.prev = _context72.next) {\n                case 0:\n                  n = this.streamingTasks.get(e);\n\n                  if (!(!n || !this.connection || n.mode !== rl.INJECT)) {\n                    _context72.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not find inject stream task to control\");\n\n                case 3:\n                  _context72.next = 5;\n                  return this.connection.request(\"request\", {\n                    clientRequest: {\n                      command: \"ControlStream\",\n                      url: e,\n                      control: t,\n                      audioVolume: i,\n                      position: r\n                    }\n                  });\n\n                case 5:\n                  return _context72.abrupt(\"return\", _context72.sent.serverResponse);\n\n                case 6:\n                case \"end\":\n                  return _context72.stop();\n              }\n            }\n          }, _callee72, this);\n        }));\n\n        function controlInjectStream(_x119, _x120, _x121, _x122) {\n          return _controlInjectStream.apply(this, arguments);\n        }\n\n        return controlInjectStream;\n      }()\n    }, {\n      key: \"resetAllTask\",\n      value: function resetAllTask() {\n        var _this89 = this;\n\n        var e;\n        var t = BA(Xh(e = this.streamingTasks).call(e));\n        this.terminate();\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n          var _loop = function _loop() {\n            var e = _step5.value;\n\n            _this89.startLiveStreamingTask(e.url, e.mode).catch(function (t) {\n              _this89.onLiveStreamError && _this89.onLiveStreamError(e.url, t);\n            });\n          };\n\n          for (var _iterator5 = t[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            _loop();\n          }\n        } catch (err) {\n          _didIteratorError5 = true;\n          _iteratorError5 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n              _iterator5.return();\n            }\n          } finally {\n            if (_didIteratorError5) {\n              throw _iteratorError5;\n            }\n          }\n        }\n      }\n    }, {\n      key: \"terminate\",\n      value: function terminate() {\n        this.cancelToken && this.cancelToken.cancel(), this.streamingTasks = new Li(), this.isStartingStreamingTask = !1, this.statusError = new Li(), this.cancelToken = mc.CancelToken.source(), this.uapResponse = void 0, this.connection && this.connection.close(), this.connection = void 0;\n      }\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee73(e) {\n          var _this90 = this;\n\n          var t;\n          return _regeneratorRuntime.wrap(function _callee73$(_context73) {\n            while (1) {\n              switch (_context73.prev = _context73.next) {\n                case 0:\n                  if (!this.connection) {\n                    _context73.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"live streaming connection has already connected\");\n\n                case 2:\n                  _context73.next = 4;\n                  return kh(this, ll.REQUEST_WORKER_MANAGER_LIST, e);\n\n                case 4:\n                  t = _context73.sent;\n                  this.uapResponse = t;\n                  this.connection = new k_(t.workerToken, this.spec, this.wsRetryConfig, e);\n                  this.connection.on(dl.WARNING, function (e, t) {\n                    return _this90.onLiveStreamWarning && _this90.onLiveStreamWarning(t, e);\n                  });\n                  this.connection.on(dl.PUBLISH_STREAM_STATUS, function (e) {\n                    return _this90.handlePublishStreamServer(e);\n                  });\n                  this.connection.on(dl.INJECT_STREAM_STATUS, function (e) {\n                    return _this90.handleInjectStreamServerStatus(e);\n                  });\n                  this.connection.on(dl.REQUEST_NEW_ADDRESS, function (t, i) {\n                    if (!_this90.connection) return i(new Ad(ad.UNEXPECTED_ERROR, \"can not get new live streaming address list\"));\n                    kh(_this90, ll.REQUEST_WORKER_MANAGER_LIST, e).then(function (e) {\n                      _this90.uapResponse = e, t(e.addressList);\n                    }).catch(i);\n                  });\n                  _context73.next = 13;\n                  return this.connection.init(t.addressList);\n\n                case 13:\n                  return _context73.abrupt(\"return\", this.connection);\n\n                case 14:\n                case \"end\":\n                  return _context73.stop();\n              }\n            }\n          }, _callee73, this);\n        }));\n\n        function connect(_x123) {\n          return _connect.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"handlePublishStreamServer\",\n      value: function handlePublishStreamServer(e) {\n        var _this91 = this;\n\n        var t = e.serverStatus && e.serverStatus.url || \"empty_url\",\n            i = this.streamingTasks.get(t),\n            r = e.reason;\n\n        switch (e.code) {\n          case Al.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n          case Al.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n            {\n              var _r27 = new Ad(ad.LIVE_STREAMING_CDN_ERROR, \"\", {\n                code: e.code\n              });\n\n              if (i) return vc.error(_r27.toString()), this.onLiveStreamError && this.onLiveStreamError(t, _r27);\n              if (!this.isStartingStreamingTask) return;\n              this.statusError.set(t, _r27);\n            }\n\n          case Al.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:\n            {\n              var _e50 = new Ad(ad.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE, r);\n\n              return this.onLiveStreamWarning && this.onLiveStreamWarning(t, _e50);\n            }\n\n          case Al.LIVE_STREAM_RESPONSE_WORKER_LOST:\n          case Al.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n            {\n              var n;\n              if (!this.connection) return;\n              this.connection.tryNextAddress();\n\n              var _t65 = BA(Xh(n = this.streamingTasks).call(n));\n\n              var _iteratorNormalCompletion6 = true;\n              var _didIteratorError6 = false;\n              var _iteratorError6 = undefined;\n\n              try {\n                var _loop2 = function _loop2() {\n                  var i = _step6.value;\n                  i.abortTask ? i.abortTask() : (vc.warning(\"[\".concat(_this91.spec.clientId, \"] publish stream status code\"), e.code, \"try to republish\", i.url), _this91.startLiveStreamingTask(i.url, i.mode, new Ad(ad.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n                    code: e.code\n                  })).then(function () {\n                    vc.debug(\"[\".concat(_this91.spec.clientId, \"] republish live stream success\"), i.url);\n                  }).catch(function (e) {\n                    vc.error(e.toString()), _this91.onLiveStreamError && _this91.onLiveStreamError(i.url, e);\n                  }));\n                };\n\n                for (var _iterator6 = _t65[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                  _loop2();\n                }\n              } catch (err) {\n                _didIteratorError6 = true;\n                _iteratorError6 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n                    _iterator6.return();\n                  }\n                } finally {\n                  if (_didIteratorError6) {\n                    throw _iteratorError6;\n                  }\n                }\n              }\n\n              return;\n            }\n        }\n      }\n    }, {\n      key: \"handleInjectStreamServerStatus\",\n      value: function handleInjectStreamServerStatus(e) {\n        var t = Number(e.uid),\n            i = e.serverStatus && e.serverStatus.url;\n\n        switch (e.code) {\n          case 200:\n            return void (this.onInjectStatusChange && this.onInjectStatusChange(0, t, i));\n\n          case 451:\n            return this.onInjectStatusChange && this.onInjectStatusChange(1, t, i), void this.streamingTasks.delete(i);\n\n          case 453:\n            return this.onInjectStatusChange && this.onInjectStatusChange(2, t, i), void this.streamingTasks.delete(i);\n\n          case 470:\n            return this.onInjectStatusChange && this.onInjectStatusChange(10, t, i), void this.streamingTasks.delete(i);\n\n          case 499:\n            return this.onInjectStatusChange && this.onInjectStatusChange(3, t, i), void this.streamingTasks.delete(i);\n\n          default:\n            return void vc.debug(\"inject stream server status\", e);\n        }\n      }\n    }, {\n      key: \"hasUrl\",\n      value: function hasUrl(e) {\n        return this.streamingTasks.has(e);\n      }\n    }]);\n\n    return B_;\n  }(Ll);\n\n  var M_ =\n  /*#__PURE__*/\n  function () {\n    function M_() {\n      _classCallCheck(this, M_);\n\n      this.destChannelMediaInfos = new Li();\n    }\n\n    _createClass(M_, [{\n      key: \"setSrcChannelInfo\",\n      value: function setSrcChannelInfo(e) {\n        ml(e), this.srcChannelMediaInfo = e;\n      }\n    }, {\n      key: \"addDestChannelInfo\",\n      value: function addDestChannelInfo(e) {\n        ml(e), this.destChannelMediaInfos.set(e.channelName, e);\n      }\n    }, {\n      key: \"removeDestChannelInfo\",\n      value: function removeDestChannelInfo(e) {\n        _d(e), this.destChannelMediaInfos.delete(e);\n      }\n    }, {\n      key: \"getSrcChannelMediaInfo\",\n      value: function getSrcChannelMediaInfo() {\n        return this.srcChannelMediaInfo;\n      }\n    }, {\n      key: \"getDestChannelMediaInfo\",\n      value: function getDestChannelMediaInfo() {\n        return this.destChannelMediaInfos;\n      }\n    }]);\n\n    return M_;\n  }();\n\n  function U_(e) {\n    if (!(e instanceof M_)) {\n      return new Ad(ad.INVALID_PARAMS, \"Config should be instance of [ChannelMediaRelayConfiguration]\").throw();\n    }\n\n    var t = e.getSrcChannelMediaInfo(),\n        i = e.getDestChannelMediaInfo();\n\n    if (!t) {\n      return new Ad(ad.INVALID_PARAMS, \"srcChannelMediaInfo should not be empty\").throw();\n    }\n\n    if (0 === i.size) {\n      return new Ad(ad.INVALID_PARAMS, \"destChannelMediaInfo should not be empty\").throw();\n    }\n  }\n\n  var Q_ =\n  /*#__PURE__*/\n  function (_Ll16) {\n    _inherits(Q_, _Ll16);\n\n    function Q_(e, t, i) {\n      var _this92;\n\n      _classCallCheck(this, Q_);\n\n      _this92 = _possibleConstructorReturn(this, _getPrototypeOf(Q_).call(this)), _this92.requestId = 1, _this92.onOpen = function () {\n        _this92.emit(\"open\"), _this92.startHeartBeatCheck();\n      }, _this92.onClose = function (e) {\n        _this92.emit(\"close\"), _this92.dispose();\n      }, _this92.onMessage = function (e) {\n        var t = JSON.parse(e.data);\n        if (!t || \"serverResponse\" !== t.command || !t.requestId) return t && \"serverStatus\" === t.command && t.serverStatus && t.serverStatus.command ? (_this92.emit(\"status\", t.serverStatus), void _this92.emit(t.serverStatus.command, t.serverStatus)) : void 0;\n\n        _this92.emit(\"req_\".concat(t.requestId), t);\n      }, _this92.joinInfo = e, _this92.clientId = t, _this92.ws = new xp(\"cross-channel-\".concat(_this92.clientId), i), _this92.ws.on(il.RECONNECTING, function () {\n        _this92.ws.reconnectMode = \"retry\", _this92.emit(\"reconnecting\");\n      }), _this92.ws.on(il.CONNECTED, _this92.onOpen), _this92.ws.on(il.ON_MESSAGE, _this92.onMessage), _this92.ws.on(il.CLOSED, _this92.onClose);\n      return _this92;\n    }\n\n    _createClass(Q_, [{\n      key: \"isConnect\",\n      value: function isConnect() {\n        return \"connected\" === this.ws.state;\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var t = this.requestId++;\n        return e.requestId = t, e.seq = t, this.ws.sendMessage(e), t;\n      }\n    }, {\n      key: \"waitStatus\",\n      value: function waitStatus(e) {\n        var _this93 = this;\n\n        return new As(function (t, i) {\n          var r = window.setTimeout(function () {\n            i(new Ad(ad.TIMEOUT, \"wait status timeout, status: \".concat(e)));\n          }, 5e3);\n          _this93.once(e, function (n) {\n            window.clearTimeout(r), n.state && 0 !== n.state ? i(new Ad(ad.CROSS_CHANNEL_WAIT_STATUS_ERROR, \"wait status error, status: \".concat(e))) : t(void 0);\n          }), _this93.once(\"dispose\", function () {\n            window.clearTimeout(r), i(new Ad(ad.WS_ABORT));\n          });\n        });\n      }\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee74(e) {\n          var _this94 = this;\n\n          var t, i, r, n;\n          return _regeneratorRuntime.wrap(function _callee74$(_context74) {\n            while (1) {\n              switch (_context74.prev = _context74.next) {\n                case 0:\n                  if (!(\"closed\" === this.ws.state)) {\n                    _context74.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.WS_DISCONNECT);\n\n                case 2:\n                  t = function t() {\n                    return new As(function (e, t) {\n                      _this94.ws.once(il.CLOSED, function () {\n                        return t(new Ad(ad.WS_ABORT));\n                      }), _this94.ws.once(il.CONNECTED, e);\n                    });\n                  };\n\n                  _context74.t0 = \"connected\" !== this.ws.state;\n\n                  if (!_context74.t0) {\n                    _context74.next = 7;\n                    break;\n                  }\n\n                  _context74.next = 7;\n                  return t();\n\n                case 7:\n                  i = this.sendMessage(e);\n                  r = new As(function (e, t) {\n                    var r = function r() {\n                      t(new Ad(ad.WS_ABORT));\n                    };\n\n                    _this94.ws.once(il.RECONNECTING, r), _this94.ws.once(il.CLOSED, r), _this94.once(\"req_\".concat(i), e), Th(3e3).then(function () {\n                      _this94.removeAllListeners(\"req_\".concat(i)), _this94.ws.off(il.RECONNECTING, r), _this94.ws.off(il.CLOSED, r), t(new Ad(ad.TIMEOUT, \"cross channel ws request timeout\"));\n                    });\n                  });\n                  _context74.next = 11;\n                  return r;\n\n                case 11:\n                  n = _context74.sent;\n\n                  if (!(!n || 200 !== n.code)) {\n                    _context74.next = 14;\n                    break;\n                  }\n\n                  throw new Ad(ad.CROSS_CHANNEL_SERVER_ERROR_RESPONSE, \"response: \".concat(ge(n)));\n\n                case 14:\n                  return _context74.abrupt(\"return\", n);\n\n                case 15:\n                case \"end\":\n                  return _context74.stop();\n              }\n            }\n          }, _callee74, this);\n        }));\n\n        function request(_x124) {\n          return _request3.apply(this, arguments);\n        }\n\n        return request;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee75(e) {\n          return _regeneratorRuntime.wrap(function _callee75$(_context75) {\n            while (1) {\n              switch (_context75.prev = _context75.next) {\n                case 0:\n                  this.ws.removeAllListeners(il.REQUEST_NEW_URLS);\n                  this.ws.on(il.REQUEST_NEW_URLS, function (t) {\n                    t(e);\n                  });\n                  _context75.next = 4;\n                  return this.ws.init(e);\n\n                case 4:\n                case \"end\":\n                  return _context75.stop();\n              }\n            }\n          }, _callee75, this);\n        }));\n\n        function connect(_x125) {\n          return _connect2.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.clearHeartBeatCheck(), this.emit(\"dispose\"), this.removeAllListeners(), this.ws.close();\n      }\n    }, {\n      key: \"sendPing\",\n      value: function sendPing(e) {\n        var t = this.requestId++;\n        return e.requestId = t, this.ws.sendMessage(e), t;\n      }\n    }, {\n      key: \"startHeartBeatCheck\",\n      value: function startHeartBeatCheck() {\n        var _this95 = this;\n\n        this.heartBeatTimer = window.setInterval(function () {\n          _this95.sendPing({\n            command: \"ping\",\n            appId: _this95.joinInfo.appId,\n            cname: _this95.joinInfo.cname,\n            uid: _this95.joinInfo.uid.toString(),\n            sid: _this95.joinInfo.sid,\n            ts: +new Date(),\n            requestId: 0\n          });\n        }, 3e3);\n      }\n    }, {\n      key: \"clearHeartBeatCheck\",\n      value: function clearHeartBeatCheck() {\n        window.clearInterval(this.heartBeatTimer), this.heartBeatTimer = void 0;\n      }\n    }]);\n\n    return Q_;\n  }(Ll);\n\n  var F_ =\n  /*#__PURE__*/\n  function (_Ll17) {\n    _inherits(F_, _Ll17);\n\n    function F_(e, t, i, r) {\n      var _this96;\n\n      _classCallCheck(this, F_);\n\n      _this96 = _possibleConstructorReturn(this, _getPrototypeOf(F_).call(this)), _this96.cancelToken = mc.CancelToken.source(), _this96.requestId = 0, _this96._state = \"RELAY_STATE_IDLE\", _this96.errorCode = \"RELAY_OK\", _this96.onStatus = function (e) {\n        var t;\n        vc.debug(Xe(t = \"[\".concat(_this96.clientId, \"] ChannelMediaStatus: \")).call(t, ge(e))), e && e.command && (\"onAudioPacketReceived\" === e.command && _this96.emit(\"event\", \"PACKET_RECEIVED_AUDIO_FROM_SRC\"), \"onVideoPacketReceived\" === e.command && _this96.emit(\"event\", \"PACKET_RECEIVED_VIDEO_FROM_SRC\"), \"onSrcTokenPrivilegeDidExpire\" === e.command && (_this96.errorCode = \"SRC_TOKEN_EXPIRED\", _this96.state = \"RELAY_STATE_FAILURE\"), \"onDestTokenPrivilegeDidExpire\" === e.command && (_this96.errorCode = \"DEST_TOKEN_EXPIRED\", _this96.state = \"RELAY_STATE_FAILURE\"));\n      }, _this96.onReconnect =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee76() {\n        return _regeneratorRuntime.wrap(function _callee76$(_context76) {\n          while (1) {\n            switch (_context76.prev = _context76.next) {\n              case 0:\n                vc.debug(\"[\".concat(_this96.clientId, \"] ChannelMediaSocket disconnect, reconnecting\")), _this96.emit(\"event\", \"NETWORK_DISCONNECTED\"), _this96.state = \"RELAY_STATE_IDLE\", _this96.prevChannelMediaConfig && _this96.sendStartRelayMessage(_this96.prevChannelMediaConfig).catch(function (e) {\n                  \"RELAY_STATE_IDLE\" !== _this96.state && (vc.error(\"auto restart channel media relay failed\", e.toString()), _this96.errorCode = \"SERVER_CONNECTION_LOST\", _this96.state = \"RELAY_STATE_FAILURE\");\n                });\n\n              case 1:\n              case \"end\":\n                return _context76.stop();\n            }\n          }\n        }, _callee76, this);\n      })), _this96.joinInfo = e, _this96.clientId = t, _this96.signal = new Q_(_this96.joinInfo, _this96.clientId, i), _this96.httpRetryConfig = r;\n      return _this96;\n    }\n\n    _createClass(F_, [{\n      key: \"startChannelMediaRelay\",\n      value: function () {\n        var _startChannelMediaRelay = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee77(e) {\n          return _regeneratorRuntime.wrap(function _callee77$(_context77) {\n            while (1) {\n              switch (_context77.prev = _context77.next) {\n                case 0:\n                  if (!(\"RELAY_STATE_IDLE\" !== this.state)) {\n                    _context77.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION);\n\n                case 2:\n                  this.state = \"RELAY_STATE_CONNECTING\";\n                  _context77.next = 5;\n                  return this.connect();\n\n                case 5:\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: connect success\"));\n                  _context77.prev = 6;\n                  _context77.next = 9;\n                  return this.sendStartRelayMessage(e);\n\n                case 9:\n                  _context77.next = 20;\n                  break;\n\n                case 11:\n                  _context77.prev = 11;\n                  _context77.t0 = _context77[\"catch\"](6);\n\n                  if (!(_context77.t0.data && _context77.t0.data.serverResponse && \"SetSourceChannel\" === _context77.t0.data.serverResponse.command)) {\n                    _context77.next = 15;\n                    break;\n                  }\n\n                  throw new Ad(ad.CROSS_CHANNEL_FAILED_JOIN_SRC);\n\n                case 15:\n                  if (!(_context77.t0.data && _context77.t0.data.serverResponse && \"SetDestChannelStatus\" === _context77.t0.serverResponse.command)) {\n                    _context77.next = 17;\n                    break;\n                  }\n\n                  throw new Ad(ad.CROSS_CHANNEL_FAILED_JOIN_DEST);\n\n                case 17:\n                  if (!(_context77.t0.data && _context77.t0.data.serverResponse && \"StartPacketTransfer\" === _context77.t0.serverResponse.command)) {\n                    _context77.next = 19;\n                    break;\n                  }\n\n                  throw new Ad(ad.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);\n\n                case 19:\n                  throw _context77.t0;\n\n                case 20:\n                  this.prevChannelMediaConfig = e;\n\n                case 21:\n                case \"end\":\n                  return _context77.stop();\n              }\n            }\n          }, _callee77, this, [[6, 11]]);\n        }));\n\n        function startChannelMediaRelay(_x126) {\n          return _startChannelMediaRelay.apply(this, arguments);\n        }\n\n        return startChannelMediaRelay;\n      }()\n    }, {\n      key: \"updateChannelMediaRelay\",\n      value: function () {\n        var _updateChannelMediaRelay = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee78(e) {\n          return _regeneratorRuntime.wrap(function _callee78$(_context78) {\n            while (1) {\n              switch (_context78.prev = _context78.next) {\n                case 0:\n                  if (!(\"RELAY_STATE_RUNNING\" !== this.state)) {\n                    _context78.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION);\n\n                case 2:\n                  _context78.next = 4;\n                  return this.sendUpdateMessage(e);\n\n                case 4:\n                  this.prevChannelMediaConfig = e;\n\n                case 5:\n                case \"end\":\n                  return _context78.stop();\n              }\n            }\n          }, _callee78, this);\n        }));\n\n        function updateChannelMediaRelay(_x127) {\n          return _updateChannelMediaRelay.apply(this, arguments);\n        }\n\n        return updateChannelMediaRelay;\n      }()\n    }, {\n      key: \"stopChannelMediaRelay\",\n      value: function () {\n        var _stopChannelMediaRelay = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee79() {\n          return _regeneratorRuntime.wrap(function _callee79$(_context79) {\n            while (1) {\n              switch (_context79.prev = _context79.next) {\n                case 0:\n                  _context79.next = 2;\n                  return this.sendStopRelayMessage();\n\n                case 2:\n                  vc.debug(\"[\".concat(this.clientId, \"] stopChannelMediaRelay: send stop message success\"));\n                  this.state = \"RELAY_STATE_IDLE\";\n                  this.dispose();\n\n                case 5:\n                case \"end\":\n                  return _context79.stop();\n              }\n            }\n          }, _callee79, this);\n        }));\n\n        function stopChannelMediaRelay() {\n          return _stopChannelMediaRelay.apply(this, arguments);\n        }\n\n        return stopChannelMediaRelay;\n      }()\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        vc.debug(\"[\".concat(this.clientId, \"] disposeChannelMediaRelay\")), this.cancelToken.cancel(), this.cancelToken = mc.CancelToken.source(), this.state = \"RELAY_STATE_IDLE\", this.emit(\"dispose\"), this.signal.dispose(), this.prevChannelMediaConfig = void 0;\n      }\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee80() {\n          var e;\n          return _regeneratorRuntime.wrap(function _callee80$(_context80) {\n            while (1) {\n              switch (_context80.prev = _context80.next) {\n                case 0:\n                  _context80.next = 2;\n                  return v_(this.joinInfo, this.cancelToken.token, this.httpRetryConfig);\n\n                case 2:\n                  e = _context80.sent;\n                  this.workerToken = e.workerToken;\n                  _context80.next = 6;\n                  return this.signal.connect(e.addressList);\n\n                case 6:\n                  this.emit(\"event\", \"NETWORK_CONNECTED\");\n                  this.signal.on(\"status\", this.onStatus);\n                  this.signal.on(\"reconnecting\", this.onReconnect);\n\n                case 9:\n                case \"end\":\n                  return _context80.stop();\n              }\n            }\n          }, _callee80, this);\n        }));\n\n        function connect() {\n          return _connect3.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"sendStartRelayMessage\",\n      value: function () {\n        var _sendStartRelayMessage = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee81(e) {\n          var t, i, r, n, s, o;\n          return _regeneratorRuntime.wrap(function _callee81$(_context81) {\n            while (1) {\n              switch (_context81.prev = _context81.next) {\n                case 0:\n                  t = this.genMessage(hl.StopPacketTransfer);\n                  _context81.next = 3;\n                  return this.signal.request(t);\n\n                case 3:\n                  _context81.next = 5;\n                  return this.signal.waitStatus(\"Normal Quit\");\n\n                case 5:\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: StopPacketTransfer success\"));\n                  i = this.genMessage(hl.SetSdkProfile, e);\n                  _context81.next = 9;\n                  return this.signal.request(i);\n\n                case 9:\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSdkProfile success\"));\n                  r = this.genMessage(hl.SetSourceChannel, e);\n                  _context81.next = 13;\n                  return this.signal.request(r);\n\n                case 13:\n                  _context81.next = 15;\n                  return this.signal.waitStatus(\"SetSourceChannelStatus\");\n\n                case 15:\n                  this.emit(\"event\", \"PACKET_JOINED_SRC_CHANNEL\");\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSourceChannel success\"));\n                  n = this.genMessage(hl.SetSourceUserId, e);\n                  _context81.next = 20;\n                  return this.signal.request(n);\n\n                case 20:\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSourceUserId success\"));\n                  s = this.genMessage(hl.SetDestChannel, e);\n                  _context81.next = 24;\n                  return this.signal.request(s);\n\n                case 24:\n                  _context81.next = 26;\n                  return this.signal.waitStatus(\"SetDestChannelStatus\");\n\n                case 26:\n                  this.emit(\"event\", \"PACKET_JOINED_DEST_CHANNEL\");\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetDestChannel success\"));\n                  o = this.genMessage(hl.StartPacketTransfer, e);\n                  _context81.next = 31;\n                  return this.signal.request(o);\n\n                case 31:\n                  this.emit(\"event\", \"PACKET_SENT_TO_DEST_CHANNEL\");\n                  this.state = \"RELAY_STATE_RUNNING\";\n                  vc.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: StartPacketTransfer success\"));\n\n                case 34:\n                case \"end\":\n                  return _context81.stop();\n              }\n            }\n          }, _callee81, this);\n        }));\n\n        function sendStartRelayMessage(_x128) {\n          return _sendStartRelayMessage.apply(this, arguments);\n        }\n\n        return sendStartRelayMessage;\n      }()\n    }, {\n      key: \"sendUpdateMessage\",\n      value: function () {\n        var _sendUpdateMessage = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee82(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee82$(_context82) {\n            while (1) {\n              switch (_context82.prev = _context82.next) {\n                case 0:\n                  t = this.genMessage(hl.UpdateDestChannel, e);\n                  _context82.next = 3;\n                  return this.signal.request(t);\n\n                case 3:\n                  this.emit(\"event\", \"PACKET_UPDATE_DEST_CHANNEL\");\n                  vc.debug(\"[\".concat(this.clientId, \"] sendUpdateMessage: UpdateDestChannel success\"));\n\n                case 5:\n                case \"end\":\n                  return _context82.stop();\n              }\n            }\n          }, _callee82, this);\n        }));\n\n        function sendUpdateMessage(_x129) {\n          return _sendUpdateMessage.apply(this, arguments);\n        }\n\n        return sendUpdateMessage;\n      }()\n    }, {\n      key: \"sendStopRelayMessage\",\n      value: function () {\n        var _sendStopRelayMessage = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee83() {\n          var e;\n          return _regeneratorRuntime.wrap(function _callee83$(_context83) {\n            while (1) {\n              switch (_context83.prev = _context83.next) {\n                case 0:\n                  e = this.genMessage(hl.StopPacketTransfer);\n                  _context83.next = 3;\n                  return this.signal.request(e);\n\n                case 3:\n                  vc.debug(\"[\".concat(this.clientId, \"] sendStopRelayMessage: StopPacketTransfer success\"));\n\n                case 4:\n                case \"end\":\n                  return _context83.stop();\n              }\n            }\n          }, _callee83, this);\n        }));\n\n        function sendStopRelayMessage() {\n          return _sendStopRelayMessage.apply(this, arguments);\n        }\n\n        return sendStopRelayMessage;\n      }()\n    }, {\n      key: \"genMessage\",\n      value: function genMessage(e, t) {\n        var _this97 = this;\n\n        var i = [],\n            r = [],\n            n = [];\n        this.requestId += 1;\n        var s = {\n          appId: this.joinInfo.appId,\n          cname: this.joinInfo.cname,\n          uid: this.joinInfo.uid.toString(),\n          sdkVersion: wc,\n          sid: this.joinInfo.sid,\n          ts: La(),\n          requestId: this.requestId,\n          seq: this.requestId,\n          allocate: !0,\n          clientRequest: {}\n        };\n        \"4.8.1\" === s.sdkVersion && (s.sdkVersion = \"0.0.1\");\n        var o = null,\n            a = null;\n\n        switch (e) {\n          case hl.SetSdkProfile:\n            return s.clientRequest = {\n              command: \"SetSdkProfile\",\n              type: \"multi_channel\"\n            }, s;\n\n          case hl.SetSourceChannel:\n            if (a = t && t.getSrcChannelMediaInfo(), !a) throw new Ad(ad.UNEXPECTED_ERROR, \"can not find source config\");\n            return s.clientRequest = {\n              command: \"SetSourceChannel\",\n              uid: \"0\",\n              channelName: a.channelName,\n              token: a.token || this.joinInfo.appId\n            }, s;\n\n          case hl.SetSourceUserId:\n            if (a = t && t.getSrcChannelMediaInfo(), !a) throw new Ad(ad.UNEXPECTED_ERROR, \"can not find source config\");\n            return s.clientRequest = {\n              command: \"SetSourceUserId\",\n              uid: a.uid + \"\"\n            }, s;\n\n          case hl.SetDestChannel:\n            if (o = t && t.getDestChannelMediaInfo(), !o) throw new Ad(ad.UNEXPECTED_ERROR, \"can not find dest config\");\n            return Xi(o).call(o, function (e) {\n              i.push(e.channelName), r.push(e.uid + \"\"), n.push(e.token || _this97.joinInfo.appId);\n            }), s.clientRequest = {\n              command: \"SetDestChannel\",\n              channelName: i,\n              uid: r,\n              token: n\n            }, s;\n\n          case hl.StartPacketTransfer:\n            return s.clientRequest = {\n              command: \"StartPacketTransfer\"\n            }, s;\n\n          case hl.Reconnect:\n            return s.clientRequest = {\n              command: \"Reconnect\"\n            }, s;\n\n          case hl.StopPacketTransfer:\n            return s.clientRequest = {\n              command: \"StopPacketTransfer\"\n            }, s;\n\n          case hl.UpdateDestChannel:\n            if (o = t && t.getDestChannelMediaInfo(), !o) throw new Ad(ad.UNEXPECTED_ERROR, \"can not find dest config\");\n            return Xi(o).call(o, function (e) {\n              i.push(e.channelName), r.push(e.uid + \"\"), n.push(e.token || _this97.joinInfo.appId);\n            }), s.clientRequest = {\n              command: \"UpdateDestChannel\",\n              channelName: i,\n              uid: r,\n              token: n\n            }, s;\n        }\n\n        return s;\n      }\n    }, {\n      key: \"state\",\n      set: function set(e) {\n        e !== this._state && (\"RELAY_STATE_FAILURE\" !== e && (this.errorCode = \"RELAY_OK\"), this.emit(\"state\", e, this.errorCode), this._state = e);\n      },\n      get: function get() {\n        return this._state;\n      }\n    }]);\n\n    return F_;\n  }(Ll);\n\n  var x_ =\n  /*#__PURE__*/\n  function () {\n    function x_(e) {\n      var _this98 = this;\n\n      _classCallCheck(this, x_);\n\n      this.freezeTimeCounterList = [], this.timeUpdatedCount = 0, this.freezeTime = 0, this.playbackTime = 0, this.lastTimeUpdatedTime = 0, this._videoElementStatus = dd.NONE, this.isGettingVideoDimensions = !1, this.handleVideoEvents = function (e) {\n        switch (e.type) {\n          case \"play\":\n          case \"playing\":\n            _this98.startGetVideoDimensions(), _this98.videoElementStatus = dd.PLAYING;\n            break;\n\n          case \"loadeddata\":\n            _this98.onFirstVideoFrameDecoded && _this98.onFirstVideoFrameDecoded();\n            break;\n\n          case \"canplay\":\n            _this98.videoElementStatus = dd.CANPLAY;\n            break;\n\n          case \"stalled\":\n            _this98.videoElementStatus = dd.STALLED;\n            break;\n\n          case \"suspend\":\n            _this98.videoElementStatus = dd.SUSPEND;\n            break;\n\n          case \"pause\":\n            _this98.videoElementStatus = dd.PAUSED, !va() && !Oa() && _this98.videoElement && _this98.videoTrack && \"live\" === _this98.videoTrack.readyState && (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume\")), _this98.videoElement.play());\n            break;\n\n          case \"waiting\":\n            _this98.videoElementStatus = dd.WAITING;\n            break;\n\n          case \"abort\":\n            _this98.videoElementStatus = dd.ABORT;\n            break;\n\n          case \"ended\":\n            _this98.videoElementStatus = dd.ENDED;\n            break;\n\n          case \"emptied\":\n            _this98.videoElementStatus = dd.EMPTIED;\n            break;\n\n          case \"timeupdate\":\n            {\n              var _e51 = La();\n\n              if (_this98.timeUpdatedCount += 1, _this98.timeUpdatedCount < 10) return void (_this98.lastTimeUpdatedTime = _e51);\n\n              var _t66 = _e51 - _this98.lastTimeUpdatedTime;\n\n              for (_this98.lastTimeUpdatedTime = _e51, _t66 > 500 && (_this98.freezeTime += _t66), _this98.playbackTime += _t66; _this98.playbackTime >= 6e3;) {\n                _this98.playbackTime -= 6e3, _this98.freezeTimeCounterList.push(Math.min(6e3, _this98.freezeTime)), _this98.freezeTime = Math.max(0, _this98.freezeTime - 6e3);\n              }\n\n              break;\n            }\n        }\n      }, this.startGetVideoDimensions = function () {\n        var e = function e() {\n          if (_this98.isGettingVideoDimensions = !0, _this98.videoElement && _this98.videoElement.videoWidth * _this98.videoElement.videoHeight > 4) return vc.debug(\"[\".concat(_this98.trackId, \"] current video dimensions:\"), _this98.videoElement.videoWidth, _this98.videoElement.videoHeight), void (_this98.isGettingVideoDimensions = !1);\n          Ua(e, 500);\n        };\n\n        !_this98.isGettingVideoDimensions && e();\n      }, this.autoResumeAfterInterruption = function () {\n        _this98.videoElement && _this98.videoTrack && \"live\" === _this98.videoTrack.readyState && \"running\" === Au.curState && (wa() ? (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume for iOS 15.0\")), _this98.videoElement.pause(), _this98.videoElement.play()) : Na() ? (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume for iOS 15.1\")), _this98.videoElement.load(), _this98.videoElement.play()) : (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume for iOS 14\")), _this98.videoElement.play()));\n      }, this.autoResumeAfterInterruptionOnIOS15 = function () {\n        _this98.videoElement && _this98.videoTrack && \"live\" === _this98.videoTrack.readyState && (wa() ? (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume for iOS 15.0\")), _this98.videoElement.pause(), _this98.videoElement.play()) : Na() && (vc.debug(\"[track-\".concat(_this98.trackId, \"] video element paused, auto resume for iOS 15.1\")), _this98.videoElement.load(), _this98.videoElement.play()));\n      }, this.slot = e.element, this.trackId = e.trackId, this.updateConfig(e), Au.on(cu.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), Au.on(cu.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15);\n    }\n\n    _createClass(x_, [{\n      key: \"updateConfig\",\n      value: function updateConfig(e) {\n        this.config = e, this.trackId = e.trackId;\n        var t = e.element;\n        t !== this.slot && (this.destroy(), this.slot = t), this.createElements();\n      }\n    }, {\n      key: \"updateVideoTrack\",\n      value: function updateVideoTrack(e) {\n        this.videoTrack !== e && (this.videoTrack = e, this.createElements());\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        var _this99 = this;\n\n        if (this.videoElement) {\n          var _t67 = this.videoElement.play();\n\n          _t67 && _t67.catch && _t67.catch(function (t) {\n            e && iu.autoplayFailed(e, \"video\", t.message, _this99.trackId), \"NotAllowedError\" === t.name ? (vc.warning(\"detected video element autoplay failed\", t), _this99.handleAutoPlayFailed()) : vc.warning(\"[\".concat(_this99.trackId, \"] play warning: \"), t);\n          });\n\n          var _i33 = pa();\n\n          (\"Safari\" === _i33.name && 15 === Number(_i33.version) || ya()) && _t67 && _t67.finally && _t67.finally(function () {\n            _this99.config.mirror && _this99.videoElement && (_this99.videoElement.style.transform = \"rotateY(180deg)\");\n          });\n        }\n      }\n    }, {\n      key: \"getCurrentFrame\",\n      value: function getCurrentFrame() {\n        if (!this.videoElement) return new ImageData(2, 2);\n        var e = document.createElement(\"canvas\");\n        e.width = this.videoElement.videoWidth, e.height = this.videoElement.videoHeight;\n        var t = e.getContext(\"2d\");\n        if (!t) return vc.error(\"create canvas context failed!\"), new ImageData(2, 2);\n        t.drawImage(this.videoElement, 0, 0, e.width, e.height);\n        var i = t.getImageData(0, 0, e.width, e.height);\n        return e.remove(), i;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (Au.off(cu.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), Au.off(cu.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15), this.videoElement && (this.videoElement.srcObject = null, this.videoElement.remove(), this.videoElement = void 0), this.container) {\n          try {\n            this.container.remove(), this.slot.removeChild(this.container);\n          } catch (e) {}\n\n          this.container = void 0;\n        }\n\n        this.freezeTimeCounterList = [];\n      }\n    }, {\n      key: \"createElements\",\n      value: function createElements() {\n        this.container || (this.container = document.createElement(\"div\")), this.container.id = \"agora-video-player-\".concat(this.trackId), this.container.style.width = \"100%\", this.container.style.height = \"100%\", this.container.style.position = \"relative\", this.container.style.overflow = \"hidden\", this.videoTrack ? (this.container.style.backgroundColor = \"black\", this.createVideoElement(), this.container.appendChild(this.videoElement)) : this.removeVideoElement(), this.slot.appendChild(this.container);\n      }\n    }, {\n      key: \"createVideoElement\",\n      value: function createVideoElement() {\n        var _this100 = this;\n\n        this.videoElement || (this.videoElementStatus = dd.INIT, this.videoElement = document.createElement(\"video\"), this.videoElement.onerror = function () {\n          return _this100.videoElementStatus = dd.ERROR;\n        }, this.container && this.container.appendChild(this.videoElement), Xi(V_).call(V_, function (e) {\n          _this100.videoElement && _this100.videoElement.addEventListener(e, _this100.handleVideoEvents);\n        }), this.videoElementCheckInterval = window.setInterval(function () {\n          !document.getElementById(\"video_\".concat(_this100.trackId)) && _this100.videoElement && (_this100.videoElementStatus = dd.DESTROYED);\n        }, 1e3)), this.videoElement.id = \"video_\".concat(this.trackId), this.videoElement.className = \"agora_video_player\", this.videoElement.style.width = \"100%\", this.videoElement.style.height = \"100%\", this.videoElement.style.position = \"absolute\", this.videoElement.controls = !1, this.videoElement.setAttribute(\"playsinline\", \"\"), this.videoElement.style.left = \"0\", this.videoElement.style.top = \"0\";\n        var e = pa();\n\n        if (\"Safari\" === e.name && 15 === Number(e.version) || ya() || !this.config.mirror || (this.videoElement.style.transform = \"rotateY(180deg)\"), this.config.fit ? this.videoElement.style.objectFit = this.config.fit : this.videoElement.style.objectFit = \"cover\", this.videoElement.setAttribute(\"muted\", \"\"), this.videoElement.muted = !0, this.videoElement.srcObject && this.videoElement.srcObject instanceof MediaStream) {\n          this.videoElement.srcObject.getVideoTracks()[0] !== this.videoTrack && (this.videoElement.srcObject = this.videoTrack ? new MediaStream([this.videoTrack]) : null, Ta() && this.videoElement.load());\n        } else this.videoElement.srcObject = this.videoTrack ? new MediaStream([this.videoTrack]) : null, Ta() && this.videoElement.load();\n\n        var t = this.videoElement.play();\n        void 0 !== t && t.catch(function (e) {\n          vc.debug(\"[\".concat(_this100.trackId, \"] playback interrupted\"), e.toString());\n        });\n      }\n    }, {\n      key: \"removeVideoElement\",\n      value: function removeVideoElement() {\n        var _this101 = this;\n\n        if (this.videoElement) {\n          Xi(V_).call(V_, function (e) {\n            _this101.videoElement && _this101.videoElement.removeEventListener(e, _this101.handleVideoEvents);\n          }), this.videoElementCheckInterval && (window.clearInterval(this.videoElementCheckInterval), this.videoElementCheckInterval = void 0);\n\n          try {\n            this.container && this.container.removeChild(this.videoElement);\n          } catch (e) {}\n\n          this.videoElement = void 0, this.videoElementStatus = dd.NONE;\n        }\n      }\n    }, {\n      key: \"handleAutoPlayFailed\",\n      value: function handleAutoPlayFailed() {\n        var _this102 = this;\n\n        var e = pa();\n\n        if (this.videoElement) {\n          var _t68 = function _t68(i) {\n            i.preventDefault(), _this102.videoElement && (_this102.videoElement.play().then(function () {\n              var e;\n              vc.debug(Xe(e = \"[\".concat(_this102.trackId, \"] Video element for trackId:\")).call(e, _this102.trackId, \" autoplay resumed.\"));\n            }).catch(function (e) {\n              vc.error(e);\n            }), \"Android\" !== e.os || \"Chrome\" !== e.name && e.name !== Aa.WECHAT ? (document.body.removeEventListener(\"touchstart\", _t68, !0), document.body.removeEventListener(\"mousedown\", _t68, !0)) : document.body.removeEventListener(\"click\", _t68, !0));\n          };\n\n          \"Android\" !== e.os || \"Chrome\" !== e.name && e.name !== Aa.WECHAT ? (document.body.addEventListener(\"touchstart\", _t68, !0), document.body.addEventListener(\"mousedown\", _t68, !0)) : document.body.addEventListener(\"click\", _t68, !0), zA();\n        }\n      }\n    }, {\n      key: \"getVideoElement\",\n      value: function getVideoElement() {\n        return this.videoElement;\n      }\n    }, {\n      key: \"getContainerElement\",\n      value: function getContainerElement() {\n        return this.container;\n      }\n    }, {\n      key: \"videoElementStatus\",\n      get: function get() {\n        return this._videoElementStatus;\n      },\n      set: function set(e) {\n        var t, i;\n        e !== this._videoElementStatus && (vc.debug(Xe(t = Xe(i = \"[\".concat(this.trackId, \"] video-element-status change \")).call(i, this._videoElementStatus, \" => \")).call(t, e)), this._videoElementStatus = e);\n      }\n    }]);\n\n    return x_;\n  }();\n\n  var V_ = [\"play\", \"playing\", \"loadeddata\", \"canplay\", \"pause\", \"stalled\", \"suspend\", \"waiting\", \"abort\", \"emptied\", \"ended\", \"timeupdate\"];\n\n  function G_(e, t, i) {\n    var r = e.createShader(i);\n\n    if (!r) {\n      return new Ad(ad.WEBGL_INTERNAL_ERROR, \"can not create shader\").throw();\n    }\n\n    e.shaderSource(r, t), e.compileShader(r);\n\n    if (!e.getShaderParameter(r, e.COMPILE_STATUS)) {\n      var _t69 = e.getShaderInfoLog(r);\n\n      e.deleteShader(r);\n      return new Ad(ad.WEBGL_INTERNAL_ERROR, \"error compiling shader:\" + _t69).throw();\n    }\n\n    return r;\n  }\n\n  function j_(e, t, i, r) {\n    var n = [];\n\n    for (var _i34 = 0; _i34 < t.length; ++_i34) {\n      var _r28 = 0 === _i34 ? e.VERTEX_SHADER : e.FRAGMENT_SHADER;\n\n      n.push(G_(e, t[_i34], _r28));\n    }\n\n    return function (e, t, i, r) {\n      var n = e.createProgram();\n      if (!n) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"can not create webgl program\");\n\n      if (Xi(t).call(t, function (t) {\n        e.attachShader(n, t);\n      }), i && Xi(i).call(i, function (t, i) {\n        e.bindAttribLocation(n, r ? r[i] : i, t);\n      }), e.linkProgram(n), !e.getProgramParameter(n, e.LINK_STATUS)) {\n        var _t70 = e.getProgramInfoLog(n);\n\n        throw e.deleteProgram(n), new Ad(ad.WEBGL_INTERNAL_ERROR, \"error in program linking:\" + _t70);\n      }\n\n      return n;\n    }(e, n, i, r);\n  }\n\n  var K_;\n  !\n  /*@cc_on!@*/\n  !!document.documentMode && !!window.StyleMedia && (HTMLCanvasElement.prototype.getContext = (K_ = HTMLCanvasElement.prototype.getContext, function () {\n    var e = arguments;\n    var t = e[0];\n    return \"webgl\" === t && (e = Bs([]).call(arguments), e[0] = \"experimental-webgl\"), K_.apply(null, e);\n  }));\n  var W_ = [31, 222, 239, 159, 192, 236, 164, 81, 54, 227, 176, 149, 2, 247, 75, 141, 183, 54, 213, 216, 158, 92, 111, 49, 228, 111, 150, 6, 135, 79, 35, 212, 4, 155, 200, 168, 37, 107, 243, 110, 144, 179, 51, 81, 55, 78, 223, 242, 191, 211, 74, 119, 203, 151, 142, 62, 31, 41, 132, 22, 35, 155, 87, 123, 119, 117, 216, 57, 201, 53, 228, 67, 201, 40, 106, 24, 80, 176, 187, 253, 60, 63, 136, 100, 20, 12, 177, 99, 64, 38, 101, 143, 111, 176, 251, 211, 145, 136, 34, 23, 79, 136, 202, 95, 105, 199, 125, 67, 180, 44, 210, 179, 228, 4, 85, 160, 188, 64, 26, 46, 6, 61, 201, 103, 248, 18, 97, 254, 140, 36, 115, 106, 48, 124, 102, 216, 155, 120, 36, 227, 165, 217, 7, 227, 191, 128, 212, 157, 80, 37, 117, 175, 24, 214, 47, 221, 183, 211, 51, 174, 251, 223, 159, 167, 152, 53, 36, 107, 199, 223, 91, 62, 46, 194, 11, 80, 121, 188, 219, 2, 99, 99, 232, 229, 173, 234, 21, 30, 236, 177, 243, 142, 97, 48, 108, 56, 62, 172, 56, 216, 3, 42, 79, 138, 23, 88, 182, 39, 5, 118, 68, 135, 178, 56, 9, 94, 189, 44, 104, 9, 238, 231, 174, 122, 85, 247, 231, 86, 74, 8, 189, 147, 218, 180, 58, 76, 227, 17, 46, 90, 194, 100, 51, 178, 72, 163, 151, 243, 166, 130, 85, 1, 223, 130, 152, 242, 85, 255, 28, 173, 97, 252, 119, 215, 177, 119, 86, 104, 136, 82, 40, 72, 53, 11, 18, 26, 240, 188, 76, 110, 39, 31, 189];\n\n  function H_(e) {\n    var t = new Uint8Array([99, 114, 121, 112, 116, 105, 105]),\n        i = t.length,\n        r = e,\n        n = r.length,\n        s = new Uint8Array(n),\n        o = new Uint8Array(256);\n\n    for (var _e52 = 0; _e52 < 256; _e52++) {\n      o[_e52] = _e52;\n    }\n\n    var a = 0;\n\n    for (var _e53 = 0; _e53 < 256; _e53++) {\n      var _ref51;\n\n      a = (a + o[_e53] + t[_e53 % i]) % 256, (_ref51 = [o[a], o[_e53]], o[_e53] = _ref51[0], o[a] = _ref51[1], _ref51);\n    }\n\n    var c,\n        d = 0;\n    a = 0;\n\n    for (var _e54 = 0; _e54 < 0 + n; _e54++) {\n      var _ref52;\n\n      d = (d + 1) % 256, a = (a + o[d]) % 256, (_ref52 = [o[a], o[d]], o[d] = _ref52[0], o[a] = _ref52[1], _ref52), c = o[(o[d] + o[a]) % 256], _e54 >= 0 && (s[_e54 - 0] = r[_e54 - 0] ^ c);\n    }\n\n    var l = String.fromCharCode.apply(null, BA(s));\n    return Function(\"var winSize = 5; return `\" + l + \"`\")();\n  }\n\n  function Y_(e, t) {\n    var i = H_(t),\n        r = j_(e, [H_(W_), i]);\n    {\n      var _t71 = e.getAttribLocation(r, \"a_position\"),\n          _i35 = e.createBuffer();\n\n      e.bindBuffer(e.ARRAY_BUFFER, _i35), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(_t71);\n\n      var _n16 = 2,\n          _s13 = e.FLOAT,\n          _o7 = !1,\n          _a6 = 0,\n          _c4 = 0;\n\n      e.vertexAttribPointer(_t71, _n16, _s13, _o7, _a6, _c4);\n    }\n    {\n      var _t72 = e.getAttribLocation(r, \"a_texCoord\"),\n          _i36 = e.createBuffer();\n\n      e.bindBuffer(e.ARRAY_BUFFER, _i36), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(_t72);\n\n      var _n17 = 2,\n          _s14 = e.FLOAT,\n          _o8 = !1,\n          _a7 = 0,\n          _c5 = 0;\n\n      e.vertexAttribPointer(_t72, _n17, _s14, _o8, _a7, _c5);\n    }\n    return r;\n  }\n\n  var q_ = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 152, 221, 191, 124, 116, 248, 106, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 134, 194, 240, 46, 9, 3, 141, 22, 35, 146, 76, 23, 109, 117, 208, 41, 201, 45, 218, 76, 203, 105, 51, 58, 97, 154, 145, 236, 49, 18, 183, 127, 27, 12, 210, 122, 73, 42, 37, 143, 36, 207, 251, 211, 145, 191, 56, 10, 88, 222, 181, 125, 22, 238, 123, 71, 177, 107, 218, 254, 173, 28, 34, 253, 249, 67, 83, 97, 73, 111, 219, 43, 181, 82, 38, 230, 136, 109, 22, 67];\n\n  var J_ =\n  /*#__PURE__*/\n  function () {\n    function J_(e, t) {\n      _classCallCheck(this, J_);\n\n      this.gl = e, this.kernel = t || q_, this.program = Y_(this.gl, this.kernel);\n    }\n\n    _createClass(J_, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\");\n        this.gl.uniform1f(e, 1);\n      }\n    }]);\n\n    return J_;\n  }();\n\n  var X_ =\n  /*#__PURE__*/\n  function (_J_) {\n    _inherits(X_, _J_);\n\n    function X_(e, t, i, r) {\n      var _this103;\n\n      _classCallCheck(this, X_);\n\n      _this103 = _possibleConstructorReturn(this, _getPrototypeOf(X_).call(this, e, t)), _this103.denoiseLevel = 5, _this103.xOffset = 1 / i, _this103.yOffset = 1 / r;\n      return _this103;\n    }\n\n    _createClass(X_, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\"),\n            t = this.gl.getUniformLocation(this.program, \"u_singleStepOffset\"),\n            i = this.gl.getUniformLocation(this.program, \"u_denoiseLevel\");\n        this.gl.uniform2f(t, this.xOffset, this.yOffset), this.gl.uniform1f(i, this.denoiseLevel), this.gl.uniform1f(e, 1);\n      }\n    }, {\n      key: \"setParameters\",\n      value: function setParameters(e) {\n        void 0 !== e.denoiseLevel && (this.denoiseLevel = e.denoiseLevel);\n      }\n    }, {\n      key: \"setSize\",\n      value: function setSize(e, t) {\n        this.xOffset = 1 / e, this.yOffset = 1 / t;\n      }\n    }]);\n\n    return X_;\n  }(J_);\n\n  var z_ = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 155, 210, 164, 99, 114, 228, 96, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 133, 194, 247, 34, 31, 39, 142, 28, 2, 130, 18, 109, 84, 124, 223, 62, 140, 52, 128, 47, 208, 47, 115, 39, 4, 200, 220, 171, 53, 36, 150, 101, 10, 75, 247, 121, 74, 36, 35, 143, 108, 176, 235, 211, 135, 164, 36, 11, 88, 160, 148, 35, 6, 221, 41, 32, 166, 109, 205, 171, 228, 4, 26, 169, 244, 82, 119, 102, 86, 61, 201, 103, 248, 18, 97, 242, 182, 34, 121, 70, 28, 71, 126, 197, 223, 126, 14, 244, 149, 192, 12, 176, 187, 149, 212, 156, 22, 44, 36, 133, 10, 216, 63, 198, 213, 154, 116, 230, 253, 154, 154, 249, 215, 55, 60, 34, 196, 229, 76, 50, 44, 135, 22, 77, 113, 247, 142, 94, 60, 23, 172, 145, 175, 218, 81, 86, 162, 239, 180, 205, 63, 118, 3, 110, 123, 224, 127, 158, 124, 15, 127, 157, 27, 66, 176, 33, 24, 51, 53, 194, 178, 56, 6, 74, 191, 111, 51, 78, 174, 157, 229, 17, 22, 178, 231, 92, 25, 23, 191, 157, 137, 188, 54, 64, 176, 13, 22, 81, 207, 45, 108, 203, 83, 186, 130, 237, 186, 153, 110, 8, 196, 168, 152, 161, 28, 238, 46, 184, 36, 185, 20, 203, 183, 98, 95, 41, 149, 93, 105, 37, 116, 91, 68, 105, 164, 217, 30, 42, 60, 53, 173, 213, 177, 216, 195, 53, 204, 173, 128, 243, 42, 122, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 220, 161, 39, 214, 146, 183, 193, 225, 23, 177, 201, 243, 128, 160, 33, 75, 86, 126, 139, 254, 232, 14, 13, 85, 2, 112, 17, 150, 36, 180, 86, 226, 225, 126, 197, 17, 228, 225, 142, 245, 37, 170, 39, 96, 187, 190, 2, 35, 85, 237, 11, 189, 1, 79, 237, 2, 1, 114, 246, 109, 190, 66, 54, 153, 43, 218, 204, 70, 6, 204, 162, 247, 18, 130, 123, 30, 60, 165, 130, 142, 210, 133, 91, 127, 117, 71, 38, 145, 172, 7, 5, 16, 220, 222, 111, 98, 141, 239, 208, 125, 26, 238, 28, 0, 216, 89, 13, 7, 119, 134, 194, 75, 41, 67, 174, 1, 217, 80, 101, 40, 26, 59, 28, 59, 46, 108, 138, 38, 157, 167, 28, 234, 73, 177, 42, 42, 102, 108, 26, 181, 27, 178, 42, 43, 52, 28, 110, 117, 198, 173, 176, 178, 101, 225, 150, 36, 139, 108, 105, 10, 237, 222, 3, 143, 126, 18, 144, 115, 74, 56, 114, 134, 231, 159, 212, 62, 126, 80, 173, 216, 167, 4, 81, 18, 52, 17, 144, 218, 32, 139, 207, 104, 128, 229, 99, 84, 120, 31, 87, 227, 154, 91, 196, 63, 123, 111, 125, 36, 52, 57, 168, 113, 150, 189, 204, 24, 104, 196, 237, 86, 163, 68, 197, 202, 170, 212, 191, 81, 193, 111, 255, 162, 181, 202, 156, 146, 196, 96, 16, 118, 117, 55, 71, 156, 31, 163, 242, 204, 239, 11, 150, 27, 126, 115, 154, 107, 247, 134, 158, 125, 255, 146, 35, 183, 209, 36, 116, 87, 215, 172, 5, 251, 133, 114, 254, 141, 195, 6, 145, 4, 111, 182, 167, 74, 154, 152, 68, 18, 146, 88, 106, 200, 154, 15, 176, 94, 86, 66, 178, 101, 219, 35, 188, 129, 66, 28, 41, 110, 174, 53, 88, 174, 64, 191, 206, 127, 48, 126, 214, 216, 93, 119, 2, 166, 99, 181, 222, 29, 218, 28, 195, 219, 125, 44, 50, 16, 99, 174, 225, 51, 133, 120, 184, 159, 168, 75, 242, 162, 124, 255, 81, 25, 153, 109, 69, 220, 176, 4, 237, 196, 233, 19, 8, 240, 160, 39, 122, 81, 29, 188, 144, 249, 170, 174, 137, 30, 10, 93, 133, 151, 199, 248, 175, 38, 41, 144, 229, 245, 149, 25, 240, 138, 179, 114, 182, 84, 50, 103, 95, 31, 199, 31, 87, 208, 203, 199, 135, 49, 211, 43, 52, 36, 74, 59, 37, 22, 136, 171, 244, 126, 18, 251, 39, 159, 241, 66, 206, 127, 149, 159, 182, 143, 232, 199, 136, 46, 150, 32, 51, 221, 74, 22, 102, 93, 22, 44, 132, 140, 199, 43, 69, 249, 77, 75, 140, 70, 4, 252, 98, 235, 77, 190, 125, 18, 56, 21, 10, 244, 42, 2, 246, 62, 127, 241, 123, 137, 22, 247, 219, 177, 160, 84, 18, 10, 84, 97, 251, 127, 102, 16, 209, 181, 100, 94, 56, 238, 209, 207, 76, 189, 95, 15, 165, 139, 143, 189, 96, 225, 55, 112, 178, 27, 218, 198, 223, 251, 52, 123, 94, 130, 220, 142, 216, 116, 237, 18, 254, 49, 59, 128, 41, 29, 15, 179, 164, 85, 76, 167, 166, 151, 39, 221, 2, 190, 68, 167, 26, 177, 114, 141, 4, 67, 25, 69, 182, 38, 166, 160, 27, 151, 148, 108, 48, 227, 60, 112, 48, 22, 159, 76, 127, 251, 63, 254, 177, 113, 217, 197, 95, 179, 109, 128, 138, 99, 27, 249, 10, 174, 155, 129, 80, 39, 165, 252, 85, 60, 131, 183, 98, 107, 68, 207, 19, 233, 231, 55, 225, 126, 77, 49, 53, 145, 203, 113, 29, 208, 64, 237, 182, 229, 165, 7, 11, 169, 106, 253, 116, 141, 200, 62, 16, 38, 121, 55, 148, 91, 83, 160, 140, 126, 121, 12, 79, 189, 72, 172, 31, 243, 240, 209, 229, 32, 220, 91, 229, 81, 94, 247, 121, 153, 151, 232, 182, 171, 198, 50, 31, 152, 245, 172, 151, 130, 55, 62, 125, 38, 155, 229, 78, 207, 148, 201, 2, 78, 63, 119, 107, 168, 78, 139, 141, 163, 177, 191, 239, 141, 39, 182, 174, 40, 76, 226, 62, 125, 209, 6, 6, 34, 37, 147, 85, 204, 103, 51, 191, 36, 248, 17, 175, 20, 1, 53, 16, 35, 143, 237, 177, 125, 86, 29, 219, 235, 20, 121, 205, 59, 5, 250, 107, 109, 32, 224, 30, 152, 143, 113, 151, 95, 85, 19, 254, 164, 135, 124, 68, 136, 199, 29, 31, 244, 91, 10, 84, 127, 101, 210, 70, 226, 195, 140, 70, 166, 54, 217, 165, 84, 42, 165, 175, 100, 234, 124, 121, 105, 53, 101, 118, 174, 101, 220, 147, 68, 161, 37, 0, 182, 220, 142, 221, 155, 230, 115, 164, 10, 214, 208, 120, 91, 152, 66, 27, 81, 184, 48, 84, 70, 7, 128, 153, 217, 218, 249, 226, 70, 130, 200, 156, 61, 227, 21, 164, 137, 193, 221, 119, 10, 134, 204, 23, 20, 17, 90, 94, 105, 204, 39, 99, 1, 64, 153, 45, 213, 19, 247, 97, 194, 49, 35, 125, 255, 195, 139, 63, 209, 175, 208, 147, 189, 244, 204, 24, 211, 99, 142, 18, 92, 130, 254, 182, 231, 235, 93, 10, 127, 175, 87, 35, 62, 110, 137, 184, 39, 114, 200, 150, 11, 190, 40, 162, 168, 223, 203, 110, 242, 192, 234, 26, 11, 54, 155, 38, 48, 79, 109, 101, 119, 165, 187, 223, 5, 20, 168, 171, 241, 20, 243, 108, 199, 3, 155, 69, 244, 149, 0, 187, 110, 12, 233, 42, 151, 189, 139, 133, 104, 3, 30, 16, 200, 69, 4, 123, 103, 144, 12, 106, 182, 1, 127, 91, 125, 158, 12, 144, 238, 232, 209, 101, 159, 56, 163, 240, 179, 50, 169, 120, 219, 176, 87, 77, 45, 247, 153, 190, 82, 132, 50, 137, 209, 97, 19, 35, 247, 161, 62, 77, 16, 71, 152, 72, 61, 50, 99, 157, 154, 56, 58, 175, 27, 73, 121, 229, 195, 228, 132, 69, 233, 169, 100, 21, 123, 17, 3, 164, 6, 146, 106, 196, 29, 3, 250, 217, 164, 23, 171, 203, 14, 242, 239, 249, 169, 116, 138, 209, 98, 113, 181, 122, 35, 162, 216, 46, 230, 4, 155, 142, 118, 216, 232, 229, 28, 12, 158, 153, 126, 149, 171, 172, 231, 99, 211, 57, 114, 136, 183, 114, 74, 35, 233, 115, 127, 253, 157, 38, 49, 136, 141, 25, 161, 255, 232, 110, 101, 208, 166, 186, 226, 12, 185, 19, 155, 53, 93, 155, 39, 161, 7, 124, 213, 52, 223, 125, 211, 242, 253, 22, 13, 131, 115, 167, 198, 188, 90, 209, 63, 224, 92, 112, 118, 220, 165, 31, 164, 43, 58, 197, 77, 17, 247, 77, 164, 74, 77, 218, 18, 187, 41, 76, 189, 127, 98, 18, 226, 231, 71, 115, 236, 68, 183, 111, 50, 168, 88, 247, 9, 123, 65, 180, 88, 74, 44, 101, 101, 173, 11];\n\n  var Z_ =\n  /*#__PURE__*/\n  function (_X_) {\n    _inherits(Z_, _X_);\n\n    function Z_(e, t, i) {\n      _classCallCheck(this, Z_);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(Z_).call(this, e, z_, t, i));\n    }\n\n    return Z_;\n  }(X_);\n\n  var $_ = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 165, 108, 122, 254, 125, 130, 229, 55, 109, 113, 11, 210, 238, 163, 213, 86, 116, 156, 248, 215, 63, 20, 48, 173, 31, 55, 133, 18, 105, 32, 16, 204, 35, 128, 38, 212, 87, 200, 97, 114, 40, 12, 210, 193, 171, 59, 33, 158, 108, 14, 75, 228, 74, 65, 32, 57, 192, 112, 156, 234, 250, 140, 189, 40, 20, 6, 230, 135, 52, 17, 200, 123, 68, 183, 44, 215, 187, 234, 2, 13, 169, 234, 94, 115, 60, 6, 107, 224, 118, 254, 88, 2, 235, 134, 36, 120, 5, 85, 94, 126, 222, 223, 101, 105, 227, 147, 199, 64, 185, 246, 143, 183, 210, 30, 37, 127, 226, 79, 156, 118, 147, 208, 131, 51, 248, 232, 217, 206, 181, 218, 58, 61, 112, 244, 227, 68, 45, 41, 206, 69, 12, 45, 163, 205, 75, 6, 23, 167, 145, 250, 237, 92, 84, 164, 240, 253, 216, 54, 85, 7, 108, 62, 255, 42, 217, 3, 27, 0, 196, 94, 28, 241, 120, 80, 92, 89, 135, 228, 125, 2, 3, 242, 39, 116, 64, 248, 216, 177, 122, 66, 178, 180, 9, 7, 33, 186, 208, 213, 188, 59, 78, 243, 95, 123, 28, 142, 45, 99, 130, 7, 167, 194, 156, 238, 199, 10, 71, 141, 251, 221, 158, 16, 255, 38, 181, 36, 184, 20, 136, 240, 55, 27, 51, 191, 82, 105, 55, 97, 78, 74, 121, 191, 161, 91, 126, 105, 103, 174, 139, 223, 145, 150, 120, 156, 240, 252, 182, 105, 104, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 201, 211, 39, 203, 146, 225, 246, 252, 21, 161, 250, 188, 137, 190, 42, 4, 90, 126, 211, 171, 240, 113, 67, 28, 92, 57, 77, 200, 125, 224, 19, 178, 142, 112, 202, 5, 233, 229, 128, 235, 105, 239, 102, 52, 179, 224, 87, 45, 68, 211, 10, 187, 9, 38, 190, 86, 25, 43, 175, 56, 231, 11, 108, 220, 36, 129, 131, 19, 93, 163, 239, 169, 118, 205, 50, 77, 121, 139, 139, 141, 197, 170, 20, 44, 39, 19, 97, 205, 228, 8, 106, 67, 210, 135, 111, 127, 141, 185, 175, 123, 26, 226, 42, 29, 217, 16, 99, 9, 46, 157, 232, 22, 3, 105, 174, 73, 144, 23, 110, 55, 84, 46, 4, 116, 39, 113, 205, 58, 158, 242, 7, 208, 75, 162, 55, 115, 35, 52, 124, 235, 114, 178, 55, 43, 98, 17, 100, 33, 134, 237, 190, 230, 60, 184, 192, 104, 146, 52, 58, 79, 174, 180, 81, 155, 114, 0, 153, 113, 90, 51, 86, 150, 254, 136, 205, 104, 39, 11, 190, 187, 233, 80, 81, 81, 56, 18, 222, 148, 116, 155, 156, 33, 132, 226, 127, 84, 34, 83, 28, 249, 153, 18, 197, 10, 116, 102, 125, 45, 47, 36, 235, 46, 212, 166, 209, 3, 125, 132, 237, 124, 163, 68, 197, 202, 232, 152, 234, 75, 235, 103, 248, 160, 241, 213, 151, 144, 130, 37, 23, 51, 48, 55, 12, 227, 31, 163, 242, 251, 245, 22, 129, 77, 20, 35, 150, 20, 181, 203, 138, 69, 233, 215, 109, 178, 209, 52, 85, 96, 221, 179, 56, 249, 138, 111, 250, 141, 134, 95, 152, 92, 109, 183, 174, 104, 151, 156, 31, 66, 211, 10, 57, 141, 167, 18, 177, 27, 126, 74, 252, 29, 143, 121, 173, 203, 8, 27, 44, 123, 148, 57, 88, 163, 68, 228, 158, 62, 98, 121, 192, 228, 94, 92, 72, 241, 33, 230, 173, 0, 197, 1, 194, 144, 111, 91, 60, 0, 106, 181, 203, 51, 133, 120, 250, 158, 184, 93, 216, 184, 126, 253, 21, 22, 155, 99, 80, 205, 227, 69, 231, 141, 165, 71, 70, 252, 223, 105, 51, 93, 22, 165, 135, 233, 177, 164, 139, 53, 5, 85, 151, 134, 214, 165, 249, 100, 24, 186, 207, 245, 149, 68, 218, 204, 252, 32, 190, 90, 48, 76, 57, 31, 201, 15, 52, 130, 135, 152, 206, 63, 198, 100, 126, 36, 2, 104, 116, 0, 160, 163, 186, 2, 91, 165, 57, 149, 163, 12, 239, 121, 152, 209, 224, 136, 248, 135, 136, 46, 150, 32, 51, 154, 6, 105, 0, 71, 30, 44, 175, 147, 139, 34, 91, 184, 78, 31, 145, 18, 3, 250, 122, 166, 47, 252, 109, 19, 40, 10, 123, 163, 99, 76, 133, 119, 37, 180, 38, 207, 79, 171, 185, 188];\n\n  var eI =\n  /*#__PURE__*/\n  function (_X_2) {\n    _inherits(eI, _X_2);\n\n    function eI(e, t, i) {\n      _classCallCheck(this, eI);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(eI).call(this, e, $_, t, i));\n    }\n\n    return eI;\n  }(X_);\n\n  var tI = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 160, 96, 121, 255, 120, 207, 227, 114, 120, 38, 72, 149, 145, 165, 227, 75, 122, 158, 250, 232, 46, 34, 52, 135, 9, 30, 144, 17, 110, 126, 110, 130, 71, 156, 46, 210, 67, 202, 51, 119, 97, 3, 211, 214, 227, 45, 109, 151, 97, 21, 10, 229, 53, 80, 26, 51, 202, 119, 128, 230, 197, 140, 135, 40, 14, 88, 128, 202, 95, 21, 208, 96, 83, 185, 98, 216, 242, 224, 15, 25, 224, 233, 86, 96, 46, 80, 120, 220, 48, 187, 86, 30, 240, 140, 46, 95, 81, 48, 90, 117, 140, 177, 51, 107, 235, 158, 137, 5, 241, 191, 154, 149, 219, 30, 126, 85, 175, 10, 216, 63, 139, 216, 151, 122, 251, 224, 202, 220, 227, 221, 53, 122, 34, 213, 224, 94, 45, 14, 200, 68, 31, 61, 175, 208, 17, 120, 82, 244, 138, 208, 165, 21, 19, 236, 232, 180, 217, 50, 74, 70, 126, 114, 227, 62, 192, 124, 9, 85, 148, 33, 77, 255, 117, 75, 102, 87, 151, 255, 87, 74, 74, 181, 111, 108, 9, 249, 220, 174, 59, 80, 254, 168, 29, 30, 94, 171, 133, 133, 195, 105, 64, 254, 68, 65, 18, 158, 54, 73, 203, 65, 175, 151, 170, 236, 138, 17, 119, 128, 237, 214, 189, 28, 250, 38, 149, 97, 242, 81, 212, 254, 57, 18, 120, 155, 64, 96, 108, 75, 78, 74, 121, 191, 243, 30, 42, 60, 103, 165, 196, 160, 195, 216, 99, 182, 173, 214, 182, 105, 53, 231, 3, 45, 212, 144, 101, 217, 65, 141, 44, 230, 125, 151, 154, 123, 57, 134, 223, 98, 133, 156, 238, 137, 181, 80, 175, 230, 167, 131, 180, 13, 69, 77, 44, 156, 165, 252, 14, 27, 85, 71, 1, 82, 196, 64, 243, 26, 167, 146, 98, 201, 6, 195, 247, 200, 224, 44, 177, 104, 109, 187, 231, 83, 118, 28, 159, 92, 179, 28, 14, 162, 81, 84, 21, 168, 34, 156, 21, 127, 215, 88, 218, 208, 11, 92, 161, 239, 239, 82, 221, 59, 86, 83, 201, 199, 216, 151, 139, 23, 54, 39, 52, 103, 204, 247, 24, 102, 94, 157, 138, 42, 49, 131, 183, 208, 50, 95, 236, 54, 6, 211, 26, 68, 72, 56, 212, 134, 24, 91, 114, 132, 1, 217, 80, 38, 47, 29, 47, 0, 107, 102, 99, 129, 33, 140, 243, 74, 251, 89, 247, 103, 12, 114, 58, 113, 240, 72, 188, 39, 48, 72, 89, 45, 102, 206, 245, 247, 231, 56, 167, 129, 122, 222, 47, 40, 78, 227, 159, 64, 206, 34, 127, 203, 127, 87, 40, 108, 152, 238, 147, 231, 46, 104, 89, 182, 180, 232, 86, 89, 91, 57, 10, 222, 202, 59, 199, 135, 60, 199, 189, 40, 84, 125, 28, 84, 162, 210, 91, 143, 34, 106, 117, 118, 3, 125, 126, 237, 60, 131, 173, 153, 69, 49, 212, 204, 117, 163, 31, 239, 202, 232, 152, 234, 3, 162, 32, 176, 184, 184, 196, 154, 131, 144, 115, 6, 53, 122, 55, 69, 166, 19, 230, 183, 175, 244, 1, 156, 11, 37, 121, 134, 121, 152, 142, 158, 125, 229, 150, 44, 183, 216, 109, 7, 65, 222, 169, 56, 222, 140, 110, 233, 157, 138, 66, 208, 6, 111, 166, 188, 76, 208, 222, 4, 104, 211, 10, 57, 141, 243, 65, 228, 86, 85, 88, 169, 91, 237, 56, 249, 133, 77, 21, 32, 37, 230, 55, 0, 184, 110, 228, 158, 62, 98, 45, 147, 177, 19, 119, 89, 164, 103, 132, 239, 84, 139, 68, 204, 157, 49, 41, 50, 89, 113, 159, 203, 51, 133, 120, 184, 210, 237, 15, 249, 187, 100, 253, 50, 16, 154, 112, 64, 193, 254, 10, 235, 200, 253, 84, 31, 169, 171, 39, 122, 70, 46, 186, 139, 212, 162, 173, 158, 41, 23, 86, 148, 172, 196, 237, 242, 58, 102, 180, 150, 238, 191, 25, 240, 204, 252, 125, 148, 29, 124, 51, 95, 10, 196, 55, 49, 159, 138, 144, 255, 126, 205, 43, 49, 42, 17, 59, 60, 77, 139, 177, 239, 64, 36, 224, 98, 205, 234, 70, 199, 103, 139, 218, 206, 207, 178, 217, 255, 32, 134, 59, 25, 221, 74, 22, 102, 82, 19, 20, 170, 142, 134, 42, 106, 249, 64, 80, 222, 28, 21, 169, 50, 235, 4, 237, 56, 81, 87, 76, 32, 251, 42, 6, 173, 105, 54, 191, 8, 136, 5, 245, 206, 239, 176, 9, 116, 24];\n\n  var iI =\n  /*#__PURE__*/\n  function (_X_3) {\n    _inherits(iI, _X_3);\n\n    function iI(e, t, i) {\n      _classCallCheck(this, iI);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(iI).call(this, e, tI, t, i));\n    }\n\n    return iI;\n  }(X_);\n\n  var rI = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 190, 100, 112, 230, 97, 199, 225, 96, 74, 99, 94, 248, 222, 162, 213, 95, 122, 158, 212, 233, 42, 22, 37, 217, 115, 36, 152, 30, 123, 116, 104, 212, 109, 129, 41, 220, 77, 213, 97, 124, 45, 4, 219, 197, 171, 40, 18, 149, 104, 20, 4, 248, 102, 64, 9, 50, 217, 124, 131, 180, 188, 159, 170, 63, 1, 84, 130, 150, 117, 14, 212, 118, 67, 165, 97, 207, 242, 251, 15, 30, 187, 188, 77, 79, 122, 67, 101, 252, 109, 244, 82, 37, 191, 227, 35, 114, 87, 57, 71, 99, 218, 155, 54, 101, 239, 138, 197, 13, 226, 228, 176, 157, 158, 87, 98, 55, 251, 79, 150, 64, 138, 200, 135, 40, 132, 135, 207, 146, 252, 222, 57, 58, 111, 151, 225, 78, 59, 36, 210, 70, 29, 121, 160, 210, 31, 109, 67, 167, 194, 177, 236, 91, 108, 164, 229, 130, 211, 59, 66, 93, 18, 107, 226, 54, 210, 51, 8, 77, 217, 19, 73, 187, 33, 30, 59, 9, 135, 162, 49, 5, 11, 225, 111, 119, 11, 247, 218, 129, 115, 83, 205, 170, 21, 4, 69, 210, 133, 134, 245, 109, 15, 177, 9, 81, 81, 203, 105, 42, 158, 12, 255, 151, 165, 230, 205, 5, 92, 196, 251, 211, 187, 27, 214, 43, 186, 91, 233, 85, 192, 229, 15, 71, 38, 220, 20, 38, 101, 44, 78, 7, 60, 251, 186, 75, 103, 108, 53, 166, 220, 186, 208, 194, 120, 207, 230, 159, 248, 22, 32, 142, 124, 96, 157, 222, 60, 191, 65, 145, 6, 239, 125, 151, 147, 50, 58, 130, 207, 110, 131, 223, 231, 137, 238, 28, 182, 216, 167, 198, 191, 37, 67, 76, 1, 144, 232, 218, 79, 72, 28, 65, 101, 43, 216, 64, 253, 16, 173, 179, 123, 140, 27, 233, 245, 199, 230, 36, 181, 102, 114, 247, 162, 18, 34, 20, 212, 25, 171, 24, 28, 143, 80, 94, 40, 167, 34, 209, 61, 117, 130, 1, 198, 196, 7, 21, 252, 180, 255, 92, 128, 119, 9, 48, 156, 138, 136, 151, 143, 23, 44, 52, 3, 40, 197, 228, 31, 123, 67, 163, 140, 32, 54, 204, 187, 149, 80, 19, 255, 82, 120, 195, 12, 110, 65, 56, 212, 143, 22, 78, 44, 234, 72, 140, 29, 118, 103, 18, 36, 7, 122, 50, 37, 139, 47, 142, 243, 25, 208, 88, 237, 126, 50, 103, 127, 19, 183, 29, 169, 29, 1, 55, 23, 100, 32, 129, 239, 243, 160, 61, 178, 197, 117, 199, 45, 57, 26, 165, 135, 92, 218, 59, 0, 197, 54, 13, 96, 40, 141, 212, 221, 131, 103, 46, 22, 228, 191, 167, 73, 20, 86, 62, 11, 147, 217, 116, 205, 203, 110, 134, 249, 51, 6, 123, 23, 86, 231, 157, 8, 144, 83, 126, 115, 118, 35, 96, 36, 229, 36, 220, 228, 143, 71, 45, 223, 129, 48, 236, 5, 145, 202, 188, 208, 184, 70, 241, 104, 255, 188, 181, 146, 210, 206, 144, 53, 77, 101, 120, 38, 8, 245, 80, 230, 165, 160, 183, 83, 202, 79, 127, 57, 214, 126, 242, 150, 208, 40, 239, 148, 35, 163, 201, 97, 74, 70, 214, 181, 63, 240, 147, 33, 253, 149, 140, 77, 197, 82, 126, 189, 231, 7, 196, 212, 80, 14, 151, 24, 57, 144, 243, 81, 234, 66, 24, 19, 236, 2, 137, 121, 246, 129, 65, 7, 99, 110, 174, 54, 74, 182, 81, 234, 142, 37, 72, 110, 220, 255, 64, 119, 10, 188, 111, 191, 228, 1, 205, 9, 204, 143, 56, 62, 125, 84, 106, 225, 131, 97, 192, 43, 240, 157, 161, 75, 168, 247, 44, 175, 65, 81, 192, 48, 21, 157, 167, 80, 191, 130, 161, 75, 85, 186, 174, 42, 117, 1, 68, 252, 204, 138, 254, 203, 152, 21, 13, 64, 144, 195, 207, 238, 229, 54, 103, 247, 159, 245, 211, 85, 191, 141, 168, 32, 234, 85, 46, 118, 12, 5, 199, 4, 19, 217, 203, 202, 156, 33, 143, 114, 116, 60, 66, 40, 58, 77, 208, 237, 171, 26, 72, 175, 114, 205, 248, 87, 137, 62, 210, 143, 151, 197, 167, 210, 241, 122, 150, 104, 122, 154, 2, 70, 102, 83, 19, 36, 141, 136, 199, 42, 79, 229, 71, 86, 194, 109, 31, 236, 80, 166, 17, 230, 109, 1, 40, 28, 46, 224, 56, 20, 230, 47, 100, 254, 116, 208, 76, 169, 157, 241, 175, 3, 70, 85, 31, 38, 245, 58, 33, 80, 145, 237, 8, 22, 71, 224, 158, 156, 31, 249, 81, 87, 247, 230, 199, 237, 96, 167, 123, 63, 243, 79, 156, 206, 203, 160, 54, 124, 68, 253, 215, 132, 235, 57, 185, 92, 238, 55, 59, 210, 104, 71, 26, 183, 180, 71, 12, 255, 224, 192, 65, 154, 72, 244, 8, 164, 10, 248, 46, 207, 30, 92, 1, 80, 244, 31, 189, 138, 88, 216, 218, 63, 100, 227, 116, 57, 119, 94, 135, 5, 126, 255, 32, 191, 163, 61, 209, 194, 88, 248, 112, 139, 173, 43, 69, 134, 3, 160, 151, 137, 25, 98, 239, 166, 19, 123, 208, 180, 31, 120, 30, 191, 75, 183, 179, 126, 180, 125, 92, 107, 105, 206, 138, 28, 67, 139, 3, 188, 230, 184, 255, 121, 13, 181, 45, 160, 114, 202, 194, 123, 87, 55, 124, 97, 164, 82, 95, 232, 216, 117, 62, 5, 90, 176, 82, 167, 52, 160, 153, 174, 168, 105, 146, 91, 248, 81, 79, 249, 97, 138, 133, 170, 245, 229, 132, 61, 5, 149, 224, 246, 194, 213, 61, 12, 109, 44, 136, 235, 95, 219, 133, 220, 27, 93, 36, 93, 124, 180, 81, 141, 152, 220, 170, 163, 229, 197, 124, 171, 232, 48, 70, 251, 106, 119, 150, 20, 16, 49, 119, 247, 42, 132, 36, 76, 254, 124, 177, 66, 175, 9, 1, 39, 92, 127, 195, 171, 198, 34, 2, 64, 144, 179, 72, 40, 151, 110, 89, 229, 42, 125, 33, 238, 16, 220, 228, 51, 203, 8, 1, 68, 145, 253, 133, 118, 93, 163, 129, 22, 13, 248, 65, 12, 4, 63, 101, 210, 70, 170, 138, 203, 14, 246, 54, 194, 195, 27, 107, 241, 175, 35, 171, 49, 52, 106, 121, 45, 36, 152, 85, 215, 132, 78, 167, 34, 18, 167, 245, 152, 133, 134, 170, 120, 182, 10, 146, 191, 37, 2, 205, 47, 125, 20, 203, 44, 88, 81, 32, 150, 223, 220, 218, 238, 254, 30, 212, 167, 221, 115, 156, 82, 226, 137, 220, 221, 97, 3, 139, 202, 33, 9, 27, 26, 126, 40, 215, 25, 126, 9, 82, 208, 49, 217, 14, 161, 81, 196, 61, 60, 87, 254, 213, 194, 81, 216, 161, 151, 209, 166, 222, 230, 24, 128, 117, 140, 92, 4, 203, 254, 170, 253, 249, 88, 90, 112, 226, 18, 44, 122, 39, 158, 158, 56, 69, 204, 159, 5, 179, 51, 197, 233, 139, 216, 102, 226, 206, 248, 15, 78, 112, 214, 126, 67, 28, 40, 38, 98, 190, 178, 206, 67, 94, 245, 254, 160, 101, 176, 32, 157, 26, 132, 83, 252, 228, 87, 242, 32, 127, 160, 112, 210, 224, 133, 149, 115, 41, 30, 16, 200, 69, 89, 81, 77, 144, 12, 106, 182, 73, 54, 28, 53, 195, 28, 216, 179, 179, 136, 35, 141, 102, 234, 177, 240, 34, 186, 106, 145, 245, 3, 84, 48, 251, 157, 245, 11, 217, 111, 227, 138, 42, 67, 114, 211, 177, 37, 103, 16, 71, 152, 72, 117, 123, 36, 213, 202, 56, 124, 227, 84, 8, 45, 229, 149, 165, 214, 69, 244, 169, 55, 68, 62, 94, 104, 228, 74, 205, 123, 222, 17, 7, 172, 158, 227, 74, 206, 149, 67, 175, 171, 251, 185, 121, 151, 223, 63, 35, 229, 32, 49, 190, 209, 120, 137, 69, 213, 214, 19, 150, 187, 177, 28, 12, 158, 153, 126, 149, 171, 167, 234, 120, 129, 109, 32, 157, 180, 75, 66, 56, 233, 115, 127, 230, 157, 32, 34, 143, 156, 31, 230, 168, 174, 125, 118, 195, 249, 243, 165, 81, 246, 10, 144, 15, 103, 139, 55, 173, 7, 59, 136, 69, 172, 54, 132, 165, 140, 78, 77, 230, 33, 169, 129, 188, 71, 209, 109, 161, 8, 57, 57, 199, 143, 31, 164, 43, 58, 130, 1, 110, 145, 31, 229, 13, 46, 149, 94, 244, 106, 76, 238, 105, 107, 1, 183, 177, 10, 61, 225, 94, 185, 116, 58, 183, 95, 225, 22, 119, 19, 248, 28, 13, 123, 125, 108, 158, 64, 184, 77, 245, 153, 162, 217, 227, 208, 41, 185, 211, 235, 41, 153, 181, 54, 166, 165, 11, 154, 55, 21, 184, 209, 192, 249, 44, 164, 160, 29, 229, 159, 82, 156, 198, 241, 183, 114, 83, 137, 186, 151, 148, 31, 21, 197, 216, 145, 32, 13, 50, 22, 241, 137, 39, 71, 28, 142, 160, 215, 107, 221, 45, 202, 104, 227, 110, 186, 12, 150, 145, 240, 51, 49, 44, 196, 115, 224, 238, 149, 189, 134, 99, 67, 241, 62, 157, 240, 114, 247, 195, 26, 200, 141, 97, 147, 249, 23, 150, 174, 10, 13, 219, 81, 73, 58, 242, 96, 250, 243, 15, 49, 218, 58, 230, 104, 252, 175, 150, 123, 86, 185, 84, 90, 198, 6, 36, 0, 99, 72, 28, 166, 238, 115, 231, 171, 249, 179, 71, 174, 68, 156, 227, 17, 198, 79, 73, 142, 99, 144, 20, 80, 62, 80, 191, 142, 46, 71, 9, 243, 6, 8, 214, 116, 72, 190, 106, 161, 19, 185, 100, 9, 187, 64, 94, 86, 203, 174, 156, 245, 222, 95, 54, 30, 148, 19, 11, 50, 112, 96, 61, 237, 159, 173, 7, 154, 127, 175, 79, 48, 97, 89, 78, 126, 66, 171, 204, 158, 195, 27, 226, 205, 222, 157, 89, 251, 90, 125, 37, 212, 27, 97, 3, 141, 247, 175, 50, 121, 7, 187, 68, 196, 181, 202, 167, 189, 57, 84, 81, 222, 23, 27, 84, 130, 176, 98, 66, 240, 207, 18, 23, 28, 163, 163, 194, 45, 37, 129, 202, 170, 97, 189, 0, 81, 238, 0, 39, 199, 163, 35, 211, 206, 247, 65, 29, 116, 242, 67, 102, 235, 13, 136, 232, 230, 114, 146, 187, 7, 254, 142, 26, 121, 16, 237, 5, 160, 201, 114, 94, 178, 199, 95, 212, 241, 45, 112, 180, 188, 72, 86, 114, 189, 155, 149, 149, 163, 210, 112, 101, 12, 69, 225, 75, 202, 223, 28, 242, 90, 215, 156, 169, 224, 245, 135, 128, 92, 148, 217, 131, 208, 255, 25, 135, 117, 136, 5, 104, 185, 249, 161, 228, 214, 16, 105, 204, 9, 182, 135, 153, 220, 101, 244, 160, 207, 58, 182, 118, 185, 240, 57, 245, 123, 13, 112, 182, 106, 229, 220, 90, 29, 86, 215, 96, 147, 232, 2, 55, 131, 225, 137, 68, 245, 89, 141, 252, 97, 3, 129, 155, 216, 223, 98, 116, 45, 78, 85, 141, 161, 74, 215, 7, 150, 171, 225, 59, 78, 221, 152, 236, 14, 117, 100, 208, 158, 86, 13, 185, 124, 87, 157, 111, 40, 187, 182, 124, 173, 71, 173, 23, 199, 52, 155, 190, 134, 11, 23, 64, 25, 215, 39, 115, 231, 173, 77, 72, 114, 54, 252, 116, 178, 59, 221, 106, 241, 119, 254, 30, 226, 241, 204, 233, 113, 197, 96, 146, 0, 41, 67, 3, 231, 126, 12, 218, 202, 22, 171, 114, 249, 176, 134, 160, 19, 216, 31, 229, 118, 226, 62, 242, 126, 126, 42, 127, 130, 68, 218, 218, 81, 202, 106, 217, 191, 25, 177, 82, 97, 81, 36, 232, 137, 58, 90, 216, 190, 117, 235, 20, 194, 144, 76, 178, 27, 213, 13, 208, 18, 29, 118, 126, 49, 98, 203, 179, 128, 237, 100, 32, 242, 189, 212, 6, 210, 210, 188, 161, 205, 13, 124, 119, 13, 215, 112, 41, 183, 176, 215, 168, 210, 182, 111, 1, 115, 2, 239, 141, 8, 177, 124, 112, 48, 197, 2, 239, 11, 99, 4, 36, 77, 69, 47, 244, 19, 153, 61, 19, 2, 96, 176, 7, 112, 122, 131, 169, 25, 189, 116, 171, 49, 12, 121, 162, 79, 154, 74, 251, 50, 233, 182, 63, 180, 224, 118, 49, 253, 21, 20, 16, 31, 144, 184, 93, 174, 231, 244, 183, 13, 49, 225, 189, 211, 73, 185, 49, 110, 142, 25, 226, 45, 176, 233, 204, 74, 33, 16, 205, 88, 131, 92, 157, 170, 175, 68, 170, 61, 53, 116, 165, 16, 27, 182, 160, 181, 87, 241, 15, 151, 85, 107, 76, 167, 129, 25, 172, 127, 184, 138, 153, 222, 228, 125, 64, 44, 45, 32, 12, 227, 148, 106, 152, 83, 240, 166, 54, 235, 32, 190, 12, 242, 164, 123, 189, 53, 194, 141, 104, 43, 202, 110, 4, 168, 119, 245, 232, 179, 178, 198, 1, 224, 87, 86, 160, 31, 19, 140, 233, 102, 191, 204, 4, 98, 138, 163, 191, 106, 24, 213, 47, 208, 82, 137, 132, 131, 16, 253, 84, 25, 144, 90, 159, 148, 16, 196, 84, 166, 61, 160, 101, 229, 227, 93, 118, 59, 87, 66, 16, 128, 59, 96, 131, 250, 20, 184, 150, 205, 91, 227, 201, 62, 35, 79, 180, 172, 173, 85, 197, 106, 153, 238, 229, 60, 204, 65, 193, 230, 94, 101, 177, 134, 6, 165, 53, 171, 142, 208, 155, 2, 11, 4, 202, 127, 54, 17, 142, 117, 227, 121, 128, 204, 192, 147, 147, 92, 189, 5, 224, 148, 72, 18, 83, 101, 126, 124, 228, 153, 242, 123, 229, 247, 92, 221, 6, 73, 227, 250, 87, 167, 194, 129, 187, 73, 38, 185, 109, 217, 240, 193, 88, 50, 178, 180, 151, 54, 197, 187, 137, 190, 166, 233, 1, 103, 204, 88, 31, 127, 185, 29, 65, 1, 29, 254, 223, 14, 83, 167, 215, 114, 248, 30, 173, 89, 173, 187, 69, 5, 105, 117, 15, 106, 94, 173, 63, 227, 25, 230, 190, 136, 168, 177, 175, 107, 91, 126, 254, 34, 188, 25, 118, 48, 12, 226, 130, 153, 162, 57, 47, 181, 212, 79, 160, 97, 64, 157, 246, 90, 53, 43, 149, 76, 102, 15, 195, 107, 58, 242, 84, 172, 29, 81, 198, 113, 81, 251, 138, 182, 154, 111, 30, 171, 129, 56, 17, 45, 214, 153, 112, 117, 203, 174, 40, 38, 234, 236, 32, 4, 112, 225, 26, 187, 195, 246, 252, 9, 218, 69, 160, 223, 178, 54, 148, 81, 8, 134, 151, 75, 248, 63, 224, 240, 48, 75, 250, 221, 85, 46, 100, 50, 3, 70, 64, 102, 111, 160, 155, 233, 59, 147, 184, 57, 61, 6, 126, 79, 176, 16, 185, 94, 166, 33, 135, 78, 42, 75, 140, 208, 140, 44, 153, 187, 64, 103, 119, 160, 236, 16, 239, 74, 218, 219, 212, 207, 110, 53, 30, 76, 248, 40, 111, 98, 44, 20, 113, 204, 233, 109, 135, 96, 107, 39, 163, 203, 125, 45, 157, 152, 71, 239, 175, 174, 159, 147, 80, 111, 93, 38, 253, 228, 154, 225, 181, 101, 12, 241, 127, 65, 49, 189, 5, 85, 151, 237, 213, 143, 14, 104, 138, 54, 52, 27, 4, 132, 67, 35, 156, 86, 157, 73, 16, 229, 222, 245, 110, 79, 165, 179, 56, 179, 53, 218, 229, 100, 58, 87, 149, 48, 231, 64, 63, 115, 67, 3, 172, 6, 186, 115, 154, 60, 53, 214, 152, 149, 89, 234, 37, 143, 82, 255, 64, 28, 183, 93, 112, 39, 70, 185, 57, 0, 199, 9, 61, 175, 219, 41, 76, 37, 176, 82, 125, 65, 53, 160, 214, 105, 62, 153, 244, 222, 96, 205, 6, 178, 85, 41, 240, 113, 0, 96, 149, 38, 3, 195, 18, 152, 41, 246, 3, 103, 29, 110, 134, 30, 101, 75, 46, 103, 199, 184, 20, 230, 8, 55, 120, 4, 229, 168, 35, 43, 7, 28, 161, 143, 87, 27, 87, 79, 255, 186, 44, 195, 158, 155, 181, 119, 81, 172, 217, 107, 95, 98, 55, 243, 186, 66, 105, 48, 224, 123, 232, 84, 156, 20, 10, 156, 208, 204, 52, 34, 228, 136, 97, 242, 200, 246, 211, 67, 202, 40, 241, 91, 92, 253, 9, 54, 72, 131, 221, 106, 178, 32, 44, 182, 4, 225, 193, 37, 20, 249, 249, 231, 10, 206, 18, 71, 254, 221, 187, 172, 88, 204, 6, 127, 138, 102, 7, 208, 75, 147, 219, 199, 177, 79, 36, 170, 101, 207, 177, 109, 95, 143, 217, 41, 199, 80, 183, 201, 2, 254, 12, 55, 23, 198, 14, 255, 69, 245, 138, 155, 129, 227, 167, 168, 130, 156, 135, 14, 96, 93, 48, 99, 143, 107, 126, 92, 117, 143, 112, 108, 193, 228, 84, 13, 41, 186, 27, 172, 92, 201, 149, 116, 19, 112, 197, 116, 209, 128, 102, 1, 55, 152, 177, 28, 37, 34, 50, 83, 41, 199, 74, 178, 59, 111, 67, 118, 35, 252, 36, 33, 87, 28, 170, 17, 215, 47, 90, 154, 124, 137, 15, 14, 211, 59, 75, 59, 30, 77, 0, 49, 37, 225, 191, 87, 101, 127, 214, 227, 160, 99, 174, 234, 82, 148, 235, 16, 241, 219, 147, 170, 127, 221, 250, 116, 39, 218, 156, 72, 227, 172, 55, 0, 79, 188, 76, 51, 222, 232, 24, 36, 62, 94, 154, 3, 61, 230, 146, 114, 253, 0, 128, 58, 253, 90, 72, 211, 242, 38, 39, 133, 153, 161, 119, 105, 195, 152, 225, 208, 105, 140, 80, 217, 186, 196, 157, 21, 116, 230, 116, 139, 25, 159, 143, 118, 128, 77, 201, 238, 247, 228, 15, 168, 4, 133, 148, 21, 148, 12, 44, 241, 7, 115, 17, 129, 176, 202, 46, 130, 122, 129, 235, 141, 223, 85, 21, 199, 65, 181, 169, 52, 174, 161, 153, 62, 25, 164, 115, 213, 89, 138, 199, 103, 79, 200, 165, 135, 249, 244, 27, 209, 178, 240, 129, 211, 61, 9, 111, 157, 147, 119, 36, 119, 255, 110, 130, 84, 49, 210, 225, 247, 100, 26, 121, 127, 163, 160, 26, 79, 99, 24, 77, 65, 32, 178, 109, 36, 27, 253, 173, 110, 183, 11, 14, 211, 57, 130, 254, 124, 104, 165, 219, 31, 70, 97, 14, 194, 39, 61, 26, 141, 125, 228, 126, 194, 184, 101, 160, 204, 106, 128, 144, 106, 103, 171, 18, 246, 129, 220, 85, 172, 151, 123, 5, 73, 155, 192, 175, 91, 157, 239, 61, 237, 116, 170, 65, 233, 56, 19, 49, 114, 168, 190, 3, 214, 53, 250, 90, 213, 244, 88, 101, 30, 229, 248, 124, 15, 71, 141, 27, 172, 235, 21, 129, 211, 72, 61, 172, 112, 170, 128, 135, 96, 196, 221, 255, 27, 176, 105, 188, 183, 121, 33, 37, 149, 53, 131, 226, 233, 29, 167, 234, 218, 109, 53, 185, 152, 36, 248, 53, 61, 235, 78, 21, 201, 214, 210, 163, 12, 251, 187, 45, 188, 137, 126, 127, 237, 92, 234, 91, 240, 225, 38, 194, 57, 213, 251, 237, 171, 30, 99, 52, 14, 49, 84, 101, 252, 237, 7, 166, 122, 114, 32, 107, 32, 207, 239, 136, 168, 178, 12, 11, 241, 233, 230, 146, 132, 18, 83, 233, 41, 172, 17, 6, 161, 42, 113, 87, 40, 255, 185, 1, 146, 128, 5, 240, 126, 131, 71, 42, 54, 124, 205, 2, 122, 71, 30, 222, 229, 40, 134, 142, 102, 97, 239, 151, 177, 1, 230, 231, 49, 123, 219, 28, 129, 91, 152, 112, 13, 154, 81, 197, 226, 255, 112, 158, 178, 177, 55, 181, 108, 138, 185, 245, 29, 186, 21, 73, 188, 209, 154, 200, 89, 116, 235, 198, 144, 36, 87, 248, 22, 7, 200, 122, 7, 148, 44, 42, 87, 140, 238, 204, 95, 231, 252, 0, 136, 0, 22, 39, 70, 123, 125, 165, 113, 227, 172, 146, 163, 128, 158, 36, 52, 91, 19, 36, 245, 27, 150, 138, 141, 11, 67, 239, 224, 65, 24, 116, 101, 7, 39, 46, 142, 172, 164, 243, 148, 0, 33, 226, 59, 47, 203, 137, 156, 241, 66, 250, 157, 30, 204, 101, 143, 134, 98, 238, 155, 226, 25, 184, 136, 219, 89, 100, 193, 11, 143, 71, 139, 243, 230, 151, 0, 249, 1, 78, 26, 32, 93, 104, 157, 67, 97, 164, 248, 86, 124, 146, 93, 74, 222, 228, 167, 55, 53, 100, 135, 216, 109, 13, 64, 37, 106, 177, 200, 200, 182, 92, 251, 69, 31, 243, 89, 80, 198, 14, 132, 203, 72, 103, 28, 104, 217, 24, 97, 223, 113, 11, 29, 178, 191, 210, 46, 162, 255, 68, 99, 8, 237, 213, 162, 152, 193, 183, 121, 203, 19, 108, 182, 29, 86, 26, 192, 103, 220, 103, 205, 154, 179, 197, 9, 22, 73, 127, 175, 146, 38, 119, 210, 0, 24, 180, 21, 245, 215, 204, 91, 186, 119, 138, 183, 239, 15, 155, 231, 248, 133, 39, 24, 101, 144, 236, 10, 230, 54, 174, 227, 73, 21, 110, 10, 160, 241, 232, 131, 14, 212, 127, 232, 59, 122, 65, 146, 54, 163, 9, 189, 190, 121, 88, 170, 62, 194, 14, 204, 152, 245, 38, 131, 37, 91, 81, 72, 114, 29, 115, 239, 182, 56, 44, 156, 159, 177, 180, 82, 160, 93, 97, 86, 183, 236, 50, 95, 85, 39, 71, 181, 225, 152, 143, 63, 123, 117, 34, 44, 109, 160, 166, 229, 240, 91, 138, 102, 54, 180, 173, 44, 50, 80, 42, 124, 7, 50, 124, 211, 239, 21, 94, 197, 185, 239, 213, 107, 142, 64, 95, 124, 125, 17, 180, 97, 189, 101, 52, 48, 19, 112, 12, 70, 9, 212, 177, 54, 118, 66, 84, 147, 236, 248, 26, 124, 95, 103, 135, 254, 124, 49, 112, 186, 99, 120, 90, 8, 194, 191, 88, 57, 242, 65, 61, 10, 104, 246, 197, 252, 19, 159, 58, 194, 75, 173, 242, 103, 8, 115, 84, 69, 238, 149, 26, 15, 159, 182, 141, 132, 119, 70, 29, 53, 20, 143, 46, 163, 204, 6, 236, 59, 45, 185, 172, 89, 119, 83, 38, 144, 36, 222, 96, 151, 26, 99, 195, 163, 170, 133, 92, 159, 214, 53, 150, 116, 90, 176, 69, 145, 130, 15, 172, 140, 217, 215, 101, 163, 115, 161, 65, 101, 8, 7, 183, 113, 213, 134, 58, 175, 130, 251, 143, 173, 248, 168, 135, 60, 159, 30, 194, 68, 208, 119, 120, 2, 40, 178, 227, 247, 161, 77, 47, 136, 46, 244, 163, 72, 65, 158, 25, 225, 195, 61, 132, 182, 204, 177, 186, 200, 81, 2, 65, 105, 212, 72, 94, 203, 232, 217, 182, 123, 251, 228, 160, 1, 161, 204, 123, 20, 37, 1, 77, 208, 179, 45, 149, 181, 122, 102, 190, 123, 213, 164, 231, 41, 216, 130, 234, 248, 208, 251, 252, 220, 84, 209, 67, 47, 61, 220, 5, 142, 162, 26, 236, 121, 142, 248, 132, 255, 65, 122, 203, 196, 102, 191, 187, 2, 195, 127, 255, 193, 92, 49, 91, 186, 154, 39, 156, 29, 211, 172, 49, 104, 245, 114, 153, 223, 211, 199, 249, 35, 130, 160, 128, 0, 152, 176, 183, 20, 236, 113, 193, 108, 26, 255, 11, 237, 102, 133, 245, 94, 115, 114, 10, 89, 229, 214, 221, 99, 149, 30, 99, 37, 246, 10, 26, 26, 39, 92, 123, 170, 73, 211, 127, 227, 54, 30, 86, 133, 159, 112, 225, 91, 148, 100, 174, 149, 75, 143, 14, 140, 20, 44, 64, 212, 5, 243, 8, 116, 63, 30, 97, 42, 123, 20, 73, 212, 85, 207, 83, 122, 27, 251, 233, 84, 10, 17, 236, 232, 83, 200, 127, 119, 143, 163, 204, 220, 167, 59, 231, 20, 106, 186, 222, 191, 8, 40, 234, 21, 25, 180, 13, 116, 250, 152, 224, 174, 75, 3, 205, 38, 173, 215, 236, 151, 185, 121, 254, 244, 154, 239, 17, 53, 106, 164, 61, 49, 116, 216, 118, 94, 150, 35, 181, 26, 238, 66, 49, 211, 221, 132, 146, 166, 115, 39, 136, 36, 205, 230, 179, 31, 197, 51, 148, 165, 109, 38, 70, 37, 148, 52, 44, 209, 250, 98, 58, 246, 225, 103, 198, 101, 26, 25, 196, 207, 8, 166, 21, 88, 252, 175, 253, 10, 88, 107, 157, 19, 225, 61, 12, 246, 221, 37, 239, 186, 167, 137, 142, 135, 222, 128, 174, 62, 95, 216, 38, 141, 157, 45, 232, 97, 217, 173, 203, 234, 116, 129, 69, 206, 189, 94, 221, 12, 54, 139, 186, 247, 184, 16, 200, 121, 244, 104, 8, 7, 35, 111, 47, 188, 10, 140, 92, 73, 143, 206, 203, 72, 122, 184, 20, 102, 197, 130, 64, 150, 63, 96, 239, 8, 132, 111, 217, 84, 91, 198, 32, 43, 100, 138, 241, 15, 160, 42, 190, 253, 193, 184, 164, 124, 29, 210, 96, 67, 224, 221, 182, 29, 218, 129, 149, 29, 128, 174, 98, 88, 88, 125, 56, 40, 255, 120, 5, 0, 87, 174, 42, 150, 90, 112, 201, 183, 169, 19, 57, 195, 191, 12, 58, 244, 235, 132, 25, 145, 72, 146, 214, 8, 125, 100, 135, 12, 5, 102, 97, 248, 174, 24, 159, 90, 33, 43, 187, 6, 61, 212, 241, 225, 190, 219, 252, 197, 123, 129, 164, 108, 123, 55, 230, 4, 153, 166, 105, 234, 15, 85, 216, 23, 56, 32, 3, 41, 110, 68, 146, 172, 133, 202, 98, 41, 7, 47, 152, 35, 255, 168, 106, 241, 226, 222, 77, 244, 52, 185, 65, 252, 227, 32, 66, 38, 11, 172, 60, 28, 28, 103, 84, 1, 1, 205, 182, 190, 28, 189, 102, 253, 43, 1, 191, 148, 116, 10, 227, 18, 81, 93, 80, 239, 157, 232, 215, 180, 163, 165, 161, 109, 177, 71, 150, 244, 144, 208, 160, 110, 22, 174, 60, 206, 43, 103, 121, 55, 103, 114, 115, 173, 238, 13, 10, 227, 251, 41, 176, 216, 158, 229, 216, 55, 234, 128, 128, 20, 167, 106, 181, 86, 163, 130, 215, 110, 149, 191, 10, 227, 215, 8, 214, 154, 178, 181, 15, 19, 0, 247, 250, 97, 74, 43, 157, 55, 94, 174, 41, 41, 9, 199, 97, 20, 91, 32, 18, 10, 43, 98, 240, 247, 203, 20, 250, 117, 160, 44, 229, 202, 187, 64, 54, 124, 15, 184, 169, 129, 27, 160, 240, 26, 61, 255, 60, 166, 60, 144, 209, 84, 55, 187, 186, 168, 13, 124, 125, 29, 17, 100, 249, 227, 62, 205, 78, 179, 163, 168, 139, 168, 21, 38, 83, 239, 151, 74, 43, 66, 2, 92, 72, 71, 94, 216, 134, 238, 20, 45, 158, 213, 164, 73, 57, 80, 47, 198, 184, 130, 223, 227, 71, 132, 133, 235, 177, 85, 174, 142, 124, 172, 200, 54, 229, 40, 126, 60, 76, 92, 216, 153, 56, 241, 174, 66, 141, 90, 226, 3, 30, 68, 234, 71, 187, 163, 112, 146, 255, 22, 143, 170, 204, 3, 127, 179, 81, 139, 160, 37, 77, 246, 128, 220, 196, 158, 153, 73, 177, 65, 199, 119, 29, 197, 144, 130, 248, 206, 155, 253, 108, 213, 124, 7, 223, 221, 162, 146, 134, 242, 65, 99, 162, 107, 120, 247, 214, 207, 96, 150, 169, 131, 208, 218, 221, 28, 24, 112, 208, 23, 1, 130, 142, 232, 56, 104, 45, 33, 158, 95, 255, 123, 31, 74, 76, 120, 178, 155, 213, 6, 195, 164, 8, 8, 69, 241, 197, 127, 83, 169, 21, 167, 19, 94, 143, 252, 33, 159, 248, 241, 170, 153, 147, 1, 149, 199, 201, 131, 170, 79, 236, 212, 209, 143, 107, 98, 24, 123, 56, 33, 193, 85, 247, 64, 225, 135, 210, 78, 145, 57, 16, 145, 71, 170, 20, 133, 87, 235, 4, 166, 239, 100, 82, 235, 81, 50, 223, 9, 193, 52, 49, 86, 129, 190, 196, 82, 165, 107, 63, 115, 161, 98, 33, 20, 193, 29, 42, 151, 205, 252, 124, 72, 245, 48, 181, 67, 7, 13, 21, 127, 59, 226, 188, 144, 129, 112, 244, 192, 121, 213, 80, 42, 196, 1, 13, 107, 108, 78, 0, 40, 121, 225, 148, 237, 234, 209, 216, 238, 9, 147, 226, 254, 96, 89, 212, 72, 193, 106, 75, 135, 74, 227, 67, 255, 92, 191, 81, 188, 124, 226, 149, 152, 142, 15, 159, 195, 238, 114, 55, 255, 166, 157, 230, 59, 148, 170, 166, 151, 65, 213, 104, 253, 253, 112, 150, 82, 147, 137, 27, 214, 100, 247, 65, 81, 92, 47, 86, 217, 7, 45, 120, 81, 130, 31, 236, 243, 76, 78, 3, 45, 105, 172, 220, 71, 48, 220, 94, 196, 249, 163, 193, 133, 50, 236, 205, 20, 55, 2, 63, 14, 127, 69, 113, 212, 204, 12, 58, 79, 89, 86, 29, 61, 199, 201, 64, 149, 6, 144, 182, 150, 129, 31, 18, 167, 120, 248, 82, 107, 25, 143, 128, 27, 161, 28, 25, 153, 183, 217, 238, 78, 186, 106, 92, 27, 202, 219, 165, 96, 0, 216, 234, 169, 73, 101, 39, 182, 113, 217, 240, 170, 116, 172, 221, 250, 233, 48, 49, 242, 83, 227, 92, 181, 184, 72, 230, 180, 21, 15, 108, 135, 25, 38, 153, 25, 124, 227, 26, 149, 73, 236, 39, 211, 244, 149, 58, 183, 132, 26, 223, 219, 174, 144, 117, 233, 219, 165, 205, 157, 159, 222, 184, 52, 47, 241, 201, 123, 65, 24, 44, 55, 215, 177, 168, 250, 179, 115, 190, 227, 123, 158, 163, 179, 224, 69, 196, 66, 207, 254, 243, 101, 221, 193, 140, 250, 4, 28, 222, 52, 96, 138, 160, 33, 218, 64, 118, 214, 234, 201, 152, 148, 91, 178, 111, 107, 144, 142, 6, 182, 102, 72, 188, 34, 213, 181, 26, 223, 58, 255, 103, 81, 17, 47, 169, 11, 245, 224, 123, 148, 215, 237, 186, 107, 75, 152, 90, 202, 166, 22, 149, 197, 5, 246, 238, 78, 76, 229, 106, 199, 94, 127, 195, 0, 45, 82, 6, 159, 103, 96, 138, 231, 71, 46, 107, 59, 216, 39, 43, 12, 221, 27, 214, 56, 155, 145, 66, 187, 169, 250, 235, 78, 211, 179, 239, 183, 198, 163, 93, 5, 196, 24, 174, 143, 225, 106, 139, 89, 98, 13, 127, 207, 184, 194, 30, 1, 165, 198, 169, 8, 197, 118, 86, 163, 221, 138, 23, 209, 61, 116, 79, 99, 233, 43, 130, 60, 244, 85, 229, 243, 172, 123, 148, 200, 120, 192, 127, 211, 52, 11, 159, 41, 95, 212, 230, 188, 169, 156, 137, 29, 212, 12, 148, 168, 148, 133, 243, 44, 241, 139, 127, 24, 246, 220, 227, 125, 209, 97, 60, 52, 162, 192, 146, 49, 161, 92, 138, 112, 189, 128, 59, 126, 125, 46, 207, 60, 79, 231, 174, 152, 209, 68, 223, 205, 2, 38, 14, 91, 116, 159, 255, 28, 27, 178, 248, 164, 104, 158, 79, 69, 214, 234, 157, 12, 75, 163, 83, 253, 245, 202, 61, 213, 176, 6, 197, 230, 29, 208, 166, 253, 194, 254, 235, 29, 141, 241, 70, 249, 15, 62, 0, 148, 163, 135, 52, 122, 40, 96, 87, 31, 179, 152, 51, 216, 133, 184, 122, 198, 203, 60, 115, 218, 191, 193, 16, 178, 25, 148, 252, 112, 104, 103, 252, 36, 92, 221, 28, 179, 43, 199, 198, 151, 128, 100, 252, 217, 161, 249, 34, 201, 172, 118, 52, 180, 252, 104, 7, 223, 44, 116, 102, 212, 21, 40, 224, 184, 55, 163, 210, 21, 207, 161, 239, 51, 54, 155, 41, 133, 18, 67, 48, 3, 165, 130, 251, 4, 79, 214, 57, 72, 130, 157, 212, 144],\n      nI = [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 24, 26, 29, 31, 34, 36, 39, 41, 44, 46, 49, 51, 54, 56, 59, 61, 64, 65, 66, 67, 68, 69, 70, 72, 73, 74, 75, 76, 77, 79, 80, 81, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 94, 95, 96, 97, 98, 99, 101, 102, 103, 104, 105, 106, 107, 109, 110, 111, 112, 113, 114, 116, 117, 118, 119, 120, 121, 123, 124, 125, 126, 127, 128, 129, 131, 132, 133, 134, 135, 136, 138, 139, 140, 141, 142, 143, 145, 146, 147, 148, 149, 150, 151, 153, 154, 155, 156, 157, 158, 160, 161, 162, 163, 164, 165, 166, 168, 169, 170, 171, 172, 173, 175, 176, 177, 178, 179, 180, 182, 183, 184, 185, 186, 187, 188, 190, 191, 192, 193, 194, 195, 197, 198, 199, 200, 201, 202, 204, 205, 206, 207, 208, 209, 210, 212, 213, 214, 215, 216, 217, 219, 220, 221, 222, 223, 224, 226, 226, 226, 227, 227, 227, 228, 228, 228, 229, 229, 229, 230, 230, 231, 231, 231, 232, 232, 232, 233, 233, 233, 234, 234, 235, 235, 235, 236, 236, 236, 237, 237, 237, 238, 238, 239, 239, 239, 240, 240, 240, 241, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n      sI = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 33, 35, 36, 37, 39, 40, 42, 43, 44, 46, 47, 49, 50, 51, 53, 54, 56, 57, 58, 59, 61, 62, 63, 64, 66, 67, 68, 69, 71, 72, 73, 74, 76, 77, 78, 79, 81, 82, 83, 84, 86, 87, 88, 90, 91, 92, 93, 95, 96, 97, 98, 100, 101, 102, 103, 105, 106, 107, 108, 110, 111, 112, 113, 115, 116, 117, 118, 120, 121, 122, 124, 125, 126, 127, 129, 130, 131, 132, 134, 135, 136, 137, 139, 140, 141, 142, 144, 145, 146, 147, 149, 150, 151, 152, 154, 155, 156, 158, 159, 160, 161, 163, 164, 165, 166, 168, 169, 170, 171, 173, 174, 175, 176, 178, 179, 180, 181, 183, 184, 185, 186, 188, 189, 190, 192, 193, 194, 195, 197, 198, 199, 200, 202, 203, 204, 205, 207, 208, 209, 210, 212, 213, 214, 215, 217, 218, 219, 220, 222, 223, 224, 226, 226, 226, 227, 227, 228, 228, 229, 229, 230, 230, 231, 231, 232, 232, 233, 233, 234, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238, 239, 239, 240, 240, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n      oI = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 35, 36, 37, 38, 39, 40, 41, 43, 44, 45, 46, 47, 48, 50, 51, 52, 53, 54, 55, 56, 58, 59, 60, 61, 62, 63, 65, 66, 67, 68, 69, 70, 72, 73, 74, 76, 77, 78, 80, 81, 83, 84, 85, 87, 88, 89, 91, 92, 94, 95, 96, 98, 99, 100, 102, 103, 105, 106, 107, 109, 110, 111, 113, 114, 116, 117, 118, 120, 121, 122, 124, 125, 127, 128, 129, 131, 132, 133, 135, 136, 138, 139, 140, 142, 143, 144, 146, 147, 149, 150, 151, 153, 154, 155, 157, 158, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 192, 193, 193, 194, 195, 195, 196, 197, 197, 198, 199, 199, 200, 201, 201, 202, 203, 203, 204, 205, 205, 206, 207, 207, 208, 209, 209, 210, 211, 211, 212, 213, 213, 214, 215, 215, 216, 217, 217, 218, 219, 219, 220, 221, 221, 222, 223, 223, 224, 225, 225, 226, 227, 227, 228, 229, 229, 230, 231, 231, 232, 233, 233, 234, 235, 235, 236, 237, 237, 238, 239, 239, 240, 241, 241, 242, 243, 243, 244, 245, 245, 246, 247, 247, 248, 249, 249, 250, 251, 251, 252, 253, 253, 254, 255];\n\n  var aI =\n  /*#__PURE__*/\n  function (_X_4) {\n    _inherits(aI, _X_4);\n\n    function aI(e, t, i, r) {\n      var _this104;\n\n      _classCallCheck(this, aI);\n\n      _this104 = _possibleConstructorReturn(this, _getPrototypeOf(aI).call(this, e, rI, i, r)), _this104.lightLevel = .1, _this104.rednessLevel = .5, _this104.mskin_he_max = 175 / 180 * 3.141593, _this104.mskin_he_min = 115 / 180 * 3.141593, _this104.mskin_hc_max = 173 / 180 * 3.141593, _this104.mskin_hc_min = 116 / 180 * 3.141593, _this104.mskin_hc_axis = 2.04203545, _this104.mfacts_rotate_c = 0, _this104.mfacts_rotate_le = 0, _this104.mfacts_rotate_ge = 0, _this104.tab_addr = null, _this104.lutTextures = [], _this104.inputTexture = t, _this104.init();\n      return _this104;\n    }\n\n    _createClass(aI, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\"),\n            t = this.gl.getUniformLocation(this.program, \"u_denoiseLevel\");\n        this.gl.uniform1f(t, this.denoiseLevel), this.gl.uniform1f(e, 1);\n        var i = this.gl.getUniformLocation(this.program, \"light\");\n        this.gl.uniform1f(i, this.lightLevel);\n        var r = this.gl.getUniformLocation(this.program, \"redness\");\n        this.gl.uniform1f(r, this.rednessLevel);\n        var n = this.gl.getUniformLocation(this.program, \"skin_he_max\"),\n            s = this.gl.getUniformLocation(this.program, \"skin_he_min\"),\n            o = this.gl.getUniformLocation(this.program, \"skin_hc_max\"),\n            a = this.gl.getUniformLocation(this.program, \"skin_hc_min\"),\n            c = this.gl.getUniformLocation(this.program, \"skin_hc_axis\"),\n            d = this.gl.getUniformLocation(this.program, \"facts_rotate_c\"),\n            l = this.gl.getUniformLocation(this.program, \"facts_rotate_le\"),\n            A = this.gl.getUniformLocation(this.program, \"facts_rotate_ge\");\n        this.gl.uniform1f(n, this.mskin_he_max), this.gl.uniform1f(s, this.mskin_he_min), this.gl.uniform1f(o, this.mskin_hc_max), this.gl.uniform1f(a, this.mskin_hc_min), this.gl.uniform1f(c, this.mskin_hc_axis), this.gl.uniform1f(d, this.mfacts_rotate_c), this.gl.uniform1f(l, this.mfacts_rotate_le), this.gl.uniform1f(A, this.mfacts_rotate_ge);\n        var u = this.gl.getUniformLocation(this.program, \"u_originImage\");\n        this.gl.activeTexture(this.gl.TEXTURE2), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.uniform1i(u, 2);\n        var h = [\"lighten_lut\"],\n            p = [this.gl.TEXTURE3];\n\n        for (var _e55 = 0; _e55 < h.length; _e55++) {\n          var _t73 = this.gl.getUniformLocation(this.program, h[_e55]);\n\n          this.gl.activeTexture(p[_e55]), this.gl.bindTexture(this.gl.TEXTURE_2D, this.lutTextures[_e55]), this.gl.uniform1i(_t73, _e55 + 3);\n        }\n      }\n    }, {\n      key: \"setParameters\",\n      value: function setParameters(e) {\n        void 0 !== e.denoiseLevel && (this.denoiseLevel = e.denoiseLevel), void 0 !== e.lightLevel && (this.lightLevel = e.lightLevel), void 0 !== e.rednessLevel && (this.rednessLevel = e.rednessLevel, this.updateRedness(this.rednessLevel)), e.lighteningContrastLevel && this.updateLut(e.lighteningContrastLevel);\n      }\n    }, {\n      key: \"init\",\n      value: function init() {\n        this.tab_addr = new Uint8Array(sI);\n        var e = [this.tab_addr],\n            t = [256],\n            i = [1];\n\n        for (var _r29 = 0; _r29 < e.length; _r29++) {\n          var _n18 = this.gl.createTexture();\n\n          if (!_n18) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"create lut texture failed\");\n          this.gl.bindTexture(this.gl.TEXTURE_2D, _n18), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.LUMINANCE, t[_r29], i[_r29], 0, this.gl.LUMINANCE, this.gl.UNSIGNED_BYTE, e[_r29]), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR), this.lutTextures.push(_n18);\n        }\n      }\n    }, {\n      key: \"updateRedness\",\n      value: function updateRedness(e) {\n        var t = 3.141593;\n        var i,\n            r,\n            n = e,\n            s = n;\n        n > 1 && (n = 1), n < 0 && (n = 0), s > 1 && (s = 1), s < 0 && (s = 0), this.mfacts_rotate_c = .8 * n, s < .8 && (s = 0), this.mskin_he_max = 175 / 180 * t, this.mskin_hc_max = 173 / 180 * t, this.mskin_he_min = (115 - 4 * s) / 180 * t, this.mskin_hc_min = (116 - 4 * s) / 180 * t, this.mskin_hc_axis = (117 - 4 * s) / 180 * t, this.mskin_hc_axis < this.mskin_hc_min && (this.mskin_hc_axis = this.mskin_hc_min), this.mskin_hc_min < t / 2 && (this.mskin_hc_min = t / 2), this.mskin_hc_axis < t / 2 && (this.mskin_hc_axis = t / 2), this.mskin_he_min < t / 2 && (this.mskin_he_min = t / 2), this.mskin_hc_max > t && (this.mskin_hc_max = t), this.mskin_hc_axis > t && (this.mskin_hc_axis = t), this.mskin_he_max > t && (this.mskin_he_max = t), i = this.mskin_he_max - this.mskin_hc_max, r = this.mskin_hc_max - this.mskin_hc_axis, this.mfacts_rotate_ge = i > .01 ? this.mfacts_rotate_c * r / i : this.mfacts_rotate_c, i = this.mskin_hc_min - this.mskin_he_min, r = this.mskin_hc_axis - this.mskin_hc_min, this.mfacts_rotate_le = i > .01 ? this.mfacts_rotate_c * r / i : this.mfacts_rotate_c;\n      }\n    }, {\n      key: \"updateLut\",\n      value: function updateLut(e) {\n        var t = null;\n        if (0 === e && (t = sI), 1 === e && (t = oI), 2 === e && (t = nI), !t) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"invalid ylut_table value:\" + e);\n        this.tab_addr = new Uint8Array(t);\n        var i = [this.tab_addr],\n            r = [256],\n            n = [1];\n\n        for (var _e56 = 0; _e56 < i.length; _e56++) {\n          this.gl.bindTexture(this.gl.TEXTURE_2D, this.lutTextures[_e56]), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.LUMINANCE, r[_e56], n[_e56], 0, this.gl.LUMINANCE, this.gl.UNSIGNED_BYTE, i[_e56]);\n        }\n      }\n    }]);\n\n    return aI;\n  }(X_);\n\n  var cI =\n  /*#__PURE__*/\n  function () {\n    function cI() {\n      _classCallCheck(this, cI);\n\n      this.gl = null, this.canvas = null, this.programs = [], this.commonProgram = null, this.inputTexture = null, this.outputTextures = [], this.fbos = [], this.originalFrameWidth = 0, this.originalFrameHeight = 0, this.enableBeauty = !1, this.denoiseLevel = 5, this.lightLevel = .35, this.rednessLevel = .5, this.lighteningContrastLevel = 1;\n    }\n\n    _createClass(cI, [{\n      key: \"setEnableBeauty\",\n      value: function setEnableBeauty(e) {\n        this.enableBeauty = !!e;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e, t, i) {\n        if (!Ul().supportWebGL) throw new Ad(ad.NOT_SUPPORTED, \"your browser is not support webGL\");\n        if (this.gl = i.getContext(\"webgl\"), !this.gl) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"can not get webgl context\");\n        if (this.initGL(e, t), !this.inputTexture) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"can not find input texture\");\n        this.canvas = i, this.programs.push(new J_(this.gl)), this.programs.push(new Z_(this.gl, e, t)), this.programs.push(new eI(this.gl, e, t)), this.programs.push(new iI(this.gl, e, t)), this.programs.push(new aI(this.gl, this.inputTexture, e, t)), this.commonProgram = this.programs[0].program, this.setDenoiseLevel(this.denoiseLevel), this.setLightLevel(this.lightLevel), this.setRednessLevel(this.rednessLevel), this.setContrastLevel(this.lighteningContrastLevel);\n      }\n    }, {\n      key: \"render\",\n      value: function render(e) {\n        if (!this.gl || !this.commonProgram || !this.canvas) return void vc.warning(\"video effect manager is not init!\");\n        var t = 0;\n        if (this.originalFrameHeight === e.videoWidth && this.originalFrameWidth === e.videoHeight) t = 2;else if (this.originalFrameHeight !== e.videoHeight || this.originalFrameWidth !== e.videoWidth) {\n          var i, r, n;\n          if (vc.debug(Xe(i = Xe(r = Xe(n = \"beauty effect: resolution changed \".concat(this.originalFrameWidth, \"x\")).call(n, this.originalFrameHeight, \" -> \")).call(r, e.videoWidth, \"x\")).call(i, e.videoHeight)), 0 === e.videoHeight || 0 === e.videoWidth) return void vc.debug(\"beauty effect: skip 0 resolution frame\");\n          this.canvas.width = e.videoWidth, this.canvas.height = e.videoHeight, e.setAttribute(\"width\", e.videoWidth.toString()), e.setAttribute(\"height\", e.videoHeight.toString()), this.release(), this.init(e.videoWidth, e.videoHeight, this.canvas);\n        }\n        this.gl.viewport(0, 0, e.videoWidth, e.videoHeight), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, e);\n        var s = this.enableBeauty ? this.programs.length - 1 : 0;\n\n        for (var _e57 = 0; _e57 <= s; _e57++) {\n          var _i37 = this.programs[_e57].program;\n          this.gl.useProgram(_i37);\n\n          var _r30 = this.gl.getUniformLocation(_i37, \"u_image\");\n\n          this.programs[_e57].setUniforms(), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.fbos[t + _e57 % 2]), this.gl.clearColor(0, 0, 0, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT), this.gl.drawArrays(this.gl.TRIANGLES, 0, 6), this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, this.outputTextures[t + _e57 % 2]), this.gl.uniform1i(_r30, 0);\n        }\n\n        this.gl.useProgram(this.commonProgram);\n        var o = this.gl.getUniformLocation(this.commonProgram, \"u_flipY\");\n        this.gl.uniform1f(o, -1), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null), this.gl.clearColor(0, 0, 0, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT), this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n      }\n    }, {\n      key: \"setDenoiseLevel\",\n      value: function setDenoiseLevel(e) {\n        var t;\n        Xi(t = this.programs).call(t, function (t) {\n          t instanceof X_ && t.setParameters({\n            denoiseLevel: e\n          });\n        }), this.denoiseLevel = e;\n      }\n    }, {\n      key: \"setLightLevel\",\n      value: function setLightLevel(e) {\n        var t;\n        Xi(t = this.programs).call(t, function (t) {\n          t instanceof X_ && t.setParameters({\n            lightLevel: e\n          });\n        }), this.lightLevel = e;\n      }\n    }, {\n      key: \"setRednessLevel\",\n      value: function setRednessLevel(e) {\n        var t;\n        Xi(t = this.programs).call(t, function (t) {\n          t instanceof X_ && t.setParameters({\n            rednessLevel: e\n          });\n        }), this.rednessLevel = e;\n      }\n    }, {\n      key: \"setContrastLevel\",\n      value: function setContrastLevel(e) {\n        var t;\n        Xi(t = this.programs).call(t, function (t) {\n          t instanceof X_ && t.setParameters({\n            lighteningContrastLevel: e\n          });\n        }), this.lighteningContrastLevel = e;\n      }\n    }, {\n      key: \"setSize\",\n      value: function setSize(e, t) {\n        var i;\n        Xi(i = this.programs).call(i, function (i) {\n          i instanceof X_ && i.setSize(e, t);\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release() {\n        this.gl = null, this.commonProgram = null, this.inputTexture = null, this.programs = [], this.outputTextures = [], this.fbos = [];\n      }\n    }, {\n      key: \"initGL\",\n      value: function initGL(e, t) {\n        if (!this.gl) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"can not find webgl context\");\n        this.inputTexture = this.gl.createTexture(), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n\n        for (var _i38 = 0; _i38 < 4; _i38++) {\n          var _r31 = this.gl.createTexture();\n\n          if (!_r31) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"create texture failed\");\n          this.gl.bindTexture(this.gl.TEXTURE_2D, _r31), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), _i38 < 2 ? this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, e, t, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null) : this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, t, e, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n\n          var _n19 = this.gl.createFramebuffer();\n\n          if (!_n19) throw new Ad(ad.WEBGL_INTERNAL_ERROR, \"create frame buffer failed\");\n          this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, _n19), this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, _r31, 0), this.outputTextures.push(_r31), this.fbos.push(_n19);\n        }\n\n        this.gl.viewport(0, 0, e, t), this.originalFrameWidth = e, this.originalFrameHeight = t;\n      }\n    }]);\n\n    return cI;\n  }();\n\n  var dI =\n  /*#__PURE__*/\n  function () {\n    function dI() {\n      _classCallCheck(this, dI);\n\n      this.targetFrameRate = 0, this.recordedFrameCount = 0, this.recordingTime = 2;\n    }\n\n    _createClass(dI, [{\n      key: \"startRecordBeautyEffectOutput\",\n      value: function () {\n        var _startRecordBeautyEffectOutput = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee84(e) {\n          var t,\n              i,\n              _args84 = arguments;\n          return _regeneratorRuntime.wrap(function _callee84$(_context84) {\n            while (1) {\n              switch (_context84.prev = _context84.next) {\n                case 0:\n                  t = _args84.length > 1 && _args84[1] !== undefined ? _args84[1] : 4;\n\n                  if (!this.recordID) {\n                    _context84.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"another beauty effect recording is in progress\");\n\n                case 3:\n                  i = wh(6, \"\");\n                  this.recordID = i;\n                  this.targetFrameRate = e;\n                  this.recordedFrameCount = 0;\n                  this.recordingTime = t;\n                  _context84.next = 10;\n                  return Th(1e3 * this.recordingTime);\n\n                case 10:\n                  return _context84.abrupt(\"return\", this.recordID !== i ? (this.recordID = void 0, !0) : (this.recordID = void 0, this.recordedFrameCount < this.targetFrameRate * this.recordingTime / 2 ? (vc.warning(\"detect beauty effect overload, current framerate\", this.recordedFrameCount / 2), !1) : (vc.debug(\"beauty effect current framerate\", this.recordedFrameCount / 2), !0)));\n\n                case 11:\n                case \"end\":\n                  return _context84.stop();\n              }\n            }\n          }, _callee84, this);\n        }));\n\n        function startRecordBeautyEffectOutput(_x130) {\n          return _startRecordBeautyEffectOutput.apply(this, arguments);\n        }\n\n        return startRecordBeautyEffectOutput;\n      }()\n    }, {\n      key: \"stopRecordBeautyEffectOutput\",\n      value: function stopRecordBeautyEffectOutput() {\n        this.targetFrameRate = 0, this.recordedFrameCount = 0, this.recordID = void 0;\n      }\n    }, {\n      key: \"addFrame\",\n      value: function addFrame() {\n        this.recordID && (this.recordedFrameCount += 1);\n      }\n    }]);\n\n    return dI;\n  }();\n\n  var lI =\n  /*#__PURE__*/\n  function (_ref53) {\n    _inherits(lI, _ref53);\n\n    function lI() {\n      var _this105;\n\n      _classCallCheck(this, lI);\n\n      _this105 = _possibleConstructorReturn(this, _getPrototypeOf(lI).call(this)), _this105.kind = \"video\", _this105.fps = 15, _this105.overloadDetector = new dI(), _this105.enabled = !1, _this105.stopChromeBackgroundLoop = null, _this105.lastRenderTime = 0, _this105.fps = 30, _this105.manager = new cI();\n      return _this105;\n    }\n\n    _createClass(lI, [{\n      key: \"setBeautyEffectOptions\",\n      value: function () {\n        var _setBeautyEffectOptions = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee85(e, t) {\n          var _e58, _e59, _e60, _e61;\n\n          return _regeneratorRuntime.wrap(function _callee85$(_context85) {\n            while (1) {\n              switch (_context85.prev = _context85.next) {\n                case 0:\n                  if (function (e) {\n                    void 0 !== e.smoothnessLevel && pd(e.smoothnessLevel, \"options.smoothnessLevel\", 0, 1, !1), void 0 !== e.lighteningLevel && pd(e.lighteningLevel, \"options.lighteningLevel\", 0, 1, !1), void 0 !== e.rednessLevel && pd(e.rednessLevel, \"options.rednessLevel\", 0, 1, !1), void 0 !== e.lighteningContrastLevel && hd(e.lighteningContrastLevel, \"options.lighteningContrastLevel\", [0, 1, 2]);\n                  }(t), void 0 !== t.smoothnessLevel) {\n                    _e58 = Math.max(.1, 10 * t.smoothnessLevel);\n                    this.manager.setDenoiseLevel(_e58);\n                  }\n\n                  if (void 0 !== t.lighteningLevel) {\n                    _e59 = Math.max(.1, t.lighteningLevel / 2);\n                    this.manager.setLightLevel(_e59);\n                  }\n\n                  if (void 0 !== t.rednessLevel) {\n                    _e60 = Math.max(.01, t.rednessLevel);\n                    this.manager.setRednessLevel(_e60);\n                  }\n\n                  if (void 0 !== t.lighteningContrastLevel) {\n                    _e61 = t.lighteningContrastLevel;\n                    this.manager.setContrastLevel(_e61);\n                  }\n\n                  _context85.t0 = this.enabled !== e;\n\n                  if (!_context85.t0) {\n                    _context85.next = 17;\n                    break;\n                  }\n\n                  this.manager.setEnableBeauty(e);\n                  this.enabled = e;\n\n                  if (!e) {\n                    _context85.next = 15;\n                    break;\n                  }\n\n                  _context85.t1 = this.input;\n\n                  if (!_context85.t1) {\n                    _context85.next = 13;\n                    break;\n                  }\n\n                  _context85.next = 13;\n                  return this.startEffect();\n\n                case 13:\n                  _context85.next = 17;\n                  break;\n\n                case 15:\n                  _context85.next = 17;\n                  return this.stopEffect();\n\n                case 17:\n                case \"end\":\n                  return _context85.stop();\n              }\n            }\n          }, _callee85, this);\n        }));\n\n        function setBeautyEffectOptions(_x131, _x132) {\n          return _setBeautyEffectOptions.apply(this, arguments);\n        }\n\n        return setBeautyEffectOptions;\n      }()\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.onOutputChange = void 0, this.stopEffect(), this.enabled = !1;\n      }\n    }, {\n      key: \"startEffect\",\n      value: function () {\n        var _startEffect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee86() {\n          var _this106 = this;\n\n          var e, t, i;\n          return _regeneratorRuntime.wrap(function _callee86$(_context86) {\n            while (1) {\n              switch (_context86.prev = _context86.next) {\n                case 0:\n                  e = pa();\n\n                  if (this.input) {\n                    _context86.next = 3;\n                    break;\n                  }\n\n                  return _context86.abrupt(\"return\", void vc.warning(\"video track is null, fail to start video effect!\"));\n\n                case 3:\n                  if (!(this.input && this.output && this.input !== this.output)) {\n                    _context86.next = 5;\n                    break;\n                  }\n\n                  return _context86.abrupt(\"return\", void vc.warning(\"video effect is already enabled\"));\n\n                case 5:\n                  _context86.next = 7;\n                  return this.renderWithWebGL();\n\n                case 7:\n                  t = _context86.sent;\n                  _context86.next = 10;\n                  return this.updateOutput(t);\n\n                case 10:\n                  vc.info(\"start video effect, output:\", this.output);\n                  this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then(function (e) {\n                    e || _this106.onOverload && _this106.onOverload();\n                  });\n\n                  i = function i() {\n                    _this106.enabled && requestAnimationFrame(i);\n                    var e = La(),\n                        t = 1e3 / _this106.fps,\n                        r = _this106.lastRenderTime ? e - _this106.lastRenderTime : t;\n                    r < t || (_this106.lastRenderTime = e - (r - t), _this106.video && _this106.video.paused && _this106.video.play(), _this106.enabled && _this106.video && (_this106.manager.render(_this106.video), _this106.output && _this106.output.requestFrame && _this106.output.requestFrame(), _this106.overloadDetector.addFrame()));\n                  };\n\n                  requestAnimationFrame(i), e.name === Aa.CHROME && document.addEventListener(\"visibilitychange\", function () {\n                    document.hidden ? _this106.stopChromeBackgroundLoop = gu(function () {\n                      _this106.enabled && _this106.video && _this106.manager.render(_this106.video), _this106.output && _this106.output.requestFrame && _this106.output.requestFrame(), _this106.overloadDetector.addFrame();\n                    }, _this106.fps) : _this106.stopChromeBackgroundLoop && (_this106.stopChromeBackgroundLoop(), _this106.stopChromeBackgroundLoop = null);\n                  }, !1);\n\n                case 14:\n                case \"end\":\n                  return _context86.stop();\n              }\n            }\n          }, _callee86, this);\n        }));\n\n        function startEffect() {\n          return _startEffect.apply(this, arguments);\n        }\n\n        return startEffect;\n      }()\n    }, {\n      key: \"stopEffect\",\n      value: function () {\n        var _stopEffect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee87() {\n          return _regeneratorRuntime.wrap(function _callee87$(_context87) {\n            while (1) {\n              switch (_context87.prev = _context87.next) {\n                case 0:\n                  vc.info(\"stop video effect\");\n                  this.overloadDetector.stopRecordBeautyEffectOutput();\n                  this.manager.release();\n                  this.canvas && this.canvas.remove();\n                  this.video && this.video.remove();\n                  this.canvas = void 0;\n                  this.video = void 0;\n                  _context87.next = 9;\n                  return this.updateOutput(this.input);\n\n                case 9:\n                case \"end\":\n                  return _context87.stop();\n              }\n            }\n          }, _callee87, this);\n        }));\n\n        function stopEffect() {\n          return _stopEffect.apply(this, arguments);\n        }\n\n        return stopEffect;\n      }()\n    }, {\n      key: \"_setInput\",\n      value: function () {\n        var _setInput2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee88(e) {\n          return _regeneratorRuntime.wrap(function _callee88$(_context88) {\n            while (1) {\n              switch (_context88.prev = _context88.next) {\n                case 0:\n                  _context88.t0 = this.enabled && !this.video;\n\n                  if (!_context88.t0) {\n                    _context88.next = 4;\n                    break;\n                  }\n\n                  _context88.next = 4;\n                  return this.startEffect();\n\n                case 4:\n                case \"end\":\n                  return _context88.stop();\n              }\n            }\n          }, _callee88, this);\n        }));\n\n        function _setInput(_x133) {\n          return _setInput2.apply(this, arguments);\n        }\n\n        return _setInput;\n      }()\n    }, {\n      key: \"_removeInput\",\n      value: function _removeInput() {\n        this.stopEffect();\n      }\n    }, {\n      key: \"renderWithWebGL\",\n      value: function () {\n        var _renderWithWebGL = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee89() {\n          var _this107 = this;\n\n          var e, t, i, r, n, s;\n          return _regeneratorRuntime.wrap(function _callee89$(_context89) {\n            while (1) {\n              switch (_context89.prev = _context89.next) {\n                case 0:\n                  if (this.input) {\n                    _context89.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.BEAUTY_PROCESSOR_INTERNAL_ERROR, \"can not renderWithWebGL, no input\");\n\n                case 2:\n                  this.canvas && (this.canvas.remove(), this.canvas = void 0), this.video && (this.video.remove(), this.video = void 0), this.canvas = document.createElement(\"canvas\"), this.video = document.createElement(\"video\"), this.video.setAttribute(\"autoplay\", \"\"), this.video.setAttribute(\"muted\", \"\"), this.video.muted = !0, this.video.setAttribute(\"playsinline\", \"\"), this.video.setAttribute(\"style\", \"display:none\"), this.video.srcObject = new MediaStream([this.input]);\n                  t = new As(function (e) {\n                    var t = function t() {\n                      _this107.video && _this107.video.removeEventListener(\"playing\", t), e(void 0);\n                    };\n\n                    _this107.video && _this107.video.addEventListener(\"playing\", t);\n                  });\n                  this.video.play();\n                  _context89.next = 7;\n                  return t;\n\n                case 7:\n                  i = this.input.getSettings(), r = i.width || this.video.videoWidth, n = i.height || this.video.videoHeight;\n\n                  if (!(i.frameRate && this.fps !== i.frameRate && (this.fps = i.frameRate, vc.debug(\"beauty video processor: set fps to\", this.fps)), vc.debug(Xe(e = \"beauty video processor: width \".concat(r, \" height \")).call(e, n)), !r || !n)) {\n                    _context89.next = 10;\n                    break;\n                  }\n\n                  throw new Ad(ad.BEAUTY_PROCESSOR_INTERNAL_ERROR, \"can not get track resolution\");\n\n                case 10:\n                  this.canvas.width = r, this.canvas.height = n, this.video.setAttribute(\"width\", r.toString()), this.video.setAttribute(\"height\", n.toString()), this.manager.init(r, n, this.canvas);\n                  s = Ul();\n                  return _context89.abrupt(\"return\", this.canvas.captureStream(s.supportRequestFrame ? 0 : this.fps).getVideoTracks()[0]);\n\n                case 13:\n                case \"end\":\n                  return _context89.stop();\n              }\n            }\n          }, _callee89, this);\n        }));\n\n        function renderWithWebGL() {\n          return _renderWithWebGL.apply(this, arguments);\n        }\n\n        return renderWithWebGL;\n      }()\n    }]);\n\n    return lI;\n  }(\n  /*#__PURE__*/\n  function () {\n    function _class10() {\n      _classCallCheck(this, _class10);\n    }\n\n    _createClass(_class10, [{\n      key: \"setInput\",\n      value: function () {\n        var _setInput3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee90(e) {\n          return _regeneratorRuntime.wrap(function _callee90$(_context90) {\n            while (1) {\n              switch (_context90.prev = _context90.next) {\n                case 0:\n                  if (!(e !== this.input)) {\n                    _context90.next = 7;\n                    break;\n                  }\n\n                  if (!(e.kind !== this.kind)) {\n                    _context90.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR);\n\n                case 3:\n                  this.input && this.removeInput();\n                  this.input = e;\n                  _context90.next = 7;\n                  return this._setInput(e);\n\n                case 7:\n                case \"end\":\n                  return _context90.stop();\n              }\n            }\n          }, _callee90, this);\n        }));\n\n        function setInput(_x134) {\n          return _setInput3.apply(this, arguments);\n        }\n\n        return setInput;\n      }()\n    }, {\n      key: \"removeInput\",\n      value: function removeInput() {\n        this.input = void 0, this._removeInput();\n      }\n    }, {\n      key: \"updateOutput\",\n      value: function () {\n        var _updateOutput = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee91(e) {\n          return _regeneratorRuntime.wrap(function _callee91$(_context91) {\n            while (1) {\n              switch (_context91.prev = _context91.next) {\n                case 0:\n                  _context91.t0 = this.output !== e;\n\n                  if (!_context91.t0) {\n                    _context91.next = 7;\n                    break;\n                  }\n\n                  this._output = e;\n                  _context91.t1 = this.onOutputChange;\n\n                  if (!_context91.t1) {\n                    _context91.next = 7;\n                    break;\n                  }\n\n                  _context91.next = 7;\n                  return this.onOutputChange();\n\n                case 7:\n                case \"end\":\n                  return _context91.stop();\n              }\n            }\n          }, _callee91, this);\n        }));\n\n        function updateOutput(_x135) {\n          return _updateOutput.apply(this, arguments);\n        }\n\n        return updateOutput;\n      }()\n    }, {\n      key: \"replaceOriginMediaStream\",\n      value: function replaceOriginMediaStream(e, t) {\n        var _this108 = this;\n\n        var i, r;\n        var n = Vs(i = e.getTracks()).call(i, function (e) {\n          return e.kind === _this108.kind;\n        });\n        n && e.removeTrack(n);\n        var s = Vs(r = t.getTracks()).call(r, function (e) {\n          return e.kind === _this108.kind;\n        });\n        void 0 === this.output && s && e.addTrack(s), this.output && (vc.debug(\"replace \".concat(this.output.kind, \" track to origin media stream\")), e.addTrack(this.output));\n      }\n    }, {\n      key: \"output\",\n      get: function get() {\n        return this._output;\n      }\n    }]);\n\n    return _class10;\n  }());\n\n  function AI(e) {\n    var t = {};\n    if (e.facingMode && (t.facingMode = e.facingMode), e.cameraId && (t.deviceId = {\n      exact: e.cameraId\n    }), !e.encoderConfig) return t;\n    var i = Lc(e.encoderConfig);\n    return t.width = i.width, t.height = i.height, !Da() && i.frameRate && (t.frameRate = i.frameRate), pa().name === Aa.EDGE && \"object\" == typeof t.frameRate && (t.frameRate.max = 60), Ta() && (t.frameRate = {\n      ideal: 30,\n      max: 30\n    }), t;\n  }\n\n  function uI(e) {\n    var t = {};\n    e.screenSourceType && (t.mediaSource = e.screenSourceType), e.extensionId && Sa() && (t.extensionId = e.extensionId), e.electronScreenSourceId && (t.sourceId = e.electronScreenSourceId);\n    var i = e.encoderConfig ? Pc(e.encoderConfig) : null;\n    return t.mandatory = {\n      chromeMediaSource: \"desktop\",\n      maxWidth: i ? i.width : void 0,\n      maxHeight: i ? i.height : void 0\n    }, i && i.frameRate && (\"number\" == typeof i.frameRate ? (t.mandatory.maxFrameRate = i.frameRate, t.mandatory.minFrameRate = i.frameRate) : (t.mandatory.maxFrameRate = i.frameRate.max || i.frameRate.ideal || i.frameRate.exact || void 0, t.mandatory.minFrameRate = i.frameRate.min || i.frameRate.ideal || i.frameRate.exact || void 0), t.frameRate = i.frameRate), i && i.width && (t.width = i.width), i && i.height && (t.height = i.height), t;\n  }\n\n  function hI(e) {\n    var t = {};\n\n    if (Da() || (void 0 !== e.AGC && (t.autoGainControl = e.AGC, Sa() && (t.googAutoGainControl = e.AGC, t.googAutoGainControl2 = e.AGC)), void 0 !== e.AEC && (t.echoCancellation = e.AEC), void 0 !== e.ANS && (t.noiseSuppression = e.ANS, Sa() && (t.googNoiseSuppression = e.ANS))), e.encoderConfig) {\n      var _i39 = Uc(e.encoderConfig);\n\n      t.channelCount = _i39.stereo ? 2 : 1, t.sampleRate = _i39.sampleRate, t.sampleSize = _i39.sampleSize;\n    }\n\n    return e.microphoneId && (t.deviceId = {\n      exact: e.microphoneId\n    }), Sa() && 2 === t.channelCount && (t.googAutoGainControl = !1, t.googAutoGainControl2 = !1, t.echoCancellation = !1, t.googNoiseSuppression = !1), pa().os === la.ANDROID && (t.sampleRate = void 0), t;\n  }\n\n  var pI, EI;\n  !function (e) {\n    e.COVERED = \"COVERED\", e.POSITION = \"POSITION\", e.SIZE = \"SIZE\", e.STYLE = \"STYLE\";\n  }(pI || (pI = {})), function (e) {\n    e.UNMOUNTED = \"UNMOUNTED\", e.INVALID_HTML_ELEMENT = \"INVALID_HTML_ELEMENT\";\n  }(EI || (EI = {}));\n  var gI = new (\n  /*#__PURE__*/\n  function () {\n    function _class11() {\n      var _this109 = this;\n\n      _classCallCheck(this, _class11);\n\n      this._clientSize = null, this.getClientWidth = function () {\n        return document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth;\n      }, this.getClientHeight = function () {\n        return document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight;\n      }, this.getStyle = function (e) {\n        return window.getComputedStyle(e, null);\n      }, this.checkCssVisibleProperty = function (e) {\n        var t;\n        var i = !0;\n\n        var r = _this109.getStyle(e),\n            n = r.display,\n            s = r.visibility,\n            o = r.opacity,\n            a = r.filter;\n\n        if ((\"none\" === n || eo(t = [\"hidden\", \"collapse\"]).call(t, s) || Number(o) < .1) && (i = !1), !i) return !1;\n\n        if (a) {\n          var c;\n\n          var _e62 = Fr(c = a.split(\" \")).call(c, function (e) {\n            var t;\n            var i = e.split(\"(\")[0];\n            return eo(t = [\"brightness\", \"blur\", \"opacity\"]).call(t, i);\n          }),\n              _t74 = Es(_e62).call(_e62, function (e) {\n            var _e$split = e.split(/\\(|\\)/),\n                _e$split2 = _slicedToArray(_e$split, 2),\n                t = _e$split2[0],\n                i = _e$split2[1];\n\n            return [t, Number(i.match(/^[0-9\\.]+/))];\n          });\n\n          Xi(_t74).call(_t74, function (e) {\n            var _e63 = _slicedToArray(e, 2),\n                t = _e63[0],\n                r = _e63[1];\n\n            switch (t) {\n              case \"brightness\":\n                (r < .1 || r > 3) && (i = !1);\n                break;\n\n              case \"blur\":\n                r > 3 && (i = !1);\n                break;\n\n              case \"opacity\":\n                r < .1 && (i = !1);\n            }\n          });\n        }\n\n        return i;\n      }, this.checkPropertyUpToAllParentNodes = function (e, t) {\n        var i = !0,\n            r = !0;\n\n        var n = function n(e) {\n          return t(e);\n        };\n\n        var s = e;\n\n        for (; s && r;) {\n          n(s) || (i = !1, r = !1), s = s.parentElement, s || (r = !1);\n        }\n\n        return i;\n      }, this.checkActualCssVisibleIncludeInherit = function (e) {\n        return _this109.checkPropertyUpToAllParentNodes(e, _this109.checkCssVisibleProperty);\n      }, this.getSizeAboutClient = function (e) {\n        var _e$getBoundingClientR = e.getBoundingClientRect(),\n            t = _e$getBoundingClientR.width,\n            i = _e$getBoundingClientR.height,\n            r = _e$getBoundingClientR.left,\n            n = _e$getBoundingClientR.right,\n            s = _e$getBoundingClientR.top,\n            o = _e$getBoundingClientR.bottom,\n            a = _this109.getClientWidth(),\n            c = _this109.getClientHeight();\n\n        return {\n          width: t,\n          height: i,\n          left: r,\n          right: n,\n          top: s,\n          bottom: o,\n          clientWidth: a,\n          clientHeight: c,\n          clientMin: Math.min(a, c)\n        };\n      }, this.checkActualSize = function () {\n        var _this109$_clientSize = _this109._clientSize,\n            e = _this109$_clientSize.width,\n            t = _this109$_clientSize.height,\n            i = _this109$_clientSize.clientMin;\n        return _this109.checkSizeIsVisible(e, t, i);\n      }, this.elementFromPoint = function (e, t) {\n        return document.elementFromPoint ? document.elementFromPoint(e, t) : null;\n      }, this.checkCoverForAPoint = function (e, t, i) {\n        var r = _this109.elementFromPoint(e, t);\n\n        return null !== r && r !== i;\n      }, this.getPointPositionList = function () {\n        var _this109$_clientSize2 = _this109._clientSize,\n            e = _this109$_clientSize2.width,\n            t = _this109$_clientSize2.height,\n            i = _this109$_clientSize2.left,\n            r = _this109$_clientSize2.top,\n            n = e / 6,\n            s = t / 6,\n            o = [],\n            a = Math.pow(10, 6);\n\n        for (var _e64 = 0; _e64 < 5; _e64++) {\n          for (var _t75 = 0; _t75 < 5; _t75++) {\n            var _c6 = (i * a + (0 === _e64 ? .1 : 4 === _e64 ? (n * _e64 * a - 1e5) / a : n * _e64) * a) / a,\n                _d3 = (r * a + (0 === _t75 ? .1 : 4 === _t75 ? (s * _t75 * a - 1e5) / a : s * _t75) * a) / a;\n\n            o.push({\n              x: _c6,\n              y: _d3\n            });\n          }\n        }\n\n        return [].concat(o);\n      }, this.checkElementCover = function (e) {\n        var t;\n\n        var i = _this109.getPointPositionList();\n\n        return Fr(t = Es(i).call(i, function (t) {\n          return _this109.checkCoverForAPoint(t.x, t.y, e);\n        })).call(t, function (e) {\n          return !!e;\n        }).length > 6;\n      }, this.checkSizeIsVisible = function (e, t, i) {\n        return (e > 50 || i / e <= 10) && (t > 50 || i / t <= 10);\n      }, this.checkSizeOfPartInClient = function () {\n        var _this109$_clientSize3 = _this109._clientSize,\n            e = _this109$_clientSize3.left,\n            t = _this109$_clientSize3.right,\n            i = _this109$_clientSize3.top,\n            r = _this109$_clientSize3.bottom,\n            n = _this109$_clientSize3.clientHeight,\n            s = _this109$_clientSize3.clientWidth,\n            o = _this109$_clientSize3.clientMin;\n        var a, c, d, l;\n        if (e < 0) a = 0;else {\n          if (!(e < s)) return !1;\n          a = e;\n        }\n        if (t < 0) return !1;\n        if (c = t < s ? t : s, i < 0) d = 0;else {\n          if (!(i < n)) return !1;\n          d = i;\n        }\n        if (r < 0) return !1;\n        l = r < n ? r : n;\n        var A = c - a,\n            u = l - d;\n        return _this109.checkSizeIsVisible(A, u, o);\n      }, this.returnHiddenResult = function (e) {\n        return _this109._clientSize = null, {\n          visible: !1,\n          reason: e\n        };\n      }, this.checkOneElementVisible = function (e) {\n        if (e instanceof HTMLElement) {\n          if (_this109.checkElementIsMountedOnDom(e)) {\n            if (_this109.checkActualCssVisibleIncludeInherit(e)) {\n              if (_this109._clientSize = _this109.getSizeAboutClient(e), _this109.checkElementCover(e)) return _this109.returnHiddenResult(pI.COVERED);\n              {\n                var _e65 = _this109.checkActualSize(),\n                    _t76 = _this109.checkSizeOfPartInClient();\n\n                return _e65 && !_t76 ? _this109.returnHiddenResult(pI.POSITION) : _e65 ? (_this109._clientSize = null, {\n                  visible: !0\n                }) : _this109.returnHiddenResult(pI.SIZE);\n              }\n            }\n\n            return _this109.returnHiddenResult(pI.STYLE);\n          }\n\n          return _this109.returnHiddenResult(EI.UNMOUNTED);\n        }\n\n        return _this109.returnHiddenResult(EI.INVALID_HTML_ELEMENT);\n      }, this.checkElementIsMountedOnDom = function (e) {\n        return _this109.checkPropertyUpToAllParentNodes(e, function (e) {\n          return \"HTML\" !== e.nodeName.toUpperCase() ? null !== e.parentElement : !!document.documentElement;\n        });\n      };\n    }\n\n    return _class11;\n  }())();\n\n  function _I(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function II(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = _I(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = _I(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var fI = function fI(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      mI = function mI(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var CI =\n  /*#__PURE__*/\n  function (_au2) {\n    _inherits(CI, _au2);\n\n    function CI(e, t, i, r, n) {\n      var _this110;\n\n      _classCallCheck(this, CI);\n\n      _this110 = _possibleConstructorReturn(this, _getPrototypeOf(CI).call(this, e, n)), _this110.trackMediaType = \"video\", _this110._videoVisibleTimer = null, _this110._scalabiltyMode = {\n        numSpatialLayers: 1,\n        numTemporalLayers: 1\n      }, _this110._enabled = !0, _this110.updateMediaStreamTrackResolution(), _this110._encoderConfig = t, _this110._scalabiltyMode = i, _this110._optimizationMode = r;\n      return _this110;\n    }\n\n    _createClass(CI, [{\n      key: \"play\",\n      value: function play(e) {\n        var _this111 = this;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var i = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.LOCAL_VIDEO_TRACK_PLAY,\n          options: [this.getTrackId(), \"string\" == typeof e ? e : \"HTMLElement\", t]\n        });\n\n        if (!(e instanceof HTMLElement)) {\n          var _t77 = document.getElementById(e.toString());\n\n          var r;\n          if (_t77) e = _t77;else vc.warning(Xe(r = \"[\".concat(this.getTrackId(), '] can not find \"#')).call(r, e, '\" element, use document.body')), e = document.body;\n        }\n\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), ge(t));\n        var n = II({}, this._getDefaultPlayerConfig(), {}, t, {\n          trackId: this.getTrackId(),\n          element: e\n        });\n        this._player ? this._player.updateConfig(n) : (this._player = new x_(n), this._player.updateVideoTrack(this._mediaStreamTrack)), this._player.play(), this._videoVisibleTimer && window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = window.setInterval(function () {\n          try {\n            var _e66 = _this111.getVideoElementVisibleStatus();\n\n            _this111.emit(Il.VIDEO_ELEMENT_VISIBLE_STATUS, _e66);\n          } catch (e) {}\n        }, Fc(\"CHECK_VIDEO_VISIBLE_INTERVAL\")), i.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.LOCAL_VIDEO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        if (!this._player) return e.onSuccess();\n        this._videoVisibleTimer && (window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = null), this._player.destroy(), this._player = void 0, vc.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")), e.onSuccess();\n      }\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee92(e, t) {\n          return _regeneratorRuntime.wrap(function _callee92$(_context92) {\n            while (1) {\n              switch (_context92.prev = _context92.next) {\n                case 0:\n                  if (t) {\n                    _context92.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context92.next = 3;\n                    break;\n                  }\n\n                  return _context92.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  if (!(vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context92.next = 15;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.enabled = !1;\n                  _context92.prev = 6;\n                  _context92.next = 9;\n                  return Lh(this, gl.NEED_DISABLE_TRACK, this);\n\n                case 9:\n                  _context92.next = 14;\n                  break;\n\n                case 11:\n                  _context92.prev = 11;\n                  _context92.t0 = _context92[\"catch\"](6);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context92.t0.toString()), _context92.t0;\n\n                case 14:\n                  return _context92.abrupt(\"return\", (t || (this._enabled = !1), void vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\"))));\n\n                case 15:\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context92.prev = 16;\n                  _context92.next = 19;\n                  return Lh(this, gl.NEED_ENABLE_TRACK, this);\n\n                case 19:\n                  _context92.next = 24;\n                  break;\n\n                case 21:\n                  _context92.prev = 21;\n                  _context92.t1 = _context92[\"catch\"](16);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context92.t1.toString()), _context92.t1;\n\n                case 24:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0);\n\n                case 25:\n                case \"end\":\n                  return _context92.stop();\n              }\n            }\n          }, _callee92, this, [[6, 11], [16, 21]]);\n        }));\n\n        function setEnabled(_x136, _x137) {\n          return _setEnabled3.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setMuted\",\n      value: function () {\n        var _setMuted2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee93(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee93$(_context93) {\n            while (1) {\n              switch (_context93.prev = _context93.next) {\n                case 0:\n                  _context93.t0 = e !== this._muted;\n\n                  if (!_context93.t0) {\n                    _context93.next = 13;\n                    break;\n                  }\n\n                  this.stateCheck(\"muted\", e);\n                  this._muted = e;\n                  this._mediaStreamTrack.enabled = !e;\n                  vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] start set muted: \")).call(t, e));\n\n                  if (!e) {\n                    _context93.next = 11;\n                    break;\n                  }\n\n                  _context93.next = 9;\n                  return Lh(this, gl.NEED_MUTE_TRACK, this);\n\n                case 9:\n                  _context93.next = 13;\n                  break;\n\n                case 11:\n                  _context93.next = 13;\n                  return Lh(this, gl.NEED_UNMUTE_TRACK, this);\n\n                case 13:\n                case \"end\":\n                  return _context93.stop();\n              }\n            }\n          }, _callee93, this);\n        }));\n\n        function setMuted(_x138) {\n          return _setMuted2.apply(this, arguments);\n        }\n\n        return setMuted;\n      }()\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead\");\n        }, \"localVideoTrackGetStatsWarning\");\n        var e = Ph(this, gl.GET_STATS);\n        return e || II({}, Zd);\n      }\n    }, {\n      key: \"setBeautyEffect\",\n      value: function () {\n        var _setBeautyEffect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee94(e) {\n          var _this112 = this;\n\n          var t,\n              i,\n              _e67,\n              _e68,\n              _args94 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee94$(_context94) {\n            while (1) {\n              switch (_context94.prev = _context94.next) {\n                case 0:\n                  t = _args94.length > 1 && _args94[1] !== undefined ? _args94[1] : {};\n                  i = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.LOCAL_VIDEO_TRACK_BEAUTY,\n                    options: [this.getTrackId(), e, t]\n                  });\n\n                  if (!(e || this._videoBeautyProcessor)) {\n                    _context94.next = 28;\n                    break;\n                  }\n\n                  if (!(Ia() === la.IOS || Ia() === la.ANDROID)) {\n                    _context94.next = 6;\n                    break;\n                  }\n\n                  _e67 = new Ad(ad.INVALID_OPERATION, \"can not enable beauty effect on mobile device\");\n                  throw i.onError(_e67), _e67;\n\n                case 6:\n                  if (!(!this._enabled && e)) {\n                    _context94.next = 9;\n                    break;\n                  }\n\n                  _e68 = new Ad(ad.TRACK_IS_DISABLED, \"can not enable beauty effect when track is disabled\");\n                  throw i.onError(_e68), _e68;\n\n                case 9:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setBeautyEffect\"), e, ge(t));\n                  _context94.prev = 10;\n\n                  if (!this._videoBeautyProcessor) {\n                    _context94.next = 16;\n                    break;\n                  }\n\n                  _context94.next = 14;\n                  return this._videoBeautyProcessor.setBeautyEffectOptions(e, t);\n\n                case 14:\n                  _context94.next = 22;\n                  break;\n\n                case 16:\n                  this._videoBeautyProcessor = new lI();\n\n                  this._videoBeautyProcessor.onOverload = function () {\n                    Qh(function () {\n                      return _this112.emit(Il.BEAUTY_EFFECT_OVERLOAD);\n                    });\n                  };\n\n                  _context94.next = 20;\n                  return this._videoBeautyProcessor.setBeautyEffectOptions(e, t);\n\n                case 20:\n                  _context94.next = 22;\n                  return this._registerTrackProcessor(this._videoBeautyProcessor);\n\n                case 22:\n                  _context94.next = 27;\n                  break;\n\n                case 24:\n                  _context94.prev = 24;\n                  _context94.t0 = _context94[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setBeautyEffect error\"), _context94.t0.toString()), i.onError(_context94.t0), _context94.t0;\n\n                case 27:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setBeautyEffect success\")), i.onSuccess();\n\n                case 28:\n                case \"end\":\n                  return _context94.stop();\n              }\n            }\n          }, _callee94, this, [[10, 24]]);\n        }));\n\n        function setBeautyEffect(_x139) {\n          return _setBeautyEffect.apply(this, arguments);\n        }\n\n        return setBeautyEffect;\n      }()\n    }, {\n      key: \"getCurrentFrameData\",\n      value: function getCurrentFrameData() {\n        return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n      }\n    }, {\n      key: \"clone\",\n      value: function clone(e, t, i, r) {\n        var n = this._mediaStreamTrack.clone();\n\n        return new CI(n, e, t, i, r);\n      }\n    }, {\n      key: \"setBitrateLimit\",\n      value: function () {\n        var _setBitrateLimit = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee95(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee95$(_context95) {\n            while (1) {\n              switch (_context95.prev = _context95.next) {\n                case 0:\n                  if (!(vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] set bitrate limit, \")).call(t, ge(e))), e)) {\n                    _context95.next = 10;\n                    break;\n                  }\n\n                  this._forceBitrateLimit = e, this._encoderConfig && (this._encoderConfig.bitrateMax ? this._encoderConfig.bitrateMax = this._encoderConfig.bitrateMax < e.max_bitrate ? this._encoderConfig.bitrateMax : e.max_bitrate : this._encoderConfig.bitrateMax = e.max_bitrate, this._encoderConfig.bitrateMin, this._encoderConfig.bitrateMin = e.min_bitrate);\n                  _context95.prev = 2;\n                  _context95.next = 5;\n                  return Lh(this, gl.NEED_UPDATE_VIDEO_ENCODER, this);\n\n                case 5:\n                  _context95.next = 10;\n                  break;\n\n                case 7:\n                  _context95.prev = 7;\n                  _context95.t0 = _context95[\"catch\"](2);\n                  return _context95.abrupt(\"return\", _context95.t0.throw());\n\n                case 10:\n                case \"end\":\n                  return _context95.stop();\n              }\n            }\n          }, _callee95, this, [[2, 7]]);\n        }));\n\n        function setBitrateLimit(_x140) {\n          return _setBitrateLimit.apply(this, arguments);\n        }\n\n        return setBitrateLimit;\n      }()\n    }, {\n      key: \"setOptimizationMode\",\n      value: function () {\n        var _setOptimizationMode = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee96(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee96$(_context96) {\n            while (1) {\n              switch (_context96.prev = _context96.next) {\n                case 0:\n                  if (!(\"motion\" !== e && \"detail\" !== e && \"balanced\" !== e)) {\n                    _context96.next = 2;\n                    break;\n                  }\n\n                  return _context96.abrupt(\"return\", void vc.error(ad.INVALID_PARAMS, \"optimization mode must be motion, detail or balanced\"));\n\n                case 2:\n                  i = this._optimizationMode;\n                  _context96.prev = 3;\n                  this._optimizationMode = e;\n                  _context96.next = 7;\n                  return Lh(this, gl.SET_OPTIMIZATION_MODE, this);\n\n                case 7:\n                  _context96.next = 12;\n                  break;\n\n                case 9:\n                  _context96.prev = 9;\n                  _context96.t0 = _context96[\"catch\"](3);\n                  throw this._optimizationMode = i, vc.error(\"[\".concat(this.getTrackId(), \"] set optimization mode failed\"), _context96.t0.toString()), _context96.t0;\n\n                case 12:\n                  vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set optimization mode success (\")).call(t, e, \")\"));\n\n                case 13:\n                case \"end\":\n                  return _context96.stop();\n              }\n            }\n          }, _callee96, this, [[3, 9]]);\n        }));\n\n        function setOptimizationMode(_x141) {\n          return _setOptimizationMode.apply(this, arguments);\n        }\n\n        return setOptimizationMode;\n      }()\n    }, {\n      key: \"setScalabiltyMode\",\n      value: function setScalabiltyMode(e) {\n        var t;\n        if (1 === e.numSpatialLayers && 1 !== e.numTemporalLayers) return vc.error(ad.INVALID_PARAMS, \"scalability mode currently not supported, no SVC.\"), void (this._scalabiltyMode = {\n          numSpatialLayers: 1,\n          numTemporalLayers: 1\n        });\n        this._scalabiltyMode = e, vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set scalability mode success (\")).call(t, e, \")\"));\n      }\n    }, {\n      key: \"updateMediaStreamTrackResolution\",\n      value: function updateMediaStreamTrackResolution() {\n        var _this113 = this;\n\n        bh(this._originMediaStreamTrack).then(function (_ref54) {\n          var _ref55 = _slicedToArray(_ref54, 2),\n              e = _ref55[0],\n              t = _ref55[1];\n\n          _this113._videoHeight = t, _this113._videoWidth = e;\n        }).catch(Oh);\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n      }\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {\n          fit: \"contain\"\n        };\n      }\n    }, {\n      key: \"getVideoElementVisibleStatus\",\n      value: function getVideoElementVisibleStatus() {\n        try {\n          var e, t;\n\n          var _i40 = null == this || null === (e = this._player) || void 0 === e ? void 0 : e.getContainerElement(),\n              _r32 = {\n            track: this,\n            element: null == this || null === (t = this._player) || void 0 === t ? void 0 : t.getVideoElement(),\n            slot: null == _i40 ? void 0 : _i40.parentElement\n          },\n              _n20 = _r32.element,\n              _s15 = _r32.slot;\n\n          if (this.isPlaying && _n20 instanceof HTMLVideoElement && _s15 instanceof HTMLElement) {\n            var _e69 = gI.checkOneElementVisible(_n20),\n                _t78 = er({}, _e69);\n\n            if (!_t78.visible) {\n              iu.reportApiInvoke(null, {\n                tag: bd.TRACER,\n                name: Od.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,\n                options: [this.getTrackId()]\n              }).onSuccess(\"Not visible because of \".concat(_t78.reason));\n            }\n\n            return _t78;\n          }\n\n          return;\n        } catch (e) {\n          throw new Ad(ad.GET_VIDEO_ELEMENT_VISIBLE_ERROR, e.message);\n        }\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee97() {\n          return _regeneratorRuntime.wrap(function _callee97$(_context97) {\n            while (1) {\n              switch (_context97.prev = _context97.next) {\n                case 0:\n                case \"end\":\n                  return _context97.stop();\n              }\n            }\n          }, _callee97, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack2.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return !(!this._player || this._player.videoElementStatus !== dd.PLAYING);\n      }\n    }]);\n\n    return CI;\n  }(au);\n\n  fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Object, Object]), mI(\"design:returntype\", void 0)], CI.prototype, \"play\", null), fI([ou(\"LocalVideoTrack\", \"_enabledMutex\"), Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Boolean, Boolean]), mI(\"design:returntype\", As)], CI.prototype, \"setEnabled\", null), fI([ou(\"LocalVideoTrack\", \"_enabledMutex\"), Pu(), tu({\n    report: iu\n  }), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Boolean]), mI(\"design:returntype\", As)], CI.prototype, \"setMuted\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", []), mI(\"design:returntype\", Object)], CI.prototype, \"getStats\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Boolean, Object]), mI(\"design:returntype\", As)], CI.prototype, \"setBeautyEffect\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", []), mI(\"design:returntype\", ImageData)], CI.prototype, \"getCurrentFrameData\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Object]), mI(\"design:returntype\", As)], CI.prototype, \"setBitrateLimit\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [String]), mI(\"design:returntype\", As)], CI.prototype, \"setOptimizationMode\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Object]), mI(\"design:returntype\", void 0)], CI.prototype, \"setScalabiltyMode\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", []), mI(\"design:returntype\", void 0)], CI.prototype, \"updateMediaStreamTrackResolution\", null);\n\n  var SI =\n  /*#__PURE__*/\n  function (_CI) {\n    _inherits(SI, _CI);\n\n    function SI(e, t, i, r, n, s) {\n      var _this114;\n\n      _classCallCheck(this, SI);\n\n      _this114 = _possibleConstructorReturn(this, _getPrototypeOf(SI).call(this, e, t.encoderConfig ? Lc(t.encoderConfig) : {}, r, n, s)), _this114._enabled = !0, _this114._deviceName = \"default\", _this114.tryResumeVideoForIOS15WeChat =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee98() {\n        return _regeneratorRuntime.wrap(function _callee98$(_context98) {\n          while (1) {\n            switch (_context98.prev = _context98.next) {\n              case 0:\n                _context98.t0 = ya() && ba() && _this114._enabled && !_this114._isClosed;\n\n                if (!_context98.t0) {\n                  _context98.next = 7;\n                  break;\n                }\n\n                vc.debug(\"[\".concat(_this114.getTrackId(), \"] try capture camera media device for interrupted iOS 15 device on WeChat.\"));\n                _context98.next = 5;\n                return _this114.setEnabled(!1);\n\n              case 5:\n                _context98.next = 7;\n                return _this114.setEnabled(!0);\n\n              case 7:\n              case \"end\":\n                return _context98.stop();\n            }\n          }\n        }, _callee98, this);\n      })), _this114._config = t, _this114._constraints = i, _this114._deviceName = e.label, _this114._config.encoderConfig && (_this114._encoderConfig = Lc(_this114._config.encoderConfig)), Au.on(cu.IOS_15_INTERRUPTION_END, _this114.tryResumeVideoForIOS15WeChat), Au.on(cu.IOS_INTERRUPTION_END, _this114.tryResumeVideoForIOS15WeChat);\n      return _this114;\n    }\n\n    _createClass(SI, [{\n      key: \"setDevice\",\n      value: function () {\n        var _setDevice2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee99(e) {\n          var t, i, _t79, _i41, _r33, _t80;\n\n          return _regeneratorRuntime.wrap(function _callee99$(_context99) {\n            while (1) {\n              switch (_context99.prev = _context99.next) {\n                case 0:\n                  i = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.CAM_VIDEO_TRACK_SET_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (!(vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set device to \")).call(t, e)), this._enabled)) {\n                    _context99.next = 37;\n                    break;\n                  }\n\n                  _context99.prev = 2;\n                  _context99.next = 5;\n                  return Du.getDeviceById(e);\n\n                case 5:\n                  _t79 = _context99.sent;\n                  _i41 = {};\n                  _i41.video = II({}, this._constraints), _i41.video.deviceId = {\n                    exact: e\n                  }, _i41.video.facingMode = void 0, this._originMediaStreamTrack.stop();\n                  _r33 = null;\n                  _context99.prev = 9;\n                  _context99.next = 12;\n                  return wu(_i41, this.getTrackId());\n\n                case 12:\n                  _r33 = _context99.sent;\n                  _context99.next = 24;\n                  break;\n\n                case 15:\n                  _context99.prev = 15;\n                  _context99.t0 = _context99[\"catch\"](9);\n                  vc.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context99.t0.toString());\n                  _context99.next = 20;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 20:\n                  _r33 = _context99.sent;\n                  _context99.next = 23;\n                  return this._updateOriginMediaStreamTrack(_r33.getVideoTracks()[0], !1);\n\n                case 23:\n                  throw _context99.t0;\n\n                case 24:\n                  _context99.next = 26;\n                  return this._updateOriginMediaStreamTrack(_r33.getVideoTracks()[0], !1);\n\n                case 26:\n                  this.updateMediaStreamTrackResolution();\n                  this._deviceName = _t79.label;\n                  this._config.cameraId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context99.next = 35;\n                  break;\n\n                case 32:\n                  _context99.prev = 32;\n                  _context99.t1 = _context99[\"catch\"](2);\n                  throw i.onError(_context99.t1), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context99.t1.toString()), _context99.t1;\n\n                case 35:\n                  _context99.next = 47;\n                  break;\n\n                case 37:\n                  _context99.prev = 37;\n                  _context99.next = 40;\n                  return Du.getDeviceById(e);\n\n                case 40:\n                  _t80 = _context99.sent;\n                  this._deviceName = _t80.label, this._config.cameraId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context99.next = 47;\n                  break;\n\n                case 44:\n                  _context99.prev = 44;\n                  _context99.t2 = _context99[\"catch\"](37);\n                  throw i.onError(_context99.t2), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context99.t2.toString()), _context99.t2;\n\n                case 47:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setDevice success\")), i.onSuccess();\n\n                case 48:\n                case \"end\":\n                  return _context99.stop();\n              }\n            }\n          }, _callee99, this, [[2, 32], [9, 15], [37, 44]]);\n        }));\n\n        function setDevice(_x142) {\n          return _setDevice2.apply(this, arguments);\n        }\n\n        return setDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee100(e, t) {\n          var i, r, _e70;\n\n          return _regeneratorRuntime.wrap(function _callee100$(_context100) {\n            while (1) {\n              switch (_context100.prev = _context100.next) {\n                case 0:\n                  if (t) {\n                    _context100.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context100.next = 3;\n                    break;\n                  }\n\n                  return _context100.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  if (!(vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context100.next = 15;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), t || (this._enabled = !1);\n                  _context100.prev = 6;\n                  _context100.next = 9;\n                  return Lh(this, gl.NEED_DISABLE_TRACK, this);\n\n                case 9:\n                  _context100.next = 14;\n                  break;\n\n                case 11:\n                  _context100.prev = 11;\n                  _context100.t0 = _context100[\"catch\"](6);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context100.t0.toString()), _context100.t0;\n\n                case 14:\n                  return _context100.abrupt(\"return\", void vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\")));\n\n                case 15:\n                  i = II({}, this._constraints), r = Du.searchDeviceIdByName(this._deviceName);\n                  r && !i.deviceId && (i.deviceId = {\n                    exact: r\n                  });\n                  _context100.prev = 17;\n                  _context100.next = 20;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 20:\n                  _e70 = _context100.sent;\n                  _context100.next = 23;\n                  return this._updateOriginMediaStreamTrack(_e70.getVideoTracks()[0], !1);\n\n                case 23:\n                  _context100.next = 25;\n                  return Lh(this, gl.NEED_ENABLE_TRACK, this);\n\n                case 25:\n                  _context100.next = 30;\n                  break;\n\n                case 27:\n                  _context100.prev = 27;\n                  _context100.t1 = _context100[\"catch\"](17);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled true error\"), _context100.t1.toString()), _context100.t1;\n\n                case 30:\n                  this.updateMediaStreamTrackResolution(), vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0);\n\n                case 31:\n                case \"end\":\n                  return _context100.stop();\n              }\n            }\n          }, _callee100, this, [[6, 11], [17, 27]]);\n        }));\n\n        function setEnabled(_x143, _x144) {\n          return _setEnabled4.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setEncoderConfiguration\",\n      value: function () {\n        var _setEncoderConfiguration = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee101(e, t) {\n          var i, _e71, r, n, _t81;\n\n          return _regeneratorRuntime.wrap(function _callee101$(_context101) {\n            while (1) {\n              switch (_context101.prev = _context101.next) {\n                case 0:\n                  i = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._enabled) {\n                    _context101.next = 4;\n                    break;\n                  }\n\n                  _e71 = new Ad(ad.TRACK_IS_DISABLED, \"can not set encoder configuration when track is disabled\");\n                  throw i.onError(_e71), _e71;\n\n                case 4:\n                  e = Lc(e), this._forceBitrateLimit && (e.bitrateMax = this._forceBitrateLimit.max_bitrate ? this._forceBitrateLimit.max_bitrate : e.bitrateMax, e.bitrateMin = this._forceBitrateLimit.min_bitrate ? this._forceBitrateLimit.min_bitrate : e.bitrateMin);\n                  r = Fh(this._config);\n                  r.encoderConfig = e;\n                  n = AI(r);\n                  (Ra() || va() || Oa()) && (n.deviceId = void 0), vc.debug(\"[\".concat(this.getTrackId(), \"] setEncoderConfiguration applyConstraints\"), ge(e), ge(n));\n                  _context101.prev = 9;\n                  _context101.next = 12;\n                  return this._originMediaStreamTrack.applyConstraints(n);\n\n                case 12:\n                  this.updateMediaStreamTrackResolution();\n                  _context101.next = 19;\n                  break;\n\n                case 15:\n                  _context101.prev = 15;\n                  _context101.t0 = _context101[\"catch\"](9);\n                  _t81 = new Ad(ad.UNEXPECTED_ERROR, _context101.t0.toString());\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] applyConstraints error\"), _t81.toString()), i.onError(_t81), _t81;\n\n                case 19:\n                  this._config = r, this._constraints = n, this._encoderConfig = e;\n                  _context101.prev = 20;\n                  _context101.next = 23;\n                  return Lh(this, gl.NEED_UPDATE_VIDEO_ENCODER, this);\n\n                case 23:\n                  _context101.next = 28;\n                  break;\n\n                case 25:\n                  _context101.prev = 25;\n                  _context101.t1 = _context101[\"catch\"](20);\n                  return _context101.abrupt(\"return\", (i.onError(_context101.t1), _context101.t1.throw()));\n\n                case 28:\n                  i.onSuccess();\n\n                case 29:\n                case \"end\":\n                  return _context101.stop();\n              }\n            }\n          }, _callee101, this, [[9, 15], [20, 25]]);\n        }));\n\n        function setEncoderConfiguration(_x145, _x146) {\n          return _setEncoderConfiguration.apply(this, arguments);\n        }\n\n        return setEncoderConfiguration;\n      }()\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {\n          mirror: !0,\n          fit: \"cover\"\n        };\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        var _this115 = this;\n\n        if ((va() || Oa()) && this._enabled && !this._isClosed && Au.duringInterruption) {\n          var _e72 =\n          /*#__PURE__*/\n          function () {\n            var _ref57 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee102() {\n              return _regeneratorRuntime.wrap(function _callee102$(_context102) {\n                while (1) {\n                  switch (_context102.prev = _context102.next) {\n                    case 0:\n                      Au.off(cu.IOS_INTERRUPTION_END, _e72);\n                      _context102.t0 = _this115._enabled && !_this115._isClosed;\n\n                      if (!_context102.t0) {\n                        _context102.next = 8;\n                        break;\n                      }\n\n                      vc.debug(\"[\".concat(_this115.getTrackId(), \"] try capture camera media device for interrupted iOS device.\"));\n                      _context102.next = 6;\n                      return _this115.setEnabled(!1);\n\n                    case 6:\n                      _context102.next = 8;\n                      return _this115.setEnabled(!0);\n\n                    case 8:\n                    case \"end\":\n                      return _context102.stop();\n                  }\n                }\n              }, _callee102, this);\n            }));\n\n            return function _e72() {\n              return _ref57.apply(this, arguments);\n            };\n          }();\n\n          Au.on(cu.IOS_INTERRUPTION_END, _e72);\n        } else vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(Il.TRACK_ENDED);\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee103() {\n          var e, t, i;\n          return _regeneratorRuntime.wrap(function _callee103$(_context103) {\n            while (1) {\n              switch (_context103.prev = _context103.next) {\n                case 0:\n                  e = II({}, this._constraints), t = Du.searchDeviceIdByName(this._deviceName);\n                  t && !e.deviceId && (e.deviceId = {\n                    exact: t\n                  });\n                  _context103.next = 4;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 4:\n                  i = _context103.sent;\n                  _context103.next = 7;\n                  return this._updateOriginMediaStreamTrack(i.getVideoTracks()[0], !0);\n\n                case 7:\n                  this.updateMediaStreamTrackResolution();\n\n                case 8:\n                case \"end\":\n                  return _context103.stop();\n              }\n            }\n          }, _callee103, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack3.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(SI.prototype), \"close\", this).call(this), Au.off(cu.IOS_15_INTERRUPTION_END, this.tryResumeVideoForIOS15WeChat), Au.off(cu.IOS_INTERRUPTION_END, this.tryResumeVideoForIOS15WeChat);\n      }\n    }]);\n\n    return SI;\n  }(CI);\n\n  fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [String]), mI(\"design:returntype\", As)], SI.prototype, \"setDevice\", null), fI([ou(\"CameraVideoTrack\", \"_enabledMutex\"), Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Boolean, Boolean]), mI(\"design:returntype\", As)], SI.prototype, \"setEnabled\", null), fI([Pu(), mI(\"design:type\", Function), mI(\"design:paramtypes\", [Object, Boolean]), mI(\"design:returntype\", As)], SI.prototype, \"setEncoderConfiguration\", null);\n\n  var RI =\n  /*#__PURE__*/\n  function () {\n    function RI(e, t) {\n      _classCallCheck(this, RI);\n\n      this._trust_in_room_ = !0, this._trust_audio_enabled_state_ = !0, this._trust_video_enabled_state_ = !0, this._trust_audio_mute_state_ = !0, this._trust_video_mute_state_ = !0, this._trust_stream_added_state_ = !0, this._audio_muted_ = !1, this._video_muted_ = !1, this._audio_enabled_ = !0, this._video_enabled_ = !0, this._audio_added_ = !1, this._video_added_ = !1, this.uid = e, this._uintid = t;\n    }\n\n    _createClass(RI, [{\n      key: \"hasVideo\",\n      get: function get() {\n        return this._video_enabled_ && !this._video_muted_ && this._video_added_;\n      }\n    }, {\n      key: \"hasAudio\",\n      get: function get() {\n        return this._audio_enabled_ && !this._audio_muted_ && this._audio_added_;\n      }\n    }, {\n      key: \"audioTrack\",\n      get: function get() {\n        if (this.hasAudio) return this._audioTrack;\n      }\n    }, {\n      key: \"videoTrack\",\n      get: function get() {\n        if (this.hasVideo) return this._videoTrack;\n      }\n    }]);\n\n    return RI;\n  }();\n\n  var TI = St.findIndex,\n      vI = \"findIndex\",\n      yI = !0;\n  vI in [] && Array(1).findIndex(function () {\n    yI = !1;\n  }), G({\n    target: \"Array\",\n    proto: !0,\n    forced: yI\n  }, {\n    findIndex: function findIndex(e) {\n      return TI(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    }\n  });\n\n  var wI = Ye(\"Array\").findIndex,\n      NI = Array.prototype,\n      OI = function OI(e) {\n    var t = e.findIndex;\n    return e === NI || e instanceof Array && t === NI.findIndex ? wI : t;\n  };\n\n  ql(\"asyncIterator\");\n  var bI = Hl.f(\"asyncIterator\");\n  ql(\"hasInstance\"), ql(\"isConcatSpreadable\"), ql(\"iterator\"), ql(\"match\"), ql(\"matchAll\"), ql(\"replace\"), ql(\"search\"), ql(\"species\"), ql(\"split\"), ql(\"toPrimitive\"), ql(\"toStringTag\"), ql(\"unscopables\"), ft(Math, \"Math\", !0), ft(r.JSON, \"JSON\", !0);\n  var DI = L.Symbol;\n  ql(\"asyncDispose\"), ql(\"dispose\"), ql(\"observable\"), ql(\"patternMatch\"), ql(\"replaceAll\");\n\n  var kI = DI,\n      LI = Pt.set,\n      PI = Pt.getterFor(\"AggregateError\"),\n      BI = function BI(e, t) {\n    var i = this;\n    if (!(i instanceof BI)) return new BI(e, t);\n    si && (i = si(new Error(t), $t(i)));\n    var r = [];\n    return pt(e, r.push, r), s ? LI(i, {\n      errors: r,\n      type: \"AggregateError\"\n    }) : i.errors = r, void 0 !== t && F(i, \"message\", String(t)), i;\n  };\n\n  BI.prototype = Kt(Error.prototype, {\n    constructor: d(5, BI),\n    message: d(5, \"\"),\n    name: d(5, \"AggregateError\")\n  }), s && Q.f(BI.prototype, \"errors\", {\n    get: function get() {\n      return PI(this).errors;\n    },\n    configurable: !0\n  }), G({\n    global: !0\n  }, {\n    AggregateError: BI\n  }), G({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    try: function _try(e) {\n      var t = Pn.f(this),\n          i = Mn(e);\n      return (i.error ? t.reject : t.resolve)(i.value), t.promise;\n    }\n  });\n  var MI = \"No one promise resolved\";\n  G({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    any: function any(e) {\n      var t = this,\n          i = Pn.f(t),\n          r = i.resolve,\n          n = i.reject,\n          s = Mn(function () {\n        var i = P(t.resolve),\n            s = [],\n            o = 0,\n            a = 1,\n            c = !1;\n        pt(e, function (e) {\n          var d = o++,\n              l = !1;\n          s.push(void 0), a++, i.call(t, e).then(function (e) {\n            l || c || (c = !0, r(e));\n          }, function (e) {\n            l || c || (l = !0, s[d] = e, --a || n(new (ae(\"AggregateError\"))(s, MI)));\n          });\n        }), --a || n(new (ae(\"AggregateError\"))(s, MI));\n      });\n      return s.error && n(s.value), i.promise;\n    }\n  });\n  var UI = ls;\n\n  var QI = function QI(e) {\n    this.wrapped = e;\n  };\n\n  function FI(e) {\n    var t, i;\n\n    function r(t, i) {\n      try {\n        var s = e[t](i),\n            o = s.value,\n            a = o instanceof QI;\n        UI.resolve(a ? o.wrapped : o).then(function (e) {\n          a ? r(\"return\" === t ? \"return\" : \"next\", e) : n(s.done ? \"return\" : \"normal\", e);\n        }, function (e) {\n          r(\"throw\", e);\n        });\n      } catch (e) {\n        n(\"throw\", e);\n      }\n    }\n\n    function n(e, n) {\n      switch (e) {\n        case \"return\":\n          t.resolve({\n            value: n,\n            done: !0\n          });\n          break;\n\n        case \"throw\":\n          t.reject(n);\n          break;\n\n        default:\n          t.resolve({\n            value: n,\n            done: !1\n          });\n      }\n\n      (t = t.next) ? r(t.key, t.arg) : i = null;\n    }\n\n    this._invoke = function (e, n) {\n      return new UI(function (s, o) {\n        var a = {\n          key: e,\n          arg: n,\n          resolve: s,\n          reject: o,\n          next: null\n        };\n        i ? i = i.next = a : (t = i = a, r(e, n));\n      });\n    }, \"function\" != typeof e.return && (this.return = void 0);\n  }\n\n  \"function\" == typeof kI && bI && (FI.prototype[bI] = function () {\n    return this;\n  }), FI.prototype.next = function (e) {\n    return this._invoke(\"next\", e);\n  }, FI.prototype.throw = function (e) {\n    return this._invoke(\"throw\", e);\n  }, FI.prototype.return = function (e) {\n    return this._invoke(\"return\", e);\n  };\n  var xI = FI;\n\n  var VI = function VI(e) {\n    return function () {\n      return new xI(e.apply(this, arguments));\n    };\n  };\n\n  var GI = function GI(e) {\n    return new QI(e);\n  },\n      jI = ut,\n      KI = Hl.f(\"iterator\"),\n      WI = KI;\n\n  var HI = function HI(e) {\n    var t;\n\n    if (void 0 !== kI) {\n      if (bI && null != (t = e[bI])) return t.call(e);\n      if (WI && null != (t = jI(e))) return t.call(e);\n    }\n\n    throw new TypeError(\"Object is not async iterable\");\n  };\n\n  var YI = function YI(e, t) {\n    var i = {},\n        r = !1;\n\n    function n(i, n) {\n      return r = !0, n = new UI(function (t) {\n        t(e[i](n));\n      }), {\n        done: !1,\n        value: t(n)\n      };\n    }\n\n    return \"function\" == typeof kI && WI && (i[WI] = function () {\n      return this;\n    }), i.next = function (e) {\n      return r ? (r = !1, e) : n(\"next\", e);\n    }, \"function\" == typeof e.throw && (i.throw = function (e) {\n      if (r) throw r = !1, e;\n      return n(\"throw\", e);\n    }), \"function\" == typeof e.return && (i.return = function (e) {\n      return r ? (r = !1, e) : n(\"return\", e);\n    }), i;\n  },\n      qI = t(function (e, t) {\n    e.exports = function () {\n      var e = {\n        8: function _(e, t, i) {\n          i.r(t), i.d(t, {\n            Parser: function Parser() {\n              return S;\n            },\n            Printer: function Printer() {\n              return w;\n            },\n            parse: function parse() {\n              return D;\n            },\n            print: function print() {\n              return k;\n            }\n          });\n          var r = \"\\n\",\n              n = \"\".concat(\"\\r\").concat(r),\n              s = \" \";\n          var o;\n\n          function a(e) {\n            return e >= \"0\" && e <= \"9\";\n          }\n\n          function c(e) {\n            return e >= \"!\" && e <= \"~\";\n          }\n\n          function d(e) {\n            return c(e) || e >= \"\" && e <= \"ÿ\";\n          }\n\n          function l(e) {\n            return \"!\" === e || e >= \"#\" && e <= \"'\" || e >= \"*\" && e <= \"+\" || e >= \"-\" && e <= \".\" || e >= \"0\" && e <= \"9\" || e >= \"A\" && e <= \"Z\" || e >= \"^\" && e <= \"~\";\n          }\n\n          function A(e) {\n            return e >= \"1\" && e <= \"9\";\n          }\n\n          function u(e) {\n            return e >= \"A\" && e <= \"Z\" || e >= \"a\" && e <= \"z\";\n          }\n\n          function h(e) {\n            return \"d\" === e || \"h\" === e || \"m\" === e || \"s\" === e;\n          }\n\n          function p(e) {\n            return e > \"\u0001\" && e < \"\\t\" || e > \"\\v\" && e < \"\\f\" || e > \"\u000e\" && e < \"ÿ\";\n          }\n\n          function E(e) {\n            return u(e) || a(e) || \"+\" === e || \"/\" === e;\n          }\n\n          function g(e) {\n            return a(e) || u(e) || \"+\" === e || \"/\" === e || \"-\" === e || \"_\" === e;\n          }\n\n          function _(e) {\n            return u(e) || a(e) || \"+\" === e || \"/\" === e;\n          }\n\n          function I(e, t) {\n            var i = Object.keys(e);\n\n            if (Object.getOwnPropertySymbols) {\n              var r = Object.getOwnPropertySymbols(e);\n              t && (r = r.filter(function (t) {\n                return Object.getOwnPropertyDescriptor(e, t).enumerable;\n              })), i.push.apply(i, r);\n            }\n\n            return i;\n          }\n\n          function f(e) {\n            for (var t = 1; t < arguments.length; t++) {\n              var i = null != arguments[t] ? arguments[t] : {};\n              t % 2 ? I(Object(i), !0).forEach(function (t) {\n                m(e, t, i[t]);\n              }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : I(Object(i)).forEach(function (t) {\n                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n              });\n            }\n\n            return e;\n          }\n\n          function m(e, t, i) {\n            return t in e ? Object.defineProperty(e, t, {\n              value: i,\n              enumerable: !0,\n              configurable: !0,\n              writable: !0\n            }) : e[t] = i, e;\n          }\n\n          !function (e) {\n            e.VERSION = \"v\", e.ORIGIN = \"o\", e.SESSION_NAME = \"s\", e.INFORMATION = \"i\", e.URI = \"u\", e.EMAIL = \"e\", e.PHONE = \"p\", e.CONNECTION = \"c\", e.BANDWIDTH = \"b\", e.TIME = \"t\", e.REPEAT = \"r\", e.ZONE_ADJUSTMENTS = \"z\", e.KEY = \"k\", e.ATTRIBUTE = \"a\", e.MEDIA = \"m\";\n          }(o || (o = {}));\n\n          var C =\n          /*#__PURE__*/\n          function () {\n            function C() {\n              _classCallCheck(this, C);\n            }\n\n            _createClass(C, [{\n              key: \"consumeText\",\n              value: function consumeText(e, t) {\n                var i = t;\n\n                for (; i < e.length;) {\n                  var _t82 = e[i];\n                  if (\"\\0\" === _t82 || \"\\r\" === _t82 || _t82 === r) break;\n                  i += 1;\n                }\n\n                if (i - t == 0) throw new Error(\"Invalid text, at \".concat(e));\n                return i;\n              }\n            }, {\n              key: \"consumeUnicastAddress\",\n              value: function consumeUnicastAddress(e, t, i) {\n                return this.consumeTill(e, t, s);\n              }\n            }, {\n              key: \"consumeOneOrMore\",\n              value: function consumeOneOrMore(e, t, i) {\n                var r = t;\n\n                for (; i(e[r]);) {\n                  r++;\n                }\n\n                if (r - t == 0) throw new Error(\"Invalid rule at \".concat(t, \".\"));\n                return r;\n              }\n            }, {\n              key: \"consumeSpace\",\n              value: function consumeSpace(e, t) {\n                if (e[t] === s) return t + 1;\n                throw new Error(\"Invalid space at \".concat(t, \".\"));\n              }\n            }, {\n              key: \"consumeIP4Address\",\n              value: function consumeIP4Address(e, t) {\n                var i = t;\n\n                for (var _t83 = 0; _t83 < 4; _t83++) {\n                  if (i = this.consumeDecimalUChar(e, i), 3 !== _t83) {\n                    if (\".\" !== e[i]) throw new Error(\"Invalid IP4 address.\");\n                    i++;\n                  }\n                }\n\n                return i;\n              }\n            }, {\n              key: \"consumeDecimalUChar\",\n              value: function consumeDecimalUChar(e, t) {\n                var i = t;\n\n                for (var _t84 = 0; _t84 < 3 && a(e[i]); _t84++, i++) {\n                  ;\n                }\n\n                if (i - t == 0) throw new Error(\"Invalid decimal uchar.\");\n                var r = parseInt(e.slice(t, i));\n                if (r >= 0 && r <= 255) return i;\n                throw new Error(\"Invalid decimal uchar\");\n              }\n            }, {\n              key: \"consumeIP6Address\",\n              value: function consumeIP6Address(e, t) {\n                var i = this.consumeHexpart(e, t);\n                return \":\" === e[i] ? (i += 1, i = this.consumeIP4Address(e, i), i) : i;\n              }\n            }, {\n              key: \"consumeHexpart\",\n              value: function consumeHexpart(e, t) {\n                var i = t;\n\n                if (\":\" === e[i] && \":\" === e[i + 1]) {\n                  i += 2;\n\n                  try {\n                    i = this.consumeHexseq(e, i);\n                  } catch (e) {}\n\n                  return i;\n                }\n\n                if (i = this.consumeHexseq(e, i), \":\" === e[i] && \":\" === e[i + 1]) {\n                  i += 2;\n\n                  try {\n                    i = this.consumeHexseq(e, i);\n                  } catch (e) {}\n\n                  return i;\n                }\n\n                return i;\n              }\n            }, {\n              key: \"consumeHexseq\",\n              value: function consumeHexseq(e, t) {\n                var i = t;\n\n                for (; i = this.consumeHex4(e, i), \":\" === e[i] && \":\" !== e[i + 1];) {\n                  i += 1;\n                }\n\n                return i;\n              }\n            }, {\n              key: \"consumeHex4\",\n              value: function consumeHex4(e, t) {\n                var i = 0;\n\n                for (; i < 4; i++) {\n                  if (!((r = e[t + i]) >= \"0\" && r <= \"9\" || r >= \"a\" && r <= \"f\" || r >= \"A\" && r <= \"F\")) {\n                    if (0 === i) throw new Error(\"Invalid hex 4\");\n                    break;\n                  }\n                }\n\n                var r;\n                return t + i;\n              }\n            }, {\n              key: \"consumeFQDN\",\n              value: function consumeFQDN(e, t) {\n                var i = t;\n\n                for (; a(e[i]) || u(e[i]) || \"-\" === e[i] || \".\" === e[i];) {\n                  i += 1;\n                }\n\n                if (i - t < 4) throw new Error(\"Invalid FQDN\");\n                return i;\n              }\n            }, {\n              key: \"consumeExtnAddr\",\n              value: function consumeExtnAddr(e, t) {\n                return this.consumeOneOrMore(e, t, d);\n              }\n            }, {\n              key: \"consumeMulticastAddress\",\n              value: function consumeMulticastAddress(e, t, i) {\n                switch (i) {\n                  case \"IP4\":\n                  case \"ip4\":\n                    return this.consumeIP4MulticastAddress(e, t);\n\n                  case \"IP6\":\n                  case \"ip6\":\n                    return this.consumeIP6MulticastAddress(e, t);\n\n                  default:\n                    try {\n                      return this.consumeFQDN(e, t);\n                    } catch (i) {\n                      return this.consumeExtnAddr(e, t);\n                    }\n\n                }\n              }\n            }, {\n              key: \"consumeIP6MulticastAddress\",\n              value: function consumeIP6MulticastAddress(e, t) {\n                var i = this.consumeHexpart(e, t);\n                return \"/\" === e[i] ? this.consumeInteger(e, i + 1) : i;\n              }\n            }, {\n              key: \"consumeIP4MulticastAddress\",\n              value: function consumeIP4MulticastAddress(e, t) {\n                var i = t + 3;\n                var r = e.slice(t, i),\n                    n = parseInt(r);\n                if (n < 224 || n > 239) throw new Error(\"Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.\");\n\n                for (var _t85 = 0; _t85 < 3; _t85++) {\n                  if (\".\" !== e[i]) throw new Error(\"Invalid IP4 multicast address.\");\n                  i += 1, i = this.consumeDecimalUChar(e, i);\n                }\n\n                return \"/\" === e[i] && (i += 1), i = this.consumeTTL(e, i), \"/\" === e[i] && (i = this.consumeInteger(e, i)), i;\n              }\n            }, {\n              key: \"consumeInteger\",\n              value: function consumeInteger(e, t) {\n                if (!A(e[t])) throw new Error(\"Invalid integer.\");\n\n                for (t += 1; a(e[t]);) {\n                  t += 1;\n                }\n\n                return t;\n              }\n            }, {\n              key: \"consumeTTL\",\n              value: function consumeTTL(e, t) {\n                if (\"0\" === e[t]) return t + 1;\n                if (!A(e[t])) throw new Error(\"Invalid TTL.\");\n                t += 1;\n\n                for (var _i42 = 0; _i42 < 2 && a(e[t]); _i42++) {\n                  t += 1;\n                }\n\n                return t;\n              }\n            }, {\n              key: \"consumeToken\",\n              value: function consumeToken(e, t) {\n                return this.consumeOneOrMore(e, t, l);\n              }\n            }, {\n              key: \"consumeTime\",\n              value: function consumeTime(e, t) {\n                var i = t;\n                if (\"0\" === e[i]) return i + 1;\n\n                for (A(e[i]) && (i += 1); a(e[i]);) {\n                  i++;\n                }\n\n                if (i - t < 10) throw new Error(\"Invalid time\");\n                return i;\n              }\n            }, {\n              key: \"consumeAddress\",\n              value: function consumeAddress(e, t) {\n                return this.consumeTill(e, t, s);\n              }\n            }, {\n              key: \"consumeTypedTime\",\n              value: function consumeTypedTime(e, t) {\n                var i = t;\n                return i = this.consumeOneOrMore(e, i, a), h(e[i]) ? i + 1 : i;\n              }\n            }, {\n              key: \"consumeRepeatInterval\",\n              value: function consumeRepeatInterval(e, t) {\n                if (!A(e[t])) throw new Error(\"Invalid repeat interval\");\n\n                for (t += 1; a(e[t]);) {\n                  t += 1;\n                }\n\n                return h(e[t]) && (t += 1), t;\n              }\n            }, {\n              key: \"consumePort\",\n              value: function consumePort(e, t) {\n                return this.consumeOneOrMore(e, t, a);\n              }\n            }, {\n              key: \"consume\",\n              value: function consume(e, t, i) {\n                for (var _r34 = 0; _r34 < i.length; _r34++) {\n                  if (t + _r34 >= e.length) throw new Error(\"consume exceeding value length\");\n                  if (e[t + _r34] !== i[_r34]) throw new Error(\"consume \".concat(i, \" failed at \").concat(_r34));\n                }\n\n                return t + i.length;\n              }\n            }, {\n              key: \"consumeTill\",\n              value: function consumeTill(e, t, i) {\n                var r = t;\n\n                for (; r < e.length && (\"string\" != typeof i || e[r] !== i) && (\"function\" != typeof i || !i(e[r]));) {\n                  r++;\n                }\n\n                return r;\n              }\n            }]);\n\n            return C;\n          }();\n\n          var S =\n          /*#__PURE__*/\n          function (_C2) {\n            _inherits(S, _C2);\n\n            function S() {\n              var _this116;\n\n              _classCallCheck(this, S);\n\n              _this116 = _possibleConstructorReturn(this, _getPrototypeOf(S).call(this)), m(_assertThisInitialized(_assertThisInitialized(_this116)), \"records\", []), m(_assertThisInitialized(_assertThisInitialized(_this116)), \"currentLine\", 0);\n              return _this116;\n            }\n\n            _createClass(S, [{\n              key: \"parse\",\n              value: function parse(e) {\n                var t = this.probeEOL(e);\n                this.records = e.split(t).filter(function (e) {\n                  return !!e.trim();\n                }).map(this.parseLine), this.currentLine = 0;\n                var i = this.parseVersion(),\n                    r = this.parseOrigin(),\n                    n = this.parseSessionName(),\n                    s = this.parseInformation(),\n                    o = this.parseUri(),\n                    a = this.parseEmail(),\n                    c = this.parsePhone(),\n                    d = this.parseConnection(),\n                    l = this.parseBandWidth(),\n                    A = this.parseTimeFields(),\n                    u = this.parseKey(),\n                    h = this.parseSessionAttribute(),\n                    p = this.parseMediaDescription();\n                if (this.currentLine !== this.records.length) throw new Error(\"parsing failed, non exhaustive sdp lines.\");\n                return {\n                  version: i,\n                  origin: r,\n                  sessionName: n,\n                  information: s,\n                  uri: o,\n                  emails: a,\n                  phones: c,\n                  connection: d,\n                  bandwidths: l,\n                  timeFields: A,\n                  key: u,\n                  attributes: h,\n                  mediaDescriptions: p\n                };\n              }\n            }, {\n              key: \"getCurrentRecord\",\n              value: function getCurrentRecord() {\n                var e = this.records[this.currentLine];\n                if (!e) throw new Error(\"Record doesn't exit.\");\n                return e;\n              }\n            }, {\n              key: \"probeEOL\",\n              value: function probeEOL(e) {\n                for (var _t86 = 0; _t86 < e.length; _t86++) {\n                  if (e[_t86] === r) return \"\\r\" === e[_t86 - 1] ? n : r;\n                }\n\n                throw new Error(\"Invalid newline character.\");\n              }\n            }, {\n              key: \"parseLine\",\n              value: function parseLine(e, t) {\n                if (e.length < 2) throw new Error(\"Invalid sdp line, sdp line should be of form <type>=<value>.\");\n                var i = e[0];\n                if (\"=\" !== e[1]) throw new Error('Invalid sdp line, <type> should be a single character followed by an \"=\" sign.');\n                return {\n                  type: i,\n                  value: e.slice(2),\n                  line: t,\n                  cur: 0\n                };\n              }\n            }, {\n              key: \"parseSessionAttribute\",\n              value: function parseSessionAttribute() {\n                var e = new T();\n\n                for (; this.currentLine < this.records.length;) {\n                  var _t87 = this.getCurrentRecord();\n\n                  if (_t87.type !== o.ATTRIBUTE) break;\n                  var _i43 = {\n                    attField: this.extractOneOrMore(_t87, function (e) {\n                      return l(e) && \":\" !== e;\n                    }),\n                    _cur: 0\n                  };\n                  \":\" === _t87.value[_t87.cur] && (_t87.cur += 1, _i43.attValue = this.extractOneOrMore(_t87, p)), e.parse(_i43), this.currentLine++;\n                }\n\n                return e.digest();\n              }\n            }, {\n              key: \"parseMediaAttributes\",\n              value: function parseMediaAttributes(e) {\n                var t = new v(e);\n\n                for (; this.currentLine < this.records.length;) {\n                  var _e73 = this.getCurrentRecord();\n\n                  if (_e73.type !== o.ATTRIBUTE) break;\n                  var _i44 = {\n                    attField: this.extractOneOrMore(_e73, function (e) {\n                      return l(e) && \":\" !== e;\n                    }),\n                    _cur: 0\n                  };\n                  \":\" === _e73.value[_e73.cur] && (_e73.cur += 1, _i44.attValue = this.extractOneOrMore(_e73, p)), t.parse(_i44), this.currentLine++;\n                }\n\n                return t.digest();\n              }\n            }, {\n              key: \"parseKey\",\n              value: function parseKey() {\n                var e = this.getCurrentRecord();\n\n                if (e.type === o.KEY) {\n                  if (\"prompt\" === e.value || \"clear:\" === e.value || \"base64:\" === e.value || \"uri:\" === e.value) return e.value;\n                  throw this.currentLine++, new Error(\"Invalid key.\");\n                }\n              }\n            }, {\n              key: \"parseZone\",\n              value: function parseZone() {\n                var e = this.getCurrentRecord();\n\n                if (e.type === o.ZONE_ADJUSTMENTS) {\n                  var _t88 = [];\n\n                  for (;;) {\n                    try {\n                      var _i45 = this.extract(e, this.consumeTime);\n\n                      this.consumeSpaceForRecord(e);\n\n                      var _r35 = !1;\n\n                      \"-\" === e.value[e.cur] && (_r35 = !0, e.cur += 1);\n\n                      var _n21 = this.extract(e, this.consumeTypedTime);\n\n                      _t88.push({\n                        time: _i45,\n                        typedTime: _n21,\n                        back: _r35\n                      });\n                    } catch (e) {\n                      break;\n                    }\n                  }\n\n                  if (0 === _t88.length) throw new Error(\"Invalid zone adjustments\");\n                  return this.currentLine++, _t88;\n                }\n\n                return [];\n              }\n            }, {\n              key: \"parseRepeat\",\n              value: function parseRepeat() {\n                var e = [];\n\n                for (;;) {\n                  var _t89 = this.getCurrentRecord();\n\n                  if (_t89.type !== o.REPEAT) break;\n                  {\n                    var _i46 = this.extract(_t89, this.consumeRepeatInterval),\n                        _r36 = this.parseTypedTime(_t89);\n\n                    e.push({\n                      repeatInterval: _i46,\n                      typedTimes: _r36\n                    }), this.currentLine++;\n                  }\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseTypedTime\",\n              value: function parseTypedTime(e) {\n                var t = [];\n\n                for (;;) {\n                  try {\n                    this.consumeSpaceForRecord(e), t.push(this.extract(e, this.consumeTypedTime));\n                  } catch (e) {\n                    break;\n                  }\n                }\n\n                if (0 === t.length) throw new Error(\"Invalid typed time.\");\n                return t;\n              }\n            }, {\n              key: \"parseTime\",\n              value: function parseTime() {\n                var e = this.getCurrentRecord(),\n                    t = this.extract(e, this.consumeTime);\n                this.consumeSpaceForRecord(e);\n                var i = this.extract(e, this.consumeTime);\n                return this.currentLine++, {\n                  startTime: t,\n                  stopTime: i\n                };\n              }\n            }, {\n              key: \"parseBandWidth\",\n              value: function parseBandWidth() {\n                var e = [];\n\n                for (; this.currentLine < this.records.length;) {\n                  var _t90 = this.getCurrentRecord();\n\n                  if (_t90.type !== o.BANDWIDTH) break;\n                  {\n                    var _i47 = this.extractOneOrMore(_t90, l);\n\n                    if (\":\" !== _t90.value[_t90.cur]) throw new Error(\"Invalid bandwidth field.\");\n                    _t90.cur++;\n\n                    var _r37 = this.extractOneOrMore(_t90, a);\n\n                    e.push({\n                      bwtype: _i47,\n                      bandwidth: _r37\n                    }), this.currentLine++;\n                  }\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseVersion\",\n              value: function parseVersion() {\n                var e = this.getCurrentRecord();\n                if (e.type !== o.VERSION) throw new Error(\"first sdp record must be version\");\n                var t = e.value.slice(0, this.consumeOneOrMore(e.value, 0, a));\n                if (t.length !== e.value.length) throw new Error('invalid proto version, \"v='.concat(e.value, '\"'));\n                return this.currentLine++, t;\n              }\n            }, {\n              key: \"parseOrigin\",\n              value: function parseOrigin() {\n                var e = this.getCurrentRecord();\n                if (e.type !== o.ORIGIN) throw new Error(\"second line of sdp must be origin\");\n                var t = this.extractOneOrMore(e, d);\n                this.consumeSpaceForRecord(e);\n                var i = this.extractOneOrMore(e, a);\n                this.consumeSpaceForRecord(e);\n                var r = this.extractOneOrMore(e, a);\n                this.consumeSpaceForRecord(e);\n                var n = this.extractOneOrMore(e, l);\n                this.consumeSpaceForRecord(e);\n                var s = this.extractOneOrMore(e, l);\n                this.consumeSpaceForRecord(e);\n                var c = this.extract(e, this.consumeUnicastAddress);\n                return this.currentLine++, {\n                  username: t,\n                  sessId: i,\n                  sessVersion: r,\n                  nettype: n,\n                  addrtype: s,\n                  unicastAddress: c\n                };\n              }\n            }, {\n              key: \"parseSessionName\",\n              value: function parseSessionName() {\n                var e = this.getCurrentRecord();\n\n                if (e.type === o.SESSION_NAME) {\n                  var _t91 = this.extract(e, this.consumeText);\n\n                  return this.currentLine++, _t91;\n                }\n              }\n            }, {\n              key: \"parseInformation\",\n              value: function parseInformation() {\n                var e = this.getCurrentRecord();\n                if (e.type !== o.INFORMATION) return;\n                var t = this.extract(e, this.consumeText);\n                return this.currentLine++, t;\n              }\n            }, {\n              key: \"parseUri\",\n              value: function parseUri() {\n                var e = this.getCurrentRecord();\n                if (e.type === o.URI) return this.currentLine++, e.value;\n              }\n            }, {\n              key: \"parseEmail\",\n              value: function parseEmail() {\n                var e = [];\n\n                for (;;) {\n                  var _t92 = this.getCurrentRecord();\n\n                  if (_t92.type !== o.EMAIL) break;\n                  e.push(_t92.value), this.currentLine++;\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parsePhone\",\n              value: function parsePhone() {\n                var e = [];\n\n                for (;;) {\n                  var _t93 = this.getCurrentRecord();\n\n                  if (_t93.type !== o.PHONE) break;\n                  e.push(_t93.value), this.currentLine++;\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseConnection\",\n              value: function parseConnection() {\n                var e = this.getCurrentRecord();\n\n                if (e.type === o.CONNECTION) {\n                  var _t94 = this.extractOneOrMore(e, l);\n\n                  this.consumeSpaceForRecord(e);\n\n                  var _i48 = this.extractOneOrMore(e, l);\n\n                  this.consumeSpaceForRecord(e);\n\n                  var _r38 = this.extract(e, this.consumeAddress);\n\n                  return this.currentLine++, {\n                    nettype: _t94,\n                    addrtype: _i48,\n                    address: _r38\n                  };\n                }\n              }\n            }, {\n              key: \"parseMedia\",\n              value: function parseMedia() {\n                var e = this.getCurrentRecord(),\n                    t = this.extract(e, this.consumeToken);\n                this.consumeSpaceForRecord(e);\n                var i = this.extract(e, this.consumePort);\n                \"/\" === e.value[e.cur] && (e.cur += 1, i += this.extract(e, this.consumeInteger)), this.consumeSpaceForRecord(e);\n                var r = [];\n\n                for (r.push(this.extract(e, this.consumeToken)); \"/\" === e.value[e.cur];) {\n                  e.cur += 1, r.push(this.extract(e, this.consumeToken));\n                }\n\n                if (0 === r.length) throw new Error(\"Invalid proto\");\n                var n = this.parseFmt(e);\n                return this.currentLine++, {\n                  mediaType: t,\n                  port: i,\n                  protos: r,\n                  fmts: n\n                };\n              }\n            }, {\n              key: \"parseTimeFields\",\n              value: function parseTimeFields() {\n                var e = [];\n\n                for (; this.getCurrentRecord().type === o.TIME;) {\n                  var _t95 = this.parseTime(),\n                      _i49 = this.parseRepeat(),\n                      _r39 = this.parseZone();\n\n                  e.push({\n                    time: _t95,\n                    repeats: _i49,\n                    zones: _r39\n                  });\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseMediaDescription\",\n              value: function parseMediaDescription() {\n                var e = [];\n\n                for (; this.currentLine < this.records.length && this.getCurrentRecord().type === o.MEDIA;) {\n                  var _t96 = this.parseMedia(),\n                      _i50 = this.parseInformation(),\n                      _r40 = this.parseConnections(),\n                      _n22 = this.parseBandWidth(),\n                      _s16 = this.parseKey(),\n                      _o9 = this.parseMediaAttributes(_t96);\n\n                  e.push({\n                    media: _t96,\n                    information: _i50,\n                    connections: _r40,\n                    bandwidths: _n22,\n                    key: _s16,\n                    attributes: _o9\n                  });\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseConnections\",\n              value: function parseConnections() {\n                var e = [];\n\n                for (; this.currentLine < this.records.length && this.getCurrentRecord().type === o.CONNECTION;) {\n                  e.push(this.parseConnection());\n                }\n\n                return e;\n              }\n            }, {\n              key: \"parseFmt\",\n              value: function parseFmt(e) {\n                var t = [];\n\n                for (;;) {\n                  try {\n                    this.consumeSpaceForRecord(e), t.push(this.extract(e, this.consumeToken));\n                  } catch (e) {\n                    break;\n                  }\n                }\n\n                if (0 === t.length) throw new Error(\"Invalid fmts\");\n                return t;\n              }\n            }, {\n              key: \"extract\",\n              value: function extract(e, t) {\n                for (var _len19 = arguments.length, i = new Array(_len19 > 2 ? _len19 - 2 : 0), _key19 = 2; _key19 < _len19; _key19++) {\n                  i[_key19 - 2] = arguments[_key19];\n                }\n\n                var r = t.call.apply(t, [this, e.value, e.cur].concat(i)),\n                    n = e.value.slice(e.cur, r);\n                return e.cur = r, n;\n              }\n            }, {\n              key: \"extractOneOrMore\",\n              value: function extractOneOrMore(e, t) {\n                var i = this.consumeOneOrMore(e.value, e.cur, t),\n                    r = e.value.slice(e.cur, i);\n                return e.cur = i, r;\n              }\n            }, {\n              key: \"consumeSpaceForRecord\",\n              value: function consumeSpaceForRecord(e) {\n                if (e.value[e.cur] !== s) throw new Error(\"Invalid space at \".concat(e.cur, \".\"));\n                e.cur += 1;\n              }\n            }]);\n\n            return S;\n          }(C);\n\n          var R =\n          /*#__PURE__*/\n          function (_C3) {\n            _inherits(R, _C3);\n\n            function R() {\n              var _getPrototypeOf2;\n\n              var _this117;\n\n              _classCallCheck(this, R);\n\n              for (var _len20 = arguments.length, e = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n                e[_key20] = arguments[_key20];\n              }\n\n              _this117 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(R)).call.apply(_getPrototypeOf2, [this].concat(e))), m(_assertThisInitialized(_assertThisInitialized(_this117)), \"attributes\", void 0), m(_assertThisInitialized(_assertThisInitialized(_this117)), \"digested\", !1);\n              return _this117;\n            }\n\n            _createClass(R, [{\n              key: \"extractOneOrMore\",\n              value: function extractOneOrMore(e, t, i) {\n                var r = this.consumeOneOrMore(e.attValue, e._cur, t),\n                    n = e.attValue.slice(e._cur, r),\n                    _ref58 = i || [],\n                    _ref59 = _slicedToArray(_ref58, 2),\n                    s = _ref59[0],\n                    o = _ref59[1];\n\n                if (\"number\" == typeof s && n.length < s) throw new Error(\"error in length, should be more or equal than \".concat(s, \" characters.\"));\n                if (\"number\" == typeof o && n.length > o) throw new Error(\"error in length, should be less or equal than \".concat(o, \" characters.\"));\n                return e._cur = r, n;\n              }\n            }, {\n              key: \"consumeAttributeSpace\",\n              value: function consumeAttributeSpace(e) {\n                if (e.attValue[e._cur] !== s) throw new Error(\"Invalid space at \".concat(e._cur, \".\"));\n                e._cur += 1;\n              }\n            }, {\n              key: \"extract\",\n              value: function extract(e, t) {\n                if (!e.attValue) throw new Error(\"Nothing to extract from attValue.\");\n\n                for (var _len21 = arguments.length, i = new Array(_len21 > 2 ? _len21 - 2 : 0), _key21 = 2; _key21 < _len21; _key21++) {\n                  i[_key21 - 2] = arguments[_key21];\n                }\n\n                var r = t.call.apply(t, [this, e.attValue, e._cur].concat(i)),\n                    n = e.attValue.slice(e._cur, r);\n                return e._cur = r, n;\n              }\n            }, {\n              key: \"atEnd\",\n              value: function atEnd(e) {\n                if (!e.attValue) throw new Error();\n                return e._cur >= e.attValue.length;\n              }\n            }, {\n              key: \"peekChar\",\n              value: function peekChar(e) {\n                if (!e.attValue) throw new Error();\n                return e.attValue[e._cur];\n              }\n            }, {\n              key: \"peek\",\n              value: function peek(e, t) {\n                if (!e.attValue) throw new Error();\n\n                for (var _i51 = 0; _i51 < t.length; _i51++) {\n                  if (t[_i51] !== e.attValue[e._cur + _i51]) return !1;\n                }\n\n                return !0;\n              }\n            }, {\n              key: \"parseIceUfrag\",\n              value: function parseIceUfrag(e) {\n                if (this.attributes.iceUfrag) throw new Error(\"Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'\");\n                this.attributes.iceUfrag = this.extractOneOrMore(e, E, [4, 256]);\n              }\n            }, {\n              key: \"parseIcePwd\",\n              value: function parseIcePwd(e) {\n                if (this.attributes.icePwd) throw new Error(\"Invalid ice-pwd, should be only a single line if 'a=ice-pwd'\");\n                this.attributes.icePwd = this.extractOneOrMore(e, E, [22, 256]);\n              }\n            }, {\n              key: \"parseIceOptions\",\n              value: function parseIceOptions(e) {\n                if (this.attributes.iceOptions) throw new Error(\"Invalid ice-options, should be only one 'ice-options' line\");\n                var t = [];\n\n                for (; !this.atEnd(e);) {\n                  t.push(this.extractOneOrMore(e, E));\n\n                  try {\n                    this.consumeAttributeSpace(e);\n                  } catch (t) {\n                    if (this.atEnd(e)) break;\n                    throw t;\n                  }\n                }\n\n                this.attributes.iceOptions = t;\n              }\n            }, {\n              key: \"parseFingerprint\",\n              value: function parseFingerprint(e) {\n                var t = this.extract(e, this.consumeToken);\n                this.consumeAttributeSpace(e);\n                var i = this.extract(e, this.consumeTill);\n                this.attributes.fingerprints.push({\n                  hashFunction: t,\n                  fingerprint: i\n                });\n              }\n            }, {\n              key: \"parseExtmap\",\n              value: function parseExtmap(e) {\n                var t = this.extractOneOrMore(e, a);\n                var i;\n                \"/\" === this.peekChar(e) && (this.extract(e, this.consume, \"/\"), i = this.extract(e, this.consumeToken)), this.consumeAttributeSpace(e);\n                var r = this.extract(e, this.consumeTill, s),\n                    n = f(f({\n                  entry: parseInt(t, 10)\n                }, i && {\n                  direction: i\n                }), {}, {\n                  extensionName: r\n                });\n                this.peekChar(e) === s && (this.consumeAttributeSpace(e), n.extensionAttributes = this.extract(e, this.consumeTill)), this.attributes.extmaps.push(n);\n              }\n            }, {\n              key: \"parseSetup\",\n              value: function parseSetup(e) {\n                if (this.attributes.setup) throw new Error(\"must only be one single 'a=setup' line.\");\n                var t = this.extract(e, this.consumeTill);\n                if (\"active\" !== t && \"passive\" !== t && \"actpass\" !== t && \"holdconn\" !== t) throw new Error(\"role must be one of 'active', 'passive', 'actpass', 'holdconn'.\");\n                this.attributes.setup = t;\n              }\n            }]);\n\n            return R;\n          }(C);\n\n          var T =\n          /*#__PURE__*/\n          function (_R2) {\n            _inherits(T, _R2);\n\n            function T() {\n              var _getPrototypeOf3;\n\n              var _this118;\n\n              _classCallCheck(this, T);\n\n              for (var _len22 = arguments.length, e = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n                e[_key22] = arguments[_key22];\n              }\n\n              _this118 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(T)).call.apply(_getPrototypeOf3, [this].concat(e))), m(_assertThisInitialized(_assertThisInitialized(_this118)), \"attributes\", {\n                unrecognized: [],\n                groups: [],\n                extmaps: [],\n                fingerprints: [],\n                identities: []\n              });\n              return _this118;\n            }\n\n            _createClass(T, [{\n              key: \"parse\",\n              value: function parse(e) {\n                if (this.digested) throw new Error(\"already digested\");\n\n                try {\n                  switch (e.attField) {\n                    case \"group\":\n                      this.parseGroup(e);\n                      break;\n\n                    case \"ice-lite\":\n                      this.parseIceLite();\n                      break;\n\n                    case \"ice-ufrag\":\n                      this.parseIceUfrag(e);\n                      break;\n\n                    case \"ice-pwd\":\n                      this.parseIcePwd(e);\n                      break;\n\n                    case \"ice-options\":\n                      this.parseIceOptions(e);\n                      break;\n\n                    case \"fingerprint\":\n                      this.parseFingerprint(e);\n                      break;\n\n                    case \"setup\":\n                      this.parseSetup(e);\n                      break;\n\n                    case \"tls-id\":\n                      this.parseTlsId(e);\n                      break;\n\n                    case \"identity\":\n                      this.parseIdentity(e);\n                      break;\n\n                    case \"extmap\":\n                      this.parseExtmap(e);\n                      break;\n\n                    case \"msid-semantic\":\n                      this.parseMsidSemantic(e);\n                      break;\n\n                    default:\n                      e.ignored = !0, this.attributes.unrecognized.push(e);\n                  }\n                } catch (t) {\n                  throw console.error(\"parsing session attribute \".concat(e.attField, ' error, \"a=').concat(e.attField, \":\").concat(e.attValue, '\"')), t;\n                }\n\n                if (!e.ignored && e.attValue && !this.atEnd(e)) throw new Error(\"attribute parsing error\");\n              }\n            }, {\n              key: \"digest\",\n              value: function digest() {\n                return this.digested = !0, this.attributes;\n              }\n            }, {\n              key: \"parseGroup\",\n              value: function parseGroup(e) {\n                var t = this.extract(e, this.consumeToken),\n                    i = [];\n\n                for (; !this.atEnd(e) && this.peekChar(e) === s;) {\n                  this.consumeAttributeSpace(e), i.push(this.extract(e, this.consumeToken));\n                }\n\n                this.attributes.groups.push({\n                  semantic: t,\n                  identificationTag: i\n                });\n              }\n            }, {\n              key: \"parseIceLite\",\n              value: function parseIceLite() {\n                if (this.attributes.iceLite) throw new Error(\"Invalid ice-lite, should be only a single line of 'a=ice-lite'\");\n                this.attributes.iceLite = !0;\n              }\n            }, {\n              key: \"parseTlsId\",\n              value: function parseTlsId(e) {\n                if (this.attributes.tlsId) throw new Error(\"must be only one tld-id line\");\n                this.attributes.tlsId = this.extractOneOrMore(e, g);\n              }\n            }, {\n              key: \"parseIdentity\",\n              value: function parseIdentity(e) {\n                var t = this.extractOneOrMore(e, _),\n                    i = [];\n\n                for (; !this.atEnd(e) && this.peekChar(e) === s;) {\n                  this.consumeAttributeSpace(e);\n\n                  var _t97 = this.extract(e, this.consumeToken);\n\n                  this.extract(e, this.consume, \"=\");\n\n                  var _r41 = this.extractOneOrMore(e, function (e) {\n                    return e !== s && p(e);\n                  });\n\n                  i.push({\n                    name: _t97,\n                    value: _r41\n                  });\n                }\n\n                this.attributes.identities.push({\n                  assertionValue: t,\n                  extensions: i\n                });\n              }\n            }, {\n              key: \"parseMsidSemantic\",\n              value: function parseMsidSemantic(e) {\n                this.peekChar(e) === s && this.consumeAttributeSpace(e);\n                var t = {\n                  semantic: this.extract(e, this.consumeToken),\n                  identifierList: []\n                };\n\n                for (;;) {\n                  try {\n                    this.consumeAttributeSpace(e);\n                  } catch (e) {\n                    break;\n                  }\n\n                  if (\"*\" === this.peekChar(e)) {\n                    this.extract(e, this.consume, \"*\"), t.applyForAll = !0;\n                    break;\n                  }\n\n                  {\n                    var _i52 = this.extract(e, this.consumeTill, s);\n\n                    t.identifierList.push(_i52);\n                  }\n                }\n\n                this.attributes.msidSemantic = t;\n              }\n            }]);\n\n            return T;\n          }(R);\n\n          var v =\n          /*#__PURE__*/\n          function (_R3) {\n            _inherits(v, _R3);\n\n            function v(e) {\n              var _this119;\n\n              _classCallCheck(this, v);\n\n              _this119 = _possibleConstructorReturn(this, _getPrototypeOf(v).call(this)), m(_assertThisInitialized(_assertThisInitialized(_this119)), \"attributes\", void 0), -1 !== e.protos.indexOf(\"RTP\") || e.protos.indexOf(\"rtp\"), _this119.attributes = {\n                unrecognized: [],\n                candidates: [],\n                extmaps: [],\n                fingerprints: [],\n                imageattr: [],\n                msids: [],\n                remoteCandidatesList: [],\n                rids: [],\n                ssrcs: [],\n                ssrcGroups: [],\n                rtcpFeedbackWildcards: [],\n                payloads: []\n              };\n              return _this119;\n            }\n\n            _createClass(v, [{\n              key: \"parse\",\n              value: function parse(e) {\n                if (this.digested) throw new Error(\"already digested\");\n\n                try {\n                  switch (e.attField) {\n                    case \"extmap\":\n                      this.parseExtmap(e);\n                      break;\n\n                    case \"setup\":\n                      this.parseSetup(e);\n                      break;\n\n                    case \"ice-ufrag\":\n                      this.parseIceUfrag(e);\n                      break;\n\n                    case \"ice-pwd\":\n                      this.parseIcePwd(e);\n                      break;\n\n                    case \"ice-options\":\n                      this.parseIceOptions(e);\n                      break;\n\n                    case \"candidate\":\n                      this.parseCandidate(e);\n                      break;\n\n                    case \"remote-candidate\":\n                      this.parseRemoteCandidate(e);\n                      break;\n\n                    case \"end-of-candidates\":\n                      this.parseEndOfCandidates();\n                      break;\n\n                    case \"fingerprint\":\n                      this.parseFingerprint(e);\n                      break;\n\n                    case \"rtpmap\":\n                      this.parseRtpmap(e);\n                      break;\n\n                    case \"ptime\":\n                      this.parsePtime(e);\n                      break;\n\n                    case \"maxptime\":\n                      this.parseMaxPtime(e);\n                      break;\n\n                    case \"sendrecv\":\n                    case \"recvonly\":\n                    case \"sendonly\":\n                    case \"inactive\":\n                      this.parseDirection(e);\n                      break;\n\n                    case \"ssrc\":\n                      this.parseSSRC(e);\n                      break;\n\n                    case \"fmtp\":\n                      this.parseFmtp(e);\n                      break;\n\n                    case \"rtcp-fb\":\n                      this.parseRtcpFb(e);\n                      break;\n\n                    case \"rtcp-mux\":\n                      this.parseRTCPMux();\n                      break;\n\n                    case \"rtcp-mux-only\":\n                      this.parseRTCPMuxOnly();\n                      break;\n\n                    case \"rtcp-rsize\":\n                      this.parseRTCPRsize();\n                      break;\n\n                    case \"rtcp\":\n                      this.parseRTCP(e);\n                      break;\n\n                    case \"mid\":\n                      this.parseMid(e);\n                      break;\n\n                    case \"msid\":\n                      this.parseMsid(e);\n                      break;\n\n                    case \"imageattr\":\n                      this.parseImageAttr(e);\n                      break;\n\n                    case \"rid\":\n                      this.parseRid(e);\n                      break;\n\n                    case \"simulcast\":\n                      this.parseSimulcast(e);\n                      break;\n\n                    case \"sctp-port\":\n                      this.parseSctpPort(e);\n                      break;\n\n                    case \"max-message-size\":\n                      this.parseMaxMessageSize(e);\n                      break;\n\n                    case \"ssrc-group\":\n                      this.parseSSRCGroup(e);\n                      break;\n\n                    default:\n                      e.ignored = !0, this.attributes.unrecognized.push(e);\n                  }\n                } catch (t) {\n                  throw console.error(\"parsing media attribute \".concat(e.attField, ' error, \"a=').concat(e.attField, \":\").concat(e.attValue, '\"')), t;\n                }\n\n                if (!e.ignored && e.attValue && !this.atEnd(e)) throw new Error(\"attribute parsing error\");\n              }\n            }, {\n              key: \"parseCandidate\",\n              value: function parseCandidate(e) {\n                var t = this.extractOneOrMore(e, E, [1, 32]);\n                this.consumeAttributeSpace(e);\n                var i = this.extractOneOrMore(e, a, [1, 5]);\n                this.consumeAttributeSpace(e);\n                var r = this.extract(e, this.consumeToken);\n                this.consumeAttributeSpace(e);\n                var n = this.extractOneOrMore(e, a, [1, 10]);\n                this.consumeAttributeSpace(e);\n                var o = this.extract(e, this.consumeAddress);\n                this.consumeAttributeSpace(e);\n                var d = this.extract(e, this.consumePort);\n                this.consumeAttributeSpace(e), this.extract(e, this.consume, \"typ\"), this.consumeAttributeSpace(e);\n                var l = {\n                  foundation: t,\n                  componentId: i,\n                  transport: r,\n                  priority: n,\n                  connectionAddress: o,\n                  port: d,\n                  type: this.extract(e, this.consumeToken),\n                  extension: {}\n                };\n\n                for (this.peek(e, \" raddr\") && (this.extract(e, this.consume, \" raddr\"), this.consumeAttributeSpace(e), l.relAddr = this.extract(e, this.consumeAddress)), this.peek(e, \" rport\") && (this.extract(e, this.consume, \" rport\"), this.consumeAttributeSpace(e), l.relPort = this.extract(e, this.consumePort)); this.peekChar(e) === s;) {\n                  this.consumeAttributeSpace(e);\n\n                  var _t98 = this.extract(e, this.consumeToken);\n\n                  this.consumeAttributeSpace(e), l.extension[_t98] = this.extractOneOrMore(e, c);\n                }\n\n                this.attributes.candidates.push(l);\n              }\n            }, {\n              key: \"parseRemoteCandidate\",\n              value: function parseRemoteCandidate(e) {\n                var t = [];\n\n                for (;;) {\n                  var _i53 = this.extractOneOrMore(e, a, [1, 5]);\n\n                  this.consumeAttributeSpace(e);\n\n                  var _r42 = this.extract(e, this.consumeAddress);\n\n                  this.consumeAttributeSpace(e);\n\n                  var _n23 = this.extract(e, this.consumePort);\n\n                  t.push({\n                    componentId: _i53,\n                    connectionAddress: _r42,\n                    port: _n23\n                  });\n\n                  try {\n                    this.consumeAttributeSpace(e);\n                  } catch (e) {\n                    break;\n                  }\n                }\n\n                this.attributes.remoteCandidatesList.push(t);\n              }\n            }, {\n              key: \"parseEndOfCandidates\",\n              value: function parseEndOfCandidates() {\n                if (this.attributes.endOfCandidates) throw new Error(\"must be only one line of end-of-candidates\");\n                this.attributes.endOfCandidates = !0;\n              }\n            }, {\n              key: \"parseRtpmap\",\n              value: function parseRtpmap(e) {\n                var t = this.extract(e, this.consumeToken);\n                this.consumeAttributeSpace(e);\n                var i = this.extract(e, this.consumeTill, \"/\");\n                this.extract(e, this.consume, \"/\");\n                var r = {\n                  encodingName: i,\n                  clockRate: this.extractOneOrMore(e, a)\n                };\n                this.atEnd(e) || \"/\" !== this.peekChar(e) || (this.extract(e, this.consume, \"/\"), r.encodingParameters = parseInt(this.extract(e, this.consumeTill), 10));\n                var n = this.attributes.payloads.find(function (e) {\n                  return e.payloadType === parseInt(t, 10);\n                });\n                n ? n.rtpMap = r : this.attributes.payloads.push({\n                  payloadType: parseInt(t, 10),\n                  rtpMap: r,\n                  rtcpFeedbacks: []\n                });\n              }\n            }, {\n              key: \"parsePtime\",\n              value: function parsePtime(e) {\n                if (this.attributes.ptime) throw new Error(\"must be only one line of ptime\");\n                this.attributes.ptime = this.extract(e, this.consumeTill);\n              }\n            }, {\n              key: \"parseMaxPtime\",\n              value: function parseMaxPtime(e) {\n                if (this.attributes.maxPtime) throw new Error(\"must be only one line of ptime\");\n                this.attributes.maxPtime = this.extract(e, this.consumeTill);\n              }\n            }, {\n              key: \"parseDirection\",\n              value: function parseDirection(e) {\n                if (this.attributes.direction) throw new Error(\"must be only one line of direction info\");\n                this.attributes.direction = e.attField;\n              }\n            }, {\n              key: \"parseSSRC\",\n              value: function parseSSRC(e) {\n                var t = this.extractOneOrMore(e, a);\n                this.consumeAttributeSpace(e);\n                var i = this.extract(e, this.consumeTill, \":\");\n                var r;\n                \":\" === this.peekChar(e) && (this.extract(e, this.consume, \":\"), r = this.extract(e, this.consumeTill));\n                var n = this.attributes.ssrcs.find(function (e) {\n                  return e.ssrcId === parseInt(t, 10);\n                });\n                n ? n.attributes[i] = r : this.attributes.ssrcs.push({\n                  ssrcId: parseInt(t, 10),\n                  attributes: _defineProperty({}, i, r)\n                });\n              }\n            }, {\n              key: \"parseFmtp\",\n              value: function parseFmtp(e) {\n                var t = this.extract(e, this.consumeTill, s);\n                this.consumeAttributeSpace(e);\n                var i = this.extract(e, this.consumeTill),\n                    r = {};\n                i.split(\";\").forEach(function (e) {\n                  var _e$split3 = e.split(\"=\"),\n                      _e$split4 = _slicedToArray(_e$split3, 2),\n                      t = _e$split4[0],\n                      i = _e$split4[1];\n\n                  t = t.trim(), i = \"string\" == typeof i ? i.trim() : i, \"string\" == typeof t && t.length > 0 && (r[t] = i);\n                });\n                var n = this.attributes.payloads.find(function (e) {\n                  return e.payloadType === parseInt(t, 10);\n                });\n                n ? n.fmtp = {\n                  parameters: r\n                } : this.attributes.payloads.push({\n                  payloadType: parseInt(t, 10),\n                  rtcpFeedbacks: [],\n                  fmtp: {\n                    parameters: r\n                  }\n                });\n              }\n            }, {\n              key: \"parseFmtParameters\",\n              value: function parseFmtParameters(e) {\n                var t = {},\n                    i = this.extract(e, this.consumeTill, \"=\");\n                e._cur++;\n                var r = this.extract(e, this.consumeTill, \";\");\n\n                for (t[i] = r; \";\" === e.attValue[e._cur];) {\n                  var _i54 = this.extract(e, this.consumeTill, \"=\");\n\n                  e._cur++;\n\n                  var _r43 = this.extract(e, this.consumeTill, \";\");\n\n                  t[_i54] = _r43;\n                }\n\n                return t;\n              }\n            }, {\n              key: \"parseRtcpFb\",\n              value: function parseRtcpFb(e) {\n                var t = \"\";\n                t = \"*\" === this.peekChar(e) ? this.extract(e, this.consume, \"*\") : this.extract(e, this.consumeTill, s), this.consumeAttributeSpace(e);\n                var i = this.extract(e, this.consumeTill, s);\n                var r;\n\n                switch (i) {\n                  case \"trr-int\":\n                    r = {\n                      type: i,\n                      interval: this.extract(e, this.consumeTill)\n                    };\n                    break;\n\n                  case \"ack\":\n                  case \"nack\":\n                  default:\n                    {\n                      var _t99 = {\n                        type: i\n                      };\n                      this.peekChar(e) === s && (this.consumeAttributeSpace(e), _t99.parameter = this.extract(e, this.consumeToken), this.peekChar(e) === s && (_t99.additional = this.extract(e, this.consumeTill))), r = _t99;\n                    }\n                }\n\n                if (\"*\" === t) this.attributes.rtcpFeedbackWildcards.push(r);else {\n                  var _e74 = this.attributes.payloads.find(function (e) {\n                    return e.payloadType === parseInt(t, 10);\n                  });\n\n                  _e74 ? _e74.rtcpFeedbacks.push(r) : this.attributes.payloads.push({\n                    payloadType: parseInt(t, 10),\n                    rtcpFeedbacks: [r]\n                  });\n                }\n              }\n            }, {\n              key: \"parseRTCPMux\",\n              value: function parseRTCPMux() {\n                if (this.attributes.rtcpMux) throw new Error(\"must be single line of rtcp-mux\");\n                this.attributes.rtcpMux = !0;\n              }\n            }, {\n              key: \"parseRTCPMuxOnly\",\n              value: function parseRTCPMuxOnly() {\n                if (this.attributes.rtcpMuxOnly) throw new Error(\"must be single line of rtcp-only\");\n                this.attributes.rtcpMuxOnly = !0;\n              }\n            }, {\n              key: \"parseRTCPRsize\",\n              value: function parseRTCPRsize() {\n                if (this.attributes.rtcpRsize) throw new Error(\"must be single line of rtcp-rsize\");\n                this.attributes.rtcpRsize = !0;\n              }\n            }, {\n              key: \"parseRTCP\",\n              value: function parseRTCP(e) {\n                if (this.attributes.rtcp) throw new Error(\"must be single line of rtcp\");\n                var t = {\n                  port: this.extract(e, this.consumePort)\n                };\n                this.peekChar(e) === s && (this.consumeAttributeSpace(e), t.netType = this.extractOneOrMore(e, l), this.consumeAttributeSpace(e), t.addressType = this.extractOneOrMore(e, l), this.consumeAttributeSpace(e), t.address = this.extract(e, this.consumeAddress)), this.attributes.rtcp = t;\n              }\n            }, {\n              key: \"parseMsid\",\n              value: function parseMsid(e) {\n                var t = {\n                  id: this.extractOneOrMore(e, l, [1, 64])\n                };\n                this.peekChar(e) === s && (this.consumeAttributeSpace(e), t.appdata = this.extractOneOrMore(e, l, [1, 64])), this.attributes.msids.push(t);\n              }\n            }, {\n              key: \"parseImageAttr\",\n              value: function parseImageAttr(e) {\n                this.attributes.imageattr.push(e.attValue);\n              }\n            }, {\n              key: \"parseRid\",\n              value: function parseRid(e) {\n                var t = this.extractOneOrMore(e, function (e) {\n                  return u(e) || a(e) || \"_\" === e || \"-\" === e;\n                });\n                this.consumeAttributeSpace(e);\n                var i = {\n                  id: t,\n                  direction: this.extract(e, this.consumeToken),\n                  params: []\n                };\n\n                if (this.peekChar(e) === s) {\n                  if (this.consumeAttributeSpace(e), this.peek(e, \"pt=\")) {\n                    this.extract(e, this.consume, \"pt=\");\n                    var _t100 = [];\n\n                    for (;;) {\n                      var _i55 = this.extract(e, this.consumeToken);\n\n                      _t100.push(_i55);\n\n                      try {\n                        this.extract(e, this.consume, \",\");\n                      } catch (e) {\n                        break;\n                      }\n                    }\n\n                    i.payloads = _t100, this.peekChar(e) === s && this.extract(e, this.consume, s);\n                  }\n\n                  for (;;) {\n                    var _t101 = this.extract(e, this.consumeToken);\n\n                    switch (_t101) {\n                      case \"depend\":\n                        {\n                          var _r44 = {\n                            type: _t101,\n                            rids: this.extract(e, this.consume, \"=\").split(\",\")\n                          };\n                          i.params.push(_r44);\n                          break;\n                        }\n\n                      case \"max-width\":\n                      case \"height-width\":\n                      case \"max-fps\":\n                      case \"max-fs\":\n                      case \"max-br\":\n                      case \"max-pps\":\n                      case \"max-bpp\":\n                      default:\n                        {\n                          var _r45 = {\n                            type: _t101\n                          };\n                          \"=\" === this.peekChar(e) && (this.extract(e, this.consume, \"=\"), _r45.val = this.extract(e, this.consumeTill, \";\")), i.params.push(_r45);\n                        }\n                    }\n\n                    try {\n                      this.extract(e, this.consume, \";\");\n                    } catch (e) {\n                      break;\n                    }\n                  }\n                }\n\n                this.attributes.rids.push(i);\n              }\n            }, {\n              key: \"parseSimulcast\",\n              value: function parseSimulcast(e) {\n                if (this.attributes.simulcast) throw new Error(\"must be single line of simulcast\");\n                this.attributes.simulcast = e.attValue, this.extract(e, this.consumeTill);\n              }\n            }, {\n              key: \"parseSctpPort\",\n              value: function parseSctpPort(e) {\n                this.attributes.sctpPort = this.extractOneOrMore(e, a, [1, 5]);\n              }\n            }, {\n              key: \"parseMaxMessageSize\",\n              value: function parseMaxMessageSize(e) {\n                this.attributes.maxMessageSize = this.extractOneOrMore(e, a, [1, void 0]);\n              }\n            }, {\n              key: \"digest\",\n              value: function digest() {\n                return this.digested = !0, this.attributes;\n              }\n            }, {\n              key: \"parseMid\",\n              value: function parseMid(e) {\n                this.attributes.mid = this.extract(e, this.consumeToken);\n              }\n            }, {\n              key: \"parseSSRCGroup\",\n              value: function parseSSRCGroup(e) {\n                var t = this.extract(e, this.consumeToken),\n                    i = [];\n\n                for (;;) {\n                  try {\n                    this.consumeAttributeSpace(e);\n\n                    var _t102 = this.extract(e, this.consumeInteger);\n\n                    i.push(parseInt(_t102, 10));\n                  } catch (e) {\n                    break;\n                  }\n                }\n\n                this.attributes.ssrcGroups.push({\n                  semantic: t,\n                  ssrcIds: i\n                });\n              }\n            }]);\n\n            return v;\n          }(R);\n\n          function y(e, t, i) {\n            return t in e ? Object.defineProperty(e, t, {\n              value: i,\n              enumerable: !0,\n              configurable: !0,\n              writable: !0\n            }) : e[t] = i, e;\n          }\n\n          var w =\n          /*#__PURE__*/\n          function () {\n            function w() {\n              _classCallCheck(this, w);\n\n              y(this, \"eol\", n);\n            }\n\n            _createClass(w, [{\n              key: \"print\",\n              value: function print(e, t) {\n                var i = \"\";\n                return t && (this.eol = t), i += this.printVersion(e.version), i += this.printOrigin(e.origin), i += this.printSessionName(e.sessionName), i += this.printInformation(e.information), i += this.printUri(e.uri), i += this.printEmail(e.emails), i += this.printPhone(e.phones), i += this.printConnection(e.connection), i += this.printBandwidth(e.bandwidths), i += this.printTimeFields(e.timeFields), i += this.printKey(e.key), i += this.printSessionAttributes(e.attributes), i += this.printMediaDescription(e.mediaDescriptions), i;\n              }\n            }, {\n              key: \"printVersion\",\n              value: function printVersion(e) {\n                return \"v=\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printOrigin\",\n              value: function printOrigin(e) {\n                return \"o=\".concat(e.username, \" \").concat(e.sessId, \" \").concat(e.sessVersion, \" \").concat(e.nettype, \" \").concat(e.addrtype, \" \").concat(e.unicastAddress).concat(this.eol);\n              }\n            }, {\n              key: \"printSessionName\",\n              value: function printSessionName(e) {\n                return e ? \"s=\".concat(e).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printInformation\",\n              value: function printInformation(e) {\n                return e ? \"i=\".concat(e).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printUri\",\n              value: function printUri(e) {\n                return e ? \"u=\".concat(e).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printEmail\",\n              value: function printEmail(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion7 = true;\n                var _didIteratorError7 = false;\n                var _iteratorError7 = undefined;\n\n                try {\n                  for (var _iterator7 = e[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n                    var _i56 = _step7.value;\n                    t += \"e=\".concat(_i56).concat(this.eol);\n                  }\n                } catch (err) {\n                  _didIteratorError7 = true;\n                  _iteratorError7 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n                      _iterator7.return();\n                    }\n                  } finally {\n                    if (_didIteratorError7) {\n                      throw _iteratorError7;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printPhone\",\n              value: function printPhone(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion8 = true;\n                var _didIteratorError8 = false;\n                var _iteratorError8 = undefined;\n\n                try {\n                  for (var _iterator8 = e[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n                    var _i57 = _step8.value;\n                    t += \"e=\".concat(_i57).concat(this.eol);\n                  }\n                } catch (err) {\n                  _didIteratorError8 = true;\n                  _iteratorError8 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n                      _iterator8.return();\n                    }\n                  } finally {\n                    if (_didIteratorError8) {\n                      throw _iteratorError8;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printConnection\",\n              value: function printConnection(e) {\n                return e ? \"c=\".concat(e.nettype, \" \").concat(e.addrtype, \" \").concat(e.address).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printBandwidth\",\n              value: function printBandwidth(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion9 = true;\n                var _didIteratorError9 = false;\n                var _iteratorError9 = undefined;\n\n                try {\n                  for (var _iterator9 = e[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n                    var _i58 = _step9.value;\n                    t += \"b=\".concat(_i58.bwtype, \":\").concat(_i58.bandwidth).concat(this.eol);\n                  }\n                } catch (err) {\n                  _didIteratorError9 = true;\n                  _iteratorError9 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion9 && _iterator9.return != null) {\n                      _iterator9.return();\n                    }\n                  } finally {\n                    if (_didIteratorError9) {\n                      throw _iteratorError9;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printTimeFields\",\n              value: function printTimeFields(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion10 = true;\n                var _didIteratorError10 = false;\n                var _iteratorError10 = undefined;\n\n                try {\n                  for (var _iterator10 = e[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n                    var _i59 = _step10.value;\n                    t += \"t=\".concat(_i59.time.startTime, \" \").concat(_i59.time.startTime).concat(this.eol);\n                    var _iteratorNormalCompletion11 = true;\n                    var _didIteratorError11 = false;\n                    var _iteratorError11 = undefined;\n\n                    try {\n                      for (var _iterator11 = _i59.repeats[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n                        var _e75 = _step11.value;\n                        t += \"r=\".concat(_e75.repeatInterval, \" \").concat(_e75.typedTimes.join(\" \")).concat(this.eol);\n                      }\n                    } catch (err) {\n                      _didIteratorError11 = true;\n                      _iteratorError11 = err;\n                    } finally {\n                      try {\n                        if (!_iteratorNormalCompletion11 && _iterator11.return != null) {\n                          _iterator11.return();\n                        }\n                      } finally {\n                        if (_didIteratorError11) {\n                          throw _iteratorError11;\n                        }\n                      }\n                    }\n\n                    _i59.zoneAdjustments && (t += \"z=\", t += \"z=\".concat(_i59.zoneAdjustments.map(function (e) {\n                      return \"\".concat(e.time, \" \").concat(e.back ? \"-\" : \"\", \" \").concat(e.typedTime);\n                    }).join(\" \")).concat(this.eol), t += this.eol);\n                  }\n                } catch (err) {\n                  _didIteratorError10 = true;\n                  _iteratorError10 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion10 && _iterator10.return != null) {\n                      _iterator10.return();\n                    }\n                  } finally {\n                    if (_didIteratorError10) {\n                      throw _iteratorError10;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printKey\",\n              value: function printKey(e) {\n                return e ? \"k=\".concat(e).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printAttributes\",\n              value: function printAttributes(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion12 = true;\n                var _didIteratorError12 = false;\n                var _iteratorError12 = undefined;\n\n                try {\n                  for (var _iterator12 = e[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n                    var _i60 = _step12.value;\n                    t += \"a=\".concat(_i60.attField).concat(_i60.attValue ? \":\".concat(_i60.attValue) : \"\").concat(this.eol);\n                  }\n                } catch (err) {\n                  _didIteratorError12 = true;\n                  _iteratorError12 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion12 && _iterator12.return != null) {\n                      _iterator12.return();\n                    }\n                  } finally {\n                    if (_didIteratorError12) {\n                      throw _iteratorError12;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printMediaDescription\",\n              value: function printMediaDescription(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion13 = true;\n                var _didIteratorError13 = false;\n                var _iteratorError13 = undefined;\n\n                try {\n                  for (var _iterator13 = e[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {\n                    var _i61 = _step13.value;\n                    t += this.printMedia(_i61.media), t += this.printInformation(_i61.information), t += this.printConnections(_i61.connections), t += this.printBandwidth(_i61.bandwidths), t += this.printKey(_i61.key), t += this.printMediaAttributes(_i61);\n                  }\n                } catch (err) {\n                  _didIteratorError13 = true;\n                  _iteratorError13 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion13 && _iterator13.return != null) {\n                      _iterator13.return();\n                    }\n                  } finally {\n                    if (_didIteratorError13) {\n                      throw _iteratorError13;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printConnections\",\n              value: function printConnections(e) {\n                var t = \"\";\n                var _iteratorNormalCompletion14 = true;\n                var _didIteratorError14 = false;\n                var _iteratorError14 = undefined;\n\n                try {\n                  for (var _iterator14 = e[Symbol.iterator](), _step14; !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {\n                    var _i62 = _step14.value;\n                    t += this.printConnection(_i62);\n                  }\n                } catch (err) {\n                  _didIteratorError14 = true;\n                  _iteratorError14 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion14 && _iterator14.return != null) {\n                      _iterator14.return();\n                    }\n                  } finally {\n                    if (_didIteratorError14) {\n                      throw _iteratorError14;\n                    }\n                  }\n                }\n\n                return t;\n              }\n            }, {\n              key: \"printMedia\",\n              value: function printMedia(e) {\n                return \"m=\".concat(e.mediaType, \" \").concat(e.port, \" \").concat(e.protos.join(\"/\"), \" \").concat(e.fmts.join(\" \")).concat(this.eol);\n              }\n            }, {\n              key: \"printSessionAttributes\",\n              value: function printSessionAttributes(e) {\n                return new O(this.eol).print(e);\n              }\n            }, {\n              key: \"printMediaAttributes\",\n              value: function printMediaAttributes(e) {\n                return new b(this.eol).print(e);\n              }\n            }]);\n\n            return w;\n          }();\n\n          var N =\n          /*#__PURE__*/\n          function () {\n            function N(e) {\n              _classCallCheck(this, N);\n\n              y(this, \"eol\", void 0), this.eol = e;\n            }\n\n            _createClass(N, [{\n              key: \"printIceUfrag\",\n              value: function printIceUfrag(e) {\n                return void 0 === e ? \"\" : \"a=ice-ufrag:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printIcePwd\",\n              value: function printIcePwd(e) {\n                return void 0 === e ? \"\" : \"a=ice-pwd:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printIceOptions\",\n              value: function printIceOptions(e) {\n                return void 0 === e ? \"\" : \"a=ice-options:\".concat(e.join(s)).concat(this.eol);\n              }\n            }, {\n              key: \"printFingerprints\",\n              value: function printFingerprints(e) {\n                return e.length > 0 ? e.map(function (e) {\n                  return \"a=fingerprint:\".concat(e.hashFunction).concat(s).concat(e.fingerprint);\n                }).join(this.eol) + this.eol : \"\";\n              }\n            }, {\n              key: \"printExtmap\",\n              value: function printExtmap(e) {\n                var _this120 = this;\n\n                return e.map(function (e) {\n                  return \"a=extmap:\".concat(e.entry).concat(e.direction ? \"/\".concat(e.direction) : \"\").concat(s).concat(e.extensionName).concat(e.extensionAttributes ? \"\".concat(s).concat(e.extensionAttributes) : \"\").concat(_this120.eol);\n                }).join(\"\");\n              }\n            }, {\n              key: \"printSetup\",\n              value: function printSetup(e) {\n                return void 0 === e ? \"\" : \"a=setup:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printUnrecognized\",\n              value: function printUnrecognized(e) {\n                var _this121 = this;\n\n                return e.map(function (e) {\n                  return \"a=\".concat(e.attField).concat(e.attValue ? \":\".concat(e.attValue) : \"\").concat(_this121.eol);\n                }).join(\"\");\n              }\n            }]);\n\n            return N;\n          }();\n\n          var O =\n          /*#__PURE__*/\n          function (_N) {\n            _inherits(O, _N);\n\n            function O() {\n              _classCallCheck(this, O);\n\n              return _possibleConstructorReturn(this, _getPrototypeOf(O).apply(this, arguments));\n            }\n\n            _createClass(O, [{\n              key: \"print\",\n              value: function print(e) {\n                var t = \"\";\n                return t += this.printGroups(e.groups), t += this.printMsidSemantic(e.msidSemantic), t += this.printIceLite(e.iceLite), t += this.printIceUfrag(e.iceUfrag), t += this.printIcePwd(e.icePwd), t += this.printIceOptions(e.iceOptions), t += this.printFingerprints(e.fingerprints), t += this.printSetup(e.setup), t += this.printTlsId(e.tlsId), t += this.printIdentity(e.identities), t += this.printExtmap(e.extmaps), t += this.printUnrecognized(e.unrecognized), t;\n              }\n            }, {\n              key: \"printGroups\",\n              value: function printGroups(e) {\n                var _this122 = this;\n\n                var t = \"\";\n                return e.length > 0 && (t += e.map(function (e) {\n                  return \"a=group:\".concat(e.semantic).concat(e.identificationTag.map(function (e) {\n                    return \"\".concat(s).concat(e);\n                  }).join(\"\")).concat(_this122.eol);\n                }).join(\"\")), t;\n              }\n            }, {\n              key: \"printIceLite\",\n              value: function printIceLite(e) {\n                return void 0 === e ? \"\" : \"a=ice-lite\" + this.eol;\n              }\n            }, {\n              key: \"printTlsId\",\n              value: function printTlsId(e) {\n                return e ? \"a=tls-id:\".concat(e).concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printIdentity\",\n              value: function printIdentity(e) {\n                return 0 === e.length ? \"\" : e.map(function (e) {\n                  return \"a=identity:\".concat(e.assertionValue).concat(e.extensions.map(function (e) {\n                    return \"\".concat(s).concat(e.name).concat(e.value ? \"=\".concat(e.value) : \"\");\n                  }));\n                }).join(this.eol) + this.eol;\n              }\n            }, {\n              key: \"printMsidSemantic\",\n              value: function printMsidSemantic(e) {\n                if (!e) return \"\";\n                var t = \"a=msid-semantic:\".concat(e.semantic);\n                return e.applyForAll ? t += \"\".concat(s, \"*\") : e.identifierList.length > 0 && (t += e.identifierList.map(function (e) {\n                  return \"\".concat(s).concat(e);\n                })), t + this.eol;\n              }\n            }]);\n\n            return O;\n          }(N);\n\n          var b =\n          /*#__PURE__*/\n          function (_N2) {\n            _inherits(b, _N2);\n\n            function b() {\n              _classCallCheck(this, b);\n\n              return _possibleConstructorReturn(this, _getPrototypeOf(b).apply(this, arguments));\n            }\n\n            _createClass(b, [{\n              key: \"print\",\n              value: function print(e) {\n                var t = e.attributes;\n                var i = \"\";\n                return i += this.printRTCP(t.rtcp), i += this.printIceUfrag(t.iceUfrag), i += this.printIcePwd(t.icePwd), i += this.printIceOptions(t.iceOptions), i += this.printCandidates(t.candidates), i += this.printRemoteCandidatesList(t.remoteCandidatesList), i += this.printEndOfCandidates(t.endOfCandidates), i += this.printFingerprints(t.fingerprints), i += this.printSetup(t.setup), i += this.printMid(t.mid), i += this.printExtmap(t.extmaps), i += this.printRTPRelated(t), i += this.printPtime(t.ptime), i += this.printMaxPtime(t.maxPtime), i += this.printDirection(t.direction), i += this.printSSRCGroups(t.ssrcGroups), i += this.printSSRC(t.ssrcs), i += this.printRTCPMux(t.rtcpMux), i += this.printRTCPMuxOnly(t.rtcpMuxOnly), i += this.printRTCPRsize(t.rtcpRsize), i += this.printMSId(t.msids), i += this.printImageattr(t.imageattr), i += this.printRid(t.rids), i += this.printSimulcast(t.simulcast), i += this.printSCRPPort(t.sctpPort), i += this.printMaxMessageSize(t.maxMessageSize), i += this.printUnrecognized(t.unrecognized), i;\n              }\n            }, {\n              key: \"printCandidates\",\n              value: function printCandidates(e) {\n                var _this123 = this;\n\n                return e.map(function (e) {\n                  return \"a=candidate:\".concat(e.foundation).concat(s).concat(e.componentId).concat(s).concat(e.transport).concat(s).concat(e.priority).concat(s).concat(e.connectionAddress).concat(s).concat(e.port).concat(s, \"typ\").concat(s).concat(e.type).concat(e.relAddr ? \"\".concat(s, \"raddr\").concat(s).concat(e.relAddr) : \"\").concat(e.relPort ? \"\".concat(s, \"rport\").concat(s).concat(e.relPort) : \"\").concat(Object.keys(e.extension).map(function (t) {\n                    return \"\".concat(s).concat(t).concat(s).concat(e.extension[t]);\n                  }).join(\"\")).concat(_this123.eol);\n                }).join(\"\");\n              }\n            }, {\n              key: \"printRemoteCandidatesList\",\n              value: function printRemoteCandidatesList(e) {\n                var _this124 = this;\n\n                return e.map(function (e) {\n                  return \"a=remote-candidates:\".concat(e.join(s)).concat(_this124.eol);\n                }).join(\"\");\n              }\n            }, {\n              key: \"printEndOfCandidates\",\n              value: function printEndOfCandidates(e) {\n                return void 0 === e ? \"\" : \"a=end-of-candidates\" + this.eol;\n              }\n            }, {\n              key: \"printRTPRelated\",\n              value: function printRTPRelated(e) {\n                var _this125 = this;\n\n                if (!e.payloads) return \"\";\n                var t = e.payloads;\n                var i = \"\";\n                i += e.rtcpFeedbackWildcards.map(function (e) {\n                  return _this125.printRTCPFeedback(\"*\", e);\n                }).join(\"\");\n                var _iteratorNormalCompletion15 = true;\n                var _didIteratorError15 = false;\n                var _iteratorError15 = undefined;\n\n                try {\n                  var _loop3 = function _loop3() {\n                    var e = _step15.value;\n                    i += _this125.printRtpMap(e.payloadType, e.rtpMap), i += _this125.printFmtp(e.payloadType, e.fmtp), i += e.rtcpFeedbacks.map(function (t) {\n                      return _this125.printRTCPFeedback(e.payloadType, t);\n                    }).join(\"\");\n                  };\n\n                  for (var _iterator15 = t[Symbol.iterator](), _step15; !(_iteratorNormalCompletion15 = (_step15 = _iterator15.next()).done); _iteratorNormalCompletion15 = true) {\n                    _loop3();\n                  }\n                } catch (err) {\n                  _didIteratorError15 = true;\n                  _iteratorError15 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion15 && _iterator15.return != null) {\n                      _iterator15.return();\n                    }\n                  } finally {\n                    if (_didIteratorError15) {\n                      throw _iteratorError15;\n                    }\n                  }\n                }\n\n                return i;\n              }\n            }, {\n              key: \"printFmtp\",\n              value: function printFmtp(e, t) {\n                if (!t) return \"\";\n                var i = Object.keys(t.parameters);\n                return 1 === i.length && void 0 === t.parameters[i[0]] ? \"a=fmtp:\".concat(e).concat(s).concat(i[0]).concat(this.eol) : \"a=fmtp:\".concat(e).concat(s).concat(Object.keys(t.parameters).map(function (e) {\n                  return \"\".concat(e, \"=\").concat(t.parameters[e]);\n                }).join(\";\")).concat(this.eol);\n              }\n            }, {\n              key: \"printRtpMap\",\n              value: function printRtpMap(e, t) {\n                return t ? \"a=rtpmap:\".concat(e).concat(s).concat(t.encodingName, \"/\").concat(t.clockRate).concat(t.encodingParameters ? \"/\".concat(t.encodingParameters) : \"\").concat(this.eol) : \"\";\n              }\n            }, {\n              key: \"printRTCPFeedback\",\n              value: function printRTCPFeedback(e, t) {\n                var i = \"a=rtcp-fb:\".concat(e).concat(s),\n                    r = t;\n\n                switch (r.type) {\n                  case \"trr-int\":\n                    i += \"ttr-int\".concat(s).concat(r.interval);\n                    break;\n\n                  case \"ack\":\n                  case \"nack\":\n                  default:\n                    r = r, i += \"\".concat(r.type), r.parameter && (i += \"\".concat(s).concat(r.parameter), r.additional && (i += \"\".concat(s).concat(r.additional)));\n                }\n\n                return i + this.eol;\n              }\n            }, {\n              key: \"printPtime\",\n              value: function printPtime(e) {\n                return void 0 === e ? \"\" : \"a=ptime:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printMaxPtime\",\n              value: function printMaxPtime(e) {\n                return void 0 === e ? \"\" : \"a=maxptime:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printDirection\",\n              value: function printDirection(e) {\n                return void 0 === e ? \"\" : \"a=\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printSSRC\",\n              value: function printSSRC(e) {\n                var _this126 = this;\n\n                return e.map(function (e) {\n                  return Object.keys(e.attributes).map(function (t) {\n                    return \"a=ssrc:\".concat(e.ssrcId.toString(10)).concat(s).concat(t).concat(e.attributes[t] ? \":\".concat(e.attributes[t]) : \"\").concat(_this126.eol);\n                  }).join(\"\");\n                }).join(\"\");\n              }\n            }, {\n              key: \"printRTCPMux\",\n              value: function printRTCPMux(e) {\n                return void 0 === e ? \"\" : \"a=rtcp-mux\".concat(this.eol);\n              }\n            }, {\n              key: \"printRTCPMuxOnly\",\n              value: function printRTCPMuxOnly(e) {\n                return void 0 === e ? \"\" : \"a=rtcp-mux-only\".concat(this.eol);\n              }\n            }, {\n              key: \"printRTCPRsize\",\n              value: function printRTCPRsize(e) {\n                return void 0 === e ? \"\" : \"a=rtcp-rsize\".concat(this.eol);\n              }\n            }, {\n              key: \"printRTCP\",\n              value: function printRTCP(e) {\n                if (void 0 === e) return \"\";\n                var t = \"a=rtcp:\".concat(e.port);\n                return e.netType && (t += \"\".concat(s).concat(e.netType)), e.addressType && (t += \"\".concat(s).concat(e.addressType)), e.address && (t += \"\".concat(s).concat(e.address)), t + this.eol;\n              }\n            }, {\n              key: \"printMSId\",\n              value: function printMSId(e) {\n                var _this127 = this;\n\n                return e.map(function (e) {\n                  return \"a=msid:\".concat(e.id).concat(e.appdata ? \"\".concat(s).concat(e.appdata) : \"\").concat(_this127.eol);\n                }).join(\"\");\n              }\n            }, {\n              key: \"printImageattr\",\n              value: function printImageattr(e) {\n                var _this128 = this;\n\n                return e.map(function (e) {\n                  return \"a=imageattr:\".concat(e).concat(_this128.eol);\n                }).join(\"\");\n              }\n            }, {\n              key: \"printRid\",\n              value: function printRid(e) {\n                var _this129 = this;\n\n                return e.map(function (e) {\n                  var t = \"a=rid:\".concat(e.id).concat(s).concat(e.direction);\n                  return e.payloads && (t += \"\".concat(s, \"pt=\").concat(e.payloads.join(\",\"))), e.params.length > 0 && (t += \"\".concat(s).concat(e.params.map(function (e) {\n                    return \"depend\" === e.type ? \"depend=\".concat(e.rids.join(\",\")) : \"\".concat(e.type, \"=\").concat(e.val);\n                  }).join(\";\"))), t + _this129.eol;\n                }).join(\"\");\n              }\n            }, {\n              key: \"printSimulcast\",\n              value: function printSimulcast(e) {\n                return void 0 === e ? \"\" : \"a=simulcast:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printSCRPPort\",\n              value: function printSCRPPort(e) {\n                return void 0 === e ? \"\" : \"a=sctp-port:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printMaxMessageSize\",\n              value: function printMaxMessageSize(e) {\n                return void 0 === e ? \"\" : \"a=max-message-size:\".concat(e);\n              }\n            }, {\n              key: \"printMid\",\n              value: function printMid(e) {\n                return void 0 === e ? \"\" : \"a=mid:\".concat(e).concat(this.eol);\n              }\n            }, {\n              key: \"printSSRCGroups\",\n              value: function printSSRCGroups(e) {\n                var _this130 = this;\n\n                return e.map(function (e) {\n                  return \"a=ssrc-group:\".concat(e.semantic).concat(e.ssrcIds.map(function (e) {\n                    return \"\".concat(s).concat(e.toString(10));\n                  }).join(\"\")).concat(_this130.eol);\n                }).join(\"\");\n              }\n            }]);\n\n            return b;\n          }(N);\n\n          function D(e) {\n            return new S().parse(e);\n          }\n\n          function k(e, t) {\n            return new w().print(e, t);\n          }\n        }\n      },\n          t = {};\n\n      function i(r) {\n        if (t[r]) return t[r].exports;\n        var n = t[r] = {\n          exports: {}\n        };\n        return e[r](n, n.exports, i), n.exports;\n      }\n\n      return i.d = function (e, t) {\n        for (var r in t) {\n          i.o(t, r) && !i.o(e, r) && Object.defineProperty(e, r, {\n            enumerable: !0,\n            get: t[r]\n          });\n        }\n      }, i.o = function (e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t);\n      }, i.r = function (e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }, i(8);\n    }();\n  });\n\n  function JI(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function XI(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = JI(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = JI(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function zI(e, t, i, r, n) {\n    var s;\n    var o = [],\n        a = [],\n        c = [],\n        d = [],\n        l = !1,\n        A = !1;\n    var u = qI.parse(e);\n    if (Xi(s = u.mediaDescriptions).call(s, function (e) {\n      \"video\" !== e.media.mediaType || l || (a = e.attributes.payloads, d = e.attributes.extmaps, l = !0), \"audio\" !== e.media.mediaType || A || (o = e.attributes.payloads, c = e.attributes.extmaps, A = !0);\n    }), !d || 0 === a.length) throw new Error(\"Cannot get video capabilities from SDP.\");\n    if (!c || 0 === o.length) throw new Error(\"Cannot get audio capabilities from SDP.\");\n    return Xi(a).call(a, function (e) {\n      var t;\n      null !== (t = e.rtpMap) && void 0 !== t && t.clockRate && (e.rtpMap.clockRate = mr(e.rtpMap.clockRate));\n    }), Xi(o).call(o, function (e) {\n      var t;\n      null !== (t = e.rtpMap) && void 0 !== t && t.clockRate && (e.rtpMap.clockRate = mr(e.rtpMap.clockRate));\n    }), t && (o = Fr(o).call(o, function (e) {\n      var t;\n      return \"rtx\" !== (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase());\n    }), a = Fr(a).call(a, function (e) {\n      var t;\n      return \"rtx\" !== (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase());\n    })), i && (a = Fr(a).call(a, function (e) {\n      var t;\n      return !/(red)|(ulpfec)|(flexfec)/i.test((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName) || \"\");\n    })), r && (null == r ? void 0 : r.length) > 0 && (o = Fr(o).call(o, function (e) {\n      var t;\n      return eo(r).call(r, (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\");\n    })), n && (null == n ? void 0 : n.length) > 0 && (a = Fr(a).call(a, function (e) {\n      var t;\n      return eo(n).call(n, (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\");\n    })), {\n      audioCodecs: o,\n      videoCodecs: a,\n      audioExtensions: c,\n      videoExtensions: d\n    };\n  }\n\n  function ZI(e) {\n    var t = qI.parse(e);\n    var i, r;\n    var _iteratorNormalCompletion16 = true;\n    var _didIteratorError16 = false;\n    var _iteratorError16 = undefined;\n\n    try {\n      for (var _iterator16 = t.mediaDescriptions[Symbol.iterator](), _step16; !(_iteratorNormalCompletion16 = (_step16 = _iterator16.next()).done); _iteratorNormalCompletion16 = true) {\n        var _e76 = _step16.value;\n\n        if (!i) {\n          var _t103 = _e76.attributes.iceUfrag,\n              _r46 = _e76.attributes.icePwd;\n          if (!_t103 || !_r46) throw new Error(\"Cannot get iceUfrag or icePwd from SDP.\");\n          i = {\n            iceUfrag: _t103,\n            icePwd: _r46\n          };\n        }\n\n        if (!r) {\n          var _t104 = _e76.attributes.fingerprints;\n          _t104.length > 0 && (r = {\n            fingerprints: _t104\n          });\n        }\n      }\n    } catch (err) {\n      _didIteratorError16 = true;\n      _iteratorError16 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion16 && _iterator16.return != null) {\n          _iterator16.return();\n        }\n      } finally {\n        if (_didIteratorError16) {\n          throw _iteratorError16;\n        }\n      }\n    }\n\n    if (!r && t.attributes.fingerprints.length > 0 && (r = {\n      fingerprints: t.attributes.fingerprints\n    }), !r || !i) throw new Error(\"Cannot get iceParameters or dtlsParameters from SDP.\");\n    return {\n      iceParameters: i,\n      dtlsParameters: r\n    };\n  }\n\n  function $I(e) {\n    var t, i, r;\n\n    var n = e.dtls,\n        s = e.ice,\n        o = e.rtpCapabilities,\n        a = e.cname,\n        _of = of(s.candidates),\n        c = _of.candidates,\n        d = _of.defaultIp,\n        l = _of.defaultPort,\n        A = {\n      fingerprints: Es(t = n.fingerprints).call(t, function (e) {\n        return {\n          hashFunction: e.algorithm,\n          fingerprint: e.fingerprint\n        };\n      })\n    },\n        u = {\n      iceUfrag: s.iceUfrag,\n      icePwd: s.icePwd\n    };\n\n    var h;\n\n    switch (n.role) {\n      case \"server\":\n        h = \"passive\";\n        break;\n\n      case \"client\":\n        h = \"active\";\n        break;\n\n      case \"auto\":\n        h = \"actpass\";\n    }\n\n    return Xi(i = o.audioCodecs).call(i, function (e) {\n      ld(e.rtcpFeedbacks) || (e.rtcpFeedbacks = []);\n    }), Xi(r = o.videoCodecs).call(r, function (e) {\n      ld(e.rtcpFeedbacks) || (e.rtcpFeedbacks = []);\n    }), o.audioExtensions || (o.audioExtensions = []), o.videoExtensions || (o.videoExtensions = []), {\n      dtlsParameters: A,\n      iceParameters: u,\n      candidates: c,\n      rtpCapabilities: o,\n      setup: h,\n      cname: a,\n      defaultIp: d,\n      defaultPort: l\n    };\n  }\n\n  function ef(e, t, i) {\n    var r = [],\n        n = [];\n    return Xi(e).call(e, function (_ref60) {\n      var e = _ref60.ssrcId,\n          s = _ref60.rtx;\n      var o;\n      var a = wh(8, \"track-\"),\n          c = {\n        ssrcId: e,\n        attributes: XI({\n          label: a,\n          mslabel: i = i || wh(10, \"\"),\n          msid: Xe(o = \"\".concat(i, \" \")).call(o, a)\n        }, t && {\n          cname: t\n        })\n      };\n\n      if (r.push(c), void 0 !== s) {\n        var d;\n        var _o10 = {\n          ssrcId: s,\n          attributes: XI({\n            label: a,\n            mslabel: i,\n            msid: Xe(d = \"\".concat(i, \" \")).call(d, a)\n          }, t && {\n            cname: t\n          })\n        };\n        r.push(_o10), n.push({\n          semantic: \"FID\",\n          ssrcIds: [e, s]\n        });\n      }\n    }), e.length > 1 && n.push({\n      semantic: \"SIM\",\n      ssrcIds: Es(e).call(e, function (_ref61) {\n        var e = _ref61.ssrcId;\n        return e;\n      })\n    }), {\n      ssrcs: r,\n      ssrcGroups: n\n    };\n  }\n\n  function tf(e, t) {\n    var i;\n    t instanceof Fu && Xi(i = e.attributes.payloads).call(i, function (e) {\n      var i;\n      if (\"opus\" !== (null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase())) return;\n      e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters.minptime = \"10\", e.fmtp.parameters.useinbandfec = \"1\";\n      var r = t._encoderConfig;\n      r && (r.bitrate && !Ta() && (e.fmtp.parameters.maxaveragebitrate = \"\".concat(Math.floor(1e3 * r.bitrate))), r.sampleRate && (e.fmtp.parameters.maxplaybackrate = \"\".concat(r.sampleRate), e.fmtp.parameters[\"sprop-maxcapturerate\"] = \"\".concat(r.sampleRate)), r.stereo && (e.fmtp.parameters.stereo = \"1\", e.fmtp.parameters[\"sprop-stereo\"] = \"1\"));\n    });\n  }\n\n  function rf(e) {\n    var t;\n    var i = OI(t = e.attributes.unrecognized).call(t, function (e) {\n      return \"x-google-flag\" === e.attField && \"conference\" === e.attValue;\n    });\n    var r;\n    -1 !== i && Ss(r = e.attributes.unrecognized).call(r, i, 1);\n  }\n\n  function nf(e, t) {\n    var i, r;\n    if (!(t instanceof CI && t._encoderConfig && -1 === Os(i = t._hints).call(i, _l.SCREEN_TRACK))) return;\n    var n = t._encoderConfig;\n    var s, o;\n    Ul().supportMinBitrate && n.bitrateMin && Xi(s = e.attributes.payloads).call(s, function (e) {\n      var t, i;\n      eo(t = [\"h264\", \"vp8\", \"vp9\", \"av1\"]).call(t, (null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase()) || \"\") && (e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters[\"x-google-min-bitrate\"] = \"\".concat(n.bitrateMin));\n    });\n    Ul().supportMinBitrate && !eo(r = t._hints).call(r, _l.LOW_STREAM) && n.bitrateMax && Xi(o = e.attributes.payloads).call(o, function (e) {\n      var t, i;\n      eo(t = [\"h264\", \"vp8\", \"vp9\", \"av1\"]).call(t, (null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase()) || \"\") && (e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters[\"x-google-start-bitrate\"] = \"\".concat(Math.floor(n.bitrateMax)));\n    });\n  }\n\n  function sf(e, t, i) {\n    if (!t) return;\n    var r, n;\n\n    if (\"video\" === e.media.mediaType ? (r = i.videoExtensions, n = i.videoCodecs) : (r = i.audioExtensions, n = i.audioCodecs), !0 === t.tcc) {\n      var _t105 = Vs(r).call(r, function (e) {\n        return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n      });\n\n      if (_t105) {\n        var s;\n        Vs(s = e.attributes.extmaps).call(s, function (e) {\n          return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n        }) || e.attributes.extmaps.push({\n          entry: _t105.entry,\n          extensionName: \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"\n        });\n\n        var _i63 = function (e, t) {\n          return Fr(t).call(t, function (t) {\n            return !!Vs(e).call(e, function (e) {\n              var i;\n              return e.payloadType === t.payloadType && !!Vs(i = e.rtcpFeedbacks).call(i, function (e) {\n                return \"transport-cc\" === e.type;\n              });\n            });\n          });\n        }(n, e.attributes.payloads);\n\n        Xi(_i63).call(_i63, function (e) {\n          var t;\n          Vs(t = e.rtcpFeedbacks).call(t, function (e) {\n            return \"transport-cc\" === e.type;\n          }) || e.rtcpFeedbacks.push({\n            type: \"transport-cc\"\n          });\n        });\n      }\n    } else if (!1 === t.tcc) {\n      var o, a;\n\n      var _t106 = OI(o = e.attributes.extmaps).call(o, function (e) {\n        return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n      });\n\n      var c;\n      if (-1 !== _t106) Ss(c = e.attributes.extmaps).call(c, _t106, 1);\n      Xi(a = e.attributes.payloads).call(a, function (e) {\n        var t;\n        var i = OI(t = e.rtcpFeedbacks).call(t, function (e) {\n          return \"transport-cc\" === e.type;\n        });\n        var r;\n        -1 !== i && Ss(r = e.rtcpFeedbacks).call(r, i, 1);\n      });\n    }\n\n    if (!0 === t.remb) {\n      var _t107 = Vs(r).call(r, function (e) {\n        return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n      });\n\n      if (_t107) {\n        var d;\n        Vs(d = e.attributes.extmaps).call(d, function (e) {\n          return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n        }) || e.attributes.extmaps.push({\n          entry: _t107.entry,\n          extensionName: \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"\n        });\n\n        var _i64 = function (e, t) {\n          return Fr(t).call(t, function (t) {\n            return !!Vs(e).call(e, function (e) {\n              var i;\n              return e.payloadType === t.payloadType && !!Vs(i = e.rtcpFeedbacks).call(i, function (e) {\n                return \"goog-remb\" === e.type;\n              });\n            });\n          });\n        }(n, e.attributes.payloads);\n\n        Xi(_i64).call(_i64, function (e) {\n          var t;\n          Vs(t = e.rtcpFeedbacks).call(t, function (e) {\n            return \"goog-remb\" === e.type;\n          }) || e.rtcpFeedbacks.push({\n            type: \"goog-remb\"\n          });\n        });\n      }\n    } else if (!1 === t.remb) {\n      var l, A;\n\n      var _t108 = OI(l = e.attributes.extmaps).call(l, function (e) {\n        return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n      });\n\n      var u;\n      if (-1 !== _t108) Ss(u = e.attributes.extmaps).call(u, _t108, 1);\n      Xi(A = e.attributes.payloads).call(A, function (e) {\n        var t;\n        var i = OI(t = e.rtcpFeedbacks).call(t, function (e) {\n          return \"goog-remb\" === e.type;\n        });\n        var r;\n        -1 !== i && Ss(r = e.rtcpFeedbacks).call(r, i, 1);\n      });\n    }\n  }\n\n  function of(e) {\n    var t;\n    var i = [];\n    Xi(e).call(e, function (e) {\n      var t = {\n        foundation: e.foundation,\n        componentId: \"1\",\n        transport: e.protocol,\n        priority: e.priority.toString(),\n        connectionAddress: e.ip,\n        port: e.port.toString(),\n        type: e.type,\n        extension: {}\n      };\n      i.push(t), i.push(XI({}, t, {\n        componentId: \"2\"\n      }));\n    });\n    var r = i[0].connectionAddress || \"0.0.0.0\",\n        n = i[0].port || \"9\";\n    return vc.debug(Xe(t = \"choose highest priority candidate IP:port \".concat(r, \":\")).call(t, n, \" as default ICE connection address\")), {\n      candidates: i,\n      defaultIp: r,\n      defaultPort: n\n    };\n  }\n\n  var af =\n  /*#__PURE__*/\n  function () {\n    function af(e) {\n      var _this131 = this;\n\n      _classCallCheck(this, af);\n\n      e = Fh(e);\n      var _e77 = e,\n          t = _e77.remoteIceParameters,\n          i = _e77.remoteDtlsParameters,\n          r = _e77.candidates,\n          n = _e77.remoteRTPCapabilities,\n          s = _e77.remoteSetup,\n          o = _e77.localCapabilities,\n          a = _e77.sdkCodec,\n          c = _e77.cname,\n          d = _e77.ip,\n          l = _e77.port,\n          A = qI.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE audio video\\na=msid-semantic: WMS\\na=ice-lite\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:audio\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:video\\n\");\n      this.rtpCapabilities = n, this.candidates = r, this.iceParameters = t, this.dtlsParameters = i, this.setup = s, this.localCapabilities = o, this.cname = c, this.ip = d, this.port = l, this.addressType = -1 === Os(d).call(d, \":\") ? \"IP4\" : \"IP6\";\n\n      for (var _e78 = 0; _e78 < A.mediaDescriptions.length; _e78++) {\n        var u;\n        var _o11 = A.mediaDescriptions[_e78];\n\n        if (_o11.media.port = this.port, Xi(u = _o11.connections).call(u, function (e) {\n          e.address = _this131.ip, e.addrtype = _this131.addressType;\n        }), _o11.attributes.rtcp ? (_o11.attributes.rtcp.address = this.ip, _o11.attributes.rtcp.port = this.port, _o11.attributes.rtcp.addressType = this.addressType) : _o11.attributes.rtcp = {\n          port: l,\n          address: d,\n          netType: \"IN\",\n          addressType: this.addressType\n        }, _o11.attributes.iceUfrag = t.iceUfrag, _o11.attributes.icePwd = t.icePwd, _o11.attributes.fingerprints = i.fingerprints, _o11.attributes.candidates = r, _o11.attributes.setup = s, \"video\" === _o11.media.mediaType) {\n          var h, p;\n          _o11.media.fmts = Es(h = n.videoCodecs).call(h, function (e) {\n            return e.payloadType.toString(10);\n          });\n\n          var _e79 = Fr(p = n.videoCodecs).call(p, function (e) {\n            var t, i;\n            return null === (t = e.rtpMap) || void 0 === t ? void 0 : eo(i = t.encodingName.toLowerCase()).call(i, a);\n          });\n\n          if (0 === _e79.length) throw new Error(\"Codec \".concat(a, \" not supported by remote SDP.\"));\n          _o11.attributes.payloads = _e79, _o11.attributes.extmaps = n.videoExtensions;\n        }\n\n        var E;\n        if (\"audio\" === _o11.media.mediaType) _o11.media.fmts = Es(E = n.audioCodecs).call(E, function (e) {\n          return e.payloadType.toString(10);\n        }), _o11.attributes.payloads = n.audioCodecs, _o11.attributes.extmaps = n.audioExtensions;\n        A.mediaDescriptions[_e78] = this.mungMediaDesc(_o11);\n      }\n\n      this.sessionDesc = A, this.currentMidIndex = A.mediaDescriptions.length - 1;\n    }\n\n    _createClass(af, [{\n      key: \"toString\",\n      value: function toString() {\n        return qI.print(this.sessionDesc);\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t, i) {\n        var r, n, s;\n\n        var _ef = ef(t, this.cname),\n            o = _ef.ssrcs,\n            a = _ef.ssrcGroups,\n            c = Vs(r = this.sessionDesc.mediaDescriptions).call(r, function (t) {\n          return e === wl.VIDEO ? \"video\" === t.media.mediaType : \"audio\" === t.media.mediaType;\n        }),\n            d = o[0].attributes.label,\n            l = o[0].attributes.mslabel;\n\n        return c.attributes.ssrcs = Xe(n = c.attributes.ssrcs).call(n, o), c.attributes.ssrcGroups = Xe(s = c.attributes.ssrcGroups).call(s, a), {\n          id: d,\n          mslabel: l\n        };\n      }\n    }, {\n      key: \"stopSending\",\n      value: function stopSending(e) {\n        var t;\n        Xi(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          var i, r;\n          var n = [],\n              s = [],\n              o = [];\n          Xi(i = t.attributes.ssrcs).call(i, function (t) {\n            eo(e).call(e, t.attributes.label || \"\") ? o.push(t) : n.push(t);\n          }), Xi(r = t.attributes.ssrcGroups).call(r, function (e) {\n            var t;\n            eo(t = Es(o).call(o, function (e) {\n              return e.ssrcId;\n            })).call(t, e.ssrcIds[0]) || s.push(e);\n          }), t.attributes.ssrcs = n, t.attributes.ssrcGroups = s;\n        });\n      }\n    }, {\n      key: \"mute\",\n      value: function mute(e) {\n        var t;\n        var i = Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!i) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.mute.\"));\n        i.attributes.direction = \"inactive\";\n      }\n    }, {\n      key: \"unmute\",\n      value: function unmute(e) {\n        var t;\n        var i = Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!i) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.unmute.\"));\n        i.attributes.direction = \"sendonly\";\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(e, t, i) {\n        var _this132 = this;\n\n        Xi(e).call(e, function (e, t) {\n          var i;\n\n          var r = e._mediaStreamTrack,\n              n = OI(i = _this132.sessionDesc.mediaDescriptions).call(i, function (e) {\n            return e.attributes.mid === r.kind;\n          }),\n              s = _this132.mungRecvMediaDsec(_this132.sessionDesc.mediaDescriptions[n], e);\n\n          _this132.sessionDesc.mediaDescriptions[n] = s;\n        });\n      }\n    }, {\n      key: \"stopReceiving\",\n      value: function stopReceiving(e) {}\n    }, {\n      key: \"restartICE\",\n      value: function restartICE(e, t, i, r) {\n        var _this133 = this;\n\n        var n;\n        e = Fh(e), t = Fh(t), this.iceParameters = e, this.candidates = t, this.ip = i, this.port = r, this.addressType = -1 === Os(i).call(i, \":\") ? \"IP4\" : \"IP6\", Xi(n = this.sessionDesc.mediaDescriptions).call(n, function (t) {\n          var n;\n          t.media.port = _this133.port, Xi(n = t.connections).call(n, function (e) {\n            e.address = i, e.addrtype = _this133.addressType;\n          }), t.attributes.rtcp ? (t.attributes.rtcp.address = _this133.ip, t.attributes.rtcp.port = _this133.port, t.attributes.rtcp.addressType = _this133.addressType) : t.attributes.rtcp = {\n            port: r,\n            address: i,\n            netType: \"IN\",\n            addressType: _this133.addressType\n          }, t.attributes.iceUfrag = e.iceUfrag, t.attributes.icePwd = e.icePwd, t.attributes.candidates = _this133.candidates;\n        });\n      }\n    }, {\n      key: \"predictReceivingMids\",\n      value: function predictReceivingMids(e) {\n        var t = [];\n\n        for (var _i65 = 0; _i65 < e; _i65++) {\n          t.push((this.currentMidIndex + _i65 + 1).toString(10));\n        }\n\n        return t;\n      }\n    }, {\n      key: \"mungRecvMediaDsec\",\n      value: function mungRecvMediaDsec(e, t) {\n        var i = Fh(e);\n        return tf(i, t), nf(i, t), i;\n      }\n    }, {\n      key: \"updateRecvMedia\",\n      value: function updateRecvMedia(e, t) {\n        var i;\n        var r = OI(i = this.sessionDesc.mediaDescriptions).call(i, function (t) {\n          return t.attributes.mid === e;\n        });\n\n        if (-1 !== r) {\n          var _e80 = this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r], t);\n\n          this.sessionDesc.mediaDescriptions[r] = _e80;\n        }\n      }\n    }, {\n      key: \"bumpMid\",\n      value: function bumpMid(e) {\n        this.currentMidIndex += e;\n      }\n    }, {\n      key: \"updateTrackLabel\",\n      value: function updateTrackLabel(e, t, i) {\n        var r;\n        var n = Vs(r = this.sessionDesc.mediaDescriptions).call(r, function (t) {\n          return e === wl.VIDEO ? \"video\" === t.attributes.mid : \"audio\" === t.attributes.mid;\n        });\n\n        if (n) {\n          var s;\n\n          var _e81 = Vs(s = n.attributes.ssrcs).call(s, function (e) {\n            return e.attributes.label === t;\n          });\n\n          var o;\n          if (_e81) _e81.attributes.label = i, null === (o = _e81.attributes.msid) || void 0 === o || o.replace(t, i);\n        }\n      }\n    }, {\n      key: \"mungMediaDesc\",\n      value: function mungMediaDesc(e) {\n        var t = Fh(e);\n        return rf(t), function (e) {\n          var t, i;\n          var r = Vs(t = e.attributes.extmaps).call(t, function (e) {\n            return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n          });\n          var n, s;\n          r && Ss(n = e.attributes.extmaps).call(n, Os(s = e.attributes.extmaps).call(s, r), 1), Xi(i = e.attributes.payloads).call(i, function (e) {\n            var t;\n            var i = OI(t = e.rtcpFeedbacks).call(t, function (e) {\n              return \"transport-cc\" === e.type;\n            });\n            var r;\n            -1 !== i && Ss(r = e.rtcpFeedbacks).call(r, i, 1);\n          });\n        }(t), t;\n      }\n    }]);\n\n    return af;\n  }();\n\n  function cf(e) {\n    if (Array.isArray(e)) return e.map(function (e) {\n      return e;\n    });\n    if (!df(e)) return e;\n    var t = {};\n\n    for (var i in e) {\n      df(e[i]) || Array.isArray(e[i]) ? t[i] = cf(e[i]) : t[i] = e[i];\n    }\n\n    return t;\n  }\n\n  function df(e) {\n    return !(\"object\" != typeof e || Array.isArray(e) || !e);\n  }\n\n  var lf = function () {\n    function e(e) {\n      this.input = [], this.size = e;\n    }\n\n    return e.prototype.add = function (e) {\n      this.input.push(e), this.input.length > this.size && this.input.splice(0, 1);\n    }, e.prototype.diffMean = function () {\n      return 0 === this.input.length ? 0 : (this.input[this.input.length - 1] - this.input[0]) / this.input.length;\n    }, e;\n  }(),\n      _Af = function Af(e, t) {\n    return (_Af = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (e, t) {\n      e.__proto__ = t;\n    } || function (e, t) {\n      for (var i in t) {\n        t.hasOwnProperty(i) && (e[i] = t[i]);\n      }\n    })(e, t);\n  };\n  /*! *****************************************************************************\n  \tCopyright (c) Microsoft Corporation. All rights reserved.\n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\n  \tthis file except in compliance with the License. You may obtain a copy of the\n  \tLicense at http://www.apache.org/licenses/LICENSE-2.0\n  \n  \tTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  \tKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\n  \tWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\n  \tMERCHANTABLITY OR NON-INFRINGEMENT.\n  \n  \tSee the Apache Version 2.0 License for specific language governing permissions\n  \tand limitations under the License.\n  \t***************************************************************************** */\n\n\n  function uf(e, t) {\n    function i() {\n      this.constructor = e;\n    }\n\n    _Af(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n  }\n\n  var _hf = function hf() {\n    return (_hf = Object.assign || function (e) {\n      for (var t, i = 1, r = arguments.length; i < r; i++) {\n        for (var n in t = arguments[i]) {\n          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n        }\n      }\n\n      return e;\n    }).apply(this, arguments);\n  };\n\n  function pf(e, t, i, r) {\n    return new (i || (i = Promise))(function (n, s) {\n      function o(e) {\n        try {\n          c(r.next(e));\n        } catch (e) {\n          s(e);\n        }\n      }\n\n      function a(e) {\n        try {\n          c(r.throw(e));\n        } catch (e) {\n          s(e);\n        }\n      }\n\n      function c(e) {\n        e.done ? n(e.value) : new i(function (t) {\n          t(e.value);\n        }).then(o, a);\n      }\n\n      c((r = r.apply(e, t || [])).next());\n    });\n  }\n\n  function Ef(e, t) {\n    var i,\n        r,\n        n,\n        s,\n        o = {\n      label: 0,\n      sent: function sent() {\n        if (1 & n[0]) throw n[1];\n        return n[1];\n      },\n      trys: [],\n      ops: []\n    };\n    return s = {\n      next: a(0),\n      throw: a(1),\n      return: a(2)\n    }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n      return this;\n    }), s;\n\n    function a(s) {\n      return function (a) {\n        return function (s) {\n          if (i) throw new TypeError(\"Generator is already executing.\");\n\n          for (; o;) {\n            try {\n              if (i = 1, r && (n = 2 & s[0] ? r.return : s[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, s[1])).done) return n;\n\n              switch (r = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n                case 0:\n                case 1:\n                  n = s;\n                  break;\n\n                case 4:\n                  return o.label++, {\n                    value: s[1],\n                    done: !1\n                  };\n\n                case 5:\n                  o.label++, r = s[1], s = [0];\n                  continue;\n\n                case 7:\n                  s = o.ops.pop(), o.trys.pop();\n                  continue;\n\n                default:\n                  if (!(n = o.trys, (n = n.length > 0 && n[n.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                    o = 0;\n                    continue;\n                  }\n\n                  if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                    o.label = s[1];\n                    break;\n                  }\n\n                  if (6 === s[0] && o.label < n[1]) {\n                    o.label = n[1], n = s;\n                    break;\n                  }\n\n                  if (n && o.label < n[2]) {\n                    o.label = n[2], o.ops.push(s);\n                    break;\n                  }\n\n                  n[2] && o.ops.pop(), o.trys.pop();\n                  continue;\n              }\n\n              s = t.call(e, o);\n            } catch (e) {\n              s = [6, e], r = 0;\n            } finally {\n              i = n = 0;\n            }\n          }\n\n          if (5 & s[0]) throw s[1];\n          return {\n            value: s[0] ? s[1] : void 0,\n            done: !0\n          };\n        }([s, a]);\n      };\n    }\n  }\n\n  var gf,\n      _f = {\n    timestamp: 0,\n    bitrate: {\n      actualEncoded: 0,\n      transmit: 0\n    },\n    sendPacketLossRate: 0,\n    recvPacketLossRate: 0,\n    videoRecv: [],\n    videoSend: [],\n    audioRecv: [],\n    audioSend: []\n  },\n      If = {\n    firsCount: 0,\n    nacksCount: 0,\n    plisCount: 0,\n    framesDecodeCount: 0,\n    framesDecodeInterval: 0,\n    framesDecodeFreezeTime: 0,\n    decodeFrameRate: 0,\n    bytes: 0,\n    packetsLost: 0,\n    packetLostRate: 0,\n    packets: 0,\n    ssrc: 0\n  },\n      ff = {\n    firsCount: 0,\n    nacksCount: 0,\n    plisCount: 0,\n    frameCount: 0,\n    bytes: 0,\n    packets: 0,\n    packetsLost: 0,\n    packetLostRate: 0,\n    ssrc: 0,\n    rttMs: 0\n  },\n      mf = {\n    bytes: 0,\n    packets: 0,\n    packetsLost: 0,\n    packetLostRate: 0,\n    ssrc: 0,\n    rttMs: 0\n  },\n      Cf = {\n    jitterBufferMs: 0,\n    jitterMs: 0,\n    bytes: 0,\n    packetsLost: 0,\n    packetLostRate: 0,\n    packets: 0,\n    ssrc: 0,\n    receivedFrames: 0,\n    droppedFrames: 0\n  },\n      Sf = function () {\n    function e(e, t) {\n      var i = this;\n      this.videoIsReady = !1, this.videoIsReady2 = {}, this.stats = cf(_f), this.isFirstVideoReceived = {}, this.isFirstVideoDecoded = {}, this.isFirstAudioReceived = {}, this.isFirstAudioDecoded = {}, this.lossRateWindowStats = [], this.pc = e, this.options = t, this.intervalTimer = window.setInterval(function () {\n        return pf(i, void 0, void 0, function () {\n          return Ef(this, function (e) {\n            return this.updateStats(), [2];\n          });\n        });\n      }, this.options.updateInterval);\n    }\n\n    return e.prototype.getStats = function () {\n      return this.stats;\n    }, e.prototype.setVideoIsReady = function (e) {\n      this.videoIsReady = e;\n    }, e.prototype.setVideoIsReady2 = function (e, t) {\n      this.videoIsReady2[e] = t;\n    }, e.prototype.getVideoIsReady = function (e) {\n      return this.videoIsReady2[e] || !1;\n    }, e.prototype.setIsFirstAudioDecoded = function (e) {}, e.prototype.destroy = function () {\n      window.clearInterval(this.intervalTimer), this.pc = void 0;\n    }, e.prototype.calcLossRate = function (e) {\n      var t = this;\n      this.lossRateWindowStats.push(e), this.lossRateWindowStats.length > this.options.lossRateInterval && this.lossRateWindowStats.splice(0, 1);\n\n      for (var i = this.lossRateWindowStats.length, r = 0, n = 0, s = 0, o = 0, a = function a(_a8) {\n        e[_a8].forEach(function (e, c) {\n          if (t.lossRateWindowStats[i - 1][_a8][c] && t.lossRateWindowStats[0][_a8][c]) {\n            var d = t.lossRateWindowStats[i - 1][_a8][c].packets - t.lossRateWindowStats[0][_a8][c].packets,\n                l = t.lossRateWindowStats[i - 1][_a8][c].packetsLost - t.lossRateWindowStats[0][_a8][c].packetsLost;\n            \"videoSend\" === _a8 || \"audioSend\" === _a8 ? (r += d, s += l) : (n += d, o += l), Number.isNaN(d) || Number.isNaN(d) ? e.packetLostRate = 0 : e.packetLostRate = d <= 0 || l <= 0 ? 0 : l / (d + l);\n          }\n        });\n      }, c = 0, d = [\"videoSend\", \"audioSend\", \"videoRecv\", \"audioRecv\"]; c < d.length; c++) {\n        a(d[c]);\n      }\n\n      e.sendPacketLossRate = r <= 0 || s <= 0 ? 0 : s / (r + s), e.recvPacketLossRate = n <= 0 || o <= 0 ? 0 : o / (n + o);\n    }, e;\n  }(),\n      Rf = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t._stats = _f, t.lastDecodeVideoReceiverStats = new Map(), t;\n    }\n\n    return uf(t, e), t.prototype.updateStats = function () {\n      return pf(this, void 0, void 0, function () {\n        var e, t, i, r;\n        return Ef(this, function (n) {\n          switch (n.label) {\n            case 0:\n              return [4, this._getStats()];\n\n            case 1:\n              return e = n.sent(), t = this.statsResponsesToObjects(e), this._stats = cf(_f), i = t.filter(function (e) {\n                return \"ssrc\" === e.type;\n              }), this.processSSRCStats(i), (r = t.find(function (e) {\n                return \"VideoBwe\" === e.type;\n              })) && this.processBandwidthStats(r), this._stats.timestamp = Date.now(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n          }\n        });\n      });\n    }, t.prototype.processBandwidthStats = function (e) {\n      this._stats.bitrate = {\n        actualEncoded: Number(e.googActualEncBitrate),\n        targetEncoded: Number(e.googTargetEncBitrate),\n        retransmit: Number(e.googRetransmitBitrate),\n        transmit: Number(e.googTransmitBitrate)\n      }, this._stats.sendBandwidth = Number(e.googAvailableSendBandwidth);\n    }, t.prototype.processSSRCStats = function (e) {\n      var t = this;\n      e.forEach(function (e) {\n        var i = e.id.includes(\"send\");\n\n        switch (e.mediaType + \"_\" + (i ? \"send\" : \"recv\")) {\n          case \"video_send\":\n            var r = cf(ff);\n            r.codec = e.googCodecName, r.adaptionChangeReason = \"none\", e.googCpuLimitedResolution && (r.adaptionChangeReason = \"cpu\"), e.googBandwidthLimitedResolution && (r.adaptionChangeReason = \"bandwidth\"), r.avgEncodeMs = Number(e.googAvgEncodeMs), r.inputFrame = {\n              width: Number(e.googFrameWidthInput) || Number(e.googFrameWidthSent),\n              height: Number(e.googFrameHeightInput) || Number(e.googFrameHeightSent),\n              frameRate: Number(e.googFrameRateInput)\n            }, r.sentFrame = {\n              width: Number(e.googFrameWidthSent),\n              height: Number(e.googFrameHeightSent),\n              frameRate: Number(e.googFrameRateInput)\n            }, r.firsCount = Number(e.googFirReceived), r.nacksCount = Number(e.googNacksReceived), r.plisCount = Number(e.googPlisReceived), r.frameCount = Number(e.framesEncoded), r.bytes = Number(e.bytesSent), r.packets = Number(e.packetsSent), r.packetsLost = Number(e.packetsLost), r.ssrc = Number(e.ssrc), r.rttMs = Number(e.googRtt || 0), t._stats.videoSend.push(r), t._stats.rtt = r.rttMs;\n            break;\n\n          case \"video_recv\":\n            var n = cf(If),\n                s = t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));\n\n            if (n.codec = e.googCodecName, n.targetDelayMs = Number(e.googTargetDelayMs), n.renderDelayMs = Number(e.googRenderDelayMs), n.currentDelayMs = Number(e.googCurrentDelayMs), n.minPlayoutDelayMs = Number(e.googMinPlayoutDelayMs), n.decodeMs = Number(e.googDecodeMs), n.maxDecodeMs = Number(e.googMaxDecodeMs), n.receivedFrame = {\n              width: Number(e.googFrameWidthReceived),\n              height: Number(e.googFrameHeightReceived),\n              frameRate: Number(e.googFrameRateReceived)\n            }, n.decodedFrame = {\n              width: Number(e.googFrameWidthReceived),\n              height: Number(e.googFrameHeightReceived),\n              frameRate: Number(e.googFrameRateDecoded)\n            }, n.outputFrame = {\n              width: Number(e.googFrameWidthReceived),\n              height: Number(e.googFrameHeightReceived),\n              frameRate: Number(e.googFrameRateOutput)\n            }, n.jitterBufferMs = Number(e.googJitterBufferMs), n.firsCount = Number(e.googFirsSent), n.nacksCount = Number(e.googNacksSent), n.plisCount = Number(e.googPlisSent), n.framesDecodeCount = Number(e.framesDecoded), n.bytes = Number(e.bytesReceived), n.packets = Number(e.packetsReceived), n.packetsLost = Number(e.packetsLost), n.ssrc = Number(e.ssrc), n.packets > 0 && !t.isFirstVideoReceived[n.ssrc] && (t.onFirstVideoReceived && t.onFirstVideoReceived(n.ssrc), t.isFirstVideoReceived[n.ssrc] = !0), n.framesDecodeCount > 0 && !t.isFirstVideoDecoded[n.ssrc] && (t.onFirstVideoDecoded && t.onFirstVideoDecoded(n.ssrc, n.decodedFrame.width, n.decodedFrame.height), t.isFirstVideoDecoded[n.ssrc] = !0), s) {\n              var o = s.stats,\n                  a = Date.now() - s.lts;\n              n.framesDecodeFreezeTime = o.framesDecodeFreezeTime, n.framesDecodeInterval = o.framesDecodeInterval, n.framesDecodeCount > o.framesDecodeCount && t.isFirstVideoDecoded ? (s.lts = Date.now(), n.framesDecodeInterval = a, n.framesDecodeInterval >= t.options.freezeRateLimit && (t.getVideoIsReady(parseInt(e.ssrc, 10)) ? n.framesDecodeFreezeTime += n.framesDecodeInterval : t.setVideoIsReady2(parseInt(e.ssrc, 10), !0))) : n.framesDecodeCount < s.stats.framesDecodeCount && (n.framesDecodeInterval = 0);\n            }\n\n            t.lastDecodeVideoReceiverStats.set(n.ssrc, {\n              stats: _hf({}, n),\n              lts: Date.now()\n            }), t._stats.videoRecv.push(n);\n            break;\n\n          case \"audio_recv\":\n            var c = cf(Cf);\n            c.codec = e.googCodecName, c.outputLevel = Math.abs(Number(e.audioOutputLevel)) / 32767, c.decodingCNG = Number(e.googDecodingCNG), c.decodingCTN = Number(e.googDecodingCTN), c.decodingCTSG = Number(e.googDecodingCTSG), c.decodingNormal = Number(e.googDecodingNormal), c.decodingPLC = Number(e.googDecodingPLC), c.decodingPLCCNG = Number(e.googDecodingPLCCNG), c.expandRate = Number(e.googExpandRate), c.accelerateRate = Number(e.googAccelerateRate), c.preemptiveExpandRate = Number(e.googPreemptiveExpandRate), c.secondaryDecodedRate = Number(e.googSecondaryDecodedRate), c.speechExpandRate = Number(e.googSpeechExpandRate), c.preferredJitterBufferMs = Number(e.googPreferredJitterBufferMs), c.jitterBufferMs = Number(e.googJitterBufferMs), c.jitterMs = Number(e.googJitterReceived), c.bytes = Number(e.bytesReceived), c.packets = Number(e.packetsReceived), c.packetsLost = Number(e.packetsLost), c.ssrc = Number(e.ssrc), c.receivedFrames = Number(e.googDecodingCTN) || Number(e.packetsReceived), c.droppedFrames = Number(e.googDecodingPLC) + Number(e.googDecodingPLCCNG) || Number(e.packetsLost), c.receivedFrames > 0 && !t.isFirstAudioReceived[c.ssrc] && (t.onFirstAudioReceived && t.onFirstAudioReceived(c.ssrc), t.isFirstAudioReceived[c.ssrc] = !0), c.decodingNormal > 0 && !t.isFirstAudioDecoded[c.ssrc] && (t.onFirstAudioDecoded && t.onFirstAudioDecoded(c.ssrc), t.isFirstAudioDecoded[c.ssrc] = !0), t._stats.audioRecv.push(c);\n            break;\n\n          case \"audio_send\":\n            var d = cf(mf);\n            d.codec = e.googCodecName, d.inputLevel = Math.abs(Number(e.audioInputLevel)) / 32767, d.aecReturnLoss = Number(e.googEchoCancellationReturnLoss || 0), d.aecReturnLossEnhancement = Number(e.googEchoCancellationReturnLossEnhancement || 0), d.residualEchoLikelihood = Number(e.googResidualEchoLikelihood || 0), d.residualEchoLikelihoodRecentMax = Number(e.googResidualEchoLikelihoodRecentMax || 0), d.bytes = Number(e.bytesSent), d.packets = Number(e.packetsSent), d.packetsLost = Number(e.packetsLost), d.ssrc = Number(e.ssrc), d.rttMs = Number(e.googRtt || 0), t._stats.rtt = d.rttMs, t._stats.audioSend.push(d);\n        }\n      });\n    }, t.prototype._getStats = function () {\n      var e = this;\n      return new Promise(function (t, i) {\n        e.pc.getStats(t, i);\n      });\n    }, t.prototype.statsResponsesToObjects = function (e) {\n      var t = [];\n      return e.result().forEach(function (e) {\n        var i = {\n          id: e.id,\n          timestamp: e.timestamp.valueOf().toString(),\n          type: e.type\n        };\n        e.names().forEach(function (t) {\n          i[t] = e.stat(t);\n        }), t.push(i);\n      }), t;\n    }, t;\n  }(Sf);\n\n  !function (e) {\n    e.CERTIFICATE = \"certificate\", e.CODEC = \"codec\", e.CANDIDATE_PAIR = \"candidate-pair\", e.LOCAL_CANDIDATE = \"local-candidate\", e.REMOTE_CANDIDATE = \"remote-candidate\", e.INBOUND = \"inbound-rtp\", e.TRACK = \"track\", e.OUTBOUND = \"outbound-rtp\", e.PC = \"peer-connection\", e.REMOTE_INBOUND = \"remote-inbound-rtp\", e.REMOTE_OUTBOUND = \"remote-outbound-rtp\", e.TRANSPORT = \"transport\", e.CSRC = \"csrc\", e.DATA_CHANNEL = \"data-channel\", e.STREAM = \"stream\", e.SENDER = \"sender\", e.RECEIVER = \"receiver\";\n  }(gf || (gf = {}));\n\n  var Tf = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t._stats = _f, t.lastDecodeVideoReceiverStats = new Map(), t.lastVideoFramesRecv = new Map(), t.lastVideoFramesSent = new Map(), t.lastVideoFramesDecode = new Map(), t.lastVideoJBDelay = new Map(), t.lastAudioJBDelay = new Map(), t.mediaBytesSent = new Map(), t.mediaBytesRetransmit = new Map(), t.mediaBytesTargetEncode = new Map(), t.lastEncoderMs = new Map(), t;\n    }\n\n    return uf(t, e), t.prototype.updateStats = function () {\n      return pf(this, void 0, void 0, function () {\n        var e,\n            t = this;\n        return Ef(this, function (i) {\n          switch (i.label) {\n            case 0:\n              return e = this, [4, this.pc.getStats()];\n\n            case 1:\n              return e.report = i.sent(), this._stats = cf(_f), this.report.forEach(function (e) {\n                switch (e.type) {\n                  case gf.OUTBOUND:\n                    \"audio\" === e.mediaType ? t.processAudioOutboundStats(e) : \"video\" === e.mediaType && t.processVideoOutboundStats(e);\n                    break;\n\n                  case gf.INBOUND:\n                    \"audio\" === e.mediaType ? t.processAudioInboundStats(e) : \"video\" === e.mediaType && t.processVideoInboundStats(e);\n                    break;\n\n                  case gf.TRANSPORT:\n                    var i = t.report.get(e.selectedCandidatePairId);\n                    i && t.processCandidatePairStats(i);\n                    break;\n\n                  case gf.CANDIDATE_PAIR:\n                    e.selected && t.processCandidatePairStats(e);\n                }\n              }), this.updateSendBitrate(), this._stats.timestamp = Date.now(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n          }\n        });\n      });\n    }, t.prototype.processCandidatePairStats = function (e) {\n      this._stats.sendBandwidth = e.availableOutgoingBitrate || 0, e.currentRoundTripTime && (this._stats.rtt = 1e3 * e.currentRoundTripTime), this._stats.videoSend.forEach(function (t) {\n        !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n      }), this._stats.audioSend.forEach(function (t) {\n        !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n      });\n    }, t.prototype.processAudioInboundStats = function (e) {\n      var t = this._stats.audioRecv.find(function (t) {\n        return t.ssrc === e.ssrc;\n      });\n\n      t || (t = cf(Cf), this._stats.audioRecv.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsReceived, t.packetsLost = e.packetsLost, t.bytes = e.bytesReceived, t.jitterMs = 1e3 * e.jitter, e.trackId && this.processAudioTrackReceiverStats(e.trackId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), t.receivedFrames || (t.receivedFrames = e.packetsReceived), t.droppedFrames || (t.droppedFrames = e.packetsLost), t.receivedFrames > 0 && !this.isFirstAudioReceived[t.ssrc] && (this.onFirstAudioReceived && this.onFirstAudioReceived(t.ssrc), this.isFirstAudioReceived[t.ssrc] = !0), t.outputLevel && t.outputLevel > 0 && !this.isFirstAudioDecoded[t.ssrc] && (this.onFirstAudioDecoded && this.onFirstAudioDecoded(t.ssrc), this.isFirstAudioDecoded[t.ssrc] = !0);\n    }, t.prototype.processVideoInboundStats = function (e) {\n      var t = this._stats.videoRecv.find(function (t) {\n        return t.ssrc === e.ssrc;\n      });\n\n      t || (t = cf(If), this._stats.videoRecv.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsReceived, t.packetsLost = e.packetsLost, t.bytes = e.bytesReceived, t.firsCount = e.firCount, t.nacksCount = e.nackCount, t.plisCount = e.pliCount, t.framesDecodeCount = e.framesDecoded;\n      var i = this.lastDecodeVideoReceiverStats.get(t.ssrc),\n          r = this.lastVideoFramesDecode.get(t.ssrc),\n          n = Date.now();\n\n      if (t.framesDecodeCount > 0 && !this.isFirstVideoDecoded[t.ssrc]) {\n        var s = t.decodedFrame ? t.decodedFrame.width : 0,\n            o = t.decodedFrame ? t.decodedFrame.height : 0;\n        this.onFirstVideoDecoded && this.onFirstVideoDecoded(t.ssrc, s, o), this.isFirstVideoDecoded[t.ssrc] = !0;\n      }\n\n      if (i) {\n        var a = i.stats,\n            c = n - i.lts;\n        t.framesDecodeFreezeTime = a.framesDecodeFreezeTime, t.framesDecodeInterval = a.framesDecodeInterval, t.framesDecodeCount > a.framesDecodeCount && this.isFirstVideoDecoded ? (i.lts = Date.now(), t.framesDecodeInterval = c, t.framesDecodeInterval >= this.options.freezeRateLimit && (this.getVideoIsReady(parseInt(e.ssrc)) ? t.framesDecodeFreezeTime += t.framesDecodeInterval : this.setVideoIsReady2(parseInt(e.ssrc, 10), !0))) : t.framesDecodeCount < a.framesDecodeCount && (t.framesDecodeInterval = 0);\n      }\n\n      r && n - r.lts >= 800 ? (t.decodeFrameRate = Math.round((t.framesDecodeCount - r.count) / ((n - r.lts) / 1e3)), this.lastVideoFramesDecode.set(t.ssrc, {\n        count: t.framesDecodeCount,\n        lts: n,\n        rate: t.decodeFrameRate\n      })) : r ? t.decodeFrameRate = r.rate : this.lastVideoFramesDecode.set(t.ssrc, {\n        count: t.framesDecodeCount,\n        lts: n,\n        rate: 0\n      }), e.totalDecodeTime && (t.decodeMs = 1e3 * e.totalDecodeTime), e.trackId && this.processVideoTrackReceiverStats(e.trackId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), e.framerateMean && (t.framesRateFirefox = e.framerateMean), t.packets > 0 && !this.isFirstVideoReceived[t.ssrc] && (this.onFirstVideoReceived && this.onFirstVideoReceived(t.ssrc), this.isFirstVideoReceived[t.ssrc] = !0), this.lastDecodeVideoReceiverStats.set(t.ssrc, {\n        stats: _hf({}, t),\n        lts: i ? i.lts : Date.now()\n      });\n    }, t.prototype.processVideoOutboundStats = function (e) {\n      var t = this._stats.videoSend.find(function (t) {\n        return t.ssrc === e.ssrc;\n      });\n\n      t || (t = cf(ff), this._stats.videoSend.push(t));\n      var i = this.mediaBytesSent.get(e.ssrc);\n      i ? i.add(e.bytesSent) : ((n = new lf(10)).add(e.bytesSent), this.mediaBytesSent.set(e.ssrc, n));\n\n      if (void 0 !== e.retransmittedBytesSent) {\n        var r = this.mediaBytesRetransmit.get(e.ssrc);\n        if (r) r.add(e.retransmittedBytesSent);else (n = new lf(10)).add(e.retransmittedBytesSent), this.mediaBytesRetransmit.set(e.ssrc, n);\n      }\n\n      if (e.totalEncodedBytesTarget) {\n        var n,\n            s = this.mediaBytesTargetEncode.get(e.ssrc);\n        if (s) s.add(e.totalEncodedBytesTarget);else (n = new lf(10)).add(e.totalEncodedBytesTarget), this.mediaBytesTargetEncode.set(e.ssrc, n);\n      }\n\n      if (t.ssrc = e.ssrc, t.bytes = e.bytesSent, t.packets = e.packetsSent, t.firsCount = e.firCount, t.nacksCount = e.nackCount, t.plisCount = e.pliCount, t.frameCount = e.framesEncoded, t.adaptionChangeReason = e.qualityLimitationReason, e.totalEncodeTime && e.framesEncoded) {\n        var o = this.lastEncoderMs.get(e.ssrc);\n        if (!o || o.lastFrameCount > e.framesEncoded) t.avgEncodeMs = 1e3 * e.totalEncodeTime / e.framesEncoded;else {\n          var a = e.framesEncoded - o.lastFrameCount,\n              c = e.totalEncodeTime - o.lastEncoderTime;\n          t.avgEncodeMs = 1e3 * c / a;\n        }\n        this.lastEncoderMs.set(e.ssrc, {\n          lastFrameCount: e.framesEncoded,\n          lastEncoderTime: e.totalEncodeTime,\n          lts: Date.now()\n        });\n      }\n\n      if (e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), e.mediaSourceId && this.processVideoMediaSource(e.mediaSourceId, t), e.trackId && this.processVideoTrackSenderStats(e.trackId, t), e.remoteId) this.processRemoteInboundStats(e.remoteId, t);else {\n        var d = this.findRemoteStatsId(e.ssrc, gf.REMOTE_INBOUND);\n        d && this.processRemoteInboundStats(d, t);\n      }\n    }, t.prototype.processAudioOutboundStats = function (e) {\n      var t = this._stats.audioSend.find(function (t) {\n        return t.ssrc === e.ssrc;\n      });\n\n      if (t || (t = cf(mf), this._stats.audioSend.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsSent, t.bytes = e.bytesSent, e.mediaSourceId && this.processAudioMediaSource(e.mediaSourceId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), e.trackId && this.processAudioTrackSenderStats(e.trackId, t), e.remoteId) this.processRemoteInboundStats(e.remoteId, t);else {\n        var i = this.findRemoteStatsId(e.ssrc, gf.REMOTE_INBOUND);\n        i && this.processRemoteInboundStats(i, t);\n      }\n    }, t.prototype.findRemoteStatsId = function (e, t) {\n      var i = Array.from(this.report.values()).find(function (i) {\n        return i.type === t && i.ssrc === e;\n      });\n      return i ? i.id : null;\n    }, t.prototype.processVideoMediaSource = function (e, t) {\n      var i = this.report.get(e);\n      i && i.width && i.height && i.framesPerSecond && (t.inputFrame = {\n        width: i.width,\n        height: i.height,\n        frameRate: i.framesPerSecond\n      });\n    }, t.prototype.processAudioMediaSource = function (e, t) {\n      var i = this.report.get(e);\n      i && (t.inputLevel = i.audioLevel);\n    }, t.prototype.processVideoTrackSenderStats = function (e, t) {\n      var i = this.report.get(e);\n\n      if (i) {\n        var r = 0,\n            n = Date.now(),\n            s = this.lastVideoFramesSent.get(t.ssrc);\n        s && n - s.lts >= 800 ? (r = Math.round((i.framesSent - s.count) / ((n - s.lts) / 1e3)), this.lastVideoFramesSent.set(t.ssrc, {\n          count: i.framesSent,\n          lts: n,\n          rate: r\n        })) : s ? r = s.rate : this.lastVideoFramesSent.set(t.ssrc, {\n          count: i.framesSent,\n          lts: n,\n          rate: 0\n        }), t.sentFrame = {\n          width: i.frameWidth,\n          height: i.frameHeight,\n          frameRate: r\n        };\n      }\n    }, t.prototype.processVideoTrackReceiverStats = function (e, t) {\n      var i = this.report.get(e);\n\n      if (i) {\n        var r = this.lastVideoFramesRecv.get(t.ssrc),\n            n = Date.now();\n        t.framesReceivedCount = i.framesReceived;\n        var s = 0;\n\n        if (r && n - r.lts >= 800 ? (s = Math.round((i.framesReceived - r.count) / ((n - r.lts) / 1e3)), this.lastVideoFramesRecv.set(t.ssrc, {\n          count: i.framesReceived,\n          lts: n,\n          rate: s\n        })) : r ? s = r.rate : this.lastVideoFramesRecv.set(t.ssrc, {\n          count: i.framesReceived,\n          lts: n,\n          rate: 0\n        }), t.receivedFrame = {\n          width: i.frameWidth || 0,\n          height: i.frameHeight || 0,\n          frameRate: s || 0\n        }, t.decodedFrame = {\n          width: i.frameWidth || 0,\n          height: i.frameHeight || 0,\n          frameRate: t.decodeFrameRate || 0\n        }, t.outputFrame = {\n          width: i.frameWidth || 0,\n          height: i.frameHeight || 0,\n          frameRate: t.decodeFrameRate || 0\n        }, i.jitterBufferDelay && i.jitterBufferEmittedCount) {\n          var o = this.lastVideoJBDelay.get(t.ssrc);\n          this.lastVideoJBDelay.set(t.ssrc, {\n            jitterBufferDelay: i.jitterBufferDelay,\n            jitterBufferEmittedCount: i.jitterBufferEmittedCount\n          }), o || (o = {\n            jitterBufferDelay: 0,\n            jitterBufferEmittedCount: 0\n          });\n          var a = 1e3 * (i.jitterBufferDelay - o.jitterBufferDelay) / (i.jitterBufferEmittedCount - o.jitterBufferEmittedCount);\n          t.jitterBufferMs = a, t.currentDelayMs = Math.round(a);\n        }\n      }\n    }, t.prototype.processAudioTrackSenderStats = function (e, t) {\n      var i = this.report.get(e);\n      i && (t.aecReturnLoss = i.echoReturnLoss || 0, t.aecReturnLossEnhancement = i.echoReturnLossEnhancement || 0);\n    }, t.prototype.processAudioTrackReceiverStats = function (e, t) {\n      var i = this.report.get(e);\n\n      if (i) {\n        if (i.removedSamplesForAcceleration && i.totalSamplesReceived && (t.accelerateRate = i.removedSamplesForAcceleration / i.totalSamplesReceived), i.jitterBufferDelay && i.jitterBufferEmittedCount) {\n          var r = this.lastAudioJBDelay.get(t.ssrc);\n          this.lastAudioJBDelay.set(t.ssrc, {\n            jitterBufferDelay: i.jitterBufferDelay,\n            jitterBufferEmittedCount: i.jitterBufferEmittedCount\n          }), r || (r = {\n            jitterBufferDelay: 0,\n            jitterBufferEmittedCount: 0\n          });\n          var n = 1e3 * (i.jitterBufferDelay - r.jitterBufferDelay) / (i.jitterBufferEmittedCount - r.jitterBufferEmittedCount);\n          t.jitterBufferMs = Math.round(n);\n        }\n\n        t.outputLevel = i.audioLevel;\n        var s = 1920;\n        i.totalSamplesDuration && i.totalSamplesReceived && (s = i.totalSamplesReceived / i.totalSamplesDuration / 50, t.receivedFrames = Math.round(i.totalSamplesReceived / s)), i.concealedSamples && (t.droppedFrames = Math.round(i.concealedSamples / s));\n      }\n    }, t.prototype.processRemoteInboundStats = function (e, t) {\n      var i = this.report.get(e);\n      i && (t.packetsLost = i.packetsLost, i.roundTripTime && (t.rttMs = 1e3 * i.roundTripTime));\n    }, t.prototype.getCodecFromCodecStats = function (e) {\n      var t = this.report.get(e);\n      if (!t) return \"\";\n      var i = t.mimeType.match(/\\/(.*)$/);\n      return i && i[1] ? i[1] : \"\";\n    }, t.prototype.updateSendBitrate = function () {\n      var e = 0,\n          t = null,\n          i = null;\n      this.mediaBytesSent.forEach(function (t) {\n        e += t.diffMean();\n      }), this.mediaBytesRetransmit.forEach(function (e) {\n        t = null === t ? e.diffMean() : t + e.diffMean();\n      }), this.mediaBytesTargetEncode.forEach(function (e) {\n        i = null === i ? e.diffMean() : i + e.diffMean();\n      });\n      var r = null !== t ? e - t : e;\n      this._stats.bitrate = {\n        actualEncoded: 8 * r / (this.options.updateInterval / 1e3),\n        transmit: 8 * e / (this.options.updateInterval / 1e3)\n      }, null !== t && (this._stats.bitrate.retransmit = 8 * t / (this.options.updateInterval / 1e3)), null !== i && (this._stats.bitrate.targetEncoded = 8 * i / (this.options.updateInterval / 1e3));\n    }, t;\n  }(Sf),\n      vf = function (e) {\n    function t() {\n      return null !== e && e.apply(this, arguments) || this;\n    }\n\n    return uf(t, e), t.prototype.updateStats = function () {\n      return Promise.resolve();\n    }, t;\n  }(Sf);\n\n  function yf(e, t, i, r) {\n    void 0 === t && (t = 250), void 0 === i && (i = 8), void 0 === r && (r = 500);\n    var n,\n        s = (n = navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i)) && n[0] ? Number(n[0].split(\"/\")[1]) : null;\n    return s ? s < 76 ? new Rf(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r\n    }) : new Tf(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r\n    }) : function (e) {\n      return !!window.RTCStatsReport && e.getStats() instanceof Promise;\n    }(e) ? new Tf(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r\n    }) : new vf(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r\n    });\n  }\n\n  function wf(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  var Nf = function Nf(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      Of = function Of(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var bf =\n  /*#__PURE__*/\n  function (_Pl) {\n    _inherits(bf, _Pl);\n\n    function bf(e, t) {\n      var _this134;\n\n      _classCallCheck(this, bf);\n\n      _this134 = _possibleConstructorReturn(this, _getPrototypeOf(bf).call(this, e, t)), _this134.useRTX = !1, _this134.localCandidateCount = 0, _this134.allCandidatesReceived = !1, _this134.mutex = new su(\"P2PConnection-mutex\"), _this134.store = t, _this134.peerConnection = new RTCPeerConnection(bf.resolvePCConfiguration(e), {\n        optional: [{\n          googDscp: !0\n        }]\n      }), _this134.statsFilter = yf(_this134.peerConnection, void 0, void 0, Ta() ? 1200 : void 0), _this134.bindPCEvents(), _this134.bindStatsEvents(), _this134.store.p2pId = _this134.store.p2pId + 1;\n      return _this134;\n    }\n\n    _createClass(bf, [{\n      key: \"establish\",\n      value: function () {\n        var _establish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee104() {\n          var _e82, _t109, _i66;\n\n          return _regeneratorRuntime.wrap(function _callee104$(_context104) {\n            while (1) {\n              switch (_context104.prev = _context104.next) {\n                case 0:\n                  _context104.prev = 0;\n                  _context104.next = 3;\n                  return this.peerConnection.createOffer({\n                    offerToReceiveAudio: !0,\n                    offerToReceiveVideo: !0\n                  });\n\n                case 3:\n                  _e82 = _context104.sent;\n\n                  if (_e82.sdp) {\n                    _context104.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n\n                case 6:\n                  _t109 = ZI(_e82.sdp), _i66 = zI(_e82.sdp, !this.useRTX, !1, [\"opus\"]);\n                  return _context104.abrupt(\"return\", (this.localCapabilities = _i66, this.initialOffer = _e82, function (e) {\n                    for (var t = 1; t < arguments.length; t++) {\n                      var i,\n                          r = null != arguments[t] ? arguments[t] : {};\n                      if (t % 2) Xi(i = wf(Object(r), !0)).call(i, function (t) {\n                        NA(e, t, r[t]);\n                      });else if (Vl) se(e, Vl(r));else {\n                        var n;\n                        Xi(n = wf(Object(r))).call(n, function (t) {\n                          dr(e, t, Br(r, t));\n                        });\n                      }\n                    }\n\n                    return e;\n                  }({}, _t109, {\n                    rtpCapabilities: _i66,\n                    offerSDP: _e82.sdp\n                  })));\n\n                case 10:\n                  _context104.prev = 10;\n                  _context104.t0 = _context104[\"catch\"](0);\n                  throw new Ad(ad.GET_LOCAL_CONNECTION_PARAMS_FAILED, _context104.t0.toString());\n\n                case 13:\n                case \"end\":\n                  return _context104.stop();\n              }\n            }\n          }, _callee104, this, [[0, 10]]);\n        }));\n\n        function establish() {\n          return _establish.apply(this, arguments);\n        }\n\n        return establish;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee105(e, t, i, r, n, s, o, a) {\n          var _c7;\n\n          return _regeneratorRuntime.wrap(function _callee105$(_context105) {\n            while (1) {\n              switch (_context105.prev = _context105.next) {\n                case 0:\n                  _context105.prev = 0;\n\n                  if (this.initialOffer) {\n                    _context105.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot establish P2PConnection without initial offer.\");\n\n                case 3:\n                  this.remoteSDP = new af({\n                    remoteIceParameters: e,\n                    remoteDtlsParameters: t,\n                    candidates: i,\n                    remoteRTPCapabilities: r,\n                    remoteSetup: n,\n                    localCapabilities: this.localCapabilities,\n                    sdkCodec: this.store.codec,\n                    cname: s,\n                    ip: o,\n                    port: a\n                  });\n                  _c7 = this.remoteSDP.toString();\n                  _context105.next = 7;\n                  return this.peerConnection.setLocalDescription(this.initialOffer);\n\n                case 7:\n                  _context105.next = 9;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _c7\n                  });\n\n                case 9:\n                  _context105.next = 14;\n                  break;\n\n                case 11:\n                  _context105.prev = 11;\n                  _context105.t0 = _context105[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.connect failed; \".concat(_context105.t0.toString()));\n\n                case 14:\n                case \"end\":\n                  return _context105.stop();\n              }\n            }\n          }, _callee105, this, [[0, 11]]);\n        }));\n\n        function connect(_x147, _x148, _x149, _x150, _x151, _x152, _x153, _x154) {\n          return _connect4.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = this;\n        return VI(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee106() {\n          var r, _n24, _s17, _o12, _a9, _c8, _d4, _l2;\n\n          return _regeneratorRuntime.wrap(function _callee106$(_context106) {\n            while (1) {\n              switch (_context106.prev = _context106.next) {\n                case 0:\n                  _context106.next = 2;\n                  return GI(i.mutex.lock());\n\n                case 2:\n                  r = _context106.sent;\n                  _context106.prev = 3;\n\n                  if (i.remoteSDP) {\n                    _context106.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");\n\n                case 6:\n                  _n24 = Es(e).call(e, function (e) {\n                    return i.peerConnection.addTrack(e._mediaStreamTrack);\n                  });\n                  _context106.next = 9;\n                  return GI(i.peerConnection.createOffer());\n\n                case 9:\n                  _s17 = _context106.sent;\n                  _o12 = qI.parse(_s17.sdp);\n                  _a9 = Es(e).call(e, function (e) {\n                    var t;\n                    var r = e._mediaStreamTrack,\n                        n = Vs(t = _o12.mediaDescriptions).call(t, function (e) {\n                      return e.attributes.mid === r.kind;\n                    });\n                    if (!n) throw new Error(\"Cannot extract ssrc from mediaDescription.\");\n                    return function (e, t, i) {\n                      var r;\n                      var n = Fr(r = e.attributes.ssrcs).call(r, function (e) {\n                        return e.attributes.label === t;\n                      }),\n                          s = e.attributes.ssrcGroups;\n                      if (0 === n.length) throw new Error(\"Cannot extract ssrc from plan-b SDP.\");\n\n                      if (s && n.length > 1) {\n                        var _e83 = Vs(s).call(s, function (e) {\n                          var t;\n                          return -1 !== Os(t = e.ssrcIds).call(t, n[0].ssrcId);\n                        });\n\n                        return _e83 ? [{\n                          ssrcId: _e83.ssrcIds[0],\n                          rtx: i ? _e83.ssrcIds[1] : void 0\n                        }] : [{\n                          ssrcId: n[0].ssrcId\n                        }];\n                      }\n\n                      return [{\n                        ssrcId: n[0].ssrcId\n                      }];\n                    }(n, r.id, i.useRTX);\n                  });\n                  _context106.prev = 12;\n                  _context106.next = 15;\n                  return _a9;\n\n                case 15:\n                  _c8 = _context106.sent;\n                  _context106.next = 21;\n                  break;\n\n                case 18:\n                  _context106.prev = 18;\n                  _context106.t0 = _context106[\"catch\"](12);\n                  throw Xi(_n24).call(_n24, function (e) {\n                    Ra() && e.replaceTrack(null), i.peerConnection.removeTrack(e);\n                  }), _context106.t0;\n\n                case 21:\n                  _d4 = i.mungSendOfferSDP(_s17.sdp, e);\n                  i.remoteSDP.receive(e, t, _c8);\n                  _l2 = i.remoteSDP.toString();\n                  _context106.next = 26;\n                  return GI(i.peerConnection.setLocalDescription({\n                    type: \"offer\",\n                    sdp: _d4\n                  }));\n\n                case 26:\n                  _context106.next = 28;\n                  return GI(i.applySendEncodings(_n24, e));\n\n                case 28:\n                  _context106.next = 30;\n                  return GI(i.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _l2\n                  }));\n\n                case 30:\n                  return _context106.abrupt(\"return\", Es(e).call(e, function (e, t) {\n                    var i = e._mediaStreamTrack.id;\n                    return {\n                      localSSRC: _a9[t],\n                      id: i\n                    };\n                  }));\n\n                case 33:\n                  _context106.prev = 33;\n                  _context106.t1 = _context106[\"catch\"](3);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.send failed; \".concat(_context106.t1.toString()));\n\n                case 36:\n                  _context106.prev = 36;\n                  r();\n                  return _context106.finish(36);\n\n                case 39:\n                case \"end\":\n                  return _context106.stop();\n              }\n            }\n          }, _callee106, this, [[3, 33, 36, 39], [12, 18]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee107(e) {\n          var _this135 = this;\n\n          var t, _i67, _r47, _n25;\n\n          return _regeneratorRuntime.wrap(function _callee107$(_context107) {\n            while (1) {\n              switch (_context107.prev = _context107.next) {\n                case 0:\n                  _context107.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context107.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");\n\n                case 3:\n                  _i67 = Fr(t = this.peerConnection.getSenders()).call(t, function (t) {\n                    var i;\n                    return -1 !== Os(e).call(e, (null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                  });\n\n                  if (!(_i67.length !== e.length)) {\n                    _context107.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");\n\n                case 6:\n                  Es(_i67).call(_i67, function (e) {\n                    Ra() && e.replaceTrack(null), _this135.peerConnection.removeTrack(e);\n                  });\n                  _context107.next = 9;\n                  return this.peerConnection.createOffer();\n\n                case 9:\n                  _r47 = _context107.sent;\n                  _context107.next = 12;\n                  return this.peerConnection.setLocalDescription(_r47);\n\n                case 12:\n                  this.remoteSDP.stopReceiving(e);\n                  _n25 = this.remoteSDP.toString();\n                  _context107.next = 16;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _n25\n                  });\n\n                case 16:\n                  _context107.next = 21;\n                  break;\n\n                case 18:\n                  _context107.prev = 18;\n                  _context107.t0 = _context107[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.stopSending failed; \".concat(_context107.t0.toString()));\n\n                case 21:\n                case \"end\":\n                  return _context107.stop();\n              }\n            }\n          }, _callee107, this, [[0, 18]]);\n        }));\n\n        function stopSending(_x155) {\n          return _stopSending.apply(this, arguments);\n        }\n\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee108(e, t, i, r) {\n          var _this136 = this;\n\n          var _this$remoteSDP$send, _i68, _n26, _s18, _o13, _a10;\n\n          return _regeneratorRuntime.wrap(function _callee108$(_context108) {\n            while (1) {\n              switch (_context108.prev = _context108.next) {\n                case 0:\n                  _context108.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context108.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.receive \".concat(e, \" before remoteSDP created.\"));\n\n                case 3:\n                  _this$remoteSDP$send = this.remoteSDP.send(e, t, r), _i68 = _this$remoteSDP$send.id, _n26 = _this$remoteSDP$send.mslabel, _s18 = new As(function (t, r) {\n                    var s = Ua(function () {\n                      r(new Error(\"Cannot receive track, id: \".concat(_i68)));\n                    }, 1e4),\n                        o = function o(r) {\n                      var a = pa();\n\n                      if (\"Safari\" === a.name && 11 === Number(a.version) && r.track.id !== _i68 && r.streams[0].id === _n26) {\n                        var c;\n                        var _n27 = r.streams[0].getTracks()[0];\n                        return null === (c = _this136.remoteSDP) || void 0 === c || c.updateTrackLabel(e, _i68, r.track.id), _this136.peerConnection.removeEventListener(\"track\", o), clearTimeout(s), void t(_n27);\n                      }\n\n                      if (r.track.id === _i68) return _this136.peerConnection.removeEventListener(\"track\", o), clearTimeout(s), void t(r.track);\n                    };\n\n                    _this136.peerConnection.addEventListener(\"track\", o);\n                  }), _o13 = this.remoteSDP.toString();\n                  _context108.next = 6;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _o13\n                  });\n\n                case 6:\n                  _context108.next = 8;\n                  return this.peerConnection.createAnswer();\n\n                case 8:\n                  _a10 = _context108.sent;\n                  _context108.next = 11;\n                  return this.peerConnection.setLocalDescription(_a10);\n\n                case 11:\n                  _context108.next = 13;\n                  return _s18;\n\n                case 13:\n                  _context108.t0 = _context108.sent;\n                  _context108.t1 = _i68;\n                  return _context108.abrupt(\"return\", {\n                    track: _context108.t0,\n                    id: _context108.t1\n                  });\n\n                case 18:\n                  _context108.prev = 18;\n                  _context108.t2 = _context108[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context108.t2.toString()));\n\n                case 21:\n                case \"end\":\n                  return _context108.stop();\n              }\n            }\n          }, _callee108, this, [[0, 18]]);\n        }));\n\n        function receive(_x156, _x157, _x158, _x159) {\n          return _receive.apply(this, arguments);\n        }\n\n        return receive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee109(e) {\n          var _t110, _i69;\n\n          return _regeneratorRuntime.wrap(function _callee109$(_context109) {\n            while (1) {\n              switch (_context109.prev = _context109.next) {\n                case 0:\n                  _context109.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context109.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");\n\n                case 3:\n                  this.remoteSDP.stopSending(e);\n                  _t110 = this.remoteSDP.toString();\n                  _context109.next = 7;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _t110\n                  });\n\n                case 7:\n                  _context109.next = 9;\n                  return this.peerConnection.createAnswer();\n\n                case 9:\n                  _i69 = _context109.sent;\n                  _context109.next = 12;\n                  return this.peerConnection.setLocalDescription(_i69);\n\n                case 12:\n                  _context109.next = 17;\n                  break;\n\n                case 14:\n                  _context109.prev = 14;\n                  _context109.t0 = _context109[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection stopReceiving failed; \".concat(_context109.t0.toString()));\n\n                case 17:\n                case \"end\":\n                  return _context109.stop();\n              }\n            }\n          }, _callee109, this, [[0, 14]]);\n        }));\n\n        function stopReceiving(_x160) {\n          return _stopReceiving.apply(this, arguments);\n        }\n\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee110(e) {\n          return _regeneratorRuntime.wrap(function _callee110$(_context110) {\n            while (1) {\n              switch (_context110.prev = _context110.next) {\n                case 0:\n                case \"end\":\n                  return _context110.stop();\n              }\n            }\n          }, _callee110, this);\n        }));\n\n        function muteRemote(_x161) {\n          return _muteRemote.apply(this, arguments);\n        }\n\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee111(e) {\n          return _regeneratorRuntime.wrap(function _callee111$(_context111) {\n            while (1) {\n              switch (_context111.prev = _context111.next) {\n                case 0:\n                case \"end\":\n                  return _context111.stop();\n              }\n            }\n          }, _callee111, this);\n        }));\n\n        function unmuteRemote(_x162) {\n          return _unmuteRemote.apply(this, arguments);\n        }\n\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee112(e) {\n          var t, _i70;\n\n          return _regeneratorRuntime.wrap(function _callee112$(_context112) {\n            while (1) {\n              switch (_context112.prev = _context112.next) {\n                case 0:\n                  _context112.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context112.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");\n\n                case 3:\n                  _i70 = Fr(t = this.peerConnection.getSenders()).call(t, function (t) {\n                    var i;\n                    return -1 !== Os(e).call(e, (null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                  });\n\n                  if (!(_i70.length !== e.length)) {\n                    _context112.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"sender' length doesn't match mids' length.\");\n\n                case 6:\n                  Es(_i70).call(_i70, function (e) {\n                    if (Ra() && e.track) e.track.enabled = !1;else {\n                      var t;\n\n                      var _i71 = e.getParameters();\n\n                      Xi(t = _i71.encodings).call(t, function (e) {\n                        return e.active = !1;\n                      }), e.setParameters(_i71);\n                    }\n                  });\n                  _context112.next = 12;\n                  break;\n\n                case 9:\n                  _context112.prev = 9;\n                  _context112.t0 = _context112[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.muteLocal failed; \".concat(_context112.t0.toString()));\n\n                case 12:\n                case \"end\":\n                  return _context112.stop();\n              }\n            }\n          }, _callee112, this, [[0, 9]]);\n        }));\n\n        function muteLocal(_x163) {\n          return _muteLocal2.apply(this, arguments);\n        }\n\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee114(e) {\n          var t, _i72, _r48, _n28;\n\n          return _regeneratorRuntime.wrap(function _callee114$(_context114) {\n            while (1) {\n              switch (_context114.prev = _context114.next) {\n                case 0:\n                  _context114.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context114.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");\n\n                case 3:\n                  _i72 = Fr(t = this.peerConnection.getSenders()).call(t, function (t) {\n                    var i;\n                    return -1 !== Os(e).call(e, (null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                  });\n\n                  if (!(_i72.length !== e.length)) {\n                    _context114.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Senders' length doesn't match mids' length.\");\n\n                case 6:\n                  Es(_i72).call(_i72,\n                  /*#__PURE__*/\n                  function () {\n                    var _ref62 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee113(e) {\n                      var t, _i73;\n\n                      return _regeneratorRuntime.wrap(function _callee113$(_context113) {\n                        while (1) {\n                          switch (_context113.prev = _context113.next) {\n                            case 0:\n                              if (!(Ra() && e.track)) {\n                                _context113.next = 4;\n                                break;\n                              }\n\n                              e.track.enabled = !0;\n                              _context113.next = 8;\n                              break;\n\n                            case 4:\n                              _i73 = e.getParameters();\n                              Xi(t = _i73.encodings).call(t, function (e) {\n                                return e.active = !0;\n                              });\n                              _context113.next = 8;\n                              return e.setParameters(_i73);\n\n                            case 8:\n                            case \"end\":\n                              return _context113.stop();\n                          }\n                        }\n                      }, _callee113, this);\n                    }));\n\n                    return function (_x165) {\n                      return _ref62.apply(this, arguments);\n                    };\n                  }());\n                  _context114.next = 9;\n                  return this.peerConnection.createOffer();\n\n                case 9:\n                  _r48 = _context114.sent;\n                  _context114.next = 12;\n                  return this.peerConnection.setLocalDescription(_r48);\n\n                case 12:\n                  _n28 = this.remoteSDP.toString();\n                  _context114.next = 15;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _n28\n                  });\n\n                case 15:\n                  _context114.next = 20;\n                  break;\n\n                case 17:\n                  _context114.prev = 17;\n                  _context114.t0 = _context114[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteLocal failed; \".concat(_context114.t0.toString()));\n\n                case 20:\n                case \"end\":\n                  return _context114.stop();\n              }\n            }\n          }, _callee114, this, [[0, 17]]);\n        }));\n\n        function unmuteLocal(_x164) {\n          return _unmuteLocal2.apply(this, arguments);\n        }\n\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"reEstablish\",\n      value: function () {\n        var _reEstablish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee116() {\n          var _this137 = this;\n\n          var e;\n          return _regeneratorRuntime.wrap(function _callee116$(_context116) {\n            while (1) {\n              switch (_context116.prev = _context116.next) {\n                case 0:\n                  _context116.next = 2;\n                  return this.peerConnection.createOffer({\n                    iceRestart: !0\n                  });\n\n                case 2:\n                  e = _context116.sent;\n\n                  if (e.sdp) {\n                    _context116.next = 5;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot get SDP from restart offer.\");\n\n                case 5:\n                  return _context116.abrupt(\"return\", {\n                    iceParameters: ZI(e.sdp).iceParameters,\n                    restartICE: function () {\n                      var _restartICE2 = _asyncToGenerator(\n                      /*#__PURE__*/\n                      _regeneratorRuntime.mark(function _callee115(t, i, r, n) {\n                        return _regeneratorRuntime.wrap(function _callee115$(_context115) {\n                          while (1) {\n                            switch (_context115.prev = _context115.next) {\n                              case 0:\n                                return _context115.abrupt(\"return\", _this137.restartICE(e, t, i, r, n));\n\n                              case 1:\n                              case \"end\":\n                                return _context115.stop();\n                            }\n                          }\n                        }, _callee115, this);\n                      }));\n\n                      function restartICE(_x166, _x167, _x168, _x169) {\n                        return _restartICE2.apply(this, arguments);\n                      }\n\n                      return restartICE;\n                    }(),\n                    restartOfferSDP: e.sdp\n                  });\n\n                case 6:\n                case \"end\":\n                  return _context116.stop();\n              }\n            }\n          }, _callee116, this);\n        }));\n\n        function reEstablish() {\n          return _reEstablish.apply(this, arguments);\n        }\n\n        return reEstablish;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this.peerConnection.close(), null === (e = this.onConnectionStateChange) || void 0 === e || e.call(this, \"closed\"), this.unbindPCEvents(), this.unbindStatsEvents(), this.removeAllListeners(), this.statsFilter.destroy();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this.statsFilter.getVideoIsReady(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee117(e, t) {\n          var _e84, _i74, _r49;\n\n          return _regeneratorRuntime.wrap(function _callee117$(_context117) {\n            while (1) {\n              switch (_context117.prev = _context117.next) {\n                case 0:\n                  _context117.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context117.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");\n\n                case 3:\n                  _context117.next = 5;\n                  return this.peerConnection.createOffer();\n\n                case 5:\n                  _e84 = _context117.sent;\n                  _i74 = this.mungSendOfferSDP(_e84.sdp, [t]);\n                  this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind, t);\n                  _r49 = this.remoteSDP.toString();\n                  _context117.next = 11;\n                  return this.peerConnection.setLocalDescription({\n                    type: \"offer\",\n                    sdp: _i74\n                  });\n\n                case 11:\n                  _context117.next = 13;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _r49\n                  });\n\n                case 13:\n                  _context117.next = 18;\n                  break;\n\n                case 15:\n                  _context117.prev = 15;\n                  _context117.t0 = _context117[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, _context117.t0.toString());\n\n                case 18:\n                case \"end\":\n                  return _context117.stop();\n              }\n            }\n          }, _callee117, this, [[0, 15]]);\n        }));\n\n        function updateEncoderConfig(_x170, _x171) {\n          return _updateEncoderConfig.apply(this, arguments);\n        }\n\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee118(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee118$(_context118) {\n            while (1) {\n              switch (_context118.prev = _context118.next) {\n                case 0:\n                  r = Fr(i = this.peerConnection.getSenders()).call(i, function (t) {\n                    var i;\n                    return (null === (i = t.track) || void 0 === i ? void 0 : i.id) === e;\n                  });\n                  _context118.t0 = 1 === r.length;\n\n                  if (!_context118.t0) {\n                    _context118.next = 5;\n                    break;\n                  }\n\n                  _context118.next = 5;\n                  return this.applySendEncodings(r, [t]);\n\n                case 5:\n                case \"end\":\n                  return _context118.stop();\n              }\n            }\n          }, _callee118, this);\n        }));\n\n        function updateSendParameters(_x172, _x173) {\n          return _updateSendParameters.apply(this, arguments);\n        }\n\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this.statsFilter.setVideoIsReady2(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee119(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee119$(_context119) {\n            while (1) {\n              switch (_context119.prev = _context119.next) {\n                case 0:\n                  r = Vs(i = this.peerConnection.getSenders()).call(i, function (e) {\n                    var i;\n                    return (null === (i = e.track) || void 0 === i ? void 0 : i.id) === t;\n                  });\n                  _context119.t0 = r;\n\n                  if (!_context119.t0) {\n                    _context119.next = 5;\n                    break;\n                  }\n\n                  _context119.next = 5;\n                  return r.replaceTrack(e._mediaStreamTrack);\n\n                case 5:\n                case \"end\":\n                  return _context119.stop();\n              }\n            }\n          }, _callee119, this);\n        }));\n\n        function replaceTrack(_x174, _x175) {\n          return _replaceTrack.apply(this, arguments);\n        }\n\n        return replaceTrack;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function () {\n        var _restartICE3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee120(e, t, i, r, n) {\n          var _s19;\n\n          return _regeneratorRuntime.wrap(function _callee120$(_context120) {\n            while (1) {\n              switch (_context120.prev = _context120.next) {\n                case 0:\n                  _context120.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context120.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot restartICE before remoteSDP created.\");\n\n                case 3:\n                  this.remoteSDP.restartICE(t, i, r, n);\n                  _s19 = this.remoteSDP.toString();\n                  _context120.next = 7;\n                  return this.peerConnection.setLocalDescription(e);\n\n                case 7:\n                  _context120.next = 9;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _s19\n                  });\n\n                case 9:\n                  _context120.next = 14;\n                  break;\n\n                case 11:\n                  _context120.prev = 11;\n                  _context120.t0 = _context120[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.restartICE failed; \".concat(_context120.t0.toString()));\n\n                case 14:\n                case \"end\":\n                  return _context120.stop();\n              }\n            }\n          }, _callee120, this, [[0, 11]]);\n        }));\n\n        function restartICE(_x176, _x177, _x178, _x179, _x180) {\n          return _restartICE3.apply(this, arguments);\n        }\n\n        return restartICE;\n      }()\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this138 = this;\n\n        this.peerConnection.oniceconnectionstatechange = function () {\n          var e;\n          null === (e = _this138.onICEConnectionStateChange) || void 0 === e || e.call(_this138, _this138.peerConnection.iceConnectionState);\n        }, this.peerConnection.onconnectionstatechange = function () {\n          var e;\n          null === (e = _this138.onConnectionStateChange) || void 0 === e || e.call(_this138, _this138.peerConnection.connectionState);\n        }, this.peerConnection.onicecandidate = function (e) {\n          e.candidate ? _this138.localCandidateCount += 1 : (_this138.peerConnection.onicecandidate = null, _this138.allCandidatesReceived = !0, vc.debug(\"[pc-\".concat(_this138.store.p2pId, \"] local candidate count\"), _this138.localCandidateCount));\n        }, Ua(function () {\n          _this138.allCandidatesReceived || (_this138.allCandidatesReceived = !0, vc.debug(\"[pc-\".concat(_this138.store.p2pId, \"] onicecandidate timeout, local candidate count\"), _this138.localCandidateCount));\n        }, Fc(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"unbindPCEvents\",\n      value: function unbindPCEvents() {\n        this.peerConnection.oniceconnectionstatechange = null, this.peerConnection.onconnectionstatechange = null, this.peerConnection.onsignalingstatechange = null, this.peerConnection.onicecandidateerror = null, this.peerConnection.onicecandidate = null, this.peerConnection.ontrack = null;\n      }\n    }, {\n      key: \"applySendEncodings\",\n      value: function () {\n        var _applySendEncodings = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee121(e, t) {\n          var _n29, i, _s20, _o14, _a11, _c9, r, _e85, _d5, _l3;\n\n          return _regeneratorRuntime.wrap(function _callee121$(_context121) {\n            while (1) {\n              switch (_context121.prev = _context121.next) {\n                case 0:\n                  _context121.prev = 0;\n\n                  if (Ul().supportSetRtpSenderParameters) {\n                    _context121.next = 3;\n                    break;\n                  }\n\n                  return _context121.abrupt(\"return\");\n\n                case 3:\n                  if (!(e.length !== t.length)) {\n                    _context121.next = 5;\n                    break;\n                  }\n\n                  return _context121.abrupt(\"return\");\n\n                case 5:\n                  _n29 = 0;\n\n                case 6:\n                  if (!(_n29 < e.length)) {\n                    _context121.next = 29;\n                    break;\n                  }\n\n                  _s20 = e[_n29], _o14 = t[_n29];\n\n                  if (_o14) {\n                    _context121.next = 10;\n                    break;\n                  }\n\n                  return _context121.abrupt(\"continue\", 26);\n\n                case 10:\n                  _a11 = {}, _c9 = {};\n\n                  if (!(_o14 instanceof CI)) {\n                    _context121.next = 20;\n                    break;\n                  }\n\n                  _context121.t0 = _o14._optimizationMode;\n                  _context121.next = _context121.t0 === \"motion\" ? 15 : _context121.t0 === \"detail\" ? 17 : 19;\n                  break;\n\n                case 15:\n                  _a11.degradationPreference = \"maintain-framerate\";\n                  return _context121.abrupt(\"break\", 20);\n\n                case 17:\n                  _a11.degradationPreference = \"maintain-resolution\";\n                  return _context121.abrupt(\"break\", 20);\n\n                case 19:\n                  _a11.degradationPreference = \"balanced\";\n\n                case 20:\n                  if (Fc(\"DSCP_TYPE\") && ka()) {\n                    _e85 = Fc(\"DSCP_TYPE\");\n                    eo(r = [\"very-low\", \"low\", \"medium\", \"high\"]).call(r, _e85) && (_c9.networkPriority = _e85);\n                  }\n\n                  _d5 = _s20.getParameters(), _l3 = null === (i = _d5.encodings) || void 0 === i ? void 0 : i[0];\n                  _l3 && er(_l3, _c9);\n                  er(_d5, _a11);\n                  _context121.next = 26;\n                  return _s20.setParameters(_d5);\n\n                case 26:\n                  _n29++;\n                  _context121.next = 6;\n                  break;\n\n                case 29:\n                  _context121.next = 34;\n                  break;\n\n                case 31:\n                  _context121.prev = 31;\n                  _context121.t1 = _context121[\"catch\"](0);\n                  vc.debug(\"Apply RTPSendEncodings failed.\");\n\n                case 34:\n                case \"end\":\n                  return _context121.stop();\n              }\n            }\n          }, _callee121, this, [[0, 31]]);\n        }));\n\n        function applySendEncodings(_x181, _x182) {\n          return _applySendEncodings.apply(this, arguments);\n        }\n\n        return applySendEncodings;\n      }()\n    }, {\n      key: \"mungSendOfferSDP\",\n      value: function mungSendOfferSDP(e, t) {\n        var i = qI.parse(e);\n        return Xi(t).call(t, function (e, t) {\n          var r;\n          var n = e._mediaStreamTrack,\n              s = Vs(r = i.mediaDescriptions).call(r, function (e) {\n            return e.attributes.mid === n.kind;\n          });\n          s && tf(s, e);\n        }), qI.print(i);\n      }\n    }, {\n      key: \"bindStatsEvents\",\n      value: function bindStatsEvents() {\n        var _this139 = this;\n\n        this.statsFilter.onFirstAudioReceived = function (e) {\n          var t;\n          null === (t = _this139.onFirstAudioReceived) || void 0 === t || t.call(_this139, e);\n        }, this.statsFilter.onFirstVideoReceived = function (e) {\n          var t;\n          null === (t = _this139.onFirstVideoReceived) || void 0 === t || t.call(_this139, e);\n        }, this.statsFilter.onFirstAudioDecoded = function (e) {\n          var t;\n          null === (t = _this139.onFirstAudioDecoded) || void 0 === t || t.call(_this139, e);\n        }, this.statsFilter.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          null === (r = _this139.onFirstVideoDecoded) || void 0 === r || r.call(_this139, e, t, i);\n        };\n      }\n    }, {\n      key: \"unbindStatsEvents\",\n      value: function unbindStatsEvents() {\n        this.statsFilter.onFirstAudioReceived = void 0, this.statsFilter.onFirstVideoReceived = void 0, this.statsFilter.onFirstAudioDecoded = void 0, this.statsFilter.onFirstVideoDecoded = void 0;\n      }\n    }, {\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }, {\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(e) {\n        var _t$iceServers, _t$iceServers2;\n\n        var t = {\n          iceServers: [],\n          sdpSemantics: \"plan-b\"\n        };\n        var i, r;\n        e.iceServers ? t.iceServers = e.iceServers : e.turnServer && \"off\" !== e.turnServer.mode && (qd(e.turnServer.servers) ? t.iceServers = e.turnServer.servers : (t.iceServers && (_t$iceServers = t.iceServers).push.apply(_t$iceServers, _toConsumableArray(bf.turnServerConfigToIceServers(e.turnServer.servers))), t.iceServers && e.turnServer.serversFromGateway && (_t$iceServers2 = t.iceServers).push.apply(_t$iceServers2, _toConsumableArray(bf.turnServerConfigToIceServers(e.turnServer.serversFromGateway))), Xi(i = Xe(r = e.turnServer.servers).call(r, e.turnServer.serversFromGateway || [])).call(i, function (e) {\n          e.forceturn && (t.iceTransportPolicy = \"relay\");\n        })));\n        return t;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return Xi(e).call(e, function (e) {\n          if (e.security) {\n            var i;\n            if (e.tcpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(i = \"turns:\".concat(lh(e.turnServerURL), \":\")).call(i, e.tcpport, \"?transport=tcp\")\n            });\n          } else {\n            var r, n;\n            if (e.udpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(r = \"turn:\".concat(e.turnServerURL, \":\")).call(r, e.udpport, \"?transport=udp\")\n            });\n            if (e.tcpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(n = \"turn:\".concat(e.turnServerURL, \":\")).call(n, e.tcpport, \"?transport=tcp\")\n            });\n          }\n        }), t;\n      }\n    }]);\n\n    return bf;\n  }(Pl);\n\n  function Df(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee122() {\n      var i,\n          n,\n          _len23,\n          e,\n          _key23,\n          _args122 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee122$(_context122) {\n        while (1) {\n          switch (_context122.prev = _context122.next) {\n            case 0:\n              i = this.mutex;\n              _context122.next = 3;\n              return i.lock(\"Locking from P2PConnection.\".concat(t));\n\n            case 3:\n              n = _context122.sent;\n              _context122.prev = 4;\n\n              for (_len23 = _args122.length, e = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {\n                e[_key23] = _args122[_key23];\n              }\n\n              _context122.next = 8;\n              return r.apply(this, e);\n\n            case 8:\n              return _context122.abrupt(\"return\", _context122.sent);\n\n            case 9:\n              _context122.prev = 9;\n              n();\n              return _context122.finish(9);\n\n            case 12:\n            case \"end\":\n              return _context122.stop();\n          }\n        }\n      }, _callee122, this, [[4,, 9, 12]]);\n    })), i;\n  }\n\n  Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Object, Object, Array, Object, String, String, String, String]), Of(\"design:returntype\", As)], bf.prototype, \"connect\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Array]), Of(\"design:returntype\", As)], bf.prototype, \"stopSending\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [String, Array, String, Object]), Of(\"design:returntype\", As)], bf.prototype, \"receive\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Array]), Of(\"design:returntype\", As)], bf.prototype, \"stopReceiving\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [String]), Of(\"design:returntype\", As)], bf.prototype, \"muteRemote\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [String]), Of(\"design:returntype\", As)], bf.prototype, \"unmuteRemote\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Array]), Of(\"design:returntype\", As)], bf.prototype, \"muteLocal\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Array]), Of(\"design:returntype\", As)], bf.prototype, \"unmuteLocal\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", []), Of(\"design:returntype\", As)], bf.prototype, \"reEstablish\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", []), Of(\"design:returntype\", void 0)], bf.prototype, \"close\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [String, au]), Of(\"design:returntype\", As)], bf.prototype, \"updateEncoderConfig\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [String, au]), Of(\"design:returntype\", As)], bf.prototype, \"updateSendParameters\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [au, String]), Of(\"design:returntype\", As)], bf.prototype, \"replaceTrack\", null), Nf([Df, Of(\"design:type\", Function), Of(\"design:paramtypes\", [Object, Object, Array, String, String]), Of(\"design:returntype\", As)], bf.prototype, \"restartICE\", null);\n  var kf = 4e4;\n\n  var Lf =\n  /*#__PURE__*/\n  function () {\n    function Lf(e) {\n      var _this140 = this;\n\n      _classCallCheck(this, Lf);\n\n      e = Fh(e);\n      var _e86 = e,\n          t = _e86.remoteIceParameters,\n          i = _e86.remoteDtlsParameters,\n          r = _e86.candidates,\n          n = _e86.remoteRTPCapabilities,\n          s = _e86.remoteSetup,\n          o = _e86.localCapabilities,\n          a = _e86.cname,\n          c = _e86.ip,\n          d = _e86.port,\n          l = qI.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=ice-lite\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\");\n      this._rtpCapabilities = n, this._candidates = r, this._iceParameters = t, this._dtlsParameters = i, this._localCapabilities = o, this.setup = s, this.cname = a, this.ip = c, this.port = d, this.addressType = -1 === Os(c).call(c, \":\") ? \"IP4\" : \"IP6\";\n      var _iteratorNormalCompletion17 = true;\n      var _didIteratorError17 = false;\n      var _iteratorError17 = undefined;\n\n      try {\n        for (var _iterator17 = l.mediaDescriptions[Symbol.iterator](), _step17; !(_iteratorNormalCompletion17 = (_step17 = _iterator17.next()).done); _iteratorNormalCompletion17 = true) {\n          var _e87 = _step17.value;\n          var A, u, h;\n          if (_e87.media.port = this.port, Xi(A = _e87.connections).call(A, function (e) {\n            e.address = _this140.ip, e.addrtype = _this140.addressType;\n          }), _e87.attributes.rtcp ? (_e87.attributes.rtcp.address = this.ip, _e87.attributes.rtcp.port = this.port, _e87.attributes.rtcp.addressType = this.addressType) : _e87.attributes.rtcp = {\n            port: d,\n            address: c,\n            netType: \"IN\",\n            addressType: this.addressType\n          }, _e87.attributes.iceUfrag = t.iceUfrag, _e87.attributes.icePwd = t.icePwd, _e87.attributes.fingerprints = i.fingerprints, _e87.attributes.candidates = r, _e87.attributes.setup = s, \"video\" === _e87.media.mediaType) if (_e87.media.fmts = Es(u = n.videoCodecs).call(u, function (e) {\n            return e.payloadType.toString(10);\n          }), _e87.attributes.payloads = n.videoCodecs, _e87.attributes.extmaps = n.videoExtensions, Fc(\"PRELOAD_MEDIA_COUNT\") > 0) {\n            var _ef2 = ef([{\n              ssrcId: kf,\n              rtx: Fc(\"USE_RTX\") ? 40001 : void 0\n            }], this.cname),\n                _t111 = _ef2.ssrcs,\n                _i75 = _ef2.ssrcGroups;\n\n            _e87.attributes.ssrcs = _t111, _e87.attributes.ssrcGroups = _i75;\n          }\n          if (\"audio\" === _e87.media.mediaType) if (_e87.media.fmts = Es(h = n.audioCodecs).call(h, function (e) {\n            return e.payloadType.toString(10);\n          }), _e87.attributes.payloads = n.audioCodecs, _e87.attributes.extmaps = n.audioExtensions, Fc(\"PRELOAD_MEDIA_COUNT\") > 0) {\n            var _ef3 = ef([{\n              ssrcId: 2e4\n            }], this.cname),\n                _t112 = _ef3.ssrcs,\n                _i76 = _ef3.ssrcGroups;\n\n            _e87.attributes.ssrcs = _t112, _e87.attributes.ssrcGroups = _i76;\n          }\n        }\n      } catch (err) {\n        _didIteratorError17 = true;\n        _iteratorError17 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion17 && _iterator17.return != null) {\n            _iterator17.return();\n          }\n        } finally {\n          if (_didIteratorError17) {\n            throw _iteratorError17;\n          }\n        }\n      }\n\n      this.sessionDesc = l, this.currentMidIndex = l.mediaDescriptions.length - 1;\n    }\n\n    _createClass(Lf, [{\n      key: \"preloadRemoteMedia\",\n      value: function preloadRemoteMedia() {\n        var e = Fc(\"PRELOAD_MEDIA_COUNT\"),\n            t = this.rtpCapabilities,\n            i = this.candidates,\n            r = this.dtlsParameters,\n            n = this.iceParameters;\n\n        for (var _a12 = 1; _a12 < e; _a12++) {\n          var s, o;\n\n          var _e88 = 2 * _a12 + 2e4,\n              _c10 = 2 * _a12 + kf,\n              _ef4 = ef([{\n            ssrcId: _e88\n          }], this.cname),\n              _d6 = _ef4.ssrcs,\n              _l4 = _ef4.ssrcGroups,\n              _ef5 = ef([{\n            ssrcId: _c10,\n            rtx: Fc(\"USE_RTX\") ? _c10 + 1 : void 0\n          }], this.cname),\n              _A2 = _ef5.ssrcs,\n              _u3 = _ef5.ssrcGroups;\n\n          this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"video\",\n              port: this.port,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: Es(s = t.videoCodecs).call(s, function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: this.addressType,\n              address: this.ip\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: n.iceUfrag,\n              icePwd: n.icePwd,\n              unrecognized: [],\n              candidates: i,\n              extmaps: t.videoExtensions,\n              fingerprints: r.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _A2,\n              ssrcGroups: _u3,\n              rtcpFeedbackWildcards: [],\n              payloads: t.videoCodecs,\n              rtcp: {\n                port: this.port,\n                netType: \"IN\",\n                addressType: this.addressType,\n                address: this.ip\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * _a12)\n            }\n          }), this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"audio\",\n              port: this.port,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: Es(o = t.audioCodecs).call(o, function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: this.addressType,\n              address: this.ip\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: n.iceUfrag,\n              icePwd: n.icePwd,\n              unrecognized: [],\n              candidates: i,\n              extmaps: t.audioExtensions,\n              fingerprints: r.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _d6,\n              ssrcGroups: _l4,\n              rtcpFeedbackWildcards: [],\n              payloads: t.audioCodecs,\n              rtcp: {\n                port: this.port,\n                netType: \"IN\",\n                addressType: this.addressType,\n                address: this.ip\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * _a12 + 1)\n            }\n          }), this.currentMidIndex += 2;\n        }\n\n        this.updateBundleMids();\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return qI.print(this.sessionDesc);\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t, i, r) {\n        var _ef6 = ef(t, this.cname, i),\n            n = _ef6.ssrcs,\n            s = _ef6.ssrcGroups,\n            o = this.findPreloadMediaDesc(n);\n\n        if (o) {\n          if (r && (r.tcc || r.remb)) {\n            var a;\n\n            var _e89 = Os(a = this.sessionDesc.mediaDescriptions).call(a, o);\n\n            return this.sessionDesc.mediaDescriptions[_e89] = this.mungSendMediaDesc(o, r), {\n              mid: o.attributes.mid,\n              needExchangeSDP: !0\n            };\n          }\n\n          return {\n            mid: o.attributes.mid,\n            needExchangeSDP: !1\n          };\n        }\n\n        {\n          var _t113 = this.findAvailableMediaIndex(e);\n\n          if (Ra()) {\n            if (-1 !== _t113 && 1 !== _t113) {\n              var _e90 = Fh(this.sessionDesc.mediaDescriptions[_t113]);\n\n              return _e90.attributes.direction = \"sendonly\", _e90.attributes.ssrcs = n, _e90.attributes.ssrcGroups = s, this.sessionDesc.mediaDescriptions[_t113] = this.mungSendMediaDesc(_e90, r), {\n                mid: _e90.attributes.mid,\n                needExchangeSDP: !0\n              };\n            }\n\n            {\n              var _t114 = this.createOrRecycleSendMedia(e, n, s, \"sendonly\", r);\n\n              return this.updateBundleMids(), {\n                mid: _t114.attributes.mid,\n                needExchangeSDP: !0\n              };\n            }\n          }\n\n          if (-1 !== _t113) {\n            var _e91 = Fh(this.sessionDesc.mediaDescriptions[_t113]);\n\n            return _e91.attributes.direction = \"sendonly\", _e91.attributes.ssrcs = n, _e91.attributes.ssrcGroups = s, this.sessionDesc.mediaDescriptions[_t113] = this.mungSendMediaDesc(_e91, r), {\n              mid: _e91.attributes.mid,\n              needExchangeSDP: !0\n            };\n          }\n\n          {\n            var _t115 = this.createOrRecycleSendMedia(e, n, s, \"sendonly\", r);\n\n            return this.updateBundleMids(), {\n              mid: _t115.attributes.mid,\n              needExchangeSDP: !0\n            };\n          }\n        }\n      }\n    }, {\n      key: \"stopSending\",\n      value: function stopSending(e) {\n        var t;\n        var i = Fr(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.attributes.mid && -1 !== Os(e).call(e, t.attributes.mid);\n        });\n        if (i.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");\n        Xi(i).call(i, function (e) {\n          \"0\" === e.attributes.mid || Ta() || Ra() ? e.attributes.ssrcs = [] : (e.attributes.ssrcs = [], e.attributes.direction = \"inactive\", e.media.port = \"0\");\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"mute\",\n      value: function mute(e) {\n        var t;\n        var i = Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!i) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.mute.\"));\n        i.attributes.direction = \"inactive\";\n      }\n    }, {\n      key: \"unmute\",\n      value: function unmute(e) {\n        var t;\n        var i = Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!i) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.unmute.\"));\n        i.attributes.direction = \"sendonly\";\n      }\n    }, {\n      key: \"muteRemote\",\n      value: function muteRemote(e) {\n        var t;\n        var i = Fr(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return eo(e).call(e, t.attributes.mid || \"\");\n        });\n        if (i.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        Xi(i).call(i, function (e) {\n          e.attributes.direction = \"inactive\";\n        });\n      }\n    }, {\n      key: \"unmuteRemote\",\n      value: function unmuteRemote(e) {\n        var t;\n        var i = Fr(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return eo(e).call(e, t.attributes.mid || \"\");\n        });\n        if (i.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        Xi(i).call(i, function (e) {\n          e.attributes.direction = \"recvonly\";\n        });\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(e, t, i) {\n        var _this141 = this;\n\n        Xi(e).call(e, function (e, r) {\n          _this141.createOrRecycleRecvMedia(e, [], \"recvonly\", t, i[r]);\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"stopReceiving\",\n      value: function stopReceiving(e) {\n        var t;\n        var i = Fr(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return -1 !== Os(e).call(e, t.attributes.mid);\n        });\n        if (i.length !== e.length) throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");\n        Xi(i).call(i, function (e) {\n          e.media.port = \"0\", e.attributes.direction = \"inactive\";\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"restartICE\",\n      value: function restartICE(e, t, i, r) {\n        var _this142 = this;\n\n        var n, s;\n        e = Fh(e), t = Fh(t), this._iceParameters = e, this._candidates = t, this.ip = i, this.port = r, this.addressType = -1 === Os(n = this.ip).call(n, \":\") ? \"IP4\" : \"IP6\", Xi(s = this.sessionDesc.mediaDescriptions).call(s, function (t) {\n          var n;\n          \"0\" !== t.media.port && (t.media.port = _this142.port), Xi(n = t.connections).call(n, function (e) {\n            e.address = _this142.ip, e.addrtype = _this142.addressType;\n          }), t.attributes.rtcp ? (t.attributes.rtcp.address = _this142.ip, t.attributes.rtcp.port = _this142.port, t.attributes.rtcp.addressType = _this142.addressType) : t.attributes.rtcp = {\n            port: r,\n            address: i,\n            netType: \"IN\",\n            addressType: _this142.addressType\n          }, t.attributes.iceUfrag = e.iceUfrag, t.attributes.icePwd = e.icePwd, t.attributes.candidates = _this142.candidates;\n        });\n      }\n    }, {\n      key: \"predictReceivingMids\",\n      value: function predictReceivingMids(e) {\n        var t = [];\n\n        for (var _i77 = 0; _i77 < e; _i77++) {\n          t.push((this.currentMidIndex + _i77 + 1).toString(10));\n        }\n\n        return t;\n      }\n    }, {\n      key: \"findAvailableMediaIndex\",\n      value: function findAvailableMediaIndex(e) {\n        var t;\n        return OI(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return t.media.mediaType === e && \"0\" !== t.media.port && (\"sendonly\" === t.attributes.direction || \"sendrecv\" === t.attributes.direction) && 0 === t.attributes.ssrcs.length;\n        });\n      }\n    }, {\n      key: \"createOrRecycleRecvMedia\",\n      value: function createOrRecycleRecvMedia(e, t, i, r, n) {\n        var s = e._mediaStreamTrack.kind;\n        var o;\n\n        if (s === wl.VIDEO) {\n          var a, c, d, l, A;\n          if (Fc(\"H264_PROFILE_LEVEL_ID\") && \"h264\" === r) o = Fr(c = this.rtpCapabilities.videoCodecs).call(c, function (e) {\n            var t, i, n;\n            return eo(t = (null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase()) || \"\").call(t, r) && (null == e || null === (n = e.fmtp) || void 0 === n ? void 0 : n.parameters[\"profile-level-id\"]) === Fc(\"H264_PROFILE_LEVEL_ID\");\n          });\n          if (!o || 0 === (null === (a = o) || void 0 === a ? void 0 : a.length)) o = Fr(d = this.rtpCapabilities.videoCodecs).call(d, function (e) {\n            var t, i;\n            return eo(t = (null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase()) || \"\").call(t, r);\n          });\n          if (0 === o.length) vc.warning(Xe(l = \"codec \".concat(r, \" not included in rtpCapabilities, fallback to default payloads: \")).call(l, null === (A = this.rtpCapabilities.videoCodecs[0].rtpMap) || void 0 === A ? void 0 : A.encodingName)), o = this.rtpCapabilities.videoCodecs;\n        } else o = this.rtpCapabilities.audioCodecs;\n\n        var u = s === wl.VIDEO ? this.rtpCapabilities.videoExtensions : this.rtpCapabilities.audioExtensions;\n        this.currentMidIndex += 1;\n        var h = \"\".concat(this.currentMidIndex);\n        var p = {\n          media: {\n            mediaType: s,\n            port: this.port,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: Es(o).call(o, function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: this.addressType,\n            address: this.ip\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: u,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: [],\n            rtcpFeedbackWildcards: [],\n            payloads: o,\n            rtcp: {\n              port: this.port,\n              netType: \"IN\",\n              addressType: this.addressType,\n              address: this.ip\n            },\n            setup: this.setup,\n            direction: i,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(h)\n          }\n        };\n        p = this.mungRecvMediaDsec(p, e, n);\n        var E = this.findFirstClosedMedia(s);\n\n        if (E) {\n          var g;\n\n          var _e92 = Os(g = this.sessionDesc.mediaDescriptions).call(g, E);\n\n          this.sessionDesc.mediaDescriptions[_e92] = p;\n        } else this.sessionDesc.mediaDescriptions.push(p);\n\n        return p;\n      }\n    }, {\n      key: \"createOrRecycleSendMedia\",\n      value: function createOrRecycleSendMedia(e, t, i, r, n) {\n        var s = e === wl.VIDEO ? this.rtpCapabilities.videoCodecs : this.rtpCapabilities.audioCodecs,\n            o = e === wl.VIDEO ? this.rtpCapabilities.videoExtensions : this.rtpCapabilities.audioExtensions;\n        this.currentMidIndex += 1;\n        var a = \"\".concat(this.currentMidIndex);\n        var c = {\n          media: {\n            mediaType: e,\n            port: this.port,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: Es(s).call(s, function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: this.addressType,\n            address: this.ip\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: o,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: i,\n            rtcpFeedbackWildcards: [],\n            payloads: s,\n            rtcp: {\n              port: this.port,\n              netType: \"IN\",\n              addressType: this.addressType,\n              address: this.ip\n            },\n            setup: this.setup,\n            direction: r,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(a)\n          }\n        };\n        c = this.mungSendMediaDesc(c, n);\n        var d = this.findFirstClosedMedia(e);\n\n        if (d) {\n          var l;\n\n          var _e93 = Os(l = this.sessionDesc.mediaDescriptions).call(l, d);\n\n          this.sessionDesc.mediaDescriptions[_e93] = c;\n        } else this.sessionDesc.mediaDescriptions.push(c);\n\n        return c;\n      }\n    }, {\n      key: \"updateBundleMids\",\n      value: function updateBundleMids() {\n        var e, t;\n        this.sessionDesc.attributes.groups[0].identificationTag = Es(e = Fr(t = this.sessionDesc.mediaDescriptions).call(t, function (e) {\n          return \"0\" !== e.media.port;\n        })).call(e, function (e) {\n          return e.attributes.mid;\n        });\n      }\n    }, {\n      key: \"mungRecvMediaDsec\",\n      value: function mungRecvMediaDsec(e, t, i) {\n        var r = Fh(e);\n        return rf(r), tf(r, t), nf(r, t), function (e) {\n          var t;\n          if (\"video\" !== e.media.mediaType) return;\n          var i = pa();\n          if (i.name !== Aa.SAFARI && i.os !== la.IOS) return;\n          var r = OI(t = e.attributes.extmaps).call(t, function (e) {\n            return /video-orientation/g.test(e.extensionName);\n          });\n          var n;\n          -1 !== r && Ss(n = e.attributes.extmaps).call(n, r, 1);\n        }(r), sf(r, i, this.localCapabilities), r;\n      }\n    }, {\n      key: \"mungSendMediaDesc\",\n      value: function mungSendMediaDesc(e, t) {\n        var i = Fh(e);\n        return sf(i, t, this.localCapabilities), i;\n      }\n    }, {\n      key: \"updateRecvMedia\",\n      value: function updateRecvMedia(e, t) {\n        var i;\n        var r = OI(i = this.sessionDesc.mediaDescriptions).call(i, function (t) {\n          return t.attributes.mid === e;\n        });\n\n        if (-1 !== r) {\n          var _e94 = this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r], t);\n\n          this.sessionDesc.mediaDescriptions[r] = _e94;\n        }\n      }\n    }, {\n      key: \"bumpMid\",\n      value: function bumpMid(e) {\n        this.currentMidIndex += e;\n      }\n    }, {\n      key: \"findFirstClosedMedia\",\n      value: function findFirstClosedMedia(e) {\n        var t;\n        return Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          return Ta() ? \"0\" === t.media.port && t.media.mediaType === e : \"0\" === t.media.port;\n        });\n      }\n    }, {\n      key: \"findPreloadMediaDesc\",\n      value: function findPreloadMediaDesc(e) {\n        var t;\n        return Vs(t = this.sessionDesc.mediaDescriptions).call(t, function (t) {\n          var i, r;\n          return (null === (i = t.attributes) || void 0 === i || null === (r = i.ssrcs[0]) || void 0 === r ? void 0 : r.ssrcId) === e[0].ssrcId;\n        });\n      }\n    }, {\n      key: \"localCapabilities\",\n      get: function get() {\n        return Fh(this._localCapabilities);\n      }\n    }, {\n      key: \"rtpCapabilities\",\n      get: function get() {\n        return Fh(this._rtpCapabilities);\n      }\n    }, {\n      key: \"candidates\",\n      get: function get() {\n        return Fh(this._candidates);\n      }\n    }, {\n      key: \"iceParameters\",\n      get: function get() {\n        return Fh(this._iceParameters);\n      }\n    }, {\n      key: \"dtlsParameters\",\n      get: function get() {\n        return Fh(this._dtlsParameters);\n      }\n    }]);\n\n    return Lf;\n  }();\n\n  function Pf(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  var Bf = function Bf(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      Mf = function Mf(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var Uf =\n  /*#__PURE__*/\n  function (_Pl2) {\n    _inherits(Uf, _Pl2);\n\n    function Uf(e, t) {\n      var _this143;\n\n      _classCallCheck(this, Uf);\n\n      _this143 = _possibleConstructorReturn(this, _getPrototypeOf(Uf).call(this, e, t)), _this143.useRTX = Fc(\"USE_RTX\"), _this143.localCandidateCount = 0, _this143.allCandidatesReceived = !1, _this143.mutex = new su(\"P2PConnection-mutex\"), _this143.store = t, _this143.peerConnection = new RTCPeerConnection(Uf.resolvePCConfiguration(e), {\n        optional: [{\n          googDscp: !0\n        }]\n      }), _this143.statsFilter = yf(_this143.peerConnection, void 0, void 0, Ta() ? 1200 : void 0), _this143.bindPCEvents(), _this143.bindStatsEvents(), _this143.store.p2pId = _this143.store.p2pId + 1;\n      return _this143;\n    }\n\n    _createClass(Uf, [{\n      key: \"establish\",\n      value: function () {\n        var _establish2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee124() {\n          var _e95, _t116, _i78;\n\n          return _regeneratorRuntime.wrap(function _callee124$(_context124) {\n            while (1) {\n              switch (_context124.prev = _context124.next) {\n                case 0:\n                  _context124.prev = 0;\n                  this.peerConnection.addTransceiver(\"video\", {\n                    direction: \"recvonly\"\n                  }), this.peerConnection.addTransceiver(\"audio\", {\n                    direction: \"recvonly\"\n                  });\n                  _context124.next = 4;\n                  return this.peerConnection.createOffer();\n\n                case 4:\n                  _e95 = _context124.sent;\n\n                  if (_e95.sdp) {\n                    _context124.next = 7;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n\n                case 7:\n                  _t116 = ZI(_e95.sdp);\n                  _context124.next = 10;\n                  return function () {\n                    var _ref64 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee123(e, t, i, r) {\n                      var n, s, o;\n                      return _regeneratorRuntime.wrap(function _callee123$(_context123) {\n                        while (1) {\n                          switch (_context123.prev = _context123.next) {\n                            case 0:\n                              n = new RTCPeerConnection();\n                              n.addTransceiver(\"video\", {\n                                direction: \"sendrecv\"\n                              }), n.addTransceiver(\"audio\", {\n                                direction: \"sendrecv\"\n                              });\n                              _context123.next = 4;\n                              return n.createOffer();\n\n                            case 4:\n                              s = _context123.sent;\n\n                              if (s.sdp) {\n                                _context123.next = 7;\n                                break;\n                              }\n\n                              throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n\n                            case 7:\n                              o = zI(s.sdp, e, t, i, r);\n\n                              try {\n                                n.close();\n                              } catch (e) {}\n\n                              return _context123.abrupt(\"return\", o);\n\n                            case 10:\n                            case \"end\":\n                              return _context123.stop();\n                          }\n                        }\n                      }, _callee123, this);\n                    }));\n\n                    return function (_x183, _x184, _x185, _x186) {\n                      return _ref64.apply(this, arguments);\n                    };\n                  }()(!this.useRTX, !1, [\"opus\"]);\n\n                case 10:\n                  _i78 = _context124.sent;\n                  return _context124.abrupt(\"return\", (this.localCapabilities = _i78, this.initialOffer = _e95, function (e) {\n                    for (var t = 1; t < arguments.length; t++) {\n                      var i,\n                          r = null != arguments[t] ? arguments[t] : {};\n                      if (t % 2) Xi(i = Pf(Object(r), !0)).call(i, function (t) {\n                        NA(e, t, r[t]);\n                      });else if (Vl) se(e, Vl(r));else {\n                        var n;\n                        Xi(n = Pf(Object(r))).call(n, function (t) {\n                          dr(e, t, Br(r, t));\n                        });\n                      }\n                    }\n\n                    return e;\n                  }({}, _t116, {\n                    rtpCapabilities: _i78,\n                    offerSDP: _e95.sdp\n                  })));\n\n                case 14:\n                  _context124.prev = 14;\n                  _context124.t0 = _context124[\"catch\"](0);\n                  throw new Ad(ad.GET_LOCAL_CONNECTION_PARAMS_FAILED, _context124.t0.toString());\n\n                case 17:\n                case \"end\":\n                  return _context124.stop();\n              }\n            }\n          }, _callee124, this, [[0, 14]]);\n        }));\n\n        function establish() {\n          return _establish2.apply(this, arguments);\n        }\n\n        return establish;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee125(e, t, i, r, n, s, o, a) {\n          var _c11, _d7, _l5, _e96, _t117;\n\n          return _regeneratorRuntime.wrap(function _callee125$(_context125) {\n            while (1) {\n              switch (_context125.prev = _context125.next) {\n                case 0:\n                  _context125.prev = 0;\n\n                  if (this.initialOffer) {\n                    _context125.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot establish P2PConnection without initial offer.\");\n\n                case 3:\n                  this.remoteSDP = new Lf({\n                    remoteIceParameters: e,\n                    remoteDtlsParameters: t,\n                    candidates: i,\n                    remoteRTPCapabilities: r,\n                    remoteSetup: n,\n                    localCapabilities: this.localCapabilities,\n                    cname: s,\n                    ip: o,\n                    port: a\n                  });\n                  _c11 = this.remoteSDP.toString(), _d7 = this.logSDPExchange(this.initialOffer.sdp || \"\", \"offer\", \"local\", \"connect\");\n                  _context125.next = 7;\n                  return this.peerConnection.setLocalDescription(this.initialOffer);\n\n                case 7:\n                  null == _d7 || _d7(_c11);\n                  _context125.next = 10;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _c11\n                  });\n\n                case 10:\n                  _l5 = this.peerConnection.getTransceivers()[0];\n\n                  if (!(null != _l5 && _l5.receiver && this.tryBindTransportEvents(_l5.receiver), Fc(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n                    _context125.next = 21;\n                    break;\n                  }\n\n                  this.remoteSDP.preloadRemoteMedia();\n                  _e96 = this.remoteSDP.toString();\n                  _context125.next = 16;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _e96\n                  });\n\n                case 16:\n                  _context125.next = 18;\n                  return this.peerConnection.createAnswer();\n\n                case 18:\n                  _t117 = _context125.sent;\n                  _context125.next = 21;\n                  return this.peerConnection.setLocalDescription(_t117);\n\n                case 21:\n                  _context125.next = 26;\n                  break;\n\n                case 23:\n                  _context125.prev = 23;\n                  _context125.t0 = _context125[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.connect failed; \".concat(_context125.t0.toString()));\n\n                case 26:\n                case \"end\":\n                  return _context125.stop();\n              }\n            }\n          }, _callee125, this, [[0, 23]]);\n        }));\n\n        function connect(_x187, _x188, _x189, _x190, _x191, _x192, _x193, _x194) {\n          return _connect5.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = this;\n        return VI(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee126() {\n          var r, _n30, _s21, _o15, _a13, _c12, _d8, _l6, _A3, _u4;\n\n          return _regeneratorRuntime.wrap(function _callee126$(_context126) {\n            while (1) {\n              switch (_context126.prev = _context126.next) {\n                case 0:\n                  _context126.next = 2;\n                  return GI(i.mutex.lock());\n\n                case 2:\n                  r = _context126.sent;\n                  _context126.prev = 3;\n\n                  if (i.remoteSDP) {\n                    _context126.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");\n\n                case 6:\n                  _n30 = [];\n                  Xi(e).call(e, function (e) {\n                    var t = i.peerConnection.addTransceiver(e._mediaStreamTrack, {\n                      direction: \"sendonly\"\n                    });\n\n                    _n30.push(t);\n                  });\n                  _context126.t0 = Ta() && !0 === Fc(\"SIMULCAST\");\n\n                  if (!_context126.t0) {\n                    _context126.next = 12;\n                    break;\n                  }\n\n                  _context126.next = 12;\n                  return GI(i.applySimulcastForFirefox(_n30, e));\n\n                case 12:\n                  _context126.next = 14;\n                  return GI(i.peerConnection.createOffer());\n\n                case 14:\n                  _s21 = _context126.sent;\n                  _o15 = i.remoteSDP.predictReceivingMids(e.length);\n                  _a13 = i.mungSendOfferSDP(_s21.sdp, e, _o15);\n                  _c12 = qI.parse(_a13);\n                  _d8 = Es(_o15).call(_o15, function (e) {\n                    var t;\n                    var r = Vs(t = _c12.mediaDescriptions).call(t, function (t) {\n                      return t.attributes.mid === e;\n                    });\n                    if (!r) throw new Error(\"Cannot extract ssrc from mediaDescription.\");\n                    return function (e, t) {\n                      var i, r;\n                      var n = [],\n                          s = Fr(i = e.attributes.ssrcGroups).call(i, function (e) {\n                        return \"FID\" === e.semantic;\n                      }),\n                          o = Vs(r = e.attributes.ssrcGroups).call(r, function (e) {\n                        return \"SIM\" === e.semantic;\n                      }),\n                          a = e.attributes.ssrcs;\n                      var c;\n                      if (o) Xi(c = o.ssrcIds).call(c, function (e) {\n                        var i;\n                        var r = null === (i = Vs(s).call(s, function (t) {\n                          return t.ssrcIds[0] === e;\n                        })) || void 0 === i ? void 0 : i.ssrcIds[1];\n                        n.push({\n                          ssrcId: e,\n                          rtx: t ? r : void 0\n                        });\n                      });else if (s.length > 0) {\n                        var _e97 = s[0].ssrcIds[0],\n                            _i79 = s[0].ssrcIds[1];\n                        n.push({\n                          ssrcId: _e97,\n                          rtx: t ? _i79 : void 0\n                        });\n                      } else {\n                        if (0 === a.length) throw new Error(\"No ssrcs found on local media description.\");\n                        n.push({\n                          ssrcId: a[0].ssrcId\n                        });\n                      }\n                      return n;\n                    }(r, i.useRTX);\n                  });\n                  _context126.prev = 19;\n                  _context126.next = 22;\n                  return _d8;\n\n                case 22:\n                  _l6 = _context126.sent;\n                  _context126.next = 28;\n                  break;\n\n                case 25:\n                  _context126.prev = 25;\n                  _context126.t1 = _context126[\"catch\"](19);\n                  throw Xi(_n30).call(_n30, function (e) {\n                    var t;\n                    return null === (t = e.stop) || void 0 === t ? void 0 : t.call(e);\n                  }), i.remoteSDP.bumpMid(_n30.length), _context126.t1;\n\n                case 28:\n                  i.remoteSDP.receive(e, t, _l6);\n                  _A3 = i.remoteSDP.toString(), _u4 = i.logSDPExchange(_a13, \"offer\", \"local\", \"send\");\n                  _context126.next = 32;\n                  return GI(i.peerConnection.setLocalDescription({\n                    type: \"offer\",\n                    sdp: _a13\n                  }));\n\n                case 32:\n                  _context126.next = 34;\n                  return GI(i.applySimulcastEncodings(_n30, e));\n\n                case 34:\n                  _context126.next = 36;\n                  return GI(i.applySendEncodings(_n30, e));\n\n                case 36:\n                  null == _u4 || _u4(_A3);\n                  _context126.next = 39;\n                  return GI(i.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _A3\n                  }));\n\n                case 39:\n                  return _context126.abrupt(\"return\", Es(_n30).call(_n30, function (e, t) {\n                    var i = _o15[t];\n                    return {\n                      localSSRC: _d8[t],\n                      id: i,\n                      transceiver: e\n                    };\n                  }));\n\n                case 42:\n                  _context126.prev = 42;\n                  _context126.t2 = _context126[\"catch\"](3);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.send failed; \".concat(_context126.t2.toString()));\n\n                case 45:\n                  _context126.prev = 45;\n                  r();\n                  return _context126.finish(45);\n\n                case 48:\n                case \"end\":\n                  return _context126.stop();\n              }\n            }\n          }, _callee126, this, [[3, 42, 45, 48], [19, 25]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee127(e) {\n          var t, _i80, _r50, _n31, _s22;\n\n          return _regeneratorRuntime.wrap(function _callee127$(_context127) {\n            while (1) {\n              switch (_context127.prev = _context127.next) {\n                case 0:\n                  _context127.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context127.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");\n\n                case 3:\n                  _i80 = Fr(t = this.peerConnection.getTransceivers()).call(t, function (t) {\n                    return -1 !== Os(e).call(e, t.mid);\n                  });\n\n                  if (!(_i80.length !== e.length)) {\n                    _context127.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");\n\n                case 6:\n                  Es(_i80).call(_i80, function (e) {\n                    var t;\n                    e.direction = \"inactive\", null === (t = e.stop) || void 0 === t || t.call(e);\n                  });\n                  _context127.next = 9;\n                  return this.peerConnection.createOffer();\n\n                case 9:\n                  _r50 = _context127.sent;\n                  _n31 = this.logSDPExchange(_r50.sdp || \"\", \"offer\", \"local\", \"stopSending\");\n                  _context127.next = 13;\n                  return this.peerConnection.setLocalDescription(_r50);\n\n                case 13:\n                  this.remoteSDP.stopReceiving(e);\n                  _s22 = this.remoteSDP.toString();\n                  null == _n31 || _n31(_s22);\n                  _context127.next = 18;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _s22\n                  });\n\n                case 18:\n                  _context127.next = 23;\n                  break;\n\n                case 20:\n                  _context127.prev = 20;\n                  _context127.t0 = _context127[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.stopSending failed; \".concat(_context127.t0.toString()));\n\n                case 23:\n                case \"end\":\n                  return _context127.stop();\n              }\n            }\n          }, _callee127, this, [[0, 20]]);\n        }));\n\n        function stopSending(_x195) {\n          return _stopSending2.apply(this, arguments);\n        }\n\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee128(e, t, i, r) {\n          var n, _this$remoteSDP$send2, _s23, _o16, _t118, _i81, _r51, _a14;\n\n          return _regeneratorRuntime.wrap(function _callee128$(_context128) {\n            while (1) {\n              switch (_context128.prev = _context128.next) {\n                case 0:\n                  _context128.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context128.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.receive \".concat(e, \" before remoteSDP created.\"));\n\n                case 3:\n                  _this$remoteSDP$send2 = this.remoteSDP.send(e, t, i, r), _s23 = _this$remoteSDP$send2.mid, _o16 = _this$remoteSDP$send2.needExchangeSDP;\n\n                  if (!_o16) {\n                    _context128.next = 17;\n                    break;\n                  }\n\n                  _t118 = this.remoteSDP.toString(), _i81 = this.logSDPExchange(_t118, \"offer\", \"remote\", \"receive\");\n                  _context128.next = 8;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _t118\n                  });\n\n                case 8:\n                  _context128.next = 10;\n                  return this.peerConnection.createAnswer();\n\n                case 10:\n                  _r51 = _context128.sent;\n                  null == _i81 || _i81(_r51.sdp || \"\");\n                  _context128.next = 14;\n                  return this.peerConnection.setLocalDescription(_r51);\n\n                case 14:\n                  vc.debug(\"[P2PConnection] receive \".concat(e, \" by exchanging SDP.\"));\n                  _context128.next = 18;\n                  break;\n\n                case 17:\n                  vc.debug(\"[P2PConnection] receive \".concat(e, \" no need to exchange SDP.\"));\n\n                case 18:\n                  _a14 = Vs(n = this.peerConnection.getTransceivers()).call(n, function (e) {\n                    return e.mid === _s23;\n                  });\n\n                  if (_a14) {\n                    _context128.next = 21;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot get transceiver after setLocalDescription.\");\n\n                case 21:\n                  return _context128.abrupt(\"return\", {\n                    track: _a14.receiver.track,\n                    id: _s23\n                  });\n\n                case 24:\n                  _context128.prev = 24;\n                  _context128.t0 = _context128[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context128.t0.toString()));\n\n                case 27:\n                case \"end\":\n                  return _context128.stop();\n              }\n            }\n          }, _callee128, this, [[0, 24]]);\n        }));\n\n        function receive(_x196, _x197, _x198, _x199) {\n          return _receive2.apply(this, arguments);\n        }\n\n        return receive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee129(e) {\n          var _t119, _i82, _r52;\n\n          return _regeneratorRuntime.wrap(function _callee129$(_context129) {\n            while (1) {\n              switch (_context129.prev = _context129.next) {\n                case 0:\n                  _context129.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context129.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");\n\n                case 3:\n                  this.remoteSDP.stopSending(e);\n                  _t119 = this.remoteSDP.toString(), _i82 = this.logSDPExchange(_t119, \"offer\", \"remote\", \"stopReceiving\");\n                  _context129.next = 7;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _t119\n                  });\n\n                case 7:\n                  _context129.next = 9;\n                  return this.peerConnection.createAnswer();\n\n                case 9:\n                  _r52 = _context129.sent;\n                  null == _i82 || _i82(_r52.sdp || \"\");\n                  _context129.next = 13;\n                  return this.peerConnection.setLocalDescription(_r52);\n\n                case 13:\n                  _context129.next = 18;\n                  break;\n\n                case 15:\n                  _context129.prev = 15;\n                  _context129.t0 = _context129[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection stopReceiving failed; \".concat(_context129.t0.toString()));\n\n                case 18:\n                case \"end\":\n                  return _context129.stop();\n              }\n            }\n          }, _callee129, this, [[0, 15]]);\n        }));\n\n        function stopReceiving(_x200) {\n          return _stopReceiving2.apply(this, arguments);\n        }\n\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee130(e) {\n          var _t120, _i83, _r53;\n\n          return _regeneratorRuntime.wrap(function _callee130$(_context130) {\n            while (1) {\n              switch (_context130.prev = _context130.next) {\n                case 0:\n                  _context130.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context130.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.muteRemote mid=\".concat(e, \" before remote SDP created.\"));\n\n                case 3:\n                  this.remoteSDP.mute(e);\n                  _t120 = this.remoteSDP.toString(), _i83 = this.logSDPExchange(_t120, \"offer\", \"remote\", \"muteRemote\");\n                  _context130.next = 7;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _t120\n                  });\n\n                case 7:\n                  _context130.next = 9;\n                  return this.peerConnection.createAnswer();\n\n                case 9:\n                  _r53 = _context130.sent;\n                  null == _i83 || _i83(_r53.sdp || \"\");\n                  _context130.next = 13;\n                  return this.peerConnection.setLocalDescription(_r53);\n\n                case 13:\n                  _context130.next = 18;\n                  break;\n\n                case 15:\n                  _context130.prev = 15;\n                  _context130.t0 = _context130[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.muteRemote failed; \".concat(_context130.t0.toString()));\n\n                case 18:\n                case \"end\":\n                  return _context130.stop();\n              }\n            }\n          }, _callee130, this, [[0, 15]]);\n        }));\n\n        function muteRemote(_x201) {\n          return _muteRemote2.apply(this, arguments);\n        }\n\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee131(e) {\n          var _t121, _i84, _r54;\n\n          return _regeneratorRuntime.wrap(function _callee131$(_context131) {\n            while (1) {\n              switch (_context131.prev = _context131.next) {\n                case 0:\n                  _context131.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context131.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.unmuteRemote mid=\".concat(e, \" before remote SDP created.\"));\n\n                case 3:\n                  this.remoteSDP.unmute(e);\n                  _t121 = this.remoteSDP.toString(), _i84 = this.logSDPExchange(_t121, \"offer\", \"remote\", \"unmuteRemote\");\n                  _context131.next = 7;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"offer\",\n                    sdp: _t121\n                  });\n\n                case 7:\n                  _context131.next = 9;\n                  return this.peerConnection.createAnswer();\n\n                case 9:\n                  _r54 = _context131.sent;\n                  null == _i84 || _i84(_r54.sdp || \"\");\n                  _context131.next = 13;\n                  return this.peerConnection.setLocalDescription(_r54);\n\n                case 13:\n                  _context131.next = 18;\n                  break;\n\n                case 15:\n                  _context131.prev = 15;\n                  _context131.t0 = _context131[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteRemote failed; \".concat(_context131.t0.toString()));\n\n                case 18:\n                case \"end\":\n                  return _context131.stop();\n              }\n            }\n          }, _callee131, this, [[0, 15]]);\n        }));\n\n        function unmuteRemote(_x202) {\n          return _unmuteRemote2.apply(this, arguments);\n        }\n\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee132(e) {\n          var t, _i85, _r55, _n32, _s24;\n\n          return _regeneratorRuntime.wrap(function _callee132$(_context132) {\n            while (1) {\n              switch (_context132.prev = _context132.next) {\n                case 0:\n                  _context132.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context132.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");\n\n                case 3:\n                  _i85 = Fr(t = this.peerConnection.getTransceivers()).call(t, function (t) {\n                    return t.mid && -1 !== Os(e).call(e, t.mid);\n                  });\n\n                  if (!(_i85.length !== e.length)) {\n                    _context132.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Transceivers' length doesn't match mids' length.\");\n\n                case 6:\n                  Es(_i85).call(_i85, function (e) {\n                    e.direction = \"inactive\";\n                  });\n                  _context132.next = 9;\n                  return this.peerConnection.createOffer();\n\n                case 9:\n                  _r55 = _context132.sent;\n                  _n32 = this.logSDPExchange(_r55.sdp || \"\", \"offer\", \"local\", \"muteLocal\");\n                  _context132.next = 13;\n                  return this.peerConnection.setLocalDescription(_r55);\n\n                case 13:\n                  this.remoteSDP.muteRemote(e);\n                  _s24 = this.remoteSDP.toString();\n                  null == _n32 || _n32(_s24);\n                  _context132.next = 18;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _s24\n                  });\n\n                case 18:\n                  _context132.next = 23;\n                  break;\n\n                case 20:\n                  _context132.prev = 20;\n                  _context132.t0 = _context132[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.muteLocal failed; \".concat(_context132.t0.toString()));\n\n                case 23:\n                case \"end\":\n                  return _context132.stop();\n              }\n            }\n          }, _callee132, this, [[0, 20]]);\n        }));\n\n        function muteLocal(_x203) {\n          return _muteLocal3.apply(this, arguments);\n        }\n\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee134(e) {\n          var t, _i86, _r56, _n33, _s25;\n\n          return _regeneratorRuntime.wrap(function _callee134$(_context134) {\n            while (1) {\n              switch (_context134.prev = _context134.next) {\n                case 0:\n                  _context134.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context134.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");\n\n                case 3:\n                  _i86 = Fr(t = this.peerConnection.getTransceivers()).call(t, function (t) {\n                    return t.mid && -1 !== Os(e).call(e, t.mid);\n                  });\n\n                  if (!(_i86.length !== e.length)) {\n                    _context134.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"Transceivers' length doesn't match mids' length.\");\n\n                case 6:\n                  Es(_i86).call(_i86,\n                  /*#__PURE__*/\n                  function () {\n                    var _ref65 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee133(e, t) {\n                      return _regeneratorRuntime.wrap(function _callee133$(_context133) {\n                        while (1) {\n                          switch (_context133.prev = _context133.next) {\n                            case 0:\n                              e.direction = \"sendonly\";\n\n                            case 1:\n                            case \"end\":\n                              return _context133.stop();\n                          }\n                        }\n                      }, _callee133, this);\n                    }));\n\n                    return function (_x205, _x206) {\n                      return _ref65.apply(this, arguments);\n                    };\n                  }());\n                  _context134.next = 9;\n                  return this.peerConnection.createOffer();\n\n                case 9:\n                  _r56 = _context134.sent;\n                  _n33 = this.logSDPExchange(_r56.sdp || \"\", \"offer\", \"local\", \"unmuteLocal\");\n                  _context134.next = 13;\n                  return this.peerConnection.setLocalDescription(_r56);\n\n                case 13:\n                  this.remoteSDP.unmuteRemote(e);\n                  _s25 = this.remoteSDP.toString();\n                  null == _n33 || _n33(_s25);\n                  _context134.next = 18;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _s25\n                  });\n\n                case 18:\n                  _context134.next = 23;\n                  break;\n\n                case 20:\n                  _context134.prev = 20;\n                  _context134.t0 = _context134[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteLocal failed; \".concat(_context134.t0.toString()));\n\n                case 23:\n                case \"end\":\n                  return _context134.stop();\n              }\n            }\n          }, _callee134, this, [[0, 20]]);\n        }));\n\n        function unmuteLocal(_x204) {\n          return _unmuteLocal3.apply(this, arguments);\n        }\n\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"reEstablish\",\n      value: function () {\n        var _reEstablish2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee136() {\n          var _this144 = this;\n\n          var e;\n          return _regeneratorRuntime.wrap(function _callee136$(_context136) {\n            while (1) {\n              switch (_context136.prev = _context136.next) {\n                case 0:\n                  _context136.next = 2;\n                  return this.peerConnection.createOffer({\n                    iceRestart: !0\n                  });\n\n                case 2:\n                  e = _context136.sent;\n\n                  if (e.sdp) {\n                    _context136.next = 5;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot get SDP from restart offer.\");\n\n                case 5:\n                  return _context136.abrupt(\"return\", {\n                    iceParameters: ZI(e.sdp).iceParameters,\n                    restartICE: function () {\n                      var _restartICE4 = _asyncToGenerator(\n                      /*#__PURE__*/\n                      _regeneratorRuntime.mark(function _callee135(t, i, r, n) {\n                        return _regeneratorRuntime.wrap(function _callee135$(_context135) {\n                          while (1) {\n                            switch (_context135.prev = _context135.next) {\n                              case 0:\n                                return _context135.abrupt(\"return\", _this144.restartICE(e, t, i, r, n));\n\n                              case 1:\n                              case \"end\":\n                                return _context135.stop();\n                            }\n                          }\n                        }, _callee135, this);\n                      }));\n\n                      function restartICE(_x207, _x208, _x209, _x210) {\n                        return _restartICE4.apply(this, arguments);\n                      }\n\n                      return restartICE;\n                    }(),\n                    restartOfferSDP: e.sdp\n                  });\n\n                case 6:\n                case \"end\":\n                  return _context136.stop();\n              }\n            }\n          }, _callee136, this);\n        }));\n\n        function reEstablish() {\n          return _reEstablish2.apply(this, arguments);\n        }\n\n        return reEstablish;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this.peerConnection.close(), null === (e = this.onConnectionStateChange) || void 0 === e || e.call(this, \"closed\"), this.tryUnbindTransportEvents(), this.unbindPCEvents(), this.unbindStatsEvents(), this.removeAllListeners(), this.transportEventReceiver = void 0, this.statsFilter.destroy();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this.statsFilter.getVideoIsReady(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee137(e, t) {\n          var _i87, _r57, _n34, _s26;\n\n          return _regeneratorRuntime.wrap(function _callee137$(_context137) {\n            while (1) {\n              switch (_context137.prev = _context137.next) {\n                case 0:\n                  _context137.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context137.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");\n\n                case 3:\n                  _context137.next = 5;\n                  return this.peerConnection.createOffer();\n\n                case 5:\n                  _i87 = _context137.sent;\n                  _r57 = this.mungSendOfferSDP(_i87.sdp, [t], [e]);\n                  this.remoteSDP.updateRecvMedia(e, t);\n                  _n34 = this.remoteSDP.toString(), _s26 = this.logSDPExchange(_r57, \"offer\", \"local\", \"updateEncoderConfig\");\n                  _context137.next = 11;\n                  return this.peerConnection.setLocalDescription({\n                    type: \"offer\",\n                    sdp: _r57\n                  });\n\n                case 11:\n                  null == _s26 || _s26(_n34);\n                  _context137.next = 14;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _n34\n                  });\n\n                case 14:\n                  _context137.next = 19;\n                  break;\n\n                case 16:\n                  _context137.prev = 16;\n                  _context137.t0 = _context137[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, _context137.t0.toString());\n\n                case 19:\n                case \"end\":\n                  return _context137.stop();\n              }\n            }\n          }, _callee137, this, [[0, 16]]);\n        }));\n\n        function updateEncoderConfig(_x211, _x212) {\n          return _updateEncoderConfig2.apply(this, arguments);\n        }\n\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee138(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee138$(_context138) {\n            while (1) {\n              switch (_context138.prev = _context138.next) {\n                case 0:\n                  r = Fr(i = this.peerConnection.getTransceivers()).call(i, function (t) {\n                    return t.mid === e;\n                  });\n                  _context138.t0 = 1 === r.length;\n\n                  if (!_context138.t0) {\n                    _context138.next = 12;\n                    break;\n                  }\n\n                  if (!this.isVP8Simulcast(t)) {\n                    _context138.next = 10;\n                    break;\n                  }\n\n                  _context138.t1 = Ta();\n\n                  if (_context138.t1) {\n                    _context138.next = 8;\n                    break;\n                  }\n\n                  _context138.next = 8;\n                  return this.applySimulcastEncodings(r, [t]);\n\n                case 8:\n                  _context138.next = 12;\n                  break;\n\n                case 10:\n                  _context138.next = 12;\n                  return this.applySendEncodings(r, [t]);\n\n                case 12:\n                case \"end\":\n                  return _context138.stop();\n              }\n            }\n          }, _callee138, this);\n        }));\n\n        function updateSendParameters(_x213, _x214) {\n          return _updateSendParameters2.apply(this, arguments);\n        }\n\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this.statsFilter.setVideoIsReady2(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee139(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee139$(_context139) {\n            while (1) {\n              switch (_context139.prev = _context139.next) {\n                case 0:\n                  r = Vs(i = this.peerConnection.getTransceivers()).call(i, function (e) {\n                    return e.mid === t;\n                  });\n                  _context139.t0 = r;\n\n                  if (!_context139.t0) {\n                    _context139.next = 5;\n                    break;\n                  }\n\n                  _context139.next = 5;\n                  return r.sender.replaceTrack(e._mediaStreamTrack);\n\n                case 5:\n                case \"end\":\n                  return _context139.stop();\n              }\n            }\n          }, _callee139, this);\n        }));\n\n        function replaceTrack(_x215, _x216) {\n          return _replaceTrack2.apply(this, arguments);\n        }\n\n        return replaceTrack;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function () {\n        var _restartICE5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee140(e, t, i, r, n) {\n          var _s27, _o17;\n\n          return _regeneratorRuntime.wrap(function _callee140$(_context140) {\n            while (1) {\n              switch (_context140.prev = _context140.next) {\n                case 0:\n                  _context140.prev = 0;\n\n                  if (this.remoteSDP) {\n                    _context140.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot restartICE before remoteSDP created.\");\n\n                case 3:\n                  this.remoteSDP.restartICE(t, i, r, n);\n                  _s27 = this.remoteSDP.toString(), _o17 = this.logSDPExchange(e.sdp || \"\", \"offer\", \"local\", \"restartICE\");\n                  _context140.next = 7;\n                  return this.peerConnection.setLocalDescription(e);\n\n                case 7:\n                  null == _o17 || _o17(_s27);\n                  _context140.next = 10;\n                  return this.peerConnection.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: _s27\n                  });\n\n                case 10:\n                  _context140.next = 15;\n                  break;\n\n                case 12:\n                  _context140.prev = 12;\n                  _context140.t0 = _context140[\"catch\"](0);\n                  throw new Ad(ad.EXCHANGE_SDP_FAILED, \"P2PConnection.restartICE failed; \".concat(_context140.t0.toString()));\n\n                case 15:\n                case \"end\":\n                  return _context140.stop();\n              }\n            }\n          }, _callee140, this, [[0, 12]]);\n        }));\n\n        function restartICE(_x217, _x218, _x219, _x220, _x221) {\n          return _restartICE5.apply(this, arguments);\n        }\n\n        return restartICE;\n      }()\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this145 = this;\n\n        this.peerConnection.oniceconnectionstatechange = function () {\n          var e;\n          null === (e = _this145.onICEConnectionStateChange) || void 0 === e || e.call(_this145, _this145.peerConnection.iceConnectionState);\n        }, this.peerConnection.onconnectionstatechange = function () {\n          var e;\n          null === (e = _this145.onConnectionStateChange) || void 0 === e || e.call(_this145, _this145.peerConnection.connectionState);\n        }, this.peerConnection.onicecandidate = function (e) {\n          e.candidate ? _this145.localCandidateCount += 1 : (_this145.peerConnection.onicecandidate = null, _this145.allCandidatesReceived = !0, vc.debug(\"[pc-\".concat(_this145.store.p2pId, \"] local candidate count\"), _this145.localCandidateCount));\n        }, Ua(function () {\n          _this145.allCandidatesReceived || (_this145.allCandidatesReceived = !0, vc.debug(\"[pc-\".concat(_this145.store.p2pId, \"] onicecandidate timeout, local candidate count\"), _this145.localCandidateCount));\n        }, Fc(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"unbindPCEvents\",\n      value: function unbindPCEvents() {\n        this.peerConnection.oniceconnectionstatechange = null, this.peerConnection.onconnectionstatechange = null, this.peerConnection.onsignalingstatechange = null, this.peerConnection.onicecandidateerror = null, this.peerConnection.onicecandidate = null, this.peerConnection.ontrack = null;\n      }\n    }, {\n      key: \"tryBindTransportEvents\",\n      value: function tryBindTransportEvents(e) {\n        var _this146 = this;\n\n        e.transport && (this.transportEventReceiver = e, e.transport.onstatechange = function () {\n          var t, i;\n          null !== (t = e.transport) && void 0 !== t && t.state && (null === (i = _this146.onDTLSTransportStateChange) || void 0 === i || i.call(_this146, e.transport.state));\n        }, e.transport.onerror = function (e) {\n          var t;\n          null === (t = _this146.onDTLSTransportError) || void 0 === t || t.call(_this146, e.error);\n        }, e.transport.iceTransport && (e.transport.iceTransport.onstatechange = function () {\n          var t, i, r;\n          null !== (t = e.transport) && void 0 !== t && t.iceTransport.state && (null === (i = _this146.onICETransportStateChange) || void 0 === i || i.call(_this146, null === (r = e.transport) || void 0 === r ? void 0 : r.iceTransport.state));\n        }));\n      }\n    }, {\n      key: \"tryUnbindTransportEvents\",\n      value: function tryUnbindTransportEvents() {\n        this.transportEventReceiver && this.transportEventReceiver.transport && (this.transportEventReceiver.transport.onstatechange = null, this.transportEventReceiver.transport.onerror = null, this.transportEventReceiver.transport.iceTransport && (this.transportEventReceiver.transport.iceTransport.onstatechange = null));\n      }\n    }, {\n      key: \"applySendEncodings\",\n      value: function () {\n        var _applySendEncodings2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee141(e, t) {\n          var _l7, _A4, _u5, i, r, n, _e98, _t122, s, o, a, c, d, _e99, _l8, _h4;\n\n          return _regeneratorRuntime.wrap(function _callee141$(_context141) {\n            while (1) {\n              switch (_context141.prev = _context141.next) {\n                case 0:\n                  _context141.prev = 0;\n\n                  if (Ul().supportSetRtpSenderParameters) {\n                    _context141.next = 3;\n                    break;\n                  }\n\n                  return _context141.abrupt(\"return\");\n\n                case 3:\n                  if (!(e.length !== t.length)) {\n                    _context141.next = 5;\n                    break;\n                  }\n\n                  return _context141.abrupt(\"return\");\n\n                case 5:\n                  _l7 = 0;\n\n                case 6:\n                  if (!(_l7 < e.length)) {\n                    _context141.next = 32;\n                    break;\n                  }\n\n                  _A4 = e[_l7], _u5 = t[_l7];\n\n                  if (!(_u5 && _u5 instanceof CI)) {\n                    _context141.next = 29;\n                    break;\n                  }\n\n                  if (!this.isVP8Simulcast(_u5)) {\n                    _context141.next = 11;\n                    break;\n                  }\n\n                  return _context141.abrupt(\"continue\", 29);\n\n                case 11:\n                  _e98 = {}, _t122 = {};\n                  _context141.t0 = _u5._optimizationMode;\n                  _context141.next = _context141.t0 === \"motion\" ? 15 : _context141.t0 === \"detail\" ? 17 : 19;\n                  break;\n\n                case 15:\n                  _e98.degradationPreference = \"maintain-framerate\";\n                  return _context141.abrupt(\"break\", 20);\n\n                case 17:\n                  _e98.degradationPreference = \"maintain-resolution\";\n                  return _context141.abrupt(\"break\", 20);\n\n                case 19:\n                  _e98.degradationPreference = \"balanced\";\n\n                case 20:\n                  if (null !== (i = _u5._encoderConfig) && void 0 !== i && i.bitrateMax) _t122.maxBitrate = 1e3 * (null === (s = _u5._encoderConfig) || void 0 === s ? void 0 : s.bitrateMax);\n                  if (eo(r = _u5._hints).call(r, _l.LOW_STREAM)) null !== (o = _u5._encoderConfig) && void 0 !== o && o.frameRate && (_t122.maxFramerate = uh(_u5._encoderConfig.frameRate)), null !== (a = _u5._encoderConfig) && void 0 !== a && a.scaleResolutionDownBy && (null === (c = _u5._encoderConfig) || void 0 === c ? void 0 : c.scaleResolutionDownBy) > 1 && (_t122.scaleResolutionDownBy = _u5._encoderConfig.scaleResolutionDownBy);\n\n                  if (Fc(\"DSCP_TYPE\") && ka()) {\n                    _e99 = Fc(\"DSCP_TYPE\");\n                    eo(d = [\"very-low\", \"low\", \"medium\", \"high\"]).call(d, _e99) && (_t122.networkPriority = _e99);\n                  }\n\n                  _l8 = _A4.sender.getParameters(), _h4 = null === (n = _l8.encodings) || void 0 === n ? void 0 : n[0];\n                  Ta() && !_h4 && (_e98.encodings = [_t122]);\n                  _h4 && er(_h4, _t122);\n                  er(_l8, _e98);\n                  _context141.next = 29;\n                  return _A4.sender.setParameters(_l8);\n\n                case 29:\n                  _l7++;\n                  _context141.next = 6;\n                  break;\n\n                case 32:\n                  _context141.next = 37;\n                  break;\n\n                case 34:\n                  _context141.prev = 34;\n                  _context141.t1 = _context141[\"catch\"](0);\n                  vc.debug(\"Apply RTPSendEncodings failed.\");\n\n                case 37:\n                case \"end\":\n                  return _context141.stop();\n              }\n            }\n          }, _callee141, this, [[0, 34]]);\n        }));\n\n        function applySendEncodings(_x222, _x223) {\n          return _applySendEncodings2.apply(this, arguments);\n        }\n\n        return applySendEncodings;\n      }()\n    }, {\n      key: \"mungSendOfferSDP\",\n      value: function mungSendOfferSDP(e, t, i) {\n        var _this147 = this;\n\n        var r = qI.parse(e);\n        return Xi(t).call(t, function (e, t) {\n          var n;\n          var s = i[t],\n              o = Vs(n = r.mediaDescriptions).call(n, function (e) {\n            return e.attributes.mid === s;\n          });\n          o && (tf(o, e), function (e, t, i) {\n            var r;\n            if (Ta()) return;\n            if (\"video\" !== e.media.mediaType) return;\n            if (!(t instanceof CI)) return;\n            if (\"vp9\" !== i && \"vp8\" !== i) return;\n            if (\"vp8\" === i && !Fc(\"SIMULCAST\")) return;\n            if (void 0 === t._scalabiltyMode || t._scalabiltyMode.numSpatialLayers <= 1) return;\n            var n = \"vp8\" === i ? 2 : t._scalabiltyMode.numSpatialLayers,\n                s = e.attributes.ssrcs[0],\n                o = Vs(r = e.attributes.ssrcGroups).call(r, function (e) {\n              return \"FID\" === e.semantic && e.ssrcIds[0] === s.ssrcId;\n            }),\n                a = {\n              semantic: \"SIM\",\n              ssrcIds: [s.ssrcId]\n            };\n\n            for (var _t123 = 1; _t123 < n; _t123++) {\n              e.attributes.ssrcs.push({\n                ssrcId: s.ssrcId + _t123,\n                attributes: Fh(s.attributes)\n              }), a.ssrcIds.push(s.ssrcId + _t123), o && (e.attributes.ssrcs.push({\n                ssrcId: o.ssrcIds[1] + _t123,\n                attributes: Fh(s.attributes)\n              }), e.attributes.ssrcGroups.push({\n                semantic: \"FID\",\n                ssrcIds: [s.ssrcId + _t123, o.ssrcIds[1] + _t123]\n              }));\n            }\n\n            e.attributes.ssrcGroups.unshift(a);\n          }(o, e, _this147.store.codec));\n        }), qI.print(r);\n      }\n    }, {\n      key: \"bindStatsEvents\",\n      value: function bindStatsEvents() {\n        var _this148 = this;\n\n        this.statsFilter.onFirstAudioReceived = function (e) {\n          var t;\n          null === (t = _this148.onFirstAudioReceived) || void 0 === t || t.call(_this148, e);\n        }, this.statsFilter.onFirstVideoReceived = function (e) {\n          var t;\n          null === (t = _this148.onFirstVideoReceived) || void 0 === t || t.call(_this148, e);\n        }, this.statsFilter.onFirstAudioDecoded = function (e) {\n          var t;\n          null === (t = _this148.onFirstAudioDecoded) || void 0 === t || t.call(_this148, e);\n        }, this.statsFilter.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          null === (r = _this148.onFirstVideoDecoded) || void 0 === r || r.call(_this148, e, t, i);\n        };\n      }\n    }, {\n      key: \"unbindStatsEvents\",\n      value: function unbindStatsEvents() {\n        this.statsFilter.onFirstAudioReceived = void 0, this.statsFilter.onFirstVideoReceived = void 0, this.statsFilter.onFirstAudioDecoded = void 0, this.statsFilter.onFirstVideoDecoded = void 0;\n      }\n    }, {\n      key: \"applySimulcastForFirefox\",\n      value: function () {\n        var _applySimulcastForFirefox = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee142(e, t) {\n          var _a15, i, r, n, s, o, _c13, _d9, _e100, _t124, _i88;\n\n          return _regeneratorRuntime.wrap(function _callee142$(_context142) {\n            while (1) {\n              switch (_context142.prev = _context142.next) {\n                case 0:\n                  if (!(e.length === t.length)) {\n                    _context142.next = 13;\n                    break;\n                  }\n\n                  _a15 = 0;\n\n                case 2:\n                  if (!(_a15 < e.length)) {\n                    _context142.next = 13;\n                    break;\n                  }\n\n                  _c13 = e[_a15], _d9 = t[_a15];\n\n                  if (!(_d9 instanceof CI && !eo(i = _d9._hints).call(i, _l.LOW_STREAM) && null !== (r = _d9._encoderConfig) && void 0 !== r && r.bitrateMax && (null === (n = _d9._encoderConfig) || void 0 === n ? void 0 : n.bitrateMax) > 200 && null !== (s = _d9._scalabiltyMode) && void 0 !== s && s.numSpatialLayers && (null === (o = _d9._scalabiltyMode) || void 0 === o ? void 0 : o.numSpatialLayers) > 1 && \"vp8\" === this.store.codec)) {\n                    _context142.next = 10;\n                    break;\n                  }\n\n                  _e100 = {}, _t124 = {\n                    high: 1e3 * (_d9._encoderConfig.bitrateMax - 50),\n                    medium: 5e4\n                  };\n                  _e100.encodings = [{\n                    rid: \"m\",\n                    active: !0,\n                    maxBitrate: _t124.medium,\n                    scaleResolutionDownBy: 4\n                  }, {\n                    rid: \"h\",\n                    active: !0,\n                    maxBitrate: _t124.high\n                  }];\n                  _i88 = _c13.sender.getParameters();\n                  _context142.next = 10;\n                  return _c13.sender.setParameters(er(_i88, _e100));\n\n                case 10:\n                  _a15++;\n                  _context142.next = 2;\n                  break;\n\n                case 13:\n                case \"end\":\n                  return _context142.stop();\n              }\n            }\n          }, _callee142, this);\n        }));\n\n        function applySimulcastForFirefox(_x224, _x225) {\n          return _applySimulcastForFirefox.apply(this, arguments);\n        }\n\n        return applySimulcastForFirefox;\n      }()\n    }, {\n      key: \"applySimulcastEncodings\",\n      value: function () {\n        var _applySimulcastEncodings = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee143(e, t) {\n          var _i89, _r58, _t125, _n35, _s28, _o18;\n\n          return _regeneratorRuntime.wrap(function _callee143$(_context143) {\n            while (1) {\n              switch (_context143.prev = _context143.next) {\n                case 0:\n                  if (!(!Ta() && e.length === t.length)) {\n                    _context143.next = 13;\n                    break;\n                  }\n\n                  _i89 = 0;\n\n                case 2:\n                  if (!(_i89 < e.length)) {\n                    _context143.next = 13;\n                    break;\n                  }\n\n                  _r58 = t[_i89];\n\n                  if (!(_r58 instanceof CI && this.isVP8Simulcast(_r58))) {\n                    _context143.next = 10;\n                    break;\n                  }\n\n                  _t125 = e[_i89], _n35 = {}, _s28 = {\n                    high: 1e3 * (_r58._encoderConfig.bitrateMax - 50),\n                    medium: 5e4\n                  };\n                  _n35.encodings = [{\n                    active: !0,\n                    adaptivePtime: !1,\n                    networkPriority: \"high\",\n                    priority: \"high\",\n                    maxBitrate: _s28.high\n                  }, {\n                    active: !0,\n                    adaptivePtime: !1,\n                    networkPriority: \"low\",\n                    priority: \"low\",\n                    maxBitrate: _s28.medium,\n                    scaleResolutionDownBy: 4\n                  }];\n                  _o18 = _t125.sender.getParameters();\n                  _context143.next = 10;\n                  return _t125.sender.setParameters(er(_o18, _n35));\n\n                case 10:\n                  _i89++;\n                  _context143.next = 2;\n                  break;\n\n                case 13:\n                case \"end\":\n                  return _context143.stop();\n              }\n            }\n          }, _callee143, this);\n        }));\n\n        function applySimulcastEncodings(_x226, _x227) {\n          return _applySimulcastEncodings.apply(this, arguments);\n        }\n\n        return applySimulcastEncodings;\n      }()\n    }, {\n      key: \"isVP8Simulcast\",\n      value: function isVP8Simulcast(e) {\n        var t, i, r, n, s;\n        return e instanceof CI && Fc(\"SIMULCAST\") && \"vp8\" === this.store.codec && !eo(t = e._hints).call(t, _l.LOW_STREAM) && (null === (i = e._encoderConfig) || void 0 === i ? void 0 : i.bitrateMax) && (null === (r = e._encoderConfig) || void 0 === r ? void 0 : r.bitrateMax) > 200 && (null === (n = e._scalabiltyMode) || void 0 === n ? void 0 : n.numSpatialLayers) && (null === (s = e._scalabiltyMode) || void 0 === s ? void 0 : s.numSpatialLayers) > 1;\n      }\n    }, {\n      key: \"logSDPExchange\",\n      value: function logSDPExchange(e, t, i, r) {\n        var _this149 = this;\n\n        var n, s;\n        if ((Fc(\"UPLOAD_LOG\") || Fc(\"SDP_LOGGING\")) && (vc.upload(Xe(n = Xe(s = \"exchanging \".concat(i, \" \")).call(s, t, \" SDP during P2PConnection.\")).call(n, r, \"\\n\"), e), \"offer\" === t)) return function (e) {\n          _this149.logSDPExchange(e, \"answer\", \"local\" === i ? \"remote\" : \"local\", r);\n        };\n      }\n    }, {\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }, {\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(e) {\n        var _t$iceServers3, _t$iceServers4;\n\n        var t = {\n          iceServers: []\n        };\n        var i, r;\n        e.iceServers ? t.iceServers = e.iceServers : e.turnServer && \"off\" !== e.turnServer.mode && (qd(e.turnServer.servers) ? t.iceServers = e.turnServer.servers : (t.iceServers && (_t$iceServers3 = t.iceServers).push.apply(_t$iceServers3, _toConsumableArray(Uf.turnServerConfigToIceServers(e.turnServer.servers))), t.iceServers && e.turnServer.serversFromGateway && (_t$iceServers4 = t.iceServers).push.apply(_t$iceServers4, _toConsumableArray(Uf.turnServerConfigToIceServers(e.turnServer.serversFromGateway))), Xi(i = Xe(r = e.turnServer.servers).call(r, e.turnServer.serversFromGateway || [])).call(i, function (e) {\n          e.forceturn && (t.iceTransportPolicy = \"relay\");\n        })));\n        return t;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return Xi(e).call(e, function (e) {\n          if (e.security) {\n            var i;\n            if (e.tcpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(i = \"turns:\".concat(lh(e.turnServerURL), \":\")).call(i, e.tcpport, \"?transport=tcp\")\n            });\n          } else {\n            var r, n;\n            if (e.udpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(r = \"turn:\".concat(e.turnServerURL, \":\")).call(r, e.udpport, \"?transport=udp\")\n            });\n            if (e.tcpport) t.push({\n              username: e.username,\n              credential: e.password,\n              credentialType: \"password\",\n              urls: Xe(n = \"turn:\".concat(e.turnServerURL, \":\")).call(n, e.tcpport, \"?transport=tcp\")\n            });\n          }\n        }), t;\n      }\n    }]);\n\n    return Uf;\n  }(Pl);\n\n  function Qf(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee144() {\n      var i,\n          n,\n          _len24,\n          e,\n          _key24,\n          _args144 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee144$(_context144) {\n        while (1) {\n          switch (_context144.prev = _context144.next) {\n            case 0:\n              i = this.mutex;\n              _context144.next = 3;\n              return i.lock(\"Locking from P2PConnection.\".concat(t));\n\n            case 3:\n              n = _context144.sent;\n              _context144.prev = 4;\n\n              for (_len24 = _args144.length, e = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {\n                e[_key24] = _args144[_key24];\n              }\n\n              _context144.next = 8;\n              return r.apply(this, e);\n\n            case 8:\n              return _context144.abrupt(\"return\", _context144.sent);\n\n            case 9:\n              _context144.prev = 9;\n              n();\n              return _context144.finish(9);\n\n            case 12:\n            case \"end\":\n              return _context144.stop();\n          }\n        }\n      }, _callee144, this, [[4,, 9, 12]]);\n    })), i;\n  }\n\n  function Ff(e, t) {\n    var i = document.createElement(\"video\"),\n        r = document.createElement(\"canvas\");\n    i.setAttribute(\"style\", \"display:none\"), r.setAttribute(\"style\", \"display:none\"), i.setAttribute(\"muted\", \"\"), i.muted = !0, i.setAttribute(\"autoplay\", \"\"), i.autoplay = !0, i.setAttribute(\"playsinline\", \"\"), r.width = uh(t.width), r.height = uh(t.height);\n    var n = uh(t.framerate || 15);\n    document.body.append(i), document.body.append(r);\n    var s = e._mediaStreamTrack;\n    i.srcObject = new MediaStream([s]), i.play();\n    var o = r.getContext(\"2d\");\n    if (!o) throw new Ad(ad.UNEXPECTED_ERROR, \"can not get canvas context\");\n    var a = Ul(),\n        c = r.captureStream(a.supportRequestFrame ? 0 : n).getVideoTracks()[0],\n        d = gu(function () {\n      return function () {\n        if (i.paused && i.play(), i.videoHeight > 2 && i.videoWidth > 2) {\n          var _e101 = i.videoWidth,\n              _s29 = i.videoHeight / _e101,\n              _o19 = r.width * _s29;\n\n          var t, n, a;\n          Math.abs(_o19 - r.height) >= 2 && (vc.debug(\"adjust low stream resolution\", Xe(t = Xe(n = Xe(a = \"\".concat(r.width, \"x\")).call(a, r.height, \" -> \")).call(n, r.width, \"x\")).call(t, _o19)), r.height = _o19);\n        }\n\n        o.drawImage(i, 0, 0, r.width, r.height), c.requestFrame && c.requestFrame(), s !== e._mediaStreamTrack && (s = e._mediaStreamTrack, i.srcObject = new MediaStream([s]));\n      }();\n    }, n),\n        l = c.stop;\n    return c.stop = function () {\n      l.call(c), d(), i.remove(), r.width = 0, r.remove(), r = null, i = null, vc.debug(\"clean low stream renderer\");\n    }, c;\n  }\n\n  function xf(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Vf(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = xf(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = xf(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Object, Object, Array, Object, String, String, String, String]), Mf(\"design:returntype\", As)], Uf.prototype, \"connect\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Array]), Mf(\"design:returntype\", As)], Uf.prototype, \"stopSending\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [String, Array, String, Object]), Mf(\"design:returntype\", As)], Uf.prototype, \"receive\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Array]), Mf(\"design:returntype\", As)], Uf.prototype, \"stopReceiving\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [String]), Mf(\"design:returntype\", As)], Uf.prototype, \"muteRemote\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [String]), Mf(\"design:returntype\", As)], Uf.prototype, \"unmuteRemote\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Array]), Mf(\"design:returntype\", As)], Uf.prototype, \"muteLocal\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Array]), Mf(\"design:returntype\", As)], Uf.prototype, \"unmuteLocal\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", []), Mf(\"design:returntype\", As)], Uf.prototype, \"reEstablish\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", []), Mf(\"design:returntype\", void 0)], Uf.prototype, \"close\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [String, au]), Mf(\"design:returntype\", As)], Uf.prototype, \"updateEncoderConfig\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [String, au]), Mf(\"design:returntype\", As)], Uf.prototype, \"updateSendParameters\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [au, String]), Mf(\"design:returntype\", As)], Uf.prototype, \"replaceTrack\", null), Bf([Qf, Mf(\"design:type\", Function), Mf(\"design:paramtypes\", [Object, Object, Array, String, String]), Mf(\"design:returntype\", As)], Uf.prototype, \"restartICE\", null);\n\n  var Gf =\n  /*#__PURE__*/\n  function (_ru2) {\n    _inherits(Gf, _ru2);\n\n    function Gf(e, t, i, r) {\n      var _this150;\n\n      _classCallCheck(this, Gf);\n\n      var n, s, o;\n      _this150 = _possibleConstructorReturn(this, _getPrototypeOf(Gf).call(this, e, Xe(n = Xe(s = Xe(o = \"track-\".concat(e.kind, \"-\")).call(o, t, \"-\")).call(s, r.clientId, \"_\")).call(n, wh(5, \"\")))), _this150._isDestroyed = !1, _this150._userId = t, _this150._uintId = i, _this150.store = r;\n      return _this150;\n    }\n\n    _createClass(Gf, [{\n      key: \"getUserId\",\n      value: function getUserId() {\n        return this._userId;\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function _updateOriginMediaStreamTrack(e) {\n        this._originMediaStreamTrack = e, this._mediaStreamTrack = e, this._updatePlayerSource();\n      }\n    }, {\n      key: \"_destroy\",\n      value: function _destroy() {\n        this._isDestroyed = !0, vc.info(\"[\".concat(this.getTrackId(), \"] is destroyed\")), this.stop(), _get(_getPrototypeOf(Gf.prototype), \"close\", this).call(this);\n      }\n    }]);\n\n    return Gf;\n  }(ru);\n\n  var jf =\n  /*#__PURE__*/\n  function (_Gf) {\n    _inherits(jf, _Gf);\n\n    function jf(e, t, i, r) {\n      var _this151;\n\n      _classCallCheck(this, jf);\n\n      _this151 = _possibleConstructorReturn(this, _getPrototypeOf(jf).call(this, e, t, i, r)), _this151._videoVisibleTimer = null, _this151.trackMediaType = \"video\", _this151.updateMediaStreamTrackResolution();\n      return _this151;\n    }\n\n    _createClass(jf, [{\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead\");\n        }, \"remoteVideoTrackGetStatsWarning\");\n        return Ph(this, gl.GET_STATS) || Vf({}, tl);\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        var _this152 = this;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var i = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.REMOTE_VIDEO_TRACK_PLAY,\n          options: [this.getTrackId(), \"string\" == typeof e ? e : \"HTMLElement\", t]\n        });\n\n        if (\"string\" == typeof e) {\n          var _t126 = document.getElementById(e);\n\n          var r;\n          if (_t126) e = _t126;else vc.warning(Xe(r = \"[\".concat(this.getTrackId(), '] can not find \"#')).call(r, e, '\" element, use document.body')), e = document.body;\n        }\n\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), ge(t));\n        var n = Vf({\n          fit: \"cover\"\n        }, t, {\n          trackId: this.getTrackId(),\n          element: e\n        });\n        this._player ? this._player.updateConfig(n) : (this._player = new x_(n), this._player.updateVideoTrack(this._mediaStreamTrack), this._player.onFirstVideoFrameDecoded = function () {\n          _this152.store.subscribe(_this152.getUserId(), \"video\", void 0, void 0, performance.now()), _this152.emit(fl.FIRST_FRAME_DECODED);\n        }), this._player.play(this.store.sessionId || void 0), this._videoVisibleTimer && window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = window.setInterval(function () {\n          try {\n            var _e102 = _this152.getVideoElementVisibleStatus();\n\n            _this152.emit(fl.VIDEO_ELEMENT_VISIBLE_STATUS, _e102);\n          } catch (e) {}\n        }, Fc(\"CHECK_VIDEO_VISIBLE_INTERVAL\")), i.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.REMOTE_VIDEO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        if (!this._player) return e.onSuccess();\n        this._videoVisibleTimer && (window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = null), this._player.destroy(), this._player = void 0, vc.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")), e.onSuccess();\n      }\n    }, {\n      key: \"getCurrentFrameData\",\n      value: function getCurrentFrameData() {\n        return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n      }\n    }, {\n      key: \"updateMediaStreamTrackResolution\",\n      value: function updateMediaStreamTrackResolution() {\n        var _this153 = this;\n\n        bh(this._originMediaStreamTrack).then(function (_ref67) {\n          var _ref68 = _slicedToArray(_ref67, 2),\n              e = _ref68[0],\n              t = _ref68[1];\n\n          _this153._videoHeight = t, _this153._videoWidth = e;\n        }).catch(Oh);\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n      }\n    }, {\n      key: \"getVideoElementVisibleStatus\",\n      value: function getVideoElementVisibleStatus() {\n        try {\n          var e, t;\n\n          var _i90 = null == this || null === (e = this._player) || void 0 === e ? void 0 : e.getContainerElement(),\n              _r59 = {\n            track: this,\n            element: null == this || null === (t = this._player) || void 0 === t ? void 0 : t.getVideoElement(),\n            slot: null == _i90 ? void 0 : _i90.parentElement\n          },\n              _n36 = _r59.element,\n              _s30 = _r59.slot;\n\n          if (this.isPlaying && _n36 instanceof HTMLVideoElement && _s30 instanceof HTMLElement) {\n            var _e103 = gI.checkOneElementVisible(_n36),\n                _t127 = er({}, _e103);\n\n            if (!_t127.visible) {\n              iu.reportApiInvoke(null, {\n                tag: bd.TRACER,\n                name: Od.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,\n                options: [this.getTrackId()]\n              }).onSuccess(\"Not visible because of \".concat(_t127.reason));\n            }\n\n            return _t127;\n          }\n\n          return;\n        } catch (e) {\n          throw new Ad(ad.GET_VIDEO_ELEMENT_VISIBLE_ERROR, e.message);\n        }\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return !(!this._player || this._player.videoElementStatus !== dd.PLAYING);\n      }\n    }]);\n\n    return jf;\n  }(Gf);\n\n  var Kf =\n  /*#__PURE__*/\n  function (_Gf2) {\n    _inherits(Kf, _Gf2);\n\n    function Kf(e, t, i, r) {\n      var _this154;\n\n      _classCallCheck(this, Kf);\n\n      _this154 = _possibleConstructorReturn(this, _getPrototypeOf(Kf).call(this, e, t, i, r)), _this154.trackMediaType = \"audio\", _this154._useAudioElement = !0, _this154._volume = 100, _this154._source = new Iu(e, !0), _this154._source.once(Hd.RECEIVE_TRACK_BUFFER, function () {\n        _this154.emit(fl.FIRST_FRAME_DECODED);\n      });\n      return _this154;\n    }\n\n    _createClass(Kf, [{\n      key: \"setAudioFrameCallback\",\n      value: function setAudioFrameCallback(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4096;\n        if (!e) return this._source.removeAllListeners(Hd.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n        this._source.startGetAudioBuffer(t), this._source.removeAllListeners(Hd.ON_AUDIO_BUFFER), this._source.on(Hd.ON_AUDIO_BUFFER, function (t) {\n          return e(t);\n        });\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        var t = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.REMOTE_AUDIO_SET_VOLUME,\n          options: [this.getTrackId(), e]\n        }, 300);\n        this._volume = e, this._useAudioElement ? Lu.setVolume(this.getTrackId(), e) : this._source.setVolume(e / 100), t.onSuccess();\n      }\n    }, {\n      key: \"setPlaybackDevice\",\n      value: function () {\n        var _setPlaybackDevice2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee145(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee145$(_context145) {\n            while (1) {\n              switch (_context145.prev = _context145.next) {\n                case 0:\n                  t = iu.reportApiInvoke(null, {\n                    tag: bd.TRACER,\n                    name: Od.REMOTE_AUDIO_SET_OUTPUT_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._useAudioElement) {\n                    _context145.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n\n                case 3:\n                  _context145.prev = 3;\n                  _context145.next = 6;\n                  return Lu.setSinkID(this.getTrackId(), e);\n\n                case 6:\n                  _context145.next = 11;\n                  break;\n\n                case 8:\n                  _context145.prev = 8;\n                  _context145.t0 = _context145[\"catch\"](3);\n                  throw t.onError(_context145.t0), _context145.t0;\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context145.stop();\n              }\n            }\n          }, _callee145, this, [[3, 8]]);\n        }));\n\n        function setPlaybackDevice(_x228) {\n          return _setPlaybackDevice2.apply(this, arguments);\n        }\n\n        return setPlaybackDevice;\n      }()\n    }, {\n      key: \"getVolumeLevel\",\n      value: function getVolumeLevel() {\n        return this._source.getAccurateVolumeLevel();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead\");\n        }, \"remoteAudioTrackGetStatsWarning\");\n        return Ph(this, gl.GET_STATS) || Vf({}, $d);\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.REMOTE_AUDIO_TRACK_PLAY,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._useAudioElement ? (vc.debug(\"[\".concat(this.getTrackId(), \"] use audio element to play\")), Lu.play(this._mediaStreamTrack, this.getTrackId(), this._volume, this.store.sessionId || void 0)) : this._source.play(), e.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = iu.reportApiInvoke(null, {\n          tag: bd.TRACER,\n          name: Od.REMOTE_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._useAudioElement ? Lu.stop(this.getTrackId()) : this._source.stop(), e.onSuccess();\n      }\n    }, {\n      key: \"_destroy\",\n      value: function _destroy() {\n        _get(_getPrototypeOf(Kf.prototype), \"_destroy\", this).call(this), this._source.destroy();\n      }\n    }, {\n      key: \"_isFreeze\",\n      value: function _isFreeze() {\n        return this._source.isFreeze;\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && Lu.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return this._useAudioElement ? Lu.isPlaying(this.getTrackId()) : this._source.isPlayed;\n      }\n    }]);\n\n    return Kf;\n  }(Gf);\n\n  function Wf(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Hf(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = Wf(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = Wf(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var Yf =\n  /*#__PURE__*/\n  function (_Ll18) {\n    _inherits(Yf, _Ll18);\n\n    function Yf() {\n      var _this155;\n\n      _classCallCheck(this, Yf);\n\n      _this155 = _possibleConstructorReturn(this, _getPrototypeOf(Yf).call(this)), _this155.uploadUnplinkStarted = !1, _this155.uploadDownlinkStarted = !1;\n      return _this155;\n    }\n\n    _createClass(Yf, [{\n      key: \"startUploadUplinkStats\",\n      value: function startUploadUplinkStats() {\n        var _this156 = this;\n\n        this.uploadUnplinkStarted || (this.uploadUnplinkStarted = !0, this.uplinkStatsUploadInterval && window.clearInterval(this.uplinkStatsUploadInterval), this.uplinkStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this156.requestStats) || void 0 === e ? void 0 : e.call(_this156);\n          t && (_this156.uploadUplinkStats(t, _this156.lastStats), _this156.lastStats = t);\n        }, 3e3), this.uplinkStatsUploadSlowInterval && window.clearInterval(this.uplinkStatsUploadSlowInterval), this.uplinkStatsUploadSlowInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this156.requestStats) || void 0 === e ? void 0 : e.call(_this156);\n          t && _this156.uploadSlowUplinkStats(t);\n        }, 6e4), this.uplinkRelatedStatsUploadInterval && window.clearInterval(this.uplinkRelatedStatsUploadInterval), this.uplinkRelatedStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this156.requestStats) || void 0 === e ? void 0 : e.call(_this156);\n          t && _this156.uploadRelatedUplinkStats(t, _this156.lastStats), _this156.lastStats = t;\n        }, 1e3));\n      }\n    }, {\n      key: \"uploadUplinkStats\",\n      value: function uploadUplinkStats(e, t) {\n        var _this157 = this;\n\n        var i;\n        var r = (null === (i = this.requestLocalMedia) || void 0 === i ? void 0 : i.call(this)) || [];\n        Xi(r).call(r, function (_ref69) {\n          var _ref70 = _slicedToArray(_ref69, 2),\n              i = _ref70[0],\n              _ref70$ = _ref70[1],\n              r = _ref70$.track,\n              n = _ref70$.ssrcs;\n\n          switch (i) {\n            case Nl.LocalVideoLowTrack:\n            case Nl.LocalVideoTrack:\n              {\n                var _s31 = function (e, t, i) {\n                  var r, n;\n                  var s = Vs(r = t.videoSend).call(r, function (t) {\n                    return t.ssrc === e;\n                  });\n                  if (!s) return null;\n                  var o = {\n                    id: wh(10, \"\"),\n                    timestamp: new Date(t.timestamp).toISOString(),\n                    mediaType: \"video\",\n                    type: \"ssrc\",\n                    ssrc: s.ssrc.toString()\n                  };\n\n                  switch (o.A_vstd = i._originMediaStreamTrack && !i._originMediaStreamTrack.enabled || !i._mediaStreamTrack.enabled ? \"1\" : \"0\", s.sentFrame && (o.A_fhs = s.sentFrame.height.toString(), o.A_frs = s.sentFrame.frameRate.toString(), o.A_fws = s.sentFrame.width.toString()), s.adaptionChangeReason) {\n                    case \"none\":\n                      o.A_ac = \"0\";\n                      break;\n\n                    case \"cpu\":\n                      o.A_ac = \"1\";\n                      break;\n\n                    case \"bandwidth\":\n                      o.A_ac = \"2\";\n                      break;\n\n                    case \"other\":\n                      o.A_ac = \"3\";\n                  }\n\n                  return o.A_lvps = Cd[i._player ? i._player.videoElementStatus : \"uninit\"].toString(), o.A_nr = null === (n = s.nacksCount) || void 0 === n ? void 0 : n.toString(), s.avgEncodeMs && (o.A_aem = s.avgEncodeMs.toFixed(0).toString()), o;\n                }(n[0].ssrcId, e, r),\n                    _o20 = ph(n[0].ssrcId, e, t);\n\n                _s31 && Qh(function () {\n                  var e;\n                  return null === (e = _this157.requestUpload) || void 0 === e ? void 0 : e.call(_this157, jd.PUBLISH_STATS, {\n                    stream_type: i === Nl.LocalVideoLowTrack ? \"low\" : \"high\",\n                    stats: Hf({}, _s31, {}, _o20)\n                  });\n                });\n                break;\n              }\n\n            case Nl.LocalAudioTrack:\n              {\n                var _t128 = function (e, t, i) {\n                  var r;\n                  var n = Vs(r = t.audioSend).call(r, function (t) {\n                    return t.ssrc === e;\n                  });\n                  if (!n) return null;\n                  var s = {\n                    id: wh(10, \"\"),\n                    timestamp: new Date(t.timestamp).toISOString(),\n                    mediaType: \"audio\",\n                    type: \"ssrc\",\n                    ssrc: n.ssrc.toString()\n                  };\n                  return s.A_astd = i._originMediaStreamTrack.enabled && i._mediaStreamTrack.enabled ? \"0\" : \"1\", n.inputLevel ? s.A_ail = Math.round(100 * n.inputLevel).toString() : s.A_ail = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), s.A_apil = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), s;\n                }(n[0].ssrcId, e, r);\n\n                _t128 && Qh(function () {\n                  var e;\n                  return null === (e = _this157.requestUpload) || void 0 === e ? void 0 : e.call(_this157, jd.PUBLISH_STATS, {\n                    stream_type: \"high\",\n                    stats: _t128\n                  });\n                });\n                break;\n              }\n          }\n\n          var s = function (e) {\n            var t = {\n              id: \"bweforvideo\",\n              timestamp: new Date(e.timestamp).toISOString(),\n              type: \"VideoBwe\"\n            };\n            return e.bitrate.retransmit && (t.A_rb = e.bitrate.retransmit.toString()), e.bitrate.targetEncoded && (t.A_teb = e.bitrate.targetEncoded.toString()), t.A_aeb = e.bitrate.actualEncoded.toString(), t.A_tb = e.bitrate.transmit.toString(), void 0 !== e.sendBandwidth && (t.A_asb = e.sendBandwidth.toString()), t;\n          }(e);\n\n          s && Qh(function () {\n            var e;\n            return null === (e = _this157.requestUpload) || void 0 === e ? void 0 : e.call(_this157, jd.PUBLISH_STATS, {\n              stream_type: i === Nl.LocalVideoLowTrack ? \"low\" : \"high\",\n              stats: s\n            });\n          });\n        });\n      }\n    }, {\n      key: \"uploadSlowUplinkStats\",\n      value: function uploadSlowUplinkStats(e) {\n        var _this158 = this;\n\n        var t, i;\n        var r = Fr(t = (null === (i = this.requestLocalMedia) || void 0 === i ? void 0 : i.call(this)) || []).call(t, function (_ref71) {\n          var _ref72 = _slicedToArray(_ref71, 1),\n              e = _ref72[0];\n\n          return e === Nl.LocalVideoLowTrack || e === Nl.LocalVideoTrack;\n        });\n        Xi(r).call(r, function (_ref73) {\n          var _ref74 = _slicedToArray(_ref73, 2),\n              t = _ref74[0],\n              i = _ref74[1].ssrcs;\n\n          var r = ph(i[0].ssrcId, e);\n          r && Qh(function () {\n            var e;\n            return null === (e = _this158.requestUpload) || void 0 === e ? void 0 : e.call(_this158, jd.PUBLISH_STATS, {\n              stream_type: t === Nl.LocalVideoLowTrack ? \"low\" : \"high\",\n              stats: r\n            });\n          });\n        });\n      }\n    }, {\n      key: \"uploadRelatedUplinkStats\",\n      value: function uploadRelatedUplinkStats(e, t) {\n        var _this159 = this;\n\n        var i, r;\n        var n = Fr(i = (null === (r = this.requestLocalMedia) || void 0 === r ? void 0 : r.call(this)) || []).call(i, function (_ref75) {\n          var _ref76 = _slicedToArray(_ref75, 1),\n              e = _ref76[0];\n\n          return e === Nl.LocalVideoLowTrack || e === Nl.LocalVideoTrack;\n        });\n        Xi(n).call(n, function (_ref77) {\n          var _ref78 = _slicedToArray(_ref77, 2),\n              t = _ref78[0],\n              i = _ref78[1].ssrcs;\n\n          var r = function (e, t) {\n            var i;\n            var r = Vs(i = t.videoSend).call(i, function (t) {\n              return t.ssrc === e;\n            });\n            return r ? {\n              mediaType: \"video\",\n              isVideoMute: !1,\n              frameRateInput: r.inputFrame && r.inputFrame.frameRate.toString(),\n              frameRateSent: r.sentFrame && r.sentFrame.frameRate.toString(),\n              googRtt: r.rttMs.toString()\n            } : null;\n          }(i[0].ssrcId, e);\n\n          r && Qh(function () {\n            var e;\n            null === (e = _this159.requestUpload) || void 0 === e || e.call(_this159, jd.PUBLISH_RELATED_STATS, {\n              stream_type: t === Nl.LocalVideoLowTrack ? \"low\" : \"high\",\n              stats: r\n            });\n          });\n        });\n      }\n    }, {\n      key: \"stopUploadUplinkStats\",\n      value: function stopUploadUplinkStats() {\n        this.uploadUnplinkStarted && (this.uploadUnplinkStarted = !1, this.uplinkStatsUploadInterval && window.clearInterval(this.uplinkStatsUploadInterval), this.uplinkRelatedStatsUploadInterval && window.clearInterval(this.uplinkRelatedStatsUploadInterval), this.uplinkStatsUploadInterval = void 0, this.uplinkRelatedStatsUploadInterval = void 0);\n      }\n    }, {\n      key: \"startUploadDownlinkStats\",\n      value: function startUploadDownlinkStats() {\n        var _this160 = this;\n\n        this.uploadDownlinkStarted || (this.uploadDownlinkStarted = !0, this.downlinkStatsUploadInterval && window.clearInterval(this.downlinkStatsUploadInterval), this.downlinkStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this160.requestStats) || void 0 === e ? void 0 : e.call(_this160);\n          t && (_this160.uploadDownlinkStats(t, _this160.lastStats), _this160.lastStats = t);\n        }, 3e3), this.downlinkStatsUploadSlowInterval && window.clearInterval(this.downlinkStatsUploadSlowInterval), this.downlinkStatsUploadSlowInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this160.requestStats) || void 0 === e ? void 0 : e.call(_this160);\n          t && _this160.uploadSlowDownlinkStats(t);\n        }, 6e4), this.downlinkRelatedStatsUploadInterval && window.clearInterval(this.downlinkRelatedStatsUploadInterval), this.downlinkRelatedStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this160.requestStats) || void 0 === e ? void 0 : e.call(_this160);\n          t && (_this160.uploadRelatedDownlinkStats(t, _this160.lastStats), _this160.lastStats = t);\n        }, 1e3));\n      }\n    }, {\n      key: \"uploadDownlinkStats\",\n      value: function uploadDownlinkStats(e, t) {\n        var _this161 = this;\n\n        var i;\n        var r = (null === (i = this.requestRemoteMedia) || void 0 === i ? void 0 : i.call(this)) || [];\n        Xi(r).call(r, function (_ref79) {\n          var _ref80 = _slicedToArray(_ref79, 2),\n              t = _ref80[0],\n              i = _ref80[1];\n\n          if (i.has(wl.VIDEO) && t.videoTrack) {\n            var _i91 = t.videoTrack ? function (e, t, i) {\n              var r;\n              var n = Vs(r = t.videoRecv).call(r, function (t) {\n                return t.ssrc === e;\n              });\n              if (!n) return null;\n              var s = {\n                id: wh(10, \"\"),\n                timestamp: new Date(t.timestamp).toISOString(),\n                mediaType: \"video\",\n                type: \"ssrc\",\n                ssrc: n.ssrc.toString()\n              };\n              var o;\n              return s.bytesReceived = n.bytes.toString(), s.packetsLost = n.packetsLost.toString(), s.packetsReceived = n.packets.toString(), n.framesRateFirefox && (s.A_frr = n.framesRateFirefox.toString()), n.receivedFrame && (s.A_frr = n.receivedFrame.frameRate.toString()), s.A_frd = n.decodeFrameRate.toString(), n.outputFrame && (s.A_fro = n.outputFrame.frameRate.toString()), void 0 !== n.jitterBufferMs && (s.A_jbm = Math.floor(n.jitterBufferMs).toString()), void 0 !== n.currentDelayMs && (s.A_cdm = Math.floor(n.currentDelayMs).toString()), s.A_fs = n.firsCount.toString(), s.A_ns = n.nacksCount.toString(), s.A_ps = n.plisCount.toString(), i && (s.A_vrtd = i._originMediaStreamTrack.enabled && i._mediaStreamTrack.enabled ? \"0\" : \"1\"), i._player && i._player.freezeTimeCounterList.length > 0 && (s.A_vrft = Ss(o = i._player.freezeTimeCounterList).call(o, 0, 1)[0].toString()), s.A_rvps = Cd[i._player ? i._player.videoElementStatus : \"uninit\"].toString(), s;\n            }(t._videoSSRC, e, t.videoTrack) : void 0;\n\n            _i91 && Qh(function () {\n              var e;\n              return null === (e = _this161.requestUpload) || void 0 === e ? void 0 : e.call(_this161, jd.SUBSCRIBE_STATS, {\n                stream_id: t.uid,\n                stats: _i91\n              });\n            });\n          }\n\n          if (i.has(wl.AUDIO) && t.audioTrack) {\n            var _i92 = t.audioTrack ? function (e, t, i) {\n              var r;\n              var n = Vs(r = t.audioRecv).call(r, function (t) {\n                return t.ssrc === e;\n              });\n              if (!n) return null;\n              var s = {\n                id: wh(10, \"\"),\n                timestamp: new Date(t.timestamp).toISOString(),\n                mediaType: \"audio\",\n                type: \"ssrc\",\n                ssrc: n.ssrc.toString()\n              };\n              return s.bytesReceived = n.bytes.toString(), s.packetsLost = n.packetsLost.toString(), s.packetsReceived = n.packets.toString(), n.outputLevel ? s.A_aol = Math.round(100 * n.outputLevel).toString() : s.A_aol = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), s.A_apol = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), i && (s.A_artd = i._originMediaStreamTrack.enabled && i._mediaStreamTrack.enabled ? \"0\" : \"1\"), s.A_jr = n.jitterMs.toString(), s.A_jbm = Math.floor(n.jitterBufferMs).toString(), s.A_cdm = Math.floor(n.jitterBufferMs).toString(), s.A_raps = Cd[Lu.getPlayerState(i.getTrackId())].toString(), s;\n            }(t._audioSSRC, e, t.audioTrack) : void 0;\n\n            _i92 && Qh(function () {\n              var e;\n              return null === (e = _this161.requestUpload) || void 0 === e ? void 0 : e.call(_this161, jd.SUBSCRIBE_STATS, {\n                stream_id: t.uid,\n                stats: _i92\n              });\n            });\n          }\n        });\n      }\n    }, {\n      key: \"uploadSlowDownlinkStats\",\n      value: function uploadSlowDownlinkStats(e) {}\n    }, {\n      key: \"uploadRelatedDownlinkStats\",\n      value: function uploadRelatedDownlinkStats(e, t) {\n        var _this162 = this;\n\n        var i;\n        var r = (null === (i = this.requestRemoteMedia) || void 0 === i ? void 0 : i.call(this)) || [];\n        Xi(r).call(r, function (_ref81) {\n          var _ref82 = _slicedToArray(_ref81, 2),\n              i = _ref82[0],\n              r = _ref82[1];\n\n          if (r.has(wl.VIDEO) && i.videoTrack) {\n            var n;\n\n            var _r60 = !0 === (i._videoSSRC && (null === (n = _this162.requestVideoIsReady) || void 0 === n ? void 0 : n.call(_this162, i._videoSSRC)) || !1),\n                _s32 = function (e, t, i, r, n, s) {\n              var o, a;\n              var c = Vs(o = i.videoRecv).call(o, function (t) {\n                return t.ssrc === e;\n              }),\n                  d = n ? Vs(a = n.videoRecv).call(a, function (t) {\n                return t.ssrc === e;\n              }) : void 0;\n              if (!c) return null;\n              var l = qu.isRemoteVideoFreeze(s, c, d) && t,\n                  A = {\n                mediaType: \"video\",\n                isVideoMute: !1,\n                peerId: r,\n                frameRateReceived: c.receivedFrame && c.receivedFrame.frameRate.toString(),\n                frameRateDecoded: c.decodedFrame && c.decodedFrame.frameRate.toString(),\n                isFreeze: l,\n                bytesReceived: c.bytes.toString(),\n                packetsReceived: c.packets.toString(),\n                packetsLost: c.packetsLost.toString()\n              };\n              return c.framesRateFirefox && (A.frameRateDecoded = c.framesRateFirefox.toString(), A.frameRateReceived = c.framesRateFirefox.toString()), A;\n            }(i._videoSSRC, _r60, e, i.uid, t, i.videoTrack);\n\n            _s32 && Qh(function () {\n              var e;\n              null === (e = _this162.requestUpload) || void 0 === e || e.call(_this162, jd.SUBSCRIBE_RELATED_STATS, {\n                stream_id: i.uid,\n                stats: _s32\n              });\n            });\n          }\n\n          if (r.has(wl.AUDIO) && i.audioTrack) {\n            var _t129 = function (e, t, i, r) {\n              var n;\n              var s = Vs(n = t.audioRecv).call(n, function (t) {\n                return t.ssrc === e;\n              });\n              if (!s) return null;\n              var o = qu.isRemoteAudioFreeze(r);\n              return {\n                mediaType: \"audio\",\n                isAudioMute: !1,\n                peerId: i,\n                googJitterReceived: s.jitterMs.toString(),\n                isFreeze: o,\n                bytesReceived: s.bytes.toString(),\n                packetsReceived: s.packets.toString(),\n                packetsLost: s.packetsLost.toString(),\n                frameReceived: s.receivedFrames.toString(),\n                frameDropped: s.droppedFrames.toString()\n              };\n            }(i._audioSSRC, e, i.uid, i.audioTrack);\n\n            _t129 && Qh(function () {\n              var e;\n              null === (e = _this162.requestUpload) || void 0 === e || e.call(_this162, jd.SUBSCRIBE_RELATED_STATS, {\n                stream_id: i.uid,\n                stats: _t129\n              });\n            });\n          }\n        });\n      }\n    }, {\n      key: \"stopUploadDownlinkStats\",\n      value: function stopUploadDownlinkStats() {\n        this.uploadDownlinkStarted && (this.uploadDownlinkStarted = !1, this.downlinkStatsUploadInterval && window.clearInterval(this.downlinkStatsUploadInterval), this.downlinkRelatedStatsUploadInterval && window.clearInterval(this.downlinkRelatedStatsUploadInterval), this.downlinkStatsUploadInterval = void 0, this.downlinkRelatedStatsUploadInterval = void 0);\n      }\n    }]);\n\n    return Yf;\n  }(Ll);\n\n  function qf(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Jf(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = qf(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = qf(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var Xf = function Xf(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      zf = function zf(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var Zf =\n  /*#__PURE__*/\n  function (_Ll19) {\n    _inherits(Zf, _Ll19);\n\n    function Zf(e, t) {\n      var _this163;\n\n      _classCallCheck(this, Zf);\n\n      _this163 = _possibleConstructorReturn(this, _getPrototypeOf(Zf).call(this)), _this163.localTrackMap = new Li(), _this163.remoteUserMap = new Li(), _this163.pendingLocalTracks = [], _this163.pendingRemoteTracks = [], _this163.isPlanB = !1, _this163.iceFailedCount = 0, _this163.dtlsFailedCount = 0, _this163.mutex = new su(\"P2PChannel-mutex\"), _this163._state = Ol.Disconnected, _this163.handleMuteLocalTrack =\n      /*#__PURE__*/\n      function () {\n        var _ref83 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee146(e, t, i) {\n          var r, _n37, _s33;\n\n          return _regeneratorRuntime.wrap(function _callee146$(_context146) {\n            while (1) {\n              switch (_context146.prev = _context146.next) {\n                case 0:\n                  _context146.next = 2;\n                  return _this163.mutex.lock(\"Locking from P2PChannel.handleMuteLocalTrack\");\n\n                case 2:\n                  r = _context146.sent;\n                  _context146.prev = 3;\n\n                  if (_this163.connection) {\n                    _context146.next = 6;\n                    break;\n                  }\n\n                  return _context146.abrupt(\"return\", void i(new Ad(ad.INVALID_OPERATION, \"Cannot call P2PChannel.handleMuteLocalTrack before connection established.\")));\n\n                case 6:\n                  _context146.next = 8;\n                  return _this163.waitTillConnected();\n\n                case 8:\n                  _n37 = _this163.filterTobeMutedTracks(e);\n\n                  if (!(0 === _n37.length)) {\n                    _context146.next = 11;\n                    break;\n                  }\n\n                  return _context146.abrupt(\"return\", void t());\n\n                case 11:\n                  _context146.next = 13;\n                  return _this163.connection.muteLocal(Es(_n37).call(_n37, function (_ref84) {\n                    var _ref85 = _slicedToArray(_ref84, 2),\n                        e = _ref85[1].id;\n\n                    return e;\n                  }));\n\n                case 13:\n                  _s33 = _this163.createMuteMessage(_n37);\n                  _context146.next = 16;\n                  return Lh(_assertThisInitialized(_assertThisInitialized(_this163)), bl.RequestMuteLocal, _s33);\n\n                case 16:\n                  t();\n                  _context146.next = 22;\n                  break;\n\n                case 19:\n                  _context146.prev = 19;\n                  _context146.t0 = _context146[\"catch\"](3);\n                  i(_context146.t0);\n\n                case 22:\n                  _context146.prev = 22;\n                  r();\n                  return _context146.finish(22);\n\n                case 25:\n                case \"end\":\n                  return _context146.stop();\n              }\n            }\n          }, _callee146, this, [[3, 19, 22, 25]]);\n        }));\n\n        return function (_x229, _x230, _x231) {\n          return _ref83.apply(this, arguments);\n        };\n      }(), _this163.handleUnmuteLocalTrack =\n      /*#__PURE__*/\n      function () {\n        var _ref86 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee147(e, t, i) {\n          var r, _n38, _s34;\n\n          return _regeneratorRuntime.wrap(function _callee147$(_context147) {\n            while (1) {\n              switch (_context147.prev = _context147.next) {\n                case 0:\n                  _context147.next = 2;\n                  return _this163.mutex.lock(\"Locking from P2PChannel.handleUnmuteLocalTrack\");\n\n                case 2:\n                  r = _context147.sent;\n                  _context147.prev = 3;\n\n                  if (_this163.connection) {\n                    _context147.next = 6;\n                    break;\n                  }\n\n                  return _context147.abrupt(\"return\", void i(new Ad(ad.INVALID_OPERATION, \"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.\")));\n\n                case 6:\n                  _context147.next = 8;\n                  return _this163.waitTillConnected();\n\n                case 8:\n                  _n38 = _this163.filterTobeUnmutedTracks(e);\n\n                  if (!(0 === _n38.length)) {\n                    _context147.next = 11;\n                    break;\n                  }\n\n                  return _context147.abrupt(\"return\", void t());\n\n                case 11:\n                  _context147.next = 13;\n                  return _this163.connection.unmuteLocal(Es(_n38).call(_n38, function (_ref87) {\n                    var _ref88 = _slicedToArray(_ref87, 2),\n                        e = _ref88[1].id;\n\n                    return e;\n                  }));\n\n                case 13:\n                  _s34 = _this163.createUnmuteMessage(_n38);\n                  _context147.next = 16;\n                  return Lh(_assertThisInitialized(_assertThisInitialized(_this163)), bl.RequestUnmuteLocal, _s34);\n\n                case 16:\n                  t();\n                  _context147.next = 22;\n                  break;\n\n                case 19:\n                  _context147.prev = 19;\n                  _context147.t0 = _context147[\"catch\"](3);\n                  i(_context147.t0);\n\n                case 22:\n                  _context147.prev = 22;\n                  r();\n                  return _context147.finish(22);\n\n                case 25:\n                case \"end\":\n                  return _context147.stop();\n              }\n            }\n          }, _callee147, this, [[3, 19, 22, 25]]);\n        }));\n\n        return function (_x232, _x233, _x234) {\n          return _ref86.apply(this, arguments);\n        };\n      }(), _this163.handleUpdateVideoEncoder =\n      /*#__PURE__*/\n      function () {\n        var _ref89 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee148(e, t, i) {\n          var r, _i93, _n39, _s35;\n\n          return _regeneratorRuntime.wrap(function _callee148$(_context148) {\n            while (1) {\n              switch (_context148.prev = _context148.next) {\n                case 0:\n                  _context148.next = 2;\n                  return _this163.mutex.lock(\"Locking from P2PChannel.handleSetVideoEncoder\");\n\n                case 2:\n                  r = _context148.sent;\n                  _context148.prev = 3;\n                  _i93 = _this163.localTrackMap.get(Nl.LocalVideoTrack);\n\n                  if (!(!_this163.connection || !_i93 || _i93.track !== e)) {\n                    _context148.next = 7;\n                    break;\n                  }\n\n                  return _context148.abrupt(\"return\", void t());\n\n                case 7:\n                  _context148.next = 9;\n                  return _this163.waitTillConnected();\n\n                case 9:\n                  _n39 = _i93.id, _s35 = _i93.track;\n                  _context148.next = 12;\n                  return _this163.connection.updateSendParameters(_n39, _s35);\n\n                case 12:\n                  _context148.next = 14;\n                  return _this163.connection.updateEncoderConfig(_n39, _s35);\n\n                case 14:\n                  t();\n                  _context148.next = 20;\n                  break;\n\n                case 17:\n                  _context148.prev = 17;\n                  _context148.t0 = _context148[\"catch\"](3);\n                  i(_context148.t0);\n\n                case 20:\n                  _context148.prev = 20;\n                  r();\n                  return _context148.finish(20);\n\n                case 23:\n                case \"end\":\n                  return _context148.stop();\n              }\n            }\n          }, _callee148, this, [[3, 17, 20, 23]]);\n        }));\n\n        return function (_x235, _x236, _x237) {\n          return _ref89.apply(this, arguments);\n        };\n      }(), _this163.handleSetOptimizationMode =\n      /*#__PURE__*/\n      function () {\n        var _ref90 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee149(e, t, i) {\n          var r, _i94, _n40, _s36;\n\n          return _regeneratorRuntime.wrap(function _callee149$(_context149) {\n            while (1) {\n              switch (_context149.prev = _context149.next) {\n                case 0:\n                  _context149.next = 2;\n                  return _this163.mutex.lock(\"Locking from P2PChannel.handleSetOptimizationMode\");\n\n                case 2:\n                  r = _context149.sent;\n                  _context149.prev = 3;\n                  _i94 = _this163.localTrackMap.get(Nl.LocalVideoTrack);\n\n                  if (!(!_this163.connection || !_i94 || _i94.track !== e)) {\n                    _context149.next = 7;\n                    break;\n                  }\n\n                  return _context149.abrupt(\"return\");\n\n                case 7:\n                  _context149.next = 9;\n                  return _this163.waitTillConnected();\n\n                case 9:\n                  _n40 = _i94.id, _s36 = _i94.track;\n                  _context149.next = 12;\n                  return _this163.connection.updateSendParameters(_n40, _s36);\n\n                case 12:\n                  t();\n                  _context149.next = 18;\n                  break;\n\n                case 15:\n                  _context149.prev = 15;\n                  _context149.t0 = _context149[\"catch\"](3);\n                  i(_context149.t0);\n\n                case 18:\n                  _context149.prev = 18;\n                  r();\n                  return _context149.finish(18);\n\n                case 21:\n                case \"end\":\n                  return _context149.stop();\n              }\n            }\n          }, _callee149, this, [[3, 15, 18, 21]]);\n        }));\n\n        return function (_x238, _x239, _x240) {\n          return _ref90.apply(this, arguments);\n        };\n      }(), _this163.handleReplaceTrack =\n      /*#__PURE__*/\n      function () {\n        var _ref91 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee150(e, t, i) {\n          var r, n, _i95, _t130;\n\n          return _regeneratorRuntime.wrap(function _callee150$(_context150) {\n            while (1) {\n              switch (_context150.prev = _context150.next) {\n                case 0:\n                  _context150.prev = 0;\n                  _i95 = Vs(r = BA(kA(n = _this163.localTrackMap).call(n))).call(r, function (_ref92) {\n                    var _ref93 = _slicedToArray(_ref92, 2),\n                        t = _ref93[1].track;\n\n                    return e === t;\n                  });\n\n                  if (!(!_this163.connection || !_i95)) {\n                    _context150.next = 4;\n                    break;\n                  }\n\n                  return _context150.abrupt(\"return\", void t());\n\n                case 4:\n                  _context150.next = 6;\n                  return _this163.waitTillConnected();\n\n                case 6:\n                  _context150.next = 8;\n                  return _this163.connection.replaceTrack(e, _i95[1].id);\n\n                case 8:\n                  if (!_this163.isPlanB) {\n                    _context150.next = 11;\n                    break;\n                  }\n\n                  _t130 = _i95[1];\n                  _t130.id = e._mediaStreamTrack.id, _this163.localTrackMap.set(_i95[0], _t130);\n\n                case 11:\n                  t();\n                  _context150.next = 17;\n                  break;\n\n                case 14:\n                  _context150.prev = 14;\n                  _context150.t0 = _context150[\"catch\"](0);\n                  i(_context150.t0);\n\n                case 17:\n                case \"end\":\n                  return _context150.stop();\n              }\n            }\n          }, _callee150, this, [[0, 14]]);\n        }));\n\n        return function (_x241, _x242, _x243) {\n          return _ref91.apply(this, arguments);\n        };\n      }(), _this163.handleGetLocalVideoStats = function (e) {\n        e(_this163.statsCollector.getLocalVideoTrackStats());\n      }, _this163.handleGetLocalAudioStats = function (e) {\n        e(_this163.statsCollector.getLocalAudioTrackStats());\n      }, _this163.handleGetRemoteVideoStats = function (e) {\n        return _this163.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid];\n      }, _this163.handleGetRemoteAudioStats = function (e) {\n        return _this163.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid];\n      }, _this163.store = e, _this163.statsCollector = t, _this163.statsCollector.addP2PChannel(_assertThisInitialized(_assertThisInitialized(_this163))), _this163.statsUploader = new Yf(), _this163.bindStatsUploaderEvents(), _this163.isPlanB = !Ul().supportUnifiedPlan || Fc(\"CHROME_FORCE_PLAN_B\") && ka();\n      return _this163;\n    }\n\n    _createClass(Zf, [{\n      key: \"startP2PConnection\",\n      value: function () {\n        var _startP2PConnection = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee151(e) {\n          return _regeneratorRuntime.wrap(function _callee151$(_context151) {\n            while (1) {\n              switch (_context151.prev = _context151.next) {\n                case 0:\n                  return _context151.abrupt(\"return\", (this.state = Ol.New, this.connection = this.isPlanB ? new bf(e, this.store) : new Uf(e, this.store), this.bindConnectionEvents(this.connection), this.store.peerConnectionStart(), this.connection.establish()));\n\n                case 1:\n                case \"end\":\n                  return _context151.stop();\n              }\n            }\n          }, _callee151, this);\n        }));\n\n        function startP2PConnection(_x244) {\n          return _startP2PConnection.apply(this, arguments);\n        }\n\n        return startP2PConnection;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect6 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee152(e, t, i, r, n, s, o, a) {\n          return _regeneratorRuntime.wrap(function _callee152$(_context152) {\n            while (1) {\n              switch (_context152.prev = _context152.next) {\n                case 0:\n                  if (this.connection) {\n                    _context152.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .\");\n\n                case 2:\n                  _context152.next = 4;\n                  return this.connection.connect(e, t, i, r, n, s, o, a);\n\n                case 4:\n                  this.state = Ol.Connected;\n\n                case 5:\n                case \"end\":\n                  return _context152.stop();\n              }\n            }\n          }, _callee152, this);\n        }));\n\n        function connect(_x245, _x246, _x247, _x248, _x249, _x250, _x251, _x252) {\n          return _connect6.apply(this, arguments);\n        }\n\n        return connect;\n      }()\n    }, {\n      key: \"publish\",\n      value: function publish(e, t, i) {\n        var r = this;\n        return VI(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee153() {\n          var n, _s37, s, _t131;\n\n          return _regeneratorRuntime.wrap(function _callee153$(_context153) {\n            while (1) {\n              switch (_context153.prev = _context153.next) {\n                case 0:\n                  _context153.next = 2;\n                  return GI(r.mutex.lock(\"From P2PChannel.publish\"));\n\n                case 2:\n                  n = _context153.sent;\n\n                  if (!r.connection) {\n                    _context153.next = 17;\n                    break;\n                  }\n\n                  r.store.pubId = r.store.pubId + 1, Wu.markPublishStart(r.store.clientId, r.store.pubId);\n                  _context153.prev = 5;\n                  _context153.next = 8;\n                  return GI(r.waitTillConnected());\n\n                case 8:\n                  _s37 = r.filterTobePublishedTracks(e, t, i);\n\n                  if (!(0 === _s37.length)) {\n                    _context153.next = 11;\n                    break;\n                  }\n\n                  return _context153.abrupt(\"return\");\n\n                case 11:\n                  return _context153.delegateYield(YI(HI(r.doPublish(r.connection, _s37)), GI), \"t0\", 12);\n\n                case 12:\n                  _context153.prev = 12;\n                  n();\n                  return _context153.finish(12);\n\n                case 15:\n                  _context153.next = 22;\n                  break;\n\n                case 17:\n                  if (!(r.state === Ol.Disconnected)) {\n                    _context153.next = 19;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"PeerConnection already disconnected.\");\n\n                case 19:\n                  r.throwIfTrackTypeNotMatch(e);\n                  _t131 = Fr(e).call(e, function (e) {\n                    var t;\n                    return -1 === Os(t = r.pendingLocalTracks).call(t, e);\n                  });\n                  r.pendingLocalTracks = Xe(s = r.pendingLocalTracks).call(s, _t131);\n\n                case 22:\n                case \"end\":\n                  return _context153.stop();\n              }\n            }\n          }, _callee153, this, [[5,, 12, 15]]);\n        }))();\n      }\n    }, {\n      key: \"doPublish\",\n      value: function doPublish(e, t) {\n        var i = this;\n        return VI(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee154() {\n          var r, n, s, o, a, c;\n          return _regeneratorRuntime.wrap(function _callee154$(_context154) {\n            while (1) {\n              switch (_context154.prev = _context154.next) {\n                case 0:\n                  Xi(t).call(t, function (_ref94) {\n                    var e = _ref94.track,\n                        t = _ref94.type;\n                    var r = performance.now();\n                    i.store.publish(e.getTrackId(), t === Nl.LocalAudioTrack ? \"audio\" : \"video\", r);\n                  });\n                  _context154.next = 3;\n                  return GI(e.send(Es(t).call(t, function (_ref95) {\n                    var e = _ref95.track;\n                    return e;\n                  }), i.store.codec));\n\n                case 3:\n                  r = _context154.sent;\n                  _context154.next = 6;\n                  return GI(r.next());\n\n                case 6:\n                  n = _context154.sent.value;\n                  s = i.createGatewayPublishMessage(t, n);\n                  _context154.prev = 8;\n                  _context154.next = 11;\n                  return s;\n\n                case 11:\n                  o = _context154.sent;\n                  _context154.next = 17;\n                  break;\n\n                case 14:\n                  _context154.prev = 14;\n                  _context154.t0 = _context154[\"catch\"](8);\n                  throw r.throw(_context154.t0), (null == _context154.t0 ? void 0 : _context154.t0.code) === ad.WS_ABORT && Xi(t).call(t, function (_ref96) {\n                    var e = _ref96.track;\n                    var t;\n                    -1 === Os(t = i.pendingLocalTracks).call(t, e) && i.pendingLocalTracks.push(e);\n                  }), _context154.t0;\n\n                case 17:\n                  a = i.mapPubResToRemoteConfig(s, o);\n                  _context154.next = 20;\n                  return GI(r.next(a));\n\n                case 20:\n                  c = _context154.sent.value;\n                  Xi(t).call(t, function (_ref97) {\n                    var e = _ref97.type;\n                    i.statsCollector.addLocalStats(e);\n                  }), i.bindLocalTrackEvents(t), i.assignLocalTracks(t, c), i.statsUploader.startUploadUplinkStats(), Xi(t).call(t, function (_ref98) {\n                    var e = _ref98.track,\n                        t = _ref98.type;\n                    var r = performance.now();\n                    i.store.publish(e.getTrackId(), t === Nl.LocalAudioTrack ? \"audio\" : \"video\", void 0, r);\n                  });\n\n                case 22:\n                case \"end\":\n                  return _context154.stop();\n              }\n            }\n          }, _callee154, this, [[8, 14]]);\n        }))();\n      }\n    }, {\n      key: \"publishLowStream\",\n      value: function publishLowStream(e) {\n        var t = this;\n        return VI(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee155() {\n          var i, _n41, _s38, r, _e104;\n\n          return _regeneratorRuntime.wrap(function _callee155$(_context155) {\n            while (1) {\n              switch (_context155.prev = _context155.next) {\n                case 0:\n                  if (t.connection) {\n                    _context155.next = 2;\n                    break;\n                  }\n\n                  return _context155.abrupt(\"return\");\n\n                case 2:\n                  _context155.next = 4;\n                  return GI(t.mutex.lock(\"Locking from P2PChannel.publishLowStream\"));\n\n                case 4:\n                  i = _context155.sent;\n                  _context155.prev = 5;\n                  _n41 = t.localTrackMap.get(Nl.LocalVideoTrack);\n\n                  if (_n41) {\n                    _context155.next = 9;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"Could not find high stream\");\n\n                case 9:\n                  if (!t.localTrackMap.has(Nl.LocalVideoLowTrack)) {\n                    _context155.next = 11;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"[\".concat(t.store.clientId, \"] Can't publish low stream when stream already publish\"));\n\n                case 11:\n                  _context155.next = 13;\n                  return GI(t.waitTillConnected());\n\n                case 13:\n                  _s38 = [{\n                    track: t.getLowVideoTrack(_n41.track, e),\n                    type: Nl.LocalVideoLowTrack\n                  }];\n                  return _context155.delegateYield(YI(HI(t.doPublish(t.connection, _s38)), GI), \"t0\", 15);\n\n                case 15:\n                  if (!(_n41.track.muted || !_n41.track.enabled)) {\n                    _context155.next = 21;\n                    break;\n                  }\n\n                  _e104 = null === (r = t.localTrackMap.get(Nl.LocalVideoLowTrack)) || void 0 === r ? void 0 : r.id;\n                  _context155.t1 = void 0 !== _e104;\n\n                  if (!_context155.t1) {\n                    _context155.next = 21;\n                    break;\n                  }\n\n                  _context155.next = 21;\n                  return GI(t.connection.muteLocal([_e104]));\n\n                case 21:\n                  _context155.prev = 21;\n                  i();\n                  return _context155.finish(21);\n\n                case 24:\n                case \"end\":\n                  return _context155.stop();\n              }\n            }\n          }, _callee155, this, [[5,, 21, 24]]);\n        }))();\n      }\n    }, {\n      key: \"republish\",\n      value: function () {\n        var _republish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee156() {\n          return _regeneratorRuntime.wrap(function _callee156$(_context156) {\n            while (1) {\n              switch (_context156.prev = _context156.next) {\n                case 0:\n                  _context156.t0 = this.pendingLocalTracks.length > 0;\n\n                  if (!_context156.t0) {\n                    _context156.next = 7;\n                    break;\n                  }\n\n                  vc.debug(\"Emit P2PChannelEvents.RequestRePublish to republish tracks.\");\n                  _context156.next = 5;\n                  return kh(this, bl.RequestRePublish, this.pendingLocalTracks);\n\n                case 5:\n                  this.emit(bl.MediaReconnectEnd, this.store.uid);\n                  this.pendingLocalTracks = [];\n\n                case 7:\n                case \"end\":\n                  return _context156.stop();\n              }\n            }\n          }, _callee156, this);\n        }));\n\n        function republish() {\n          return _republish.apply(this, arguments);\n        }\n\n        return republish;\n      }()\n    }, {\n      key: \"reSubscribe\",\n      value: function () {\n        var _reSubscribe = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee157(e) {\n          var _this164 = this;\n\n          var t, _e105, _this$pendingRemoteTr, _t132, _r61, i, _iteratorNormalCompletion18, _didIteratorError18, _iteratorError18, _iterator18, _step18, _step18$value, _e106, _t133;\n\n          return _regeneratorRuntime.wrap(function _callee157$(_context157) {\n            while (1) {\n              switch (_context157.prev = _context157.next) {\n                case 0:\n                  for (_e105 = this.pendingRemoteTracks.length - 1; _e105 >= 0; _e105--) {\n                    _this$pendingRemoteTr = this.pendingRemoteTracks[_e105], _t132 = _this$pendingRemoteTr.user, _r61 = _this$pendingRemoteTr.kind;\n                    if (!((_r61 !== wl.AUDIO || _t132._audio_added_ && _t132._audioSSRC) && (_r61 !== wl.VIDEO || _t132._video_added_ && _t132._videoSSRC))) Ss(i = this.pendingRemoteTracks).call(i, _e105, 1);\n                  }\n\n                  if (!e) {\n                    _context157.next = 6;\n                    break;\n                  }\n\n                  _context157.next = 4;\n                  return kh(this, bl.RequestReSubscribe, this.pendingRemoteTracks);\n\n                case 4:\n                  _context157.next = 32;\n                  break;\n\n                case 6:\n                  _iteratorNormalCompletion18 = true;\n                  _didIteratorError18 = false;\n                  _iteratorError18 = undefined;\n                  _context157.prev = 9;\n                  _iterator18 = this.pendingRemoteTracks[Symbol.iterator]();\n\n                case 11:\n                  if (_iteratorNormalCompletion18 = (_step18 = _iterator18.next()).done) {\n                    _context157.next = 18;\n                    break;\n                  }\n\n                  _step18$value = _step18.value, _e106 = _step18$value.user, _t133 = _step18$value.kind;\n                  _context157.next = 15;\n                  return this.subscribe(_e106, _t133, _t133 === wl.VIDEO ? _e106._videoSSRC : _e106._audioSSRC);\n\n                case 15:\n                  _iteratorNormalCompletion18 = true;\n                  _context157.next = 11;\n                  break;\n\n                case 18:\n                  _context157.next = 24;\n                  break;\n\n                case 20:\n                  _context157.prev = 20;\n                  _context157.t0 = _context157[\"catch\"](9);\n                  _didIteratorError18 = true;\n                  _iteratorError18 = _context157.t0;\n\n                case 24:\n                  _context157.prev = 24;\n                  _context157.prev = 25;\n\n                  if (!_iteratorNormalCompletion18 && _iterator18.return != null) {\n                    _iterator18.return();\n                  }\n\n                case 27:\n                  _context157.prev = 27;\n\n                  if (!_didIteratorError18) {\n                    _context157.next = 30;\n                    break;\n                  }\n\n                  throw _iteratorError18;\n\n                case 30:\n                  return _context157.finish(27);\n\n                case 31:\n                  return _context157.finish(24);\n\n                case 32:\n                  Xi(t = this.pendingRemoteTracks).call(t, function (_ref99) {\n                    var e = _ref99.user;\n\n                    _this164.emit(bl.MediaReconnectEnd, e.uid);\n                  }), this.pendingRemoteTracks = [];\n\n                case 33:\n                case \"end\":\n                  return _context157.stop();\n              }\n            }\n          }, _callee157, this, [[9, 20, 24, 32], [25,, 27, 31]]);\n        }));\n\n        function reSubscribe(_x253) {\n          return _reSubscribe.apply(this, arguments);\n        }\n\n        return reSubscribe;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee158(e) {\n          var _this165 = this;\n\n          var t;\n          return _regeneratorRuntime.wrap(function _callee158$(_context158) {\n            while (1) {\n              switch (_context158.prev = _context158.next) {\n                case 0:\n                  if (this.connection) {\n                    _context158.next = 2;\n                    break;\n                  }\n\n                  return _context158.abrupt(\"return\", void Xi(e).call(e, function (e) {\n                    var t;\n                    var i = Os(t = _this165.pendingLocalTracks).call(t, e);\n                    var r;\n                    -1 !== i && Ss(r = _this165.pendingLocalTracks).call(r, i, 1);\n                  }));\n\n                case 2:\n                  _context158.next = 4;\n                  return this.waitTillConnected();\n\n                case 4:\n                  t = this.filterTobeUnpublishedTracks(e);\n                  return _context158.abrupt(\"return\", 0 !== t.length ? this.doUnpublish(this.connection, t) : void 0);\n\n                case 6:\n                case \"end\":\n                  return _context158.stop();\n              }\n            }\n          }, _callee158, this);\n        }));\n\n        function unpublish(_x254) {\n          return _unpublish2.apply(this, arguments);\n        }\n\n        return unpublish;\n      }()\n    }, {\n      key: \"unpublishLowStream\",\n      value: function () {\n        var _unpublishLowStream = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee159() {\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee159$(_context159) {\n            while (1) {\n              switch (_context159.prev = _context159.next) {\n                case 0:\n                  if (this.connection) {\n                    _context159.next = 2;\n                    break;\n                  }\n\n                  return _context159.abrupt(\"return\");\n\n                case 2:\n                  e = this.localTrackMap.get(Nl.LocalVideoLowTrack);\n\n                  if (e) {\n                    _context159.next = 5;\n                    break;\n                  }\n\n                  return _context159.abrupt(\"return\");\n\n                case 5:\n                  _context159.next = 7;\n                  return this.waitTillConnected();\n\n                case 7:\n                  t = [[Nl.LocalVideoLowTrack, e]];\n                  return _context159.abrupt(\"return\", this.doUnpublish(this.connection, t));\n\n                case 9:\n                case \"end\":\n                  return _context159.stop();\n              }\n            }\n          }, _callee159, this);\n        }));\n\n        function unpublishLowStream() {\n          return _unpublishLowStream.apply(this, arguments);\n        }\n\n        return unpublishLowStream;\n      }()\n    }, {\n      key: \"doUnpublish\",\n      value: function () {\n        var _doUnpublish = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee160(e, t) {\n          var _this166 = this;\n\n          var i;\n          return _regeneratorRuntime.wrap(function _callee160$(_context160) {\n            while (1) {\n              switch (_context160.prev = _context160.next) {\n                case 0:\n                  i = this.createGatewayUnpublishMessage(t);\n                  _context160.next = 3;\n                  return e.stopSending(Es(t).call(t, function (_ref100) {\n                    var _ref101 = _slicedToArray(_ref100, 2),\n                        e = _ref101[1].id;\n\n                    return e;\n                  }));\n\n                case 3:\n                  this.withdrawLocalTracks(t);\n                  this.unbindLocalTrackEvents(t);\n                  Xi(t).call(t, function (_ref102) {\n                    var _ref103 = _slicedToArray(_ref102, 1),\n                        e = _ref103[0];\n\n                    _this166.statsCollector.removeLocalStats(e);\n                  });\n                  0 === this.localTrackMap.size && this.statsUploader.stopUploadUplinkStats();\n                  return _context160.abrupt(\"return\", i);\n\n                case 8:\n                case \"end\":\n                  return _context160.stop();\n              }\n            }\n          }, _callee160, this);\n        }));\n\n        function doUnpublish(_x255, _x256) {\n          return _doUnpublish.apply(this, arguments);\n        }\n\n        return doUnpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee161(e, t, i, r) {\n          var n, s, o, a, _i96, c, d, _n42, _r62, l, A, u, h, p;\n\n          return _regeneratorRuntime.wrap(function _callee161$(_context161) {\n            while (1) {\n              switch (_context161.prev = _context161.next) {\n                case 0:\n                  if (this.connection) {\n                    _context161.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Cannot subscribe remote user when peerConnection disconnected.\");\n\n                case 2:\n                  if (!(null !== (n = this.remoteUserMap.get(e)) && void 0 !== n && n.has(t))) {\n                    _context161.next = 4;\n                    break;\n                  }\n\n                  return _context161.abrupt(\"return\");\n\n                case 4:\n                  _context161.next = 6;\n                  return this.waitTillConnected();\n\n                case 6:\n                  if (!r) {\n                    _context161.next = 16;\n                    break;\n                  }\n\n                  _i96 = Vs(r).call(r, function (_ref104) {\n                    var e = _ref104.stream_type;\n                    return e === t;\n                  });\n\n                  if (_i96) {\n                    _context161.next = 10;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, Xe(c = Xe(d = \"Cannot subscribe to remote \".concat(t, \" for user: \")).call(d, e.uid, \" because subscribe answer from gateway does not contain stream_type: \")).call(c, t, \".\"));\n\n                case 10:\n                  _context161.next = 12;\n                  return this.connection.receive(t, _i96.ssrcs, String(e.uid), _i96.attributes);\n\n                case 12:\n                  _n42 = _context161.sent;\n                  o = _n42.track, a = _n42.id;\n                  _context161.next = 20;\n                  break;\n\n                case 16:\n                  _context161.next = 18;\n                  return this.connection.receive(t, [{\n                    ssrcId: i\n                  }], String(e.uid), void 0);\n\n                case 18:\n                  _r62 = _context161.sent;\n                  o = _r62.track, a = _r62.id;\n\n                case 20:\n                  t === wl.AUDIO ? e._audioTrack ? e._audioTrack._updateOriginMediaStreamTrack(o) : (e._audioTrack = new Kf(o, e.uid, e._uintid, this.store), vc.info(Xe(l = \"[\".concat(this.store.p2pId, \"] create remote audio track: \")).call(l, e._audioTrack.getTrackId())), this.bindRemoteTrackEvents(e, e._audioTrack)) : e._videoTrack ? e._videoTrack._updateOriginMediaStreamTrack(o) : (e._videoTrack = new jf(o, e.uid, e._uintid, this.store), vc.info(Xe(A = \"[\".concat(this.store.p2pId, \"] create remote video track: \")).call(A, e._videoTrack.getTrackId())), this.bindRemoteTrackEvents(e, e._videoTrack));\n                  u = this.remoteUserMap.get(e);\n                  u ? u.set(t, a) : this.remoteUserMap.set(e, new Li([[t, a]])), this.statsCollector.addRemoteStats(e.uid), this.statsUploader.startUploadDownlinkStats();\n                  h = OI(s = this.pendingRemoteTracks).call(s, function (_ref105) {\n                    var i = _ref105.user,\n                        r = _ref105.kind;\n                    return i.uid === e.uid && t === r;\n                  });\n                  -1 !== h && (Ss(p = this.pendingRemoteTracks).call(p, h, 1), this.emit(bl.MediaReconnectEnd, e.uid));\n\n                case 25:\n                case \"end\":\n                  return _context161.stop();\n              }\n            }\n          }, _callee161, this);\n        }));\n\n        function subscribe(_x257, _x258, _x259, _x260) {\n          return _subscribe2.apply(this, arguments);\n        }\n\n        return subscribe;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee162(e, t) {\n          var _this167 = this;\n\n          var i, r, n, s;\n          return _regeneratorRuntime.wrap(function _callee162$(_context162) {\n            while (1) {\n              switch (_context162.prev = _context162.next) {\n                case 0:\n                  r = Fr(i = this.pendingRemoteTracks).call(i, function (_ref106) {\n                    var i = _ref106.user,\n                        r = _ref106.kind;\n                    return void 0 !== t ? i.uid === e.uid && t === r : i.uid === e.uid;\n                  });\n\n                  if (!(Xi(r).call(r, function (e) {\n                    var t, i;\n                    var r = Os(t = _this167.pendingRemoteTracks).call(t, e);\n                    Ss(i = _this167.pendingRemoteTracks).call(i, r, 1);\n                  }), !this.connection)) {\n                    _context162.next = 3;\n                    break;\n                  }\n\n                  return _context162.abrupt(\"return\", void Xi(r).call(r, function (_ref107) {\n                    var t = _ref107.kind;\n                    var i;\n                    if (t === wl.AUDIO) null === (i = e._audioTrack) || void 0 === i || i._destroy(), e._audioTrack = void 0;else if (t === wl.VIDEO) {\n                      var r;\n                      null === (r = e._videoTrack) || void 0 === r || r._destroy(), e._videoTrack = void 0;\n                    }\n                  }));\n\n                case 3:\n                  n = this.filterTobeUnSubscribedTracks(e, t);\n\n                  if (!(0 === n.length)) {\n                    _context162.next = 6;\n                    break;\n                  }\n\n                  return _context162.abrupt(\"return\");\n\n                case 6:\n                  _context162.next = 8;\n                  return this.connection.stopReceiving(Es(n).call(n, function (_ref108) {\n                    var _ref109 = _slicedToArray(_ref108, 2),\n                        e = _ref109[1].id;\n\n                    return e;\n                  }));\n\n                case 8:\n                  s = this.createUnsubscribeMessage(n);\n                  return _context162.abrupt(\"return\", (this.withdrawRemoteTracks(n), 0 === this.remoteUserMap.size && this.statsUploader.stopUploadDownlinkStats(), Xi(n).call(n, function (_ref110) {\n                    var _ref111 = _slicedToArray(_ref110, 2),\n                        e = _ref111[0],\n                        t = _ref111[1].kind;\n\n                    var i, r;\n                    t === wl.VIDEO && e._videoSSRC && (null === (i = _this167.connection) || void 0 === i || i.setStatsRemoteVideoIsReady(e._videoSSRC, !1));\n                    if (t === wl.VIDEO) _this167.unbindRemoteTrackEvents(e._videoTrack), null === (r = e._videoTrack) || void 0 === r || r._destroy(), e._videoTrack = void 0;else if (t === wl.AUDIO) {\n                      var n;\n                      _this167.unbindRemoteTrackEvents(e._audioTrack), null === (n = e._audioTrack) || void 0 === n || n._destroy(), e._audioTrack = void 0;\n                    }\n                  }), s));\n\n                case 10:\n                case \"end\":\n                  return _context162.stop();\n              }\n            }\n          }, _callee162, this);\n        }));\n\n        function unsubscribe(_x261, _x262) {\n          return _unsubscribe2.apply(this, arguments);\n        }\n\n        return unsubscribe;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee163(e, t) {\n          var i, r, n, s;\n          return _regeneratorRuntime.wrap(function _callee163$(_context163) {\n            while (1) {\n              switch (_context163.prev = _context163.next) {\n                case 0:\n                  if (this.connection) {\n                    _context163.next = 2;\n                    break;\n                  }\n\n                  return _context163.abrupt(\"return\");\n\n                case 2:\n                  i = this.remoteUserMap.get(e);\n\n                  if (i) {\n                    _context163.next = 5;\n                    break;\n                  }\n\n                  return _context163.abrupt(\"return\", void vc.warning(\"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \".\")));\n\n                case 5:\n                  r = i.get(t);\n\n                  if (r) {\n                    _context163.next = 8;\n                    break;\n                  }\n\n                  return _context163.abrupt(\"return\", void vc.warning(Xe(n = \"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \" media type \")).call(n, t, \".\")));\n\n                case 8:\n                  s = t === wl.VIDEO ? e._videoSSRC : e._audioSSRC;\n                  void 0 !== s && this.connection.setStatsRemoteVideoIsReady(s, !1);\n                  _context163.next = 12;\n                  return this.connection.muteRemote(r);\n\n                case 12:\n                case \"end\":\n                  return _context163.stop();\n              }\n            }\n          }, _callee163, this);\n        }));\n\n        function muteRemote(_x263, _x264) {\n          return _muteRemote3.apply(this, arguments);\n        }\n\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee164(e, t) {\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee164$(_context164) {\n            while (1) {\n              switch (_context164.prev = _context164.next) {\n                case 0:\n                  if (this.connection) {\n                    _context164.next = 2;\n                    break;\n                  }\n\n                  return _context164.abrupt(\"return\");\n\n                case 2:\n                  i = this.remoteUserMap.get(e);\n\n                  if (i) {\n                    _context164.next = 5;\n                    break;\n                  }\n\n                  return _context164.abrupt(\"return\", void vc.warning(\"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \".\")));\n\n                case 5:\n                  r = i.get(t);\n\n                  if (!r) {\n                    _context164.next = 11;\n                    break;\n                  }\n\n                  _context164.next = 9;\n                  return this.connection.unmuteRemote(r);\n\n                case 9:\n                  _context164.next = 12;\n                  break;\n\n                case 11:\n                  vc.warning(Xe(n = \"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \" media type \")).call(n, t, \".\"));\n\n                case 12:\n                case \"end\":\n                  return _context164.stop();\n              }\n            }\n          }, _callee164, this);\n        }));\n\n        function unmuteRemote(_x265, _x266) {\n          return _unmuteRemote3.apply(this, arguments);\n        }\n\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"getAllTracks\",\n      value: function getAllTracks(e) {\n        var t = this.localTrackMap.get(Nl.LocalAudioTrack);\n\n        if ((null == t ? void 0 : t.track) instanceof Gu) {\n          var i, r, n, s, o;\n          var _a16 = t.track;\n          return Xe(i = Es(r = Fr(n = Fr(s = BA(kA(o = this.localTrackMap).call(o))).call(s, function (_ref112) {\n            var _ref113 = _slicedToArray(_ref112, 1),\n                e = _ref113[0];\n\n            return e !== Nl.LocalAudioTrack;\n          })).call(n, function (_ref114) {\n            var _ref115 = _slicedToArray(_ref114, 1),\n                t = _ref115[0];\n\n            return !(e && t === Nl.LocalVideoLowTrack);\n          })).call(r, function (_ref116) {\n            var _ref117 = _slicedToArray(_ref116, 2),\n                e = _ref117[1].track;\n\n            return e;\n          })).call(i, _a16.trackList);\n        }\n\n        var a, c, d;\n        return Es(a = Fr(c = BA(kA(d = this.localTrackMap).call(d))).call(c, function (_ref118) {\n          var _ref119 = _slicedToArray(_ref118, 1),\n              t = _ref119[0];\n\n          return !(e && t === Nl.LocalVideoLowTrack);\n        })).call(a, function (_ref120) {\n          var _ref121 = _slicedToArray(_ref120, 2),\n              e = _ref121[1].track;\n\n          return e;\n        });\n      }\n    }, {\n      key: \"reportPublishEvent\",\n      value: function reportPublishEvent(e, t, i, r, n) {\n        if (e) {\n          var s;\n\n          var _i97 = this.localTrackMap.get(Nl.LocalAudioTrack),\n              _o21 = r ? this.localTrackMap.get(Nl.LocalVideoLowTrack) : this.localTrackMap.get(Nl.LocalVideoTrack);\n\n          iu.publish(this.store.sessionId, {\n            eventElapse: Wu.measureFromPublishStart(this.store.clientId, this.store.pubId),\n            succ: e,\n            ec: t,\n            audioName: null == _i97 ? void 0 : _i97.track.getTrackLabel(),\n            videoName: null == _o21 ? void 0 : _o21.track.getTrackLabel(),\n            screenshare: -1 !== (null == _o21 ? void 0 : Os(s = _o21.track._hints).call(s, _l.SCREEN_TRACK)),\n            audio: !!_i97,\n            video: !!_o21,\n            p2pid: this.store.p2pId,\n            publishRequestid: this.store.pubId,\n            extend: n\n          });\n        } else {\n          var o, a;\n          i || (i = []);\n\n          var _s39 = Vs(i).call(i, function (e) {\n            return e instanceof Fu;\n          }),\n              _c14 = r ? null === (o = this.localTrackMap.get(Nl.LocalVideoTrack)) || void 0 === o ? void 0 : o.track : Vs(i).call(i, function (e) {\n            return e instanceof CI;\n          });\n\n          iu.publish(this.store.sessionId, {\n            eventElapse: Wu.measureFromPublishStart(this.store.clientId, this.store.pubId),\n            succ: e,\n            ec: t,\n            audioName: null == _s39 ? void 0 : _s39.getTrackLabel(),\n            videoName: null == _c14 ? void 0 : _c14.getTrackLabel(),\n            screenshare: -1 !== (null == _c14 ? void 0 : Os(a = _c14._hints).call(a, _l.SCREEN_TRACK)),\n            audio: !!_s39,\n            video: !!_c14,\n            p2pid: this.store.p2pId,\n            publishRequestid: this.store.pubId,\n            extend: n\n          });\n        }\n      }\n    }, {\n      key: \"reportSubscribeEvent\",\n      value: function reportSubscribeEvent(e, t, i, r) {\n        var n = r === wl.VIDEO ? i._videoSSRC : i._audioSSRC;\n        n && iu.subscribe(this.store.sessionId, {\n          succ: e,\n          ec: t,\n          video: r === wl.VIDEO,\n          audio: r === wl.AUDIO,\n          peerid: i.uid,\n          subscribeRequestid: r === wl.VIDEO ? i._videoSSRC : i._audioSSRC,\n          p2pid: this.store.p2pId,\n          eventElapse: Wu.measureFromSubscribeStart(this.store.clientId, n)\n        });\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        vc.debug(\"P2PChannel.reset\"), this.mutex = new su(\"P2PChannel-mutex\"), this.connection && (this.connection.close(), this.unbindConnectionEvents(this.connection), this.connection = void 0), this.statsUploader.stopUploadUplinkStats(), this.statsUploader.stopUploadDownlinkStats(), this.unbindLocalTrackEvents(), this.unbindAllRemoteTrackEvents(), this.localTrackMap.clear(), this.remoteUserMap.clear(), this.statsCollector.removeRemoteStats(), this.statsCollector.removeLocalStats(), this.iceFailedCount = 0, this.dtlsFailedCount = 0, this.pendingLocalTracks = [], this.pendingRemoteTracks = [], this.state = Ol.Disconnected;\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        var e;\n        return null === (e = this.connection) || void 0 === e ? void 0 : e.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        var t;\n        return (null === (t = this.connection) || void 0 === t ? void 0 : t.getRemoteVideoIsReady(e)) || !1;\n      }\n    }, {\n      key: \"getLocalAudioVolume\",\n      value: function getLocalAudioVolume() {\n        var e = this.localTrackMap.get(Nl.LocalAudioTrack);\n        if (e) return e.track.getVolumeLevel();\n      }\n    }, {\n      key: \"getLocalVideoSize\",\n      value: function getLocalVideoSize() {\n        var e = this.localTrackMap.get(Nl.LocalVideoTrack);\n        if (e) return {\n          width: e.track._videoWidth || 0,\n          height: e.track._videoHeight || 0\n        };\n      }\n    }, {\n      key: \"getEncoderConfig\",\n      value: function getEncoderConfig(e) {\n        var t = this.localTrackMap.get(e);\n        return t && t.track instanceof CI || t && t.track instanceof Fu ? t.track._encoderConfig : void 0;\n      }\n    }, {\n      key: \"getLocalMedia\",\n      value: function getLocalMedia(e) {\n        return this.localTrackMap.get(e);\n      }\n    }, {\n      key: \"hasLocalMedia\",\n      value: function hasLocalMedia() {\n        return this.localTrackMap.size > 0;\n      }\n    }, {\n      key: \"hasRemoteMedia\",\n      value: function hasRemoteMedia(e, t) {\n        if (!e) return this.remoteUserMap.size > 0;\n        var i = this.remoteUserMap.get(e);\n        return !!i && (!t || i.has(t));\n      }\n    }, {\n      key: \"getRemoteMedia\",\n      value: function getRemoteMedia(e) {\n        var t, i;\n        var r = Vs(t = BA(FA(i = this.remoteUserMap).call(i))).call(t, function (t) {\n          return t.uid === e;\n        });\n        return r ? {\n          audioTrack: r.audioTrack,\n          audioSSRC: r._audioSSRC,\n          videoTrack: r.videoTrack,\n          videoSSRC: r._videoSSRC\n        } : {};\n      }\n    }, {\n      key: \"getAudioLevels\",\n      value: function getAudioLevels() {\n        var e, t;\n        var i = Es(e = BA(kA(t = this.remoteUserMap).call(t))).call(e, function (_ref122) {\n          var _ref123 = _slicedToArray(_ref122, 1),\n              e = _ref123[0];\n\n          return {\n            uid: e.uid,\n            level: e.audioTrack ? 100 * e.audioTrack._source.getAccurateVolumeLevel() : 0\n          };\n        });\n        var r = this.localTrackMap.get(Nl.LocalAudioTrack);\n        return r && i.push({\n          level: 100 * r.track._source.getAccurateVolumeLevel(),\n          uid: this.store.uid\n        }), i = od(i).call(i, function (e, t) {\n          return e.level - t.level;\n        }), i;\n      }\n    }, {\n      key: \"disconnectForReconnect\",\n      value: function () {\n        var _disconnectForReconnect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee165() {\n          var _this168 = this;\n\n          var e, t, i, r;\n          return _regeneratorRuntime.wrap(function _callee165$(_context165) {\n            while (1) {\n              switch (_context165.prev = _context165.next) {\n                case 0:\n                  if (this.connection) {\n                    if (vc.debug(\"P2PChannel.disconnectForReconnect closing P2PConnection\"), this.state = Ol.Reconnecting, this.connection.close(), this.unbindConnectionEvents(this.connection), this.connection = void 0, 0 !== this.localTrackMap.size) Xi(e = BA(kA(t = this.localTrackMap).call(t))).call(e, function (_ref124) {\n                      var _ref125 = _slicedToArray(_ref124, 2),\n                          e = _ref125[0],\n                          t = _ref125[1].track;\n\n                      var i;\n\n                      switch (e) {\n                        case Nl.LocalVideoTrack:\n                          eo(i = t._hints).call(i, _l.LOW_STREAM) ? t.close() : _this168.pendingLocalTracks.push(t);\n                          break;\n\n                        case Nl.LocalAudioTrack:\n                          var r;\n                          if (t instanceof Gu) _this168.pendingLocalTracks = Xe(r = _this168.pendingLocalTracks).call(r, t.trackList);else _this168.pendingLocalTracks.push(t);\n                          break;\n\n                        case Nl.LocalVideoLowTrack:\n                      }\n                    }), this.emit(bl.MediaReconnectStart, this.store.uid);\n                    if (this.unbindLocalTrackEvents(), this.localTrackMap.clear(), 0 !== this.remoteUserMap.size) Xi(i = BA(kA(r = this.remoteUserMap).call(r))).call(i, function (_ref126) {\n                      var _ref127 = _slicedToArray(_ref126, 2),\n                          e = _ref127[0],\n                          t = _ref127[1];\n\n                      var i;\n                      Xi(i = BA(FA(t).call(t))).call(i, function (t) {\n                        _this168.setPendingRemoteMedia(e, t);\n                      }), _this168.emit(bl.MediaReconnectStart, e.uid);\n                    });\n                    this.unbindAllRemoteTrackEvents(), this.remoteUserMap.clear(), this.statsUploader.stopUploadUplinkStats(), this.statsUploader.stopUploadDownlinkStats(), vc.debug(\"P2PChannel disconnected, waiting to reconnect.\");\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context165.stop();\n              }\n            }\n          }, _callee165, this);\n        }));\n\n        function disconnectForReconnect() {\n          return _disconnectForReconnect.apply(this, arguments);\n        }\n\n        return disconnectForReconnect;\n      }()\n    }, {\n      key: \"hasPendingRemoteMedia\",\n      value: function hasPendingRemoteMedia(e, t) {\n        var _iteratorNormalCompletion19 = true;\n        var _didIteratorError19 = false;\n        var _iteratorError19 = undefined;\n\n        try {\n          for (var _iterator19 = this.pendingRemoteTracks[Symbol.iterator](), _step19; !(_iteratorNormalCompletion19 = (_step19 = _iterator19.next()).done); _iteratorNormalCompletion19 = true) {\n            var _i98 = _step19.value;\n            var _r63 = _i98.user,\n                _n43 = _i98.kind;\n            if ((e instanceof RI ? e.uid : e) === _r63.uid && t === _n43) return !0;\n          }\n        } catch (err) {\n          _didIteratorError19 = true;\n          _iteratorError19 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion19 && _iterator19.return != null) {\n              _iterator19.return();\n            }\n          } finally {\n            if (_didIteratorError19) {\n              throw _iteratorError19;\n            }\n          }\n        }\n\n        return !1;\n      }\n    }, {\n      key: \"setPendingRemoteMedia\",\n      value: function setPendingRemoteMedia(e, t) {\n        this.hasPendingRemoteMedia(e, t) || this.pendingRemoteTracks.push({\n          user: e,\n          kind: t\n        });\n      }\n    }, {\n      key: \"reEstablish\",\n      value: function () {\n        var _reEstablish3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee166() {\n          return _regeneratorRuntime.wrap(function _callee166$(_context166) {\n            while (1) {\n              switch (_context166.prev = _context166.next) {\n                case 0:\n                  if (!this.connection) {\n                    _context166.next = 2;\n                    break;\n                  }\n\n                  return _context166.abrupt(\"return\", this.connection.reEstablish());\n\n                case 2:\n                case \"end\":\n                  return _context166.stop();\n              }\n            }\n          }, _callee166, this);\n        }));\n\n        function reEstablish() {\n          return _reEstablish3.apply(this, arguments);\n        }\n\n        return reEstablish;\n      }()\n    }, {\n      key: \"getUplinkNetworkQuality\",\n      value: function getUplinkNetworkQuality() {\n        var e, t, i;\n        if (!this.connection) return 0;\n        var r = this.connection.getStats(),\n            n = this.localTrackMap.get(Nl.LocalVideoTrack),\n            s = this.localTrackMap.get(Nl.LocalAudioTrack),\n            o = Vs(e = r.videoSend).call(e, function (e) {\n          return e.ssrc === (null == n ? void 0 : n.ssrcs[0].ssrcId);\n        }),\n            a = Vs(t = r.audioSend).call(t, function (e) {\n          return e.ssrc === (null == s ? void 0 : s.ssrcs[0].ssrcId);\n        });\n        if (!o || !a) return 1;\n        var c = Ph(this, bl.NeedSignalRTT),\n            d = o ? o.rttMs : void 0,\n            l = a ? a.rttMs : void 0,\n            A = d && l ? (d + l) / 2 : d || l,\n            u = (A && c ? (A + c) / 2 : A || c) || 0,\n            h = 100 * r.sendPacketLossRate * .7 / 50 + .3 * u / 1500,\n            p = h < .17 ? 1 : h < .36 ? 2 : h < .59 ? 3 : h < .1 ? 4 : 5,\n            E = null == n ? void 0 : n.track;\n\n        if (E && E._encoderConfig && -1 === Os(i = E._hints).call(i, _l.SCREEN_TRACK)) {\n          var _e107 = E._encoderConfig.bitrateMax,\n              _t134 = r.bitrate.actualEncoded;\n\n          if (_e107 && _t134) {\n            var _i99 = (1e3 * _e107 - _t134) / (1e3 * _e107);\n\n            return Hc[_i99 < .15 ? 0 : _i99 < .3 ? 1 : _i99 < .45 ? 2 : _i99 < .6 ? 3 : 4][p];\n          }\n        }\n\n        return p;\n      }\n    }, {\n      key: \"getDownlinkNetworkQuality\",\n      value: function getDownlinkNetworkQuality() {\n        var _this169 = this;\n\n        var e, t;\n        if (!this.connection) return 0;\n        var i = this.connection.getStats();\n        var r = 0;\n        return Xi(e = BA(kA(t = this.remoteUserMap).call(t))).call(e, function (_ref128) {\n          var _ref129 = _slicedToArray(_ref128, 1),\n              e = _ref129[0];\n\n          var t, n;\n          var s = e._audioSSRC,\n              o = e._videoSSRC,\n              a = Vs(t = i.audioRecv).call(t, function (e) {\n            return e.ssrc === s;\n          }),\n              c = Vs(n = i.videoRecv).call(n, function (e) {\n            return e.ssrc === o;\n          });\n          if (!a && !c) return void (r += 1);\n          var d = Ph(_this169, bl.NeedSignalRTT),\n              l = i.rtt,\n              A = (l && d ? (l + d) / 2 : l || d) || 0,\n              u = a ? a.jitterMs : void 0,\n              h = i.recvPacketLossRate;\n          var p = .7 * h * 100 / 50 + .3 * A / 1500;\n          u && (p = .6 * h * 100 / 50 + .2 * A / 1500 + .2 * u / 400);\n          r += p < .1 ? 1 : p < .17 ? 2 : p < .36 ? 3 : p < .59 ? 4 : 5;\n        }), this.remoteUserMap.size > 0 ? Math.round(r / this.remoteUserMap.size) : r;\n      }\n    }, {\n      key: \"muteLocalTrack\",\n      value: function () {\n        var _muteLocalTrack = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee167(e) {\n          var _this170 = this;\n\n          return _regeneratorRuntime.wrap(function _callee167$(_context167) {\n            while (1) {\n              switch (_context167.prev = _context167.next) {\n                case 0:\n                  return _context167.abrupt(\"return\", new As(function (t, i) {\n                    _this170.handleMuteLocalTrack(e, t, i);\n                  }));\n\n                case 1:\n                case \"end\":\n                  return _context167.stop();\n              }\n            }\n          }, _callee167, this);\n        }));\n\n        function muteLocalTrack(_x267) {\n          return _muteLocalTrack.apply(this, arguments);\n        }\n\n        return muteLocalTrack;\n      }()\n    }, {\n      key: \"filterTobePublishedTracks\",\n      value: function filterTobePublishedTracks(e, t, i) {\n        var r = [],\n            n = Ul(),\n            s = this.getAllTracks();\n        e = Uh(e = Fr(e).call(e, function (e) {\n          return -1 === Os(s).call(s, e);\n        }));\n        var o = !1,\n            a = !1;\n        var _iteratorNormalCompletion20 = true;\n        var _didIteratorError20 = false;\n        var _iteratorError20 = undefined;\n\n        try {\n          for (var _iterator20 = e[Symbol.iterator](), _step20; !(_iteratorNormalCompletion20 = (_step20 = _iterator20.next()).done); _iteratorNormalCompletion20 = true) {\n            var _s40 = _step20.value;\n\n            if (_s40 instanceof CI && (this.localTrackMap.has(Nl.LocalVideoTrack) || o ? new Ad(ad.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw() : (r.push({\n              track: _s40,\n              type: Nl.LocalVideoTrack\n            }), o = !0), t)) {\n              var _e108 = this.getLowVideoTrack(_s40, i);\n\n              r.push({\n                track: _e108,\n                type: Nl.LocalVideoLowTrack\n              });\n            }\n\n            if (_s40 instanceof Fu) {\n              var _e109 = this.localTrackMap.get(Nl.LocalAudioTrack);\n\n              if (_e109) {\n                if (!(_e109.track instanceof Gu)) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");\n                if (_s40._bypassWebAudio) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio\");\n                _e109.track.addAudioTrack(_s40), this.bindLocalAudioTrackEvents(_s40, !0);\n              } else if (a) {\n                var _e110 = Vs(r).call(r, function (_ref130) {\n                  var e = _ref130.type;\n                  return e === Nl.LocalAudioTrack;\n                });\n\n                if (!(_e110.track instanceof Gu)) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");\n                if (_s40._bypassWebAudio) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio\");\n\n                _e110.track.addAudioTrack(_s40);\n              } else {\n                if (!n.webAudioMediaStreamDest || _s40 instanceof Gu || _s40._bypassWebAudio) r.push({\n                  track: _s40,\n                  type: Nl.LocalAudioTrack\n                });else {\n                  var _e111 = new Gu();\n\n                  _e111.addAudioTrack(_s40), r.push({\n                    track: _e111,\n                    type: Nl.LocalAudioTrack\n                  });\n                }\n                a = !0;\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError20 = true;\n          _iteratorError20 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion20 && _iterator20.return != null) {\n              _iterator20.return();\n            }\n          } finally {\n            if (_didIteratorError20) {\n              throw _iteratorError20;\n            }\n          }\n        }\n\n        return r;\n      }\n    }, {\n      key: \"filterTobeUnpublishedTracks\",\n      value: function filterTobeUnpublishedTracks(e) {\n        var t = [],\n            i = this.getAllTracks();\n        e = Uh(e = Fr(e).call(e, function (e) {\n          return -1 !== Os(i).call(i, e);\n        }));\n        var _iteratorNormalCompletion21 = true;\n        var _didIteratorError21 = false;\n        var _iteratorError21 = undefined;\n\n        try {\n          for (var _iterator21 = e[Symbol.iterator](), _step21; !(_iteratorNormalCompletion21 = (_step21 = _iterator21.next()).done); _iteratorNormalCompletion21 = true) {\n            var _i100 = _step21.value;\n\n            if (_i100 instanceof Fu) {\n              var _e112 = this.localTrackMap.get(Nl.LocalAudioTrack);\n\n              if (!_e112) continue;\n              _e112.track instanceof Gu ? (_e112.track.removeAudioTrack(_i100), this.unbindLocalAudioTrackEvents(_i100), 0 === _e112.track.trackList.length && (t.push([Nl.LocalAudioTrack, _e112]), _e112.track.close())) : t.push([Nl.LocalAudioTrack, _e112]);\n            }\n\n            if (_i100 instanceof CI) {\n              var _e113 = this.localTrackMap.get(Nl.LocalVideoTrack);\n\n              if (!_e113) continue;\n              t.push([Nl.LocalVideoTrack, _e113]);\n\n              var _i101 = this.localTrackMap.get(Nl.LocalVideoLowTrack);\n\n              _i101 && t.push([Nl.LocalVideoLowTrack, _i101]);\n            }\n          }\n        } catch (err) {\n          _didIteratorError21 = true;\n          _iteratorError21 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion21 && _iterator21.return != null) {\n              _iterator21.return();\n            }\n          } finally {\n            if (_didIteratorError21) {\n              throw _iteratorError21;\n            }\n          }\n        }\n\n        return t;\n      }\n    }, {\n      key: \"bindLocalTrackEvents\",\n      value: function bindLocalTrackEvents(e) {\n        var _this171 = this;\n\n        Xi(e).call(e, function (_ref131) {\n          var e = _ref131.track,\n              t = _ref131.type;\n\n          switch (t) {\n            case Nl.LocalVideoTrack:\n              e.addListener(gl.GET_STATS, _this171.handleGetLocalVideoStats), e.addListener(gl.NEED_DISABLE_TRACK, _this171.handleMuteLocalTrack), e.addListener(gl.NEED_ENABLE_TRACK, _this171.handleUnmuteLocalTrack), e.addListener(gl.NEED_UPDATE_VIDEO_ENCODER, _this171.handleUpdateVideoEncoder), e.addListener(gl.SET_OPTIMIZATION_MODE, _this171.handleSetOptimizationMode), e.addListener(gl.NEED_REPLACE_TRACK, _this171.handleReplaceTrack), e.addListener(gl.NEED_MUTE_TRACK, _this171.handleMuteLocalTrack), e.addListener(gl.NEED_UNMUTE_TRACK, _this171.handleUnmuteLocalTrack);\n              break;\n\n            case Nl.LocalAudioTrack:\n              _this171.bindLocalAudioTrackEvents(e);\n\n              break;\n\n            case Nl.LocalVideoLowTrack:\n          }\n        });\n      }\n    }, {\n      key: \"bindLocalAudioTrackEvents\",\n      value: function bindLocalAudioTrackEvents(e, t) {\n        var _this172 = this;\n\n        var i;\n        e instanceof Gu ? Xi(i = e.trackList).call(i, function (e) {\n          e.addListener(gl.NEED_DISABLE_TRACK, _this172.handleMuteLocalTrack), e.addListener(gl.NEED_ENABLE_TRACK, _this172.handleUnmuteLocalTrack), e.addListener(gl.GET_STATS, _this172.handleGetLocalAudioStats), e.addListener(gl.NEED_MUTE_TRACK, _this172.handleMuteLocalTrack), e.addListener(gl.NEED_UNMUTE_TRACK, _this172.handleUnmuteLocalTrack);\n        }) : (e.addListener(gl.GET_STATS, this.handleGetLocalAudioStats), e.addListener(gl.NEED_DISABLE_TRACK, this.handleMuteLocalTrack), e.addListener(gl.NEED_ENABLE_TRACK, this.handleUnmuteLocalTrack), e.addListener(gl.NEED_MUTE_TRACK, this.handleMuteLocalTrack), e.addListener(gl.NEED_UNMUTE_TRACK, this.handleUnmuteLocalTrack), t || e.addListener(gl.NEED_REPLACE_TRACK, this.handleReplaceTrack));\n      }\n    }, {\n      key: \"unbindLocalTrackEvents\",\n      value: function unbindLocalTrackEvents(e) {\n        var _this173 = this;\n\n        var t;\n        e || (e = BA(kA(t = this.localTrackMap).call(t)));\n        Xi(e).call(e, function (_ref132) {\n          var _ref133 = _slicedToArray(_ref132, 2),\n              e = _ref133[0],\n              t = _ref133[1].track;\n\n          switch (e) {\n            case Nl.LocalVideoTrack:\n              t.off(gl.GET_STATS, _this173.handleGetLocalVideoStats), t.off(gl.NEED_DISABLE_TRACK, _this173.handleMuteLocalTrack), t.off(gl.NEED_ENABLE_TRACK, _this173.handleUnmuteLocalTrack), t.off(gl.NEED_UPDATE_VIDEO_ENCODER, _this173.handleUpdateVideoEncoder), t.off(gl.SET_OPTIMIZATION_MODE, _this173.handleSetOptimizationMode), t.off(gl.NEED_REPLACE_TRACK, _this173.handleReplaceTrack), t.off(gl.NEED_MUTE_TRACK, _this173.handleMuteLocalTrack), t.off(gl.NEED_UNMUTE_TRACK, _this173.handleUnmuteLocalTrack);\n              break;\n\n            case Nl.LocalAudioTrack:\n              _this173.unbindLocalAudioTrackEvents(t);\n\n              break;\n\n            case Nl.LocalVideoLowTrack:\n          }\n        });\n      }\n    }, {\n      key: \"unbindLocalAudioTrackEvents\",\n      value: function unbindLocalAudioTrackEvents(e) {\n        var _this174 = this;\n\n        var t;\n        e instanceof Gu ? Xi(t = e.trackList).call(t, function (e) {\n          e.off(gl.NEED_DISABLE_TRACK, _this174.handleMuteLocalTrack), e.off(gl.NEED_ENABLE_TRACK, _this174.handleUnmuteLocalTrack), e.off(gl.GET_STATS, _this174.handleGetLocalAudioStats), e.off(gl.NEED_MUTE_TRACK, _this174.handleMuteLocalTrack), e.off(gl.NEED_UNMUTE_TRACK, _this174.handleUnmuteLocalTrack);\n        }) : (e.off(gl.GET_STATS, this.handleGetLocalAudioStats), e.off(gl.NEED_DISABLE_TRACK, this.handleMuteLocalTrack), e.off(gl.NEED_ENABLE_TRACK, this.handleUnmuteLocalTrack), e.off(gl.NEED_REPLACE_TRACK, this.handleReplaceTrack), e.off(gl.NEED_MUTE_TRACK, this.handleMuteLocalTrack), e.off(gl.NEED_UNMUTE_TRACK, this.handleUnmuteLocalTrack));\n      }\n    }, {\n      key: \"bindRemoteTrackEvents\",\n      value: function bindRemoteTrackEvents(e, t) {\n        var _this175 = this;\n\n        t instanceof jf && t.addListener(gl.GET_STATS, function (t) {\n          t(_this175.handleGetRemoteVideoStats(e));\n        }), t instanceof Kf && t.addListener(gl.GET_STATS, function (t) {\n          t(_this175.handleGetRemoteAudioStats(e));\n        });\n      }\n    }, {\n      key: \"unbindRemoteTrackEvents\",\n      value: function unbindRemoteTrackEvents(e) {\n        e && e.removeAllListeners(gl.GET_STATS);\n      }\n    }, {\n      key: \"unbindAllRemoteTrackEvents\",\n      value: function unbindAllRemoteTrackEvents() {\n        var _this176 = this;\n\n        var e, t;\n        Xi(e = BA(kA(t = this.remoteUserMap).call(t))).call(e, function (_ref134) {\n          var _ref135 = _slicedToArray(_ref134, 2),\n              e = _ref135[0],\n              t = _ref135[1];\n\n          t.has(wl.AUDIO) && _this176.unbindRemoteTrackEvents(e._audioTrack), t.has(wl.VIDEO) && _this176.unbindRemoteTrackEvents(e._videoTrack);\n        });\n      }\n    }, {\n      key: \"createGatewayPublishMessage\",\n      value: function createGatewayPublishMessage(e, t) {\n        var _this177 = this;\n\n        return Es(e).call(e, function (_ref136, r) {\n          var e = _ref136.track,\n              i = _ref136.type;\n          var n;\n          var s, o;\n\n          switch (i) {\n            case Nl.LocalAudioTrack:\n              s = pl.Audio, o = {\n                dtx: e instanceof xu && e._config.DTX,\n                hq: !1,\n                lq: !1,\n                stereo: !1,\n                speech: !1\n              };\n              break;\n\n            case Nl.LocalVideoTrack:\n              s = eo(n = e._hints).call(n, _l.SCREEN_TRACK) ? pl.Screen : pl.High, o = Jf({}, hh(e), {\n                codec: _this177.store.codec\n              });\n              break;\n\n            case Nl.LocalVideoLowTrack:\n              s = pl.Low, o = Jf({}, hh(e), {\n                codec: _this177.store.codec\n              });\n          }\n\n          return {\n            stream_type: s,\n            attributes: o,\n            ssrcs: t[r]\n          };\n        });\n      }\n    }, {\n      key: \"createGatewayUnpublishMessage\",\n      value: function createGatewayUnpublishMessage(e) {\n        return Es(e).call(e, function (_ref137) {\n          var _ref138 = _slicedToArray(_ref137, 2),\n              e = _ref138[0],\n              _ref138$ = _ref138[1],\n              t = _ref138$.track,\n              i = _ref138$.ssrcs,\n              r = _ref138$.id;\n\n          var n;\n          var s;\n\n          switch (e) {\n            case Nl.LocalVideoTrack:\n              s = eo(n = t._hints).call(n, _l.SCREEN_TRACK) ? pl.Screen : pl.High;\n              break;\n\n            case Nl.LocalAudioTrack:\n              s = pl.Audio;\n              break;\n\n            case Nl.LocalVideoLowTrack:\n              s = pl.Low;\n          }\n\n          return {\n            stream_type: s,\n            ssrcs: i,\n            mid: r\n          };\n        });\n      }\n    }, {\n      key: \"assignLocalTracks\",\n      value: function assignLocalTracks(e, t) {\n        var _this178 = this;\n\n        Xi(e).call(e, function (_ref139, r) {\n          var e = _ref139.track,\n              i = _ref139.type;\n\n          _this178.localTrackMap.set(i, {\n            track: e,\n            id: t[r].id,\n            ssrcs: t[r].localSSRC\n          });\n        });\n      }\n    }, {\n      key: \"withdrawLocalTracks\",\n      value: function withdrawLocalTracks(e) {\n        var _this179 = this;\n\n        Xi(e).call(e, function (_ref140) {\n          var _ref141 = _slicedToArray(_ref140, 1),\n              e = _ref141[0];\n\n          _this179.localTrackMap.delete(e);\n        });\n      }\n    }, {\n      key: \"waitTillConnected\",\n      value: function () {\n        var _waitTillConnected = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee168() {\n          var _this180 = this;\n\n          return _regeneratorRuntime.wrap(function _callee168$(_context168) {\n            while (1) {\n              switch (_context168.prev = _context168.next) {\n                case 0:\n                  return _context168.abrupt(\"return\", new As(function (e, t) {\n                    switch (_this180.state) {\n                      case Ol.New:\n                      case Ol.Reconnecting:\n                        {\n                          var _i102 = function _i102(r, n) {\n                            return n === Ol.Disconnected ? (_this180.off(bl.StateChange, _i102), void t(new Ad(ad.UNEXPECTED_ERROR, \"PeerConnection already disconnected.\"))) : n === Ol.Connected ? (_this180.off(bl.StateChange, _i102), void e(void 0)) : void 0;\n                          };\n\n                          _this180.on(bl.StateChange, _i102);\n\n                          break;\n                        }\n\n                      case Ol.Connected:\n                        e(void 0);\n                        break;\n\n                      case Ol.Disconnected:\n                        t(new Ad(ad.UNEXPECTED_ERROR, \"PeerConnection already disconnected.\"));\n                    }\n                  }));\n\n                case 1:\n                case \"end\":\n                  return _context168.stop();\n              }\n            }\n          }, _callee168, this);\n        }));\n\n        function waitTillConnected() {\n          return _waitTillConnected.apply(this, arguments);\n        }\n\n        return waitTillConnected;\n      }()\n    }, {\n      key: \"bindConnectionEvents\",\n      value: function bindConnectionEvents(e) {\n        var _this181 = this;\n\n        e.onConnectionStateChange =\n        /*#__PURE__*/\n        function () {\n          var _ref142 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee169(t) {\n            var i;\n            return _regeneratorRuntime.wrap(function _callee169$(_context169) {\n              while (1) {\n                switch (_context169.prev = _context169.next) {\n                  case 0:\n                    if (!(vc.info(Xe(i = \"[p2pId: \".concat(_this181.store.p2pId, \"]: P2PConnection.onConnectionStateChange(\")).call(i, t, \")\")), _this181.emit(bl.PeerConnectionStateChange, t), \"connected\" !== t || _this181.store.keyMetrics.peerConnectionEnd || _this181.store.peerConnectionEnd(), \"failed\" === t)) {\n                      _context169.next = 11;\n                      break;\n                    }\n\n                    if (!(\"failed\" === e.iceConnectionState)) {\n                      _context169.next = 9;\n                      break;\n                    }\n\n                    Ua(function () {\n                      return _this181.emit(bl.P2PLost);\n                    }, 0);\n                    _this181.iceFailedCount += 1;\n                    _context169.next = 6;\n                    return Th(YA(_this181.iceFailedCount, HA));\n\n                  case 6:\n                    _this181.emit(bl.RequestRestartICE);\n\n                    _context169.next = 11;\n                    break;\n\n                  case 9:\n                    _context169.next = 11;\n                    return _this181.requestReconnect();\n\n                  case 11:\n                  case \"end\":\n                    return _context169.stop();\n                }\n              }\n            }, _callee169, this);\n          }));\n\n          return function (_x268) {\n            return _ref142.apply(this, arguments);\n          };\n        }(), e.onICEConnectionStateChange = function (e) {\n          var t;\n          vc.info(Xe(t = \"[p2pId: \".concat(_this181.store.p2pId, \"]: P2PConnection.onICEConnectionStateChange(\")).call(t, e, \")\")), _this181.emit(bl.IceConnectionStateChange, e);\n        }, e.onICETransportStateChange = function (e) {\n          var t;\n          vc.info(Xe(t = \"[p2pId: \".concat(_this181.store.p2pId, \"]: P2PConnection.onICETransportStateChange(\")).call(t, e, \")\"));\n        }, e.onDTLSTransportStateChange = function (e) {\n          var t;\n          vc.info(Xe(t = \"[p2pId: \".concat(_this181.store.p2pId, \"]: P2PConnection.onDTLSTransportStateChange(\")).call(t, e, \")\"));\n        }, e.onDTLSTransportError = function (e) {\n          var t;\n          vc.info(Xe(t = \"[p2pId: \".concat(_this181.store.p2pId, \"]: P2PConnection.onDTLSTransportError(\")).call(t, e, \")\"));\n        }, e.onFirstAudioDecoded = function (e) {\n          var t, i;\n          var r = Vs(t = BA(FA(i = _this181.remoteUserMap).call(i))).call(t, function (t) {\n            return t._audioSSRC === e;\n          });\n          var n;\n          r && (null === (n = r.audioTrack) || void 0 === n || n.emit(fl.FIRST_FRAME_DECODED), iu.firstRemoteFrame(_this181.store.sessionId, yd.FIRST_AUDIO_DECODE, wd.FIRST_AUDIO_DECODE, {\n            peer: r._uintid,\n            subscribeElapse: Wu.measureFromSubscribeStart(_this181.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this181.store.p2pId\n          }));\n        }, e.onFirstAudioReceived = function (e) {\n          var t, i;\n          var r = Vs(t = BA(FA(i = _this181.remoteUserMap).call(i))).call(t, function (t) {\n            return t._audioSSRC === e;\n          });\n          r && iu.firstRemoteFrame(_this181.store.sessionId, yd.FIRST_AUDIO_RECEIVED, wd.FIRST_AUDIO_RECEIVED, {\n            peer: r._uintid,\n            subscribeElapse: Wu.measureFromSubscribeStart(_this181.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this181.store.p2pId\n          });\n        }, e.onFirstVideoDecoded = function (e, t, i) {\n          var r, n;\n          var s = Vs(r = BA(FA(n = _this181.remoteUserMap).call(n))).call(r, function (t) {\n            return t._videoSSRC === e;\n          });\n          s && iu.firstRemoteFrame(_this181.store.sessionId, yd.FIRST_VIDEO_DECODE, wd.FIRST_VIDEO_DECODE, {\n            peer: s._uintid,\n            videowidth: t,\n            videoheight: i,\n            subscribeElapse: Wu.measureFromSubscribeStart(_this181.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this181.store.p2pId\n          });\n        }, e.onFirstVideoReceived = function (e) {\n          var t, i;\n          var r = Vs(t = BA(FA(i = _this181.remoteUserMap).call(i))).call(t, function (t) {\n            return t._videoSSRC === e;\n          });\n          r && iu.firstRemoteFrame(_this181.store.sessionId, yd.FIRST_VIDEO_RECEIVED, wd.FIRST_VIDEO_RECEIVED, {\n            peer: r._uintid,\n            subscribeElapse: Wu.measureFromSubscribeStart(_this181.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this181.store.p2pId\n          });\n        };\n      }\n    }, {\n      key: \"unbindConnectionEvents\",\n      value: function unbindConnectionEvents(e) {\n        e.onConnectionStateChange = void 0, e.onICEConnectionStateChange = void 0, e.onICETransportStateChange = void 0, e.onDTLSTransportStateChange = void 0, e.onDTLSTransportError = void 0, e.onFirstAudioDecoded = void 0, e.onFirstAudioReceived = void 0, e.onFirstVideoDecoded = void 0, e.onFirstVideoReceived = void 0;\n      }\n    }, {\n      key: \"filterTobeMutedTracks\",\n      value: function filterTobeMutedTracks(e) {\n        var t, i;\n        var r = [],\n            n = this.getAllTracks();\n        if (-1 === Os(n).call(n, e)) return r;\n        var s = this.localTrackMap.get(Nl.LocalAudioTrack);\n        if (e instanceof Fu && (null == s ? void 0 : s.track) instanceof Gu) return s.track.isActive || r.push([Nl.LocalAudioTrack, s]), r;\n        var o = Vs(t = BA(kA(i = this.localTrackMap).call(i))).call(t, function (_ref143) {\n          var _ref144 = _slicedToArray(_ref143, 2),\n              t = _ref144[1].track;\n\n          return e === t;\n        });\n\n        if (o && (r.push(o), o[0] === Nl.LocalVideoTrack)) {\n          var _e114 = this.localTrackMap.get(Nl.LocalVideoLowTrack);\n\n          _e114 && r.push([Nl.LocalVideoLowTrack, _e114]);\n        }\n\n        return r;\n      }\n    }, {\n      key: \"filterTobeUnmutedTracks\",\n      value: function filterTobeUnmutedTracks(e) {\n        var t, i;\n        var r = [],\n            n = this.localTrackMap.get(Nl.LocalAudioTrack);\n        if (e instanceof Fu && (null == n ? void 0 : n.track) instanceof Gu) return n.track.isActive && r.push([Nl.LocalAudioTrack, n]), r;\n        var s = Vs(t = BA(kA(i = this.localTrackMap).call(i))).call(t, function (_ref145) {\n          var _ref146 = _slicedToArray(_ref145, 2),\n              t = _ref146[1].track;\n\n          return e === t;\n        });\n        if (s) if (s[0] === Nl.LocalVideoTrack) {\n          r.push(s);\n\n          var _e115 = this.localTrackMap.get(Nl.LocalVideoLowTrack);\n\n          _e115 && r.push([Nl.LocalVideoLowTrack, _e115]);\n        } else r.push(s);\n        return r;\n      }\n    }, {\n      key: \"createMuteMessage\",\n      value: function createMuteMessage(e) {\n        return Es(e).call(e, function (_ref147) {\n          var _ref148 = _slicedToArray(_ref147, 2),\n              e = _ref148[0],\n              _ref148$ = _ref148[1],\n              t = _ref148$.track,\n              i = _ref148$.ssrcs,\n              r = _ref148$.id;\n\n          var n;\n          var s;\n\n          switch (e) {\n            case Nl.LocalAudioTrack:\n              s = pl.Audio;\n              break;\n\n            case Nl.LocalVideoTrack:\n              s = eo(n = t._hints).call(n, _l.SCREEN_TRACK) ? pl.Screen : pl.High;\n              break;\n\n            case Nl.LocalVideoLowTrack:\n              s = pl.Low;\n          }\n\n          return {\n            stream_type: s,\n            ssrcs: i,\n            mid: r\n          };\n        });\n      }\n    }, {\n      key: \"createUnmuteMessage\",\n      value: function createUnmuteMessage(e) {\n        return Es(e).call(e, function (_ref149) {\n          var _ref150 = _slicedToArray(_ref149, 2),\n              e = _ref150[0],\n              _ref150$ = _ref150[1],\n              t = _ref150$.track,\n              i = _ref150$.ssrcs,\n              r = _ref150$.id;\n\n          var n;\n          var s;\n\n          switch (e) {\n            case Nl.LocalAudioTrack:\n              s = pl.Audio;\n              break;\n\n            case Nl.LocalVideoTrack:\n              s = eo(n = t._hints).call(n, _l.SCREEN_TRACK) ? pl.Screen : pl.High;\n              break;\n\n            case Nl.LocalVideoLowTrack:\n              s = pl.Low;\n          }\n\n          return {\n            stream_type: s,\n            ssrcs: i,\n            mid: r\n          };\n        });\n      }\n    }, {\n      key: \"filterTobeUnSubscribedTracks\",\n      value: function filterTobeUnSubscribedTracks(e, t) {\n        var i = [],\n            r = this.remoteUserMap.get(e);\n        if (!r) return i;\n\n        if (t) {\n          var _n44 = r.get(t);\n\n          if (!_n44) return i;\n          i.push([e, {\n            kind: t,\n            id: _n44\n          }]);\n        } else {\n          var n;\n          Xi(n = BA(kA(r).call(r))).call(n, function (_ref151) {\n            var _ref152 = _slicedToArray(_ref151, 2),\n                t = _ref152[0],\n                r = _ref152[1];\n\n            i.push([e, {\n              kind: t,\n              id: r\n            }]);\n          });\n        }\n\n        return i;\n      }\n    }, {\n      key: \"createUnsubscribeMessage\",\n      value: function createUnsubscribeMessage(e) {\n        var t = [];\n        return Xi(e).call(e, function (_ref153) {\n          var _ref154 = _slicedToArray(_ref153, 2),\n              e = _ref154[0],\n              _ref154$ = _ref154[1],\n              i = _ref154$.kind,\n              r = _ref154$.id;\n\n          switch (i) {\n            case wl.VIDEO:\n              return void (e._videoSSRC && t.push({\n                stream_type: wl.VIDEO,\n                ssrcId: e._videoSSRC\n              }));\n\n            case wl.AUDIO:\n              return void (e._audioSSRC && t.push({\n                stream_type: wl.AUDIO,\n                ssrcId: e._audioSSRC\n              }));\n          }\n        }), t;\n      }\n    }, {\n      key: \"withdrawRemoteTracks\",\n      value: function withdrawRemoteTracks(e) {\n        var _this182 = this;\n\n        Xi(e).call(e, function (_ref155) {\n          var _ref156 = _slicedToArray(_ref155, 2),\n              e = _ref156[0],\n              t = _ref156[1].kind;\n\n          var i = _this182.remoteUserMap.get(e);\n\n          i && (i.delete(t), 0 === BA(kA(i).call(i)).length && _this182.remoteUserMap.delete(e));\n        });\n      }\n    }, {\n      key: \"updateBitrateLimit\",\n      value: function () {\n        var _updateBitrateLimit = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee170(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee170$(_context170) {\n            while (1) {\n              switch (_context170.prev = _context170.next) {\n                case 0:\n                  t = this.localTrackMap.get(Nl.LocalVideoTrack), i = this.localTrackMap.get(Nl.LocalVideoLowTrack);\n                  _context170.t0 = t;\n\n                  if (!_context170.t0) {\n                    _context170.next = 5;\n                    break;\n                  }\n\n                  _context170.next = 5;\n                  return t.track.setBitrateLimit(e.uplink);\n\n                case 5:\n                  _context170.t1 = i && e.low_stream_uplink;\n\n                  if (!_context170.t1) {\n                    _context170.next = 9;\n                    break;\n                  }\n\n                  _context170.next = 9;\n                  return i.track.setBitrateLimit({\n                    max_bitrate: e.low_stream_uplink.bitrate,\n                    min_bitrate: e.low_stream_uplink.bitrate || 0\n                  });\n\n                case 9:\n                case \"end\":\n                  return _context170.stop();\n              }\n            }\n          }, _callee170, this);\n        }));\n\n        function updateBitrateLimit(_x269) {\n          return _updateBitrateLimit.apply(this, arguments);\n        }\n\n        return updateBitrateLimit;\n      }()\n    }, {\n      key: \"isP2PDisconnected\",\n      value: function isP2PDisconnected() {\n        if (this.connection) {\n          return \"connected\" !== this.connection.peerConnectionState;\n        }\n\n        return !0;\n      }\n    }, {\n      key: \"mapPubResToRemoteConfig\",\n      value: function mapPubResToRemoteConfig(e, t) {\n        return Es(e).call(e, function (_ref157, i) {\n          var e = _ref157.stream_type;\n          var r;\n          return null === (r = Vs(t).call(t, function (_ref158) {\n            var t = _ref158.stream_type;\n            return e === t;\n          })) || void 0 === r ? void 0 : r.attributes;\n        });\n      }\n    }, {\n      key: \"bindStatsUploaderEvents\",\n      value: function bindStatsUploaderEvents() {\n        var _this183 = this;\n\n        this.statsUploader.requestStats = function () {\n          return _this183.getStats();\n        }, this.statsUploader.requestLocalMedia = function () {\n          var e;\n          return BA(kA(e = _this183.localTrackMap).call(e));\n        }, this.statsUploader.requestRemoteMedia = function () {\n          var e;\n          return BA(kA(e = _this183.remoteUserMap).call(e));\n        }, this.statsUploader.requestVideoIsReady = function (e) {\n          var t;\n          return !(null === (t = _this183.connection) || void 0 === t || !t.getRemoteVideoIsReady(e));\n        }, this.statsUploader.requestUpload = function (e, t) {\n          return _this183.emit(bl.RequestUploadStats, e, t);\n        };\n      }\n    }, {\n      key: \"unbindStatsUploaderEvents\",\n      value: function unbindStatsUploaderEvents() {\n        this.statsUploader.requestStats = void 0, this.statsUploader.requestLocalMedia = void 0, this.statsUploader.requestRemoteMedia = void 0, this.statsUploader.requestVideoIsReady = void 0;\n      }\n    }, {\n      key: \"requestReconnect\",\n      value: function () {\n        var _requestReconnect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee171() {\n          return _regeneratorRuntime.wrap(function _callee171$(_context171) {\n            while (1) {\n              switch (_context171.prev = _context171.next) {\n                case 0:\n                  this.dtlsFailedCount += 1;\n                  _context171.next = 3;\n                  return Th(YA(this.dtlsFailedCount, HA));\n\n                case 3:\n                  this.emit(bl.RequestReconnect);\n\n                case 4:\n                case \"end\":\n                  return _context171.stop();\n              }\n            }\n          }, _callee171, this);\n        }));\n\n        function requestReconnect() {\n          return _requestReconnect.apply(this, arguments);\n        }\n\n        return requestReconnect;\n      }()\n    }, {\n      key: \"reconnectP2P\",\n      value: function () {\n        var _reconnectP2P = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee172() {\n          var e, t, i, r;\n          return _regeneratorRuntime.wrap(function _callee172$(_context172) {\n            while (1) {\n              switch (_context172.prev = _context172.next) {\n                case 0:\n                  i = BA(kA(e = this.localTrackMap).call(e)), r = this.createGatewayUnpublishMessage(i);\n                  BA(kA(t = this.remoteUserMap).call(t));\n                  _context172.t0 = r.length > 0;\n\n                  if (!_context172.t0) {\n                    _context172.next = 6;\n                    break;\n                  }\n\n                  _context172.next = 6;\n                  return kh(this, bl.RequestUnpublishForReconnectPC, r);\n\n                case 6:\n                  this.disconnectForReconnect();\n                  this.emit(bl.RequestReconnectPC);\n\n                case 8:\n                case \"end\":\n                  return _context172.stop();\n              }\n            }\n          }, _callee172, this);\n        }));\n\n        function reconnectP2P() {\n          return _reconnectP2P.apply(this, arguments);\n        }\n\n        return reconnectP2P;\n      }()\n    }, {\n      key: \"canPublishLowStream\",\n      value: function canPublishLowStream() {\n        var e;\n        return this.localTrackMap.has(Nl.LocalVideoTrack) || no(e = this.pendingLocalTracks).call(e, function (e) {\n          return e instanceof CI;\n        });\n      }\n    }, {\n      key: \"throwIfTrackTypeNotMatch\",\n      value: function throwIfTrackTypeNotMatch(e) {\n        if (Fr(e).call(e, function (e) {\n          return e instanceof CI;\n        }).length > 1) throw new Ad(ad.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);\n        if (Fr(e).call(e, function (e) {\n          return e instanceof Fu;\n        }).length > 1 && (no(e).call(e, function (e) {\n          return e instanceof Fu && e._bypassWebAudio;\n        }) || !Ul().webAudioMediaStreamDest)) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");\n        var _iteratorNormalCompletion22 = true;\n        var _didIteratorError22 = false;\n        var _iteratorError22 = undefined;\n\n        try {\n          for (var _iterator22 = e[Symbol.iterator](), _step22; !(_iteratorNormalCompletion22 = (_step22 = _iterator22.next()).done); _iteratorNormalCompletion22 = true) {\n            var _n45 = _step22.value;\n            var t, i, r;\n            if (_n45 instanceof CI && no(t = this.pendingLocalTracks).call(t, function (e) {\n              return e instanceof CI;\n            })) throw new Ad(ad.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);\n            if (_n45 instanceof Fu && no(i = this.pendingLocalTracks).call(i, function (e) {\n              return e instanceof Fu;\n            }) && (!Ul().webAudioMediaStreamDest || _n45._bypassWebAudio || no(r = this.pendingLocalTracks).call(r, function (e) {\n              return e instanceof Fu && e._bypassWebAudio;\n            }))) throw new Ad(ad.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");\n          }\n        } catch (err) {\n          _didIteratorError22 = true;\n          _iteratorError22 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion22 && _iterator22.return != null) {\n              _iterator22.return();\n            }\n          } finally {\n            if (_didIteratorError22) {\n              throw _iteratorError22;\n            }\n          }\n        }\n      }\n    }, {\n      key: \"getLowVideoTrack\",\n      value: function getLowVideoTrack(e, t) {\n        var i = Ul().supportDualStreamEncoding,\n            r = Jf({}, {\n          width: 160,\n          height: 120,\n          framerate: 15,\n          bitrate: 50\n        }, {}, t);\n        var n;\n        n = i ? e._mediaStreamTrack.clone() : Ff(e, r);\n        var s = new CI(n, Jf({}, i && {\n          scaleResolutionDownBy: Ih(r, e)\n        }, {\n          frameRate: r.framerate,\n          bitrateMax: r.bitrate,\n          bitrateMin: r.bitrate\n        }));\n        return s._hints.push(_l.LOW_STREAM), s;\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        var t = this._state;\n        this._state = e, this.emit(bl.StateChange, t, this._state);\n      }\n    }]);\n\n    return Zf;\n  }(Ll);\n\n  function $f(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee173() {\n      var i,\n          n,\n          _len25,\n          e,\n          _key25,\n          _args173 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee173$(_context173) {\n        while (1) {\n          switch (_context173.prev = _context173.next) {\n            case 0:\n              i = this.mutex;\n              _context173.next = 3;\n              return i.lock(\"From P2PChannel.\".concat(t));\n\n            case 3:\n              n = _context173.sent;\n              _context173.prev = 4;\n\n              for (_len25 = _args173.length, e = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {\n                e[_key25] = _args173[_key25];\n              }\n\n              _context173.next = 8;\n              return r.apply(this, e);\n\n            case 8:\n              return _context173.abrupt(\"return\", _context173.sent);\n\n            case 9:\n              _context173.prev = 9;\n              n();\n              return _context173.finish(9);\n\n            case 12:\n            case \"end\":\n              return _context173.stop();\n          }\n        }\n      }, _callee173, this, [[4,, 9, 12]]);\n    })), i;\n  }\n\n  Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [Object]), zf(\"design:returntype\", As)], Zf.prototype, \"startP2PConnection\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [Object, Object, Array, Object, String, String, String, String]), zf(\"design:returntype\", As)], Zf.prototype, \"connect\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [Array]), zf(\"design:returntype\", As)], Zf.prototype, \"unpublish\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", []), zf(\"design:returntype\", As)], Zf.prototype, \"unpublishLowStream\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [RI, String, Number, Array]), zf(\"design:returntype\", As)], Zf.prototype, \"subscribe\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [RI, String]), zf(\"design:returntype\", As)], Zf.prototype, \"unsubscribe\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [RI, String]), zf(\"design:returntype\", As)], Zf.prototype, \"muteRemote\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [RI, String]), zf(\"design:returntype\", As)], Zf.prototype, \"unmuteRemote\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", []), zf(\"design:returntype\", As)], Zf.prototype, \"disconnectForReconnect\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", []), zf(\"design:returntype\", As)], Zf.prototype, \"reEstablish\", null), Xf([$f, zf(\"design:type\", Function), zf(\"design:paramtypes\", [Object]), zf(\"design:returntype\", As)], Zf.prototype, \"updateBitrateLimit\", null);\n  var em = n(function () {\n    $t(1);\n  });\n  G({\n    target: \"Object\",\n    stat: !0,\n    forced: em,\n    sham: !Xt\n  }, {\n    getPrototypeOf: function getPrototypeOf(e) {\n      return $t(Ie(e));\n    }\n  });\n  var tm = L.Object.getPrototypeOf,\n      im = DI;\n\n  function rm(e) {\n    return \"Minified Redux error #\" + e + \"; visit https://redux.js.org/Errors?code=\" + e + \" for the full message or use the non-minified dev environment for full errors. \";\n  }\n\n  var nm,\n      sm = \"function\" == typeof im && im.observable || \"@@observable\",\n      om = function om() {\n    return Math.random().toString(36).substring(7).split(\"\").join(\".\");\n  },\n      am = {\n    INIT: \"@@redux/INIT\" + om(),\n    REPLACE: \"@@redux/REPLACE\" + om(),\n    PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n      return \"@@redux/PROBE_UNKNOWN_ACTION\" + om();\n    }\n  };\n\n  function cm(e) {\n    if (\"object\" != typeof e || null === e) return !1;\n\n    for (var t = e; null !== tm(t);) {\n      t = tm(t);\n    }\n\n    return tm(e) === t;\n  }\n\n  function dm(e, t, i) {\n    var r;\n    if (\"function\" == typeof t && \"function\" == typeof i || \"function\" == typeof i && \"function\" == typeof arguments[3]) throw new Error(rm(0));\n\n    if (\"function\" == typeof t && void 0 === i && (i = t, t = void 0), void 0 !== i) {\n      if (\"function\" != typeof i) throw new Error(rm(1));\n      return i(dm)(e, t);\n    }\n\n    if (\"function\" != typeof e) throw new Error(rm(2));\n    var n = e,\n        s = t,\n        o = [],\n        a = o,\n        c = !1;\n\n    function d() {\n      a === o && (a = Bs(o).call(o));\n    }\n\n    function l() {\n      if (c) throw new Error(rm(3));\n      return s;\n    }\n\n    function A(e) {\n      if (\"function\" != typeof e) throw new Error(rm(4));\n      if (c) throw new Error(rm(5));\n      var t = !0;\n      return d(), a.push(e), function () {\n        if (t) {\n          if (c) throw new Error(rm(6));\n          t = !1, d();\n          var i = Os(a).call(a, e);\n          Ss(a).call(a, i, 1), o = null;\n        }\n      };\n    }\n\n    function u(e) {\n      if (!cm(e)) throw new Error(rm(7));\n      if (void 0 === e.type) throw new Error(rm(8));\n      if (c) throw new Error(rm(9));\n\n      try {\n        c = !0, s = n(s, e);\n      } finally {\n        c = !1;\n      }\n\n      for (var t = o = a, i = 0; i < t.length; i++) {\n        (0, t[i])();\n      }\n\n      return e;\n    }\n\n    function h(e) {\n      if (\"function\" != typeof e) throw new Error(rm(10));\n      n = e, u({\n        type: am.REPLACE\n      });\n    }\n\n    function p() {\n      var e,\n          t = A;\n      return (e = {\n        subscribe: function subscribe(e) {\n          if (\"object\" != typeof e || null === e) throw new Error(rm(11));\n\n          function i() {\n            e.next && e.next(l());\n          }\n\n          return i(), {\n            unsubscribe: t(i)\n          };\n        }\n      })[sm] = function () {\n        return this;\n      }, e;\n    }\n\n    return u({\n      type: am.INIT\n    }), (r = {\n      dispatch: u,\n      subscribe: A,\n      getState: l,\n      replaceReducer: h\n    })[sm] = p, r;\n  }\n\n  function lm(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Am(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = lm(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = lm(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  !function (e) {\n    e.SET_SESSION_ID = \"SET_SESSION_ID\", e.SET_P2P_ID = \"SET_P2P_id\", e.SET_UID = \"SET_UID\", e.SET_PUB_ID = \"SET_PUB_ID\", e.KEY_METRIC_CLIENT_CREATED = \"KEY_METRIC_CLIENT_CREATED\", e.KEY_METRIC_JOIN_START = \"KEY_METRIC_JOIN_START\", e.KEY_METRIC_JOIN_END = \"KEY_METRIC_JOIN_END\", e.KEY_METRIC_REQUEST_AP_START = \"KEY_METRIC_REQUEST_AP_START\", e.KEY_METRIC_REQUEST_AP_END = \"KEY_METRIC_REQUEST_AP_END\", e.KEY_METRIC_JOIN_GATEWAY_START = \"KEY_METRIC_JOIN_GATEWAY_START\", e.KEY_METRIC_JOIN_GATEWAY_END = \"KEY_METRIC_JOIN_GATEWAY_END\", e.KEY_METRIC_PEER_CONNECTION_START = \"KEY_METRIC_PEER_CONNECTION_START\", e.KEY_METRIC_PEER_CONNECTION_END = \"KEY_METRIC_PEER_CONNECTION_START\", e.KEY_METRIC_PUBLISH = \"KEY_METRIC_PUBLISH\", e.KEY_METRIC_SUBSCRIBE = \"KEY_METRIC_SUBSCRIBE\";\n  }(nm || (nm = {}));\n\n  var um =\n  /*#__PURE__*/\n  function () {\n    function um(e, t, i) {\n      _classCallCheck(this, um);\n\n      var r = {\n        codec: e,\n        mode: t,\n        clientId: i,\n        sessionId: null,\n        p2pId: 0,\n        pubId: 0,\n        subId: 0,\n        keyMetrics: {\n          publish: [],\n          subscribe: []\n        }\n      };\n      this.reducer = function () {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : r;\n        var t = arguments.length > 1 ? arguments[1] : undefined;\n\n        switch (t.type) {\n          case nm.SET_SESSION_ID:\n            return Am({}, e, {\n              sessionId: t.sessionId\n            });\n\n          case nm.SET_P2P_ID:\n            return Am({}, e, {\n              p2pId: t.p2pId\n            });\n\n          case nm.SET_UID:\n            return Am({}, e, {\n              uid: t.uid\n            });\n\n          case nm.SET_PUB_ID:\n            return Am({}, e, {\n              pubId: t.pubId\n            });\n\n          case nm.KEY_METRIC_CLIENT_CREATED:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                clientCreated: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_JOIN_START:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                joinStart: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_JOIN_END:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                joinEnd: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_REQUEST_AP_START:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                requestAPStart: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_REQUEST_AP_END:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                requestAPEnd: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_JOIN_GATEWAY_START:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                joinGatewayStart: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_JOIN_GATEWAY_END:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                joinGatewayEnd: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_PEER_CONNECTION_START:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                peerConnectionStart: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_PEER_CONNECTION_END:\n            return Am({}, e, {\n              keyMetrics: Am({}, e.keyMetrics, {\n                peerConnectionEnd: t.metric\n              })\n            });\n\n          case nm.KEY_METRIC_PUBLISH:\n            {\n              var _i103 = e.keyMetrics.publish,\n                  _r64 = OI(_i103).call(_i103, function (e) {\n                return e.trackId === t.metric.trackId;\n              });\n\n              return -1 !== _r64 ? (_i103[_r64] = Am({}, _i103[_r64], {}, t.metric), Am({}, e, {\n                keyMetrics: Am({}, e.keyMetrics, {\n                  publish: _toConsumableArray(_i103)\n                })\n              })) : Am({}, e, {\n                keyMetrics: Am({}, e.keyMetrics, {\n                  publish: [].concat(_toConsumableArray(e.keyMetrics.publish), [t.metric])\n                })\n              });\n            }\n\n          case nm.KEY_METRIC_SUBSCRIBE:\n            {\n              var _i104 = e.keyMetrics.subscribe,\n                  _r65 = OI(_i104).call(_i104, function (e) {\n                return e.userId === t.metric.userId && e.type === t.metric.type;\n              });\n\n              return -1 !== _r65 ? (_i104[_r65] = Am({}, _i104[_r65], {}, t.metric), Am({}, e, {\n                keyMetrics: Am({}, e.keyMetrics, {\n                  subscribe: _toConsumableArray(_i104)\n                })\n              })) : Am({}, e, {\n                keyMetrics: Am({}, e.keyMetrics, {\n                  subscribe: [].concat(_toConsumableArray(e.keyMetrics.subscribe), [t.metric])\n                })\n              });\n            }\n\n          default:\n            return e;\n        }\n      }, this.store = dm(this.reducer);\n    }\n\n    _createClass(um, [{\n      key: \"clientCreated\",\n      value: function clientCreated() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_CLIENT_CREATED,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"joinStart\",\n      value: function joinStart() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_JOIN_START,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"joinEnd\",\n      value: function joinEnd() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_JOIN_END,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"requestAPStart\",\n      value: function requestAPStart() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_REQUEST_AP_START,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"requestAPEnd\",\n      value: function requestAPEnd() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_REQUEST_AP_END,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"joinGatewayStart\",\n      value: function joinGatewayStart() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_JOIN_GATEWAY_START,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"joinGatewayEnd\",\n      value: function joinGatewayEnd() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_JOIN_GATEWAY_END,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"peerConnectionStart\",\n      value: function peerConnectionStart() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_PEER_CONNECTION_START,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"peerConnectionEnd\",\n      value: function peerConnectionEnd() {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_PEER_CONNECTION_END,\n          metric: performance.now()\n        });\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t, i, r) {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_PUBLISH,\n          metric: Am({\n            trackId: e,\n            type: t\n          }, i && {\n            publishStart: i\n          }, {}, r && {\n            publishEnd: r\n          })\n        });\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(e, t, i, r, n) {\n        this.store.dispatch({\n          type: nm.KEY_METRIC_SUBSCRIBE,\n          metric: Am({\n            userId: e,\n            type: t\n          }, i && {\n            subscribeStart: i\n          }, {}, r && {\n            subscribeEnd: r\n          }, {}, n && {\n            firstFrame: n\n          })\n        });\n      }\n    }, {\n      key: \"sessionId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: nm.SET_SESSION_ID,\n          sessionId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().sessionId;\n      }\n    }, {\n      key: \"codec\",\n      get: function get() {\n        return this.store.getState().codec;\n      }\n    }, {\n      key: \"clientId\",\n      get: function get() {\n        return this.store.getState().clientId;\n      }\n    }, {\n      key: \"p2pId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: nm.SET_P2P_ID,\n          p2pId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().p2pId;\n      }\n    }, {\n      key: \"uid\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: nm.SET_UID,\n          uid: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().uid;\n      }\n    }, {\n      key: \"pubId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: nm.SET_PUB_ID,\n          pubId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().pubId;\n      }\n    }, {\n      key: \"keyMetrics\",\n      get: function get() {\n        return this.store.getState().keyMetrics;\n      }\n    }]);\n\n    return um;\n  }();\n\n  var hm;\n\n  var pm = function pm() {\n    return \"HTTPS\" === (hm || hm || (hm = (window.location.protocol.split(\":\")[0] || \"\").toUpperCase(), hm));\n  },\n      Em = function Em() {\n    return void 0 !== window.isSecureContext;\n  };\n\n  var gm =\n  /*#__PURE__*/\n  function () {\n    function gm(e, t) {\n      _classCallCheck(this, gm);\n\n      var i;\n      this.name = e, this.time = performance.now(), this.sequence = Os(i = Bl[t]).call(i, e);\n    }\n\n    _createClass(gm, [{\n      key: \"setElapse\",\n      value: function setElapse(e) {\n        this.elapse = e;\n      }\n    }]);\n\n    return gm;\n  }();\n\n  var _m = new Li();\n\n  function Im(e, t) {\n    var i = new fm(e, t);\n    return _m.set(e, i), i;\n  }\n\n  var fm =\n  /*#__PURE__*/\n  function () {\n    function fm(e, t) {\n      _classCallCheck(this, fm);\n\n      this.records = [], this._id = e, this._group = t, this._localTimeStamp = La(), this._performanceTimeStamp = performance.now();\n    }\n\n    _createClass(fm, [{\n      key: \"checkPoint\",\n      value: function checkPoint(e) {\n        var t;\n        var i = new gm(e, this._group);\n        -1 === i.sequence && vc.warning(\"[\".concat(this._id, \"] check point record failed, cannot get the sequence\")), this.records.push(i);\n        var r = Vs(t = this.records).call(t, function (e) {\n          return e.sequence === i.sequence - 1;\n        });\n        r && i.setElapse(i.time - r.time);\n      }\n    }, {\n      key: \"getRecord\",\n      value: function getRecord(e) {\n        var t;\n        return Vs(t = this.records).call(t, function (t) {\n          return t && t.name === e;\n        });\n      }\n    }, {\n      key: \"resetRecords\",\n      value: function resetRecords() {\n        this.records.length = 0;\n      }\n    }]);\n\n    return fm;\n  }();\n\n  function mm(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function Cm(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = mm(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = mm(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var Sm,\n      Rm,\n      Tm,\n      vm,\n      ym,\n      wm,\n      Nm = function Nm(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      Om = function Om(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var bm =\n  /*#__PURE__*/\n  function (_Ll20) {\n    _inherits(bm, _Ll20);\n\n    function bm(e) {\n      var _this184;\n\n      _classCallCheck(this, bm);\n\n      var t, i, r, n;\n      var s;\n      if (_this184 = _possibleConstructorReturn(this, _getPrototypeOf(bm).call(this)), _this184._users = [], _this184._sessionId = null, _this184._leaveMutex = new su(\"client-leave\"), _this184._publishMutex = new su(\"client-publish\"), _this184._renewTokenMutex = new su(\"client-renewtoken\"), _this184._subscribeMutex = new Li(), _this184._encryptionMode = \"none\", _this184._encryptionSecret = null, _this184._encryptionSalt = null, _this184._turnServer = {\n        servers: [],\n        mode: \"auto\"\n      }, _this184._cloudProxyServerMode = \"disabled\", _this184._isDualStreamEnabled = !1, _this184._streamFallbackTypeCacheMap = new Li(), _this184._remoteStreamTypeCacheMap = new Li(), _this184._axiosCancelSource = mc.CancelToken.source(), _this184._networkQualitySensitivity = \"normal\", _this184._useLocalAccessPoint = !1, _this184._joinAndNotLeaveYet = !1, _this184._handleLocalTrackEnable = function (e, t, i) {\n        _this184.publish(e, !1).then(t).catch(i);\n      }, _this184._handleLocalTrackDisable = function (e, t, i) {\n        _this184.unpublish(e, !1).then(t).catch(i);\n      }, _this184._handleUserOnline = function (e) {\n        var t;\n        _this184.isStringUID && \"string\" != typeof e.uid && vc.error(\"[\".concat(_this184._clientId, \"] StringUID is Mixed with UintUID\"));\n        var i = Vs(t = _this184._users).call(t, function (t) {\n          return t.uid === e.uid;\n        });\n        if (i) i._trust_in_room_ = !0;else {\n          var _t135 = new RI(e.uid, e.uint_id || e.uid);\n\n          _this184._users.push(_t135), vc.debug(\"[\".concat(_this184._clientId, \"] user online\"), e.uid), _this184.emit(Qd.USER_JOINED, _t135);\n        }\n      }, _this184._handleUserOffline = function (e) {\n        var t;\n        var i = Vs(t = _this184._users).call(t, function (t) {\n          return t.uid === e.uid;\n        });\n        i && (_this184._handleRemoveStream(e), Mh(_this184._users, i), _this184._remoteStreamTypeCacheMap.delete(i.uid), _this184._streamFallbackTypeCacheMap.delete(i.uid), vc.debug(\"[\".concat(_this184._clientId, \"] user offline\"), e.uid, \"reason:\", e.reason), _this184.emit(Qd.USER_LEAVED, i, e.reason));\n      }, _this184._handleAddAudioOrVideoStream = function (e, t, i, r, n, s) {\n        var o, a, c;\n        var d = Vs(o = _this184._users).call(o, function (e) {\n          return e.uid === t;\n        });\n        if (!d) return void vc.error(\"[\".concat(_this184._clientId, \"] can not find target user!(on_add_stream)\"));\n        vc.debug(Xe(a = Xe(c = \"[\".concat(_this184._clientId, \"] stream added with uid \")).call(c, t, \", type \")).call(a, e));\n        var l = \"audio\" === e ? d.hasAudio : d.hasVideo;\n        var A, u;\n        (d._uintid || (d._uintid = n || t), d._trust_stream_added_state_ = !0, \"audio\" === e ? (d._audio_added_ = !0, void 0 !== i && (d._audioSSRC = i), void 0 !== r && (d._cname = r), s && (d._audioOrtc = s)) : (d._video_added_ = !0, void 0 !== i && (d._videoSSRC = i), void 0 !== r && (d._cname = r), s && (d._videoOrtc = s)), (\"audio\" === e ? d.hasAudio : d.hasVideo) && !l) && (vc.info(Xe(A = Xe(u = \"[\".concat(_this184._clientId, \"] remote user \")).call(u, d.uid, \" published \")).call(A, e)), _this184.emit(Qd.USER_PUBLISHED, d, e));\n        \"video\" === e ? iu.onGatewayStream(_this184._sessionId, yd.ON_ADD_VIDEO_STREAM, wd.ON_ADD_VIDEO_STREAM, {\n          peer: n || t\n        }) : iu.onGatewayStream(_this184._sessionId, yd.ON_ADD_AUDIO_STREAM, wd.ON_ADD_AUDIO_STREAM, {\n          peer: n || t\n        }), _this184._p2pChannel.hasPendingRemoteMedia(d, e) && _this184.subscribe(d, e).catch(function (e) {\n          vc.error(\"[\".concat(_this184._clientId, \"] resubscribe error\"), e.toString());\n        });\n      }, _this184._handleRemoveStream =\n      /*#__PURE__*/\n      function () {\n        var _ref160 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee174(e) {\n          var t, i, r, n, s;\n          return _regeneratorRuntime.wrap(function _callee174$(_context174) {\n            while (1) {\n              switch (_context174.prev = _context174.next) {\n                case 0:\n                  r = Vs(t = _this184._users).call(t, function (t) {\n                    return t.uid === e.uid;\n                  });\n\n                  if (r) {\n                    _context174.next = 3;\n                    break;\n                  }\n\n                  return _context174.abrupt(\"return\", void vc.warning(\"[\".concat(_this184._clientId, \"] can not find target user!(on_remove_stream)\")));\n\n                case 3:\n                  vc.debug(Xe(i = \"[\".concat(_this184._clientId, \"] stream removed with uid \")).call(i, e.uid));\n\n                  n = function n() {};\n\n                  r.hasAudio && r.hasVideo ? n = function n() {\n                    var e, t;\n                    vc.info(Xe(e = \"[\".concat(_this184._clientId, \"] remote user \")).call(e, r.uid, \" unpublished audio track\")), _this184.emit(Qd.USER_UNPUBLISHED, r, \"audio\"), vc.info(Xe(t = \"[\".concat(_this184._clientId, \"] remote user \")).call(t, r.uid, \" unpublished video track\")), _this184.emit(Qd.USER_UNPUBLISHED, r, \"video\");\n                  } : r.hasVideo ? n = function n() {\n                    var e;\n                    vc.info(Xe(e = \"[\".concat(_this184._clientId, \"] remote user \")).call(e, r.uid, \" unpublished video track\")), _this184.emit(Qd.USER_UNPUBLISHED, r, \"video\");\n                  } : r.hasAudio && (n = function n() {\n                    var e;\n                    vc.info(Xe(e = \"[\".concat(_this184._clientId, \"] remote user \")).call(e, r.uid, \" unpublished audio track\")), _this184.emit(Qd.USER_UNPUBLISHED, r, \"audio\");\n                  }), r._trust_stream_added_state_ = !0, r._audio_added_ = !1, r._video_added_ = !1;\n                  _context174.next = 8;\n                  return _this184._p2pChannel.unsubscribe(r);\n\n                case 8:\n                  s = _context174.sent;\n                  _context174.t0 = s;\n\n                  if (!_context174.t0) {\n                    _context174.next = 13;\n                    break;\n                  }\n\n                  _context174.next = 13;\n                  return _this184._gateway.unsubscribe(s, r.uid);\n\n                case 13:\n                  r._audioSSRC = void 0;\n                  r._videoSSRC = void 0;\n                  r._audioOrtc = void 0;\n                  r._videoOrtc = void 0;\n                  iu.onGatewayStream(_this184._sessionId, yd.ON_REMOVE_STREAM, wd.ON_REMOVE_STREAM, {\n                    peer: e.uint_id || e.uid\n                  });\n                  n();\n\n                case 19:\n                case \"end\":\n                  return _context174.stop();\n              }\n            }\n          }, _callee174, this);\n        }));\n\n        return function (_x270) {\n          return _ref160.apply(this, arguments);\n        };\n      }(), _this184._handleSetStreamLocalEnable =\n      /*#__PURE__*/\n      function () {\n        var _ref161 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee175(e, t, i) {\n          var r, n, s, o, a, c, _e116, d, l, _e117, _e118, A, u, _e119, h, p, E, g, _;\n\n          return _regeneratorRuntime.wrap(function _callee175$(_context175) {\n            while (1) {\n              switch (_context175.prev = _context175.next) {\n                case 0:\n                  a = Vs(r = _this184._users).call(r, function (e) {\n                    return e.uid === t;\n                  });\n\n                  if (a) {\n                    _context175.next = 3;\n                    break;\n                  }\n\n                  return _context175.abrupt(\"return\", void vc.error(\"[\".concat(_this184._clientId, \"] can not find target user!(disable_local)\")));\n\n                case 3:\n                  vc.debug(Xe(n = Xe(s = Xe(o = \"[\".concat(_this184._clientId, \"] local \")).call(o, e, \" \")).call(s, i ? \"enabled\" : \"disabled\", \" with uid \")).call(n, t));\n                  c = \"audio\" === e ? a.hasAudio : a.hasVideo;\n\n                  if (!(\"audio\" === e)) {\n                    _context175.next = 14;\n                    break;\n                  }\n\n                  a._trust_audio_enabled_state_ = !0;\n                  _e116 = a._audio_enabled_;\n\n                  if (!(a._audio_enabled_ = i, a._audio_enabled_ === _e116)) {\n                    _context175.next = 10;\n                    break;\n                  }\n\n                  return _context175.abrupt(\"return\");\n\n                case 10:\n                  _e117 = a._audio_enabled_ ? \"enable-local-audio\" : \"disable-local-audio\";\n                  vc.debug(Xe(d = Xe(l = \"[\".concat(_this184._clientId, \"] user-info-updated, uid: \")).call(l, t, \", msg: \")).call(d, _e117)), _this184.emit(Qd.USER_INFO_UPDATED, t, _e117);\n                  _context175.next = 20;\n                  break;\n\n                case 14:\n                  a._trust_video_enabled_state_ = !0;\n                  _e118 = a._video_enabled_;\n\n                  if (!(a._video_enabled_ = i, a._video_enabled_ === _e118)) {\n                    _context175.next = 18;\n                    break;\n                  }\n\n                  return _context175.abrupt(\"return\");\n\n                case 18:\n                  _e119 = a._video_enabled_ ? \"enable-local-video\" : \"disable-local-video\";\n                  vc.debug(Xe(A = Xe(u = \"[\".concat(_this184._clientId, \"] user-info-update, uid: \")).call(u, t, \", msg: \")).call(A, _e119)), _this184.emit(Qd.USER_INFO_UPDATED, t, _e119);\n\n                case 20:\n                  h = \"audio\" === e ? a.hasAudio : a.hasVideo;\n\n                  if (!(c !== h)) {\n                    _context175.next = 35;\n                    break;\n                  }\n\n                  if (!(!c && h)) {\n                    _context175.next = 26;\n                    break;\n                  }\n\n                  _context175.t1 = (vc.info(Xe(p = Xe(E = \"[\".concat(_this184._clientId, \"] remote user \")).call(E, t, \" published \")).call(p, e)), void _this184.emit(Qd.USER_PUBLISHED, a, e));\n                  _context175.next = 32;\n                  break;\n\n                case 26:\n                  \"video\" === e && a._videoTrack && a._videoTrack._destroy();\n                  \"audio\" === e && a._audioTrack;\n                  _context175.next = 30;\n                  return _this184._p2pChannel.muteRemote(a, e);\n\n                case 30:\n                  vc.info(Xe(g = Xe(_ = \"[\".concat(_this184._clientId, \"] remote user \")).call(_, t, \" unpublished \")).call(g, e));\n                  _context175.t1 = void _this184.emit(Qd.USER_UNPUBLISHED, a, e);\n\n                case 32:\n                  _context175.t0 = _context175.t1;\n                  _context175.next = 36;\n                  break;\n\n                case 35:\n                  _context175.t0 = void 0;\n\n                case 36:\n                  return _context175.abrupt(\"return\", _context175.t0);\n\n                case 37:\n                case \"end\":\n                  return _context175.stop();\n              }\n            }\n          }, _callee175, this);\n        }));\n\n        return function (_x271, _x272, _x273) {\n          return _ref161.apply(this, arguments);\n        };\n      }(), _this184._handleMuteStream =\n      /*#__PURE__*/\n      function () {\n        var _ref162 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee176(e, t, i) {\n          var r, n, s, o, _t136, a, c, _t137, _t138, d, l, _t139, A, u, h, p, E;\n\n          return _regeneratorRuntime.wrap(function _callee176$(_context176) {\n            while (1) {\n              switch (_context176.prev = _context176.next) {\n                case 0:\n                  vc.debug(\"[\".concat(_this184._clientId, \"] receive mute message\"), e, t, i);\n                  n = Vs(r = _this184._users).call(r, function (t) {\n                    return t.uid === e;\n                  });\n\n                  if (n) {\n                    _context176.next = 4;\n                    break;\n                  }\n\n                  return _context176.abrupt(\"return\", void vc.warning(Xe(s = \"[\".concat(_this184._clientId, \"] can not find remote user, ignore mute event, uid: \")).call(s, e)));\n\n                case 4:\n                  o = \"audio\" === t ? n.hasAudio : n.hasVideo;\n\n                  if (!(\"audio\" === t)) {\n                    _context176.next = 14;\n                    break;\n                  }\n\n                  n._trust_audio_mute_state_ = !0;\n                  _t136 = n._audio_muted_;\n\n                  if (!(n._audio_muted_ = i, n._audio_muted_ === _t136)) {\n                    _context176.next = 10;\n                    break;\n                  }\n\n                  return _context176.abrupt(\"return\");\n\n                case 10:\n                  _t137 = n._audio_muted_ ? \"mute-audio\" : \"unmute-audio\";\n                  vc.debug(Xe(a = Xe(c = \"[\".concat(_this184._clientId, \"] user-info-update, uid: \")).call(c, e, \", msg: \")).call(a, _t137)), _this184.emit(Qd.USER_INFO_UPDATED, e, _t137);\n                  _context176.next = 20;\n                  break;\n\n                case 14:\n                  n._trust_video_mute_state_ = !0;\n                  _t138 = n._video_muted_;\n\n                  if (!(n._video_muted_ = i, n._video_muted_ === _t138)) {\n                    _context176.next = 18;\n                    break;\n                  }\n\n                  return _context176.abrupt(\"return\");\n\n                case 18:\n                  _t139 = n._video_muted_ ? \"mute-video\" : \"unmute-video\";\n                  vc.debug(Xe(d = Xe(l = \"[\".concat(_this184._clientId, \"] user-info-update, uid: \")).call(l, e, \", msg: \")).call(d, _t139)), _this184.emit(Qd.USER_INFO_UPDATED, e, _t139);\n\n                case 20:\n                  A = \"audio\" === t ? n.hasAudio : n.hasVideo;\n\n                  if (!(o !== A)) {\n                    _context176.next = 35;\n                    break;\n                  }\n\n                  if (!(!o && A)) {\n                    _context176.next = 26;\n                    break;\n                  }\n\n                  _context176.t1 = (vc.info(Xe(u = Xe(h = \"[\".concat(_this184._clientId, \"] remote user \")).call(h, e, \" published \")).call(u, t)), void _this184.emit(Qd.USER_PUBLISHED, n, t));\n                  _context176.next = 32;\n                  break;\n\n                case 26:\n                  \"video\" === t && n._videoTrack && n._videoTrack._destroy();\n                  \"audio\" === t && n._audioTrack;\n                  _context176.next = 30;\n                  return _this184._p2pChannel.muteRemote(n, t);\n\n                case 30:\n                  vc.info(Xe(p = Xe(E = \"[\".concat(_this184._clientId, \"] remote user \")).call(E, e, \" unpublished \")).call(p, t));\n                  _context176.t1 = void _this184.emit(Qd.USER_UNPUBLISHED, n, t);\n\n                case 32:\n                  _context176.t0 = _context176.t1;\n                  _context176.next = 36;\n                  break;\n\n                case 35:\n                  _context176.t0 = void 0;\n\n                case 36:\n                  return _context176.abrupt(\"return\", _context176.t0);\n\n                case 37:\n                case \"end\":\n                  return _context176.stop();\n              }\n            }\n          }, _callee176, this);\n        }));\n\n        return function (_x274, _x275, _x276) {\n          return _ref162.apply(this, arguments);\n        };\n      }(), _this184._handleP2PLost =\n      /*#__PURE__*/\n      function () {\n        var _ref163 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee177(e) {\n          return _regeneratorRuntime.wrap(function _callee177$(_context177) {\n            while (1) {\n              switch (_context177.prev = _context177.next) {\n                case 0:\n                  vc.debug(\"[\".concat(_this184._clientId, \"] receive p2p lost\"), e);\n\n                  if (!(mr(e.p2pid, 10) === _this184.store.p2pId)) {\n                    _context177.next = 6;\n                    break;\n                  }\n\n                  _context177.next = 4;\n                  return _this184._p2pChannel.requestReconnect();\n\n                case 4:\n                  _context177.next = 7;\n                  break;\n\n                case 6:\n                  vc.warning(\"P2PLost stream not found\", e);\n\n                case 7:\n                case \"end\":\n                  return _context177.stop();\n              }\n            }\n          }, _callee177, this);\n        }));\n\n        return function (_x277) {\n          return _ref163.apply(this, arguments);\n        };\n      }(), _this184._handleTokenWillExpire = function () {\n        vc.debug(\"[\".concat(_this184._clientId, \"] received message onTokenPrivilegeWillExpire\")), _this184.emit(Qd.ON_TOKEN_PRIVILEGE_WILL_EXPIRE);\n      }, _this184._handleBeforeUnload = function (e) {\n        \"beforeunload\" === e.type && void 0 !== e.returnValue && \"\" !== e.returnValue || (_this184.leave(), vc.info(\"[\".concat(_this184._clientId, \"] auto leave onbeforeunload or pagehide\")));\n      }, _this184._handleUpdateNetworkQuality = function () {\n        if (\"normal\" === _this184._networkQualitySensitivity) return;\n        if (navigator && void 0 !== navigator.onLine && !navigator.onLine) return void _this184.emit(Qd.NETWORK_QUALITY, {\n          downlinkNetworkQuality: 6,\n          uplinkNetworkQuality: 6\n        });\n        var e = {\n          downlinkNetworkQuality: 0,\n          uplinkNetworkQuality: 0\n        };\n        e.uplinkNetworkQuality = _this184._p2pChannel.getUplinkNetworkQuality(), e.downlinkNetworkQuality = _this184._p2pChannel.getDownlinkNetworkQuality(), _this184.emit(Qd.NETWORK_QUALITY, e);\n      }, _this184._codec = e.codec, _this184._mode = e.mode, e.proxyServer && (_this184._proxyServer = e.proxyServer, iu.setProxyServer(_this184._proxyServer), vc.setProxyServer(_this184._proxyServer)), e.turnServer && (_this184._turnServer = Cm({}, _this184._turnServer, {\n        mode: \"manual\"\n      }, e.turnServer)), _this184._clientId = wh(5, \"client-\"), _this184.store = new um(e.codec, e.mode, _this184._clientId), _this184.store.clientCreated(), vc.info(Xe(t = Xe(i = Xe(r = Xe(n = \"[\".concat(_this184._clientId, \"] Initializing AgoraRTC client v\")).call(n, wc, \" build: \")).call(r, yc, \", mode: \")).call(i, _this184._mode, \", codec: \")).call(t, _this184._codec)), _this184._performanceRecorder = Im(_this184._clientId, \"join\"), e.clientRoleOptions) try {\n        Xd(e.clientRoleOptions), s = er({}, e.clientRoleOptions);\n      } catch (e) {\n        var o;\n        vc.warning(Xe(o = \"[\".concat(_this184._clientId, \"] \")).call(o, e.toString()));\n      }\n      _this184._statsCollector = new qu(_this184.store), _this184._statsCollector.onStatsException = function (e, t, i) {\n        var r, n, s;\n        vc.debug(Xe(r = Xe(n = Xe(s = \"[\".concat(_this184._clientId, \"] receive exception msg, code: \")).call(s, e, \", msg: \")).call(n, t, \", uid: \")).call(r, i)), _this184.emit(Qd.EXCEPTION, {\n          code: e,\n          msg: t,\n          uid: i\n        });\n      }, _this184._statsCollector.onUploadPublishDuration = function (e, t, i, r) {\n        var n;\n        var s = Vs(n = _this184._users).call(n, function (t) {\n          return t.uid === e;\n        });\n        s && iu.peerPublishStatus(_this184._sessionId, {\n          subscribeElapse: r,\n          audioPublishDuration: t,\n          videoPublishDuration: i,\n          peer: s._uintid\n        });\n      }, _this184._gateway = new Hp(_this184.store, {\n        clientId: _this184._clientId,\n        mode: _this184._mode,\n        codec: _this184._codec,\n        websocketRetryConfig: e.websocketRetryConfig || HA,\n        httpRetryConfig: e.httpRetryConfig || HA,\n        forceWaitGatewayResponse: void 0 === e.forceWaitGatewayResponse || e.forceWaitGatewayResponse,\n        statsCollector: _this184._statsCollector,\n        role: e.role,\n        clientRoleOptions: s\n      }), _this184._config = e, _this184._configDistribute = new O_(), _this184._p2pChannel = new Zf(_this184.store, _this184._statsCollector), _this184._handleP2PChannelEvents(), _this184._handleGatewayEvents();\n      return _possibleConstructorReturn(_this184);\n    }\n\n    _createClass(bm, [{\n      key: \"join\",\n      value: function () {\n        var _join3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee178(e, t, i, r, n) {\n          var _this185 = this;\n\n          var s, o, a, c, d, _e120, l, A, _r66, _e121, u, _e122, h, _e123, _n46, _t140;\n\n          return _regeneratorRuntime.wrap(function _callee178$(_context178) {\n            while (1) {\n              switch (_context178.prev = _context178.next) {\n                case 0:\n                  this._performanceRecorder.checkPoint(\"startJoin\"), this.store.joinStart();\n                  o = pm(), a = Em() ? window.isSecureContext : \"Browser Not Support\", c = function c() {\n                    vc.warning(\"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\");\n                  };\n                  Em() ? window.isSecureContext || c() : o || c();\n                  d = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.JOIN,\n                    options: [e, t, i, r],\n                    states: {\n                      isHttps: o,\n                      isSecureContext: a\n                    },\n                    tag: bd.TRACER\n                  });\n                  _context178.prev = 4;\n\n                  if (!(!i && null !== i)) {\n                    _context178.next = 7;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_PARAMS, \"Invalid token: \".concat(i, \". If you don not use token, set it to null\"));\n\n                case 7:\n                  i && Ed(i, \"token\", 1, 2047), Ed(e, \"appid\", 1, 2047), _d(t), r && Id(r), n && Ed(n, \"optionalInfo\", 1, 2047);\n                  _context178.next = 13;\n                  break;\n\n                case 10:\n                  _context178.prev = 10;\n                  _context178.t0 = _context178[\"catch\"](4);\n                  throw d.onError(_context178.t0), _context178.t0;\n\n                case 13:\n                  if (!(vc.info(Xe(s = \"[\".concat(this._clientId, \"] start join channel \")).call(s, t)), this._leaveMutex.isLocked)) {\n                    _context178.next = 20;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this._clientId, \"] join: waiting leave operation\"));\n                  _context178.next = 17;\n                  return this._leaveMutex.lock();\n\n                case 17:\n                  _context178.t1 = _context178.sent;\n                  (0, _context178.t1)();\n                  vc.debug(\"[\".concat(this._clientId, \"] join: continue\"));\n\n                case 20:\n                  if (!(this._joinAndNotLeaveYet = !0, \"DISCONNECTED\" !== this.connectionState)) {\n                    _context178.next = 23;\n                    break;\n                  }\n\n                  _e120 = new Ad(ad.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already in connecting/connected state\"));\n                  throw d.onError(_e120), _e120;\n\n                case 23:\n                  this._sessionId || (this._sessionId = Nh(), this.store.sessionId = this._sessionId), this._gateway.state = \"CONNECTING\";\n                  l = {\n                    clientId: this._clientId,\n                    appId: e,\n                    sid: this._sessionId,\n                    cname: t,\n                    uid: \"string\" != typeof r ? r : null,\n                    turnServer: this._turnServer,\n                    proxyServer: this._proxyServer,\n                    token: i || e,\n                    cloudProxyServer: this._cloudProxyServerMode,\n                    optionalInfo: n,\n                    useLocalAccessPoint: this._useLocalAccessPoint\n                  };\n\n                  if (!(\"string\" == typeof r && (l.stringUid = r, this._uintUid ? (l.uid = this._uintUid, this._uintUid = void 0) : l.uid = 0), \"none\" !== this._encryptionMode && this._encryptionSecret)) {\n                    _context178.next = 33;\n                    break;\n                  }\n\n                  l.aesmode = this._encryptionMode;\n                  _context178.next = 29;\n                  return sh(this._encryptionSecret);\n\n                case 29:\n                  l.aespassword = _context178.sent;\n\n                  if (this._joinAndNotLeaveYet) {\n                    _context178.next = 32;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n\n                case 32:\n                  this._encryptionSalt && (l.aessalt = this._encryptionSalt);\n\n                case 33:\n                  this._startSession(this._sessionId, {\n                    channel: t,\n                    appId: e\n                  }), Ua(function () {\n                    \"CONNECTING\" === _this185.connectionState && iu.joinChannelTimeout(_this185._sessionId, 5);\n                  }, 5e3);\n                  _context178.prev = 34;\n                  if (\"443only\" === l.cloudProxyServer) l.proxyServer = Fc(\"PROXY_SERVER_TYPE2\");else if (\"proxy3\" === l.cloudProxyServer || \"proxy4\" === l.cloudProxyServer || \"proxy5\" === l.cloudProxyServer) {\n                    _e121 = Fc(\"PROXY_SERVER_TYPE3\");\n                    ld(_e121) ? l.proxyServer = _e121[0] : l.proxyServer = _e121;\n                  }\n\n                  if (!(iu.setProxyServer(l.proxyServer), vc.setProxyServer(l.proxyServer), this._performanceRecorder.checkPoint(\"startRequestAp\"), this.store.requestAPStart(), l.stringUid && !l.uid && \"normal\" === l.cloudProxyServer)) {\n                    _context178.next = 49;\n                    break;\n                  }\n\n                  _context178.next = 39;\n                  return m_(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !1);\n\n                case 39:\n                  _context178.next = 41;\n                  return C_(l.stringUid, l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 41:\n                  _e122 = _context178.sent;\n                  vc.debug(Xe(u = \"getUserAccount Success \".concat(l.stringUid, \" => \")).call(u, _e122));\n                  l.uid = _e122;\n                  _context178.next = 46;\n                  return f_(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 46:\n                  _r66 = _context178.sent;\n                  _context178.next = 63;\n                  break;\n\n                case 49:\n                  if (!(l.stringUid && !l.uid)) {\n                    _context178.next = 60;\n                    break;\n                  }\n\n                  _context178.next = 52;\n                  return C_(l.stringUid, l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 52:\n                  _e123 = _context178.sent;\n                  vc.debug(Xe(h = \"getUserAccount Success \".concat(l.stringUid, \" => \")).call(h, _e123));\n                  l.uid = _e123;\n                  _context178.next = 57;\n                  return m_(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !0);\n\n                case 57:\n                  _r66 = _context178.sent;\n                  _context178.next = 63;\n                  break;\n\n                case 60:\n                  _context178.next = 62;\n                  return m_(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !0);\n\n                case 62:\n                  _r66 = _context178.sent;\n\n                case 63:\n                  if (this._joinAndNotLeaveYet) {\n                    _context178.next = 65;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n\n                case 65:\n                  this.store.requestAPEnd(), this._performanceRecorder.checkPoint(\"startJoinGateway\"), this._configDistribute.startGetConfigDistribute(l, this._axiosCancelSource.token), this._configDistribute.on(vl.UPDATE_BITRATE_LIMIT, function (e) {\n                    _this185._p2pChannel.updateBitrateLimit(e);\n                  }), this._key = i || e, this._joinInfo = Cm({}, l, {\n                    cid: _r66.gatewayInfo.cid,\n                    uid: l.uid ? l.uid : _r66.gatewayInfo.uid,\n                    vid: _r66.gatewayInfo.vid,\n                    apResponse: _r66.gatewayInfo.res,\n                    uni_lbs_ip: _r66.gatewayInfo.uni_lbs_ip,\n                    gatewayAddrs: _r66.gatewayInfo.gatewayAddrs\n                  });\n                  _context178.next = 68;\n                  return this._gateway.join(this._joinInfo, this._key);\n\n                case 68:\n                  _n46 = _context178.sent;\n\n                  if (this._joinAndNotLeaveYet) {\n                    _context178.next = 71;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n\n                case 71:\n                  return _context178.abrupt(\"return\", (d.onSuccess(_n46), this._appId = e, this._channelName = l.cname, this._uid = _n46, this.store.uid = _n46, this._networkQualityInterval && window.clearInterval(this._networkQualityInterval), this._networkQualityInterval = window.setInterval(this._handleUpdateNetworkQuality, 2e3), window.addEventListener(Ra() ? \"beforeunload\" : \"pagehide\", this._handleBeforeUnload), vc.info(Xe(A = \"[\".concat(this._clientId, \"] Joining channel success: \")).call(A, t)), Ua(function () {\n                    vc.startUpload();\n                  }, 5e3), this._performanceRecorder.checkPoint(\"finishJoin\"), this.store.joinEnd(), Jc(this), _n46));\n\n                case 74:\n                  _context178.prev = 74;\n                  _context178.t2 = _context178[\"catch\"](34);\n                  _t140 = ld(_context178.t2) ? _context178.t2[0] : _context178.t2;\n                  throw vc.error(\"[\".concat(this._clientId, \"] Joining channel failed, rollback\"), _t140), _t140.code !== ad.OPERATION_ABORTED && (this._gateway.state = \"DISCONNECTED\", this._reset()), d.onError(_t140), _t140;\n\n                case 78:\n                case \"end\":\n                  return _context178.stop();\n              }\n            }\n          }, _callee178, this, [[4, 10], [34, 74]]);\n        }));\n\n        function join(_x278, _x279, _x280, _x281, _x282) {\n          return _join3.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee179() {\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee179$(_context179) {\n            while (1) {\n              switch (_context179.prev = _context179.next) {\n                case 0:\n                  e = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.LEAVE,\n                    options: [],\n                    tag: bd.TRACER\n                  });\n                  vc.info(\"[\".concat(this._clientId, \"] Leaving channel\")), window.removeEventListener(Ra() ? \"beforeunload\" : \"pagehide\", this._handleBeforeUnload), this._reset(), Xc(this);\n                  _context179.next = 4;\n                  return this._leaveMutex.lock();\n\n                case 4:\n                  t = _context179.sent;\n\n                  if (!(\"DISCONNECTED\" === this.connectionState)) {\n                    _context179.next = 7;\n                    break;\n                  }\n\n                  return _context179.abrupt(\"return\", (vc.info(\"[\".concat(this._clientId, \"] Leaving channel repeated, success\")), t(), e.onSuccess()));\n\n                case 7:\n                  _context179.next = 9;\n                  return this._gateway.leave(\"CONNECTED\" !== this.connectionState);\n\n                case 9:\n                  vc.info(\"[\".concat(this._clientId, \"] Leaving channel success\"));\n                  this._joinAndNotLeaveYet = !1;\n                  t();\n                  e.onSuccess();\n\n                case 13:\n                case \"end\":\n                  return _context179.stop();\n              }\n            }\n          }, _callee179, this);\n        }));\n\n        function leave() {\n          return _leave2.apply(this, arguments);\n        }\n\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee180(e) {\n          var _this186 = this;\n\n          var t,\n              i,\n              r,\n              _e124,\n              _e125,\n              _iteratorNormalCompletion23,\n              _didIteratorError23,\n              _iteratorError23,\n              _iterator23,\n              _step23,\n              _i105,\n              _e126,\n              _e127,\n              n,\n              s,\n              _args180 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee180$(_context180) {\n            while (1) {\n              switch (_context180.prev = _context180.next) {\n                case 0:\n                  t = _args180.length > 1 && _args180[1] !== undefined ? _args180[1] : !0;\n                  ld(e) || (e = [e]);\n                  r = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.PUBLISH,\n                    options: Es(e).call(e, function (e) {\n                      return e ? Object(e).toString() : \"null\";\n                    }),\n                    tag: bd.TRACER\n                  });\n\n                  if (!(0 === e.length)) {\n                    _context180.next = 6;\n                    break;\n                  }\n\n                  _e124 = new Ad(ad.INVALID_PARAMS, \"track list is empty\");\n                  return _context180.abrupt(\"return\", (r.onError(_e124), _e124.throw()));\n\n                case 6:\n                  if (!(\"audience\" === this._gateway.role)) {\n                    _context180.next = 9;\n                    break;\n                  }\n\n                  _e125 = new Ad(ad.INVALID_OPERATION, \"audience can not publish stream\");\n                  return _context180.abrupt(\"return\", (r.onError(_e125), _e125.throw()));\n\n                case 9:\n                  _iteratorNormalCompletion23 = true;\n                  _didIteratorError23 = false;\n                  _iteratorError23 = undefined;\n                  _context180.prev = 12;\n                  _iterator23 = e[Symbol.iterator]();\n\n                case 14:\n                  if (_iteratorNormalCompletion23 = (_step23 = _iterator23.next()).done) {\n                    _context180.next = 25;\n                    break;\n                  }\n\n                  _i105 = _step23.value;\n\n                  if (_i105 instanceof au) {\n                    _context180.next = 19;\n                    break;\n                  }\n\n                  _e126 = new Ad(ad.INVALID_PARAMS, \"parameter is not local track\");\n                  return _context180.abrupt(\"return\", (r.onError(_e126), _e126.throw()));\n\n                case 19:\n                  if (!(!_i105._enabled && t)) {\n                    _context180.next = 22;\n                    break;\n                  }\n\n                  _e127 = new Ad(ad.TRACK_IS_DISABLED, \"can not publish a disabled track: \".concat(_i105.getTrackId()));\n                  return _context180.abrupt(\"return\", (r.onError(_e127), _e127.throw()));\n\n                case 22:\n                  _iteratorNormalCompletion23 = true;\n                  _context180.next = 14;\n                  break;\n\n                case 25:\n                  _context180.next = 31;\n                  break;\n\n                case 27:\n                  _context180.prev = 27;\n                  _context180.t0 = _context180[\"catch\"](12);\n                  _didIteratorError23 = true;\n                  _iteratorError23 = _context180.t0;\n\n                case 31:\n                  _context180.prev = 31;\n                  _context180.prev = 32;\n\n                  if (!_iteratorNormalCompletion23 && _iterator23.return != null) {\n                    _iterator23.return();\n                  }\n\n                case 34:\n                  _context180.prev = 34;\n\n                  if (!_didIteratorError23) {\n                    _context180.next = 37;\n                    break;\n                  }\n\n                  throw _iteratorError23;\n\n                case 37:\n                  return _context180.finish(34);\n\n                case 38:\n                  return _context180.finish(31);\n\n                case 39:\n                  vc.info(Xe(i = \"[\".concat(this._clientId, \"] Publishing tracks, id \")).call(i, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  })));\n                  _context180.next = 42;\n                  return this._configDistribute.awaitConfigDistributeComplete();\n\n                case 42:\n                  t && Xi(e).call(e, function (e) {\n                    var t = _this186._configDistribute.getBitrateLimit();\n\n                    e instanceof CI && t && e.setBitrateLimit(t.uplink);\n                  });\n                  _context180.next = 45;\n                  return this._publishMutex.lock();\n\n                case 45:\n                  n = _context180.sent;\n                  _context180.prev = 46;\n                  _context180.next = 49;\n                  return this._publishHighStream(e);\n\n                case 49:\n                  r.onSuccess(Es(e).call(e, function (e) {\n                    return e.trackMediaType + \":\" + e.getTrackLabel();\n                  }).toString());\n                  vc.info(Xe(s = \"[\".concat(this._clientId, \"] Publish success, id \")).call(s, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  })));\n                  _context180.next = 56;\n                  break;\n\n                case 53:\n                  _context180.prev = 53;\n                  _context180.t1 = _context180[\"catch\"](46);\n                  throw r.onError(_context180.t1), vc.error(\"[\".concat(this._clientId, \"] publish error\"), _context180.t1.toString()), _context180.t1;\n\n                case 56:\n                  _context180.prev = 56;\n                  n();\n                  return _context180.finish(56);\n\n                case 59:\n                case \"end\":\n                  return _context180.stop();\n              }\n            }\n          }, _callee180, this, [[12, 27, 31, 39], [32,, 34, 38], [46, 53, 56, 59]]);\n        }));\n\n        function publish(_x283) {\n          return _publish2.apply(this, arguments);\n        }\n\n        return publish;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee181(e) {\n          var t,\n              i,\n              r,\n              n,\n              s,\n              _t141,\n              _args181 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee181$(_context181) {\n            while (1) {\n              switch (_context181.prev = _context181.next) {\n                case 0:\n                  t = _args181.length > 1 && _args181[1] !== undefined ? _args181[1] : !0;\n\n                  if (!(!this._joinInfo || void 0 === this._uid)) {\n                    _context181.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't unpublish stream, haven't joined yet!\");\n\n                case 3:\n                  e ? ld(e) || (e = [e]) : e = this._p2pChannel.getAllTracks();\n                  r = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.UNPUBLISH,\n                    options: Es(e).call(e, function (e) {\n                      return e.getTrackId();\n                    }),\n                    tag: bd.TRACER\n                  });\n                  vc.info(Xe(i = \"[\".concat(this._clientId, \"] Unpublish tracks, tracks \")).call(i, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  }), \" \"));\n                  _context181.next = 8;\n                  return this._publishMutex.lock();\n\n                case 8:\n                  n = _context181.sent;\n                  _context181.prev = 9;\n                  _context181.next = 12;\n                  return this._p2pChannel.unpublish(e);\n\n                case 12:\n                  _t141 = _context181.sent;\n                  _context181.t0 = _t141;\n\n                  if (!_context181.t0) {\n                    _context181.next = 17;\n                    break;\n                  }\n\n                  _context181.next = 17;\n                  return this._gateway.unpublish(_t141, this._uid);\n\n                case 17:\n                  vc.info(Xe(s = \"[\".concat(this._clientId, \"] Unpublish success,tracks \")).call(s, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId());\n                  })));\n                  r.onSuccess();\n                  _context181.next = 24;\n                  break;\n\n                case 21:\n                  _context181.prev = 21;\n                  _context181.t1 = _context181[\"catch\"](9);\n                  throw r.onError(_context181.t1), vc.error(\"[\".concat(this._clientId, \"] unpublish error\"), _context181.t1.toString()), _context181.t1;\n\n                case 24:\n                  _context181.prev = 24;\n                  n && n();\n                  return _context181.finish(24);\n\n                case 27:\n                case \"end\":\n                  return _context181.stop();\n              }\n            }\n          }, _callee181, this, [[9, 21, 24, 27]]);\n        }));\n\n        function unpublish(_x284) {\n          return _unpublish3.apply(this, arguments);\n        }\n\n        return unpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee182(e, t) {\n          var _this187 = this;\n\n          var i, r, n, s, _e128, _e129, o, _t142, a, _t143, c, d, _i106, l, A, u, h, p, E, g, _i107, _e130, _;\n\n          return _regeneratorRuntime.wrap(function _callee182$(_context182) {\n            while (1) {\n              switch (_context182.prev = _context182.next) {\n                case 0:\n                  hd(t, \"mediaType\", [\"audio\", \"video\"]);\n                  s = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.SUBSCRIBE,\n                    options: [e.uid, t],\n                    tag: bd.TRACER\n                  });\n\n                  if (this._joinInfo) {\n                    _context182.next = 5;\n                    break;\n                  }\n\n                  _e128 = new Ad(ad.INVALID_OPERATION, \"Can't subscribe stream, not joined\");\n                  throw s.onError(_e128), _e128;\n\n                case 5:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context182.next = 8;\n                    break;\n                  }\n\n                  _e129 = new Ad(ad.INVALID_OPERATION, \"Can't subscribe stream in \".concat(this.connectionState, \" state\"));\n                  throw s.onError(_e129), _e129;\n\n                case 8:\n                  if (Vs(i = this._users).call(i, function (t) {\n                    return t === e;\n                  })) {\n                    _context182.next = 11;\n                    break;\n                  }\n\n                  _t142 = new Ad(ad.INVALID_REMOTE_USER, \"user is not in the channel\");\n                  throw vc.error(Xe(o = \"[\".concat(this._clientId, \"] can not subscribe \")).call(o, e.uid, \", this user is not in the channel\")), s.onError(_t142), _t142;\n\n                case 11:\n                  if (!(!e.hasAudio && !e.hasVideo)) {\n                    _context182.next = 14;\n                    break;\n                  }\n\n                  _t143 = new Ad(ad.INVALID_REMOTE_USER, \"user is not published\");\n                  throw vc.error(Xe(a = \"[\".concat(this._clientId, \"] can not subscribe \")).call(a, e.uid, \", user is not published\")), s.onError(_t143), _t143;\n\n                case 14:\n                  if (!(\"audio\" === t && (!e.hasAudio || void 0 === e._audioSSRC) || \"video\" === t && (!e.hasVideo || void 0 === e._videoSSRC))) {\n                    _context182.next = 17;\n                    break;\n                  }\n\n                  _i106 = new Ad(ad.REMOTE_USER_IS_NOT_PUBLISHED);\n                  throw vc.error(Xe(c = Xe(d = \"[\".concat(this._clientId, \"] can not subscribe \")).call(d, e.uid, \" with mediaType \")).call(c, t, \", remote track is not published\")), s.onError(_i106), _i106;\n\n                case 17:\n                  l = \"audio\" === t ? e._audioSSRC : e._videoSSRC, A = \"audio\" === t ? e._audioOrtc : e._videoOrtc, u = {\n                    stream_type: \"audio\" === t ? wl.AUDIO : wl.VIDEO,\n                    ssrcId: l\n                  };\n                  h = this._subscribeMutex.get(e.uid);\n                  h || (h = new su(\"sub-\".concat(e.uid)), this._subscribeMutex.set(e.uid, h)), vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] subscribe user \")).call(n, e.uid, \", mediaType: \")).call(r, t));\n                  _context182.next = 22;\n                  return h.lock();\n\n                case 22:\n                  p = _context182.sent;\n                  _context182.prev = 23;\n\n                  if (!this._p2pChannel.hasRemoteMedia(e, t)) {\n                    _context182.next = 29;\n                    break;\n                  }\n\n                  _context182.next = 27;\n                  return this._p2pChannel.unmuteRemote(e, t);\n\n                case 27:\n                  _context182.next = 45;\n                  break;\n\n                case 29:\n                  _context182.prev = 29;\n                  Wu.markSubscribeStart(this.store.clientId, l);\n                  this.store.subscribe(e.uid, t, performance.now());\n                  _context182.next = 34;\n                  return this._p2pChannel.subscribe(e, t, l, A);\n\n                case 34:\n                  _context182.next = 36;\n                  return this._gateway.subscribe(e.uid, u, !0);\n\n                case 36:\n                  this.store.subscribe(e.uid, t, void 0, performance.now());\n\n                  this._p2pChannel.reportSubscribeEvent(!0, null, e, t);\n\n                  _context182.next = 45;\n                  break;\n\n                case 40:\n                  _context182.prev = 40;\n                  _context182.t0 = _context182[\"catch\"](29);\n\n                  if (!(this._p2pChannel.reportSubscribeEvent(!1, null == _context182.t0 ? void 0 : _context182.t0.code, e, t), (null == _context182.t0 ? void 0 : _context182.t0.code) !== ad.WS_ABORT)) {\n                    _context182.next = 44;\n                    break;\n                  }\n\n                  throw _context182.t0;\n\n                case 44:\n                  this._p2pChannel.setPendingRemoteMedia(e, t);\n\n                case 45:\n                  vc.info(Xe(E = Xe(g = \"[\".concat(this._clientId, \"] subscribe success user \")).call(g, e.uid, \", mediaType: \")).call(E, t)), this._defaultStreamFallbackType && this.setStreamFallbackOption(e.uid, this._defaultStreamFallbackType).catch(function (e) {\n                    vc.warning(\"[\".concat(_this187._clientId, \"] auto set fallback failed\"), e);\n                  });\n                  _i107 = \"audio\" === t ? e._audioTrack : e._videoTrack;\n\n                  if (_i107) {\n                    _context182.next = 50;\n                    break;\n                  }\n\n                  _e130 = new Ad(ad.UNEXPECTED_ERROR, \"can not find remote track in user object\");\n                  return _context182.abrupt(\"return\", (s.onError(_e130), _e130.throw()));\n\n                case 50:\n                  return _context182.abrupt(\"return\", (s.onSuccess(_i107.getTrackId()), _i107));\n\n                case 53:\n                  _context182.prev = 53;\n                  _context182.t1 = _context182[\"catch\"](23);\n                  throw s.onError(_context182.t1), vc.error(Xe(_ = \"[\".concat(this._clientId, \"] subscribe user \")).call(_, e.uid, \" error\"), _context182.t1), _context182.t1;\n\n                case 56:\n                  _context182.prev = 56;\n                  p();\n                  return _context182.finish(56);\n\n                case 59:\n                case \"end\":\n                  return _context182.stop();\n              }\n            }\n          }, _callee182, this, [[23, 53, 56, 59], [29, 40]]);\n        }));\n\n        function subscribe(_x285, _x286) {\n          return _subscribe3.apply(this, arguments);\n        }\n\n        return subscribe;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee183(e, t) {\n          var i, r, n, s, o, _t144, a, c, d, l, _i108, A;\n\n          return _regeneratorRuntime.wrap(function _callee183$(_context183) {\n            while (1) {\n              switch (_context183.prev = _context183.next) {\n                case 0:\n                  if (!(t && hd(t, \"mediaType\", [\"audio\", \"video\"]), !this._joinInfo)) {\n                    _context183.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't unsubscribe stream, haven't joined yet!\");\n\n                case 2:\n                  s = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.UNSUBSCRIBE,\n                    options: [e.uid, t],\n                    tag: bd.TRACER\n                  });\n\n                  if (Vs(i = this._users).call(i, function (t) {\n                    return t === e;\n                  })) {\n                    _context183.next = 6;\n                    break;\n                  }\n\n                  _t144 = new Ad(ad.INVALID_REMOTE_USER, \"user is not in the channel\");\n                  throw vc.error(Xe(o = \"[\".concat(this._clientId, \"] can not subscribe \")).call(o, e.uid, \", user is not in the channel\")), s.onError(_t144), _t144;\n\n                case 6:\n                  vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] unsubscribe uid: \")).call(n, e.uid, \", mediaType: \")).call(r, t));\n                  a = this._subscribeMutex.get(e.uid);\n                  a || (a = new su(\"sub-\".concat(e.uid)), this._subscribeMutex.set(e.uid, a));\n                  _context183.next = 11;\n                  return a.lock();\n\n                case 11:\n                  c = _context183.sent;\n                  _context183.prev = 12;\n                  _context183.next = 15;\n                  return this._p2pChannel.unsubscribe(e, t);\n\n                case 15:\n                  _i108 = _context183.sent;\n                  _context183.t0 = _i108;\n\n                  if (!_context183.t0) {\n                    _context183.next = 20;\n                    break;\n                  }\n\n                  _context183.next = 20;\n                  return this._gateway.unsubscribe(_i108, e.uid);\n\n                case 20:\n                  vc.info(Xe(d = Xe(l = \"[\".concat(this._clientId, \"] unsubscribe success uid: \")).call(l, e.uid, \", mediaType: \")).call(d, t));\n                  s.onSuccess();\n                  _context183.next = 29;\n                  break;\n\n                case 24:\n                  _context183.prev = 24;\n                  _context183.t1 = _context183[\"catch\"](12);\n\n                  if (!(_context183.t1.code === ad.DISCONNECT_P2P)) {\n                    _context183.next = 28;\n                    break;\n                  }\n\n                  return _context183.abrupt(\"return\", void vc.warning(\"disconnecting p2p, abort unsubscribe request.\"));\n\n                case 28:\n                  throw vc.error(Xe(A = \"[\".concat(this._clientId, \"] unsubscribe user \")).call(A, e.uid, \" error\"), _context183.t1.toString()), _context183.t1;\n\n                case 29:\n                  _context183.prev = 29;\n                  c();\n                  return _context183.finish(29);\n\n                case 32:\n                case \"end\":\n                  return _context183.stop();\n              }\n            }\n          }, _callee183, this, [[12, 24, 29, 32]]);\n        }));\n\n        function unsubscribe(_x287, _x288) {\n          return _unsubscribe3.apply(this, arguments);\n        }\n\n        return unsubscribe;\n      }()\n    }, {\n      key: \"setLowStreamParameter\",\n      value: function setLowStreamParameter(e) {\n        !function (e) {\n          if (!e) throw new Ad(ad.INVALID_PARAMS);\n          fd(e.width) || pd(e.width, \"streamParameter.width\"), fd(e.height) || pd(e.height, \"streamParameter.height\"), fd(e.framerate) || pd(e.framerate, \"streamParameter.framerate\"), fd(e.bitrate) || pd(e.bitrate, \"streamParameter.bitrate\");\n        }(e);\n        var t = iu.reportApiInvoke(this._sessionId, {\n          name: Od.SET_LOW_STREAM_PARAMETER,\n          options: [e],\n          tag: bd.TRACER\n        });\n        (!e.width && e.height || e.width && !e.height) && vc.warning(\"[\".concat(this._clientId, \"] The width and height parameters take effect only when both are set\")), vc.info(\"[\".concat(this._clientId, \"] set low stream parameter to\"), ge(e));\n\n        var i = this._configDistribute.getLowStreamConfigDistribute();\n\n        i && i.bitrate && e.bitrate && i.bitrate < e.bitrate && (e.bitrate = i.bitrate), this._lowStreamParameter = e, t.onSuccess();\n      }\n    }, {\n      key: \"enableDualStream\",\n      value: function () {\n        var _enableDualStream = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee184() {\n          var e, _t145, _t146;\n\n          return _regeneratorRuntime.wrap(function _callee184$(_context184) {\n            while (1) {\n              switch (_context184.prev = _context184.next) {\n                case 0:\n                  e = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.ENABLE_DUAL_STREAM,\n                    options: [],\n                    tag: bd.TRACER\n                  });\n\n                  if (Ul().supportDualStream) {\n                    _context184.next = 5;\n                    break;\n                  }\n\n                  iu.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !1\n                  });\n                  _t145 = new Ad(ad.NOT_SUPPORTED, \"Your browser is not support dual stream\");\n                  throw e.onError(_t145), _t145;\n\n                case 5:\n                  if (!this._isDualStreamEnabled) {\n                    _context184.next = 8;\n                    break;\n                  }\n\n                  _t146 = new Ad(ad.INVALID_OPERATION, \"Dual stream is already enabled\");\n                  throw e.onError(_t146), _t146;\n\n                case 8:\n                  if (!this._p2pChannel.canPublishLowStream()) {\n                    _context184.next = 17;\n                    break;\n                  }\n\n                  _context184.prev = 9;\n                  _context184.next = 12;\n                  return this._publishLowStream();\n\n                case 12:\n                  _context184.next = 17;\n                  break;\n\n                case 14:\n                  _context184.prev = 14;\n                  _context184.t0 = _context184[\"catch\"](9);\n                  throw iu.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !1\n                  }), e.onError(_context184.t0), _context184.t0;\n\n                case 17:\n                  this._isDualStreamEnabled = !0, iu.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !0\n                  }), vc.info(\"[\".concat(this._clientId, \"] enable dual stream\")), e.onSuccess();\n\n                case 18:\n                case \"end\":\n                  return _context184.stop();\n              }\n            }\n          }, _callee184, this, [[9, 14]]);\n        }));\n\n        function enableDualStream() {\n          return _enableDualStream.apply(this, arguments);\n        }\n\n        return enableDualStream;\n      }()\n    }, {\n      key: \"disableDualStream\",\n      value: function () {\n        var _disableDualStream = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee185() {\n          var e, _e131;\n\n          return _regeneratorRuntime.wrap(function _callee185$(_context185) {\n            while (1) {\n              switch (_context185.prev = _context185.next) {\n                case 0:\n                  if (this._isDualStreamEnabled) {\n                    _context185.next = 2;\n                    break;\n                  }\n\n                  return _context185.abrupt(\"return\");\n\n                case 2:\n                  if (this._joinInfo) {\n                    _context185.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n\n                case 4:\n                  e = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.DISABLE_DUAL_STREAM,\n                    options: [],\n                    tag: bd.TRACER\n                  });\n\n                  if (!this._p2pChannel.getLocalMedia(Nl.LocalVideoLowTrack)) {\n                    _context185.next = 19;\n                    break;\n                  }\n\n                  _context185.prev = 6;\n                  _context185.next = 9;\n                  return this._p2pChannel.unpublishLowStream();\n\n                case 9:\n                  _e131 = _context185.sent;\n                  _context185.t0 = _e131;\n\n                  if (!_context185.t0) {\n                    _context185.next = 14;\n                    break;\n                  }\n\n                  _context185.next = 14;\n                  return this._gateway.unpublish(_e131, this._joinInfo.stringUid || this._joinInfo.uid);\n\n                case 14:\n                  _context185.next = 19;\n                  break;\n\n                case 16:\n                  _context185.prev = 16;\n                  _context185.t1 = _context185[\"catch\"](6);\n                  throw iu.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !1,\n                    succ: !1\n                  }), e.onError(_context185.t1), _context185.t1;\n\n                case 19:\n                  this._isDualStreamEnabled = !1, iu.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !1,\n                    succ: !0\n                  }), vc.info(\"[\".concat(this._clientId, \"] disable dual stream\")), e.onSuccess();\n\n                case 20:\n                case \"end\":\n                  return _context185.stop();\n              }\n            }\n          }, _callee185, this, [[6, 16]]);\n        }));\n\n        function disableDualStream() {\n          return _disableDualStream.apply(this, arguments);\n        }\n\n        return disableDualStream;\n      }()\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee186(e, t) {\n          var i, _e132, _e133, r, n, _e134;\n\n          return _regeneratorRuntime.wrap(function _callee186$(_context186) {\n            while (1) {\n              switch (_context186.prev = _context186.next) {\n                case 0:\n                  !function (e) {\n                    hd(e, \"role\", [\"audience\", \"host\"]);\n                  }(e), t && Xd(t);\n                  i = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.SET_CLIENT_ROLE,\n                    options: [e, t],\n                    tag: bd.TRACER\n                  });\n\n                  if (!(\"rtc\" === this._mode)) {\n                    _context186.next = 6;\n                    break;\n                  }\n\n                  vc.warning(\"[\".concat(this._clientId, \"]rtc mode can not use setClientRole\"));\n                  _e132 = new Ad(ad.INVALID_OPERATION, \"rtc mode can not use setClientRole\");\n                  return _context186.abrupt(\"return\", (i.onError(_e132), _e132.throw()));\n\n                case 6:\n                  if (!(t && t.level && \"host\" === e)) {\n                    _context186.next = 9;\n                    break;\n                  }\n\n                  _e133 = new Ad(ad.INVALID_OPERATION, \"host mode can not set audience latency level\");\n                  return _context186.abrupt(\"return\", (i.onError(_e133), _e133.throw()));\n\n                case 9:\n                  _context186.prev = 9;\n\n                  if (!(\"audience\" === e && this._p2pChannel.hasLocalMedia())) {\n                    _context186.next = 13;\n                    break;\n                  }\n\n                  _e134 = new Ad(ad.INVALID_OPERATION, \"can not set client role to audience when publishing stream\");\n                  return _context186.abrupt(\"return\", (i.onError(_e134), _e134.throw()));\n\n                case 13:\n                  _context186.next = 15;\n                  return this._gateway.setClientRole(e, t);\n\n                case 15:\n                  vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] set client role to \")).call(n, e, \", level: \")).call(r, t && t.level));\n                  i.onSuccess();\n                  _context186.next = 22;\n                  break;\n\n                case 19:\n                  _context186.prev = 19;\n                  _context186.t0 = _context186[\"catch\"](9);\n                  throw i.onError(_context186.t0), _context186.t0;\n\n                case 22:\n                case \"end\":\n                  return _context186.stop();\n              }\n            }\n          }, _callee186, this, [[9, 19]]);\n        }));\n\n        function setClientRole(_x289, _x290) {\n          return _setClientRole2.apply(this, arguments);\n        }\n\n        return setClientRole;\n      }()\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        if (Ed(e, \"proxyServer\"), \"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Set proxy server before join channel\");\n        if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n        this._proxyServer = e, iu.setProxyServer(this._proxyServer), vc.setProxyServer(this._proxyServer);\n      }\n    }, {\n      key: \"setTurnServer\",\n      value: function setTurnServer(e) {\n        if (ld(e) || (e = [e]), \"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Set turn server before join channel\");\n        if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n        var t;\n        if (qd(e)) return this._turnServer = {\n          servers: e,\n          mode: \"original-manual\"\n        }, void vc.info(Xe(t = \"[\".concat(this._clientId, \"] Set original turnserver success: \")).call(t, Es(e).call(e, function (e) {\n          return e.urls;\n        }).join(\",\"), \".\"));\n        Xi(e).call(e, function (e) {\n          return Jd(e);\n        }), this._turnServer = {\n          servers: e,\n          mode: \"manual\"\n        }, vc.info(\"[\".concat(this._clientId, \"] Set turnserver success.\"));\n      }\n    }, {\n      key: \"startProxyServer\",\n      value: function startProxyServer(e) {\n        var t = iu.reportApiInvoke(this._sessionId, {\n          name: Od.START_PROXY_SERVER,\n          options: [],\n          tag: bd.TRACER\n        });\n\n        if (\"DISCONNECTED\" !== this.connectionState) {\n          var _e135 = new Ad(ad.INVALID_OPERATION, \"Start proxy server before join channel\");\n\n          throw t.onError(_e135), _e135;\n        }\n\n        if (this._proxyServer || \"manual\" === this._turnServer.mode || this._useLocalAccessPoint) {\n          var _e136 = new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n\n          throw t.onError(_e136), _e136;\n        }\n\n        var i = [1, 2, 3, 4, 5];\n\n        switch (void 0 === e && (e = 1), e) {\n          case 1:\n            this._cloudProxyServerMode = \"normal\";\n            break;\n\n          case 2:\n            this._cloudProxyServerMode = \"443only\";\n            break;\n\n          case 3:\n            this._cloudProxyServerMode = \"proxy3\";\n            break;\n\n          case 4:\n            this._cloudProxyServerMode = \"proxy4\";\n            break;\n\n          case 5:\n            this._cloudProxyServerMode = \"proxy5\";\n            break;\n\n          default:\n            {\n              var _e137 = new Ad(ad.INVALID_PARAMS, \"proxy server mode must be \".concat(i.join(\"|\")));\n\n              throw t.onError(_e137), _e137;\n            }\n        }\n\n        vc.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode), t.onSuccess();\n      }\n    }, {\n      key: \"stopProxyServer\",\n      value: function stopProxyServer() {\n        var e = iu.reportApiInvoke(this._sessionId, {\n          name: Od.STOP_PROXY_SERVER,\n          options: [],\n          tag: bd.TRACER\n        });\n        if (\"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Stop proxy server after leave channel\");\n        iu.setProxyServer(), vc.setProxyServer(), this._cloudProxyServerMode = \"disabled\", vc.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode), this._proxyServer = void 0, this._turnServer = {\n          mode: \"auto\",\n          servers: []\n        }, e.onSuccess();\n      }\n    }, {\n      key: \"setLocalAccessPoints\",\n      value: function setLocalAccessPoints(e, t) {\n        if (gd(e, \"serverList\"), Ed(t, \"domain\"), this._proxyServer || \"disabled\" !== this._cloudProxyServerMode) throw new Ad(ad.INVALID_OPERATION, \"set local access point failed, You have already set the cloud proxy\");\n        var i = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;\n        e = Es(e).call(e, function (e) {\n          var r;\n          return i.test(e) ? Xe(r = \"\".concat(e.replace(/\\./g, \"-\"), \".\")).call(r, t) : e;\n        }), this._useLocalAccessPoint = !0, Qc(\"WEBCS_DOMAIN\", e), Qc(\"WEBCS_DOMAIN_BACKUP_LIST\", e), Qc(\"GATEWAY_DOMAINS\", [t]), Qc(\"EVENT_REPORT_DOMAIN\", e[0]), Qc(\"EVENT_REPORT_BACKUP_DOMAIN\", e[1] || e[0]), Qc(\"LOG_UPLOAD_SERVER\", \"\".concat(e[0], \":6444\")), vc.info(\"set local access point success\");\n      }\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee187(e, t) {\n          var _this188 = this;\n\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee187$(_context187) {\n            while (1) {\n              switch (_context187.prev = _context187.next) {\n                case 0:\n                  hd(t, \"streamType\", [0, 1]);\n                  n = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.SET_REMOTE_VIDEO_STREAM_TYPE,\n                    options: [e, t],\n                    tag: bd.TRACER\n                  });\n                  _context187.prev = 2;\n                  _context187.next = 5;\n                  return this._gateway.setRemoteVideoStreamType(e, t);\n\n                case 5:\n                  Ua(function () {\n                    var t;\n                    var i = Vs(t = _this188._users).call(t, function (t) {\n                      return t.uid === e;\n                    });\n                    i && i.videoTrack && i.videoTrack.updateMediaStreamTrackResolution();\n                  }, 2e3);\n                  _context187.next = 11;\n                  break;\n\n                case 8:\n                  _context187.prev = 8;\n                  _context187.t0 = _context187[\"catch\"](2);\n                  throw n.onError(_context187.t0), vc.error(\"[\".concat(this._clientId, \"] set remote video stream type error\"), _context187.t0.toString()), _context187.t0;\n\n                case 11:\n                  vc.info(Xe(i = Xe(r = \"[\".concat(this._clientId, \"] set remote \")).call(r, e, \" video stream type to \")).call(i, t)), this._remoteStreamTypeCacheMap.set(e, t), n.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context187.stop();\n              }\n            }\n          }, _callee187, this, [[2, 8]]);\n        }));\n\n        function setRemoteVideoStreamType(_x291, _x292) {\n          return _setRemoteVideoStreamType2.apply(this, arguments);\n        }\n\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee188(e, t) {\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee188$(_context188) {\n            while (1) {\n              switch (_context188.prev = _context188.next) {\n                case 0:\n                  hd(t, \"fallbackType\", [0, 1, 2]);\n                  n = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.SET_STREAM_FALLBACK_OPTION,\n                    options: [\"too long to show\", t],\n                    tag: bd.TRACER\n                  });\n                  _context188.prev = 2;\n                  _context188.next = 5;\n                  return this._gateway.setStreamFallbackOption(e, t);\n\n                case 5:\n                  _context188.next = 10;\n                  break;\n\n                case 7:\n                  _context188.prev = 7;\n                  _context188.t0 = _context188[\"catch\"](2);\n                  throw n.onError(_context188.t0), vc.error(\"[\".concat(this._clientId, \"] set stream fallback option\"), _context188.t0.toString()), _context188.t0;\n\n                case 10:\n                  vc.info(Xe(i = Xe(r = \"[\".concat(this._clientId, \"] set remote \")).call(r, e, \" stream fallback type to \")).call(i, t)), this._streamFallbackTypeCacheMap.set(e, t), n.onSuccess();\n\n                case 11:\n                case \"end\":\n                  return _context188.stop();\n              }\n            }\n          }, _callee188, this, [[2, 7]]);\n        }));\n\n        function setStreamFallbackOption(_x293, _x294) {\n          return _setStreamFallbackOption2.apply(this, arguments);\n        }\n\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"setEncryptionConfig\",\n      value: function setEncryptionConfig(e, t, i) {\n        !function (e) {\n          hd(e, \"encryptionMode\", [\"aes-128-xts\", \"aes-256-xts\", \"aes-128-ecb\", \"sm4-128-ecb\", \"aes-128-gcm\", \"aes-256-gcm\", \"aes-128-gcm2\", \"aes-256-gcm2\", \"none\"]);\n        }(e), Ed(t, \"secret\");\n        var r = [\"aes-128-gcm2\", \"aes-256-gcm2\"];\n\n        if (eo(r).call(r, e)) {\n          if (!i || !(i instanceof Uint8Array && 32 === i.length)) throw new Ad(ad.INVALID_PARAMS, \"salt must be an Uint8Array and exactly equal to 32 bytes\");\n        } else if (i) throw new Ad(ad.INVALID_PARAMS, \"current encrypt mode does not need salt\");\n\n        new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\\\"|{}\\\\[\\\\]])(?=.{8,})\").test(t) || vc.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer.\\n      \"), this._encryptionMode = e, this._encryptionSecret = t, i && (this._encryptionSalt = jh(i));\n      }\n    }, {\n      key: \"renewToken\",\n      value: function () {\n        var _renewToken = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee189(e) {\n          var t, _e138, i, r, _t147;\n\n          return _regeneratorRuntime.wrap(function _callee189$(_context189) {\n            while (1) {\n              switch (_context189.prev = _context189.next) {\n                case 0:\n                  Ed(e, \"token\", 1, 2047);\n                  t = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.RENEW_TOKEN,\n                    options: [e],\n                    tag: bd.TRACER\n                  });\n\n                  if (!(!this._key || !this._joinInfo)) {\n                    _context189.next = 5;\n                    break;\n                  }\n\n                  _e138 = new Ad(ad.INVALID_OPERATION, \"renewToken should not be called before user join\");\n                  return _context189.abrupt(\"return\", (t.onError(_e138), _e138.throw()));\n\n                case 5:\n                  i = this._key;\n                  this._key = e, this._joinInfo && (this._joinInfo.token = e);\n                  _context189.next = 9;\n                  return this._renewTokenMutex.lock();\n\n                case 9:\n                  r = _context189.sent;\n                  _context189.prev = 10;\n\n                  if (!Fc(\"USE_NEW_TOKEN\")) {\n                    _context189.next = 21;\n                    break;\n                  }\n\n                  vc.debug(\"start renew token with ticket from unilbs\");\n                  _context189.next = 15;\n                  return y_(this._joinInfo, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 15:\n                  _t147 = _context189.sent;\n                  vc.debug(\"[\".concat(this._clientId, \"] get ticket from unilbs success\"));\n                  _context189.next = 19;\n                  return this._gateway.renewToken({\n                    token: e,\n                    ticket: _t147\n                  });\n\n                case 19:\n                  _context189.next = 24;\n                  break;\n\n                case 21:\n                  vc.debug(\"start renew token without ticket\");\n                  _context189.next = 24;\n                  return this._gateway.renewToken({\n                    token: e\n                  });\n\n                case 24:\n                  vc.debug(\"[\".concat(this._clientId, \"] renewToken success\")), t.onSuccess();\n                  _context189.next = 30;\n                  break;\n\n                case 27:\n                  _context189.prev = 27;\n                  _context189.t0 = _context189[\"catch\"](10);\n                  throw this._key = i, this._joinInfo.token = i, t.onError(_context189.t0), vc.error(\"[\".concat(this._clientId, \"] renewToken failed\"), _context189.t0.toString()), _context189.t0;\n\n                case 30:\n                  _context189.prev = 30;\n                  r();\n                  return _context189.finish(30);\n\n                case 33:\n                case \"end\":\n                  return _context189.stop();\n              }\n            }\n          }, _callee189, this, [[10, 27, 30, 33]]);\n        }));\n\n        function renewToken(_x295) {\n          return _renewToken.apply(this, arguments);\n        }\n\n        return renewToken;\n      }()\n    }, {\n      key: \"enableAudioVolumeIndicator\",\n      value: function enableAudioVolumeIndicator() {\n        var _this189 = this;\n\n        var e = iu.reportApiInvoke(this._sessionId, {\n          name: Od.ENABLE_AUDIO_VOLUME_INDICATOR,\n          options: [],\n          tag: bd.TRACER\n        });\n        if (this._audioVolumeIndicationInterval) return vc.warning(\"you have already enabled audio volume indicator!\"), e.onSuccess();\n        this._audioVolumeIndicationInterval = window.setInterval(function () {\n          var e = _this189._p2pChannel.getAudioLevels();\n\n          _this189.emit(Qd.VOLUME_INDICATOR, e);\n        }, Fc(\"AUDIO_VOLUME_INDICATION_INTERVAL\") || 2e3), e.onSuccess();\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e = this._statsCollector.getRTCStats(),\n            t = this._gateway.getInChannelInfo();\n\n        return e.Duration = Math.round(t.duration / 1e3), e;\n      }\n    }, {\n      key: \"startLiveStreaming\",\n      value: function startLiveStreaming(e, t) {\n        var i = iu.reportApiInvoke(this._sessionId, {\n          name: Od.START_LIVE_STREAMING,\n          options: [e, t],\n          tag: bd.TRACER\n        });\n\n        if (!t) {\n          if (\"h264\" !== this._codec) {\n            var _e139 = new Ad(ad.LIVE_STREAMING_INVALID_RAW_STREAM, \"raw streaming is only support h264\");\n\n            return i.onError(_e139), As.reject(_e139);\n          }\n\n          if (!this._p2pChannel.hasLocalMedia()) {\n            var _e140 = new Ad(ad.LIVE_STREAMING_INVALID_RAW_STREAM, \"can not find stream to raw streaming\");\n\n            return i.onError(_e140), As.reject(_e140);\n          }\n        }\n\n        if (this._liveRawStreamingClient && this._liveRawStreamingClient.hasUrl(e) || this._liveTranscodeStreamingClient && this._liveTranscodeStreamingClient.hasUrl(e)) {\n          var _e141 = new Ad(ad.LIVE_STREAMING_TASK_CONFLICT);\n\n          return i.onError(_e141), As.reject(_e141);\n        }\n\n        var r = t ? rl.TRANSCODE : rl.RAW;\n        return this._createLiveStreamingClient(r).startLiveStreamingTask(e, r).then(function () {\n          return i.onSuccess();\n        }).catch(function (e) {\n          throw i.onError(e), e;\n        });\n      }\n    }, {\n      key: \"setLiveTranscoding\",\n      value: function setLiveTranscoding(e) {\n        var t = iu.reportApiInvoke(this._sessionId, {\n          name: Od.SET_LIVE_TRANSCODING,\n          options: [e],\n          tag: bd.TRACER\n        });\n        return this._createLiveStreamingClient(rl.TRANSCODE).setTranscodingConfig(e).then(function () {\n          return t.onSuccess();\n        }).catch(function (e) {\n          throw t.onError(e), e;\n        });\n      }\n    }, {\n      key: \"stopLiveStreaming\",\n      value: function stopLiveStreaming(e) {\n        var t;\n        var i = iu.reportApiInvoke(this._sessionId, {\n          name: Od.STOP_LIVE_STREAMING,\n          options: [e],\n          tag: bd.TRACER\n        }),\n            r = Fr(t = [this._liveRawStreamingClient, this._liveTranscodeStreamingClient]).call(t, function (t) {\n          return t && t.hasUrl(e);\n        });\n\n        if (!r.length) {\n          var _e142 = new Ad(ad.INVALID_PARAMS, \"can not find live streaming url to stop\");\n\n          return i.onError(_e142), As.reject(_e142);\n        }\n\n        return As.all(Es(r).call(r, function (t) {\n          return t && t.stopLiveStreamingTask(e);\n        })).then(function () {\n          return i.onSuccess();\n        }).catch(function (e) {\n          throw i.onError(e), e;\n        });\n      }\n    }, {\n      key: \"addInjectStreamUrl\",\n      value: function () {\n        var _addInjectStreamUrl = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee190(e, t) {\n          var i, _i109;\n\n          return _regeneratorRuntime.wrap(function _callee190$(_context190) {\n            while (1) {\n              switch (_context190.prev = _context190.next) {\n                case 0:\n                  i = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.ADD_INJECT_STREAM_URL,\n                    options: [e, t],\n                    tag: bd.TRACER\n                  });\n                  _context190.prev = 1;\n\n                  if (this._joinInfo) {\n                    _context190.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not addInjectStreamUrl, no joininfo\");\n\n                case 4:\n                  _i109 = this._createLiveStreamingClient(rl.INJECT);\n\n                  _i109.setInjectStreamConfig(t, 0);\n\n                  _context190.next = 8;\n                  return _i109.startLiveStreamingTask(e, rl.INJECT);\n\n                case 8:\n                  _context190.next = 13;\n                  break;\n\n                case 10:\n                  _context190.prev = 10;\n                  _context190.t0 = _context190[\"catch\"](1);\n                  throw i.onError(_context190.t0), _context190.t0;\n\n                case 13:\n                  i.onSuccess();\n\n                case 14:\n                case \"end\":\n                  return _context190.stop();\n              }\n            }\n          }, _callee190, this, [[1, 10]]);\n        }));\n\n        function addInjectStreamUrl(_x296, _x297) {\n          return _addInjectStreamUrl.apply(this, arguments);\n        }\n\n        return addInjectStreamUrl;\n      }()\n    }, {\n      key: \"removeInjectStreamUrl\",\n      value: function () {\n        var _removeInjectStreamUrl = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee191() {\n          var e, t, i, _e143, _r67;\n\n          return _regeneratorRuntime.wrap(function _callee191$(_context191) {\n            while (1) {\n              switch (_context191.prev = _context191.next) {\n                case 0:\n                  e = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.REMOVE_INJECT_STREAM_URL,\n                    options: [],\n                    tag: bd.TRACER\n                  });\n                  _context191.prev = 1;\n                  _e143 = this._createLiveStreamingClient(rl.INJECT), _r67 = Vs(t = BA(Xh(i = _e143.streamingTasks).call(i))).call(t, function (e) {\n                    return e.mode === rl.INJECT;\n                  });\n\n                  if (!(!this._joinInfo || !_r67)) {\n                    _context191.next = 5;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can remove addInjectStreamUrl, no joininfo or inject task\");\n\n                case 5:\n                  _context191.next = 7;\n                  return _e143.stopLiveStreamingTask(_r67.url);\n\n                case 7:\n                  _context191.next = 12;\n                  break;\n\n                case 9:\n                  _context191.prev = 9;\n                  _context191.t0 = _context191[\"catch\"](1);\n                  throw e.onError(_context191.t0), _context191.t0;\n\n                case 12:\n                  e.onSuccess();\n\n                case 13:\n                case \"end\":\n                  return _context191.stop();\n              }\n            }\n          }, _callee191, this, [[1, 9]]);\n        }));\n\n        function removeInjectStreamUrl() {\n          return _removeInjectStreamUrl.apply(this, arguments);\n        }\n\n        return removeInjectStreamUrl;\n      }()\n    }, {\n      key: \"startChannelMediaRelay\",\n      value: function () {\n        var _startChannelMediaRelay2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee192(e) {\n          var t, _t148;\n\n          return _regeneratorRuntime.wrap(function _callee192$(_context192) {\n            while (1) {\n              switch (_context192.prev = _context192.next) {\n                case 0:\n                  t = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.START_CHANNEL_MEDIA_RELAY,\n                    options: [e],\n                    tag: bd.TRACER\n                  });\n                  _context192.prev = 1;\n                  U_(e);\n                  _t148 = this._createChannelMediaRelayClient();\n                  _context192.next = 6;\n                  return _t148.startChannelMediaRelay(e);\n\n                case 6:\n                  _context192.next = 11;\n                  break;\n\n                case 8:\n                  _context192.prev = 8;\n                  _context192.t0 = _context192[\"catch\"](1);\n                  return _context192.abrupt(\"return\", (t.onError(_context192.t0), _context192.t0.throw()));\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context192.stop();\n              }\n            }\n          }, _callee192, this, [[1, 8]]);\n        }));\n\n        function startChannelMediaRelay(_x298) {\n          return _startChannelMediaRelay2.apply(this, arguments);\n        }\n\n        return startChannelMediaRelay;\n      }()\n    }, {\n      key: \"updateChannelMediaRelay\",\n      value: function () {\n        var _updateChannelMediaRelay2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee193(e) {\n          var t, _t149;\n\n          return _regeneratorRuntime.wrap(function _callee193$(_context193) {\n            while (1) {\n              switch (_context193.prev = _context193.next) {\n                case 0:\n                  t = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.UPDATE_CHANNEL_MEDIA_RELAY,\n                    options: [e],\n                    tag: bd.TRACER\n                  });\n                  _context193.prev = 1;\n                  U_(e);\n                  _t149 = this._createChannelMediaRelayClient();\n                  _context193.next = 6;\n                  return _t149.updateChannelMediaRelay(e);\n\n                case 6:\n                  _context193.next = 11;\n                  break;\n\n                case 8:\n                  _context193.prev = 8;\n                  _context193.t0 = _context193[\"catch\"](1);\n                  return _context193.abrupt(\"return\", (t.onError(_context193.t0), _context193.t0.throw()));\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context193.stop();\n              }\n            }\n          }, _callee193, this, [[1, 8]]);\n        }));\n\n        function updateChannelMediaRelay(_x299) {\n          return _updateChannelMediaRelay2.apply(this, arguments);\n        }\n\n        return updateChannelMediaRelay;\n      }()\n    }, {\n      key: \"stopChannelMediaRelay\",\n      value: function () {\n        var _stopChannelMediaRelay2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee194() {\n          var e, _e144;\n\n          return _regeneratorRuntime.wrap(function _callee194$(_context194) {\n            while (1) {\n              switch (_context194.prev = _context194.next) {\n                case 0:\n                  e = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.STOP_CHANNEL_MEDIA_RELAY,\n                    options: [],\n                    tag: bd.TRACER\n                  });\n                  _context194.prev = 1;\n                  _e144 = this._createChannelMediaRelayClient();\n                  _context194.next = 5;\n                  return _e144.stopChannelMediaRelay();\n\n                case 5:\n                  _context194.next = 10;\n                  break;\n\n                case 7:\n                  _context194.prev = 7;\n                  _context194.t0 = _context194[\"catch\"](1);\n                  return _context194.abrupt(\"return\", (e.onError(_context194.t0), _context194.t0.throw()));\n\n                case 10:\n                  e.onSuccess();\n\n                case 11:\n                case \"end\":\n                  return _context194.stop();\n              }\n            }\n          }, _callee194, this, [[1, 7]]);\n        }));\n\n        function stopChannelMediaRelay() {\n          return _stopChannelMediaRelay2.apply(this, arguments);\n        }\n\n        return stopChannelMediaRelay;\n      }()\n    }, {\n      key: \"sendStreamMessage\",\n      value: function sendStreamMessage(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        if (!this._joinInfo) throw new Ad(ad.INVALID_OPERATION, \"can not send data stream, not joined\");\n\n        if (\"string\" == typeof e) {\n          e = new TextEncoder().encode(e);\n        }\n\n        if (new Blob([e]).size > 1024) throw new Ad(ad.INVALID_PARAMS, \"stream message out of range.\");\n        return this._gateway.signal.request(Gd.DATA_STREAM, {\n          payload: jh(e)\n        }, !t);\n      }\n    }, {\n      key: \"sendMetadata\",\n      value: function sendMetadata(e) {\n        if (!this._joinInfo) throw new Ad(ad.INVALID_OPERATION, \"can not send metadata, not joined\");\n        if (new Blob([e]).size > 1024) throw new Ad(ad.METADATA_OUT_OF_RANGE);\n        return this._gateway.signal.request(Gd.SEND_METADATA, {\n          session_id: this._joinInfo.sid,\n          metadata: jh(e)\n        });\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee195(e) {\n          var t, _e145;\n\n          return _regeneratorRuntime.wrap(function _callee195$(_context195) {\n            while (1) {\n              switch (_context195.prev = _context195.next) {\n                case 0:\n                  ld(e) || (e = [e]), Xi(e).call(e, Td);\n                  t = iu.reportApiInvoke(this._sessionId, {\n                    name: Od.SEND_CUSTOM_REPORT_MESSAGE,\n                    options: [ge(e)],\n                    tag: bd.TRACER\n                  });\n\n                  if (this._joinInfo) {\n                    _context195.next = 5;\n                    break;\n                  }\n\n                  _e145 = new Ad(ad.INVALID_OPERATION, \"can not send custom report, not joined\");\n                  return _context195.abrupt(\"return\", (t.onError(_e145), _e145.throw()));\n\n                case 5:\n                  _context195.next = 7;\n                  return iu.sendCustomReportMessage(this._joinInfo.sid, e);\n\n                case 7:\n                  t.onSuccess();\n\n                case 8:\n                case \"end\":\n                  return _context195.stop();\n              }\n            }\n          }, _callee195, this);\n        }));\n\n        function sendCustomReportMessage(_x300) {\n          return _sendCustomReportMessage2.apply(this, arguments);\n        }\n\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"getLocalAudioStats\",\n      value: function getLocalAudioStats() {\n        return this._statsCollector.getLocalAudioTrackStats();\n      }\n    }, {\n      key: \"getRemoteAudioStats\",\n      value: function getRemoteAudioStats() {\n        return this._statsCollector.getRemoteAudioTrackStats();\n      }\n    }, {\n      key: \"getLocalVideoStats\",\n      value: function getLocalVideoStats() {\n        return this._statsCollector.getLocalVideoTrackStats();\n      }\n    }, {\n      key: \"getRemoteVideoStats\",\n      value: function getRemoteVideoStats() {\n        return this._statsCollector.getRemoteVideoTrackStats();\n      }\n    }, {\n      key: \"getRemoteNetworkQuality\",\n      value: function getRemoteNetworkQuality() {\n        return this._statsCollector.getRemoteNetworkQualityStats();\n      }\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee196(e, t) {\n          return _regeneratorRuntime.wrap(function _callee196$(_context196) {\n            while (1) {\n              switch (_context196.prev = _context196.next) {\n                case 0:\n                  hd(t.spatialLayer, \"spatialLayer\", [0, 1, 2, 3]), hd(t.temporalLayer, \"temporalLayer\", [0, 1, 2, 3]);\n                  _context196.prev = 1;\n                  _context196.next = 4;\n                  return this._gateway.pickSVCLayer(e, t);\n\n                case 4:\n                  _context196.next = 9;\n                  break;\n\n                case 6:\n                  _context196.prev = 6;\n                  _context196.t0 = _context196[\"catch\"](1);\n                  throw vc.error(\"[\".concat(this._clientId, \"] pick SVC layer failed\"), _context196.t0.toString()), _context196.t0;\n\n                case 9:\n                case \"end\":\n                  return _context196.stop();\n              }\n            }\n          }, _callee196, this, [[1, 6]]);\n        }));\n\n        function pickSVCLayer(_x301, _x302) {\n          return _pickSVCLayer2.apply(this, arguments);\n        }\n\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"_reset\",\n      value: function _reset() {\n        var e;\n        vc.debug(\"[\".concat(this._clientId, \"] reset client\")), this._axiosCancelSource.cancel(), this._axiosCancelSource = mc.CancelToken.source(), this._streamFallbackTypeCacheMap = new Li(), this._remoteStreamTypeCacheMap = new Li(), this._configDistribute.stopGetConfigDistribute(), this._joinInfo = void 0, this._proxyServer = void 0, this._defaultStreamFallbackType = void 0, this._sessionId = null, this.store.sessionId = null, this._statsCollector.reset(), this._key = void 0, this._appId = void 0, this._uid = void 0, this.store.uid = void 0, this._channelName = void 0, this._encryptionMode = \"none\", this._encryptionSecret = null, this._encryptionSalt = null, Xi(e = this._users).call(e, function (e) {\n          e._audioTrack && e._audioTrack._destroy(), e._videoTrack && e._videoTrack._destroy();\n        }), this._users = [], this._audioVolumeIndicationInterval && (window.clearInterval(this._audioVolumeIndicationInterval), this._audioVolumeIndicationInterval = void 0), this._p2pChannel.reset(), this._publishMutex = new su(\"client-publish\"), this._subscribeMutex = new Li(), this._networkQualityInterval && (window.clearInterval(this._networkQualityInterval), this._networkQualityInterval = void 0), this._injectStreamingClient && (this._injectStreamingClient.terminate(), this._injectStreamingClient.removeAllListeners(), this._injectStreamingClient = void 0), this._liveRawStreamingClient && (this._liveRawStreamingClient.terminate(), this._liveRawStreamingClient.removeAllListeners(), this._liveRawStreamingClient = void 0), this._liveTranscodeStreamingClient && (this._liveTranscodeStreamingClient.terminate(), this._liveTranscodeStreamingClient.removeAllListeners(), this._liveTranscodeStreamingClient = void 0), this._channelMediaRelayClient && (this._channelMediaRelayClient.dispose(), this._channelMediaRelayClient = void 0);\n      }\n    }, {\n      key: \"_startSession\",\n      value: function _startSession(e, t) {\n        var i, r, n;\n        var s = e || Nh();\n        e ? vc.debug(Xe(i = \"[\".concat(this._clientId, \"] new Session \")).call(i, s)) : vc.debug(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] renewSession \")).call(n, this._sessionId, \" => \")).call(r, s)), this._sessionId = s, this.store.sessionId = s, t ? iu.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: t.channel,\n          appid: t.appId,\n          mode: this._mode\n        }) : this._joinInfo ? iu.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._joinInfo.cname,\n          appid: this._joinInfo.appId,\n          mode: this._mode\n        }) : this._gateway.joinInfo && iu.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._gateway.joinInfo.cname,\n          appid: this._gateway.joinInfo.appId,\n          mode: this._mode\n        }), this._joinInfo && (this._joinInfo.sid = s), this._gateway.joinInfo && (this._gateway.joinInfo.sid = s);\n      }\n    }, {\n      key: \"_publishHighStream\",\n      value: function () {\n        var _publishHighStream2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee197(e) {\n          var _i110, _r68, t, _e146, _iteratorNormalCompletion24, _didIteratorError24, _iteratorError24, _iterator24, _step24, _t150;\n\n          return _regeneratorRuntime.wrap(function _callee197$(_context197) {\n            while (1) {\n              switch (_context197.prev = _context197.next) {\n                case 0:\n                  if (!(!this._joinInfo || void 0 === this._uid)) {\n                    _context197.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n\n                case 2:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context197.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n\n                case 4:\n                  if (!(\"auto\" === this._turnServer.mode && Fc(\"FORCE_TURN\") && !Fc(\"TURN_ENABLE_TCP\") && !Fc(\"TURN_ENABLE_UDP\"))) {\n                    _context197.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"force TURN With No TURN Configuration\");\n\n                case 6:\n                  vc.debug(\"[\".concat(this._clientId, \"] publish high stream\"));\n                  _context197.prev = 7;\n                  _context197.next = 10;\n                  return this._p2pChannel.publish(e, this._isDualStreamEnabled, this._lowStreamParameter);\n\n                case 10:\n                  _i110 = _context197.sent;\n                  _context197.next = 13;\n                  return _i110.next();\n\n                case 13:\n                  _r68 = _context197.sent.value;\n\n                  if (!_r68) {\n                    _context197.next = 27;\n                    break;\n                  }\n\n                  _context197.prev = 15;\n                  _context197.next = 18;\n                  return this._gateway.publish(this._uid, _r68, !0);\n\n                case 18:\n                  _e146 = _context197.sent;\n                  _context197.next = 25;\n                  break;\n\n                case 21:\n                  _context197.prev = 21;\n                  _context197.t0 = _context197[\"catch\"](15);\n\n                  if (!(_context197.t0.code !== ad.DISCONNECT_P2P)) {\n                    _context197.next = 25;\n                    break;\n                  }\n\n                  throw _i110.throw(_context197.t0), _context197.t0;\n\n                case 25:\n                  _context197.next = 27;\n                  return _i110.next((null === (t = _e146) || void 0 === t ? void 0 : t.ortc) || []);\n\n                case 27:\n                  this._p2pChannel.reportPublishEvent(!0, null);\n\n                  _iteratorNormalCompletion24 = true;\n                  _didIteratorError24 = false;\n                  _iteratorError24 = undefined;\n                  _context197.prev = 31;\n                  _iterator24 = e[Symbol.iterator]();\n\n                case 33:\n                  if (_iteratorNormalCompletion24 = (_step24 = _iterator24.next()).done) {\n                    _context197.next = 42;\n                    break;\n                  }\n\n                  _t150 = _step24.value;\n                  _context197.t1 = _t150.muted;\n\n                  if (!_context197.t1) {\n                    _context197.next = 39;\n                    break;\n                  }\n\n                  _context197.next = 39;\n                  return this._p2pChannel.muteLocalTrack(_t150);\n\n                case 39:\n                  _iteratorNormalCompletion24 = true;\n                  _context197.next = 33;\n                  break;\n\n                case 42:\n                  _context197.next = 48;\n                  break;\n\n                case 44:\n                  _context197.prev = 44;\n                  _context197.t2 = _context197[\"catch\"](31);\n                  _didIteratorError24 = true;\n                  _iteratorError24 = _context197.t2;\n\n                case 48:\n                  _context197.prev = 48;\n                  _context197.prev = 49;\n\n                  if (!_iteratorNormalCompletion24 && _iterator24.return != null) {\n                    _iterator24.return();\n                  }\n\n                case 51:\n                  _context197.prev = 51;\n\n                  if (!_didIteratorError24) {\n                    _context197.next = 54;\n                    break;\n                  }\n\n                  throw _iteratorError24;\n\n                case 54:\n                  return _context197.finish(51);\n\n                case 55:\n                  return _context197.finish(48);\n\n                case 56:\n                  _context197.next = 63;\n                  break;\n\n                case 58:\n                  _context197.prev = 58;\n                  _context197.t3 = _context197[\"catch\"](7);\n\n                  if (!(this._p2pChannel.reportPublishEvent(!1, null == _context197.t3 ? void 0 : _context197.t3.code, e), (null == _context197.t3 ? void 0 : _context197.t3.code) === ad.WS_ABORT)) {\n                    _context197.next = 62;\n                    break;\n                  }\n\n                  return _context197.abrupt(\"return\");\n\n                case 62:\n                  throw _context197.t3;\n\n                case 63:\n                case \"end\":\n                  return _context197.stop();\n              }\n            }\n          }, _callee197, this, [[7, 58], [15, 21], [31, 44, 48, 56], [49,, 51, 55]]);\n        }));\n\n        function _publishHighStream(_x303) {\n          return _publishHighStream2.apply(this, arguments);\n        }\n\n        return _publishHighStream;\n      }()\n    }, {\n      key: \"_publishLowStream\",\n      value: function () {\n        var _publishLowStream2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee198() {\n          var e, _e147, _i111, t, _r69;\n\n          return _regeneratorRuntime.wrap(function _callee198$(_context198) {\n            while (1) {\n              switch (_context198.prev = _context198.next) {\n                case 0:\n                  if (!(!this._joinInfo || void 0 === this._uid)) {\n                    _context198.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n\n                case 2:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context198.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n\n                case 4:\n                  vc.debug(\"[\".concat(this._clientId, \"] publish low stream\"));\n                  e = this._configDistribute.getLowStreamConfigDistribute();\n                  e && e.bitrate && (this._lowStreamParameter || (this._lowStreamParameter = {\n                    width: 160,\n                    height: 120,\n                    framerate: 15,\n                    bitrate: 50\n                  }), this._lowStreamParameter && this._lowStreamParameter.bitrate && e.bitrate < this._lowStreamParameter.bitrate && (this._lowStreamParameter.bitrate = e.bitrate));\n                  _context198.prev = 7;\n                  _context198.next = 10;\n                  return this._p2pChannel.publishLowStream(this._lowStreamParameter);\n\n                case 10:\n                  _e147 = _context198.sent;\n                  _context198.next = 13;\n                  return _e147.next();\n\n                case 13:\n                  _i111 = _context198.sent.value;\n\n                  if (!_i111) {\n                    _context198.next = 26;\n                    break;\n                  }\n\n                  _context198.prev = 15;\n                  _context198.next = 18;\n                  return this._gateway.publish(this._uid, _i111, !0);\n\n                case 18:\n                  _r69 = _context198.sent;\n                  _context198.next = 25;\n                  break;\n\n                case 21:\n                  _context198.prev = 21;\n                  _context198.t0 = _context198[\"catch\"](15);\n\n                  if (!(_context198.t0.code !== ad.DISCONNECT_P2P)) {\n                    _context198.next = 25;\n                    break;\n                  }\n\n                  throw _e147.throw(_context198.t0), _context198.t0;\n\n                case 25:\n                  _e147.next((null === (t = _r69) || void 0 === t ? void 0 : t.ortc) || []), this._p2pChannel.reportPublishEvent(!0, null, void 0, !0);\n\n                case 26:\n                  _context198.next = 33;\n                  break;\n\n                case 28:\n                  _context198.prev = 28;\n                  _context198.t1 = _context198[\"catch\"](7);\n\n                  if (!(this._p2pChannel.reportPublishEvent(!1, null == _context198.t1 ? void 0 : _context198.t1.code, void 0, !0), (null == _context198.t1 ? void 0 : _context198.t1.code) === ad.WS_ABORT)) {\n                    _context198.next = 32;\n                    break;\n                  }\n\n                  return _context198.abrupt(\"return\");\n\n                case 32:\n                  throw _context198.t1;\n\n                case 33:\n                case \"end\":\n                  return _context198.stop();\n              }\n            }\n          }, _callee198, this, [[7, 28], [15, 21]]);\n        }));\n\n        function _publishLowStream() {\n          return _publishLowStream2.apply(this, arguments);\n        }\n\n        return _publishLowStream;\n      }()\n    }, {\n      key: \"_createLiveStreamingClient\",\n      value: function _createLiveStreamingClient(e) {\n        var _this190 = this;\n\n        if (!this._joinInfo || !this._appId) {\n          return new Ad(ad.INVALID_OPERATION, \"can not create live streaming client, please join channel first\").throw();\n        }\n\n        var t = function t() {\n          return new B_(_this190._joinInfo, _this190._config.websocketRetryConfig || HA, _this190._config.httpRetryConfig || HA);\n        },\n            i = function i(e) {\n          e.onLiveStreamError = function (e, t) {\n            iu.reportApiInvoke(_this190._sessionId, {\n              name: Od.ON_LIVE_STREAM_ERROR,\n              options: [e, t],\n              tag: bd.TRACER\n            }).onSuccess(), _this190.emit(Qd.LIVE_STREAMING_ERROR, e, t);\n          }, e.onLiveStreamWarning = function (e, t) {\n            iu.reportApiInvoke(_this190._sessionId, {\n              name: Od.ON_LIVE_STREAM_WARNING,\n              options: [e, t],\n              tag: bd.TRACER\n            }).onSuccess(), _this190.emit(Qd.LIVE_STREAMING_WARNING, e, t);\n          }, e.on(ll.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n            if (!_this190._joinInfo) return i(new Ad(ad.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n            T_(e, _this190._joinInfo, _this190._axiosCancelSource.token, HA).then(t).catch(i);\n          });\n        };\n\n        switch (e) {\n          case rl.RAW:\n            return this._liveRawStreamingClient || (this._liveRawStreamingClient = t(), i(this._liveRawStreamingClient)), this._liveRawStreamingClient;\n\n          case rl.TRANSCODE:\n            return this._liveTranscodeStreamingClient || (this._liveTranscodeStreamingClient = t(), i(this._liveTranscodeStreamingClient)), this._liveTranscodeStreamingClient;\n\n          case rl.INJECT:\n            return this._injectStreamingClient || (this._injectStreamingClient = t(), this._injectStreamingClient.on(ll.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n              if (!_this190._joinInfo) return i(new Ad(ad.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n              T_(e, _this190._joinInfo, _this190._axiosCancelSource.token, HA).then(t).catch(i);\n            }), this._injectStreamingClient.onInjectStatusChange = function (e, t, i) {\n              _this190.emit(Qd.INJECT_STREAM_STATUS, e, t, i);\n            }), this._injectStreamingClient;\n        }\n      }\n    }, {\n      key: \"_createChannelMediaRelayClient\",\n      value: function _createChannelMediaRelayClient() {\n        var _this191 = this;\n\n        if (!this._joinInfo) {\n          return new Ad(ad.INVALID_OPERATION, \"can not create channel media relay client, please join channel first\").throw();\n        }\n\n        return this._channelMediaRelayClient || (this._channelMediaRelayClient = new F_(this._joinInfo, this._clientId, this._config.websocketRetryConfig || HA, this._config.httpRetryConfig || HA), this._channelMediaRelayClient.on(\"state\", function (e) {\n          \"RELAY_STATE_FAILURE\" === e && _this191._channelMediaRelayClient && _this191._channelMediaRelayClient.dispose(), _this191.emit(Qd.CHANNEL_MEDIA_RELAY_STATE, e);\n        }), this._channelMediaRelayClient.on(\"event\", function (e) {\n          _this191.emit(Qd.CHANNEL_MEDIA_RELAY_EVENT, e);\n        })), this._channelMediaRelayClient;\n      }\n    }, {\n      key: \"_handleGatewayEvents\",\n      value: function _handleGatewayEvents() {\n        var _this192 = this;\n\n        this._gateway.on(El.DISCONNECT_P2P,\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee199() {\n          return _regeneratorRuntime.wrap(function _callee199$(_context199) {\n            while (1) {\n              switch (_context199.prev = _context199.next) {\n                case 0:\n                  _context199.next = 2;\n                  return _this192._p2pChannel.disconnectForReconnect();\n\n                case 2:\n                case \"end\":\n                  return _context199.stop();\n              }\n            }\n          }, _callee199, this);\n        }))), this._gateway.on(El.CONNECTION_STATE_CHANGE, function (e, t, i) {\n          var r, n;\n\n          var s = function s() {\n            _this192.emit(Qd.CONNECTION_STATE_CHANGE, e, t, i);\n          };\n\n          if (iu.reportApiInvoke(_this192._sessionId, {\n            name: Od.CONNECTION_STATE_CHANGE,\n            options: [e, t, i],\n            tag: bd.TRACER\n          }).onSuccess(ge({\n            cur: e,\n            prev: t,\n            reason: i\n          })), vc.info(Xe(r = Xe(n = \"[\".concat(_this192._clientId, \"] connection state change: \")).call(n, t, \" -> \")).call(r, e)), \"DISCONNECTED\" === e) return _this192._reset(), void s();\n          var o;\n          if (\"RECONNECTING\" === e) Xi(o = _this192._users).call(o, function (e) {\n            e._trust_in_room_ = !1, e._trust_audio_enabled_state_ = !1, e._trust_video_enabled_state_ = !1, e._trust_audio_mute_state_ = !1, e._trust_video_mute_state_ = !1, e._trust_stream_added_state_ = !1;\n          }), _this192._userOfflineTimeout && window.clearTimeout(_this192._userOfflineTimeout), _this192._streamRemovedTimeout && window.clearTimeout(_this192._streamRemovedTimeout), _this192._userOfflineTimeout = void 0, _this192._streamRemovedTimeout = void 0;else if (\"CONNECTED\" === e) {\n            var a, c;\n            Xi(a = _this192._streamFallbackTypeCacheMap).call(a, function (e, t) {\n              _this192._gateway.setStreamFallbackOption(t, e).catch(function (e) {\n                return vc.warning(\"[\".concat(_this192._clientId, \"] auto set stream fallback option failed\"), e);\n              });\n            }), Xi(c = _this192._remoteStreamTypeCacheMap).call(c, function (e, t) {\n              _this192._gateway.setRemoteVideoStreamType(t, e).catch(function (e) {\n                return vc.warning(\"[\".concat(_this192._clientId, \"] auto set remote stream type failed\"), e);\n              });\n            }), _this192._p2pChannel.republish(), _this192._userOfflineTimeout = window.setTimeout(function () {\n              var e;\n              if (\"CONNECTED\" !== _this192.connectionState) return;\n              _this192._userOfflineTimeout = void 0;\n              var t = Fr(e = _this192._users).call(e, function (e) {\n                return !e._trust_in_room_;\n              });\n              Xi(t).call(t, function (e) {\n                var t;\n                vc.debug(Xe(t = \"[\".concat(_this192._clientId, \"] user offline timeout, emit user offline \")).call(t, e.uid)), _this192._handleUserOffline({\n                  uid: e.uid\n                });\n              });\n            }, 3e3), _this192._streamRemovedTimeout = window.setTimeout(function () {\n              var e;\n              \"CONNECTED\" === _this192.connectionState && (_this192._streamRemovedTimeout = void 0, Xi(e = _this192._users).call(e, function (e) {\n                var t, i, r, n, s;\n                e._trust_audio_mute_state_ || (vc.debug(Xe(t = \"[\".concat(_this192._clientId, \"] auto dispatch audio unmute event \")).call(t, e.uid)), _this192._handleMuteStream(e.uid, \"audio\", !1));\n                e._trust_video_mute_state_ || (vc.debug(Xe(i = \"[\".concat(_this192._clientId, \"] auto dispatch video unmute event \")).call(i, e.uid)), _this192._handleMuteStream(e.uid, \"video\", !1));\n                e._trust_audio_enabled_state_ || (vc.debug(Xe(r = \"[\".concat(_this192._clientId, \"] auto dispatch enable local audio \")).call(r, e.uid)), _this192._handleSetStreamLocalEnable(\"audio\", e.uid, !0));\n                !e._trust_video_enabled_state_ && e._video_enabled_ && (vc.debug(Xe(n = \"[\".concat(_this192._clientId, \"] auto dispatch enable local video \")).call(n, e.uid)), _this192._handleSetStreamLocalEnable(\"video\", e.uid, !0));\n                e._trust_stream_added_state_ || (vc.debug(Xe(s = \"[\".concat(_this192._clientId, \"] auto dispatch stream remove \")).call(s, e.uid)), _this192._handleRemoveStream({\n                  uid: e.uid,\n                  uint_id: e._uintid\n                }));\n              }));\n            }, 1e3);\n          }\n          s();\n        }), this._gateway.on(El.REQUEST_NEW_GATEWAY_LIST, function (e, t) {\n          if (!_this192._joinInfo) return t(new Ad(ad.UNEXPECTED_ERROR, \"can not recover, no join info\"));\n          f_(_this192._joinInfo, _this192._axiosCancelSource.token, _this192._config.httpRetryConfig || HA).then(function (t) {\n            var i;\n            _this192._joinInfo && (_this192._joinInfo.apResponse = t.gatewayInfo.res), e(Es(i = t.gatewayInfo.gatewayAddrs).call(i, function (e) {\n              if (_this192._joinInfo && _this192._joinInfo.proxyServer) {\n                var t, i;\n\n                var _r70 = e.split(\":\");\n\n                return Xe(t = Xe(i = \"wss://\".concat(_this192._joinInfo.proxyServer, \"/ws/?h=\")).call(i, _r70[0], \"&p=\")).call(t, _r70[1]);\n              }\n\n              return \"wss://\".concat(e);\n            }));\n          }).catch(t);\n        }), this._gateway.on(El.NETWORK_QUALITY, function (e) {\n          \"normal\" === _this192._networkQualitySensitivity && _this192.emit(Qd.NETWORK_QUALITY, e);\n        }), this._gateway.on(El.STREAM_TYPE_CHANGE, function (e, t) {\n          _this192.emit(Qd.STREAM_TYPE_CHANGED, e, t);\n\n          iu.reportApiInvoke(_this192._sessionId, {\n            name: Od.STREAM_TYPE_CHANGE,\n            options: [e, t],\n            tag: bd.TRACER\n          }).onSuccess(ge({\n            uid: e,\n            streamType: t\n          }));\n        }), this._gateway.on(El.IS_P2P_DISCONNECTED, function (e) {\n          _this192._p2pChannel.isP2PDisconnected() ? e(!0) : _this192._p2pChannel.hasLocalMedia() || _this192._p2pChannel.hasRemoteMedia() ? e(!1) : e(!0);\n        }), this._gateway.on(El.NEED_RENEW_SESSION, function () {\n          _this192._startSession();\n        }), this._gateway.on(El.REQUEST_P2P_CONNECTION_PARAMS,\n        /*#__PURE__*/\n        function () {\n          var _ref165 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee200(e, t, i) {\n            return _regeneratorRuntime.wrap(function _callee200$(_context200) {\n              while (1) {\n                switch (_context200.prev = _context200.next) {\n                  case 0:\n                    _context200.prev = 0;\n                    _context200.t0 = t;\n                    _context200.next = 4;\n                    return _this192._p2pChannel.startP2PConnection(e);\n\n                  case 4:\n                    _context200.t1 = _context200.sent;\n                    (0, _context200.t0)(_context200.t1);\n                    _context200.next = 11;\n                    break;\n\n                  case 8:\n                    _context200.prev = 8;\n                    _context200.t2 = _context200[\"catch\"](0);\n                    i(_context200.t2);\n\n                  case 11:\n                  case \"end\":\n                    return _context200.stop();\n                }\n              }\n            }, _callee200, this, [[0, 8]]);\n          }));\n\n          return function (_x304, _x305, _x306) {\n            return _ref165.apply(this, arguments);\n          };\n        }()), this._gateway.on(El.JOIN_RESPONSE, function (e) {\n          var _$I = $I(e.ortc),\n              t = _$I.dtlsParameters,\n              i = _$I.iceParameters,\n              r = _$I.candidates,\n              n = _$I.rtpCapabilities,\n              s = _$I.setup,\n              o = _$I.cname,\n              a = _$I.defaultIp,\n              c = _$I.defaultPort;\n\n          _this192._p2pChannel.connect(i, t, r, n, s, o, a, c);\n        }), this._gateway.signal.on(Kd.ON_USER_ONLINE, this._handleUserOnline), this._gateway.signal.on(Kd.ON_USER_OFFLINE, this._handleUserOffline), this._gateway.signal.on(Kd.ON_ADD_AUDIO_STREAM, function (e) {\n          return _this192._handleAddAudioOrVideoStream(\"audio\", e.uid, e.ssrcId, e.cname, e.uint_id, e.ortc);\n        }), this._gateway.signal.on(Kd.ON_ADD_VIDEO_STREAM, function (e) {\n          return _this192._handleAddAudioOrVideoStream(\"video\", e.uid, e.ssrcId, e.cname, e.uint_id, e.ortc);\n        }), this._gateway.signal.on(Kd.ON_REMOVE_STREAM, this._handleRemoveStream), this._gateway.signal.on(Kd.ON_P2P_LOST, this._handleP2PLost), this._gateway.signal.on(Kd.MUTE_AUDIO, function (e) {\n          return _this192._handleMuteStream(e.uid, \"audio\", !0);\n        }), this._gateway.signal.on(Kd.UNMUTE_AUDIO, function (e) {\n          return _this192._handleMuteStream(e.uid, \"audio\", !1);\n        }), this._gateway.signal.on(Kd.MUTE_VIDEO, function (e) {\n          return _this192._handleMuteStream(e.uid, \"video\", !0);\n        }), this._gateway.signal.on(Kd.UNMUTE_VIDEO, function (e) {\n          return _this192._handleMuteStream(e.uid, \"video\", !1);\n        }), this._gateway.signal.on(Kd.RECEIVE_METADATA, function (e) {\n          var t = Gh(e.metadata);\n\n          _this192.emit(Qd.RECEIVE_METADATA, e.uid, t);\n        }), this._gateway.signal.on(Kd.ON_DATA_STREAM, function (e) {\n          e.seq && delete e.seq, e.payload = Gh(e.payload), _this192.emit(Qd.STREAM_MESSAGE, e.uid, e.payload), _this192.onStreamMessage && _this192.onStreamMessage(e);\n        }), this._gateway.signal.on(Kd.ON_CRYPT_ERROR, function () {\n          Vh(function () {\n            vc.warning(\"[\".concat(_this192._clientId, \"] on crypt error\")), _this192.emit(Qd.CRYPT_ERROR);\n          }, _this192._sessionId);\n        }), this._gateway.signal.on(Kd.ON_TOKEN_PRIVILEGE_WILL_EXPIRE, this._handleTokenWillExpire), this._gateway.signal.on(Kd.ON_TOKEN_PRIVILEGE_DID_EXPIRE, function () {\n          vc.warning(\"[\".concat(_this192._clientId, \"] received message onTokenPrivilegeDidExpire, please get new token and join again\")), _this192._gateway.leave(!0), _this192.emit(Qd.ON_TOKEN_PRIVILEGE_DID_EXPIRE), _this192._reset();\n        }), this._gateway.signal.on(Kd.ON_STREAM_FALLBACK_UPDATE, function (e) {\n          var t, i;\n          vc.debug(Xe(t = Xe(i = \"[\".concat(_this192._clientId, \"] stream fallback peerId: \")).call(i, e.stream_id, \", attr: \")).call(t, e.stream_type)), _this192.emit(Qd.STREAM_FALLBACK, e.stream_id, 1 === e.stream_type ? \"fallback\" : \"recover\");\n        }), this._gateway.signal.on(Kd.ON_PUBLISH_STREAM, function (e) {\n          var t;\n          _this192.uid === _this192._uid && (_this192._p2pChannel.reportPublishEvent(!0, null, void 0, !1, ge({\n            proxy: e.proxy\n          })), vc.info(Xe(t = \"[\".concat(_this192._clientId, \"] on publish stream, \")).call(t, ge(e))), void 0 !== e.proxy && _this192.emit(Qd.IS_USING_CLOUD_PROXY, !!e.proxy));\n        }), this._gateway.signal.on(Kd.ENABLE_LOCAL_VIDEO, function (e) {\n          _this192._handleSetStreamLocalEnable(\"video\", e.uid, !0);\n        }), this._gateway.signal.on(Kd.DISABLE_LOCAL_VIDEO, function (e) {\n          _this192._handleSetStreamLocalEnable(\"video\", e.uid, !1);\n        }), this._gateway.signal.on(Vd.REQUEST_TIMEOUT, function (e, t) {\n          if (_this192._joinInfo) switch (e) {\n            case Gd.PUBLISH:\n              {\n                if (!t) return;\n                var _e148 = (t = t).ortc;\n\n                if (_e148) {\n                  var i, r, n, s;\n\n                  var _o22 = no(_e148).call(_e148, function (_ref166) {\n                    var e = _ref166.stream_type;\n                    return e === pl.Audio;\n                  }),\n                      _a17 = no(_e148).call(_e148, function (_ref167) {\n                    var e = _ref167.stream_type;\n                    return e !== pl.Audio;\n                  }),\n                      _c15 = no(_e148).call(_e148, function (_ref168) {\n                    var e = _ref168.stream_type;\n                    return e === pl.Screen || e === pl.ScreenLow;\n                  });\n\n                  \"offer\" === t.state && iu.publish(_this192._joinInfo.sid, {\n                    eventElapse: Wu.measureFromPublishStart(_this192.store.clientId, _this192.store.pubId),\n                    succ: !1,\n                    ec: ad.TIMEOUT,\n                    audio: _o22,\n                    video: _a17,\n                    p2pid: t.p2p_id,\n                    publishRequestid: _this192.store.pubId,\n                    screenshare: _c15,\n                    audioName: _o22 ? null === (i = Vs(_e148).call(_e148, function (_ref169) {\n                      var e = _ref169.stream_type;\n                      return e === pl.Audio;\n                    })) || void 0 === i || null === (r = i.ssrcs[0]) || void 0 === r ? void 0 : r.ssrcId.toString() : void 0,\n                    videoName: _a17 ? null === (n = Vs(_e148).call(_e148, function (_ref170) {\n                      var e = _ref170.stream_type;\n                      return e !== pl.Audio;\n                    })) || void 0 === n || null === (s = n.ssrcs[0]) || void 0 === s ? void 0 : s.ssrcId.toString() : void 0\n                  });\n                }\n\n                break;\n              }\n\n            case Gd.SUBSCRIBE:\n              (t = t) && iu.subscribe(_this192._joinInfo.sid, {\n                succ: !1,\n                ec: ad.TIMEOUT,\n                audio: t.stream_type === wl.AUDIO,\n                video: t.stream_type === wl.VIDEO,\n                peerid: t.stream_id,\n                subscribeRequestid: t.ssrcId,\n                p2pid: _this192.store.p2pId,\n                eventElapse: Wu.measureFromSubscribeStart(_this192.store.clientId, t.ssrcId)\n              });\n          }\n        }), this._gateway.signal.on(Kd.ON_P2P_OK, function (e) {\n          _this192.uid === _this192._uid && void 0 !== e.proxy && _this192.emit(Qd.IS_USING_CLOUD_PROXY, !!e.proxy);\n        });\n      }\n    }, {\n      key: \"_handleP2PChannelEvents\",\n      value: function _handleP2PChannelEvents() {\n        var _this193 = this;\n\n        this._p2pChannel.on(bl.RequestMuteLocal,\n        /*#__PURE__*/\n        function () {\n          var _ref171 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee201(e, t, i) {\n            return _regeneratorRuntime.wrap(function _callee201$(_context201) {\n              while (1) {\n                switch (_context201.prev = _context201.next) {\n                  case 0:\n                    if (!_this193._joinInfo) {\n                      _context201.next = 12;\n                      break;\n                    }\n\n                    _context201.prev = 1;\n                    _context201.next = 4;\n                    return _this193._gateway.muteLocal(e, _this193._joinInfo.stringUid || _this193._joinInfo.uid);\n\n                  case 4:\n                    t();\n                    _context201.next = 10;\n                    break;\n\n                  case 7:\n                    _context201.prev = 7;\n                    _context201.t0 = _context201[\"catch\"](1);\n                    _context201.t0.code === ad.DISCONNECT_P2P ? t() : i(_context201.t0);\n\n                  case 10:\n                    _context201.next = 13;\n                    break;\n\n                  case 12:\n                    t();\n\n                  case 13:\n                  case \"end\":\n                    return _context201.stop();\n                }\n              }\n            }, _callee201, this, [[1, 7]]);\n          }));\n\n          return function (_x307, _x308, _x309) {\n            return _ref171.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(bl.RequestUnmuteLocal,\n        /*#__PURE__*/\n        function () {\n          var _ref172 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee202(e, t, i) {\n            return _regeneratorRuntime.wrap(function _callee202$(_context202) {\n              while (1) {\n                switch (_context202.prev = _context202.next) {\n                  case 0:\n                    if (!_this193._joinInfo) {\n                      _context202.next = 12;\n                      break;\n                    }\n\n                    _context202.prev = 1;\n                    _context202.next = 4;\n                    return _this193._gateway.unmuteLocal(e, _this193._joinInfo.stringUid || _this193._joinInfo.uid);\n\n                  case 4:\n                    t();\n                    _context202.next = 10;\n                    break;\n\n                  case 7:\n                    _context202.prev = 7;\n                    _context202.t0 = _context202[\"catch\"](1);\n                    _context202.t0.code === ad.DISCONNECT_P2P ? t() : i(_context202.t0);\n\n                  case 10:\n                    _context202.next = 13;\n                    break;\n\n                  case 12:\n                    t();\n\n                  case 13:\n                  case \"end\":\n                    return _context202.stop();\n                }\n              }\n            }, _callee202, this, [[1, 7]]);\n          }));\n\n          return function (_x310, _x311, _x312) {\n            return _ref172.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(bl.RequestRePublish, function (e, t, i) {\n          _this193.publish(e, !1).then(t).catch(i);\n        }), this._p2pChannel.on(bl.RequestReSubscribe,\n        /*#__PURE__*/\n        function () {\n          var _ref173 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee203(e, t, i) {\n            var _iteratorNormalCompletion25, _didIteratorError25, _iteratorError25, _iterator25, _step25, _step25$value, _t151, _i112;\n\n            return _regeneratorRuntime.wrap(function _callee203$(_context203) {\n              while (1) {\n                switch (_context203.prev = _context203.next) {\n                  case 0:\n                    _context203.prev = 0;\n                    _iteratorNormalCompletion25 = true;\n                    _didIteratorError25 = false;\n                    _iteratorError25 = undefined;\n                    _context203.prev = 4;\n                    _iterator25 = e[Symbol.iterator]();\n\n                  case 6:\n                    if (_iteratorNormalCompletion25 = (_step25 = _iterator25.next()).done) {\n                      _context203.next = 18;\n                      break;\n                    }\n\n                    _step25$value = _step25.value, _t151 = _step25$value.user, _i112 = _step25$value.kind;\n\n                    if (!(_i112 === wl.VIDEO)) {\n                      _context203.next = 13;\n                      break;\n                    }\n\n                    _context203.next = 11;\n                    return _this193.subscribe(_t151, \"video\");\n\n                  case 11:\n                    _context203.next = 15;\n                    break;\n\n                  case 13:\n                    _context203.next = 15;\n                    return _this193.subscribe(_t151, \"audio\");\n\n                  case 15:\n                    _iteratorNormalCompletion25 = true;\n                    _context203.next = 6;\n                    break;\n\n                  case 18:\n                    _context203.next = 24;\n                    break;\n\n                  case 20:\n                    _context203.prev = 20;\n                    _context203.t0 = _context203[\"catch\"](4);\n                    _didIteratorError25 = true;\n                    _iteratorError25 = _context203.t0;\n\n                  case 24:\n                    _context203.prev = 24;\n                    _context203.prev = 25;\n\n                    if (!_iteratorNormalCompletion25 && _iterator25.return != null) {\n                      _iterator25.return();\n                    }\n\n                  case 27:\n                    _context203.prev = 27;\n\n                    if (!_didIteratorError25) {\n                      _context203.next = 30;\n                      break;\n                    }\n\n                    throw _iteratorError25;\n\n                  case 30:\n                    return _context203.finish(27);\n\n                  case 31:\n                    return _context203.finish(24);\n\n                  case 32:\n                    t();\n                    _context203.next = 38;\n                    break;\n\n                  case 35:\n                    _context203.prev = 35;\n                    _context203.t1 = _context203[\"catch\"](0);\n                    i(_context203.t1);\n\n                  case 38:\n                  case \"end\":\n                    return _context203.stop();\n                }\n              }\n            }, _callee203, this, [[0, 35], [4, 20, 24, 32], [25,, 27, 31]]);\n          }));\n\n          return function (_x313, _x314, _x315) {\n            return _ref173.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(bl.RequestUploadStats, function (e, t) {\n          _this193._gateway.uploadStats(e, t);\n        }), this._p2pChannel.on(bl.MediaReconnectStart, function (e) {\n          _this193.emit(Qd.MEDIA_RECONNECT_START, e);\n        }), this._p2pChannel.on(bl.MediaReconnectEnd, function (e) {\n          _this193.emit(Qd.MEDIA_RECONNECT_END, e);\n        }), this._p2pChannel.on(bl.NeedSignalRTT, function (e) {\n          e(_this193._gateway.getSignalRTT());\n        }), this._p2pChannel.on(bl.RequestRestartICE,\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee204() {\n          var e, _ref175, _t152, _ref176, _i113, _r71, _n47, _s41;\n\n          return _regeneratorRuntime.wrap(function _callee204$(_context204) {\n            while (1) {\n              switch (_context204.prev = _context204.next) {\n                case 0:\n                  _context204.next = 2;\n                  return _this193._p2pChannel.reEstablish();\n\n                case 2:\n                  e = _context204.sent;\n\n                  if (!e) {\n                    _context204.next = 15;\n                    break;\n                  }\n\n                  _context204.next = 6;\n                  return _this193._gateway.restartICE({\n                    iceParameters: e.iceParameters\n                  });\n\n                case 6:\n                  _ref175 = _context204.sent;\n                  _t152 = _ref175.response;\n\n                  _ref176 = function (e) {\n                    var t = e.ice,\n                        _of2 = of(t.candidates),\n                        i = _of2.candidates,\n                        r = _of2.defaultIp,\n                        n = _of2.defaultPort;\n\n                    return {\n                      candidates: i,\n                      iceParameters: {\n                        iceUfrag: t.iceUfrag,\n                        icePwd: t.icePwd\n                      },\n                      defaultIp: r,\n                      defaultPort: n\n                    };\n                  }(_t152);\n\n                  _i113 = _ref176.candidates;\n                  _r71 = _ref176.iceParameters;\n                  _n47 = _ref176.defaultIp;\n                  _s41 = _ref176.defaultPort;\n                  _context204.next = 15;\n                  return e.restartICE(_r71, _i113, _n47, _s41);\n\n                case 15:\n                case \"end\":\n                  return _context204.stop();\n              }\n            }\n          }, _callee204, this);\n        }))), this._p2pChannel.on(bl.RequestReconnect,\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee205() {\n          return _regeneratorRuntime.wrap(function _callee205$(_context205) {\n            while (1) {\n              switch (_context205.prev = _context205.next) {\n                case 0:\n                  _this193._gateway.reconnect();\n\n                case 1:\n                case \"end\":\n                  return _context205.stop();\n              }\n            }\n          }, _callee205, this);\n        }))), this._p2pChannel.on(bl.RequestReconnectPC,\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee206() {\n          var e, _ref179, t, i, r, _ref180, n, _$I2, s, o, a, c, d, l, A, u;\n\n          return _regeneratorRuntime.wrap(function _callee206$(_context206) {\n            while (1) {\n              switch (_context206.prev = _context206.next) {\n                case 0:\n                  _context206.next = 2;\n                  return _this193._p2pChannel.startP2PConnection({\n                    turnServer: null === (e = _this193._joinInfo) || void 0 === e ? void 0 : e.turnServer\n                  });\n\n                case 2:\n                  _ref179 = _context206.sent;\n                  t = _ref179.iceParameters;\n                  i = _ref179.dtlsParameters;\n                  r = _ref179.rtpCapabilities;\n                  _context206.next = 8;\n                  return _this193._gateway.reconnectPC({\n                    iceParameters: t,\n                    dtlsParameters: i,\n                    rtpCapabilities: r\n                  });\n\n                case 8:\n                  _ref180 = _context206.sent;\n                  n = _ref180.gatewayEstablishParams;\n                  _$I2 = $I(n);\n                  s = _$I2.dtlsParameters;\n                  o = _$I2.iceParameters;\n                  a = _$I2.candidates;\n                  c = _$I2.rtpCapabilities;\n                  d = _$I2.setup;\n                  l = _$I2.cname;\n                  A = _$I2.defaultIp;\n                  u = _$I2.defaultPort;\n                  _context206.next = 21;\n                  return _this193._p2pChannel.connect(o, s, a, c, d, l, A, u);\n\n                case 21:\n                  _context206.next = 23;\n                  return _this193._p2pChannel.republish();\n\n                case 23:\n                  _context206.next = 25;\n                  return _this193._p2pChannel.reSubscribe();\n\n                case 25:\n                case \"end\":\n                  return _context206.stop();\n              }\n            }\n          }, _callee206, this);\n        }))), this._p2pChannel.on(bl.RequestUnpublishForReconnectPC,\n        /*#__PURE__*/\n        function () {\n          var _ref181 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee207(e, t, i) {\n            return _regeneratorRuntime.wrap(function _callee207$(_context207) {\n              while (1) {\n                switch (_context207.prev = _context207.next) {\n                  case 0:\n                    if (!(_this193._joinInfo && void 0 !== _this193._uid)) {\n                      _context207.next = 6;\n                      break;\n                    }\n\n                    _context207.next = 3;\n                    return _this193._gateway.unpublish(e, _this193._uid);\n\n                  case 3:\n                    t();\n                    _context207.next = 7;\n                    break;\n\n                  case 6:\n                    i();\n\n                  case 7:\n                  case \"end\":\n                    return _context207.stop();\n                }\n              }\n            }, _callee207, this);\n          }));\n\n          return function (_x316, _x317, _x318) {\n            return _ref181.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(bl.P2PLost, function () {\n          _this193.emit(Qd.P2P_LOST, _this193.store.uid);\n        });\n      }\n    }, {\n      key: \"getKeyMetrics\",\n      value: function getKeyMetrics() {\n        return this.store.keyMetrics;\n      }\n    }, {\n      key: \"connectionState\",\n      get: function get() {\n        return this._gateway.state;\n      }\n    }, {\n      key: \"remoteUsers\",\n      get: function get() {\n        return this._users;\n      }\n    }, {\n      key: \"localTracks\",\n      get: function get() {\n        return this._p2pChannel.getAllTracks(!0);\n      }\n    }, {\n      key: \"uid\",\n      get: function get() {\n        return this._uid;\n      }\n    }, {\n      key: \"channelName\",\n      get: function get() {\n        return this._channelName;\n      }\n    }, {\n      key: \"isStringUID\",\n      get: function get() {\n        return !!this._joinInfo && !!this._joinInfo.stringUid;\n      }\n    }]);\n\n    return bm;\n  }(Ll);\n\n  function Dm(e) {\n    return pd(e.timeout, \"config.timeout\", 0, 1e5), pd(e.timeoutFactor, \"config.timeoutFactor\", 0, 100, !1), pd(e.maxRetryCount, \"config.maxRetryConfig\", 0, 1 / 0), pd(e.maxRetryTimeout, \"config.maxRetryTimeout\", 0, 1 / 0), !0;\n  }\n\n  function km(e) {\n    return Ed(e.turnServerURL, \"turnServerURL\"), Ed(e.username, \"username\"), Ed(e.password, \"password\"), e.udpport && pd(e.udpport, \"udpport\", 1, 99999, !0), e.forceturn && ud(e.forceturn, \"forceturn\"), e.security && ud(e.security, \"security\"), e.tcpport && pd(e.tcpport, \"tcpport\", 1, 99999, !0), !0;\n  }\n\n  function Lm(e) {\n    return void 0 !== e.level && hd(e.level, \"level\", [1, 2, 3]), !0;\n  }\n\n  function Pm(e) {\n    return Ed(e.reportId, \"params.reportId\", 0, 100, !1), Ed(e.category, \"params.category\", 0, 100, !1), Ed(e.event, \"params.event\", 0, 100, !1), Ed(e.label, \"params.label\", 0, 100, !1), pd(e.value, \"params.value\", Rd, Sd, !1), !0;\n  }\n\n  Nm([eu({\n    report: iu\n  }), Om(\"design:type\", Function), Om(\"design:paramtypes\", [String]), Om(\"design:returntype\", void 0)], bm.prototype, \"setProxyServer\", null), Nm([eu(), Om(\"design:type\", Function), Om(\"design:paramtypes\", [Object]), Om(\"design:returntype\", void 0)], bm.prototype, \"setTurnServer\", null), Nm([eu({\n    report: iu\n  }), Om(\"design:type\", Function), Om(\"design:paramtypes\", [Array, String]), Om(\"design:returntype\", void 0)], bm.prototype, \"setLocalAccessPoints\", null), Nm([eu({\n    report: iu\n  }), Om(\"design:type\", Function), Om(\"design:paramtypes\", [String, String, Uint8Array]), Om(\"design:returntype\", void 0)], bm.prototype, \"setEncryptionConfig\", null), Nm([tu({\n    report: iu\n  }), Om(\"design:type\", Function), Om(\"design:paramtypes\", [Object, Object]), Om(\"design:returntype\", As)], bm.prototype, \"pickSVCLayer\", null), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.MEDIA_RECONNECT_START = \"media-reconnect-start\", e.MEDIA_RECONNECT_END = \"media-reconnect-end\", e.IS_USING_CLOUD_PROXY = \"is-using-cloud-proxy\", e.USER_JOINED = \"user-joined\", e.USER_LEAVED = \"user-left\", e.USER_PUBLISHED = \"user-published\", e.USER_UNPUBLISHED = \"user-unpublished\", e.USER_INFO_UPDATED = \"user-info-updated\", e.CLIENT_BANNED = \"client-banned\", e.CHANNEL_MEDIA_RELAY_STATE = \"channel-media-relay-state\", e.CHANNEL_MEDIA_RELAY_EVENT = \"channel-media-relay-event\", e.VOLUME_INDICATOR = \"volume-indicator\", e.CRYPT_ERROR = \"crypt-error\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"token-privilege-will-expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"token-privilege-did-expire\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGED = \"stream-type-changed\", e.STREAM_FALLBACK = \"stream-fallback\", e.RECEIVE_METADATA = \"receive-metadata\", e.STREAM_MESSAGE = \"stream-message\", e.LIVE_STREAMING_ERROR = \"live-streaming-error\", e.LIVE_STREAMING_WARNING = \"live-streaming-warning\", e.INJECT_STREAM_STATUS = \"stream-inject-status\", e.EXCEPTION = \"exception\", e.ERROR = \"error\", e.P2P_LOST = \"p2p_lost\";\n  }(Sm || (Sm = {})), function (e) {\n    e.NETWORK_ERROR = \"NETWORK_ERROR\", e.SERVER_ERROR = \"SERVER_ERROR\", e.MULTI_IP = \"MULTI_IP\", e.TIMEOUT = \"TIMEOUT\", e.OFFLINE = \"OFFLINE\", e.LEAVE = \"LEAVE\";\n  }(Rm || (Rm = {})), function (e) {\n    e.WIN_10 = \"Windows 10\", e.WIN_81 = \"Windows 8.1\", e.WIN_8 = \"Windows 8\", e.WIN_7 = \"Windows 7\", e.WIN_VISTA = \"Windows Vista\", e.WIN_SERVER_2003 = \"Windows Server 2003\", e.WIN_XP = \"Windows XP\", e.WIN_2000 = \"Windows 2000\", e.ANDROID = \"Android\", e.OPEN_BSD = \"Open BSD\", e.SUN_OS = \"Sun OS\", e.LINUX = \"Linux\", e.IOS = \"iOS\", e.MAC_OS = \"Mac OS\", e.QNX = \"QNX\", e.UNIX = \"UNIX\", e.BEOS = \"BeOS\", e.OS_2 = \"OS/2\", e.SEARCH_BOT = \"Search Bot\";\n  }(Tm || (Tm = {})), function (e) {\n    e.CHROME = \"Chrome\", e.SAFARI = \"Safari\", e.EDGE = \"Edge\", e.FIREFOX = \"Firefox\", e.OPERA = \"OPR\", e.QQ = \"QQBrowser\", e.WECHAT = \"MicroMessenger\";\n  }(vm || (vm = {})), function (e) {\n    e.FREE = \"free\", e.UPLOADING = \"uploading\";\n  }(ym || (ym = {})), function (e) {\n    e.NONE = \"none\", e.INIT = \"init\", e.CANPLAY = \"canplay\", e.PLAYING = \"playing\", e.PAUSED = \"paused\", e.SUSPEND = \"suspend\", e.STALLED = \"stalled\", e.WAITING = \"waiting\", e.ERROR = \"error\", e.DESTROYED = \"destroyed\", e.ABORT = \"abort\", e.ENDED = \"ended\", e.EMPTIED = \"emptied\";\n  }(wm || (wm = {}));\n  var Bm = {\n    sid: \"\",\n    lts: 0,\n    success: null,\n    cname: null,\n    uid: null,\n    peer: null,\n    cid: null,\n    elapse: null,\n    extend: null,\n    vid: 0\n  };\n  var Mm, Um, Qm, Fm, xm, Vm, Gm, jm, Km, Wm, Hm, Ym, qm, Jm, Xm, zm, Zm, $m, eC;\n  !function (e) {\n    e.PUBLISH = \"publish\", e.SUBSCRIBE = \"subscribe\", e.SESSION_INIT = \"session_init\", e.JOIN_CHOOSE_SERVER = \"join_choose_server\", e.REQ_USER_ACCOUNT = \"req_user_account\", e.JOIN_GATEWAY = \"join_gateway\", e.STREAM_SWITCH = \"stream_switch\", e.REQUEST_PROXY_WORKER_MANAGER = \"request_proxy_worker_manager\", e.REQUEST_PROXY_APPCENTER = \"request_proxy_appcenter\", e.FIRST_VIDEO_RECEIVED = \"first_video_received\", e.FIRST_AUDIO_RECEIVED = \"first_audio_received\", e.FIRST_VIDEO_DECODE = \"first_video_decode\", e.FIRST_AUDIO_DECODE = \"first_audio_decode\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_UPDATE_STREAM = \"on_update_stream\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.USER_ANALYTICS = \"req_user_analytics\";\n  }(Mm || (Mm = {})), function (e) {\n    e.SESSION = \"io.agora.pb.Wrtc.Session\", e.JOIN_CHOOSE_SERVER = \"io.agora.pb.Wrtc.JoinChooseServer\", e.REQ_USER_ACCOUNT = \"io.agora.pb.Wrtc.ReqUserAccount\", e.JOIN_GATEWAT = \"io.agora.pb.Wrtc.JoinGateway\", e.PUBLISH = \"io.agora.pb.Wrtc.Publish\", e.SUBSCRIBE = \"io.agora.pb.Wrtc.Subscribe\", e.STREAM_SWITCH = \"io.agora.pb.Wrtc.StreamSwitch\", e.AUDIO_SENDING_STOPPED = \"io.agora.pb.Wrtc.AudioSendingStopped\", e.VIDEO_SENDING_STOPPED = \"io.agora.pb.Wrtc.VideoSendingStopped\", e.REQUEST_PROXY_APPCENTER = \"io.agora.pb.Wrtc.RequestProxyAppCenter\", e.REQUEST_PROXY_WORKER_MANAGER = \"io.agora.pb.Wrtc.RequestProxyWorkerManager\", e.API_INVOKE = \"io.agora.pb.Wrtc.ApiInvoke\", e.FIRST_VIDEO_RECEIVED = \"io.agora.pb.Wrtc.FirstVideoReceived\", e.FIRST_AUDIO_RECEIVED = \"io.agora.pb.Wrtc.FirstAudioReceived\", e.FIRST_VIDEO_DECODE = \"io.agora.pb.Wrtc.FirstVideoDecode\", e.FIRST_AUDIO_DECODE = \"io.agora.pb.Wrtc.FirstAudioDecode\", e.ON_ADD_AUDIO_STREAM = \"io.agora.pb.Wrtc.OnAddAudioStream\", e.ON_ADD_VIDEO_STREAM = \"io.agora.pb.Wrtc.OnAddVideoStream\", e.ON_UPDATE_STREAM = \"io.agora.pb.Wrtc.OnUpdateStream\", e.ON_REMOVE_STREAM = \"io.agora.pb.Wrtc.OnRemoveStream\", e.JOIN_CHANNEL_TIMEOUT = \"io.agora.pb.Wrtc.JoinChannelTimeout\", e.PEER_PUBLISH_STATUS = \"io.agora.pb.Wrtc.PeerPublishStatus\", e.WORKER_EVENT = \"io.agora.pb.Wrtc.WorkerEvent\", e.AP_WORKER_EVENT = \"io.agora.pb.Wrtc.APWorkerEvent\", e.JOIN_WEB_PROXY_AP = \"io.agora.pb.Wrtc.JoinWebProxyAP\", e.WEBSOCKET_QUIT = \"io.agora.pb.Wrtc.WebSocketQuit\", e.USER_ANALYTICS = \"io.agora.pb.Wrtc.UserAnalytics\";\n  }(Um || (Um = {})), function (e) {\n    e[e.WORKER_EVENT = 156] = \"WORKER_EVENT\", e[e.AP_WORKER_EVENT = 160] = \"AP_WORKER_EVENT\";\n  }(Qm || (Qm = {})), function (e) {\n    e.CREATE_CLIENT = \"createClient\", e.CHECK_SYSTEM_REQUIREMENTS = \"checkSystemRequirements\", e.SET_AREA = \"setArea\", e.CHECK_VIDEO_TRACK_IS_ACTIVE = \"checkVideoTrackIsActive\", e.CHECK_AUDIO_TRACK_IS_ACTIVE = \"checkAudioTrackIsActive\", e.CREATE_MIC_AUDIO_TRACK = \"createMicrophoneAudioTrack\", e.CREATE_CUSTOM_AUDIO_TRACK = \"createCustomAudioTrack\", e.CREATE_BUFFER_AUDIO_TRACK = \"createBufferSourceAudioTrack\", e.CREATE_CAM_VIDEO_TRACK = \"createCameraVideoTrack\", e.CREATE_CUSTOM_VIDEO_TRACK = \"createCustomVideoTrack\", e.CREATE_MIC_AND_CAM_TRACKS = \"createMicrophoneAndCameraTracks\", e.CREATE_SCREEN_VIDEO_TRACK = \"createScreenVideoTrack\", e.SET_ENCRYPTION_CONFIG = \"Client.setEncryptionConfig\", e.START_PROXY_SERVER = \"Client.startProxyServer\", e.STOP_PROXY_SERVER = \"Client.stopProxyServer\", e.SET_PROXY_SERVER = \"Client.setProxyServer\", e.SET_TURN_SERVER = \"Client.setTurnServer\", e.SET_CLIENT_ROLE = \"Client.setClientRole\", e.SET_LOW_STREAM_PARAMETER = \"Client.setLowStreamParameter\", e.ENABLE_DUAL_STREAM = \"Client.enableDualStream\", e.DISABLE_DUAL_STREAM = \"Client.disableDualStream\", e.JOIN = \"Client.join\", e.LEAVE = \"Client.leave\", e.PUBLISH = \"Client.publish\", e.UNPUBLISH = \"Client.unpublish\", e.SUBSCRIBE = \"Client.subscribe\", e.UNSUBSCRIBE = \"Client.unsubscribe\", e.RENEW_TOKEN = \"Client.renewToken\", e.SET_REMOTE_VIDEO_STREAM_TYPE = \"Client.setRemoteVideoStreamType\", e.SET_STREAM_FALLBACK_OPTION = \"Client.setStreamFallbackOption\", e.ENABLE_AUDIO_VOLUME_INDICATOR = \"Client.enableAudioVolumeIndicator\", e.SEND_CUSTOM_REPORT_MESSAGE = \"Client.sendCustomReportMessage\", e.ON_LIVE_STREAM_WARNING = \"Client.onLiveStreamWarning\", e.ON_LIVE_STREAM_ERROR = \"Client.onLiveStreamingError\", e.START_LIVE_STREAMING = \"Client.startLiveStreaming\", e.SET_LIVE_TRANSCODING = \"Client.setLiveTranscoding\", e.STOP_LIVE_STREAMING = \"Client.stopLiveStreaming\", e.ADD_INJECT_STREAM_URL = \"Client.addInjectStreamUrl\", e.REMOVE_INJECT_STREAM_URL = \"Client.removeInjectStreamUrl\", e.START_CHANNEL_MEDIA_RELAY = \"Client.startChannelMediaRelay\", e.UPDATE_CHANNEL_MEDIA_RELAY = \"Client.updateChannelMediaRelay\", e.STOP_CHANNEL_MEDIA_RELAY = \"Client.stopChannelMediaRelay\", e.REQUEST_CONFIG_DISTRIBUTE = \"_config-distribute-request\", e.SET_CONFIG_DISTRIBUTE = \"_configDistribute\", e.LOCAL_TRACK_SET_MUTED = \"LocalTrack.setMute\", e.LOCAL_AUDIO_TRACK_PLAY = \"LocalAudioTrack.play\", e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT = \"LocalAudioTrack.playInElement\", e.LOCAL_AUDIO_TRACK_STOP = \"LocalAudioTrack.stop\", e.LOCAL_AUDIO_TRACK_SET_VOLUME = \"LocalAudioTrack.setVolume\", e.MIC_AUDIO_TRACK_SET_DEVICE = \"MicrophoneAudioTrack.setDevice\", e.BUFFER_AUDIO_TRACK_START = \"BufferSourceAudioTrack.startProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_STOP = \"BufferSourceAudioTrack.stopProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_PAUSE = \"BufferSourceAudioTrack.pauseProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_RESUME = \"BufferSourceAudioTrack.resumeProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_SEEK = \"BufferSourceAudioTrack.seekAudioBuffer\", e.LOCAL_VIDEO_TRACK_PLAY = \"LocalVideoTrack.play\", e.LOCAL_VIDEO_TRACK_STOP = \"LocalVideoTrack.stop\", e.LOCAL_VIDEO_TRACK_BEAUTY = \"LocalVideoTrack.setBeautyEffect\", e.CAM_VIDEO_TRACK_SET_DEVICE = \"CameraVideoTrack.setDevice\", e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG = \"CameraVideoTrack.setEncoderConfiguration\", e.REMOTE_VIDEO_TRACK_PLAY = \"RemoteVideoTrack.play\", e.REMOTE_VIDEO_TRACK_STOP = \"RemoteVideoTrack.stop\", e.REMOTE_AUDIO_TRACK_PLAY = \"RemoteAudioTrack.play\", e.REMOTE_AUDIO_TRACK_STOP = \"RemoteAudioTrack.stop\", e.REMOTE_AUDIO_SET_VOLUME = \"RemoteAudioTrack.setVolume\", e.REMOTE_AUDIO_SET_OUTPUT_DEVICE = \"RemoteAudioTrack.setOutputDevice\", e.GET_MEDIA_STREAM_TRACK = \"Track.getMediaStreamTrack\", e.STREAM_TYPE_CHANGE = \"streamTypeChange\";\n  }(Fm || (Fm = {})), function (e) {\n    e.TRACER = \"tracer\";\n  }(xm || (xm = {})), function (e) {\n    e.IDLE = \"IDLE\", e.INITING = \"INITING\", e.INITEND = \"INITEND\";\n  }(Vm || (Vm = {})), function (e) {\n    e.STATE_CHANGE = \"state_change\", e.RECORDING_DEVICE_CHANGED = \"recordingDeviceChanged\", e.PLAYOUT_DEVICE_CHANGED = \"playoutDeviceChanged\", e.CAMERA_DEVICE_CHANGED = \"cameraDeviceChanged\";\n  }(Gm || (Gm = {})), function (e) {\n    e[e.ACCESS_POINT = 101] = \"ACCESS_POINT\", e[e.UNILBS = 201] = \"UNILBS\", e[e.STRING_UID_ALLOCATOR = 901] = \"STRING_UID_ALLOCATOR\";\n  }(jm || (jm = {})), function (e) {\n    e[e.IIIEGAL_APPID = 1] = \"IIIEGAL_APPID\", e[e.IIIEGAL_UID = 2] = \"IIIEGAL_UID\", e[e.INTERNAL_ERROR = 3] = \"INTERNAL_ERROR\";\n  }(Km || (Km = {})), function (e) {\n    e[e.INVALID_VENDOR_KEY = 5] = \"INVALID_VENDOR_KEY\", e[e.INVALID_CHANNEL_NAME = 7] = \"INVALID_CHANNEL_NAME\", e[e.INTERNAL_ERROR = 8] = \"INTERNAL_ERROR\", e[e.NO_AUTHORIZED = 9] = \"NO_AUTHORIZED\", e[e.DYNAMIC_KEY_TIMEOUT = 10] = \"DYNAMIC_KEY_TIMEOUT\", e[e.NO_ACTIVE_STATUS = 11] = \"NO_ACTIVE_STATUS\", e[e.DYNAMIC_KEY_EXPIRED = 13] = \"DYNAMIC_KEY_EXPIRED\", e[e.STATIC_USE_DYNAMIC_KEY = 14] = \"STATIC_USE_DYNAMIC_KEY\", e[e.DYNAMIC_USE_STATIC_KEY = 15] = \"DYNAMIC_USE_STATIC_KEY\", e[e.USER_OVERLOAD = 16] = \"USER_OVERLOAD\", e[e.FORBIDDEN_REGION = 18] = \"FORBIDDEN_REGION\", e[e.CANNOT_MEET_AREA_DEMAND = 19] = \"CANNOT_MEET_AREA_DEMAND\";\n  }(Wm || (Wm = {})), function (e) {\n    e[e.NO_FLAG_SET = 100] = \"NO_FLAG_SET\", e[e.FLAG_SET_BUT_EMPTY = 101] = \"FLAG_SET_BUT_EMPTY\", e[e.INVALID_FALG_SET = 102] = \"INVALID_FALG_SET\", e[e.NO_SERVICE_AVAILABLE = 200] = \"NO_SERVICE_AVAILABLE\", e[e.NO_SERVICE_AVAILABLE_P2P = 201] = \"NO_SERVICE_AVAILABLE_P2P\", e[e.NO_SERVICE_AVAILABLE_VOICE = 202] = \"NO_SERVICE_AVAILABLE_VOICE\", e[e.NO_SERVICE_AVAILABLE_WEBRTC = 203] = \"NO_SERVICE_AVAILABLE_WEBRTC\", e[e.NO_SERVICE_AVAILABLE_CDS = 204] = \"NO_SERVICE_AVAILABLE_CDS\", e[e.NO_SERVICE_AVAILABLE_CDN = 205] = \"NO_SERVICE_AVAILABLE_CDN\", e[e.NO_SERVICE_AVAILABLE_TDS = 206] = \"NO_SERVICE_AVAILABLE_TDS\", e[e.NO_SERVICE_AVAILABLE_REPORT = 207] = \"NO_SERVICE_AVAILABLE_REPORT\", e[e.NO_SERVICE_AVAILABLE_APP_CENTER = 208] = \"NO_SERVICE_AVAILABLE_APP_CENTER\", e[e.NO_SERVICE_AVAILABLE_ENV0 = 209] = \"NO_SERVICE_AVAILABLE_ENV0\", e[e.NO_SERVICE_AVAILABLE_VOET = 210] = \"NO_SERVICE_AVAILABLE_VOET\", e[e.NO_SERVICE_AVAILABLE_STRING_UID = 211] = \"NO_SERVICE_AVAILABLE_STRING_UID\", e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS = 212] = \"NO_SERVICE_AVAILABLE_WEBRTC_UNILBS\", e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV = 213] = \"NO_SERVICE_AVAILABLE_UNILBS_FLV\";\n  }(Hm || (Hm = {})), function (e) {\n    e[e.K_TIMESTAMP_EXPIRED = 2] = \"K_TIMESTAMP_EXPIRED\", e[e.K_CHANNEL_PERMISSION_INVALID = 3] = \"K_CHANNEL_PERMISSION_INVALID\", e[e.K_CERTIFICATE_INVALID = 4] = \"K_CERTIFICATE_INVALID\", e[e.K_CHANNEL_NAME_EMPTY = 5] = \"K_CHANNEL_NAME_EMPTY\", e[e.K_CHANNEL_NOT_FOUND = 6] = \"K_CHANNEL_NOT_FOUND\", e[e.K_TICKET_INVALID = 7] = \"K_TICKET_INVALID\", e[e.K_CHANNEL_CONFLICTED = 8] = \"K_CHANNEL_CONFLICTED\", e[e.K_SERVICE_NOT_READY = 9] = \"K_SERVICE_NOT_READY\", e[e.K_SERVICE_TOO_HEAVY = 10] = \"K_SERVICE_TOO_HEAVY\", e[e.K_UID_BANNED = 14] = \"K_UID_BANNED\", e[e.K_IP_BANNED = 15] = \"K_IP_BANNED\", e[e.K_CHANNEL_BANNED = 16] = \"K_CHANNEL_BANNED\", e[e.WARN_NO_AVAILABLE_CHANNEL = 103] = \"WARN_NO_AVAILABLE_CHANNEL\", e[e.WARN_LOOKUP_CHANNEL_TIMEOUT = 104] = \"WARN_LOOKUP_CHANNEL_TIMEOUT\", e[e.WARN_LOOKUP_CHANNEL_REJECTED = 105] = \"WARN_LOOKUP_CHANNEL_REJECTED\", e[e.WARN_OPEN_CHANNEL_TIMEOUT = 106] = \"WARN_OPEN_CHANNEL_TIMEOUT\", e[e.WARN_OPEN_CHANNEL_REJECTED = 107] = \"WARN_OPEN_CHANNEL_REJECTED\", e[e.WARN_REQUEST_DEFERRED = 108] = \"WARN_REQUEST_DEFERRED\", e[e.ERR_DYNAMIC_KEY_TIMEOUT = 109] = \"ERR_DYNAMIC_KEY_TIMEOUT\", e[e.ERR_NO_AUTHORIZED = 110] = \"ERR_NO_AUTHORIZED\", e[e.ERR_VOM_SERVICE_UNAVAILABLE = 111] = \"ERR_VOM_SERVICE_UNAVAILABLE\", e[e.ERR_NO_CHANNEL_AVAILABLE_CODE = 112] = \"ERR_NO_CHANNEL_AVAILABLE_CODE\", e[e.ERR_MASTER_VOCS_UNAVAILABLE = 114] = \"ERR_MASTER_VOCS_UNAVAILABLE\", e[e.ERR_INTERNAL_ERROR = 115] = \"ERR_INTERNAL_ERROR\", e[e.ERR_NO_ACTIVE_STATUS = 116] = \"ERR_NO_ACTIVE_STATUS\", e[e.ERR_INVALID_UID = 117] = \"ERR_INVALID_UID\", e[e.ERR_DYNAMIC_KEY_EXPIRED = 118] = \"ERR_DYNAMIC_KEY_EXPIRED\", e[e.ERR_STATIC_USE_DYANMIC_KE = 119] = \"ERR_STATIC_USE_DYANMIC_KE\", e[e.ERR_DYNAMIC_USE_STATIC_KE = 120] = \"ERR_DYNAMIC_USE_STATIC_KE\", e[e.ERR_NO_VOCS_AVAILABLE = 2e3] = \"ERR_NO_VOCS_AVAILABLE\", e[e.ERR_NO_VOS_AVAILABLE = 2001] = \"ERR_NO_VOS_AVAILABLE\", e[e.ERR_JOIN_CHANNEL_TIMEOUT = 2002] = \"ERR_JOIN_CHANNEL_TIMEOUT\", e[e.ERR_REPEAT_JOIN_CHANNEL = 2003] = \"ERR_REPEAT_JOIN_CHANNEL\", e[e.ERR_JOIN_BY_MULTI_IP = 2004] = \"ERR_JOIN_BY_MULTI_IP\", e[e.ERR_NOT_JOINED = 2011] = \"ERR_NOT_JOINED\", e[e.ERR_REPEAT_JOIN_REQUEST = 2012] = \"ERR_REPEAT_JOIN_REQUEST\", e[e.ERR_INVALID_VENDOR_KEY = 2013] = \"ERR_INVALID_VENDOR_KEY\", e[e.ERR_INVALID_CHANNEL_NAME = 2014] = \"ERR_INVALID_CHANNEL_NAME\", e[e.ERR_INVALID_STRINGUID = 2015] = \"ERR_INVALID_STRINGUID\", e[e.ERR_TOO_MANY_USERS = 2016] = \"ERR_TOO_MANY_USERS\", e[e.ERR_SET_CLIENT_ROLE_TIMEOUT = 2017] = \"ERR_SET_CLIENT_ROLE_TIMEOUT\", e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION = 2018] = \"ERR_SET_CLIENT_ROLE_NO_PERMISSION\", e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE = 2019] = \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\", e[e.ERR_PUBLISH_REQUEST_INVALID = 2020] = \"ERR_PUBLISH_REQUEST_INVALID\", e[e.ERR_SUBSCRIBE_REQUEST_INVALID = 2021] = \"ERR_SUBSCRIBE_REQUEST_INVALID\", e[e.ERR_NOT_SUPPORTED_MESSAGE = 2022] = \"ERR_NOT_SUPPORTED_MESSAGE\", e[e.ERR_ILLEAGAL_PLUGIN = 2023] = \"ERR_ILLEAGAL_PLUGIN\", e[e.ERR_REJOIN_TOKEN_INVALID = 2024] = \"ERR_REJOIN_TOKEN_INVALID\", e[e.ERR_REJOIN_USER_NOT_JOINED = 2025] = \"ERR_REJOIN_USER_NOT_JOINED\", e[e.ERR_INVALID_OPTIONAL_INFO = 2027] = \"ERR_INVALID_OPTIONAL_INFO\", e[e.ILLEGAL_AES_PASSWORD = 2028] = \"ILLEGAL_AES_PASSWORD\", e[e.ILLEGAL_CLIENT_ROLE_LEVEL = 2029] = \"ILLEGAL_CLIENT_ROLE_LEVEL\", e[e.ERR_TEST_RECOVER = 9e3] = \"ERR_TEST_RECOVER\", e[e.ERR_TEST_TRYNEXT = 9001] = \"ERR_TEST_TRYNEXT\", e[e.ERR_TEST_RETRY = 9002] = \"ERR_TEST_RETRY\";\n  }(Ym || (Ym = {})), function (e) {\n    e.CONNECTING = \"connecting\", e.CONNECTED = \"connected\", e.RECONNECTING = \"reconnecting\", e.CLOSED = \"closed\";\n  }(qm || (qm = {})), function (e) {\n    e.WS_CONNECTED = \"ws_connected\", e.WS_RECONNECTING = \"ws_reconnecting\", e.WS_CLOSED = \"ws_closed\", e.ON_BINARY_DATA = \"on_binary_data\", e.REQUEST_RECOVER = \"request_recover\", e.REQUEST_JOIN_INFO = \"request_join_info\", e.REQUEST_REJOIN_INFO = \"req_rejoin_info\", e.IS_P2P_DISCONNECTED = \"is_p2p_dis\", e.DISCONNECT_P2P = \"dis_p2p\", e.NEED_RENEW_SESSION = \"need-sid\", e.REPORT_JOIN_GATEWAY = \"report_join_gateway\", e.REQUEST_TIMEOUT = \"request_timeout\", e.REQUEST_SUCCESS = \"request_success\";\n  }(Jm || (Jm = {})), function (e) {\n    e.PING = \"ping\", e.PING_BACK = \"ping_back\", e.JOIN = \"join_v2\", e.REJOIN = \"rejoin\", e.LEAVE = \"leave\", e.SET_CLIENT_ROLE = \"set_client_role\", e.PUBLISH = \"publish\", e.UNPUBLISH = \"unpublish\", e.SUBSCRIBE = \"subscribe\", e.UNSUBSCRIBE = \"unsubscribe\", e.SUBSCRIBE_CHANGE = \"subscribe_change\", e.TRAFFIC_STATS = \"traffic_stats\", e.RENEW_TOKEN = \"renew_token\", e.SWITCH_VIDEO_STREAM = \"switch_video_stream\", e.SET_FALLBACK_OPTION = \"set_fallback_option\", e.GATEWAY_INFO = \"gateway_info\", e.CONTROL = \"control\", e.SEND_METADATA = \"send_metadata\", e.DATA_STREAM = \"data_stream\", e.PICK_SVC_LAYER = \"pick_svc_layer\";\n  }(Xm || (Xm = {})), function (e) {\n    e.PUBLISH_STATS = \"publish_stats\", e.PUBLISH_RELATED_STATS = \"publish_related_stats\", e.SUBSCRIBE_STATS = \"subscribe_stats\", e.SUBSCRIBE_RELATED_STATS = \"subscribe_related_stats\", e.WS_INFLATE_DATA_LENGTH = \"ws_inflate_data_length\";\n  }(zm || (zm = {})), function (e) {\n    e.ON_USER_ONLINE = \"on_user_online\", e.ON_USER_OFFLINE = \"on_user_offline\", e.ON_STREAM_FALLBACK_UPDATE = \"on_stream_fallback_update\", e.ON_PUBLISH_STREAM = \"on_publish_stream\", e.ON_UPLINK_STATS = \"on_uplink_stats\", e.ON_P2P_LOST = \"on_p2p_lost\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"on_token_privilege_will_expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"on_token_privilege_did_expire\", e.ON_USER_BANNED = \"on_user_banned\", e.ON_NOTIFICATION = \"on_notification\", e.ON_CRYPT_ERROR = \"on_crypt_error\", e.MUTE_AUDIO = \"mute_audio\", e.MUTE_VIDEO = \"mute_video\", e.UNMUTE_AUDIO = \"unmute_audio\", e.UNMUTE_VIDEO = \"unmute_video\", e.RECEIVE_METADATA = \"receive_metadata\", e.ON_DATA_STREAM = \"on_data_stream\", e.ENABLE_LOCAL_VIDEO = \"enable_local_video\", e.DISABLE_LOCAL_VIDEO = \"disable_local_video\", e.ENABLE_LOCAL_AUDIO = \"enable_local_audio\", e.DISABLE_LOCAL_AUDIO = \"disable_local_audio\";\n  }(Zm || (Zm = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"CONNECTION_STATE_CHANGE\", e.NEED_ANSWER = \"NEED_ANSWER\", e.NEED_RENEGOTIATE = \"NEED_RENEGOTIATE\", e.P2P_LOST = \"P2P_LOST\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NEED_UNPUB = \"NEED_UNPUB\", e.NEED_UNSUB = \"NEED_UNSUB\", e.NEED_UPLOAD = \"NEED_UPLOAD\", e.NEED_CONTROL = \"NEED_CONTROL\", e.START_RECONNECT = \"START_RECONNECT\", e.END_RECONNECT = \"END_RECONNECT\", e.NEED_SIGNAL_RTT = \"NEED_SIGNAL_RTT\";\n  }($m || ($m = {})), function (e) {\n    e.AUDIO_SOURCE_STATE_CHANGE = \"audio_source_state_change\", e.RECEIVE_TRACK_BUFFER = \"receive_track_buffer\", e.ON_AUDIO_BUFFER = \"on_audio_buffer\";\n  }(eC || (eC = {}));\n  var tC = {\n    sendVolumeLevel: 0,\n    sendBitrate: 0,\n    sendBytes: 0,\n    sendPackets: 0,\n    sendPacketsLost: 0,\n    currentPacketLossRate: 0\n  },\n      iC = {\n    sendBytes: 0,\n    sendBitrate: 0,\n    sendPackets: 0,\n    sendPacketsLost: 0,\n    sendResolutionHeight: 0,\n    sendResolutionWidth: 0,\n    captureResolutionHeight: 0,\n    captureResolutionWidth: 0,\n    targetSendBitrate: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    currentPacketLossRate: 0\n  },\n      rC = {\n    transportDelay: 0,\n    end2EndDelay: 0,\n    receiveBitrate: 0,\n    receiveLevel: 0,\n    receiveBytes: 0,\n    receiveDelay: 0,\n    receivePackets: 0,\n    receivePacketsLost: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    freezeRate: 0,\n    packetLossRate: 0,\n    currentPacketLossRate: 0,\n    publishDuration: -1\n  },\n      nC = {\n    transportDelay: 0,\n    end2EndDelay: 0,\n    receiveBitrate: 0,\n    receiveBytes: 0,\n    receiveDelay: 0,\n    receivePackets: 0,\n    receivePacketsLost: 0,\n    receiveResolutionHeight: 0,\n    receiveResolutionWidth: 0,\n    totalDuration: 0,\n    totalFreezeTime: 0,\n    freezeRate: 0,\n    packetLossRate: 0,\n    currentPacketLossRate: 0,\n    publishDuration: -1\n  };\n\n  var sC, oC, aC, cC, dC, lC, AC, uC, hC, pC, EC, gC, _C, IC;\n\n  !function (e) {\n    e.CONNECTED = \"websocket:connected\", e.RECONNECTING = \"websocket:reconnecting\", e.WILL_RECONNECT = \"websocket:will_reconnect\", e.CLOSED = \"websocket:closed\", e.FAILED = \"websocket:failed\", e.ON_MESSAGE = \"websocket:on_message\", e.REQUEST_NEW_URLS = \"websocket:request_new_urls\";\n  }(sC || (sC = {})), function (e) {\n    e.TRANSCODE = \"mix_streaming\", e.RAW = \"raw_streaming\", e.INJECT = \"inject_streaming\";\n  }(oC || (oC = {})), function (e) {\n    e.WARNING = \"@live_uap-warning\", e.ERROR = \"@line_uap-error\", e.PUBLISH_STREAM_STATUS = \"@live_uap-publish-status\", e.INJECT_STREAM_STATUS = \"@live_uap-inject-status\", e.WORKER_STATUS = \"@live_uap-worker-status\", e.REQUEST_NEW_ADDRESS = \"@live_uap-request-address\";\n  }(aC || (aC = {})), function (e) {\n    e.REQUEST_WORKER_MANAGER_LIST = \"@live_req_worker_manager\";\n  }(cC || (cC = {})), function (e) {\n    e[e.LIVE_STREAM_RESPONSE_SUCCEED = 200] = \"LIVE_STREAM_RESPONSE_SUCCEED\", e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM = 454] = \"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\", e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR = 450] = \"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_BAD_STREAM = 451] = \"LIVE_STREAM_RESPONSE_BAD_STREAM\", e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR = 400] = \"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST = 404] = \"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\", e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED = 456] = \"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\", e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE = 457] = \"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\", e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN = 429] = \"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\", e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH = 452] = \"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\", e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED = 453] = \"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\", e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM = 455] = \"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\", e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR = 500] = \"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WORKER_LOST = 501] = \"LIVE_STREAM_RESPONSE_WORKER_LOST\", e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT = 502] = \"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\", e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT = 503] = \"LIVE_STREAM_RESPONSE_WORKER_QUIT\", e[e.ERROR_FAIL_SEND_MESSAGE = 504] = \"ERROR_FAIL_SEND_MESSAGE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE = 30] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT = 31] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH = 32] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\", e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN = 33] = \"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\";\n  }(dC || (dC = {})), function (e) {\n    e.UNEXPECTED_ERROR = \"UNEXPECTED_ERROR\", e.UNEXPECTED_RESPONSE = \"UNEXPECTED_RESPONSE\", e.TIMEOUT = \"TIMEOUT\", e.INVALID_PARAMS = \"INVALID_PARAMS\", e.NOT_READABLE = \"NOT_READABLE\", e.NOT_SUPPORTED = \"NOT_SUPPORTED\", e.INVALID_OPERATION = \"INVALID_OPERATION\", e.OPERATION_ABORTED = \"OPERATION_ABORTED\", e.WEB_SECURITY_RESTRICT = \"WEB_SECURITY_RESTRICT\", e.NETWORK_ERROR = \"NETWORK_ERROR\", e.NETWORK_TIMEOUT = \"NETWORK_TIMEOUT\", e.NETWORK_RESPONSE_ERROR = \"NETWORK_RESPONSE_ERROR\", e.API_INVOKE_TIMEOUT = \"API_INVOKE_TIMEOUT\", e.ENUMERATE_DEVICES_FAILED = \"ENUMERATE_DEVICES_FAILED\", e.DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\", e.ELECTRON_IS_NULL = \"ELECTRON_IS_NULL\", e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR = \"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\", e.CHROME_PLUGIN_NO_RESPONSE = \"CHROME_PLUGIN_NO_RESPONSE\", e.CHROME_PLUGIN_NOT_INSTALL = \"CHROME_PLUGIN_NOT_INSTALL\", e.MEDIA_OPTION_INVALID = \"MEDIA_OPTION_INVALID\", e.PERMISSION_DENIED = \"PERMISSION_DENIED\", e.CONSTRAINT_NOT_SATISFIED = \"CONSTRAINT_NOT_SATISFIED\", e.TRACK_IS_DISABLED = \"TRACK_IS_DISABLED\", e.SHARE_AUDIO_NOT_ALLOWED = \"SHARE_AUDIO_NOT_ALLOWED\", e.LOW_STREAM_ENCODING_ERROR = \"LOW_STREAM_ENCODING_ERROR\", e.SET_ENCODING_PARAMETER_ERROR = \"SET_ENCODING_PARAMETER_ERROR\", e.TRACK_STATE_UNREACHABLE = \"TRACK_STATE_UNREACHABLE\", e.INVALID_UINT_UID_FROM_STRING_UID = \"INVALID_UINT_UID_FROM_STRING_UID\", e.CAN_NOT_GET_PROXY_SERVER = \"CAN_NOT_GET_PROXY_SERVER\", e.CAN_NOT_GET_GATEWAY_SERVER = \"CAN_NOT_GET_GATEWAY_SERVER\", e.VOID_GATEWAY_ADDRESS = \"VOID_GATEWAY_ADDRESS\", e.UID_CONFLICT = \"UID_CONFLICT\", e.MULTI_UNILBS_RESPONSE_ERROR = \"MULTI_UNILBS_RESPONSE_ERROR\", e.INVALID_LOCAL_TRACK = \"INVALID_LOCAL_TRACK\", e.INVALID_TRACK = \"INVALID_TRACK\", e.SENDER_NOT_FOUND = \"SENDER_NOT_FOUND\", e.CREATE_OFFER_FAILED = \"CREATE_OFFER_FAILED\", e.SET_ANSWER_FAILED = \"SET_ANSWER_FAILED\", e.ICE_FAILED = \"ICE_FAILED\", e.PC_CLOSED = \"PC_CLOSED\", e.SENDER_REPLACE_FAILED = \"SENDER_REPLACE_FAILED\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NO_ICE_CANDIDATE = \"NO_ICE_CANDIDATE\", e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS = \"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\", e.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS = \"CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS\", e.EXIST_DISABLED_VIDEO_TRACK = \"EXIST_DISABLED_VIDEO_TRACK\", e.INVALID_REMOTE_USER = \"INVALID_REMOTE_USER\", e.REMOTE_USER_IS_NOT_PUBLISHED = \"REMOTE_USER_IS_NOT_PUBLISHED\", e.CUSTOM_REPORT_SEND_FAILED = \"CUSTOM_REPORT_SEND_FAILED\", e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH = \"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\", e.FETCH_AUDIO_FILE_FAILED = \"FETCH_AUDIO_FILE_FAILED\", e.READ_LOCAL_AUDIO_FILE_ERROR = \"READ_LOCAL_AUDIO_FILE_ERROR\", e.DECODE_AUDIO_FILE_FAILED = \"DECODE_AUDIO_FILE_FAILED\", e.WS_ABORT = \"WS_ABORT\", e.WS_DISCONNECT = \"WS_DISCONNECT\", e.WS_ERR = \"WS_ERR\", e.LIVE_STREAMING_TASK_CONFLICT = \"LIVE_STREAMING_TASK_CONFLICT\", e.LIVE_STREAMING_INVALID_ARGUMENT = \"LIVE_STREAMING_INVALID_ARGUMENT\", e.LIVE_STREAMING_INTERNAL_SERVER_ERROR = \"LIVE_STREAMING_INTERNAL_SERVER_ERROR\", e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED = \"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\", e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED = \"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\", e.LIVE_STREAMING_CDN_ERROR = \"LIVE_STREAMING_CDN_ERROR\", e.LIVE_STREAMING_INVALID_RAW_STREAM = \"LIVE_STREAMING_INVALID_RAW_STREAM\", e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT = \"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\", e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE = \"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\", e.LIVE_STREAMING_WARN_FREQUENT_REQUEST = \"LIVE_STREAMING_WARN_FREQUENT_REQUEST\", e.WEBGL_INTERNAL_ERROR = \"WEBGL_INTERNAL_ERROR\", e.BEAUTY_PROCESSOR_INTERNAL_ERROR = \"BEAUTY_PROCESSOR_INTERNAL_ERROR\", e.CROSS_CHANNEL_WAIT_STATUS_ERROR = \"CROSS_CHANNEL_WAIT_STATUS_ERROR\", e.CROSS_CHANNEL_FAILED_JOIN_SRC = \"CROSS_CHANNEL_FAILED_JOIN_SEC\", e.CROSS_CHANNEL_FAILED_JOIN_DEST = \"CROSS_CHANNEL_FAILED_JOIN_DEST\", e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST = \"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\", e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE = \"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\", e.METADATA_OUT_OF_RANGE = \"METADATA_OUT_OF_RANGE\", e.LOCAL_AEC_ERROR = \"LOCAL_AEC_ERROR\", e.INVALID_PLUGIN = \"INVALID_PLUGIN\";\n  }(lC || (lC = {})), function (e) {\n    e.CONNECT_FAILED = \"connect failed\", e.CONNECT_TIMEOUT = \"connect timeout\", e.WS_DISCONNECTED = \"websocket disconnected\", e.REQUEST_TIMEOUT = \"request timeout\", e.REQUEST_FAILED = \"request failed\", e.WAIT_STATUS_TIMEOUT = \"wait status timeout\", e.WAIT_STATUS_ERROR = \"wait status error\", e.BAD_STATE = \"bad state\", e.WS_ABORT = \"ws abort\", e.AP_REQUEST_TIMEOUT = \"AP request timeout\", e.AP_JSON_PARSE_ERROR = \"AP json parse error\", e.AP_REQUEST_ERROR = \"AP request error\", e.AP_REQUEST_ABORT = \"AP request abort\";\n  }(AC || (AC = {})), function (e) {\n    e[e.SetSdkProfile = 0] = \"SetSdkProfile\", e[e.SetSourceChannel = 1] = \"SetSourceChannel\", e[e.SetSourceUserId = 2] = \"SetSourceUserId\", e[e.SetDestChannel = 3] = \"SetDestChannel\", e[e.StartPacketTransfer = 4] = \"StartPacketTransfer\", e[e.StopPacketTransfer = 5] = \"StopPacketTransfer\", e[e.UpdateDestChannel = 6] = \"UpdateDestChannel\", e[e.Reconnect = 7] = \"Reconnect\", e[e.SetVideoProfile = 8] = \"SetVideoProfile\";\n  }(uC || (uC = {})), function (e) {\n    e.DISCONNECT = \"disconnect\", e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGE = \"stream-type-change\", e.IS_P2P_DISCONNECTED = \"is-p2p-dis\", e.DISCONNECT_P2P = \"dis-p2p\", e.REQUEST_NEW_GATEWAY_LIST = \"req-gate-url\", e.NEED_RENEW_SESSION = \"need-sid\";\n  }(hC || (hC = {})), function (e) {\n    e.NEED_RENEGOTIATE = \"@need_renegotiate\", e.NEED_REPLACE_TRACK = \"@need_replace_track\", e.NEED_CLOSE = \"@need_close\", e.NEED_ADD_TRACK = \"@need_add_track\", e.NEED_REMOVE_TRACK = \"@need_remove_track\", e.NEED_SESSION_ID = \"@need_sid\", e.SET_OPTIMIZATION_MODE = \"@set_optimization_mode\", e.GET_STATS = \"@get_stats\", e.GET_LOW_VIDEO_TRACK = \"@get_low_video_track\", e.NEED_RESET_REMOTE_SDP = \"@need_reset_remote_sdp\", e.SET_VIDEO_TRACK_MUTED = \"@set_video_track_muted\", e.SET_AUDIO_TRACK_MUTED = \"@set_audio_track_muted\";\n  }(pC || (pC = {})), function (e) {\n    e.SCREEN_TRACK = \"screen_track\", e.LOW_STREAM = \"low_stream\";\n  }(EC || (EC = {})), function (e) {\n    e.SOURCE_STATE_CHANGE = \"source-state-change\", e.TRACK_ENDED = \"track-ended\", e.BEAUTY_EFFECT_OVERLOAD = \"beauty-effect-overload\";\n  }(gC || (gC = {})), function (e) {\n    e.FIRST_FRAME_DECODED = \"first-frame-decoded\";\n  }(_C || (_C = {})), function (e) {\n    e.CHINA = \"CN\", e.ASIA = \"AS\", e.NORTH_AMERICA = \"NA\", e.EUROPE = \"EU\", e.JAPAN = \"JP\", e.INDIA = \"IN\", e.KOREA = \"KR\", e.OCEANIA = \"OC\", e.SOUTH_AMERICA = \"SA\", e.AFRICA = \"AF\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n  }(IC || (IC = {}));\n  var fC = {\n    CHINA: {},\n    ASIA: {\n      CODE: IC.ASIA,\n      WEBCS_DOMAIN: [\"ap-web-1-asia.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-asia.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-asia.agora.io\"],\n      CDS_AP: [\"cds-ap-web-asia.agora.io\", \"cds-ap-web-asia2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-asia.agora.io\", \"sua-ap-web-asia2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-asia.agora.io\", \"uap-ap-web-asia2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-asia.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-asia.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-asia.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    NORTH_AMERICA: {\n      CODE: IC.NORTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-north-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-north-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-north-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-north-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-north-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    EUROPE: {\n      CODE: IC.EUROPE,\n      WEBCS_DOMAIN: [\"ap-web-1-europe.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-europe.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-europe.agora.io\"],\n      CDS_AP: [\"cds-ap-web-europe.agora.io\", \"cds-ap-web-europe2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-europe.agora.io\", \"sua-ap-web-europe.agora.io\"],\n      UAP_AP: [\"uap-ap-web-europe.agora.io\", \"uap-ap-web-europe2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-europe.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-europe.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-europe.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"europe.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    JAPAN: {\n      CODE: IC.JAPAN,\n      WEBCS_DOMAIN: [\"ap-web-1-japan.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-japan.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-japan.agora.io\"],\n      CDS_AP: [\"cds-ap-web-japan.agora.io\", \"cds-ap-web-japan2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-japan.agora.io\", \"sua-ap-web-japan2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-japan.agora.io\", \"\\tuap-ap-web-japan2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-japan.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-japan.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-japan.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"japan.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    INDIA: {\n      CODE: IC.INDIA,\n      WEBCS_DOMAIN: [\"ap-web-1-india.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-india.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-india.agora.io\"],\n      CDS_AP: [\"cds-ap-web-india.agora.io\", \"cds-ap-web-india2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-india.agora.io\", \"sua-ap-web-india2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-india.agora.io\", \"uap-ap-web-india2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-india.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-india.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-india.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"india.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    KOREA: {\n      CODE: IC.KOREA,\n      WEBCS_DOMAIN: [\"ap-web-1-korea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-korea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-korea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-korea.agora.io\", \"cds-ap-web-korea2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-korea.agora.io\", \"sua-ap-web-korea2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-korea.agora.io\", \"uap-ap-web-korea2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-korea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-korea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-korea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"korea.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OVERSEA: {\n      CODE: IC.OVERSEA,\n      WEBCS_DOMAIN: [\"ap-web-1-oversea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oversea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oversea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oversea.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oversea.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oversea.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oversea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oversea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oversea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.agora.io\"]\n    },\n    GLOBAL: {\n      CODE: IC.GLOBAL,\n      WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\"],\n      PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n      CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-ap-web-3.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-ap-web-3.agora.io\"],\n      UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-ap-web-3.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OCEANIA: {\n      CODE: IC.OCEANIA,\n      WEBCS_DOMAIN: [\"ap-web-1-oceania.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oceania.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oceania.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oceania.agora.io\", \"cds-ap-web-oceania2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oceania.agora.io\", \"sua-ap-web-oceania2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oceania.agora.io\", \"uap-ap-web-oceania2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oceania.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oceania.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oceania.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    SOUTH_AMERICA: {\n      CODE: IC.SOUTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-south-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-south-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-south-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-south-america.agora.io\", \"cds-ap-web-south-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-south-america.agora.io\", \"sua-ap-web-south-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-south-america.agora.io\", \"uap-ap-web-south-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-south-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-south-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    AFRICA: {\n      CODE: IC.AFRICA,\n      WEBCS_DOMAIN: [\"ap-web-1-africa.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-africa.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-africa.agora.io\"],\n      CDS_AP: [\"cds-ap-web-africa.agora.io\", \"cds-ap-web-africa2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-africa.agora.io\", \"sua-ap-web-africa2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-africa.agora.io\", \"uap-ap-web-africa2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-africa.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-africa.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-africa.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"africa.webrtc-cloud-proxy.sd-rtn.com\"]\n    }\n  };\n  var mC, CC, SC;\n\n  function RC(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function TC(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = RC(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = RC(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  Nc && (fC.CHINA = {\n    CODE: IC.CHINA,\n    WEBCS_DOMAIN: [\"webrtc2-2.ap.sd-rtn.com\"],\n    WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-4.ap.sd-rtn.com\"],\n    PROXY_CS: [\"proxy-web.ap.sd-rtn.com\"],\n    CDS_AP: [\"cds-web-2.ap.sd-rtn.com\", \"cds-web-4.ap.sd-rtn.com\"],\n    ACCOUNT_REGISTER: [\"sua-web-2.ap.sd-rtn.com\", \"sua-web-4.ap.sd-rtn.com\"],\n    UAP_AP: [\"uap-web-2.ap.sd-rtn.com\", \"uap-web-4.ap.sd-rtn.com\"],\n    EVENT_REPORT_DOMAIN: [\"web-3.statscollector.sd-rtn.com\"],\n    EVENT_REPORT_BACKUP_DOMAIN: [\"web-4.statscollector.sd-rtn.com\"],\n    LOG_UPLOAD_SERVER: [\"logservice-china.agora.io\"],\n    PROXY_SERVER_TYPE3: [\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]\n  }), function (e) {\n    e.UPDATE_BITRATE_LIMIT = \"update_bitrate_limit\";\n  }(mC || (mC = {})), function (e) {\n    e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(CC || (CC = {})), function (e) {\n    e.NETWORK_STATE_CHANGE = \"NETWORK_STATE_CHANGE\", e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(SC || (SC = {}));\n\n  function vC() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      report: wC\n    };\n    return function (t, i, r) {\n      var n = t[i];\n\n      if (\"function\" == typeof n) {\n        var _s42 = \"AgoraRTCClient\" === t.constructor.name ? \"Client\" : t.constructor.name;\n\n        r.value = function () {\n          for (var _len26 = arguments.length, t = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {\n            t[_key26] = arguments[_key26];\n          }\n\n          var r;\n          var o = e.report.reportApiInvoke(this._sessionId || null, {\n            name: Xe(r = \"\".concat(_s42, \".\")).call(r, i),\n            options: t,\n            tag: xm.TRACER\n          });\n\n          try {\n            var _e149 = n.apply(this, t);\n\n            return o.onSuccess(), _e149;\n          } catch (e) {\n            throw o.onError(e), e;\n          }\n        };\n      }\n\n      return r;\n    };\n  }\n\n  function yC() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      report: wC\n    };\n    return function (t, i, r) {\n      var n = t[i];\n\n      if (\"function\" == typeof n) {\n        var _s43 = \"AgoraRTCClient\" === t.constructor.name ? \"Client\" : t.constructor.name;\n\n        r.value =\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee208() {\n          var _len27,\n              t,\n              _key27,\n              r,\n              o,\n              _e150,\n              _args208 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee208$(_context208) {\n            while (1) {\n              switch (_context208.prev = _context208.next) {\n                case 0:\n                  for (_len27 = _args208.length, t = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {\n                    t[_key27] = _args208[_key27];\n                  }\n\n                  o = e.report.reportApiInvoke(this._sessionId || null, {\n                    name: Xe(r = \"\".concat(_s43, \".\")).call(r, i),\n                    options: t,\n                    tag: xm.TRACER\n                  });\n                  _context208.prev = 2;\n                  _context208.next = 5;\n                  return n.apply(this, t);\n\n                case 5:\n                  _e150 = _context208.sent;\n                  return _context208.abrupt(\"return\", (o.onSuccess(), _e150));\n\n                case 9:\n                  _context208.prev = 9;\n                  _context208.t0 = _context208[\"catch\"](2);\n                  throw o.onError(_context208.t0), _context208.t0;\n\n                case 12:\n                case \"end\":\n                  return _context208.stop();\n              }\n            }\n          }, _callee208, this, [[2, 9]]);\n        }));\n      }\n\n      return r;\n    };\n  }\n\n  var wC = new (\n  /*#__PURE__*/\n  function () {\n    function _class12() {\n      _classCallCheck(this, _class12);\n\n      var e, t;\n      this.baseInfoMap = new Li(), this.clientList = Yc, this.keyEventUploadPendingItems = [], this.normalEventUploadPendingItems = [], this.apiInvokeUploadPendingItems = [], this.apiInvokeCount = 0, this.ltsList = [], this.lastSendNormalEventTime = La(), this.customReportCount = 0, this.eventUploadTimer = window.setInterval(qs(e = this.doSend).call(e, this), Fc(\"EVENT_REPORT_SEND_INTERVAL\")), this.setSessionIdTimer = window.setInterval(qs(t = this.appendSessionId).call(t, this), Fc(\"EVENT_REPORT_SEND_INTERVAL\"));\n    }\n\n    _createClass(_class12, [{\n      key: \"reportApiInvoke\",\n      value: function reportApiInvoke(e, t, i) {\n        var _this194 = this;\n\n        t.timeout = t.timeout || 6e4, t.reportResult = void 0 === t.reportResult || t.reportResult;\n        var r = La();\n        this.apiInvokeCount += 1;\n\n        var n = this.apiInvokeCount,\n            s = function s() {\n          return {\n            tag: t.tag,\n            invokeId: n,\n            sid: e,\n            name: t.name,\n            apiInvokeTime: r,\n            options: t.options,\n            states: t.states || null\n          };\n        },\n            o = !!Fc(\"SHOW_REPORT_INVOKER_LOG\");\n\n        o && vc.info(\"\".concat(t.name, \" start\"), t.options);\n        var a = !1;\n        Th(t.timeout).then(function () {\n          a || (_this194.sendApiInvoke(TC({}, s(), {\n            error: ad.API_INVOKE_TIMEOUT,\n            success: !1\n          })), vc.debug(\"\".concat(t.name, \" timeout\")));\n        });\n        var c = new Ad(ad.UNEXPECTED_ERROR, \"\".concat(t.name, \": this api invoke is end\"));\n        return {\n          onSuccess: function onSuccess(e) {\n            var r = function r() {\n              if (a) throw c;\n              return a = !0, _this194.sendApiInvoke(TC({}, s(), {\n                success: !0\n              }, t.reportResult && {\n                result: e\n              })), o && vc.info(\"\".concat(t.name, \" onSuccess\")), e;\n            };\n\n            return i ? Wh(r, t.name + \"Success\", i, function () {\n              return a = !0;\n            }) : r();\n          },\n          onError: function onError(e) {\n            var r = function r() {\n              if (a) throw e;\n              a = !0, _this194.sendApiInvoke(TC({}, s(), {\n                success: !1,\n                error: e.toString()\n              })), o && vc.info(\"\".concat(t.name, \" onFailure\"), e.toString());\n            };\n\n            return i ? Wh(r, t.name + \"Error\", i, function () {\n              return a = !0;\n            }) : r();\n          }\n        };\n      }\n    }, {\n      key: \"sessionInit\",\n      value: function sessionInit(e, t) {\n        if (this.baseInfoMap.has(e)) return;\n        var i = La(),\n            r = this.createBaseInfo(e, i);\n        r.cname = t.cname;\n        var n = er({}, {\n          willUploadConsoleLog: Fc(\"UPLOAD_LOG\"),\n          maxTouchPoints: navigator.maxTouchPoints,\n          areaVersion: Nc ? \"global\" : \"oversea\",\n          areas: Fc(\"AREAS\") && Fc(\"AREAS\").join(\",\")\n        }, t.extend),\n            s = La(),\n            o = TC({}, r, {\n          eventType: Mm.SESSION_INIT,\n          appid: t.appid,\n          browser: navigator.userAgent,\n          build: yc,\n          lts: s,\n          elapse: s - i,\n          extend: ge(n),\n          mode: t.mode,\n          process: Fc(\"PROCESS_ID\"),\n          success: !0,\n          version: wc\n        });\n        this.send({\n          type: Um.SESSION,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"joinChooseServer\",\n      value: function joinChooseServer(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.JOIN_CHOOSE_SERVER,\n          lts: n,\n          eventElapse: n - t.lts,\n          chooseServerAddr: t.csAddr,\n          errorCode: t.ec,\n          elapse: n - i.startTime,\n          success: t.succ,\n          chooseServerAddrList: ge(t.serverList),\n          uid: t.uid ? mr(t.uid) : null,\n          cid: t.cid ? mr(t.cid) : null,\n          chooseServerIp: t.csIp || \"\",\n          opid: t.opid,\n          unilbsServerIds: t.unilbsServerIds,\n          extend: t.extend || void 0\n        });\n        this.send({\n          type: Um.JOIN_CHOOSE_SERVER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"reqUserAccount\",\n      value: function reqUserAccount(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.REQ_USER_ACCOUNT,\n          lts: n,\n          success: t.success,\n          serverAddress: t.serverAddr,\n          stringUid: t.stringUid,\n          uid: t.uid,\n          errorCode: t.errorCode,\n          elapse: n - i.startTime,\n          eventElapse: n - t.lts,\n          extend: ge(t.extend)\n        });\n        this.send({\n          type: Um.REQ_USER_ACCOUNT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinGateway\",\n      value: function joinGateway(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info;\n        t.vid && (r.vid = t.vid), r.uid = t.uid, r.cid = t.cid;\n        var n = La(),\n            s = TC({}, r, {\n          eventType: Mm.JOIN_GATEWAY,\n          lts: n,\n          gatewayAddr: t.addr,\n          success: t.succ,\n          errorCode: t.ec,\n          elapse: n - i.startTime,\n          eventElapse: n - t.lts\n        });\n        t.succ && (i.lastJoinSuccessTime = n), this.send({\n          type: Um.JOIN_GATEWAT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinChannelTimeout\",\n      value: function joinChannelTimeout(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = La(),\n            n = TC({}, i.info, {\n          lts: r,\n          timeout: t,\n          elapse: r - i.startTime\n        });\n        this.send({\n          type: Um.JOIN_CHANNEL_TIMEOUT,\n          data: n\n        }, !0);\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.PUBLISH,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          success: t.succ,\n          errorCode: t.ec,\n          videoName: t.videoName,\n          audioName: t.audioName,\n          screenName: t.screenName,\n          screenshare: t.screenshare,\n          audio: t.audio,\n          video: t.video,\n          p2pid: t.p2pid,\n          publishRequestid: t.publishRequestid\n        });\n        this.send({\n          type: Um.PUBLISH,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.SUBSCRIBE,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          success: t.succ,\n          errorCode: t.ec,\n          video: t.video,\n          audio: t.audio,\n          subscribeRequestid: t.subscribeRequestid,\n          p2pid: t.p2pid\n        });\n        \"string\" == typeof t.peerid ? s.peerSuid = t.peerid : s.peer = t.peerid, this.send({\n          type: Um.SUBSCRIBE,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"firstRemoteFrame\",\n      value: function firstRemoteFrame(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var s = n.info,\n            o = La(),\n            a = TC({}, s, {}, r, {\n          elapse: o - n.startTime,\n          eventType: t,\n          lts: o\n        });\n        this.send({\n          type: i,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"onGatewayStream\",\n      value: function onGatewayStream(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var s = TC({}, n.info, {}, r, {\n          eventType: t,\n          lts: La()\n        });\n        this.send({\n          type: i,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"streamSwitch\",\n      value: function streamSwitch(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.STREAM_SWITCH,\n          lts: n,\n          isDual: t.isdual,\n          elapse: n - i.startTime,\n          success: t.succ\n        });\n        this.send({\n          type: Um.STREAM_SWITCH,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyAppCenter\",\n      value: function requestProxyAppCenter(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.REQUEST_PROXY_APPCENTER,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          APAddr: t.APAddr,\n          workerManagerList: t.workerManagerList,\n          response: t.response,\n          errorCode: t.ec,\n          success: t.succ\n        });\n        this.send({\n          type: Um.REQUEST_PROXY_APPCENTER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyWorkerManager\",\n      value: function requestProxyWorkerManager(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          eventType: Mm.REQUEST_PROXY_WORKER_MANAGER,\n          lts: n,\n          eventElapse: n - t.lts,\n          elapse: n - i.startTime,\n          workerManagerAddr: t.workerManagerAddr,\n          response: t.response,\n          errorCode: t.ec,\n          success: t.succ\n        });\n        this.send({\n          type: Um.REQUEST_PROXY_WORKER_MANAGER,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        this.proxyServer = e, e ? vc.debug(\"reportProxyServerurl: \".concat(e)) : vc.debug(\"disable reportProxyServerurl: \".concat(e));\n      }\n    }, {\n      key: \"peerPublishStatus\",\n      value: function peerPublishStatus(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {\n          subscribeElapse: t.subscribeElapse,\n          peer: t.peer,\n          peerPublishDuration: Math.max(t.audioPublishDuration, t.videoPublishDuration),\n          audiotag: t.audioPublishDuration > 0 ? 1 : -1,\n          videotag: t.videoPublishDuration > 0 ? 1 : -1,\n          lts: n,\n          elapse: n - i.startTime,\n          joinChannelSuccessElapse: n - (i.lastJoinSuccessTime || n)\n        });\n        this.send({\n          type: Um.PEER_PUBLISH_STATUS,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"workerEvent\",\n      value: function workerEvent(e, t) {\n        var _this195 = this;\n\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = Rh(TC({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n,\n          productType: \"WebRTC\"\n        }), \"payload\", 1300);\n        Xi(s).call(s, function (e) {\n          return _this195.send({\n            type: Um.WORKER_EVENT,\n            data: e\n          }, !0);\n        });\n      }\n    }, {\n      key: \"apworkerEvent\",\n      value: function apworkerEvent(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n\n        });\n        this.send({\n          type: Um.AP_WORKER_EVENT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinWebProxyAP\",\n      value: function joinWebProxyAP(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n,\n          extend: t.extend || void 0\n        });\n        this.send({\n          type: Um.JOIN_WEB_PROXY_AP,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"WebSocketQuit\",\n      value: function WebSocketQuit(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n            n = La(),\n            s = TC({}, r, {}, t, {\n          elapse: n - i.startTime,\n          lts: n\n        });\n        this.send({\n          type: Um.WEBSOCKET_QUIT,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee209(e, t) {\n          var _this196 = this;\n\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee209$(_context209) {\n            while (1) {\n              switch (_context209.prev = _context209.next) {\n                case 0:\n                  if (!(this.customReportCount += t.length, this.customReportCount > Fc(\"CUSTOM_REPORT_LIMIT\"))) {\n                    _context209.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);\n\n                case 2:\n                  this.customReportCounterTimer || (this.customReportCounterTimer = window.setInterval(function () {\n                    _this196.customReportCount = 0;\n                  }, 5e3));\n                  i = Es(t).call(t, function (t) {\n                    return {\n                      type: Um.USER_ANALYTICS,\n                      data: TC({\n                        sid: e\n                      }, t)\n                    };\n                  }), r = {\n                    msgType: \"EventMessages\",\n                    sentTs: Math.round(La() / 1e3),\n                    payloads: Es(i).call(i, function (e) {\n                      return ge(e);\n                    })\n                  };\n                  _context209.prev = 4;\n                  _context209.next = 7;\n                  return this.postDataToStatsCollector(r);\n\n                case 7:\n                  _context209.next = 12;\n                  break;\n\n                case 9:\n                  _context209.prev = 9;\n                  _context209.t0 = _context209[\"catch\"](4);\n                  throw vc.error(\"send custom report message failed\", _context209.t0.toString()), new Ad(ad.CUSTOM_REPORT_SEND_FAILED, _context209.t0.message);\n\n                case 12:\n                case \"end\":\n                  return _context209.stop();\n              }\n            }\n          }, _callee209, this, [[4, 9]]);\n        }));\n\n        function sendCustomReportMessage(_x319, _x320) {\n          return _sendCustomReportMessage3.apply(this, arguments);\n        }\n\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"sendApiInvoke\",\n      value: function sendApiInvoke(e) {\n        var t = Fc(\"NOT_REPORT_EVENT\");\n        if (e.tag && eo(t) && eo(t).call(t, e.tag)) return !1;\n        if (null === e.sid) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var i = this.baseInfoMap.get(e.sid);\n        if (!i) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var _i$info2 = i.info,\n            r = _i$info2.cname,\n            n = _i$info2.uid,\n            s = _i$info2.cid;\n        e.lts = e.lts || La();\n        var o = {\n          invokeId: e.invokeId,\n          sid: e.sid,\n          cname: r,\n          cid: s,\n          uid: n,\n          lts: e.lts,\n          success: e.success,\n          elapse: e.lts - i.startTime,\n          execElapse: e.lts - e.apiInvokeTime,\n          apiName: e.name,\n          options: e.options ? ge(e.options) : void 0,\n          execStates: e.states ? ge(e.states) : void 0,\n          execResult: e.result ? ge(e.result) : void 0,\n          errorCode: e.error ? ge(e.error) : void 0\n        };\n        return this.send({\n          type: Um.API_INVOKE,\n          data: o\n        }, !1), !0;\n      }\n    }, {\n      key: \"appendSessionId\",\n      value: function appendSessionId() {\n        var _this197 = this;\n\n        var e;\n        Xi(e = this.clientList).call(e, function (e) {\n          if (e._sessionId) {\n            var _t153 = _this197.apiInvokeUploadPendingItems.length;\n\n            for (var _i114 = 0; _i114 < _t153; _i114++) {\n              var _t154 = _this197.apiInvokeUploadPendingItems.shift();\n\n              _t154 && (_t154.sid = e._sessionId, _this197.sendApiInvoke(er({}, _t154)));\n            }\n          }\n        });\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        if (t) return this.keyEventUploadPendingItems.push(e), void this.sendItems(this.keyEventUploadPendingItems, !0);\n        var i;\n        (this.normalEventUploadPendingItems.push(e), this.normalEventUploadPendingItems.length > Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\")) && Ss(i = this.normalEventUploadPendingItems).call(i, 0, 1);\n        this.normalEventUploadPendingItems.length >= 10 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"doSend\",\n      value: function doSend() {\n        this.keyEventUploadPendingItems.length > 0 && this.sendItems(this.keyEventUploadPendingItems, !0), this.normalEventUploadPendingItems.length > 0 && La() - this.lastSendNormalEventTime >= 5e3 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"sendItems\",\n      value: function sendItems(e, t) {\n        var _this198 = this;\n\n        var i = [],\n            r = [];\n\n        for (; e.length;) {\n          var _t155 = e.shift();\n\n          i.length < 20 ? i.push(_t155) : r.push(_t155);\n        }\n\n        e.push.apply(e, r);\n\n        var _arr2 = [].concat(i);\n\n        for (var _i115 = 0; _i115 < _arr2.length; _i115++) {\n          var _e151 = _arr2[_i115];\n          var n, s;\n          if (-1 !== Os(n = this.ltsList).call(n, _e151.data.lts)) _e151.data.lts = this.ltsList[this.ltsList.length - 1] + 1, this.ltsList.push(_e151.data.lts);else this.ltsList.push(_e151.data.lts), od(s = this.ltsList).call(s, function (e, t) {\n            return e - t;\n          });\n        }\n\n        t || (this.lastSendNormalEventTime = La());\n        var o = {\n          msgType: \"EventMessages\",\n          sentTs: Math.round(La() / 1e3),\n          payloads: Es(i).call(i, function (e) {\n            return ge(e);\n          }),\n          vid: function (e) {\n            var t = e && e.data.sid && _this198.baseInfoMap.get(e.data.sid);\n\n            return t && t.info.vid && +t.info.vid || 0;\n          }(i[0])\n        };\n        return i.length && this.postDataToStatsCollector(o).catch(function (e) {\n          return function (i) {\n            var r, n, s;\n            Fc(\"EVENT_REPORT_RETRY\") && (t ? _this198.keyEventUploadPendingItems = Xe(r = _this198.keyEventUploadPendingItems).call(r, e) : (_this198.normalEventUploadPendingItems = Xe(n = _this198.normalEventUploadPendingItems).call(n, e), _this198.normalEventUploadPendingItems.length > Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\") && (Ss(s = _this198.normalEventUploadPendingItems).call(s, 0, _this198.normalEventUploadPendingItems.length - Fc(\"NORMAL_EVENT_QUEUE_CAPACITY\")), vc.warning(\"report: drop normal events\"))));\n          };\n        }(i)), e;\n      }\n    }, {\n      key: \"postDataToStatsCollector\",\n      value: function () {\n        var _postDataToStatsCollector2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee210(e) {\n          var t,\n              i,\n              r,\n              n,\n              s,\n              o,\n              _i116,\n              a,\n              c,\n              d,\n              _args210 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee210$(_context210) {\n            while (1) {\n              switch (_context210.prev = _context210.next) {\n                case 0:\n                  t = _args210.length > 1 && _args210[1] !== undefined ? _args210[1] : !1;\n                  _context210.t0 = WA.networkState === CC.OFFLINE;\n\n                  if (!_context210.t0) {\n                    _context210.next = 5;\n                    break;\n                  }\n\n                  _context210.next = 5;\n                  return As.race([WA.onlineWaiter, Th(2 * HA.maxRetryTimeout)]);\n\n                case 5:\n                  s = t ? \"/events/proto-raws\" : \"/events/messages\";\n                  o = this.url || (this.proxyServer ? Xe(i = Xe(r = \"https://\".concat(this.proxyServer, \"/rs/?h=\")).call(r, Fc(\"EVENT_REPORT_DOMAIN\"), \"&p=6443&d=\")).call(i, s) : Xe(n = \"https://\".concat(Fc(\"EVENT_REPORT_DOMAIN\"), \":6443\")).call(n, s));\n                  _i116 = 0;\n\n                case 8:\n                  if (!(_i116 < 2)) {\n                    _context210.next = 29;\n                    break;\n                  }\n\n                  if (1 === _i116) o = this.backupUrl || (this.proxyServer ? Xe(a = Xe(c = \"https://\".concat(this.proxyServer, \"/rs/?h=\")).call(c, Fc(\"EVENT_REPORT_BACKUP_DOMAIN\"), \"&p=6443&d=\")).call(a, s) : Xe(d = \"https://\".concat(Fc(\"EVENT_REPORT_BACKUP_DOMAIN\"), \":6443\")).call(d, s));\n                  _context210.prev = 10;\n\n                  if (!t) {\n                    _context210.next = 16;\n                    break;\n                  }\n\n                  _context210.next = 14;\n                  return KA(o, {\n                    timeout: 1e4,\n                    data: e\n                  });\n\n                case 14:\n                  _context210.next = 18;\n                  break;\n\n                case 16:\n                  _context210.next = 18;\n                  return jA(o, {\n                    timeout: 1e4,\n                    data: e\n                  });\n\n                case 18:\n                  _context210.next = 25;\n                  break;\n\n                case 20:\n                  _context210.prev = 20;\n                  _context210.t1 = _context210[\"catch\"](10);\n\n                  if (!(1 === _i116)) {\n                    _context210.next = 24;\n                    break;\n                  }\n\n                  throw _context210.t1;\n\n                case 24:\n                  return _context210.abrupt(\"continue\", 26);\n\n                case 25:\n                  return _context210.abrupt(\"return\");\n\n                case 26:\n                  _i116 += 1;\n                  _context210.next = 8;\n                  break;\n\n                case 29:\n                case \"end\":\n                  return _context210.stop();\n              }\n            }\n          }, _callee210, this, [[10, 20]]);\n        }));\n\n        function postDataToStatsCollector(_x321) {\n          return _postDataToStatsCollector2.apply(this, arguments);\n        }\n\n        return postDataToStatsCollector;\n      }()\n    }, {\n      key: \"createBaseInfo\",\n      value: function createBaseInfo(e, t) {\n        var i = er({}, Bm);\n        return i.sid = e, this.baseInfoMap.set(e, {\n          info: i,\n          startTime: t\n        }), i;\n      }\n    }]);\n\n    return _class12;\n  }())();\n\n  var NC =\n  /*#__PURE__*/\n  function (_Ll21) {\n    _inherits(NC, _Ll21);\n\n    function NC(e) {\n      var _this199;\n\n      _classCallCheck(this, NC);\n\n      _this199 = _possibleConstructorReturn(this, _getPrototypeOf(NC).call(this)), _this199._connectionState = qm.CLOSED, _this199.openConnectionTime = La(), _this199.lastMsgTime = La(), _this199.uploadCache = [], _this199.rttRolling = new Vp(5), _this199.pingpongTimeoutCount = 0, _this199.onWebsocketMessage = function (e) {\n        if (e.data instanceof ArrayBuffer) return void _this199.emit(Jm.ON_BINARY_DATA, e.data);\n        var t = JSON.parse(e.data);\n\n        if (_this199.lastMsgTime = La(), Object.prototype.hasOwnProperty.call(t, \"_id\")) {\n          var _e152 = \"res-@\".concat(t._id);\n\n          _this199.emit(_e152, t._result, t._message);\n        } else if (Object.prototype.hasOwnProperty.call(t, \"_type\") && (_this199.emit(t._type, t._message), t._type === Zm.ON_NOTIFICATION && _this199.handleNotification(t._message), t._type === Zm.ON_USER_BANNED)) switch (t._message.error_code) {\n          case 14:\n            _this199.close(\"UID_BANNED\");\n\n            break;\n\n          case 15:\n            _this199.close(\"IP_BANNED\");\n\n            break;\n\n          case 16:\n            _this199.close(\"CHANNEL_BANNED\");\n\n        }\n      }, _this199.clientId = e.clientId, _this199.spec = e, _this199.websocket = new xp(\"gateway-\".concat(_this199.clientId), _this199.spec.retryConfig, !0), _this199.handleWebsocketEvents(), window.addEventListener(\"offline\", function () {\n        _this199.connectionState === qm.CONNECTED && _this199.reconnect(\"retry\", Rm.OFFLINE);\n      });\n      return _this199;\n    }\n\n    _createClass(NC, [{\n      key: \"request\",\n      value: function () {\n        var _request4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee211(e, t, i, r) {\n          var _this200 = this;\n\n          var n, s, o, a, c, d, l, A, u, h, p, E, g, _;\n\n          return _regeneratorRuntime.wrap(function _callee211$(_context211) {\n            while (1) {\n              switch (_context211.prev = _context211.next) {\n                case 0:\n                  d = wh(6, \"\"), l = {\n                    _id: d,\n                    _type: e,\n                    _message: t\n                  }, A = this.websocket.connectionID, u = function u() {\n                    return new As(function (e, t) {\n                      if (_this200.connectionState === qm.CONNECTED) return e();\n\n                      var i = function i() {\n                        _this200.off(Jm.WS_CLOSED, r), e();\n                      },\n                          r = function r() {\n                        _this200.off(Jm.WS_CONNECTED, i), t(new Ad(lC.WS_ABORT));\n                      };\n\n                      _this200.once(Jm.WS_CONNECTED, i), _this200.once(Jm.WS_CLOSED, r);\n                    });\n                  };\n                  _context211.t0 = this.connectionState !== qm.CONNECTING && this.connectionState !== qm.RECONNECTING || e === Xm.JOIN || e === Xm.REJOIN;\n\n                  if (_context211.t0) {\n                    _context211.next = 5;\n                    break;\n                  }\n\n                  _context211.next = 5;\n                  return u();\n\n                case 5:\n                  this.websocket.sendMessage(l, !0);\n\n                  if (!r) {\n                    _context211.next = 8;\n                    break;\n                  }\n\n                  return _context211.abrupt(\"return\");\n\n                case 8:\n                  h = new As(function (i, r) {\n                    var n = !1;\n\n                    var s = function s(r, _s44) {\n                      n = !0, i({\n                        isSuccess: \"success\" === r,\n                        message: _s44 || {}\n                      }), _this200.off(Jm.WS_CLOSED, o), _this200.off(Jm.WS_RECONNECTING, o), _this200.emit(Jm.REQUEST_SUCCESS, e, t);\n                    };\n\n                    _this200.once(\"res-@\".concat(d), s);\n\n                    var o = function o() {\n                      r(new Ad(lC.WS_ABORT, \"type: \".concat(e))), _this200.off(Jm.WS_CLOSED, o), _this200.off(Jm.WS_RECONNECTING, o), _this200.off(\"res-@\".concat(d), s);\n                    };\n\n                    _this200.once(Jm.WS_CLOSED, o), _this200.once(Jm.WS_RECONNECTING, o), Th(Fc(\"SIGNAL_REQUEST_TIMEOUT\")).then(function () {\n                      _this200.websocket.connectionID !== A || n || (vc.warning(\"ws request timeout, type: \".concat(e)), _this200.emit(Jm.REQUEST_TIMEOUT, e, t));\n                    });\n                  });\n                  p = null;\n                  _context211.prev = 10;\n                  _context211.next = 13;\n                  return h;\n\n                case 13:\n                  p = _context211.sent;\n                  _context211.next = 35;\n                  break;\n\n                case 16:\n                  _context211.prev = 16;\n                  _context211.t1 = _context211[\"catch\"](10);\n\n                  if (!(this.connectionState === qm.CLOSED || e === Xm.LEAVE)) {\n                    _context211.next = 20;\n                    break;\n                  }\n\n                  throw new Ad(lC.WS_ABORT);\n\n                case 20:\n                  if (!(!this.spec.forceWaitGatewayResponse || i)) {\n                    _context211.next = 24;\n                    break;\n                  }\n\n                  _context211.t2 = _context211.t1.throw();\n                  _context211.next = 34;\n                  break;\n\n                case 24:\n                  if (!(e === Xm.JOIN || e === Xm.REJOIN)) {\n                    _context211.next = 28;\n                    break;\n                  }\n\n                  _context211.t3 = null;\n                  _context211.next = 33;\n                  break;\n\n                case 28:\n                  _context211.next = 30;\n                  return u();\n\n                case 30:\n                  _context211.next = 32;\n                  return this.request(e, t);\n\n                case 32:\n                  _context211.t3 = _context211.sent;\n\n                case 33:\n                  _context211.t2 = _context211.t3;\n\n                case 34:\n                  return _context211.abrupt(\"return\", _context211.t2);\n\n                case 35:\n                  if (!p.isSuccess) {\n                    _context211.next = 37;\n                    break;\n                  }\n\n                  return _context211.abrupt(\"return\", p.message);\n\n                case 37:\n                  E = Number(p.message.error_code || p.message.code), g = ep(E), _ = new Ad(lC.UNEXPECTED_RESPONSE, Xe(n = \"\".concat(g.desc, \": \")).call(n, p.message.error_str), {\n                    code: E,\n                    data: p.message\n                  });\n\n                  if (!(\"success\" === g.action)) {\n                    _context211.next = 42;\n                    break;\n                  }\n\n                  _context211.t4 = p.message;\n                  _context211.next = 62;\n                  break;\n\n                case 42:\n                  vc.warning(Xe(s = Xe(o = Xe(a = Xe(c = \"[\".concat(this.websocket.connectionID, \"] unexpected response from type \")).call(c, e, \", error_code: \")).call(a, E, \", message: \")).call(o, g.desc, \", action: \")).call(s, g.action));\n\n                  if (!(\"failed\" === g.action)) {\n                    _context211.next = 47;\n                    break;\n                  }\n\n                  _context211.t5 = _.throw();\n                  _context211.next = 61;\n                  break;\n\n                case 47:\n                  if (!(\"quit\" === g.action)) {\n                    _context211.next = 51;\n                    break;\n                  }\n\n                  _context211.t6 = (this.initError = _, this.close(), _.throw());\n                  _context211.next = 60;\n                  break;\n\n                case 51:\n                  E === Ym.ERR_JOIN_BY_MULTI_IP ? (this.multiIpOption = p.message.option, vc.warning(\"[\".concat(this.clientId, \"] detect multi ip, recover\")), this.reconnect(\"recover\", Rm.MULTI_IP)) : this.reconnect(g.action, Rm.SERVER_ERROR);\n\n                  if (!(e === Xm.JOIN || e === Xm.REJOIN)) {\n                    _context211.next = 56;\n                    break;\n                  }\n\n                  _context211.t7 = null;\n                  _context211.next = 59;\n                  break;\n\n                case 56:\n                  _context211.next = 58;\n                  return this.request(e, t);\n\n                case 58:\n                  _context211.t7 = _context211.sent;\n\n                case 59:\n                  _context211.t6 = _context211.t7;\n\n                case 60:\n                  _context211.t5 = _context211.t6;\n\n                case 61:\n                  _context211.t4 = _context211.t5;\n\n                case 62:\n                  return _context211.abrupt(\"return\", _context211.t4);\n\n                case 63:\n                case \"end\":\n                  return _context211.stop();\n              }\n            }\n          }, _callee211, this, [[10, 16]]);\n        }));\n\n        function request(_x322, _x323, _x324, _x325) {\n          return _request4.apply(this, arguments);\n        }\n\n        return request;\n      }()\n    }, {\n      key: \"waitMessage\",\n      value: function waitMessage(e, t) {\n        var _this201 = this;\n\n        return new As(function (i) {\n          var r = function r(n) {\n            (!t || t(n)) && (_this201.off(e, r), i(n));\n          };\n\n          _this201.on(e, r);\n        });\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(e, t) {\n        var _this202 = this;\n\n        var i = {\n          _type: e,\n          _message: t\n        };\n\n        try {\n          this.websocket.sendMessage(i);\n        } catch (e) {\n          var _t156 = Fc(\"MAX_UPLOAD_CACHE\") || 50;\n\n          var r;\n          if (this.uploadCache.push(i), this.uploadCache.length > _t156) Ss(r = this.uploadCache).call(r, 0, 1);\n          this.uploadCache.length > 0 && !this.uploadCacheInterval && (this.uploadCacheInterval = window.setInterval(function () {\n            var e;\n            if (_this202.connectionState !== qm.CONNECTED) return;\n            var t = Ss(e = _this202.uploadCache).call(e, 0, 1)[0];\n            0 === _this202.uploadCache.length && (window.clearInterval(_this202.uploadCacheInterval), _this202.uploadCacheInterval = void 0), _this202.upload(t._type, t._message);\n          }, Fc(\"UPLOAD_CACHE_INTERVAL\") || 2e3));\n        }\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = {\n          _type: e,\n          _message: t\n        };\n        this.websocket.sendMessage(i);\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var _this203 = this;\n\n        return this.initError = void 0, this.multiIpOption = void 0, this.joinResponse = void 0, this.reconnectToken = void 0, new As(function (t, i) {\n          _this203.once(Jm.WS_CONNECTED, function () {\n            return t(_this203.joinResponse);\n          }), _this203.once(Jm.WS_CLOSED, function () {\n            return i(_this203.initError || new Ad(lC.WS_ABORT));\n          }), _this203.connectionState = qm.CONNECTING, _this203.websocket.init(e).catch(i), _this203.wsInflateDataTimer && window.clearInterval(_this203.wsInflateDataTimer), _this203.wsInflateDataTimer = window.setInterval(function () {\n            _this203.handleWsInflateData();\n          }, 2e4);\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.wsInflateDataTimer && (this.handleWsInflateData(), window.clearInterval(this.wsInflateDataTimer), this.wsInflateDataTimer = void 0), this.reconnectToken = void 0, this.joinResponse = void 0, this._disconnectedReason = e || \"LEAVE\", this.connectionState = qm.CLOSED, this.websocket.close();\n      }\n    }, {\n      key: \"join\",\n      value: function () {\n        var _join4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee212() {\n          var e, _e153, _t157;\n\n          return _regeneratorRuntime.wrap(function _callee212$(_context212) {\n            while (1) {\n              switch (_context212.prev = _context212.next) {\n                case 0:\n                  if (this.joinResponse) {\n                    _context212.next = 8;\n                    break;\n                  }\n\n                  _e153 = Bh(this, Jm.REQUEST_JOIN_INFO);\n                  _context212.next = 4;\n                  return this.request(Xm.JOIN, _e153);\n\n                case 4:\n                  _t157 = _context212.sent;\n\n                  if (_t157) {\n                    _context212.next = 7;\n                    break;\n                  }\n\n                  return _context212.abrupt(\"return\", (this.emit(Jm.REPORT_JOIN_GATEWAY, lC.TIMEOUT, this.url || \"\"), !1));\n\n                case 7:\n                  this.joinResponse = _t157, this.reconnectToken = this.joinResponse.rejoin_token;\n\n                case 8:\n                  return _context212.abrupt(\"return\", (this.connectionState = qm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(qs(e = this.handlePingPong).call(e, this), 3e3), !0));\n\n                case 9:\n                case \"end\":\n                  return _context212.stop();\n              }\n            }\n          }, _callee212, this);\n        }));\n\n        function join() {\n          return _join4.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"rejoin\",\n      value: function () {\n        var _rejoin2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee213() {\n          var _this204 = this;\n\n          var e, t, i, r;\n          return _regeneratorRuntime.wrap(function _callee213$(_context213) {\n            while (1) {\n              switch (_context213.prev = _context213.next) {\n                case 0:\n                  if (this.reconnectToken) {\n                    _context213.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(lC.UNEXPECTED_ERROR, \"can not rejoin, no rejoin token\");\n\n                case 2:\n                  i = Bh(this, Jm.REQUEST_REJOIN_INFO);\n                  i.token = this.reconnectToken;\n                  _context213.next = 6;\n                  return this.request(Xm.REJOIN, i);\n\n                case 6:\n                  r = _context213.sent;\n                  return _context213.abrupt(\"return\", !!r && (this.connectionState = qm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(qs(e = this.handlePingPong).call(e, this), 3e3), r.peers && Xi(t = r.peers).call(t, function (e) {\n                    _this204.emit(Zm.ON_USER_ONLINE, {\n                      uid: e.uid\n                    }), e.audio_mute ? _this204.emit(Zm.MUTE_AUDIO, {\n                      uid: e.uid\n                    }) : _this204.emit(Zm.UNMUTE_AUDIO, {\n                      uid: e.uid\n                    }), e.video_mute ? _this204.emit(Zm.MUTE_VIDEO, {\n                      uid: e.uid\n                    }) : _this204.emit(Zm.UNMUTE_VIDEO, {\n                      uid: e.uid\n                    }), e.audio_enable_local ? _this204.emit(Zm.ENABLE_LOCAL_AUDIO, {\n                      uid: e.uid\n                    }) : _this204.emit(Zm.DISABLE_LOCAL_AUDIO, {\n                      uid: e.uid\n                    }), e.video_enable_local ? _this204.emit(Zm.ENABLE_LOCAL_VIDEO, {\n                      uid: e.uid\n                    }) : _this204.emit(Zm.DISABLE_LOCAL_VIDEO, {\n                      uid: e.uid\n                    }), e.audio || e.video || _this204.emit(Zm.ON_REMOVE_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id\n                    }), e.audio && _this204.emit(Zm.ON_ADD_AUDIO_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id,\n                      audio: !0\n                    }), e.video && _this204.emit(Zm.ON_ADD_VIDEO_STREAM, {\n                      uid: e.uid,\n                      uint_id: e.uint_id,\n                      video: !0\n                    });\n                  }), !0));\n\n                case 8:\n                case \"end\":\n                  return _context213.stop();\n              }\n            }\n          }, _callee213, this);\n        }));\n\n        function rejoin() {\n          return _rejoin2.apply(this, arguments);\n        }\n\n        return rejoin;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.websocket.reconnect(e, t);\n      }\n    }, {\n      key: \"handleNotification\",\n      value: function handleNotification(e) {\n        vc.debug(\"[\".concat(this.clientId, \"] receive notification: \"), e);\n        var t = ep(e.code);\n\n        if (\"success\" !== t.action) {\n          if (\"failed\" !== t.action) return \"quit\" === t.action ? (\"ERR_REPEAT_JOIN_CHANNEL\" === t.desc && this.close(\"UID_BANNED\"), void this.close()) : void this.reconnect(t.action, Rm.SERVER_ERROR);\n          vc.error(\"[\".concat(this.clientId, \"] ignore error: \"), t.desc);\n        }\n      }\n    }, {\n      key: \"handlePingPong\",\n      value: function handlePingPong() {\n        var _this205 = this;\n\n        if (!this.websocket || \"connected\" !== this.websocket.state) return;\n        this.pingpongTimeoutCount > 0 && this.rttRolling.add(3e3), this.pingpongTimeoutCount += 1;\n        var e = Fc(\"PING_PONG_TIME_OUT\"),\n            t = La();\n        this.pingpongTimeoutCount >= e && (vc.warning(\"PINGPONG Timeout. Last Socket Message: \".concat(t - this.lastMsgTime, \"ms\")), t - this.lastMsgTime > Fc(\"WEBSOCKET_TIMEOUT_MIN\")) ? this.reconnect(\"retry\", Rm.TIMEOUT) : this.request(Xm.PING, void 0, !0).then(function () {\n          _this205.pingpongTimeoutCount = 0;\n          var e = La() - t;\n          _this205.rttRolling.add(e), Fc(\"REPORT_STATS\") && _this205.send(Xm.PING_BACK, {\n            pingpongElapse: e\n          });\n        }).catch(function (e) {});\n      }\n    }, {\n      key: \"handleWsInflateData\",\n      value: function handleWsInflateData() {\n        var _this$websocket$getWs2 = this.websocket.getWsInflateData(),\n            e = _this$websocket$getWs2.wsInflateLength,\n            t = _this$websocket$getWs2.wsDeflateLength;\n\n        0 !== e && 0 !== t && this.upload(zm.WS_INFLATE_DATA_LENGTH, {\n          ws_deflate_length: t,\n          ws_inflate_length: e\n        });\n      }\n    }, {\n      key: \"handleWebsocketEvents\",\n      value: function handleWebsocketEvents() {\n        var _this206 = this;\n\n        this.websocket.on(sC.ON_MESSAGE, this.onWebsocketMessage), this.websocket.on(sC.CLOSED, function () {\n          _this206.connectionState = qm.CLOSED;\n        }), this.websocket.on(sC.FAILED, function () {\n          _this206._disconnectedReason = \"NETWORK_ERROR\", _this206.connectionState = qm.CLOSED;\n        }), this.websocket.on(sC.RECONNECTING, function (e) {\n          _this206._websocketReconnectReason = e, _this206.joinResponse = void 0, _this206.connectionState === qm.CONNECTED ? _this206.connectionState = qm.RECONNECTING : _this206.connectionState = qm.CONNECTING;\n        }), this.websocket.on(sC.WILL_RECONNECT, function (e, t) {\n          if (Bh(_this206, Jm.IS_P2P_DISCONNECTED) && \"retry\" === e) return _this206.reconnectToken = void 0, _this206.emit(Jm.NEED_RENEW_SESSION), _this206.emit(Jm.DISCONNECT_P2P), t(\"tryNext\");\n          \"retry\" !== e && (_this206.reconnectToken = void 0, _this206.emit(Jm.NEED_RENEW_SESSION), _this206.emit(Jm.DISCONNECT_P2P)), t(e);\n        }), this.websocket.on(sC.CONNECTED, function () {\n          _this206.openConnectionTime = La(), _this206.reconnectToken ? _this206.rejoin().catch(function (e) {\n            var t;\n            vc.warning(Xe(t = \"[\".concat(_this206.clientId, \"] rejoin failed \")).call(t, e)), _this206.reconnect(\"tryNext\", Rm.SERVER_ERROR);\n          }) : _this206.join().catch(function (e) {\n            if (_this206.emit(Jm.REPORT_JOIN_GATEWAY, e.message || e.code, _this206.url || \"\"), e instanceof Ad && e.code === lC.UNEXPECTED_RESPONSE && e.data.code === Ym.ERR_NO_AUTHORIZED) return vc.warning(\"[\".concat(_this206.clientId, \"] reconnect no authorized, recover\")), void _this206.reconnect(\"recover\", Rm.SERVER_ERROR);\n            vc.error(\"[\".concat(_this206.clientId, \"] join gateway request failed\"), e.toString()), _this206.spec.forceWaitGatewayResponse ? _this206.reconnect(\"tryNext\", Rm.SERVER_ERROR) : (_this206.initError = e, _this206.close());\n          });\n        }), this.websocket.on(sC.REQUEST_NEW_URLS, function (e, t) {\n          kh(_this206, Jm.REQUEST_RECOVER, _this206.multiIpOption).then(e).catch(t);\n        });\n      }\n    }, {\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        e !== this._connectionState && (this._connectionState = e, e === qm.CONNECTED ? this.emit(Jm.WS_CONNECTED) : e === qm.RECONNECTING ? this.emit(Jm.WS_RECONNECTING, this._websocketReconnectReason) : e === qm.CLOSED && this.emit(Jm.WS_CLOSED, this._disconnectedReason));\n      }\n    }, {\n      key: \"currentURLIndex\",\n      get: function get() {\n        return this.websocket.currentURLIndex;\n      }\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"rtt\",\n      get: function get() {\n        return this.rttRolling.mean();\n      }\n    }]);\n\n    return NC;\n  }(Ll);\n\n  var OC, bC;\n  !function (e) {\n    e[e.CHOOSE_SERVER = 11] = \"CHOOSE_SERVER\", e[e.CLOUD_PROXY = 18] = \"CLOUD_PROXY\", e[e.CLOUD_PROXY_5 = 20] = \"CLOUD_PROXY_5\";\n  }(OC || (OC = {}));\n\n  var DC =\n  /*#__PURE__*/\n  function (_Ll22) {\n    _inherits(DC, _Ll22);\n\n    function DC(e, t) {\n      var _this207;\n\n      _classCallCheck(this, DC);\n\n      _this207 = _possibleConstructorReturn(this, _getPrototypeOf(DC).call(this)), _this207._hints = [], _this207._isClosed = !1, _this207._ID = t || wh(8, \"track-\"), _this207._originMediaStreamTrack = e, _this207._mediaStreamTrack = e, zc(_assertThisInitialized(_assertThisInitialized(_this207)));\n      return _this207;\n    }\n\n    _createClass(DC, [{\n      key: \"toString\",\n      value: function toString() {\n        return this._ID;\n      }\n    }, {\n      key: \"getTrackId\",\n      value: function getTrackId() {\n        return this._ID;\n      }\n    }, {\n      key: \"getMediaStreamTrack\",\n      value: function getMediaStreamTrack(e) {\n        if (!e) {\n          var _e154 = wC.reportApiInvoke(null, {\n            name: Fm.GET_MEDIA_STREAM_TRACK,\n            options: [],\n            tag: xm.TRACER\n          });\n\n          this._mediaStreamTrack && \"string\" == typeof this._mediaStreamTrack.label ? _e154.onSuccess(this._mediaStreamTrack.label) : _e154.onSuccess(\"\");\n        }\n\n        return this._mediaStreamTrack;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._isClosed = !0, Zc(this);\n      }\n    }]);\n\n    return DC;\n  }(Ll);\n\n  var kC =\n  /*#__PURE__*/\n  function (_DC) {\n    _inherits(kC, _DC);\n\n    function kC(e, t) {\n      var _this208;\n\n      _classCallCheck(this, kC);\n\n      _this208 = _possibleConstructorReturn(this, _getPrototypeOf(kC).call(this, e, t)), _this208._enabled = !0, _this208._muted = !1, _this208._isClosed = !1, _this208._trackProcessors = [], _this208._handleTrackEnded = function () {\n        _this208.onTrackEnded();\n      }, _this208._enabledMutex = new su(\"\".concat(t)), e.addEventListener(\"ended\", _this208._handleTrackEnded);\n      return _this208;\n    }\n\n    _createClass(kC, [{\n      key: \"getTrackLabel\",\n      value: function getTrackLabel() {\n        return this._originMediaStreamTrack.label;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this._isClosed || (this.stop(), Xi(e = this._trackProcessors).call(e, function (e) {\n          return e.destroy();\n        }), this._trackProcessors = [], this._originMediaStreamTrack.stop(), this._mediaStreamTrack !== this._originMediaStreamTrack && (this._mediaStreamTrack.stop(), this._mediaStreamTrack = null), this._originMediaStreamTrack = null, this._enabledMutex = null, vc.debug(\"[\".concat(this.getTrackId(), \"] close\")), this.emit(gl.NEED_CLOSE), _get(_getPrototypeOf(kC.prototype), \"close\", this).call(this));\n      }\n    }, {\n      key: \"_registerTrackProcessor\",\n      value: function () {\n        var _registerTrackProcessor3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee216(e) {\n          var _this209 = this;\n\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee216$(_context216) {\n            while (1) {\n              switch (_context216.prev = _context216.next) {\n                case 0:\n                  if (!(-1 !== Os(t = this._trackProcessors).call(t, e))) {\n                    _context216.next = 2;\n                    break;\n                  }\n\n                  return _context216.abrupt(\"return\");\n\n                case 2:\n                  i = this._trackProcessors[this._trackProcessors.length - 1];\n\n                  this._trackProcessors.push(e);\n\n                  e.onOutputChange =\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee214() {\n                    var t;\n                    return _regeneratorRuntime.wrap(function _callee214$(_context214) {\n                      while (1) {\n                        switch (_context214.prev = _context214.next) {\n                          case 0:\n                            t = e.output || _this209._originMediaStreamTrack;\n                            _this209._mediaStreamTrack = t;\n\n                            _this209._updatePlayerSource();\n\n                            _context214.next = 5;\n                            return Lh(_this209, gl.NEED_REPLACE_TRACK, _this209._mediaStreamTrack);\n\n                          case 5:\n                          case \"end\":\n                            return _context214.stop();\n                        }\n                      }\n                    }, _callee214, this);\n                  }));\n\n                  if (!i) {\n                    _context216.next = 11;\n                    break;\n                  }\n\n                  i.onOutputChange =\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee215() {\n                    return _regeneratorRuntime.wrap(function _callee215$(_context215) {\n                      while (1) {\n                        switch (_context215.prev = _context215.next) {\n                          case 0:\n                            _context215.t0 = i.output;\n\n                            if (!_context215.t0) {\n                              _context215.next = 4;\n                              break;\n                            }\n\n                            _context215.next = 4;\n                            return e.setInput(i.output);\n\n                          case 4:\n                          case \"end\":\n                            return _context215.stop();\n                        }\n                      }\n                    }, _callee215, this);\n                  }));\n                  _context216.next = 9;\n                  return e.setInput(i.output || i.input || this._originMediaStreamTrack);\n\n                case 9:\n                  _context216.next = 13;\n                  break;\n\n                case 11:\n                  _context216.next = 13;\n                  return e.setInput(this._originMediaStreamTrack);\n\n                case 13:\n                case \"end\":\n                  return _context216.stop();\n              }\n            }\n          }, _callee216, this);\n        }));\n\n        function _registerTrackProcessor(_x326) {\n          return _registerTrackProcessor3.apply(this, arguments);\n        }\n\n        return _registerTrackProcessor;\n      }()\n    }, {\n      key: \"_getOutputFromProcessors\",\n      value: function _getOutputFromProcessors() {\n        if (0 === this._trackProcessors.length) return this._originMediaStreamTrack;\n        var e = this._trackProcessors[this._trackProcessors.length - 1];\n        return e.output || e.input || this._originMediaStreamTrack;\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function () {\n        var _updateOriginMediaStreamTrack4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee217(e, t) {\n          var _t158;\n\n          return _regeneratorRuntime.wrap(function _callee217$(_context217) {\n            while (1) {\n              switch (_context217.prev = _context217.next) {\n                case 0:\n                  if (!(e !== this._originMediaStreamTrack)) {\n                    _context217.next = 12;\n                    break;\n                  }\n\n                  if (!(this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded), t && this._originMediaStreamTrack.stop(), e.addEventListener(\"ended\", this._handleTrackEnded), this._originMediaStreamTrack = e, this._trackProcessors.length > 0)) {\n                    _context217.next = 8;\n                    break;\n                  }\n\n                  _context217.next = 4;\n                  return this._trackProcessors[0].setInput(e);\n\n                case 4:\n                  _t158 = this._getOutputFromProcessors();\n                  this._mediaStreamTrack = _t158;\n                  _context217.next = 9;\n                  break;\n\n                case 8:\n                  this._mediaStreamTrack = this._originMediaStreamTrack;\n\n                case 9:\n                  this._updatePlayerSource();\n\n                  _context217.next = 12;\n                  return Lh(this, gl.NEED_REPLACE_TRACK, this._mediaStreamTrack);\n\n                case 12:\n                case \"end\":\n                  return _context217.stop();\n              }\n            }\n          }, _callee217, this);\n        }));\n\n        function _updateOriginMediaStreamTrack(_x327, _x328) {\n          return _updateOriginMediaStreamTrack4.apply(this, arguments);\n        }\n\n        return _updateOriginMediaStreamTrack;\n      }()\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {};\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(Il.TRACK_ENDED);\n      }\n    }, {\n      key: \"stateCheck\",\n      value: function stateCheck(e, t) {\n        var i, r, n;\n        if (vc.debug(Xe(i = Xe(r = Xe(n = \"check track state, [muted: \".concat(this._muted, \", enabled: \")).call(n, this._enabled, \"] to [\")).call(r, e, \": \")).call(i, t, \"]\")), \"muted\" === e && !Ul().webAudioMediaStreamDest) throw new Ad(ad.NOT_SUPPORTED, \"current environment does not support set mute\").print();\n        if (ud(t, e), this._enabled && this._muted && \"enabled\" === e && !1 === t) throw new Ad(ad.TRACK_STATE_UNREACHABLE, \"cannot set enabled while the track is muted\").print();\n        if (!this._enabled && !this._muted && \"muted\" === e && !0 === t) throw new Ad(ad.TRACK_STATE_UNREACHABLE, \"cannot set muted while the track is disabled\").print();\n      }\n    }, {\n      key: \"muted\",\n      get: function get() {\n        return this._muted;\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return this._enabled;\n      }\n    }]);\n\n    return kC;\n  }(DC);\n\n  function LC() {\n    return function (e, t, i) {\n      var r = e[t];\n      \"function\" == typeof r && (i.value = function () {\n        this._isClosed && new Ad(ad.INVALID_OPERATION, \"[\".concat(this.getTrackId(), \"] cannot operate a closed track\")).print(\"warning\");\n\n        for (var _len28 = arguments.length, e = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {\n          e[_key28] = arguments[_key28];\n        }\n\n        var t = r.apply(this, e);\n        return t instanceof As ? new As(function (e, i) {\n          t.then(e).catch(i);\n        }) : t;\n      });\n    };\n  }\n\n  function PC(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function BC(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = PC(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = PC(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  !function (e) {\n    e.IOS_15_INTERRUPTION_START = \"ios15-interruption-start\", e.IOS_15_INTERRUPTION_END = \"ios15-interruption-end\", e.IOS_INTERRUPTION_START = \"ios-interruption-start\", e.IOS_INTERRUPTION_END = \"ios-interruption-end\";\n  }(bC || (bC = {}));\n\n  var MC = function MC(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      UC = function UC(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var QC =\n  /*#__PURE__*/\n  function (_kC) {\n    _inherits(QC, _kC);\n\n    function QC(e, t, i) {\n      var _this210;\n\n      _classCallCheck(this, QC);\n\n      _this210 = _possibleConstructorReturn(this, _getPrototypeOf(QC).call(this, e, i)), _this210.trackMediaType = \"audio\", _this210._enabled = !0, _this210._volume = 100, _this210._useAudioElement = !1, _this210._bypassWebAudio = !1, _this210._encoderConfig = t, _this210._source = new Iu(e);\n      return _this210;\n    }\n\n    _createClass(QC, [{\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        var _this211 = this;\n\n        pd(e, \"volume\", 0, 1e3);\n        var t = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.LOCAL_AUDIO_TRACK_SET_VOLUME,\n          options: [this.getTrackId(), e]\n        }, 300);\n        this._volume = e, this._source.setVolume(e / 100), this._useAudioElement && Lu.setVolume(this.getTrackId(), e);\n\n        try {\n          if (this._bypassWebAudio) return void vc.debug(\"[\".concat(this.getTrackId(), \"] setVolume returned because no pass through WebAudio.\"));\n\n          var _e155 = this._source.createOutputTrack();\n\n          this._mediaStreamTrack !== _e155 && (this._mediaStreamTrack = _e155, Lh(this, pC.NEED_REPLACE_TRACK, this._mediaStreamTrack).then(function () {\n            vc.debug(\"[\".concat(_this211.getTrackId(), \"] replace web audio track success\"));\n          }).catch(function (e) {\n            vc.warning(\"[\".concat(_this211.getTrackId(), \"] replace web audio track failed\"), e);\n          }));\n        } catch (e) {}\n\n        t.onSuccess();\n      }\n    }, {\n      key: \"getVolumeLevel\",\n      value: function getVolumeLevel() {\n        return this._source.getAccurateVolumeLevel();\n      }\n    }, {\n      key: \"setPlaybackDevice\",\n      value: function () {\n        var _setPlaybackDevice3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee218(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee218$(_context218) {\n            while (1) {\n              switch (_context218.prev = _context218.next) {\n                case 0:\n                  t = iu.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Fm.REMOTE_AUDIO_SET_OUTPUT_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._useAudioElement) {\n                    _context218.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n\n                case 3:\n                  _context218.prev = 3;\n                  _context218.next = 6;\n                  return Lu.setSinkID(this.getTrackId(), e);\n\n                case 6:\n                  _context218.next = 11;\n                  break;\n\n                case 8:\n                  _context218.prev = 8;\n                  _context218.t0 = _context218[\"catch\"](3);\n                  throw t.onError(_context218.t0), _context218.t0;\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context218.stop();\n              }\n            }\n          }, _callee218, this, [[3, 8]]);\n        }));\n\n        function setPlaybackDevice(_x329) {\n          return _setPlaybackDevice3.apply(this, arguments);\n        }\n\n        return setPlaybackDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee219(e, t, i) {\n          var r, n;\n          return _regeneratorRuntime.wrap(function _callee219$(_context219) {\n            while (1) {\n              switch (_context219.prev = _context219.next) {\n                case 0:\n                  if (i) {\n                    _context219.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context219.next = 3;\n                    break;\n                  }\n\n                  return _context219.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e);\n                  _context219.next = 7;\n                  return this._enabledMutex.lock();\n\n                case 7:\n                  n = _context219.sent;\n\n                  if (e) {\n                    _context219.next = 19;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.enabled = !1;\n                  _context219.prev = 10;\n                  _context219.next = 13;\n                  return Lh(this, pC.NEED_REMOVE_TRACK, this);\n\n                case 13:\n                  _context219.next = 18;\n                  break;\n\n                case 15:\n                  _context219.prev = 15;\n                  _context219.t0 = _context219[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context219.t0.toString()), n(), _context219.t0;\n\n                case 18:\n                  return _context219.abrupt(\"return\", (i || (this._enabled = !1), n()));\n\n                case 19:\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context219.prev = 20;\n                  _context219.next = 23;\n                  return Lh(this, pC.NEED_ADD_TRACK, this);\n\n                case 23:\n                  _context219.next = 28;\n                  break;\n\n                case 25:\n                  _context219.prev = 25;\n                  _context219.t1 = _context219[\"catch\"](20);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context219.t1.toString()), n(), _context219.t1;\n\n                case 28:\n                  vc.info(Xe(r = \"[\".concat(this.getTrackId(), \"] setEnabled to \")).call(r, e, \" success\")), i || (this._enabled = !0), n();\n\n                case 29:\n                case \"end\":\n                  return _context219.stop();\n              }\n            }\n          }, _callee219, this, [[10, 15], [20, 25]]);\n        }));\n\n        function setEnabled(_x330, _x331, _x332) {\n          return _setEnabled5.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setMuted\",\n      value: function () {\n        var _setMuted3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee220(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee220$(_context220) {\n            while (1) {\n              switch (_context220.prev = _context220.next) {\n                case 0:\n                  if (!this._bypassWebAudio) {\n                    _context220.next = 5;\n                    break;\n                  }\n\n                  vc.debug(Xe(i = \"[\".concat(this.getTrackId(), \"] setMuted:\")).call(i, e, \" fallback to setEnabled because no pass through.\"));\n                  _context220.next = 4;\n                  return this.setEnabled(!e);\n\n                case 4:\n                  return _context220.abrupt(\"return\", void _context220.sent);\n\n                case 5:\n                  if (!(e !== this._muted)) {\n                    _context220.next = 15;\n                    break;\n                  }\n\n                  if (!(this.stateCheck(\"muted\", e), this._muted = e, pa().name === vm.FIREFOX)) {\n                    _context220.next = 11;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this.getTrackId(), \"] firefox set mute fallback to set enabled\"));\n                  _context220.next = 10;\n                  return this.setEnabled(!e, void 0, !0);\n\n                case 10:\n                  return _context220.abrupt(\"return\", void _context220.sent);\n\n                case 11:\n                  this._mediaStreamTrack.enabled = !e;\n                  vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] start set muted: \")).call(t, e));\n                  _context220.next = 15;\n                  return Lh(this, pC.SET_AUDIO_TRACK_MUTED, {\n                    track: this,\n                    muted: e\n                  });\n\n                case 15:\n                case \"end\":\n                  return _context220.stop();\n              }\n            }\n          }, _callee220, this);\n        }));\n\n        function setMuted(_x333) {\n          return _setMuted3.apply(this, arguments);\n        }\n\n        return setMuted;\n      }()\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead\");\n        }, \"localAudioTrackGetStatsWarning\");\n        var e = Ph(this, pC.GET_STATS);\n        return e || BC({}, tC);\n      }\n    }, {\n      key: \"setAudioFrameCallback\",\n      value: function setAudioFrameCallback(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4096;\n        if (!e) return this._source.removeAllListeners(eC.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n        this._source.startGetAudioBuffer(t), this._source.removeAllListeners(eC.ON_AUDIO_BUFFER), this._source.on(eC.ON_AUDIO_BUFFER, function (t) {\n          return e(t);\n        });\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        var e = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.LOCAL_AUDIO_TRACK_PLAY,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._useAudioElement ? (vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback in element\")), Lu.play(this._mediaStreamTrack, this.getTrackId(), this._volume)) : this._source.play(), e.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.LOCAL_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._useAudioElement ? Lu.stop(this.getTrackId()) : this._source.stop(), e.onSuccess();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(QC.prototype), \"close\", this).call(this), this._source.destroy();\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && Lu.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function () {\n        var _updateOriginMediaStreamTrack5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee221(e, t) {\n          return _regeneratorRuntime.wrap(function _callee221$(_context221) {\n            while (1) {\n              switch (_context221.prev = _context221.next) {\n                case 0:\n                  _context221.t0 = this._originMediaStreamTrack !== e;\n\n                  if (!_context221.t0) {\n                    _context221.next = 13;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded);\n\n                  e.addEventListener(\"ended\", this._handleTrackEnded);\n                  t && this._originMediaStreamTrack.stop();\n                  this._originMediaStreamTrack = e;\n\n                  this._source.updateTrack(this._originMediaStreamTrack);\n\n                  _context221.t1 = this._mediaStreamTrack !== this._source.outputTrack;\n\n                  if (!_context221.t1) {\n                    _context221.next = 13;\n                    break;\n                  }\n\n                  this._mediaStreamTrack = this._originMediaStreamTrack;\n\n                  this._updatePlayerSource();\n\n                  _context221.next = 13;\n                  return Lh(this, pC.NEED_REPLACE_TRACK, this._mediaStreamTrack);\n\n                case 13:\n                case \"end\":\n                  return _context221.stop();\n              }\n            }\n          }, _callee221, this);\n        }));\n\n        function _updateOriginMediaStreamTrack(_x334, _x335) {\n          return _updateOriginMediaStreamTrack5.apply(this, arguments);\n        }\n\n        return _updateOriginMediaStreamTrack;\n      }()\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function renewMediaStreamTrack() {\n        return As.resolve(void 0);\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return this._useAudioElement ? Lu.isPlaying(this.getTrackId()) : this._source.isPlayed;\n      }\n    }]);\n\n    return QC;\n  }(kC);\n\n  MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [String]), UC(\"design:returntype\", As)], QC.prototype, \"setPlaybackDevice\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Boolean, Object, Boolean]), UC(\"design:returntype\", As)], QC.prototype, \"setEnabled\", null), MC([LC(), tu({\n    report: iu\n  }), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Boolean]), UC(\"design:returntype\", As)], QC.prototype, \"setMuted\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", Object)], QC.prototype, \"getStats\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Object, Number]), UC(\"design:returntype\", void 0)], QC.prototype, \"setAudioFrameCallback\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", void 0)], QC.prototype, \"play\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", void 0)], QC.prototype, \"stop\", null);\n\n  var FC =\n  /*#__PURE__*/\n  function (_QC) {\n    _inherits(FC, _QC);\n\n    function FC(e, t, i, r) {\n      var _this212;\n\n      _classCallCheck(this, FC);\n\n      _this212 = _possibleConstructorReturn(this, _getPrototypeOf(FC).call(this, e, t.encoderConfig ? Uc(t.encoderConfig) : {}, r)), _this212._deviceName = \"default\", _this212._enabled = !0, _this212._config = t, _this212._constraints = i, _this212._deviceName = e.label, \"boolean\" == typeof t.bypassWebAudio && (_this212._bypassWebAudio = t.bypassWebAudio), ya() && Au.bindInterruptDetectorTrack(_assertThisInitialized(_assertThisInitialized(_this212)));\n      return _this212;\n    }\n\n    _createClass(FC, [{\n      key: \"setDevice\",\n      value: function () {\n        var _setDevice3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee222(e) {\n          var t, i, r, _t159, _i117, _r72, _t160;\n\n          return _regeneratorRuntime.wrap(function _callee222$(_context222) {\n            while (1) {\n              switch (_context222.prev = _context222.next) {\n                case 0:\n                  r = iu.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Fm.MIC_AUDIO_TRACK_SET_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (!(vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] start set device to \")).call(t, e)), this._enabled)) {\n                    _context222.next = 36;\n                    break;\n                  }\n\n                  _context222.prev = 2;\n                  _context222.next = 5;\n                  return Du.getDeviceById(e);\n\n                case 5:\n                  _t159 = _context222.sent;\n                  _i117 = {};\n                  _i117.audio = BC({}, this._constraints), _i117.audio.deviceId = {\n                    exact: e\n                  }, this._originMediaStreamTrack.stop();\n                  _r72 = null;\n                  _context222.prev = 9;\n                  _context222.next = 12;\n                  return wu(_i117, this.getTrackId());\n\n                case 12:\n                  _r72 = _context222.sent;\n                  _context222.next = 24;\n                  break;\n\n                case 15:\n                  _context222.prev = 15;\n                  _context222.t0 = _context222[\"catch\"](9);\n                  vc.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context222.t0.toString());\n                  _context222.next = 20;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 20:\n                  _r72 = _context222.sent;\n                  _context222.next = 23;\n                  return this._updateOriginMediaStreamTrack(_r72.getAudioTracks()[0], !1);\n\n                case 23:\n                  throw _context222.t0;\n\n                case 24:\n                  _context222.next = 26;\n                  return this._updateOriginMediaStreamTrack(_r72.getAudioTracks()[0], !1);\n\n                case 26:\n                  this._deviceName = _t159.label;\n                  this._config.microphoneId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context222.next = 34;\n                  break;\n\n                case 31:\n                  _context222.prev = 31;\n                  _context222.t1 = _context222[\"catch\"](2);\n                  throw r.onError(_context222.t1), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context222.t1.toString()), _context222.t1;\n\n                case 34:\n                  _context222.next = 46;\n                  break;\n\n                case 36:\n                  _context222.prev = 36;\n                  _context222.next = 39;\n                  return Du.getDeviceById(e);\n\n                case 39:\n                  _t160 = _context222.sent;\n                  this._deviceName = _t160.label, this._config.microphoneId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context222.next = 46;\n                  break;\n\n                case 43:\n                  _context222.prev = 43;\n                  _context222.t2 = _context222[\"catch\"](36);\n                  throw r.onError(_context222.t2), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context222.t2.toString()), _context222.t2;\n\n                case 46:\n                  r.onSuccess(), vc.info(Xe(i = \"[\".concat(this.getTrackId(), \"] set device to \")).call(i, e, \" success\"));\n\n                case 47:\n                case \"end\":\n                  return _context222.stop();\n              }\n            }\n          }, _callee222, this, [[2, 31], [9, 15], [36, 43]]);\n        }));\n\n        function setDevice(_x336) {\n          return _setDevice3.apply(this, arguments);\n        }\n\n        return setDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled6 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee223(e, t, i) {\n          var r, n, s, _e156;\n\n          return _regeneratorRuntime.wrap(function _callee223$(_context223) {\n            while (1) {\n              switch (_context223.prev = _context223.next) {\n                case 0:\n                  if (!t) {\n                    _context223.next = 5;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this.getTrackId, \"] setEnabled false (do not close microphone)\"));\n                  _context223.next = 4;\n                  return _get(_getPrototypeOf(FC.prototype), \"setEnabled\", this).call(this, e);\n\n                case 4:\n                  return _context223.abrupt(\"return\", _context223.sent);\n\n                case 5:\n                  if (i) {\n                    _context223.next = 9;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context223.next = 8;\n                    break;\n                  }\n\n                  return _context223.abrupt(\"return\");\n\n                case 8:\n                  this.stateCheck(\"enabled\", e);\n\n                case 9:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e);\n                  _context223.next = 12;\n                  return this._enabledMutex.lock();\n\n                case 12:\n                  r = _context223.sent;\n\n                  if (e) {\n                    _context223.next = 24;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), i || (this._enabled = !1);\n                  _context223.prev = 15;\n                  _context223.next = 18;\n                  return Lh(this, pC.NEED_REMOVE_TRACK, this);\n\n                case 18:\n                  _context223.next = 23;\n                  break;\n\n                case 20:\n                  _context223.prev = 20;\n                  _context223.t0 = _context223[\"catch\"](15);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled false failed\"), _context223.t0.toString()), r(), _context223.t0;\n\n                case 23:\n                  return _context223.abrupt(\"return\", void r());\n\n                case 24:\n                  n = BC({}, this._constraints), s = Du.searchDeviceIdByName(this._deviceName);\n                  s && !n.deviceId && (n.deviceId = s);\n                  _context223.prev = 26;\n                  _context223.next = 29;\n                  return wu({\n                    audio: this._constraints\n                  }, this.getTrackId());\n\n                case 29:\n                  _e156 = _context223.sent;\n                  _context223.next = 32;\n                  return this._updateOriginMediaStreamTrack(_e156.getAudioTracks()[0], !1);\n\n                case 32:\n                  _context223.next = 34;\n                  return Lh(this, pC.NEED_ADD_TRACK, this);\n\n                case 34:\n                  _context223.next = 39;\n                  break;\n\n                case 36:\n                  _context223.prev = 36;\n                  _context223.t1 = _context223[\"catch\"](26);\n                  throw r(), vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled true failed\"), _context223.t1.toString()), _context223.t1;\n\n                case 39:\n                  i || (this._enabled = !0), vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled success\")), r();\n\n                case 40:\n                case \"end\":\n                  return _context223.stop();\n              }\n            }\n          }, _callee223, this, [[15, 20], [26, 36]]);\n        }));\n\n        function setEnabled(_x337, _x338, _x339) {\n          return _setEnabled6.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(FC.prototype), \"close\", this).call(this), ya() && Au.unbindInterruptDetectorTrack(this);\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        var _this213 = this;\n\n        if ((va() || Oa()) && this._enabled && !this._isClosed && Au.duringInterruption) {\n          var _e157 =\n          /*#__PURE__*/\n          function () {\n            var _ref185 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee224() {\n              return _regeneratorRuntime.wrap(function _callee224$(_context224) {\n                while (1) {\n                  switch (_context224.prev = _context224.next) {\n                    case 0:\n                      Au.off(bC.IOS_INTERRUPTION_END, _e157);\n                      _context224.t0 = _this213._enabled && !_this213._isClosed;\n\n                      if (!_context224.t0) {\n                        _context224.next = 8;\n                        break;\n                      }\n\n                      vc.debug(\"[\".concat(_this213.getTrackId(), \"] try capture microphone media device for interrupted iOS device.\"));\n                      _context224.next = 6;\n                      return _this213.setEnabled(!1);\n\n                    case 6:\n                      _context224.next = 8;\n                      return _this213.setEnabled(!0);\n\n                    case 8:\n                    case \"end\":\n                      return _context224.stop();\n                  }\n                }\n              }, _callee224, this);\n            }));\n\n            return function _e157() {\n              return _ref185.apply(this, arguments);\n            };\n          }();\n\n          Au.on(bC.IOS_INTERRUPTION_END, _e157);\n        } else vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(gC.TRACK_ENDED);\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee225() {\n          var e, t, i;\n          return _regeneratorRuntime.wrap(function _callee225$(_context225) {\n            while (1) {\n              switch (_context225.prev = _context225.next) {\n                case 0:\n                  e = BC({}, this._constraints), t = Du.searchDeviceIdByName(this._deviceName);\n                  t && !e.deviceId && (e.deviceId = t);\n                  _context225.next = 4;\n                  return wu({\n                    audio: this._constraints\n                  }, this.getTrackId());\n\n                case 4:\n                  i = _context225.sent;\n                  _context225.next = 7;\n                  return this._updateOriginMediaStreamTrack(i.getAudioTracks()[0], !0);\n\n                case 7:\n                case \"end\":\n                  return _context225.stop();\n              }\n            }\n          }, _callee225, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack4.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }]);\n\n    return FC;\n  }(QC);\n\n  MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [String]), UC(\"design:returntype\", As)], FC.prototype, \"setDevice\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Boolean, Boolean, Boolean]), UC(\"design:returntype\", As)], FC.prototype, \"setEnabled\", null);\n\n  var xC =\n  /*#__PURE__*/\n  function (_QC2) {\n    _inherits(xC, _QC2);\n\n    function xC(e, t, i, r) {\n      var _this214;\n\n      _classCallCheck(this, xC);\n\n      _this214 = _possibleConstructorReturn(this, _getPrototypeOf(xC).call(this, t.createOutputTrack(), i, r)), _this214.source = e, _this214._bufferSource = t, _this214._bufferSource.on(eC.AUDIO_SOURCE_STATE_CHANGE, function (e) {\n        _this214.emit(gC.SOURCE_STATE_CHANGE, e);\n      });\n\n      try {\n        _this214._mediaStreamTrack = _this214._source.createOutputTrack();\n      } catch (e) {}\n\n      return _this214;\n    }\n\n    _createClass(xC, [{\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this._bufferSource.currentTime;\n      }\n    }, {\n      key: \"startProcessAudioBuffer\",\n      value: function startProcessAudioBuffer(e) {\n        var t = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.BUFFER_AUDIO_TRACK_START,\n          options: [this.getTrackId(), e, this.duration]\n        });\n        e && this._bufferSource.updateOptions(e), this._bufferSource.startProcessAudioBuffer(), t.onSuccess();\n      }\n    }, {\n      key: \"pauseProcessAudioBuffer\",\n      value: function pauseProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.BUFFER_AUDIO_TRACK_PAUSE,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.pauseProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"seekAudioBuffer\",\n      value: function seekAudioBuffer(e) {\n        var t = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.BUFFER_AUDIO_TRACK_SEEK,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.seekAudioBuffer(e), t.onSuccess();\n      }\n    }, {\n      key: \"resumeProcessAudioBuffer\",\n      value: function resumeProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.BUFFER_AUDIO_TRACK_RESUME,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.resumeProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"stopProcessAudioBuffer\",\n      value: function stopProcessAudioBuffer() {\n        var e = iu.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.BUFFER_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        this._bufferSource.stopProcessAudioBuffer(), e.onSuccess();\n      }\n    }, {\n      key: \"currentState\",\n      get: function get() {\n        return this._bufferSource.currentState;\n      }\n    }, {\n      key: \"duration\",\n      get: function get() {\n        return this._bufferSource.duration;\n      }\n    }]);\n\n    return xC;\n  }(QC);\n\n  MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Object]), UC(\"design:returntype\", void 0)], xC.prototype, \"startProcessAudioBuffer\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", void 0)], xC.prototype, \"pauseProcessAudioBuffer\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", [Number]), UC(\"design:returntype\", void 0)], xC.prototype, \"seekAudioBuffer\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", void 0)], xC.prototype, \"resumeProcessAudioBuffer\", null), MC([LC(), UC(\"design:type\", Function), UC(\"design:paramtypes\", []), UC(\"design:returntype\", void 0)], xC.prototype, \"stopProcessAudioBuffer\", null);\n\n  var VC =\n  /*#__PURE__*/\n  function (_QC3) {\n    _inherits(VC, _QC3);\n\n    function VC() {\n      var _this215;\n\n      _classCallCheck(this, VC);\n\n      var e = hu().createMediaStreamDestination();\n      _this215 = _possibleConstructorReturn(this, _getPrototypeOf(VC).call(this, e.stream.getAudioTracks()[0], void 0, wh(8, \"track-mix-\")));\n\n      try {\n        _this215._mediaStreamTrack = _this215._source.createOutputTrack();\n      } catch (e) {}\n\n      _this215.destNode = e, _this215.trackList = [];\n      return _this215;\n    }\n\n    _createClass(VC, [{\n      key: \"getSubTrackLabels\",\n      value: function getSubTrackLabels() {\n        var e;\n        return Es(e = this.trackList).call(e, function (e) {\n          return e.getTrackLabel();\n        });\n      }\n    }, {\n      key: \"hasAudioTrack\",\n      value: function hasAudioTrack(e) {\n        var t;\n        return -1 !== Os(t = this.trackList).call(t, e);\n      }\n    }, {\n      key: \"addAudioTrack\",\n      value: function addAudioTrack(e) {\n        var t;\n        -1 === Os(t = this.trackList).call(t, e) ? (vc.debug(\"add \".concat(e.getTrackId(), \" to mixing track\")), e._source.outputNode.connect(this.destNode), this.trackList.push(e), this.updateEncoderConfig()) : vc.debug(\"track \".concat(e.getTrackId(), \" is already added\"));\n      }\n    }, {\n      key: \"removeAudioTrack\",\n      value: function removeAudioTrack(e) {\n        var t;\n\n        if (-1 !== Os(t = this.trackList).call(t, e)) {\n          vc.debug(\"remove \".concat(e.getTrackId(), \" from mixing track\"));\n\n          try {\n            e._source.outputNode.disconnect(this.destNode);\n          } catch (e) {}\n\n          Mh(this.trackList, e), this.updateEncoderConfig();\n        }\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function updateEncoderConfig() {\n        var e;\n        var t = {};\n        Xi(e = this.trackList).call(e, function (e) {\n          e._encoderConfig && ((e._encoderConfig.bitrate || 0) > (t.bitrate || 0) && (t.bitrate = e._encoderConfig.bitrate), (e._encoderConfig.sampleRate || 0) > (t.sampleRate || 0) && (t.sampleRate = e._encoderConfig.sampleRate), (e._encoderConfig.sampleSize || 0) > (t.sampleSize || 0) && (t.sampleSize = e._encoderConfig.sampleSize), e._encoderConfig.stereo && (t.stereo = !0));\n        }), this._encoderConfig = t;\n      }\n    }, {\n      key: \"isActive\",\n      get: function get() {\n        var e;\n        return !(!this.trackList.length || !Vs(e = this.trackList).call(e, function (e) {\n          return !e.muted;\n        }));\n      }\n    }]);\n\n    return VC;\n  }(QC);\n\n  var GC =\n  /*#__PURE__*/\n  function (_Ll23) {\n    _inherits(GC, _Ll23);\n\n    function GC() {\n      var _this216;\n\n      _classCallCheck(this, GC);\n\n      _this216 = _possibleConstructorReturn(this, _getPrototypeOf(GC).apply(this, arguments)), _this216.resultStorage = new Li();\n      return _this216;\n    }\n\n    _createClass(GC, [{\n      key: \"setLocalAudioStats\",\n      value: function setLocalAudioStats(e, t, i) {\n        this.record(\"AUDIO_INPUT_LEVEL_TOO_LOW\", e, this.checkAudioInputLevel(i, t)), this.record(\"SEND_AUDIO_BITRATE_TOO_LOW\", e, this.checkSendAudioBitrate(i, t));\n      }\n    }, {\n      key: \"setLocalVideoStats\",\n      value: function setLocalVideoStats(e, t, i) {\n        this.record(\"SEND_VIDEO_BITRATE_TOO_LOW\", e, this.checkSendVideoBitrate(i, t)), this.record(\"FRAMERATE_INPUT_TOO_LOW\", e, this.checkFramerateInput(i, t)), this.record(\"FRAMERATE_SENT_TOO_LOW\", e, this.checkFramerateSent(i));\n      }\n    }, {\n      key: \"setRemoteAudioStats\",\n      value: function setRemoteAudioStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"AUDIO_OUTPUT_LEVEL_TOO_LOW\", i, this.checkAudioOutputLevel(t));\n      }\n    }, {\n      key: \"setRemoteVideoStats\",\n      value: function setRemoteVideoStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"RECV_VIDEO_DECODE_FAILED\", i, this.checkVideoDecode(t));\n      }\n    }, {\n      key: \"record\",\n      value: function record(e, t, i) {\n        this.resultStorage.has(e) || this.resultStorage.set(e, {\n          result: [],\n          isPrevNormal: !0\n        });\n        var r = this.resultStorage.get(e);\n\n        if (r && (r.result.push(i), r.result.length >= 5)) {\n          var n;\n\n          var _i118 = eo(n = r.result).call(n, !0);\n\n          r.isPrevNormal && !_i118 && this.emit(\"exception\", jC[e], e, t), !r.isPrevNormal && _i118 && this.emit(\"exception\", jC[e] + 2e3, e + \"_RECOVER\", t), r.isPrevNormal = _i118, r.result = [];\n        }\n      }\n    }, {\n      key: \"checkAudioOutputLevel\",\n      value: function checkAudioOutputLevel(e) {\n        return !(e.receiveBitrate > 0 && 0 === e.receiveLevel);\n      }\n    }, {\n      key: \"checkAudioInputLevel\",\n      value: function checkAudioInputLevel(e, t) {\n        return t instanceof VC && !t.isActive || !!t.muted || 0 !== e.sendVolumeLevel;\n      }\n    }, {\n      key: \"checkFramerateInput\",\n      value: function checkFramerateInput(e, t) {\n        var i = null;\n        t._encoderConfig && t._encoderConfig.frameRate && (i = zC(t._encoderConfig.frameRate));\n        var r = e.captureFrameRate;\n        return !i || !r || !(i > 10 && r < 5 || i < 10 && i >= 5 && r <= 1);\n      }\n    }, {\n      key: \"checkFramerateSent\",\n      value: function checkFramerateSent(e) {\n        return !(e.captureFrameRate && e.sendFrameRate && e.captureFrameRate > 5 && e.sendFrameRate <= 1);\n      }\n    }, {\n      key: \"checkSendVideoBitrate\",\n      value: function checkSendVideoBitrate(e, t) {\n        return !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkSendAudioBitrate\",\n      value: function checkSendAudioBitrate(e, t) {\n        return t instanceof VC && !t.isActive || !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkVideoDecode\",\n      value: function checkVideoDecode(e) {\n        return 0 === e.receiveBitrate || 0 !== e.decodeFrameRate;\n      }\n    }]);\n\n    return GC;\n  }(Ll);\n\n  var jC = {\n    FRAMERATE_INPUT_TOO_LOW: 1001,\n    FRAMERATE_SENT_TOO_LOW: 1002,\n    SEND_VIDEO_BITRATE_TOO_LOW: 1003,\n    RECV_VIDEO_DECODE_FAILED: 1005,\n    AUDIO_INPUT_LEVEL_TOO_LOW: 2001,\n    AUDIO_OUTPUT_LEVEL_TOO_LOW: 2002,\n    SEND_AUDIO_BITRATE_TOO_LOW: 2003\n  };\n\n  function KC(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function WC(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = KC(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = KC(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var HC =\n  /*#__PURE__*/\n  function () {\n    function HC(e) {\n      var _this217 = this;\n\n      _classCallCheck(this, HC);\n\n      this.localConnectionsMap = new Li(), this.remoteConnectionsMap = new Li(), this.trafficStatsPeerList = [], this.updateStats = function () {\n        var e, t;\n        Xi(e = _this217.remoteConnectionsMap).call(e, function (e) {\n          var t;\n          var i = e.audioStats,\n              r = e.videoStats,\n              n = e.pcStats,\n              s = WC({}, $d),\n              o = WC({}, tl),\n              a = WC({}, el),\n              c = e.connection.pc.getStats(),\n              d = c.audioRecv[0],\n              l = c.videoRecv[0],\n              A = n ? n.videoRecv[0] : void 0,\n              u = !0 === e.connection.pc._statsFilter.videoIsReady,\n              h = _this217.trafficStats && Vs(t = _this217.trafficStats.peer_delay).call(t, function (t) {\n            return t.peer_uid === e.connection.getUserId();\n          });\n\n          if (d) {\n            \"opus\" !== d.codec && \"aac\" !== d.codec || (s.codecType = d.codec), d.outputLevel ? s.receiveLevel = Math.round(32767 * d.outputLevel) : e.connection.user.audioTrack && (s.receiveLevel = Math.round(32767 * e.connection.user.audioTrack.getVolumeLevel())), s.receiveBytes = d.bytes, s.receivePackets = d.packets, s.receivePacketsLost = d.packetsLost, s.packetLossRate = s.receivePacketsLost / (s.receivePackets + s.receivePacketsLost), s.receiveBitrate = i ? 8 * Math.max(0, s.receiveBytes - i.receiveBytes) : 0, s.totalDuration = i ? i.totalDuration + 1 : 1, s.totalFreezeTime = i ? i.totalFreezeTime : 0, s.freezeRate = s.totalFreezeTime / s.totalDuration, s.receiveDelay = d.jitterBufferMs;\n            var _t161 = e.connection.user.audioTrack;\n            s.totalDuration > 10 && HC.isRemoteAudioFreeze(_t161) && (s.totalFreezeTime += 1);\n          }\n\n          if (l) {\n            \"H264\" !== l.codec && \"VP8\" !== l.codec && \"VP9\" !== l.codec && \"AV1X\" !== l.codec || (o.codecType = l.codec), o.receiveBytes = l.bytes, o.receiveBitrate = r ? 8 * Math.max(0, o.receiveBytes - r.receiveBytes) : 0, o.decodeFrameRate = l.decodeFrameRate, o.renderFrameRate = l.decodeFrameRate, l.outputFrame && (o.renderFrameRate = l.outputFrame.frameRate), l.receivedFrame ? (o.receiveFrameRate = l.receivedFrame.frameRate, o.receiveResolutionHeight = l.receivedFrame.height, o.receiveResolutionWidth = l.receivedFrame.width) : e.connection.user.videoTrack && (o.receiveResolutionHeight = e.connection.user.videoTrack._videoHeight || 0, o.receiveResolutionWidth = e.connection.user.videoTrack._videoWidth || 0), void 0 !== l.framesRateFirefox && (o.receiveFrameRate = Math.round(l.framesRateFirefox)), o.receivePackets = l.packets, o.receivePacketsLost = l.packetsLost, o.packetLossRate = o.receivePacketsLost / (o.receivePackets + o.receivePacketsLost), o.totalDuration = r ? r.totalDuration + 1 : 1, o.totalFreezeTime = r ? r.totalFreezeTime : 0, o.receiveDelay = l.jitterBufferMs || 0;\n            var _t162 = e.connection.user.videoTrack;\n            e.connection.subscribeOptions.video && u && HC.isRemoteVideoFreeze(_t162, l, A) && (o.totalFreezeTime += 1), o.freezeRate = o.totalFreezeTime / o.totalDuration;\n          }\n\n          h && (s.end2EndDelay = h.B_ad, o.end2EndDelay = h.B_vd, s.transportDelay = h.B_ed, o.transportDelay = h.B_ed, s.currentPacketLossRate = h.B_ealr4 / 100, o.currentPacketLossRate = h.B_evlr4 / 100, a.uplinkNetworkQuality = h.B_punq ? h.B_punq : 0, a.downlinkNetworkQuality = h.B_pdnq ? h.B_punq : 0), e.audioStats = s, e.videoStats = o, e.pcStats = c, e.networkStats = a, e.connection.user.audioTrack && _this217.exceptionMonitor.setRemoteAudioStats(e.connection.user.audioTrack, s), e.connection.user.videoTrack && _this217.exceptionMonitor.setRemoteVideoStats(e.connection.user.videoTrack, o);\n        }), Xi(t = _this217.localConnectionsMap).call(t, function (e) {\n          var t = e.audioStats,\n              i = e.videoStats,\n              r = WC({}, zd),\n              n = WC({}, Zd),\n              s = e.connection.pc.getStats(),\n              o = s.audioSend[0],\n              a = s.videoSend[0],\n              c = e.connection.getUserId();\n          o && (\"opus\" !== o.codec && \"aac\" !== o.codec || (r.codecType = o.codec), o.inputLevel ? r.sendVolumeLevel = Math.round(32767 * o.inputLevel) : e.connection.audioTrack && (r.sendVolumeLevel = Math.round(32767 * e.connection.audioTrack.getVolumeLevel())), r.sendBytes = o.bytes, r.sendPackets = o.packets, r.sendPacketsLost = o.packetsLost, r.sendBitrate = t ? 8 * Math.max(0, r.sendBytes - t.sendBytes) : 0), a && (\"H264\" !== a.codec && \"VP8\" !== a.codec && \"VP9\" !== a.codec && \"AV1X\" !== a.codec || (n.codecType = a.codec), n.sendBytes = a.bytes, n.sendBitrate = i ? 8 * Math.max(0, n.sendBytes - i.sendBytes) : 0, a.inputFrame ? (n.captureFrameRate = a.inputFrame.frameRate, n.captureResolutionHeight = a.inputFrame.height, n.captureResolutionWidth = a.inputFrame.width) : e.connection.videoTrack && (n.captureResolutionWidth = e.connection.videoTrack._videoWidth || 0, n.captureResolutionHeight = e.connection.videoTrack._videoHeight || 0), a.sentFrame ? (n.sendFrameRate = a.sentFrame.frameRate, n.sendResolutionHeight = a.sentFrame.height, n.sendResolutionWidth = a.sentFrame.width) : e.connection.videoTrack && (n.sendResolutionWidth = e.connection.videoTrack._videoWidth || 0, n.sendResolutionHeight = e.connection.videoTrack._videoHeight || 0), a.avgEncodeMs && (n.encodeDelay = a.avgEncodeMs), e.connection.videoTrack && e.connection.videoTrack._encoderConfig && e.connection.videoTrack._encoderConfig.bitrateMax && (n.targetSendBitrate = 1e3 * e.connection.videoTrack._encoderConfig.bitrateMax), n.sendPackets = a.packets, n.sendPacketsLost = a.packetsLost, n.totalDuration = i ? i.totalDuration + 1 : 1, n.totalFreezeTime = i ? i.totalFreezeTime : 0, _this217.isLocalVideoFreeze(a) && (n.totalFreezeTime += 1)), _this217.trafficStats && (r.sendPacketsLost = _this217.trafficStats.B_palr4 / 100, n.sendPacketsLost = _this217.trafficStats.B_pvlr4 / 100), e.audioStats = r, e.videoStats = n, e.audioStats && e.connection.audioTrack && _this217.exceptionMonitor.setLocalAudioStats(c, e.connection.audioTrack, e.audioStats), e.videoStats && e.connection.videoTrack && _this217.exceptionMonitor.setLocalVideoStats(c, e.connection.videoTrack, e.videoStats);\n        });\n      }, this.clientId = e, this.updateStatsInterval = window.setInterval(this.updateStats, 1e3), this.exceptionMonitor = new GC(), this.exceptionMonitor.on(\"exception\", function (e, t, i) {\n        _this217.onStatsException && _this217.onStatsException(e, t, i);\n      });\n    }\n\n    _createClass(HC, [{\n      key: \"reset\",\n      value: function reset() {\n        this.localConnectionsMap = new Li(), this.remoteConnectionsMap = new Li(), this.trafficStats = void 0, this.trafficStatsPeerList = [], this.uplinkStats = void 0;\n      }\n    }, {\n      key: \"getLocalAudioTrackStats\",\n      value: function getLocalAudioTrackStats(e) {\n        var t = this.localConnectionsMap.get(e);\n        return t && t.audioStats ? t.audioStats : WC({}, zd);\n      }\n    }, {\n      key: \"getLocalVideoTrackStats\",\n      value: function getLocalVideoTrackStats(e) {\n        var t = this.localConnectionsMap.get(e);\n        return t && t.videoStats ? t.videoStats : WC({}, Zd);\n      }\n    }, {\n      key: \"getRemoteAudioTrackStats\",\n      value: function getRemoteAudioTrackStats(e) {\n        var t;\n        var i = this.remoteConnectionsMap.get(e);\n        if (!i || !i.audioStats) return WC({}, $d);\n        if (!this.trafficStats) return i.audioStats;\n        var r = Vs(t = this.trafficStats.peer_delay).call(t, function (e) {\n          return e.peer_uid === i.connection.user.uid;\n        });\n        return r && (i.audioStats.publishDuration = r.B_ppad + (La() - this.trafficStats.timestamp)), i.audioStats;\n      }\n    }, {\n      key: \"getRemoteNetworkQualityStats\",\n      value: function getRemoteNetworkQualityStats(e) {\n        var t = this.remoteConnectionsMap.get(e);\n        return t && t.networkStats ? t.networkStats : WC({}, el);\n      }\n    }, {\n      key: \"getRemoteVideoTrackStats\",\n      value: function getRemoteVideoTrackStats(e) {\n        var t;\n        var i = this.remoteConnectionsMap.get(e);\n        if (!i || !i.videoStats) return WC({}, tl);\n        if (!this.trafficStats) return i.videoStats;\n        var r = Vs(t = this.trafficStats.peer_delay).call(t, function (e) {\n          return e.peer_uid === i.connection.user.uid;\n        });\n        return r && (i.videoStats.publishDuration = r.B_ppvd + (La() - this.trafficStats.timestamp)), i.videoStats;\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e, t;\n        var i = 0,\n            r = 0,\n            n = 0,\n            s = 0;\n        Xi(e = this.localConnectionsMap).call(e, function (e) {\n          e.audioStats && (i += e.audioStats.sendBytes, r += e.audioStats.sendBitrate), e.videoStats && (i += e.videoStats.sendBytes, r += e.videoStats.sendBitrate);\n        }), Xi(t = this.remoteConnectionsMap).call(t, function (e) {\n          e.audioStats && (n += e.audioStats.receiveBytes, s += e.audioStats.receiveBitrate), e.videoStats && (n += e.videoStats.receiveBytes, s += e.videoStats.receiveBitrate);\n        });\n        var o = 1;\n        return this.trafficStats && (o += this.trafficStats.peer_delay.length), {\n          Duration: 0,\n          UserCount: o,\n          SendBitrate: r,\n          SendBytes: i,\n          RecvBytes: n,\n          RecvBitrate: s,\n          OutgoingAvailableBandwidth: this.uplinkStats ? this.uplinkStats.B_uab / 1e3 : 0,\n          RTT: this.trafficStats ? 2 * this.trafficStats.B_acd : 0\n        };\n      }\n    }, {\n      key: \"removeConnection\",\n      value: function removeConnection(e) {\n        this.localConnectionsMap.delete(e), this.remoteConnectionsMap.delete(e);\n      }\n    }, {\n      key: \"addLocalConnection\",\n      value: function addLocalConnection(e) {\n        var t = e.connectionId;\n        this.localConnectionsMap.has(t) || this.localConnectionsMap.set(t, {\n          connection: e\n        });\n      }\n    }, {\n      key: \"addRemoteConnection\",\n      value: function addRemoteConnection(e) {\n        var t = e.connectionId;\n        this.remoteConnectionsMap.has(t) || this.remoteConnectionsMap.set(t, {\n          connection: e\n        });\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function updateTrafficStats(e) {\n        var _this218 = this;\n\n        var t;\n        var i = Fr(t = e.peer_delay).call(t, function (e) {\n          var t;\n          return -1 === Os(t = _this218.trafficStatsPeerList).call(t, e.peer_uid);\n        });\n        Xi(i).call(i, function (e) {\n          var t, i;\n          var r = Vs(t = BA(Xh(i = _this218.remoteConnectionsMap).call(i))).call(t, function (t) {\n            return t.connection._userId === e.peer_uid;\n          });\n          void 0 !== e.B_ppad && void 0 !== e.B_ppvd && (_this218.onUploadPublishDuration && _this218.onUploadPublishDuration(e.peer_uid, e.B_ppad, e.B_ppvd, r ? La() - r.connection.startTime : 0), _this218.trafficStatsPeerList.push(e.peer_uid));\n        }), this.trafficStats = e;\n      }\n    }, {\n      key: \"updateUplinkStats\",\n      value: function updateUplinkStats(e) {\n        var t;\n        this.uplinkStats && this.uplinkStats.B_fir !== e.B_fir && vc.debug(Xe(t = \"[\".concat(this.clientId, \"]: Period fir changes to \")).call(t, e.B_fir));\n        this.uplinkStats = e;\n      }\n    }, {\n      key: \"isLocalVideoFreeze\",\n      value: function isLocalVideoFreeze(e) {\n        return !(!e.inputFrame || !e.sentFrame) && e.inputFrame.frameRate > 5 && e.sentFrame.frameRate < 3;\n      }\n    }], [{\n      key: \"isRemoteVideoFreeze\",\n      value: function isRemoteVideoFreeze(e, t, i) {\n        if (!e) return !1;\n        var r = !!i && t.framesDecodeFreezeTime > i.framesDecodeFreezeTime,\n            n = !i || t.framesDecodeCount > i.framesDecodeCount;\n        return r || !n;\n      }\n    }, {\n      key: \"isRemoteAudioFreeze\",\n      value: function isRemoteAudioFreeze(e) {\n        return !!e && e._isFreeze();\n      }\n    }]);\n\n    return HC;\n  }();\n\n  function YC(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function qC(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = YC(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = YC(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function JC(e) {\n    if (!e.address || !e.tcp) throw new Ad(ad.UNEXPECTED_RESPONSE, \"Invalid address format \".concat(e));\n    return e.address.match(/^[\\.\\:\\d]+$/) ? \"\".concat(e.address.replace(/[^\\d]/g, \"-\"), \".edge.agora.io\") : (vc.info(\"Cannot recognized as IP address \".concat(e.address, \". Used As Host instead\")), Xe(t = \"\".concat(e.address, \":\")).call(t, e.tcp));\n    var t;\n  }\n\n  function XC(e, t) {\n    var i;\n    var r = Fc(\"GATEWAY_DOMAINS\");\n    var n = r[1] && -1 !== Os(t).call(t, r[1]) ? 1 : 0;\n    e.addresses = e.addresses || [];\n    return {\n      gatewayAddrs: Es(i = e.addresses).call(i, function (e) {\n        var t, i, s;\n        return e.ip.match(/^[\\.\\:\\d]+$/) ? Xe(t = Xe(i = \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\")).call(i, r[n++ % r.length], \":\")).call(t, e.port) : (vc.info(\"Cannot recognized as IP address \".concat(e.ip, \". Used As Host instead\")), Xe(s = \"\".concat(e.ip, \":\")).call(s, e.port));\n      }),\n      uid: e.uid,\n      cid: e.cid,\n      vid: e.detail && e.detail[8],\n      uni_lbs_ip: e.detail && e.detail[1],\n      res: e,\n      csIp: e.detail && e.detail[502]\n    };\n  }\n\n  function zC(e) {\n    return \"number\" == typeof e ? e : e.exact || e.ideal || e.max || e.min || 0;\n  }\n\n  function ZC(e, t) {\n    var i = e.videoSend[0];\n    if (!i) return null;\n    var r = t && t.videoSend[0] ? t.videoSend[0].inputFrame : void 0,\n        n = {\n      id: wh(10, \"\"),\n      timestamp: new Date(e.timestamp).toISOString(),\n      mediaType: \"video\",\n      type: \"ssrc\",\n      ssrc: i.ssrc.toString()\n    };\n    return i.inputFrame && (r && i.inputFrame.height === r.height || (n.A_fhi = i.inputFrame.height ? i.inputFrame.height.toString() : \"0\"), r && i.inputFrame.width === r.width || (n.A_fwi = i.inputFrame.width ? i.inputFrame.width.toString() : \"0\"), r && i.inputFrame.frameRate === r.frameRate || (n.A_fri = i.inputFrame.frameRate ? i.inputFrame.frameRate.toString() : \"0\")), n;\n  }\n\n  function $C(e) {\n    return e >= 0 && e < .17 ? 1 : e >= .17 && e < .36 ? 2 : e >= .36 && e < .59 ? 3 : e >= .59 && e <= 1 ? 4 : e > 1 ? 5 : 0;\n  }\n\n  function eS(e, t) {\n    var i = {};\n\n    if (e.height && e.width) {\n      var _r73 = t._videoHeight || t.getMediaStreamTrack(!0).getSettings().height;\n\n      i.scaleResolutionDownBy = _r73 ? _r73 / zC(e.height) : 4;\n    }\n\n    return i.maxFramerate = e.framerate ? zC(e.framerate) : void 0, i.maxBitrate = e.bitrate ? 1e3 * e.bitrate : void 0, i;\n  }\n\n  function tS(e, t) {\n    var i;\n    var r,\n        n,\n        s = void 0;\n\n    switch (t) {\n      case OC.CHOOSE_SERVER:\n        r = 4096, n = \"choose server\";\n        break;\n\n      case OC.CLOUD_PROXY:\n        r = 1048576, n = \"proxy\";\n        break;\n\n      case OC.CLOUD_PROXY_5:\n        r = 4194304, n = \"proxy5\";\n        break;\n\n      default:\n        throw new Ad(ad.UNEXPECTED_ERROR, \"multi unlibs response transformer get unknown service id\", {\n          csIp: e.detail && e.detail[502],\n          retry: !1\n        });\n    }\n\n    if (Xi(i = e.response_body).call(i, function (t) {\n      var i;\n      t.buffer && t.buffer.flag === r && (s = {\n        code: t.buffer.code,\n        addresses: Es(i = t.buffer.edges_services).call(i, function (e) {\n          return qC({}, e, {\n            ticket: t.buffer.cert\n          });\n        }),\n        server_ts: e.enter_ts,\n        uid: t.buffer.uid,\n        cid: t.buffer.cid,\n        cname: t.buffer.cname,\n        detail: qC({}, t.buffer.detail, {}, e.detail),\n        flag: t.buffer.flag,\n        opid: e.opid\n      });\n    }), !s) throw new Ad(ad.MULTI_UNILBS_RESPONSE_ERROR, \"cannot parse response \".concat(n, \" from multi unilbs response\"), {\n      csIp: e.detail && e.detail[502]\n    });\n    return s;\n  }\n\n  function iS(e) {\n    var t;\n    return Es(t = e.addresses).call(t, function (e) {\n      return {\n        address: e.ip,\n        tcpport: e.port,\n        udpport: e.port,\n        username: Oc.username,\n        password: Oc.password\n      };\n    });\n  }\n\n  function rS(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function nS(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = rS(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = rS(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var sS = new Li();\n\n  var oS =\n  /*#__PURE__*/\n  function (_Ll24) {\n    _inherits(oS, _Ll24);\n\n    function oS(e) {\n      var _this219;\n\n      _classCallCheck(this, oS);\n\n      _this219 = _possibleConstructorReturn(this, _getPrototypeOf(oS).call(this)), _this219.inChannelInfo = {\n        joinAt: null,\n        duration: 0\n      }, _this219._state = \"DISCONNECTED\", _this219.needToSendUnpubUnsub = new Li(), _this219.isSignalRecover = !1, _this219.hasChangeBGPAddress = !1, _this219.joinGatewayStartTime = 0, _this219._signalTimeout = !1, _this219.clientId = e.clientId, _this219.spec = e, _this219.signal = new NC(nS({}, e, {\n        retryConfig: e.websocketRetryConfig\n      })), _this219._statsCollector = e.statsCollector, _this219.role = e.role || \"audience\", _this219._clientRoleOptions = e.clientRoleOptions, _this219.handleSignalEvents();\n      return _this219;\n    }\n\n    _createClass(oS, [{\n      key: \"join\",\n      value: function () {\n        var _join5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee226(e, t) {\n          var _this220 = this;\n\n          var i, r, n, s, _t163, o, a;\n\n          return _regeneratorRuntime.wrap(function _callee226$(_context226) {\n            while (1) {\n              switch (_context226.prev = _context226.next) {\n                case 0:\n                  \"disabled\" !== e.cloudProxyServer && (this.hasChangeBGPAddress = !0);\n                  n = La();\n                  s = sS.get(e.cname);\n\n                  if (!(s || (s = new Li(), sS.set(e.cname, s)), s.has(e.uid))) {\n                    _context226.next = 6;\n                    break;\n                  }\n\n                  _t163 = new Ad(ad.UID_CONFLICT);\n                  throw wC.joinGateway(e.sid, {\n                    lts: n,\n                    succ: !1,\n                    ec: _t163.message,\n                    addr: null,\n                    uid: e.uid,\n                    cid: e.cid\n                  }), _t163;\n\n                case 6:\n                  s.set(e.uid, !0), this.joinInfo = e, this.key = t;\n                  o = e.proxyServer ? Es(i = e.gatewayAddrs).call(i, function (t) {\n                    var i, r;\n                    var n = t.split(\":\");\n                    return Xe(i = Xe(r = \"wss://\".concat(e.proxyServer, \"/ws/?h=\")).call(r, n[0], \"&p=\")).call(i, n[1]);\n                  }) : Es(r = e.gatewayAddrs).call(r, function (e) {\n                    return \"wss://\".concat(e);\n                  });\n                  a = 0;\n                  this.joinGatewayStartTime = n;\n                  _context226.prev = 10;\n                  _context226.next = 13;\n                  return this.signal.init(o);\n\n                case 13:\n                  a = _context226.sent.uid;\n                  _context226.next = 19;\n                  break;\n\n                case 16:\n                  _context226.prev = 16;\n                  _context226.t0 = _context226[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.clientId, \"] User join failed\"), _context226.t0.toString()), wC.joinGateway(e.sid, {\n                    lts: n,\n                    succ: !1,\n                    ec: _context226.t0.message,\n                    addr: this.signal.url,\n                    uid: e.uid,\n                    cid: e.cid\n                  }), s.delete(e.uid), this.signal.close(), _context226.t0;\n\n                case 19:\n                  return _context226.abrupt(\"return\", (this.state = \"CONNECTED\", this.inChannelInfo.joinAt = La(), vc.debug(\"[\".concat(this.clientId, \"] Connected to gateway server\")), this.trafficStatsInterval = window.setInterval(function () {\n                    _this220.updateTrafficStats().catch(function (e) {\n                      vc.warning(\"[\".concat(_this220.clientId, \"] get traffic stats error\"), e.toString());\n                    });\n                  }, 3e3), this.networkQualityInterval = window.setInterval(function () {\n                    navigator && void 0 !== navigator.onLine && !navigator.onLine ? _this220.emit(hC.NETWORK_QUALITY, {\n                      downlinkNetworkQuality: 6,\n                      uplinkNetworkQuality: 6\n                    }) : _this220._signalTimeout ? _this220.emit(hC.NETWORK_QUALITY, {\n                      downlinkNetworkQuality: 5,\n                      uplinkNetworkQuality: 5\n                    }) : \"CONNECTED\" === _this220.state && _this220._statsCollector.trafficStats ? _this220.emit(hC.NETWORK_QUALITY, {\n                      uplinkNetworkQuality: $C(_this220._statsCollector.trafficStats.B_unq),\n                      downlinkNetworkQuality: $C(_this220._statsCollector.trafficStats.B_dnq)\n                    }) : _this220.emit(hC.NETWORK_QUALITY, {\n                      uplinkNetworkQuality: 0,\n                      downlinkNetworkQuality: 0\n                    });\n                  }, 2e3), a));\n\n                case 20:\n                case \"end\":\n                  return _context226.stop();\n              }\n            }\n          }, _callee226, this, [[10, 16]]);\n        }));\n\n        function join(_x340, _x341) {\n          return _join5.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee227() {\n          var e,\n              _args227 = arguments;\n          return _regeneratorRuntime.wrap(function _callee227$(_context227) {\n            while (1) {\n              switch (_context227.prev = _context227.next) {\n                case 0:\n                  e = _args227.length > 0 && _args227[0] !== undefined ? _args227[0] : !1;\n\n                  if (!(\"DISCONNECTED\" !== this.state)) {\n                    _context227.next = 14;\n                    break;\n                  }\n\n                  this.state = \"DISCONNECTING\";\n                  _context227.prev = 3;\n                  _context227.t0 = e || this.signal.connectionState !== qm.CONNECTED;\n\n                  if (_context227.t0) {\n                    _context227.next = 8;\n                    break;\n                  }\n\n                  _context227.next = 8;\n                  return yh(this.signal.request(Xm.LEAVE, void 0, !0), 3e3);\n\n                case 8:\n                  _context227.next = 13;\n                  break;\n\n                case 10:\n                  _context227.prev = 10;\n                  _context227.t1 = _context227[\"catch\"](3);\n                  vc.warning(\"[\".concat(this.clientId, \"] leave request failed, ignore\"), _context227.t1);\n\n                case 13:\n                  this.signal.close(), this.reset(), this.state = \"DISCONNECTED\";\n\n                case 14:\n                case \"end\":\n                  return _context227.stop();\n              }\n            }\n          }, _callee227, this, [[3, 10]]);\n        }));\n\n        function leave() {\n          return _leave3.apply(this, arguments);\n        }\n\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee228(e, t) {\n          var _this221 = this;\n\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee228$(_context228) {\n            while (1) {\n              switch (_context228.prev = _context228.next) {\n                case 0:\n                  if (this.joinInfo) {\n                    _context228.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"publish no joinInfo\");\n\n                case 2:\n                  i = e.getUserId(), r = e.videoTrack ? function (e) {\n                    var t;\n                    var i = e._encoderConfig;\n                    if (!i) return {};\n                    var r = {\n                      resolution: i.width && i.height ? Xe(t = \"\".concat(zC(i.width), \"x\")).call(t, zC(i.height)) : void 0,\n                      maxVideoBW: i.bitrateMax,\n                      minVideoBW: i.bitrateMin\n                    };\n                    return \"number\" == typeof i.frameRate ? (r.maxFrameRate = i.frameRate, r.minFrameRate = i.frameRate) : i.frameRate && (r.maxFrameRate = i.frameRate.max || i.frameRate.ideal || i.frameRate.exact || i.frameRate.min, r.minFrameRate = i.frameRate.min || i.frameRate.ideal || i.frameRate.exact || i.frameRate.max), r;\n                  }(e.videoTrack) : {};\n\n                  if (!(e.on($m.NEED_ANSWER, function (n, s, o) {\n                    var a;\n                    var c = {\n                      state: \"offer\",\n                      stream_type: t,\n                      p2p_id: e.pc.ID,\n                      sdp: ge(n),\n                      audio: !!e.audioTrack,\n                      video: !!e.videoTrack,\n                      screen: e.videoTrack && -1 !== Os(a = e.videoTrack._hints).call(a, _l.SCREEN_TRACK),\n                      attributes: r,\n                      dtx: e.audioTrack instanceof FC && e.audioTrack._config.DTX,\n                      hq: !1,\n                      lq: !1,\n                      stereo: !1,\n                      speech: !1,\n                      mode: _this221.spec.mode,\n                      codec: _this221.spec.codec,\n                      extend: Fc(\"PUB_EXTEND\")\n                    };\n\n                    if (e.audioTrack && e.audioTrack instanceof VC && e.audioTrack) {\n                      var _t164 = {\n                        stream_id: _this221.joinInfo && (_this221.joinInfo.stringUid || _this221.joinInfo.uid),\n                        action: \"\"\n                      };\n                      e.audioTrack.isActive ? _t164.action = \"unmute_local_audio\" : _t164.action = \"mute_local_audio\", _this221.sendControl(_t164);\n                    }\n\n                    if (e.videoTrack) {\n                      var _t165 = {\n                        stream_id: _this221.joinInfo && (_this221.joinInfo.stringUid || _this221.joinInfo.uid),\n                        action: \"\"\n                      };\n                      e.videoTrack.muted ? _t165.action = \"mute_local_video\" : _t165.action = \"unmute_local_video\", _this221.sendControl(_t165);\n                    }\n\n                    _this221.signal.request(Xm.PUBLISH, c, !0).then(function (e) {\n                      i && _this221.needToSendUnpubUnsub.set(i, !0), s(JSON.parse(e.sdp));\n                    }).catch(function (t) {\n                      if (n.retry && t.data && t.data.code === Ym.ERR_PUBLISH_REQUEST_INVALID) return vc.warning(\"[\".concat(_this221.clientId, \"] receiver publish error code, retry\"), t.toString()), kh(e, $m.NEED_UNPUB).then(function () {\n                        n.retry = !1, kh(e, $m.NEED_ANSWER, n).then(s).catch(o);\n                      });\n                      t.code !== ad.WS_ABORT && o(t);\n                    });\n                  }), e.on($m.NEED_RENEGOTIATE, function (i, r, n) {\n                    var s = {\n                      state: \"negotiation\",\n                      stream_type: t,\n                      p2p_id: e.pc.ID,\n                      sdp: i\n                    };\n\n                    _this221.signal.request(Xm.PUBLISH, s, !0).then(function (e) {\n                      r(JSON.parse(e.sdp));\n                    }).catch(function (e) {\n                      e.code !== ad.WS_ABORT && n(e);\n                    });\n                  }), e.on($m.NEED_UNPUB, function (r) {\n                    return i && !_this221.needToSendUnpubUnsub.has(i) ? r(!1) : \"RECONNECTING\" === _this221.state ? r(!0) : void _this221.signal.request(Xm.UNPUBLISH, {\n                      stream_id: e.getUserId(),\n                      stream_type: t\n                    }, !0).then(function () {\n                      return r(!1);\n                    }).catch(function (e) {\n                      vc.warning(\"unpublish warning: \", e), r(!0);\n                    });\n                  }), e.on($m.NEED_UPLOAD, function (e, i) {\n                    _this221.signal.upload(e, {\n                      stream_type: t,\n                      stats: i\n                    });\n                  }), e.on($m.NEED_SIGNAL_RTT, function (e) {\n                    e(_this221.signal.rtt);\n                  }), e.on($m.NEED_CONTROL, function (e, t, i) {\n                    var r;\n                    if (\"video\" === e.type && e.muted) r = \"mute_local_video\";else if (\"video\" !== e.type || e.muted) {\n                      if (\"audio\" === e.type && e.muted) r = \"mute_local_audio\";else {\n                        if (\"audio\" !== e.type || e.muted) return;\n                        r = \"unmute_local_audio\";\n                      }\n                    } else r = \"unmute_local_video\";\n                    var n = {\n                      stream_id: _this221.joinInfo && (_this221.joinInfo.stringUid || _this221.joinInfo.uid),\n                      action: r\n                    };\n\n                    _this221.sendControl(n).then(t).catch(i);\n                  }), \"RECONNECTING\" !== this.state)) {\n                    _context228.next = 10;\n                    break;\n                  }\n\n                  if (!(\"CONNECTED\" !== this.state)) {\n                    _context228.next = 6;\n                    break;\n                  }\n\n                  return _context228.abrupt(\"return\", new Ad(ad.INVALID_OPERATION, \"can not publish when connection state is \".concat(this.state)).throw());\n\n                case 6:\n                  _context228.next = 8;\n                  return e.startP2PConnection();\n\n                case 8:\n                  _context228.next = 11;\n                  break;\n\n                case 10:\n                  e.readyToReconnectPC();\n\n                case 11:\n                case \"end\":\n                  return _context228.stop();\n              }\n            }\n          }, _callee228, this);\n        }));\n\n        function publish(_x342, _x343) {\n          return _publish3.apply(this, arguments);\n        }\n\n        return publish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee229(e) {\n          var _this222 = this;\n\n          var t;\n          return _regeneratorRuntime.wrap(function _callee229$(_context229) {\n            while (1) {\n              switch (_context229.prev = _context229.next) {\n                case 0:\n                  if (this.joinInfo) {\n                    _context229.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"subscribe no joinInfo\");\n\n                case 2:\n                  t = e.getUserId();\n\n                  if (!(e.on($m.NEED_ANSWER, function (i, r, n) {\n                    var s = e.subscribeOptions,\n                        o = {\n                      stream_id: e.getUserId(),\n                      audio: !!s.audio,\n                      video: !!s.video,\n                      mode: _this222.spec.mode,\n                      codec: _this222.spec.codec,\n                      p2p_id: e.pc.ID,\n                      sdp: ge(i),\n                      tcc: !!Fc(\"SUBSCRIBE_TCC\"),\n                      extend: Fc(\"SUB_EXTEND\")\n                    };\n\n                    _this222.signal.request(Xm.SUBSCRIBE, o, !0).then(function (e) {\n                      _this222.needToSendUnpubUnsub.set(t, !0), r(JSON.parse(e.sdp));\n                    }).catch(function (t) {\n                      if (i.retry && t.data && t.data.code === Ym.ERR_SUBSCRIBE_REQUEST_INVALID) return vc.warning(\"[\".concat(_this222.clientId, \"] receiver subscribe error code, retry\"), t.toString()), kh(e, $m.NEED_UNSUB).then(function () {\n                        i.retry = !1, kh(e, $m.NEED_ANSWER, i).then(r).catch(n);\n                      });\n                      t.code !== ad.WS_ABORT && n(t);\n                    });\n                  }), e.on($m.NEED_UNSUB, function (i) {\n                    return _this222.needToSendUnpubUnsub.has(t) ? \"RECONNECTING\" === _this222.state ? i(!0) : void _this222.signal.request(Xm.UNSUBSCRIBE, {\n                      stream_id: e.getUserId()\n                    }, !0).then(function () {\n                      return i(!1);\n                    }).catch(function (e) {\n                      vc.warning(\"unsubscribe warning\", e), i(!0);\n                    }) : i(!1);\n                  }), e.on($m.NEED_UPLOAD, function (t, i) {\n                    _this222.signal.upload(t, {\n                      stream_id: e.getUserId(),\n                      stats: i\n                    });\n                  }), e.on($m.NEED_SIGNAL_RTT, function (e) {\n                    e(_this222.signal.rtt);\n                  }), \"RECONNECTING\" !== this.state)) {\n                    _context229.next = 10;\n                    break;\n                  }\n\n                  if (!(\"CONNECTED\" !== this.state)) {\n                    _context229.next = 6;\n                    break;\n                  }\n\n                  return _context229.abrupt(\"return\", new Ad(ad.INVALID_OPERATION, \"can not subscribe when connection state is \".concat(this.state)).throw());\n\n                case 6:\n                  _context229.next = 8;\n                  return e.startP2PConnection();\n\n                case 8:\n                  _context229.next = 11;\n                  break;\n\n                case 10:\n                  e.readyToReconnectPC();\n\n                case 11:\n                case \"end\":\n                  return _context229.stop();\n              }\n            }\n          }, _callee229, this);\n        }));\n\n        function subscribe(_x344) {\n          return _subscribe4.apply(this, arguments);\n        }\n\n        return subscribe;\n      }()\n    }, {\n      key: \"subscribeChange\",\n      value: function () {\n        var _subscribeChange = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee230(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee230$(_context230) {\n            while (1) {\n              switch (_context230.prev = _context230.next) {\n                case 0:\n                  if (this.joinInfo) {\n                    _context230.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"subscribe no joinInfo\");\n\n                case 2:\n                  _context230.next = 4;\n                  return e.setSubscribeOptions(t);\n\n                case 4:\n                  if (!(\"RECONNECTING\" !== this.state)) {\n                    _context230.next = 10;\n                    break;\n                  }\n\n                  if (!(\"CONNECTED\" !== this.state)) {\n                    _context230.next = 7;\n                    break;\n                  }\n\n                  return _context230.abrupt(\"return\", new Ad(ad.INVALID_OPERATION, \"can not subscribe change when connection state is \".concat(this.state)).throw());\n\n                case 7:\n                  vc.debug(Xe(i = Xe(r = \"[\".concat(this.clientId, \"] send subscribe change, audio: \")).call(r, t.audio, \", video: \")).call(i, t.video));\n                  _context230.next = 10;\n                  return this.signal.request(Xm.SUBSCRIBE_CHANGE, {\n                    stream_id: e.getUserId(),\n                    audio: !!t.audio,\n                    video: !!t.video\n                  }, !0);\n\n                case 10:\n                case \"end\":\n                  return _context230.stop();\n              }\n            }\n          }, _callee230, this);\n        }));\n\n        function subscribeChange(_x345, _x346) {\n          return _subscribeChange.apply(this, arguments);\n        }\n\n        return subscribeChange;\n      }()\n    }, {\n      key: \"sendControl\",\n      value: function () {\n        var _sendControl = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee231(e) {\n          return _regeneratorRuntime.wrap(function _callee231$(_context231) {\n            while (1) {\n              switch (_context231.prev = _context231.next) {\n                case 0:\n                  this.signal.request(Xm.CONTROL, e, !0, !0);\n\n                case 1:\n                case \"end\":\n                  return _context231.stop();\n              }\n            }\n          }, _callee231, this);\n        }));\n\n        function sendControl(_x347) {\n          return _sendControl.apply(this, arguments);\n        }\n\n        return sendControl;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee232(e) {\n          return _regeneratorRuntime.wrap(function _callee232$(_context232) {\n            while (1) {\n              switch (_context232.prev = _context232.next) {\n                case 0:\n                  _context232.next = 2;\n                  return e.closeP2PConnection();\n\n                case 2:\n                case \"end\":\n                  return _context232.stop();\n              }\n            }\n          }, _callee232, this);\n        }));\n\n        function unsubscribe(_x348) {\n          return _unsubscribe4.apply(this, arguments);\n        }\n\n        return unsubscribe;\n      }()\n    }, {\n      key: \"getGatewayInfo\",\n      value: function getGatewayInfo() {\n        return this.signal.request(Xm.GATEWAY_INFO);\n      }\n    }, {\n      key: \"renewToken\",\n      value: function renewToken(e) {\n        return this.signal.request(Xm.RENEW_TOKEN, {\n          token: e\n        });\n      }\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee233(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee233$(_context233) {\n            while (1) {\n              switch (_context233.prev = _context233.next) {\n                case 0:\n                  if (!(t && (this._clientRoleOptions = er({}, t)), \"CONNECTED\" !== this.state)) {\n                    _context233.next = 2;\n                    break;\n                  }\n\n                  return _context233.abrupt(\"return\", void (this.role = e));\n\n                case 2:\n                  i = void 0;\n                  i = \"audience\" === e ? this._clientRoleOptions && this._clientRoleOptions.level ? this._clientRoleOptions.level : 2 : 0;\n                  _context233.next = 6;\n                  return this.signal.request(Xm.SET_CLIENT_ROLE, {\n                    role: e,\n                    level: i\n                  });\n\n                case 6:\n                  this.role = e;\n\n                case 7:\n                case \"end\":\n                  return _context233.stop();\n              }\n            }\n          }, _callee233, this);\n        }));\n\n        function setClientRole(_x349, _x350) {\n          return _setClientRole3.apply(this, arguments);\n        }\n\n        return setClientRole;\n      }()\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee234(e, t) {\n          return _regeneratorRuntime.wrap(function _callee234$(_context234) {\n            while (1) {\n              switch (_context234.prev = _context234.next) {\n                case 0:\n                  _context234.next = 2;\n                  return this.signal.request(Xm.SWITCH_VIDEO_STREAM, {\n                    stream_id: e,\n                    stream_type: t\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context234.stop();\n              }\n            }\n          }, _callee234, this);\n        }));\n\n        function setRemoteVideoStreamType(_x351, _x352) {\n          return _setRemoteVideoStreamType3.apply(this, arguments);\n        }\n\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee235(e, t) {\n          return _regeneratorRuntime.wrap(function _callee235$(_context235) {\n            while (1) {\n              switch (_context235.prev = _context235.next) {\n                case 0:\n                  _context235.next = 2;\n                  return this.signal.request(Xm.SET_FALLBACK_OPTION, {\n                    stream_id: e,\n                    fallback_type: t\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context235.stop();\n              }\n            }\n          }, _callee235, this);\n        }));\n\n        function setStreamFallbackOption(_x353, _x354) {\n          return _setStreamFallbackOption3.apply(this, arguments);\n        }\n\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee236(e, t) {\n          return _regeneratorRuntime.wrap(function _callee236$(_context236) {\n            while (1) {\n              switch (_context236.prev = _context236.next) {\n                case 0:\n                  _context236.next = 2;\n                  return this.signal.request(Xm.PICK_SVC_LAYER, {\n                    stream_id: e,\n                    spatial_layer: t.spatialLayer,\n                    temporal_layer: t.temporalLayer\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context236.stop();\n              }\n            }\n          }, _callee236, this);\n        }));\n\n        function pickSVCLayer(_x355, _x356) {\n          return _pickSVCLayer3.apply(this, arguments);\n        }\n\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"getInChannelInfo\",\n      value: function getInChannelInfo() {\n        return this.inChannelInfo.joinAt && (this.inChannelInfo.duration = La() - this.inChannelInfo.joinAt), nS({}, this.inChannelInfo);\n      }\n    }, {\n      key: \"getGatewayVersion\",\n      value: function () {\n        var _getGatewayVersion2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee237() {\n          return _regeneratorRuntime.wrap(function _callee237$(_context237) {\n            while (1) {\n              switch (_context237.prev = _context237.next) {\n                case 0:\n                  _context237.next = 2;\n                  return this.signal.request(Xm.GATEWAY_INFO);\n\n                case 2:\n                  return _context237.abrupt(\"return\", _context237.sent.version);\n\n                case 3:\n                case \"end\":\n                  return _context237.stop();\n              }\n            }\n          }, _callee237, this);\n        }));\n\n        function getGatewayVersion() {\n          return _getGatewayVersion2.apply(this, arguments);\n        }\n\n        return getGatewayVersion;\n      }()\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        if (this.inChannelInfo.joinAt && (this.inChannelInfo.duration = La() - this.inChannelInfo.joinAt, this.inChannelInfo.joinAt = null), this.trafficStatsInterval && (window.clearInterval(this.trafficStatsInterval), this.trafficStatsInterval = void 0), this.joinInfo) {\n          var _e158 = sS.get(this.joinInfo.cname);\n\n          _e158 && _e158.delete(this.joinInfo.uid);\n        }\n\n        this.needToSendUnpubUnsub = new Li(), this.joinInfo = void 0, this.key = void 0, this.networkQualityInterval && (window.clearInterval(this.networkQualityInterval), this.networkQualityInterval = void 0);\n      }\n    }, {\n      key: \"updateTurnConfigFromSignal\",\n      value: function updateTurnConfigFromSignal() {\n        if (!this.joinInfo) return;\n\n        var e = function (e) {\n          var t = e.match(/(wss\\:\\/\\/)?([^:]+):(\\d+)/);\n          return t ? {\n            username: Oc.username,\n            password: Oc.password,\n            turnServerURL: t[2],\n            tcpport: mr(t[3]) + 30,\n            udpport: mr(t[3]) + 30,\n            forceturn: !1\n          } : null;\n        }((\"disabled\" === this.joinInfo.cloudProxyServer ? this.signal.url : this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]) || \"\");\n\n        this.joinInfo.turnServer.serversFromGateway = [], e && \"off\" !== this.joinInfo.turnServer.mode && \"disabled\" === this.joinInfo.cloudProxyServer && this.joinInfo.turnServer.serversFromGateway.push(nS({}, Oc, {\n          turnServerURL: e.turnServerURL,\n          tcpport: e.tcpport,\n          udpport: e.udpport,\n          username: this.joinInfo.uid.toString(),\n          password: this.joinInfo.token\n        }));\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function () {\n        var _updateTrafficStats2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee238() {\n          var _this223 = this;\n\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee238$(_context238) {\n            while (1) {\n              switch (_context238.prev = _context238.next) {\n                case 0:\n                  if (!(\"CONNECTED\" !== this.state)) {\n                    _context238.next = 2;\n                    break;\n                  }\n\n                  return _context238.abrupt(\"return\");\n\n                case 2:\n                  _context238.next = 4;\n                  return this.signal.request(Xm.TRAFFIC_STATS, void 0, !0);\n\n                case 4:\n                  t = _context238.sent;\n                  t.timestamp = La(), Xi(e = t.peer_delay).call(e, function (e) {\n                    var t;\n                    var i = _this223._statsCollector.trafficStats && Vs(t = _this223._statsCollector.trafficStats.peer_delay).call(t, function (t) {\n                      return t.peer_uid === e.peer_uid;\n                    });\n                    i && i.B_st !== e.B_st && Qh(function () {\n                      _this223.emit(hC.STREAM_TYPE_CHANGE, e.peer_uid, e.B_st);\n                    });\n                  }), this._statsCollector.updateTrafficStats(t);\n\n                case 6:\n                case \"end\":\n                  return _context238.stop();\n              }\n            }\n          }, _callee238, this);\n        }));\n\n        function updateTrafficStats() {\n          return _updateTrafficStats2.apply(this, arguments);\n        }\n\n        return updateTrafficStats;\n      }()\n    }, {\n      key: \"getJoinMessage\",\n      value: function getJoinMessage() {\n        if (!this.joinInfo || !this.key) throw new Ad(ad.UNEXPECTED_ERROR, \"can not generate join message, no join info\");\n        var e = er({}, this.joinInfo.apResponse);\n        var t = Fc(\"REPORT_APP_SCENARIO\");\n        if (\"string\" != typeof t) try {\n          t = ge(t);\n        } catch (e) {\n          t = void 0;\n        }\n        t && t.length > 128 && (t = void 0);\n        var i = {\n          session_id: this.joinInfo.sid,\n          app_id: this.joinInfo.appId,\n          channel_key: this.key,\n          channel_name: this.joinInfo.cname,\n          sdk_version: wc,\n          browser: navigator.userAgent,\n          process_id: Fc(\"PROCESS_ID\"),\n          mode: this.spec.mode,\n          codec: this.spec.codec,\n          role: this.role,\n          has_changed_gateway: this.hasChangeBGPAddress,\n          ap_response: e,\n          extend: Fc(\"JOIN_EXTEND\"),\n          details: {\n            6: this.joinInfo.stringUid,\n            cservice_map: \"proxy3\" === this.joinInfo.cloudProxyServer ? \"1\" : void 0\n          },\n          features: {\n            rejoin: !0\n          },\n          optionalInfo: this.joinInfo.optionalInfo,\n          appScenario: t\n        };\n        return this.joinInfo.stringUid && (i.string_uid = this.joinInfo.stringUid), this.joinInfo.aesmode && this.joinInfo.aespassword && (i.aes_mode = this.joinInfo.aesmode, Fc(\"ENCRYPT_AES\") ? (i.aes_secret = this.joinInfo.aespassword, i.aes_encrypt = !0) : i.aes_secret = this.joinInfo.aespassword, this.joinInfo.aessalt && (i.aes_salt = this.joinInfo.aessalt)), e.addresses[this.signal.websocket.currentURLIndex] && (i.ap_response.ticket = e.addresses[this.signal.websocket.currentURLIndex].ticket, delete e.addresses), i;\n      }\n    }, {\n      key: \"getRejoinMessage\",\n      value: function getRejoinMessage() {\n        if (!this.joinInfo) throw new Ad(ad.UNEXPECTED_ERROR, \"can not generate rejoin message, no join info\");\n        return {\n          session_id: this.joinInfo.sid,\n          channel_name: this.joinInfo.cname,\n          cid: this.joinInfo.cid,\n          uid: this.joinInfo.uid,\n          vid: Number(this.joinInfo.vid)\n        };\n      }\n    }, {\n      key: \"handleSignalEvents\",\n      value: function handleSignalEvents() {\n        var _this224 = this;\n\n        this.signal.on(Jm.WS_RECONNECTING, function (e) {\n          _this224.joinInfo && wC.WebSocketQuit(_this224.joinInfo.sid, {\n            lts: La(),\n            succ: -1,\n            cname: _this224.joinInfo.cname,\n            uid: _this224.joinInfo.uid,\n            cid: _this224.joinInfo.cid,\n            errorCode: e || Rm.NETWORK_ERROR\n          }), _this224.joinInfo && (_this224.state = \"RECONNECTING\", wC.sessionInit(_this224.joinInfo.sid, {\n            lts: new Date().getTime(),\n            extend: _this224.isSignalRecover ? {\n              recover: !0\n            } : {\n              rejoin: !0\n            },\n            cname: _this224.joinInfo.cname,\n            appid: _this224.joinInfo.appId,\n            mode: _this224.spec.mode\n          }), _this224.isSignalRecover = !1, _this224.joinGatewayStartTime = La());\n        }), this.signal.on(Jm.WS_CLOSED, function (e) {\n          var t;\n\n          switch (e) {\n            case \"LEAVE\":\n              t = Rm.LEAVE;\n              break;\n\n            case \"UID_BANNED\":\n            case \"IP_BANNED\":\n            case \"CHANNEL_BANNED\":\n            case \"SERVER_ERROR\":\n              t = Rm.SERVER_ERROR;\n              break;\n\n            default:\n              t = Rm.NETWORK_ERROR;\n          }\n\n          vc.debug(\"[signal] websocket closed, reason: \".concat(t || \"undefined -> \" + Rm.NETWORK_ERROR)), _this224.joinInfo && wC.WebSocketQuit(_this224.joinInfo.sid, {\n            lts: La(),\n            succ: \"LEAVE\" === e ? 1 : -1,\n            cname: _this224.joinInfo.cname,\n            uid: _this224.joinInfo.uid,\n            cid: _this224.joinInfo.cid,\n            errorCode: t\n          }), _this224.reset(), _this224._disconnectedReason = e, _this224.state = \"DISCONNECTED\";\n        }), this.signal.on(Jm.WS_CONNECTED, function () {\n          if (_this224.updateTurnConfigFromSignal(), _this224.state = \"CONNECTED\", _this224.joinInfo) {\n            var e, t, i;\n            if (\"audience\" === _this224.role && _this224._clientRoleOptions && _this224._clientRoleOptions.level) vc.debug(Xe(e = Xe(t = Xe(i = \"[\".concat(_this224.clientId, \"] patch to send set client role, role: \")).call(i, _this224.role, \", mode: \")).call(t, _this224.spec.mode, \", level: \")).call(e, _this224._clientRoleOptions && _this224._clientRoleOptions.level)), _this224.setClientRole(_this224.role, _this224._clientRoleOptions);\n\n            if (wC.joinGateway(_this224.joinInfo.sid, {\n              lts: _this224.joinGatewayStartTime,\n              succ: !0,\n              ec: null,\n              vid: _this224.joinInfo.vid,\n              addr: _this224.signal.url,\n              uid: _this224.joinInfo.uid,\n              cid: _this224.joinInfo.cid\n            }), _this224.joinInfo.useLocalAccessPoint) {\n              var _e159 = _this224.signal.url && _this224.signal.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/);\n\n              var r;\n              if (!_e159) return void vc.error(Xe(r = \"[\".concat(_this224.clientId, \"] set local access point after joined failed: \")).call(r, _e159));\n              Qc(\"EVENT_REPORT_DOMAIN\", _e159[1]), Qc(\"EVENT_REPORT_BACKUP_DOMAIN\", _e159[1]), Qc(\"LOG_UPLOAD_SERVER\", \"\".concat(_e159[1], \":6444\"));\n            }\n          }\n        }), this.signal.on(Zm.ON_UPLINK_STATS, function (e) {\n          _this224._statsCollector.updateUplinkStats(e);\n        }), this.signal.on(Jm.REQUEST_RECOVER, function (e, t, i) {\n          if (!_this224.joinInfo) return i(new Ad(ad.UNEXPECTED_ERROR, \"gateway: can not recover, no join info\"));\n          e && (_this224.joinInfo.multiIP = e, _this224.hasChangeBGPAddress = !0), _this224.isSignalRecover = !0, kh(_this224, hC.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i);\n        }), this.signal.on(Jm.REQUEST_JOIN_INFO, function (e) {\n          e(_this224.getJoinMessage());\n        }), this.signal.on(Jm.REQUEST_REJOIN_INFO, function (e) {\n          e(_this224.getRejoinMessage());\n        }), this.signal.on(Jm.REPORT_JOIN_GATEWAY, function (e, t) {\n          _this224.joinInfo && wC.joinGateway(_this224.joinInfo.sid, {\n            lts: _this224.joinGatewayStartTime,\n            succ: !1,\n            ec: e,\n            addr: t,\n            uid: _this224.joinInfo.uid,\n            cid: _this224.joinInfo.cid\n          });\n        }), this.signal.on(Jm.IS_P2P_DISCONNECTED, function (e) {\n          e(Bh(_this224, hC.IS_P2P_DISCONNECTED));\n        }), this.signal.on(Jm.DISCONNECT_P2P, function () {\n          _this224.needToSendUnpubUnsub = new Li(), _this224.emit(hC.DISCONNECT_P2P);\n        }), this.signal.on(Jm.NEED_RENEW_SESSION, function () {\n          _this224.emit(hC.NEED_RENEW_SESSION);\n        }), this.signal.on(Jm.REQUEST_SUCCESS, function () {\n          _this224._signalTimeout = !1;\n        }), this.signal.on(Jm.REQUEST_TIMEOUT, function () {\n          _this224._signalTimeout = !0;\n        });\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        if (e === this._state) return;\n        var t = this._state;\n        this._state = e, \"DISCONNECTED\" === e && this._disconnectedReason ? this.emit(hC.CONNECTION_STATE_CHANGE, e, t, this._disconnectedReason) : this.emit(hC.CONNECTION_STATE_CHANGE, e, t);\n      }\n    }]);\n\n    return oS;\n  }(Ll);\n\n  function aS(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  var cS = 1;\n\n  function dS(e, t, i, r, n) {\n    cS += 1;\n    var s = {\n      sid: i.sid,\n      command: \"convergeAllocateEdge\",\n      uid: \"666\",\n      appId: i.appId,\n      ts: Math.floor(La() / 1e3),\n      seq: cS,\n      requestId: cS,\n      version: wc,\n      cname: i.cname\n    },\n        o = {\n      service_name: t,\n      json_body: ge(s)\n    };\n    var a,\n        c,\n        d = e[0];\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee239() {\n      var e, _t166, i, n, _e160, _e161, s;\n\n      return _regeneratorRuntime.wrap(function _callee239$(_context239) {\n        while (1) {\n          switch (_context239.prev = _context239.next) {\n            case 0:\n              a = La();\n              _context239.next = 3;\n              return jA(d, {\n                data: o,\n                cancelToken: r,\n                headers: {\n                  \"X-Packet-Service-Type\": \"0\",\n                  \"X-Packet-URI\": \"61\"\n                }\n              });\n\n            case 3:\n              e = _context239.sent;\n\n              if (!(c = La() - a, 0 !== e.code)) {\n                _context239.next = 7;\n                break;\n              }\n\n              _t166 = new Ad(ad.UNEXPECTED_RESPONSE, \"live streaming ap error, code\" + e.code, {\n                retry: !0,\n                responseTime: c\n              });\n              throw vc.error(_t166.toString()), _t166;\n\n            case 7:\n              i = JSON.parse(e.json_body);\n\n              if (!(200 !== i.code)) {\n                _context239.next = 11;\n                break;\n              }\n\n              _e160 = new Ad(ad.UNEXPECTED_RESPONSE, Xe(n = \"live streaming app center error, code: \".concat(i.code, \", reason: \")).call(n, i.reason), {\n                code: i.code,\n                responseTime: c\n              });\n              throw vc.error(_e160.toString()), _e160;\n\n            case 11:\n              if (!(!i.servers || 0 === i.servers.length)) {\n                _context239.next = 14;\n                break;\n              }\n\n              _e161 = new Ad(ad.UNEXPECTED_RESPONSE, \"live streaming app center empty server\", {\n                code: i.code,\n                responseTime: c\n              });\n              throw vc.error(_e161.toString()), _e161;\n\n            case 14:\n              s = function (e, t) {\n                var i;\n                return {\n                  addressList: Es(i = e.servers).call(i, function (e) {\n                    var i, r;\n                    return Xe(i = Xe(r = \"wss://\".concat(e.address.replace(/\\./g, \"-\"), \".edge.agora.io:\")).call(r, e.wss, \"?serviceName=\")).call(i, encodeURIComponent(t));\n                  }),\n                  workerToken: e.workerToken,\n                  vid: e.vid\n                };\n              }(i, t);\n\n              return _context239.abrupt(\"return\", (Fc(\"LIVE_STREAMING_ADDRESS\") && (s.addressList = Fc(\"LIVE_STREAMING_ADDRESS\") instanceof Array ? Fc(\"LIVE_STREAMING_ADDRESS\") : [Fc(\"LIVE_STREAMING_ADDRESS\")]), function (e) {\n                for (var t = 1; t < arguments.length; t++) {\n                  var i,\n                      r = null != arguments[t] ? arguments[t] : {};\n                  if (t % 2) Xi(i = aS(Object(r), !0)).call(i, function (t) {\n                    NA(e, t, r[t]);\n                  });else if (Vl) se(e, Vl(r));else {\n                    var n;\n                    Xi(n = aS(Object(r))).call(n, function (t) {\n                      dr(e, t, Br(r, t));\n                    });\n                  }\n                }\n\n                return e;\n              }({}, s, {\n                responseTime: c\n              })));\n\n            case 16:\n            case \"end\":\n              return _context239.stop();\n          }\n        }\n      }, _callee239, this);\n    })), function (r, n) {\n      return wC.apworkerEvent(i.sid, {\n        success: !0,\n        sc: 200,\n        serviceName: t,\n        responseDetail: ge(r.addressList),\n        firstSuccess: 0 === n,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !1;\n    }, function (r, n) {\n      return wC.apworkerEvent(i.sid, {\n        success: !1,\n        sc: r.data && r.data.code || 200,\n        serviceName: t,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !!(r.code !== ad.OPERATION_ABORTED && r.code !== ad.UNEXPECTED_RESPONSE || r.data && r.data.retry) && (d = e[(n + 1) % e.length], !0);\n    }, n);\n  }\n\n  function lS(_ref187, i, r, n) {\n    var e = _ref187.url,\n        t = _ref187.areaCode;\n\n    var s = La(),\n        _pS = pS(i, t, [OC.CHOOSE_SERVER]),\n        _pS2 = _slicedToArray(_pS, 2),\n        o = _pS2[0],\n        a = _pS2[1];\n\n    var c = WA.networkState;\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee240() {\n      var t, a;\n      return _regeneratorRuntime.wrap(function _callee240$(_context240) {\n        while (1) {\n          switch (_context240.prev = _context240.next) {\n            case 0:\n              _context240.t0 = c && WA.networkState === CC.OFFLINE && WA.onlineWaiter;\n\n              if (!_context240.t0) {\n                _context240.next = 4;\n                break;\n              }\n\n              _context240.next = 4;\n              return As.race([WA.onlineWaiter, Th(n && n.maxRetryTimeout || HA.maxRetryTimeout)]);\n\n            case 4:\n              c = WA.networkState;\n              _context240.next = 7;\n              return jA(e, {\n                data: o,\n                cancelToken: r,\n                headers: {\n                  \"Content-Type\": \"multipart/form-data;\"\n                }\n              }, !0);\n\n            case 7:\n              t = _context240.sent;\n              uS(t, e, i, s, [OC.CHOOSE_SERVER]);\n              a = tS(t, OC.CHOOSE_SERVER);\n              return _context240.abrupt(\"return\", (hS(a), XC(a, e)));\n\n            case 11:\n            case \"end\":\n              return _context240.stop();\n          }\n        }\n      }, _callee240, this);\n    })), function (t) {\n      return t && wC.joinChooseServer(i.sid, {\n        lts: s,\n        succ: !0,\n        csAddr: e,\n        opid: a,\n        serverList: t.gatewayAddrs,\n        ec: null,\n        cid: t.cid.toString(),\n        uid: t.uid.toString(),\n        csIp: t.csIp,\n        unilbsServerIds: [OC.CHOOSE_SERVER].toString()\n      }), !1;\n    }, function (t) {\n      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? t.data.retry : (wC.joinChooseServer(i.sid, {\n        lts: s,\n        succ: !1,\n        csAddr: e,\n        serverList: null,\n        opid: a,\n        ec: t.code,\n        csIp: t.data && t.data.csIp,\n        unilbsServerIds: [OC.CHOOSE_SERVER].toString(),\n        extend: ge({\n          networkState: c\n        })\n      }), vc.warning(\"[\".concat(i.clientId, \"] Choose server network error, retry\"), t), !0));\n    }, n);\n  }\n\n  function AS(_ref189, r, n, s) {\n    var e = _ref189.url,\n        t = _ref189.areaCode,\n        i = _ref189.serviceIds;\n\n    var o = La(),\n        _pS3 = pS(r, t, i),\n        _pS4 = _slicedToArray(_pS3, 2),\n        a = _pS4[0],\n        c = _pS4[1];\n\n    var d = void 0;\n    return qA(\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee241() {\n      var t, c, l;\n      return _regeneratorRuntime.wrap(function _callee241$(_context241) {\n        while (1) {\n          switch (_context241.prev = _context241.next) {\n            case 0:\n              _context241.t0 = d && WA.networkState === CC.OFFLINE && WA.onlineWaiter;\n\n              if (!_context241.t0) {\n                _context241.next = 4;\n                break;\n              }\n\n              _context241.next = 4;\n              return As.race([WA.onlineWaiter, Th(s && s.maxRetryTimeout || HA.maxRetryTimeout)]);\n\n            case 4:\n              d = WA.networkState;\n              _context241.next = 7;\n              return jA(e, {\n                data: a,\n                cancelToken: n,\n                headers: {\n                  \"Content-Type\": \"multipart/form-data;\"\n                }\n              }, !0);\n\n            case 7:\n              t = _context241.sent;\n              uS(t, e, r, o, i);\n              c = tS(t, OC.CHOOSE_SERVER), l = tS(t, \"proxy5\" === r.cloudProxyServer ? OC.CLOUD_PROXY_5 : OC.CLOUD_PROXY);\n              return _context241.abrupt(\"return\", (hS(c), {\n                gatewayInfo: XC(c, e),\n                proxyInfo: l,\n                url: e\n              }));\n\n            case 11:\n            case \"end\":\n              return _context241.stop();\n          }\n        }\n      }, _callee241, this);\n    })), function (t) {\n      var n;\n      return t.gatewayInfo && wC.joinChooseServer(r.sid, {\n        lts: o,\n        succ: !0,\n        csAddr: e,\n        serverList: t.gatewayInfo.gatewayAddrs,\n        ec: null,\n        opid: c,\n        cid: t.gatewayInfo.cid.toString(),\n        uid: t.gatewayInfo.uid.toString(),\n        csIp: t.gatewayInfo.csIp,\n        unilbsServerIds: i.toString()\n      }), t.proxyInfo && wC.joinWebProxyAP(r.sid, {\n        lts: o,\n        sucess: 1,\n        apServerAddr: e,\n        turnServerAddrList: Es(n = t.proxyInfo.addresses).call(n, function (e) {\n          return e.ip;\n        }).join(\",\"),\n        errorCode: null,\n        eventType: r.cloudProxyServer,\n        unilbsServerIds: i.toString()\n      }), !1;\n    }, function (t) {\n      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? t.data.retry : (wC.joinWebProxyAP(r.sid, {\n        lts: o,\n        sucess: 0,\n        apServerAddr: e,\n        turnServerAddrList: null,\n        errorCode: t.code,\n        eventType: r.cloudProxyServer,\n        unilbsServerIds: i.toString(),\n        extend: ge({\n          networkState: d\n        })\n      }), vc.warning(\"[\".concat(r.clientId, \"] multi unilbs network error, retry\"), t), !0));\n    }, s);\n  }\n\n  var uS = function uS(e, t, i, r, n) {\n    var s, o, a;\n    var c = [];\n    if (Xi(s = e.response_body).call(s, function (s) {\n      var o = s.buffer.code;\n\n      if (0 !== o) {\n        var _a18 = Zh(o),\n            _d10 = {\n          error: new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, _a18.desc, {\n            retry: _a18.retry,\n            csIp: e.detail[502]\n          }),\n          flag: s.buffer.flag\n        };\n\n        c.push(_d10), 4096 === _d10.flag ? wC.joinChooseServer(i.sid, {\n          lts: r,\n          succ: !1,\n          csAddr: t,\n          opid: e.opid,\n          serverList: null,\n          ec: _d10.error.message,\n          csIp: _d10.error.data && _d10.error.data.csIp,\n          unilbsServerIds: n.toString()\n        }) : 1048576 !== _d10.flag && 4194304 !== _d10.flag || wC.joinWebProxyAP(i.sid, {\n          lts: r,\n          sucess: 0,\n          apServerAddr: t,\n          turnServerAddrList: null,\n          errorCode: _d10.error.code,\n          eventType: i.cloudProxyServer,\n          unilbsServerIds: n.toString()\n        });\n      }\n    }), c.length) throw vc.warning(Xe(o = Xe(a = \"[\".concat(i.clientId, \"] multi unilbs \")).call(a, t, \" failed, \")).call(o, Es(c).call(c, function (e) {\n      var t, i;\n      return Xe(t = Xe(i = \"flag: \".concat(e.flag, \", message: \")).call(i, e.error.message, \", retry: \")).call(t, e.error.data.retry);\n    }).join(\" | \"))), new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, Es(c).call(c, function (e) {\n      var t;\n      return Xe(t = \"flag: \".concat(e.flag, \", message: \")).call(t, e.error.message);\n    }).join(\" | \"), {\n      retry: !!Vs(c).call(c, function (e) {\n        return e.error.data.retry;\n      }),\n      csIp: e.detail[502]\n    });\n  },\n      hS = function hS(e) {\n    if (e.addresses && 0 === e.addresses.length && 0 === e.code) throw new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, \"void gateway address\", {\n      retry: !0,\n      csIp: e.detail && e.detail[502]\n    });\n\n    if (Fc(\"GATEWAY_ADDRESS\") && Fc(\"GATEWAY_ADDRESS\").length > 0) {\n      var t;\n      vc.debug(\"assign gateway address to\", Fc(\"GATEWAY_ADDRESS\"));\n\n      var _i119 = Es(t = Fc(\"GATEWAY_ADDRESS\")).call(t, function (t) {\n        return {\n          ip: t.ip,\n          port: t.port,\n          ticket: e.addresses[0] && e.addresses[0].ticket\n        };\n      });\n\n      e.addresses = _i119;\n    }\n  },\n      pS = function pS(e, t, i) {\n    var r;\n    var n = Math.floor(Math.random() * Math.pow(10, 12)),\n        s = {\n      appid: e.appId,\n      client_ts: La(),\n      opid: n,\n      sid: e.sid,\n      request_bodies: [{\n        uri: 22,\n        buffer: {\n          cname: e.cname,\n          detail: {\n            6: e.stringUid,\n            11: t\n          },\n          key: e.token,\n          service_ids: i,\n          uid: e.uid || 0\n        }\n      }]\n    };\n    Xi(r = s.request_bodies).call(r, function (t) {\n      e.multiIP && e.multiIP.gateway_ip && (t.buffer.detail[5] = ge({\n        vocs_ip: [e.multiIP.uni_lbs_ip],\n        vos_ip: [e.multiIP.gateway_ip]\n      }));\n    });\n    var o = new FormData();\n    return o.append(\"request\", ge(s)), [o, n];\n  };\n\n  function ES(_x357, _x358, _x359) {\n    return _ES.apply(this, arguments);\n  }\n\n  function _ES() {\n    _ES = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee365(e, t, i) {\n      var r;\n      return _regeneratorRuntime.wrap(function _callee365$(_context365) {\n        while (1) {\n          switch (_context365.prev = _context365.next) {\n            case 0:\n              r = function () {\n                var _ref235 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee364(e, t, i) {\n                  var r, n, s, o, a, c, d;\n                  return _regeneratorRuntime.wrap(function _callee364$(_context364) {\n                    while (1) {\n                      switch (_context364.prev = _context364.next) {\n                        case 0:\n                          s = Es(r = Bs(n = Fc(\"WEBCS_DOMAIN\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t) {\n                            var i;\n                            return {\n                              url: e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                              areaCode: u_()\n                            };\n                          });\n                          o = null;\n                          a = [], c =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref236 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee362() {\n                              return _regeneratorRuntime.wrap(function _callee362$(_context362) {\n                                while (1) {\n                                  switch (_context362.prev = _context362.next) {\n                                    case 0:\n                                      _context362.next = 2;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: s,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), lS(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: a\n                                      });\n\n                                    case 2:\n                                      return _context362.abrupt(\"return\", _context362.sent);\n\n                                    case 3:\n                                    case \"end\":\n                                      return _context362.stop();\n                                  }\n                                }\n                              }, _callee362, this);\n                            }));\n\n                            return function c() {\n                              return _ref236.apply(this, arguments);\n                            };\n                          }(), d =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref237 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee363() {\n                              var r, n;\n                              return _regeneratorRuntime.wrap(function _callee363$(_context363) {\n                                while (1) {\n                                  switch (_context363.prev = _context363.next) {\n                                    case 0:\n                                      _context363.next = 2;\n                                      return Th(1e3);\n\n                                    case 2:\n                                      if (!(null !== o)) {\n                                        _context363.next = 4;\n                                        break;\n                                      }\n\n                                      return _context363.abrupt(\"return\", o);\n\n                                    case 4:\n                                      n = Es(r = Fc(\"WEBCS_DOMAIN_BACKUP_LIST\")).call(r, function (t) {\n                                        var i;\n                                        return {\n                                          url: e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                                          areaCode: u_()\n                                        };\n                                      });\n                                      _context363.next = 7;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: n,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), lS(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: a\n                                      });\n\n                                    case 7:\n                                      return _context363.abrupt(\"return\", _context363.sent);\n\n                                    case 8:\n                                    case \"end\":\n                                      return _context363.stop();\n                                  }\n                                }\n                              }, _callee363, this);\n                            }));\n\n                            return function d() {\n                              return _ref237.apply(this, arguments);\n                            };\n                          }();\n                          _context364.next = 5;\n                          return Dh([c(), d()]);\n\n                        case 5:\n                          o = _context364.sent;\n                          a.length && Xi(a).call(a, function (e) {\n                            return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n                          });\n                          return _context364.abrupt(\"return\", o);\n\n                        case 8:\n                        case \"end\":\n                          return _context364.stop();\n                      }\n                    }\n                  }, _callee364, this);\n                }));\n\n                return function (_x483, _x484, _x485) {\n                  return _ref235.apply(this, arguments);\n                };\n              }()(e, t, i);\n\n              _context365.next = 3;\n              return r;\n\n            case 3:\n              _context365.t0 = _context365.sent;\n              return _context365.abrupt(\"return\", {\n                gatewayInfo: _context365.t0\n              });\n\n            case 5:\n            case \"end\":\n              return _context365.stop();\n          }\n        }\n      }, _callee365, this);\n    }));\n    return _ES.apply(this, arguments);\n  }\n\n  function gS(_x360, _x361, _x362, _x363) {\n    return _gS.apply(this, arguments);\n  }\n\n  function _gS() {\n    _gS = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee369(e, t, i, r) {\n      var n, s, o, _ref238, _ref239, a, _n62, _ref240, _r98, _n63;\n\n      return _regeneratorRuntime.wrap(function _callee369$(_context369) {\n        while (1) {\n          switch (_context369.prev = _context369.next) {\n            case 0:\n              if (!(\"disabled\" === e.cloudProxyServer)) {\n                _context369.next = 9;\n                break;\n              }\n\n              if (!r) {\n                _context369.next = 7;\n                break;\n              }\n\n              _context369.next = 4;\n              return ES(e, t, i);\n\n            case 4:\n              _context369.t0 = _context369.sent;\n              _context369.next = 8;\n              break;\n\n            case 7:\n              _context369.t0 = void 0;\n\n            case 8:\n              return _context369.abrupt(\"return\", _context369.t0);\n\n            case 9:\n              if (!(\"443only\" === e.cloudProxyServer || \"normal\" === e.cloudProxyServer)) {\n                _context369.next = 48;\n                break;\n              }\n\n              if (!r) {\n                _context369.next = 32;\n                break;\n              }\n\n              if (!(\"normal\" !== e.cloudProxyServer)) {\n                _context369.next = 21;\n                break;\n              }\n\n              _context369.next = 14;\n              return As.all([IS(e, t, i), ES(e, t, i)]);\n\n            case 14:\n              _ref238 = _context369.sent;\n              _ref239 = _slicedToArray(_ref238, 2);\n              _n62 = _ref239[0];\n              o = _ref239[1];\n              _ref238;\n              _context369.next = 30;\n              break;\n\n            case 21:\n              _context369.next = 23;\n              return IS(e, t, i);\n\n            case 23:\n              _n62 = _context369.sent;\n              e.proxyServer = _n62.addresses[0];\n              wC.setProxyServer(e.proxyServer);\n              vc.setProxyServer(e.proxyServer);\n              _context369.next = 29;\n              return ES(e, t, i);\n\n            case 29:\n              o = _context369.sent;\n\n            case 30:\n              _context369.next = 45;\n              break;\n\n            case 32:\n              o = void 0;\n\n              if (!(\"normal\" !== e.cloudProxyServer)) {\n                _context369.next = 39;\n                break;\n              }\n\n              _context369.next = 36;\n              return IS(e, t, i);\n\n            case 36:\n              _n62 = _context369.sent;\n              _context369.next = 45;\n              break;\n\n            case 39:\n              _context369.next = 41;\n              return IS(e, t, i);\n\n            case 41:\n              _n62 = _context369.sent;\n              e.proxyServer = _n62.addresses[0];\n              wC.setProxyServer(e.proxyServer);\n              vc.setProxyServer(e.proxyServer);\n\n            case 45:\n              e.turnServer = {\n                mode: \"manual\",\n                servers: Es(a = _n62.addresses).call(a, function (t) {\n                  return {\n                    turnServerURL: t,\n                    tcpport: \"proxy3\" === e.cloudProxyServer ? void 0 : _n62.serverResponse.tcpport ? _n62.serverResponse.tcpport : Oc.tcpport,\n                    udpport: \"proxy4\" === e.cloudProxyServer ? void 0 : _n62.serverResponse.udpport ? _n62.serverResponse.udpport : Oc.udpport,\n                    username: _n62.serverResponse.username || Oc.username,\n                    password: _n62.serverResponse.password || Oc.password,\n                    forceturn: \"proxy4\" !== e.cloudProxyServer && \"proxy5\" !== e.cloudProxyServer,\n                    security: \"proxy5\" === e.cloudProxyServer\n                  };\n                })\n              };\n              _context369.next = 54;\n              break;\n\n            case 48:\n              _context369.next = 50;\n              return function () {\n                var _ref241 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee368(e, t, i) {\n                  var r, n, s, o, a, c, d, l, A, _ref242, u, h, p, _t211;\n\n                  return _regeneratorRuntime.wrap(function _callee368$(_context368) {\n                    while (1) {\n                      switch (_context368.prev = _context368.next) {\n                        case 0:\n                          s = Fc(\"PROXY_SERVER_TYPE3\"), o = function o(e, t) {\n                            var i;\n                            var r = s;\n                            return ld(r) && (r = t % 2 == 0 ? s[1] : s[0]), Xe(i = \"https://\".concat(r, \"/ap/?url=\")).call(i, e);\n                          }, a = Es(r = Bs(n = Fc(\"WEBCS_DOMAIN\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(r, function (t, i) {\n                            return {\n                              url: o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i),\n                              areaCode: u_(),\n                              serviceIds: [OC.CHOOSE_SERVER, \"proxy5\" === e.cloudProxyServer ? OC.CLOUD_PROXY_5 : OC.CLOUD_PROXY]\n                            };\n                          });\n                          c = null;\n                          d = [];\n\n                          l =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref243 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee366() {\n                              return _regeneratorRuntime.wrap(function _callee366$(_context366) {\n                                while (1) {\n                                  switch (_context366.prev = _context366.next) {\n                                    case 0:\n                                      _context366.next = 2;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: a,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), AS(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: d\n                                      });\n\n                                    case 2:\n                                      return _context366.abrupt(\"return\", _context366.sent);\n\n                                    case 3:\n                                    case \"end\":\n                                      return _context366.stop();\n                                  }\n                                }\n                              }, _callee366, this);\n                            }));\n\n                            return function l() {\n                              return _ref243.apply(this, arguments);\n                            };\n                          }();\n\n                          A =\n                          /*#__PURE__*/\n                          function () {\n                            var _ref244 = _asyncToGenerator(\n                            /*#__PURE__*/\n                            _regeneratorRuntime.mark(function _callee367() {\n                              var r, n;\n                              return _regeneratorRuntime.wrap(function _callee367$(_context367) {\n                                while (1) {\n                                  switch (_context367.prev = _context367.next) {\n                                    case 0:\n                                      _context367.next = 2;\n                                      return Th(1e3);\n\n                                    case 2:\n                                      if (!(null !== c)) {\n                                        _context367.next = 4;\n                                        break;\n                                      }\n\n                                      return _context367.abrupt(\"return\", c);\n\n                                    case 4:\n                                      n = Es(r = Fc(\"WEBCS_DOMAIN_BACKUP_LIST\")).call(r, function (e, t) {\n                                        return {\n                                          url: o(\"\".concat(e, \"/api/v2/transpond/webrtc?v=2\"), t),\n                                          areaCode: u_(),\n                                          serviceIds: [11, 18]\n                                        };\n                                      });\n                                      _context367.next = 7;\n                                      return Hh({\n                                        fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                                        referenceList: n,\n                                        asyncMapHandler: function asyncMapHandler(r) {\n                                          return vc.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), AS(r, e, t, i);\n                                        },\n                                        allFailedhandler: function allFailedhandler(e) {\n                                          throw e[0];\n                                        },\n                                        promisesCollector: d\n                                      });\n\n                                    case 7:\n                                      return _context367.abrupt(\"return\", _context367.sent);\n\n                                    case 8:\n                                    case \"end\":\n                                      return _context367.stop();\n                                  }\n                                }\n                              }, _callee367, this);\n                            }));\n\n                            return function A() {\n                              return _ref244.apply(this, arguments);\n                            };\n                          }();\n\n                          _context368.next = 7;\n                          return Dh([l(), A()]);\n\n                        case 7:\n                          _ref242 = _context368.sent;\n                          u = _ref242.gatewayInfo;\n                          h = _ref242.proxyInfo;\n                          p = _ref242.url;\n                          d.length && Xi(d).call(d, function (e) {\n                            return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n                          });\n\n                          if (!(!u || !h)) {\n                            _context368.next = 14;\n                            break;\n                          }\n\n                          throw new Ad(ad.UNEXPECTED_ERROR, \"missing gateway or proxy response\").print();\n\n                        case 14:\n                          if (ld(s) && p) {\n                            _t211 = new e_(p).host;\n                            eo(s).call(s, _t211) && (e.proxyServer = _t211, vc.setProxyServer(_t211), wC.setProxyServer(_t211));\n                          }\n\n                          return _context368.abrupt(\"return\", (c = {\n                            gatewayInfo: u,\n                            proxyInfo: iS(h)\n                          }, c));\n\n                        case 16:\n                        case \"end\":\n                          return _context368.stop();\n                      }\n                    }\n                  }, _callee368, this);\n                }));\n\n                return function (_x486, _x487, _x488) {\n                  return _ref241.apply(this, arguments);\n                };\n              }()(e, t, i);\n\n            case 50:\n              _ref240 = _context369.sent;\n              _r98 = _ref240.proxyInfo;\n              _n63 = _ref240.gatewayInfo;\n              o = {\n                gatewayInfo: _n63\n              }, e.turnServer = {\n                mode: \"manual\",\n                servers: Es(_r98).call(_r98, function (t) {\n                  return {\n                    turnServerURL: t.address,\n                    tcpport: \"proxy3\" === e.cloudProxyServer ? void 0 : t.tcpport ? t.tcpport : Oc.tcpport,\n                    udpport: \"proxy4\" === e.cloudProxyServer ? void 0 : t.udpport ? t.udpport : Oc.udpport,\n                    username: t.username || Oc.username,\n                    password: t.password || Oc.password,\n                    forceturn: \"proxy4\" !== e.cloudProxyServer && \"proxy5\" !== e.cloudProxyServer,\n                    security: \"proxy5\" === e.cloudProxyServer\n                  };\n                })\n              };\n\n            case 54:\n              return _context369.abrupt(\"return\", (vc.debug(Xe(n = Xe(s = \"[\".concat(e.clientId, \"] set proxy server: \")).call(s, e.proxyServer, \", mode: \")).call(n, e.cloudProxyServer)), o));\n\n            case 55:\n            case \"end\":\n              return _context369.stop();\n          }\n        }\n      }, _callee369, this);\n    }));\n    return _gS.apply(this, arguments);\n  }\n\n  function _S(_x364, _x365, _x366, _x367) {\n    return _S2.apply(this, arguments);\n  }\n\n  function _S2() {\n    _S2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee371(e, t, i, r) {\n      var n, s, o;\n      return _regeneratorRuntime.wrap(function _callee371$(_context371) {\n        while (1) {\n          switch (_context371.prev = _context371.next) {\n            case 0:\n              s = Bs(n = Fc(\"ACCOUNT_REGISTER\")).call(n, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"));\n              o = [];\n              o = t.proxyServer ? Es(s).call(s, function (e) {\n                var i;\n                return Xe(i = \"https://\".concat(t.proxyServer, \"/ap/?url=\")).call(i, e + \"/api/v1\");\n              }) : Es(s).call(s, function (e) {\n                return \"https://\".concat(e, \"/api/v1\");\n              });\n              _context371.next = 5;\n              return function () {\n                var _ref245 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee370(e, t, i, r, n) {\n                  var s, o, a, c, _e265;\n\n                  return _regeneratorRuntime.wrap(function _callee370$(_context370) {\n                    while (1) {\n                      switch (_context370.prev = _context370.next) {\n                        case 0:\n                          s = La(), o = {\n                            sid: i.sid,\n                            opid: 10,\n                            appid: i.appId,\n                            string_uid: t\n                          };\n                          a = e[0];\n                          _context370.next = 4;\n                          return qA(function () {\n                            return jA(a + \"\".concat(-1 === Os(a).call(a, \"?\") ? \"?\" : \"&\", \"action=stringuid\"), {\n                              data: o,\n                              cancelToken: r,\n                              headers: {\n                                \"X-Packet-Service-Type\": 0,\n                                \"X-Packet-URI\": 72\n                              }\n                            });\n                          }, function (i, r) {\n                            if (0 === i.code) {\n                              var n;\n                              if (i.uid <= 0 || i.uid >= Math.pow(2, 32)) throw vc.error(Xe(n = \"Invalid Uint Uid \".concat(t, \" => \")).call(n, i.uid), i), wC.reqUserAccount(o.sid, {\n                                lts: s,\n                                success: !1,\n                                serverAddr: a,\n                                stringUid: o.string_uid,\n                                uid: i.uid,\n                                errorCode: ad.INVALID_UINT_UID_FROM_STRING_UID,\n                                extend: o\n                              }), new Ad(ad.INVALID_UINT_UID_FROM_STRING_UID);\n                              return wC.reqUserAccount(o.sid, {\n                                lts: s,\n                                success: !0,\n                                serverAddr: a,\n                                stringUid: o.string_uid,\n                                uid: i.uid,\n                                errorCode: null,\n                                extend: o\n                              }), !1;\n                            }\n\n                            var c = Zh(i.code);\n                            return c.retry && (a = e[(r + 1) % e.length]), wC.reqUserAccount(o.sid, {\n                              lts: s,\n                              success: !1,\n                              serverAddr: a,\n                              stringUid: o.string_uid,\n                              uid: i.uid,\n                              errorCode: c.desc,\n                              extend: o\n                            }), c.retry;\n                          }, function (t, i) {\n                            return t.code !== ad.OPERATION_ABORTED && (wC.reqUserAccount(o.sid, {\n                              lts: s,\n                              success: !1,\n                              serverAddr: a,\n                              stringUid: o.string_uid,\n                              uid: null,\n                              errorCode: t.code,\n                              extend: o\n                            }), a = e[(i + 1) % e.length], !0);\n                          }, n);\n\n                        case 4:\n                          c = _context370.sent;\n\n                          if (!(0 !== c.code)) {\n                            _context370.next = 8;\n                            break;\n                          }\n\n                          _e265 = Zh(c.code);\n                          throw new Ad(ad.UNEXPECTED_RESPONSE, _e265.desc);\n\n                        case 8:\n                          return _context370.abrupt(\"return\", c);\n\n                        case 9:\n                        case \"end\":\n                          return _context370.stop();\n                      }\n                    }\n                  }, _callee370, this);\n                }));\n\n                return function (_x489, _x490, _x491, _x492, _x493) {\n                  return _ref245.apply(this, arguments);\n                };\n              }()(o, e, t, i, r);\n\n            case 5:\n              return _context371.abrupt(\"return\", _context371.sent.uid);\n\n            case 6:\n            case \"end\":\n              return _context371.stop();\n          }\n        }\n      }, _callee371, this);\n    }));\n    return _S2.apply(this, arguments);\n  }\n\n  function IS(_x368, _x369, _x370) {\n    return _IS.apply(this, arguments);\n  }\n\n  function _IS() {\n    _IS = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee375(e, t, i) {\n      var r, n, s, o, _r99, _n64, _s49, a, c, d, l, A;\n\n      return _regeneratorRuntime.wrap(function _callee375$(_context375) {\n        while (1) {\n          switch (_context375.prev = _context375.next) {\n            case 0:\n              s = La();\n              o = Es(r = Fc(\"normal\" === e.cloudProxyServer ? \"PROXY_CS\" : \"WEBCS_DOMAIN\")).call(r, function (t) {\n                var i;\n                return e.proxyServer ? Xe(i = \"https://\".concat(e.proxyServer, \"/ap/?url=\")).call(i, t + \"/api/v1\") : \"https://\".concat(t, \"/api/v1\");\n              });\n\n              if (!(\"proxy3\" === e.cloudProxyServer || \"proxy4\" === e.cloudProxyServer || \"proxy5\" === e.cloudProxyServer)) {\n                _context375.next = 12;\n                break;\n              }\n\n              _r99 = Es(o).call(o, function (e) {\n                return {\n                  url: e,\n                  areaCode: u_()\n                };\n              });\n              _n64 = null;\n              _context375.next = 7;\n              return Hh({\n                fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                referenceList: _r99,\n                asyncMapHandler: function asyncMapHandler(r) {\n                  return function (_ref246, i, r, n) {\n                    var e = _ref246.url,\n                        t = _ref246.areaCode;\n                    var s = La(),\n                        o = {\n                      opid: 133,\n                      flag: \"proxy5\" === i.cloudProxyServer ? 4194304 : 1048576,\n                      ts: +new Date(),\n                      key: i.token,\n                      cname: i.cname,\n                      sid: i.sid,\n                      detail: {\n                        6: i.stringUid,\n                        11: t\n                      },\n                      uid: i.uid || 0\n                    };\n                    return qA(\n                    /*#__PURE__*/\n                    _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee372() {\n                      return _regeneratorRuntime.wrap(function _callee372$(_context372) {\n                        while (1) {\n                          switch (_context372.prev = _context372.next) {\n                            case 0:\n                              _context372.next = 2;\n                              return jA(e, {\n                                data: o,\n                                cancelToken: r,\n                                headers: {\n                                  \"X-Packet-Service-Type\": 0,\n                                  \"X-Packet-URI\": 69\n                                }\n                              });\n\n                            case 2:\n                              return _context372.abrupt(\"return\", _context372.sent);\n\n                            case 3:\n                            case \"end\":\n                              return _context372.stop();\n                          }\n                        }\n                      }, _callee372, this);\n                    })), function (t) {\n                      var r;\n                      if (0 === t.code) return wC.joinWebProxyAP(i.sid, {\n                        lts: s,\n                        sucess: 1,\n                        apServerAddr: e,\n                        turnServerAddrList: Es(r = t.addresses).call(r, function (e) {\n                          return e.ip;\n                        }).join(\",\"),\n                        errorCode: null,\n                        eventType: i.cloudProxyServer\n                      }), !1;\n                      var n = Zh(t.code);\n                      throw new Ad(ad.CAN_NOT_GET_GATEWAY_SERVER, n.desc, {\n                        retry: n.retry\n                      });\n                    }, function (t) {\n                      return t.code !== ad.OPERATION_ABORTED && (t.code === ad.CAN_NOT_GET_GATEWAY_SERVER ? (wC.joinWebProxyAP(o.sid, {\n                        lts: s,\n                        sucess: 0,\n                        apServerAddr: e,\n                        turnServerAddrList: null,\n                        errorCode: t.code,\n                        eventType: i.cloudProxyServer\n                      }), vc.warning(Xe(r = Xe(n = Xe(a = \"[\".concat(i.clientId, \"] proxy ap server \")).call(a, e, \" failed, message: \")).call(n, t.message, \", retry: \")).call(r, t.data.retry)), t.data.retry) : (wC.joinWebProxyAP(o.sid, {\n                        lts: s,\n                        sucess: 0,\n                        apServerAddr: e,\n                        turnServerAddrList: null,\n                        errorCode: t.code,\n                        eventType: i.cloudProxyServer\n                      }), !0));\n                      var r, n, a;\n                    }, n);\n                  }(r, e, t, i);\n                },\n                allFailedhandler: function allFailedhandler() {\n                  throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n                }\n              });\n\n            case 7:\n              _n64 = _context375.sent;\n              _s49 = _n64.addresses;\n\n              if (!(!_s49 || 0 === _s49.length)) {\n                _context375.next = 11;\n                break;\n              }\n\n              throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server, empty proxy server list\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER, \"empty proxy server list\");\n\n            case 11:\n              return _context375.abrupt(\"return\", {\n                addresses: Es(_s49).call(_s49, function (e) {\n                  return e.ip;\n                }),\n                serverResponse: {\n                  tcpport: _s49[0].port || 443,\n                  udpport: _s49[0].port || Oc.udpport,\n                  username: Oc.username,\n                  password: Oc.password\n                }\n              });\n\n            case 12:\n              a = null;\n              _context375.next = 15;\n              return Hh({\n                fragementLength: Fc(\"FRAGEMENT_LENGTH\"),\n                referenceList: o,\n                asyncMapHandler: function asyncMapHandler(r) {\n                  return function (e, t, i, r) {\n                    var n = La(),\n                        s = {\n                      command: \"convergeAllocateEdge\",\n                      sid: t.sid,\n                      appId: t.appId,\n                      token: t.token,\n                      uid: t.uid,\n                      cname: t.cname,\n                      ts: Math.floor(La() / 1e3),\n                      version: wc,\n                      seq: 0,\n                      requestId: 1\n                    };\n                    return qA(\n                    /*#__PURE__*/\n                    _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee373() {\n                      return _regeneratorRuntime.wrap(function _callee373$(_context373) {\n                        while (1) {\n                          switch (_context373.prev = _context373.next) {\n                            case 0:\n                              _context373.next = 2;\n                              return jA(e, {\n                                data: {\n                                  service_name: \"webrtc_proxy\",\n                                  json_body: ge(s)\n                                },\n                                cancelToken: i,\n                                headers: {\n                                  \"X-Packet-Service-Type\": 0,\n                                  \"X-Packet-URI\": 61\n                                }\n                              });\n\n                            case 2:\n                              _context373.t0 = _context373.sent;\n                              _context373.t1 = e;\n                              return _context373.abrupt(\"return\", {\n                                res: _context373.t0,\n                                url: _context373.t1\n                              });\n\n                            case 5:\n                            case \"end\":\n                              return _context373.stop();\n                          }\n                        }\n                      }, _callee373, this);\n                    })), function (e) {\n                      if (!e.res.json_body) throw vc.debug(\"[\".concat(t.clientId, \"] Get proxy server failed: no json_body\")), new Ad(ad.UNEXPECTED_RESPONSE, ge(e.res));\n                      var i = JSON.parse(e.res.json_body);\n                      var r, n;\n                      if (200 !== i.code) throw vc.debug(Xe(r = Xe(n = \"[\".concat(t.clientId, \"] Get proxy server failed: response code [\")).call(n, i.code, \"], reason [\")).call(r, i.reason, \"]\")), new Ad(ad.UNEXPECTED_RESPONSE, ge(e.res));\n                      return vc.debug(\"[\".concat(t.clientId, \"] App return server length\"), i.servers.length), !1;\n                    }, function (t) {\n                      return t.code !== ad.OPERATION_ABORTED && (wC.requestProxyAppCenter(s.sid, {\n                        lts: n,\n                        succ: !1,\n                        APAddr: e,\n                        workerManagerList: null,\n                        ec: t.code,\n                        response: t.message\n                      }), !0);\n                    }, r);\n                  }(r, e, t, i);\n                },\n                allFailedhandler: function allFailedhandler() {\n                  throw vc.error(\"[\".concat(e.clientId, \"] can not get proxy server after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n                }\n              });\n\n            case 15:\n              a = _context375.sent;\n              c = JSON.parse(a.res.json_body), d = Es(n = c.servers).call(n, JC);\n\n              if (!(\"443only\" === e.cloudProxyServer)) {\n                _context375.next = 19;\n                break;\n              }\n\n              return _context375.abrupt(\"return\", {\n                addresses: d,\n                serverResponse: {\n                  tcpport: 443,\n                  udpport: Oc.udpport,\n                  username: Oc.username,\n                  password: Oc.password\n                }\n              });\n\n            case 19:\n              wC.requestProxyAppCenter(e.sid, {\n                lts: s,\n                succ: !0,\n                APAddr: a.url,\n                workerManagerList: ge(d),\n                ec: null,\n                response: ge(a.res)\n              }), s = La();\n              l = Es(d).call(d, function (r) {\n                return function (e, t, i, r) {\n                  var n = La();\n                  var s = e;\n                  Ro(e).call(e, \"http\") || (s = \"https://\".concat(e, \":4000/v2/machine\"));\n                  var o = {\n                    command: \"request\",\n                    gatewayType: \"http\",\n                    appId: t.appId,\n                    cname: t.cname,\n                    uid: (t.uid || \"\").toString(),\n                    sdkVersion: \"2.3.1\",\n                    sid: t.sid,\n                    seq: 1,\n                    ts: La(),\n                    requestId: 3,\n                    clientRequest: {\n                      appId: t.appId,\n                      cname: t.cname,\n                      uid: (t.uid || \"\").toString(),\n                      sid: t.sid\n                    }\n                  };\n                  return qA(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee374() {\n                    return _regeneratorRuntime.wrap(function _callee374$(_context374) {\n                      while (1) {\n                        switch (_context374.prev = _context374.next) {\n                          case 0:\n                            _context374.next = 2;\n                            return jA(s, {\n                              data: o,\n                              cancelToken: i\n                            });\n\n                          case 2:\n                            _context374.t0 = _context374.sent;\n                            _context374.t1 = e;\n                            return _context374.abrupt(\"return\", {\n                              res: _context374.t0,\n                              url: _context374.t1\n                            });\n\n                          case 5:\n                          case \"end\":\n                            return _context374.stop();\n                        }\n                      }\n                    }, _callee374, this);\n                  })), function (e) {\n                    if (!e.res.serverResponse) throw new Ad(ad.UNEXPECTED_RESPONSE, \"requeet worker manager server failed: serverResponse is undefined\");\n                    return !1;\n                  }, function (t) {\n                    return t.code !== ad.OPERATION_ABORTED && (wC.requestProxyWorkerManager(o.sid, {\n                      lts: n,\n                      succ: !1,\n                      workerManagerAddr: e,\n                      ec: t.code,\n                      response: t.message\n                    }), !0);\n                  }, r);\n                }(r, e, t, i);\n              });\n              A = null;\n              _context375.prev = 22;\n              _context375.next = 25;\n              return Dh(l);\n\n            case 25:\n              A = _context375.sent;\n              _context375.next = 31;\n              break;\n\n            case 28:\n              _context375.prev = 28;\n              _context375.t0 = _context375[\"catch\"](22);\n              throw vc.error(\"[\".concat(e.clientId, \"] can not get worker manager after trying several times\")), new Ad(ad.CAN_NOT_GET_PROXY_SERVER);\n\n            case 31:\n              return _context375.abrupt(\"return\", (Xi(l).call(l, function (e) {\n                return e.cancel();\n              }), wC.requestProxyWorkerManager(e.sid, {\n                lts: s,\n                succ: !0,\n                workerManagerAddr: A.url,\n                ec: null,\n                response: ge(A.res)\n              }), {\n                addresses: [A.url],\n                serverResponse: A.res.serverResponse\n              }));\n\n            case 32:\n            case \"end\":\n              return _context375.stop();\n          }\n        }\n      }, _callee375, this, [[22, 28]]);\n    }));\n    return _IS.apply(this, arguments);\n  }\n\n  function fS(_x371, _x372, _x373, _x374) {\n    return _fS.apply(this, arguments);\n  }\n\n  function _fS() {\n    _fS = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee376(e, t, i, r) {\n      var n, s, o;\n      return _regeneratorRuntime.wrap(function _callee376$(_context376) {\n        while (1) {\n          switch (_context376.prev = _context376.next) {\n            case 0:\n              o = Es(n = Bs(s = Fc(\"UAP_AP\")).call(s, 0, Fc(\"AJAX_REQUEST_CONCURRENT\"))).call(n, function (e) {\n                var i;\n                return t.proxyServer ? Xe(i = \"https://\".concat(t.proxyServer, \"/ap/?url=\")).call(i, e + \"/api/v1?action=uap\") : \"https://\".concat(e, \"/api/v1?action=uap\");\n              });\n              _context376.next = 3;\n              return dS(o, e, t, i, r);\n\n            case 3:\n              return _context376.abrupt(\"return\", _context376.sent);\n\n            case 4:\n            case \"end\":\n              return _context376.stop();\n          }\n        }\n      }, _callee376, this);\n    }));\n    return _fS.apply(this, arguments);\n  }\n\n  G({\n    target: \"Number\",\n    stat: !0\n  }, {\n    isNaN: function isNaN(e) {\n      return e != e;\n    }\n  });\n  var mS = L.Number.isNaN,\n      CS = KI;\n  G({\n    target: \"Object\",\n    stat: !0,\n    sham: !s\n  }, {\n    create: Kt\n  });\n\n  var SS = L.Object,\n      RS = function RS(e, t) {\n    return SS.create(e, t);\n  };\n\n  G({\n    target: \"Object\",\n    stat: !0\n  }, {\n    setPrototypeOf: si\n  });\n  var TS = L.Object.setPrototypeOf,\n      vS = t(function (e, t) {\n    !function (e) {\n      function t(e) {\n        if (ld(e)) return Es(e).call(e, function (e) {\n          return e;\n        });\n        if (!i(e)) return e;\n        var r = {};\n\n        for (var n in e) {\n          i(e[n]) || ld(e[n]) ? r[n] = t(e[n]) : r[n] = e[n];\n        }\n\n        return r;\n      }\n\n      function i(e) {\n        return !(\"object\" != typeof e || ld(e) || !e);\n      }\n\n      function r() {\n        var e = navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i);\n        return e && e[0] ? Number(e[0].split(\"/\")[1]) : null;\n      }\n\n      function n(e) {\n        return !!window.RTCStatsReport && e.getStats() instanceof As;\n      }\n\n      var s = function () {\n        function e(e) {\n          this.input = [], this.size = e;\n        }\n\n        return e.prototype.add = function (e) {\n          var t;\n          this.input.push(e), this.input.length > this.size && Ss(t = this.input).call(t, 0, 1);\n        }, e.prototype.diffMean = function () {\n          return 0 === this.input.length ? 0 : (this.input[this.input.length - 1] - this.input[0]) / this.input.length;\n        }, e;\n      }(),\n          _o23 = function o(e, t) {\n        return (_o23 = TS || {\n          __proto__: []\n        } instanceof Array && function (e, t) {\n          e.__proto__ = t;\n        } || function (e, t) {\n          for (var i in t) {\n            t.hasOwnProperty(i) && (e[i] = t[i]);\n          }\n        })(e, t);\n      };\n      /*! *****************************************************************************\n      \t    Copyright (c) Microsoft Corporation. All rights reserved.\n      \t    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\n      \t    this file except in compliance with the License. You may obtain a copy of the\n      \t    License at http://www.apache.org/licenses/LICENSE-2.0\n      \t       THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n      \t    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\n      \t    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\n      \t    MERCHANTABLITY OR NON-INFRINGEMENT.\n      \t       See the Apache Version 2.0 License for specific language governing permissions\n      \t    and limitations under the License.\n      \t    ***************************************************************************** */\n\n\n      function a(e, t) {\n        function i() {\n          this.constructor = e;\n        }\n\n        _o23(e, t), e.prototype = null === t ? RS(t) : (i.prototype = t.prototype, new i());\n      }\n\n      var _c16 = function c() {\n        return (_c16 = er || function (e) {\n          for (var t, i = 1, r = arguments.length; i < r; i++) {\n            for (var n in t = arguments[i]) {\n              Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n            }\n          }\n\n          return e;\n        }).apply(this, arguments);\n      };\n\n      function d(e, t, i, r) {\n        return new (i || (i = As))(function (n, s) {\n          function o(e) {\n            try {\n              c(r.next(e));\n            } catch (e) {\n              s(e);\n            }\n          }\n\n          function a(e) {\n            try {\n              c(r.throw(e));\n            } catch (e) {\n              s(e);\n            }\n          }\n\n          function c(e) {\n            e.done ? n(e.value) : new i(function (t) {\n              t(e.value);\n            }).then(o, a);\n          }\n\n          c((r = r.apply(e, t || [])).next());\n        });\n      }\n\n      function l(e, t) {\n        var i,\n            r,\n            n,\n            s,\n            o = {\n          label: 0,\n          sent: function sent() {\n            if (1 & n[0]) throw n[1];\n            return n[1];\n          },\n          trys: [],\n          ops: []\n        };\n        return s = {\n          next: a(0),\n          throw: a(1),\n          return: a(2)\n        }, \"function\" == typeof im && (s[CS] = function () {\n          return this;\n        }), s;\n\n        function a(e) {\n          return function (t) {\n            return c([e, t]);\n          };\n        }\n\n        function c(s) {\n          if (i) throw new TypeError(\"Generator is already executing.\");\n\n          for (; o;) {\n            try {\n              if (i = 1, r && (n = 2 & s[0] ? r.return : s[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, s[1])).done) return n;\n\n              switch (r = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n                case 0:\n                case 1:\n                  n = s;\n                  break;\n\n                case 4:\n                  return o.label++, {\n                    value: s[1],\n                    done: !1\n                  };\n\n                case 5:\n                  o.label++, r = s[1], s = [0];\n                  continue;\n\n                case 7:\n                  s = o.ops.pop(), o.trys.pop();\n                  continue;\n\n                default:\n                  if (!((n = (n = o.trys).length > 0 && n[n.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                    o = 0;\n                    continue;\n                  }\n\n                  if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                    o.label = s[1];\n                    break;\n                  }\n\n                  if (6 === s[0] && o.label < n[1]) {\n                    o.label = n[1], n = s;\n                    break;\n                  }\n\n                  if (n && o.label < n[2]) {\n                    o.label = n[2], o.ops.push(s);\n                    break;\n                  }\n\n                  n[2] && o.ops.pop(), o.trys.pop();\n                  continue;\n              }\n\n              s = t.call(e, o);\n            } catch (e) {\n              s = [6, e], r = 0;\n            } finally {\n              i = n = 0;\n            }\n          }\n\n          if (5 & s[0]) throw s[1];\n          return {\n            value: s[0] ? s[1] : void 0,\n            done: !0\n          };\n        }\n      }\n\n      var A,\n          u = {\n        timestamp: 0,\n        bitrate: {\n          actualEncoded: 0,\n          transmit: 0\n        },\n        sendPacketLossRate: 0,\n        recvPacketLossRate: 0,\n        videoRecv: [],\n        videoSend: [],\n        audioRecv: [],\n        audioSend: []\n      },\n          h = {\n        firsCount: 0,\n        nacksCount: 0,\n        plisCount: 0,\n        framesDecodeCount: 0,\n        framesDecodeInterval: 0,\n        framesDecodeFreezeTime: 0,\n        decodeFrameRate: 0,\n        bytes: 0,\n        packetsLost: 0,\n        packetLostRate: 0,\n        packets: 0,\n        ssrc: 0\n      },\n          p = {\n        firsCount: 0,\n        nacksCount: 0,\n        plisCount: 0,\n        frameCount: 0,\n        bytes: 0,\n        packets: 0,\n        packetsLost: 0,\n        packetLostRate: 0,\n        ssrc: 0,\n        rttMs: 0\n      },\n          E = {\n        bytes: 0,\n        packets: 0,\n        packetsLost: 0,\n        packetLostRate: 0,\n        ssrc: 0,\n        rttMs: 0\n      },\n          g = {\n        jitterBufferMs: 0,\n        jitterMs: 0,\n        bytes: 0,\n        packetsLost: 0,\n        packetLostRate: 0,\n        packets: 0,\n        ssrc: 0,\n        receivedFrames: 0,\n        droppedFrames: 0\n      },\n          _ = function () {\n        function e(e, i) {\n          var r = this;\n          this.videoIsReady = !1, this.stats = t(u), this.isFirstVideoReceived = !1, this.isFirstVideoDecoded = !1, this.isFirstAudioReceived = !1, this.isFirstAudioDecoded = !1, this.lossRateWindowStats = [], this.pc = e, this.options = i, this.intervalTimer = window.setInterval(function () {\n            return d(r, void 0, void 0, function () {\n              return l(this, function (e) {\n                return this.updateStats(), [2];\n              });\n            });\n          }, this.options.updateInterval);\n        }\n\n        return e.prototype.getStats = function () {\n          return this.stats;\n        }, e.prototype.setVideoIsReady = function (e) {\n          this.videoIsReady = e;\n        }, e.prototype.setIsFirstAudioDecoded = function (e) {\n          this.isFirstAudioDecoded = e;\n        }, e.prototype.destroy = function () {\n          window.clearInterval(this.intervalTimer), this.pc = void 0;\n        }, e.prototype.calcLossRate = function (e) {\n          var t,\n              i = this;\n          this.lossRateWindowStats.push(e), this.lossRateWindowStats.length > this.options.lossRateInterval && Ss(t = this.lossRateWindowStats).call(t, 0, 1);\n\n          for (var r = this.lossRateWindowStats.length, n = 0, s = 0, o = 0, a = 0, c = function c(t) {\n            var c;\n            Xi(c = e[t]).call(c, function (e, c) {\n              if (i.lossRateWindowStats[r - 1][t][c] && i.lossRateWindowStats[0][t][c]) {\n                var d = i.lossRateWindowStats[r - 1][t][c].packets - i.lossRateWindowStats[0][t][c].packets,\n                    l = i.lossRateWindowStats[r - 1][t][c].packetsLost - i.lossRateWindowStats[0][t][c].packetsLost;\n                \"videoSend\" === t || \"audioSend\" === t ? (n += d, o += l) : (s += d, a += l), mS(d) || mS(d) ? e.packetLostRate = 0 : e.packetLostRate = d <= 0 || l <= 0 ? 0 : l / (d + l);\n              }\n            });\n          }, d = 0, l = [\"videoSend\", \"audioSend\", \"videoRecv\", \"audioRecv\"]; d < l.length; d++) {\n            c(l[d]);\n          }\n\n          e.sendPacketLossRate = n <= 0 || o <= 0 ? 0 : o / (n + o), e.recvPacketLossRate = s <= 0 || a <= 0 ? 0 : a / (s + a);\n        }, e;\n      }(),\n          I = function (e) {\n        function i() {\n          var t = null !== e && e.apply(this, arguments) || this;\n          return t._stats = u, t.lastDecodeVideoReceiverStats = new Li(), t;\n        }\n\n        return a(i, e), i.prototype.updateStats = function () {\n          return d(this, void 0, void 0, function () {\n            var e, i, r, n;\n            return l(this, function (s) {\n              switch (s.label) {\n                case 0:\n                  return [4, this._getStats()];\n\n                case 1:\n                  return e = s.sent(), i = this.statsResponsesToObjects(e), this._stats = t(u), r = Fr(i).call(i, function (e) {\n                    return \"ssrc\" === e.type;\n                  }), this.processSSRCStats(r), (n = Vs(i).call(i, function (e) {\n                    return \"VideoBwe\" === e.type;\n                  })) && this.processBandwidthStats(n), this._stats.timestamp = La(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n              }\n            });\n          });\n        }, i.prototype.processBandwidthStats = function (e) {\n          this._stats.bitrate = {\n            actualEncoded: Number(e.googActualEncBitrate),\n            targetEncoded: Number(e.googTargetEncBitrate),\n            retransmit: Number(e.googRetransmitBitrate),\n            transmit: Number(e.googTransmitBitrate)\n          }, this._stats.sendBandwidth = Number(e.googAvailableSendBandwidth);\n        }, i.prototype.processSSRCStats = function (e) {\n          var i = this;\n          Xi(e).call(e, function (e) {\n            var r,\n                n = eo(r = e.id).call(r, \"send\");\n\n            switch (e.mediaType + \"_\" + (n ? \"send\" : \"recv\")) {\n              case \"video_send\":\n                var s = t(p);\n                s.codec = e.googCodecName, s.adaptionChangeReason = \"none\", e.googCpuLimitedResolution && (s.adaptionChangeReason = \"cpu\"), e.googBandwidthLimitedResolution && (s.adaptionChangeReason = \"bandwidth\"), s.avgEncodeMs = Number(e.googAvgEncodeMs), s.inputFrame = {\n                  width: Number(e.googFrameWidthInput) || Number(e.googFrameWidthSent),\n                  height: Number(e.googFrameHeightInput) || Number(e.googFrameHeightSent),\n                  frameRate: Number(e.googFrameRateInput)\n                }, s.sentFrame = {\n                  width: Number(e.googFrameWidthSent),\n                  height: Number(e.googFrameHeightSent),\n                  frameRate: Number(e.googFrameRateInput)\n                }, s.firsCount = Number(e.googFirReceived), s.nacksCount = Number(e.googNacksReceived), s.plisCount = Number(e.googPlisReceived), s.frameCount = Number(e.framesEncoded), s.bytes = Number(e.bytesSent), s.packets = Number(e.packetsSent), s.packetsLost = Number(e.packetsLost), s.ssrc = Number(e.ssrc), s.rttMs = Number(e.googRtt || 0), i._stats.videoSend.push(s), i._stats.rtt = s.rttMs;\n                break;\n\n              case \"video_recv\":\n                var o = t(h),\n                    a = i.lastDecodeVideoReceiverStats.get(Number(e.ssrc));\n\n                if (o.codec = e.googCodecName, o.targetDelayMs = Number(e.googTargetDelayMs), o.renderDelayMs = Number(e.googRenderDelayMs), o.currentDelayMs = Number(e.googCurrentDelayMs), o.minPlayoutDelayMs = Number(e.googMinPlayoutDelayMs), o.decodeMs = Number(e.googDecodeMs), o.maxDecodeMs = Number(e.googMaxDecodeMs), o.receivedFrame = {\n                  width: Number(e.googFrameWidthReceived),\n                  height: Number(e.googFrameHeightReceived),\n                  frameRate: Number(e.googFrameRateReceived)\n                }, o.decodedFrame = {\n                  width: Number(e.googFrameWidthReceived),\n                  height: Number(e.googFrameHeightReceived),\n                  frameRate: Number(e.googFrameRateDecoded)\n                }, o.outputFrame = {\n                  width: Number(e.googFrameWidthReceived),\n                  height: Number(e.googFrameHeightReceived),\n                  frameRate: Number(e.googFrameRateOutput)\n                }, o.jitterBufferMs = Number(e.googJitterBufferMs), o.firsCount = Number(e.googFirsSent), o.nacksCount = Number(e.googNacksSent), o.plisCount = Number(e.googPlisSent), o.framesDecodeCount = Number(e.framesDecoded), o.bytes = Number(e.bytesReceived), o.packets = Number(e.packetsReceived), o.packetsLost = Number(e.packetsLost), o.ssrc = Number(e.ssrc), o.packets > 0 && !i.isFirstVideoReceived && (i.onFirstVideoReceived && i.onFirstVideoReceived(), i.isFirstVideoReceived = !0), o.framesDecodeCount > 0 && !i.isFirstVideoDecoded && (i.onFirstVideoDecoded && i.onFirstVideoDecoded(o.decodedFrame.width, o.decodedFrame.height), i.isFirstVideoDecoded = !0), a) {\n                  var d = a.stats,\n                      l = La() - a.lts;\n                  o.framesDecodeFreezeTime = d.framesDecodeFreezeTime, o.framesDecodeInterval = d.framesDecodeInterval, o.framesDecodeCount > d.framesDecodeCount && i.isFirstVideoDecoded ? (a.lts = La(), o.framesDecodeInterval = l, o.framesDecodeInterval >= i.options.freezeRateLimit && (i.videoIsReady ? o.framesDecodeFreezeTime += o.framesDecodeInterval : i.setVideoIsReady(!0))) : o.framesDecodeCount < a.stats.framesDecodeCount && (o.framesDecodeInterval = 0);\n                }\n\n                i.lastDecodeVideoReceiverStats.set(o.ssrc, {\n                  stats: _c16({}, o),\n                  lts: La()\n                }), i._stats.videoRecv.push(o);\n                break;\n\n              case \"audio_recv\":\n                var A = t(g);\n                A.codec = e.googCodecName, A.outputLevel = Math.abs(Number(e.audioOutputLevel)) / 32767, A.decodingCNG = Number(e.googDecodingCNG), A.decodingCTN = Number(e.googDecodingCTN), A.decodingCTSG = Number(e.googDecodingCTSG), A.decodingNormal = Number(e.googDecodingNormal), A.decodingPLC = Number(e.googDecodingPLC), A.decodingPLCCNG = Number(e.googDecodingPLCCNG), A.expandRate = Number(e.googExpandRate), A.accelerateRate = Number(e.googAccelerateRate), A.preemptiveExpandRate = Number(e.googPreemptiveExpandRate), A.secondaryDecodedRate = Number(e.googSecondaryDecodedRate), A.speechExpandRate = Number(e.googSpeechExpandRate), A.preferredJitterBufferMs = Number(e.googPreferredJitterBufferMs), A.jitterBufferMs = Number(e.googJitterBufferMs), A.jitterMs = Number(e.googJitterReceived), A.bytes = Number(e.bytesReceived), A.packets = Number(e.packetsReceived), A.packetsLost = Number(e.packetsLost), A.ssrc = Number(e.ssrc), A.receivedFrames = Number(e.googDecodingCTN) || Number(e.packetsReceived), A.droppedFrames = Number(e.googDecodingPLC) + Number(e.googDecodingPLCCNG) || Number(e.packetsLost), A.receivedFrames > 0 && !i.isFirstAudioReceived && (i.onFirstAudioReceived && i.onFirstAudioReceived(), i.isFirstAudioReceived = !0), A.decodingNormal > 0 && !i.isFirstAudioDecoded && (i.onFirstAudioDecoded && i.onFirstAudioDecoded(), i.isFirstAudioDecoded = !0), i._stats.audioRecv.push(A);\n                break;\n\n              case \"audio_send\":\n                var u = t(E);\n                u.codec = e.googCodecName, u.inputLevel = Math.abs(Number(e.audioInputLevel)) / 32767, u.aecReturnLoss = Number(e.googEchoCancellationReturnLoss || 0), u.aecReturnLossEnhancement = Number(e.googEchoCancellationReturnLossEnhancement || 0), u.residualEchoLikelihood = Number(e.googResidualEchoLikelihood || 0), u.residualEchoLikelihoodRecentMax = Number(e.googResidualEchoLikelihoodRecentMax || 0), u.bytes = Number(e.bytesSent), u.packets = Number(e.packetsSent), u.packetsLost = Number(e.packetsLost), u.ssrc = Number(e.ssrc), u.rttMs = Number(e.googRtt || 0), i._stats.rtt = u.rttMs, i._stats.audioSend.push(u);\n            }\n          });\n        }, i.prototype._getStats = function () {\n          var e = this;\n          return new As(function (t, i) {\n            e.pc.getStats(t, i);\n          });\n        }, i.prototype.statsResponsesToObjects = function (e) {\n          var t = [],\n              i = e.result();\n          return Xi(i).call(i, function (e) {\n            var i,\n                r = {\n              id: e.id,\n              timestamp: e.timestamp.valueOf().toString(),\n              type: e.type\n            };\n            Xi(i = e.names()).call(i, function (t) {\n              r[t] = e.stat(t);\n            }), t.push(r);\n          }), t;\n        }, i;\n      }(_);\n\n      !function (e) {\n        e.CERTIFICATE = \"certificate\", e.CODEC = \"codec\", e.CANDIDATE_PAIR = \"candidate-pair\", e.LOCAL_CANDIDATE = \"local-candidate\", e.REMOTE_CANDIDATE = \"remote-candidate\", e.INBOUND = \"inbound-rtp\", e.TRACK = \"track\", e.OUTBOUND = \"outbound-rtp\", e.PC = \"peer-connection\", e.REMOTE_INBOUND = \"remote-inbound-rtp\", e.REMOTE_OUTBOUND = \"remote-outbound-rtp\", e.TRANSPORT = \"transport\", e.CSRC = \"csrc\", e.DATA_CHANNEL = \"data-channel\", e.STREAM = \"stream\", e.SENDER = \"sender\", e.RECEIVER = \"receiver\";\n      }(A || (A = {}));\n\n      var f = function (e) {\n        function i() {\n          var t = null !== e && e.apply(this, arguments) || this;\n          return t._stats = u, t.lastDecodeVideoReceiverStats = new Li(), t.lastVideoFramesRecv = new Li(), t.lastVideoFramesSent = new Li(), t.lastVideoFramesDecode = new Li(), t.lastVideoJBDelay = new Li(), t.lastAudioJBDelay = new Li(), t.mediaBytesSent = new Li(), t.mediaBytesRetransmit = new Li(), t.mediaBytesTargetEncode = new Li(), t.lastEncoderMs = new Li(), t;\n        }\n\n        return a(i, e), i.prototype.updateStats = function () {\n          return d(this, void 0, void 0, function () {\n            var e,\n                i = this;\n            return l(this, function (r) {\n              var n;\n\n              switch (r.label) {\n                case 0:\n                  return e = this, [4, this.pc.getStats()];\n\n                case 1:\n                  return e.report = r.sent(), this._stats = t(u), Xi(n = this.report).call(n, function (e) {\n                    switch (e.type) {\n                      case A.OUTBOUND:\n                        \"audio\" === e.mediaType ? i.processAudioOutboundStats(e) : \"video\" === e.mediaType && i.processVideoOutboundStats(e);\n                        break;\n\n                      case A.INBOUND:\n                        \"audio\" === e.mediaType ? i.processAudioInboundStats(e) : \"video\" === e.mediaType && i.processVideoInboundStats(e);\n                        break;\n\n                      case A.TRANSPORT:\n                        var t = i.report.get(e.selectedCandidatePairId);\n                        t && i.processCandidatePairStats(t);\n                        break;\n\n                      case A.CANDIDATE_PAIR:\n                        e.selected && i.processCandidatePairStats(e);\n                    }\n                  }), this.updateSendBitrate(), this._stats.timestamp = La(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n              }\n            });\n          });\n        }, i.prototype.processCandidatePairStats = function (e) {\n          var t, i;\n          this._stats.sendBandwidth = e.availableOutgoingBitrate || 0, e.currentRoundTripTime && (this._stats.rtt = 1e3 * e.currentRoundTripTime), Xi(t = this._stats.videoSend).call(t, function (t) {\n            !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n          }), Xi(i = this._stats.audioSend).call(i, function (t) {\n            !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n          });\n        }, i.prototype.processAudioInboundStats = function (e) {\n          var i,\n              r = Vs(i = this._stats.audioRecv).call(i, function (t) {\n            return t.ssrc === e.ssrc;\n          });\n          r || (r = t(g), this._stats.audioRecv.push(r)), r.ssrc = e.ssrc, r.packets = e.packetsReceived, r.packetsLost = e.packetsLost, r.bytes = e.bytesReceived, r.jitterMs = 1e3 * e.jitter, e.trackId && this.processAudioTrackReceiverStats(e.trackId, r), e.codecId && (r.codec = this.getCodecFromCodecStats(e.codecId)), r.receivedFrames || (r.receivedFrames = e.packetsReceived), r.droppedFrames || (r.droppedFrames = e.packetsLost), r.receivedFrames > 0 && !this.isFirstAudioReceived && (this.onFirstAudioReceived && this.onFirstAudioReceived(), this.isFirstAudioReceived = !0), r.outputLevel && r.outputLevel > 0 && !this.isFirstAudioDecoded && (this.onFirstAudioDecoded && this.onFirstAudioDecoded(), this.isFirstAudioDecoded = !0);\n        }, i.prototype.processVideoInboundStats = function (e) {\n          var i,\n              r = Vs(i = this._stats.videoRecv).call(i, function (t) {\n            return t.ssrc === e.ssrc;\n          });\n          r || (r = t(h), this._stats.videoRecv.push(r)), r.ssrc = e.ssrc, r.packets = e.packetsReceived, r.packetsLost = e.packetsLost, r.bytes = e.bytesReceived, r.firsCount = e.firCount, r.nacksCount = e.nackCount, r.plisCount = e.pliCount, r.framesDecodeCount = e.framesDecoded;\n          var n = this.lastDecodeVideoReceiverStats.get(r.ssrc),\n              s = this.lastVideoFramesDecode.get(r.ssrc),\n              o = La();\n\n          if (r.framesDecodeCount > 0 && !this.isFirstVideoDecoded) {\n            var a = r.decodedFrame ? r.decodedFrame.width : 0,\n                d = r.decodedFrame ? r.decodedFrame.height : 0;\n            this.onFirstVideoDecoded && this.onFirstVideoDecoded(a, d), this.isFirstVideoDecoded = !0;\n          }\n\n          if (n) {\n            var l = n.stats,\n                A = o - n.lts;\n            r.framesDecodeFreezeTime = l.framesDecodeFreezeTime, r.framesDecodeInterval = l.framesDecodeInterval, r.framesDecodeCount > l.framesDecodeCount && this.isFirstVideoDecoded ? (n.lts = La(), r.framesDecodeInterval = A, r.framesDecodeInterval >= this.options.freezeRateLimit && (this.videoIsReady ? r.framesDecodeFreezeTime += r.framesDecodeInterval : this.setVideoIsReady(!0))) : r.framesDecodeCount < l.framesDecodeCount && (r.framesDecodeInterval = 0);\n          }\n\n          s && o - s.lts >= 800 ? (r.decodeFrameRate = Math.round((r.framesDecodeCount - s.count) / ((o - s.lts) / 1e3)), this.lastVideoFramesDecode.set(r.ssrc, {\n            count: r.framesDecodeCount,\n            lts: o,\n            rate: r.decodeFrameRate\n          })) : s ? r.decodeFrameRate = s.rate : this.lastVideoFramesDecode.set(r.ssrc, {\n            count: r.framesDecodeCount,\n            lts: o,\n            rate: 0\n          }), e.totalDecodeTime && (r.decodeMs = 1e3 * e.totalDecodeTime), e.trackId && this.processVideoTrackReceiverStats(e.trackId, r), e.codecId && (r.codec = this.getCodecFromCodecStats(e.codecId)), e.framerateMean && (r.framesRateFirefox = e.framerateMean), r.packets > 0 && !this.isFirstVideoReceived && (this.onFirstVideoReceived && this.onFirstVideoReceived(), this.isFirstVideoReceived = !0), this.lastDecodeVideoReceiverStats.set(r.ssrc, {\n            stats: _c16({}, r),\n            lts: n ? n.lts : La()\n          });\n        }, i.prototype.processVideoOutboundStats = function (e) {\n          var i,\n              r = Vs(i = this._stats.videoSend).call(i, function (t) {\n            return t.ssrc === e.ssrc;\n          });\n          r || (r = t(p), this._stats.videoSend.push(r));\n          var n = this.mediaBytesSent.get(e.ssrc);\n\n          if (n ? n.add(e.bytesSent) : ((a = new s(10)).add(e.bytesSent), this.mediaBytesSent.set(e.ssrc, a)), void 0 !== e.retransmittedBytesSent) {\n            var o = this.mediaBytesRetransmit.get(e.ssrc);\n            o ? o.add(e.retransmittedBytesSent) : ((a = new s(10)).add(e.retransmittedBytesSent), this.mediaBytesRetransmit.set(e.ssrc, a));\n          }\n\n          if (e.totalEncodedBytesTarget) {\n            var a,\n                c = this.mediaBytesTargetEncode.get(e.ssrc);\n            c ? c.add(e.totalEncodedBytesTarget) : ((a = new s(10)).add(e.totalEncodedBytesTarget), this.mediaBytesTargetEncode.set(e.ssrc, a));\n          }\n\n          if (r.ssrc = e.ssrc, r.bytes = e.bytesSent, r.packets = e.packetsSent, r.firsCount = e.firCount, r.nacksCount = e.nackCount, r.plisCount = e.pliCount, r.frameCount = e.framesEncoded, r.adaptionChangeReason = e.qualityLimitationReason, e.totalEncodeTime && e.framesEncoded) {\n            var d = this.lastEncoderMs.get(e.ssrc);\n            if (!d || d.lastFrameCount > e.framesEncoded) r.avgEncodeMs = 1e3 * e.totalEncodeTime / e.framesEncoded;else {\n              var l = e.framesEncoded - d.lastFrameCount,\n                  u = e.totalEncodeTime - d.lastEncoderTime;\n              r.avgEncodeMs = 1e3 * u / l;\n            }\n            this.lastEncoderMs.set(e.ssrc, {\n              lastFrameCount: e.framesEncoded,\n              lastEncoderTime: e.totalEncodeTime,\n              lts: La()\n            });\n          }\n\n          if (e.codecId && (r.codec = this.getCodecFromCodecStats(e.codecId)), e.mediaSourceId && this.processVideoMediaSource(e.mediaSourceId, r), e.trackId && this.processVideoTrackSenderStats(e.trackId, r), e.remoteId) this.processRemoteInboundStats(e.remoteId, r);else {\n            var h = this.findRemoteStatsId(e.ssrc, A.REMOTE_INBOUND);\n            h && this.processRemoteInboundStats(h, r);\n          }\n        }, i.prototype.processAudioOutboundStats = function (e) {\n          var i,\n              r = Vs(i = this._stats.audioSend).call(i, function (t) {\n            return t.ssrc === e.ssrc;\n          });\n          if (r || (r = t(E), this._stats.audioSend.push(r)), r.ssrc = e.ssrc, r.packets = e.packetsSent, r.bytes = e.bytesSent, e.mediaSourceId && this.processAudioMediaSource(e.mediaSourceId, r), e.codecId && (r.codec = this.getCodecFromCodecStats(e.codecId)), e.trackId && this.processAudioTrackSenderStats(e.trackId, r), e.remoteId) this.processRemoteInboundStats(e.remoteId, r);else {\n            var n = this.findRemoteStatsId(e.ssrc, A.REMOTE_INBOUND);\n            n && this.processRemoteInboundStats(n, r);\n          }\n        }, i.prototype.findRemoteStatsId = function (e, t) {\n          var i,\n              r,\n              n = Vs(i = BA(Xh(r = this.report).call(r))).call(i, function (i) {\n            return i.type === t && i.ssrc === e;\n          });\n          return n ? n.id : null;\n        }, i.prototype.processVideoMediaSource = function (e, t) {\n          var i = this.report.get(e);\n          i && i.width && i.height && i.framesPerSecond && (t.inputFrame = {\n            width: i.width,\n            height: i.height,\n            frameRate: i.framesPerSecond\n          });\n        }, i.prototype.processAudioMediaSource = function (e, t) {\n          var i = this.report.get(e);\n          i && (t.inputLevel = i.audioLevel);\n        }, i.prototype.processVideoTrackSenderStats = function (e, t) {\n          var i = this.report.get(e);\n\n          if (i) {\n            var r = 0,\n                n = La(),\n                s = this.lastVideoFramesSent.get(t.ssrc);\n            s && n - s.lts >= 800 ? (r = Math.round((i.framesSent - s.count) / ((n - s.lts) / 1e3)), this.lastVideoFramesSent.set(t.ssrc, {\n              count: i.framesSent,\n              lts: n,\n              rate: r\n            })) : s ? r = s.rate : this.lastVideoFramesSent.set(t.ssrc, {\n              count: i.framesSent,\n              lts: n,\n              rate: 0\n            }), t.sentFrame = {\n              width: i.frameWidth,\n              height: i.frameHeight,\n              frameRate: r\n            };\n          }\n        }, i.prototype.processVideoTrackReceiverStats = function (e, t) {\n          var i = this.report.get(e);\n\n          if (i) {\n            var r = this.lastVideoFramesRecv.get(t.ssrc),\n                n = La();\n            t.framesReceivedCount = i.framesReceived;\n            var s = 0;\n\n            if (r && n - r.lts >= 800 ? (s = Math.round((i.framesReceived - r.count) / ((n - r.lts) / 1e3)), this.lastVideoFramesRecv.set(t.ssrc, {\n              count: i.framesReceived,\n              lts: n,\n              rate: s\n            })) : r ? s = r.rate : this.lastVideoFramesRecv.set(t.ssrc, {\n              count: i.framesReceived,\n              lts: n,\n              rate: 0\n            }), t.receivedFrame = {\n              width: i.frameWidth || 0,\n              height: i.frameHeight || 0,\n              frameRate: s || 0\n            }, t.decodedFrame = {\n              width: i.frameWidth || 0,\n              height: i.frameHeight || 0,\n              frameRate: t.decodeFrameRate || 0\n            }, t.outputFrame = {\n              width: i.frameWidth || 0,\n              height: i.frameHeight || 0,\n              frameRate: t.decodeFrameRate || 0\n            }, i.jitterBufferDelay && i.jitterBufferEmittedCount) {\n              var o = this.lastVideoJBDelay.get(t.ssrc);\n              this.lastVideoJBDelay.set(t.ssrc, {\n                jitterBufferDelay: i.jitterBufferDelay,\n                jitterBufferEmittedCount: i.jitterBufferEmittedCount\n              }), o || (o = {\n                jitterBufferDelay: 0,\n                jitterBufferEmittedCount: 0\n              });\n              var a = 1e3 * (i.jitterBufferDelay - o.jitterBufferDelay) / (i.jitterBufferEmittedCount - o.jitterBufferEmittedCount);\n              t.jitterBufferMs = a, t.currentDelayMs = Math.round(a);\n            }\n          }\n        }, i.prototype.processAudioTrackSenderStats = function (e, t) {\n          var i = this.report.get(e);\n          i && (t.aecReturnLoss = i.echoReturnLoss || 0, t.aecReturnLossEnhancement = i.echoReturnLossEnhancement || 0);\n        }, i.prototype.processAudioTrackReceiverStats = function (e, t) {\n          var i = this.report.get(e);\n\n          if (i) {\n            if (i.removedSamplesForAcceleration && i.totalSamplesReceived && (t.accelerateRate = i.removedSamplesForAcceleration / i.totalSamplesReceived), i.jitterBufferDelay && i.jitterBufferEmittedCount) {\n              var r = this.lastAudioJBDelay.get(t.ssrc);\n              this.lastAudioJBDelay.set(t.ssrc, {\n                jitterBufferDelay: i.jitterBufferDelay,\n                jitterBufferEmittedCount: i.jitterBufferEmittedCount\n              }), r || (r = {\n                jitterBufferDelay: 0,\n                jitterBufferEmittedCount: 0\n              });\n              var n = 1e3 * (i.jitterBufferDelay - r.jitterBufferDelay) / (i.jitterBufferEmittedCount - r.jitterBufferEmittedCount);\n              t.jitterBufferMs = Math.round(n);\n            }\n\n            t.outputLevel = i.audioLevel;\n            var s = 1920;\n            i.totalSamplesDuration && i.totalSamplesReceived && (s = i.totalSamplesReceived / i.totalSamplesDuration / 50, t.receivedFrames = Math.round(i.totalSamplesReceived / s)), i.concealedSamples && (t.droppedFrames = Math.round(i.concealedSamples / s));\n          }\n        }, i.prototype.processRemoteInboundStats = function (e, t) {\n          var i = this.report.get(e);\n          i && (t.packetsLost = i.packetsLost, i.roundTripTime && (t.rttMs = 1e3 * i.roundTripTime));\n        }, i.prototype.getCodecFromCodecStats = function (e) {\n          var t = this.report.get(e);\n          if (!t) return \"\";\n          var i = t.mimeType.match(/\\/(.*)$/);\n          return i && i[1] ? i[1] : \"\";\n        }, i.prototype.updateSendBitrate = function () {\n          var e,\n              t,\n              i,\n              r = 0,\n              n = null,\n              s = null;\n          Xi(e = this.mediaBytesSent).call(e, function (e) {\n            r += e.diffMean();\n          }), Xi(t = this.mediaBytesRetransmit).call(t, function (e) {\n            n = null === n ? e.diffMean() : n + e.diffMean();\n          }), Xi(i = this.mediaBytesTargetEncode).call(i, function (e) {\n            s = null === s ? e.diffMean() : s + e.diffMean();\n          });\n          var o = null !== n ? r - n : r;\n          this._stats.bitrate = {\n            actualEncoded: 8 * o / (this.options.updateInterval / 1e3),\n            transmit: 8 * r / (this.options.updateInterval / 1e3)\n          }, null !== n && (this._stats.bitrate.retransmit = 8 * n / (this.options.updateInterval / 1e3)), null !== s && (this._stats.bitrate.targetEncoded = 8 * s / (this.options.updateInterval / 1e3));\n        }, i;\n      }(_),\n          m = function (e) {\n        function t() {\n          return null !== e && e.apply(this, arguments) || this;\n        }\n\n        return a(t, e), t.prototype.updateStats = function () {\n          return As.resolve();\n        }, t;\n      }(_);\n\n      function C(e, t, i, s) {\n        void 0 === t && (t = 250), void 0 === i && (i = 8), void 0 === s && (s = 500);\n        var o = r();\n        return o ? o < 76 ? new I(e, {\n          updateInterval: t,\n          lossRateInterval: i,\n          freezeRateLimit: s\n        }) : new f(e, {\n          updateInterval: t,\n          lossRateInterval: i,\n          freezeRateLimit: s\n        }) : n(e) ? new f(e, {\n          updateInterval: t,\n          lossRateInterval: i,\n          freezeRateLimit: s\n        }) : new m(e, {\n          updateInterval: t,\n          lossRateInterval: i,\n          freezeRateLimit: s\n        });\n      }\n\n      e.createWebRTCStatsFilter = C, e.AgoraWebRTCStatsFilter = _, dr(e, \"__esModule\", {\n        value: !0\n      });\n    }(t);\n  });\n\n  var yS =\n  /*#__PURE__*/\n  function () {\n    function yS(e) {\n      _classCallCheck(this, yS);\n\n      this.localCandidateCount = 0, this.allCandidateReceived = !1, this.audioTrack = null, this.videoTrack = null, this.mediaStream = new MediaStream(), this.ID = OS, OS += 1, this.spec = e, this.createPeerConnection(), this.statsFilter = vS.createWebRTCStatsFilter(this.pc, void 0, void 0, Ta() ? 1200 : void 0);\n    }\n\n    _createClass(yS, [{\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"createOfferSDP\",\n      value: function () {\n        var _createOfferSDP = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee242() {\n          var _e162;\n\n          return _regeneratorRuntime.wrap(function _callee242$(_context242) {\n            while (1) {\n              switch (_context242.prev = _context242.next) {\n                case 0:\n                  _context242.prev = 0;\n                  _context242.next = 3;\n                  return this.pc.createOffer(this.offerOptions);\n\n                case 3:\n                  _e162 = _context242.sent;\n\n                  if (_e162.sdp) {\n                    _context242.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"offer sdp is empty\");\n\n                case 6:\n                  return _context242.abrupt(\"return\", _e162.sdp);\n\n                case 9:\n                  _context242.prev = 9;\n                  _context242.t0 = _context242[\"catch\"](0);\n                  throw vc.error(\"create offer error:\", _context242.t0.toString()), new Ad(ad.CREATE_OFFER_FAILED, _context242.t0.toString());\n\n                case 12:\n                case \"end\":\n                  return _context242.stop();\n              }\n            }\n          }, _callee242, this, [[0, 9]]);\n        }));\n\n        function createOfferSDP() {\n          return _createOfferSDP.apply(this, arguments);\n        }\n\n        return createOfferSDP;\n      }()\n    }, {\n      key: \"setOfferSDP\",\n      value: function () {\n        var _setOfferSDP = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee243(e) {\n          return _regeneratorRuntime.wrap(function _callee243$(_context243) {\n            while (1) {\n              switch (_context243.prev = _context243.next) {\n                case 0:\n                  _context243.prev = 0;\n                  _context243.next = 3;\n                  return this.pc.setLocalDescription({\n                    type: \"offer\",\n                    sdp: e\n                  });\n\n                case 3:\n                  _context243.next = 8;\n                  break;\n\n                case 5:\n                  _context243.prev = 5;\n                  _context243.t0 = _context243[\"catch\"](0);\n                  throw vc.error(\"set local offer error\", _context243.t0.toString()), new Ad(ad.CREATE_OFFER_FAILED, _context243.t0.toString());\n\n                case 8:\n                case \"end\":\n                  return _context243.stop();\n              }\n            }\n          }, _callee243, this, [[0, 5]]);\n        }));\n\n        function setOfferSDP(_x375) {\n          return _setOfferSDP.apply(this, arguments);\n        }\n\n        return setOfferSDP;\n      }()\n    }, {\n      key: \"setAnswerSDP\",\n      value: function () {\n        var _setAnswerSDP = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee244(e) {\n          return _regeneratorRuntime.wrap(function _callee244$(_context244) {\n            while (1) {\n              switch (_context244.prev = _context244.next) {\n                case 0:\n                  _context244.prev = 0;\n                  _context244.next = 3;\n                  return this.pc.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: e\n                  });\n\n                case 3:\n                  _context244.next = 10;\n                  break;\n\n                case 5:\n                  _context244.prev = 5;\n                  _context244.t0 = _context244[\"catch\"](0);\n\n                  if (!(\"InvalidStateError\" !== _context244.t0.name || \"stable\" !== this.pc.signalingState)) {\n                    _context244.next = 9;\n                    break;\n                  }\n\n                  throw vc.error(\"set remote answer error\", _context244.t0.toString()), new Ad(ad.SET_ANSWER_FAILED, _context244.t0.toString());\n\n                case 9:\n                  vc.debug(\"[pc-\".concat(this.ID, \"] ignore invalidstate error\"));\n\n                case 10:\n                case \"end\":\n                  return _context244.stop();\n              }\n            }\n          }, _callee244, this, [[0, 5]]);\n        }));\n\n        function setAnswerSDP(_x376) {\n          return _setAnswerSDP.apply(this, arguments);\n        }\n\n        return setAnswerSDP;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        this.onICEConnectionStateChange = void 0, this.onConnectionStateChange = void 0;\n\n        try {\n          this.pc.oniceconnectionstatechange = null, this.pc.onconnectionstatechange = null, this.pc.onsignalingstatechange = null, this.pc.onicecandidateerror = null, this.pc.onicecandidate = null, this.pc.close(), this.pc = null, this.audioTransceiver = void 0, this.videoTransceiver = void 0;\n        } catch (e) {}\n\n        this.statsFilter.destroy();\n      }\n    }, {\n      key: \"createPeerConnection\",\n      value: function createPeerConnection() {\n        var _e$iceServers,\n            _e$iceServers2,\n            _this225 = this;\n\n        var e = {\n          iceServers: []\n        },\n            t = function t(e) {\n          var t = [];\n          return Xi(e).call(e, function (e) {\n            if (e.security) {\n              var i;\n              if (e.tcpport) t.push({\n                username: e.username,\n                credential: e.password,\n                credentialType: \"password\",\n                urls: Xe(i = \"turns:\".concat((s = e.turnServerURL, s.match(/^[\\.\\:\\d]+$/) ? \"\".concat(s.replace(/[^\\d]/g, \"-\"), \".edge.agora.io\") : (vc.info(\"Cannot recognized as IP address \".concat(s, \". Used As Host instead\")), s)), \":\")).call(i, e.tcpport, \"?transport=tcp\")\n              });\n            } else {\n              var r, n;\n              if (e.udpport) t.push({\n                username: e.username,\n                credential: e.password,\n                credentialType: \"password\",\n                urls: Xe(r = \"turn:\".concat(e.turnServerURL, \":\")).call(r, e.udpport, \"?transport=udp\")\n              });\n              if (e.tcpport) t.push({\n                username: e.username,\n                credential: e.password,\n                credentialType: \"password\",\n                urls: Xe(n = \"turn:\".concat(e.turnServerURL, \":\")).call(n, e.tcpport, \"?transport=tcp\")\n              });\n            }\n\n            var s;\n          }), t;\n        };\n\n        var i, r;\n        this.spec.iceServers ? e.iceServers = this.spec.iceServers : this.spec.turnServer && \"off\" !== this.spec.turnServer.mode && (qd(this.spec.turnServer.servers) ? e.iceServers = this.spec.turnServer.servers : (e.iceServers && (_e$iceServers = e.iceServers).push.apply(_e$iceServers, _toConsumableArray(t(this.spec.turnServer.servers))), e.iceServers && this.spec.turnServer.serversFromGateway && (_e$iceServers2 = e.iceServers).push.apply(_e$iceServers2, _toConsumableArray(t(this.spec.turnServer.serversFromGateway))), Xi(i = Xe(r = this.spec.turnServer.servers).call(r, this.spec.turnServer.serversFromGateway || [])).call(i, function (t) {\n          t.forceturn && (e.iceTransportPolicy = \"relay\");\n        })));\n\n        if (Fc(\"CHROME_FORCE_PLAN_B\") && ka()) {\n          e.sdpSemantics = \"plan-b\";\n          Ul().supportUnifiedPlan = !1;\n        }\n\n        this.pc = new RTCPeerConnection(e, {\n          optional: [{\n            googDscp: !0\n          }]\n        }), this.pc.oniceconnectionstatechange = function () {\n          _this225.onICEConnectionStateChange && _this225.onICEConnectionStateChange(_this225.pc.iceConnectionState);\n        }, this.pc.onconnectionstatechange = function () {\n          _this225.onConnectionStateChange && _this225.onConnectionStateChange(_this225.pc.connectionState);\n        }, this.pc.onsignalingstatechange = function () {\n          _this225.pc && \"closed\" === _this225.pc.connectionState && _this225.onConnectionStateChange && _this225.onConnectionStateChange(_this225.pc.connectionState);\n        }, this.pc.onicecandidate = function (e) {\n          if (!e.candidate) return _this225.pc.onicecandidate = null, _this225.allCandidateReceived = !0, void vc.debug(\"[pc-\".concat(_this225.ID, \"] local candidate count\"), _this225.localCandidateCount);\n          _this225.localCandidateCount += 1;\n        }, Ua(function () {\n          _this225.allCandidateReceived || (_this225.allCandidateReceived = !0, vc.debug(\"[pc-\".concat(_this225.ID, \"] onicecandidate timeout, local candidate count\"), _this225.localCandidateCount));\n        }, Fc(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"_statsFilter\",\n      get: function get() {\n        return this.statsFilter;\n      }\n    }]);\n\n    return yS;\n  }();\n\n  var wS =\n  /*#__PURE__*/\n  function (_yS) {\n    _inherits(wS, _yS);\n\n    function wS(e) {\n      _classCallCheck(this, wS);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(wS).call(this, e));\n    }\n\n    _createClass(wS, [{\n      key: \"setOfferSDP\",\n      value: function () {\n        var _setOfferSDP2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee245(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee245$(_context245) {\n            while (1) {\n              switch (_context245.prev = _context245.next) {\n                case 0:\n                  t = Fc(\"CUSTOM_PUB_OFFER_MODIFIER\");\n                  t && (e = t(e));\n                  _context245.next = 4;\n                  return _get(_getPrototypeOf(wS.prototype), \"setOfferSDP\", this).call(this, e);\n\n                case 4:\n                  return _context245.abrupt(\"return\", _context245.sent);\n\n                case 5:\n                case \"end\":\n                  return _context245.stop();\n              }\n            }\n          }, _callee245, this);\n        }));\n\n        function setOfferSDP(_x377) {\n          return _setOfferSDP2.apply(this, arguments);\n        }\n\n        return setOfferSDP;\n      }()\n    }, {\n      key: \"setAnswerSDP\",\n      value: function () {\n        var _setAnswerSDP2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee246(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee246$(_context246) {\n            while (1) {\n              switch (_context246.prev = _context246.next) {\n                case 0:\n                  t = Fc(\"CUSTOM_PUB_ANSWER_MODIFIER\");\n                  t && (e = t(e));\n                  _context246.next = 4;\n                  return _get(_getPrototypeOf(wS.prototype), \"setAnswerSDP\", this).call(this, e);\n\n                case 4:\n                  return _context246.abrupt(\"return\", _context246.sent);\n\n                case 5:\n                case \"end\":\n                  return _context246.stop();\n              }\n            }\n          }, _callee246, this);\n        }));\n\n        function setAnswerSDP(_x378) {\n          return _setAnswerSDP2.apply(this, arguments);\n        }\n\n        return setAnswerSDP;\n      }()\n    }, {\n      key: \"getAnswerSDP\",\n      value: function getAnswerSDP() {\n        return this.pc.remoteDescription;\n      }\n    }, {\n      key: \"getOfferSDP\",\n      value: function getOfferSDP() {\n        return this.pc.localDescription;\n      }\n    }, {\n      key: \"addStream\",\n      value: function () {\n        var _addStream = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee247(e) {\n          var t, _iteratorNormalCompletion26, _didIteratorError26, _iteratorError26, _iterator26, _step26, _e163;\n\n          return _regeneratorRuntime.wrap(function _callee247$(_context247) {\n            while (1) {\n              switch (_context247.prev = _context247.next) {\n                case 0:\n                  t = e.getTracks();\n                  _iteratorNormalCompletion26 = true;\n                  _didIteratorError26 = false;\n                  _iteratorError26 = undefined;\n                  _context247.prev = 4;\n                  _iterator26 = t[Symbol.iterator]();\n\n                case 6:\n                  if (_iteratorNormalCompletion26 = (_step26 = _iterator26.next()).done) {\n                    _context247.next = 13;\n                    break;\n                  }\n\n                  _e163 = _step26.value;\n                  _context247.next = 10;\n                  return this.addTrack(_e163);\n\n                case 10:\n                  _iteratorNormalCompletion26 = true;\n                  _context247.next = 6;\n                  break;\n\n                case 13:\n                  _context247.next = 19;\n                  break;\n\n                case 15:\n                  _context247.prev = 15;\n                  _context247.t0 = _context247[\"catch\"](4);\n                  _didIteratorError26 = true;\n                  _iteratorError26 = _context247.t0;\n\n                case 19:\n                  _context247.prev = 19;\n                  _context247.prev = 20;\n\n                  if (!_iteratorNormalCompletion26 && _iterator26.return != null) {\n                    _iterator26.return();\n                  }\n\n                case 22:\n                  _context247.prev = 22;\n\n                  if (!_didIteratorError26) {\n                    _context247.next = 25;\n                    break;\n                  }\n\n                  throw _iteratorError26;\n\n                case 25:\n                  return _context247.finish(22);\n\n                case 26:\n                  return _context247.finish(19);\n\n                case 27:\n                case \"end\":\n                  return _context247.stop();\n              }\n            }\n          }, _callee247, this, [[4, 15, 19, 27], [20,, 22, 26]]);\n        }));\n\n        function addStream(_x379) {\n          return _addStream.apply(this, arguments);\n        }\n\n        return addStream;\n      }()\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee248(e) {\n          var t, _t167, i, r;\n\n          return _regeneratorRuntime.wrap(function _callee248$(_context248) {\n            while (1) {\n              switch (_context248.prev = _context248.next) {\n                case 0:\n                  if (Ul().supportReplaceTrack) {\n                    _context248.next = 9;\n                    break;\n                  }\n\n                  _t167 = \"audio\" === e.kind ? this.audioTrack : this.videoTrack;\n\n                  if (_t167) {\n                    _context248.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"can not find replaced track\");\n\n                case 4:\n                  _context248.next = 6;\n                  return this.removeTrack(_t167);\n\n                case 6:\n                  _context248.next = 8;\n                  return this.addTrack(e);\n\n                case 8:\n                  return _context248.abrupt(\"return\", !0);\n\n                case 9:\n                  i = this.getSender(e.kind), r = Vs(t = this.mediaStream.getTracks()).call(t, function (t) {\n                    return t.kind === e.kind;\n                  });\n                  r && this.mediaStream.removeTrack(r), this.mediaStream.addTrack(e);\n                  _context248.prev = 11;\n                  _context248.next = 14;\n                  return i.replaceTrack(e);\n\n                case 14:\n                  \"audio\" === e.kind ? this.audioTrack = e : this.videoTrack = e;\n                  _context248.next = 20;\n                  break;\n\n                case 17:\n                  _context248.prev = 17;\n                  _context248.t0 = _context248[\"catch\"](11);\n                  throw new Ad(ad.SENDER_REPLACE_FAILED, _context248.t0.toString());\n\n                case 20:\n                  return _context248.abrupt(\"return\", !1);\n\n                case 21:\n                case \"end\":\n                  return _context248.stop();\n              }\n            }\n          }, _callee248, this, [[11, 17]]);\n        }));\n\n        function replaceTrack(_x380) {\n          return _replaceTrack3.apply(this, arguments);\n        }\n\n        return replaceTrack;\n      }()\n    }, {\n      key: \"removeTrack\",\n      value: function () {\n        var _removeTrack = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee249(e) {\n          var t, _e164;\n\n          return _regeneratorRuntime.wrap(function _callee249$(_context249) {\n            while (1) {\n              switch (_context249.prev = _context249.next) {\n                case 0:\n                  t = this.getSender(e.kind);\n                  this.mediaStream.removeTrack(e);\n                  _context249.prev = 2;\n                  _e164 = pa();\n                  _context249.t0 = \"Safari\" === _e164.name && \"11\" === _e164.version;\n\n                  if (!_context249.t0) {\n                    _context249.next = 8;\n                    break;\n                  }\n\n                  _context249.next = 8;\n                  return t.replaceTrack(null);\n\n                case 8:\n                  this.pc.removeTrack(t);\n                  _context249.next = 14;\n                  break;\n\n                case 11:\n                  _context249.prev = 11;\n                  _context249.t1 = _context249[\"catch\"](2);\n                  vc.warning(\"[pc-\".concat(this.ID, \"] remove track error, ignore\"), _context249.t1);\n\n                case 14:\n                  \"audio\" === e.kind ? (this.audioTrack = null, this.audioSender = void 0, this.audioTransceiver && (this.audioTransceiver.direction = \"inactive\"), this.audioTransceiver = void 0) : (this.videoTrack = null, this.videoSender = void 0, this.videoTransceiver && (this.videoTransceiver.direction = \"inactive\"), this.videoTransceiver = void 0);\n\n                case 15:\n                case \"end\":\n                  return _context249.stop();\n              }\n            }\n          }, _callee249, this, [[2, 11]]);\n        }));\n\n        function removeTrack(_x381) {\n          return _removeTrack.apply(this, arguments);\n        }\n\n        return removeTrack;\n      }()\n    }, {\n      key: \"onOfferSettled\",\n      value: function onOfferSettled(_ref191) {\n        var e = _ref191.videoActive,\n            t = _ref191.audioActive;\n        if (Ta()) vc.debug(\"firefox do not set sender parameter\");else {\n          if (this.audioSender) {\n            var _e165 = {\n              networkQuality: void 0,\n              active: !0\n            };\n            Fc(\"DSCP_TYPE\") && (_e165.networkQuality = Fc(\"DSCP_TYPE\")), this.audioTrack && (_e165.active = !!t), this.setAudioRtpEncodingParameters(_e165).catch(function (e) {\n              vc.debug(\"set audio sender`s network priority failed\");\n            });\n          }\n\n          if (this.videoSender) {\n            var _t168 = {\n              networkQuality: void 0,\n              active: !0\n            };\n            Fc(\"DSCP_TYPE\") && (_t168.networkQuality = Fc(\"DSCP_TYPE\")), this.videoTrack && (_t168.active = !!e), this.setVideoRtpEncodingParameters(_t168).catch(function (e) {\n              vc.debug(\"set video sender`s network priority failed\");\n            });\n          }\n        }\n      }\n    }, {\n      key: \"addTrack\",\n      value: function () {\n        var _addTrack = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee251(e) {\n          var t, i, r;\n          return _regeneratorRuntime.wrap(function _callee251$(_context251) {\n            while (1) {\n              switch (_context251.prev = _context251.next) {\n                case 0:\n                  t = Ul();\n\n                  if (!(\"audio\" === e.kind && this.audioTrack || \"video\" === e.kind && this.videoTrack)) {\n                    _context251.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"Can't add multiple stream\");\n\n                case 3:\n                  this.mediaStream.addTrack(e);\n\n                  if (!t.supportUnifiedPlan) {\n                    _context251.next = 11;\n                    break;\n                  }\n\n                  _context251.next = 7;\n                  return function () {\n                    var _ref192 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee250(e, t, i) {\n                      var r, n;\n                      return _regeneratorRuntime.wrap(function _callee250$(_context250) {\n                        while (1) {\n                          switch (_context250.prev = _context250.next) {\n                            case 0:\n                              n = Vs(r = e.getTransceivers()).call(r, function (e) {\n                                return \"inactive\" === e.direction && e.receiver.track.kind === t.kind;\n                              });\n\n                              if (!n) {\n                                _context250.next = 8;\n                                break;\n                              }\n\n                              n.direction = \"sendrecv\";\n                              _context250.next = 5;\n                              return n.sender.replaceTrack(t);\n\n                            case 5:\n                              _context250.t0 = n;\n                              _context250.next = 9;\n                              break;\n\n                            case 8:\n                              _context250.t0 = e.addTransceiver(t, {\n                                direction: \"sendrecv\",\n                                streams: [i]\n                              });\n\n                            case 9:\n                              return _context250.abrupt(\"return\", _context250.t0);\n\n                            case 10:\n                            case \"end\":\n                              return _context250.stop();\n                          }\n                        }\n                      }, _callee250, this);\n                    }));\n\n                    return function (_x383, _x384, _x385) {\n                      return _ref192.apply(this, arguments);\n                    };\n                  }()(this.pc, e, this.mediaStream);\n\n                case 7:\n                  i = _context251.sent;\n                  r = i.sender;\n                  _context251.next = 12;\n                  break;\n\n                case 11:\n                  r = this.pc.addTrack(e, this.mediaStream);\n\n                case 12:\n                  \"audio\" === e.kind ? (this.audioTrack = e, this.audioSender = r, this.audioTransceiver = i) : (this.videoTrack = e, this.videoSender = r, this.videoTransceiver = i);\n\n                case 13:\n                case \"end\":\n                  return _context251.stop();\n              }\n            }\n          }, _callee251, this);\n        }));\n\n        function addTrack(_x382) {\n          return _addTrack.apply(this, arguments);\n        }\n\n        return addTrack;\n      }()\n    }, {\n      key: \"setRtpSenderParameters\",\n      value: function () {\n        var _setRtpSenderParameters = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee252(e, t) {\n          var i, r;\n          return _regeneratorRuntime.wrap(function _callee252$(_context252) {\n            while (1) {\n              switch (_context252.prev = _context252.next) {\n                case 0:\n                  i = this.videoSender || (this.videoTransceiver ? this.videoTransceiver.sender : void 0);\n\n                  if (i) {\n                    _context252.next = 3;\n                    break;\n                  }\n\n                  return _context252.abrupt(\"return\");\n\n                case 3:\n                  r = i.getParameters();\n                  r.degradationPreference = t;\n                  _context252.prev = 5;\n                  _context252.next = 8;\n                  return i.setParameters(r);\n\n                case 8:\n                  _context252.next = 13;\n                  break;\n\n                case 10:\n                  _context252.prev = 10;\n                  _context252.t0 = _context252[\"catch\"](5);\n                  vc.debug(\"[\".concat(this.ID, \"] ignore RtpSender.setParameters\"), _context252.t0.toString());\n\n                case 13:\n                case \"end\":\n                  return _context252.stop();\n              }\n            }\n          }, _callee252, this, [[5, 10]]);\n        }));\n\n        function setRtpSenderParameters(_x386, _x387) {\n          return _setRtpSenderParameters.apply(this, arguments);\n        }\n\n        return setRtpSenderParameters;\n      }()\n    }, {\n      key: \"setVideoRtpEncodingParameters\",\n      value: function () {\n        var _setVideoRtpEncodingParameters = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee253(e) {\n          var t, i, r;\n          return _regeneratorRuntime.wrap(function _callee253$(_context253) {\n            while (1) {\n              switch (_context253.prev = _context253.next) {\n                case 0:\n                  t = this.videoSender || (this.videoTransceiver ? this.videoTransceiver.sender : void 0);\n\n                  if (t) {\n                    _context253.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.LOW_STREAM_ENCODING_ERROR, \"Low stream has no video sender.\");\n\n                case 3:\n                  i = t.getParameters();\n\n                  if (!(!i.encodings || !i.encodings[0])) {\n                    _context253.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.LOW_STREAM_ENCODING_ERROR, \"Low stream RtpEncodingParameters is empty.\");\n\n                case 6:\n                  e.scaleResolutionDownBy && (i.encodings[0].scaleResolutionDownBy = e.scaleResolutionDownBy), e.maxBitrate && (i.encodings[0].maxBitrate = e.maxBitrate), e.maxFramerate && (i.encodings[0].maxFramerate = e.maxFramerate), void 0 !== e.active && (vc.debug(\"set video sender encoding active:\", e.active), i.encodings[0].active = e.active);\n                  r = [\"very-low\", \"low\", \"medium\", \"high\"];\n                  e.networkPriority && eo(r).call(r, e.networkPriority) && (vc.debug(\"set video sender network quality:\", e.networkPriority), i.encodings[0].networkPriority = e.networkPriority);\n                  _context253.next = 11;\n                  return t.setParameters(i);\n\n                case 11:\n                  return _context253.abrupt(\"return\", t.getParameters());\n\n                case 12:\n                case \"end\":\n                  return _context253.stop();\n              }\n            }\n          }, _callee253, this);\n        }));\n\n        function setVideoRtpEncodingParameters(_x388) {\n          return _setVideoRtpEncodingParameters.apply(this, arguments);\n        }\n\n        return setVideoRtpEncodingParameters;\n      }()\n    }, {\n      key: \"setAudioRtpEncodingParameters\",\n      value: function () {\n        var _setAudioRtpEncodingParameters = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee254(e) {\n          var t, i, r;\n          return _regeneratorRuntime.wrap(function _callee254$(_context254) {\n            while (1) {\n              switch (_context254.prev = _context254.next) {\n                case 0:\n                  t = this.audioSender || (this.audioTransceiver ? this.audioTransceiver.sender : void 0);\n\n                  if (t) {\n                    _context254.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.SET_ENCODING_PARAMETER_ERROR, \"pc has no audio sender.\");\n\n                case 3:\n                  i = t.getParameters();\n\n                  if (!(!i.encodings || !i.encodings[0])) {\n                    _context254.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.SET_ENCODING_PARAMETER_ERROR, \"pc RtpEncodingParameters is empty.\");\n\n                case 6:\n                  void 0 !== e.active && (vc.debug(\"set audio sender encoding active:\", e.active), i.encodings[0].active = e.active);\n                  r = [\"very-low\", \"low\", \"medium\", \"high\"];\n                  e.networkPriority && eo(r).call(r, e.networkPriority) && (vc.debug(\"set audio sender network quality:\", e.networkPriority), i.encodings[0].networkPriority = e.networkPriority);\n                  _context254.next = 11;\n                  return t.setParameters(i);\n\n                case 11:\n                  return _context254.abrupt(\"return\", t.getParameters());\n\n                case 12:\n                case \"end\":\n                  return _context254.stop();\n              }\n            }\n          }, _callee254, this);\n        }));\n\n        function setAudioRtpEncodingParameters(_x389) {\n          return _setAudioRtpEncodingParameters.apply(this, arguments);\n        }\n\n        return setAudioRtpEncodingParameters;\n      }()\n    }, {\n      key: \"getSender\",\n      value: function getSender(e) {\n        var t = null;\n\n        if (Ul().supportUnifiedPlan) {\n          var i;\n\n          var _r74 = Vs(i = this.pc.getTransceivers()).call(i, function (t) {\n            return t.sender.track && t.sender.track.kind === e;\n          });\n\n          t = _r74 ? _r74.sender : null;\n        } else {\n          var r;\n          t = Vs(r = this.pc.getSenders()).call(r, function (t) {\n            return t.track && t.track.kind === e;\n          }) || null;\n        }\n\n        if (!t) throw new Ad(ad.SENDER_NOT_FOUND);\n        return t;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this.audioSender = void 0, this.videoSender = void 0, _get(_getPrototypeOf(wS.prototype), \"close\", this).call(this);\n      }\n    }]);\n\n    return wS;\n  }(yS);\n\n  var NS =\n  /*#__PURE__*/\n  function (_yS2) {\n    _inherits(NS, _yS2);\n\n    function NS(e) {\n      var _this226;\n\n      _classCallCheck(this, NS);\n\n      _this226 = _possibleConstructorReturn(this, _getPrototypeOf(NS).call(this, e)), _this226.statsFilter.onFirstAudioDecoded = function () {\n        return _this226.onFirstAudioDecoded && _this226.onFirstAudioDecoded();\n      }, _this226.statsFilter.onFirstVideoDecoded = function (e, t) {\n        return _this226.onFirstVideoDecoded && _this226.onFirstVideoDecoded(e, t);\n      }, _this226.statsFilter.onFirstAudioReceived = function () {\n        return _this226.onFirstAudioReceived && _this226.onFirstAudioReceived();\n      }, _this226.statsFilter.onFirstVideoReceived = function () {\n        return _this226.onFirstVideoReceived && _this226.onFirstVideoReceived();\n      };\n      Ul().supportUnifiedPlan ? (_this226.audioTransceiver = _this226.pc.addTransceiver(\"audio\", {\n        direction: \"recvonly\"\n      }), _this226.videoTransceiver = _this226.pc.addTransceiver(\"video\", {\n        direction: \"recvonly\"\n      })) : _this226.offerOptions = {\n        offerToReceiveAudio: !0,\n        offerToReceiveVideo: !0\n      }, _this226.pc.ontrack = function (e) {\n        \"audio\" === e.track.kind ? _this226.audioTrack = e.track : _this226.videoTrack = e.track, _this226.onTrack && _this226.onTrack(e.track, e.streams[0]);\n      };\n      return _this226;\n    }\n\n    _createClass(NS, [{\n      key: \"setOfferSDP\",\n      value: function () {\n        var _setOfferSDP3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee255(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee255$(_context255) {\n            while (1) {\n              switch (_context255.prev = _context255.next) {\n                case 0:\n                  t = Fc(\"CUSTOM_SUB_OFFER_MODIFIER\");\n                  t && (e = t(e));\n                  _context255.next = 4;\n                  return _get(_getPrototypeOf(NS.prototype), \"setOfferSDP\", this).call(this, e);\n\n                case 4:\n                  return _context255.abrupt(\"return\", _context255.sent);\n\n                case 5:\n                case \"end\":\n                  return _context255.stop();\n              }\n            }\n          }, _callee255, this);\n        }));\n\n        function setOfferSDP(_x390) {\n          return _setOfferSDP3.apply(this, arguments);\n        }\n\n        return setOfferSDP;\n      }()\n    }, {\n      key: \"setAnswerSDP\",\n      value: function () {\n        var _setAnswerSDP3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee256(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee256$(_context256) {\n            while (1) {\n              switch (_context256.prev = _context256.next) {\n                case 0:\n                  t = Fc(\"CUSTOM_SUB_ANSWER_MODIFIER\");\n                  t && (e = t(e));\n                  _context256.next = 4;\n                  return _get(_getPrototypeOf(NS.prototype), \"setAnswerSDP\", this).call(this, e);\n\n                case 4:\n                  return _context256.abrupt(\"return\", _context256.sent);\n\n                case 5:\n                case \"end\":\n                  return _context256.stop();\n              }\n            }\n          }, _callee256, this);\n        }));\n\n        function setAnswerSDP(_x391) {\n          return _setAnswerSDP3.apply(this, arguments);\n        }\n\n        return setAnswerSDP;\n      }()\n    }]);\n\n    return NS;\n  }(yS);\n\n  var OS = 1,\n      bS = 1;\n\n  var DS =\n  /*#__PURE__*/\n  function (_Ll25) {\n    _inherits(DS, _Ll25);\n\n    function DS(e, t) {\n      var _this227;\n\n      _classCallCheck(this, DS);\n\n      _this227 = _possibleConstructorReturn(this, _getPrototypeOf(DS).call(this)), _this227.startTime = La(), _this227.createTime = La(), _this227.readyToReconnect = !1, _this227._connectionState = \"disconnected\", _this227.currentReconnectCount = 0, _this227.ID = bS, bS += 1, _this227.joinInfo = e, _this227._userId = t, _this227.createPC();\n      return _this227;\n    }\n\n    _createClass(DS, [{\n      key: \"getUserId\",\n      value: function getUserId() {\n        return this._userId;\n      }\n    }, {\n      key: \"startUploadStats\",\n      value: function startUploadStats() {\n        var _this228 = this;\n\n        this.statsUploadInterval = window.setInterval(function () {\n          var e = _this228.pc.getStats();\n\n          _this228.uploadStats(e, _this228.lastUploadPCStats), _this228.lastUploadPCStats = e;\n        }, 3e3), this.statsUploadSlowInterval = window.setInterval(function () {\n          var e = _this228.pc.getStats();\n\n          _this228.uploadSlowStats(e);\n        }, 6e4), this.relatedStatsUploadInterval = window.setInterval(function () {\n          var e = _this228.pc.getStats();\n\n          _this228.uploadRelatedStats(e, _this228.lastRelatedPcStats), _this228.lastRelatedPcStats = e;\n        }, 1e3);\n      }\n    }, {\n      key: \"stopUploadStats\",\n      value: function stopUploadStats() {\n        this.statsUploadInterval && window.clearInterval(this.statsUploadInterval), this.relatedStatsUploadInterval && window.clearInterval(this.relatedStatsUploadInterval), this.statsUploadInterval = void 0, this.relatedStatsUploadInterval = void 0;\n      }\n    }, {\n      key: \"createWaitConnectionConnectedPromise\",\n      value: function createWaitConnectionConnectedPromise() {\n        var _this229 = this;\n\n        return new As(function (e, t) {\n          \"disconnected\" === _this229.connectionState ? t() : \"connected\" === _this229.connectionState ? e() : _this229.once($m.CONNECTION_STATE_CHANGE, function (i) {\n            \"connected\" === i ? e() : t();\n          });\n        });\n      }\n    }, {\n      key: \"reconnectPC\",\n      value: function () {\n        var _reconnectPC2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee257(e) {\n          return _regeneratorRuntime.wrap(function _callee257$(_context257) {\n            while (1) {\n              switch (_context257.prev = _context257.next) {\n                case 0:\n                  if (!(this.readyToReconnect = !1, e && this.onPCDisconnected(e), this.currentReconnectCount > Infinity)) {\n                    _context257.next = 2;\n                    break;\n                  }\n\n                  throw vc.debug(\"[\".concat(this.connectionId, \"] cannot reconnect pc\")), e || new Ad(lC.UNEXPECTED_ERROR);\n\n                case 2:\n                  this.stopUploadStats(), vc.debug(\"[\".concat(this.connectionId, \"] start reconnect pc\")), this.connectionState = \"connecting\", this.currentReconnectCount += 1;\n                  _context257.next = 5;\n                  return this.closePC();\n\n                case 5:\n                  if (!_context257.sent) {\n                    _context257.next = 7;\n                    break;\n                  }\n\n                  return _context257.abrupt(\"return\", (vc.debug(\"[\".concat(this.connectionId, \"] abort reconnect pc, wait ws\")), void this.readyToReconnectPC()));\n\n                case 7:\n                  this.createPC();\n                  _context257.next = 10;\n                  return this.startP2PConnection();\n\n                case 10:\n                  this.currentReconnectCount = 0;\n\n                case 11:\n                case \"end\":\n                  return _context257.stop();\n              }\n            }\n          }, _callee257, this);\n        }));\n\n        function reconnectPC(_x392) {\n          return _reconnectPC2.apply(this, arguments);\n        }\n\n        return reconnectPC;\n      }()\n    }, {\n      key: \"readyToReconnectPC\",\n      value: function readyToReconnectPC() {\n        this.stopUploadStats(), this.readyToReconnect = !0, this.pc.onICEConnectionStateChange = void 0, this.connectionState = \"connecting\";\n      }\n    }, {\n      key: \"updateICEPromise\",\n      value: function updateICEPromise() {\n        var _this230 = this;\n\n        this.removeAllListeners($m.GATEWAY_P2P_LOST), this.icePromise = new As(function (e, t) {\n          var i = !0;\n          _this230.pc.onICEConnectionStateChange = function (r) {\n            var n, s;\n            vc.info(Xe(n = Xe(s = \"[\".concat(_this230.connectionId, \"] ice-state: \")).call(s, _this230.type, \" p2p \")).call(n, r)), \"connected\" === r && e(), \"failed\" !== r && \"closed\" !== r || (i && _this230.emit($m.P2P_LOST), i = !1, _this230.reconnectPC(new Ad(lC.ICE_FAILED)).catch(function (e) {\n              t(e);\n            }));\n          }, _this230.pc.onConnectionStateChange = function (e) {\n            var r, n;\n            vc.info(Xe(r = Xe(n = \"[\".concat(_this230.connectionId, \"] connection-state: \")).call(n, _this230.type, \" p2p \")).call(r, e)), \"failed\" !== e && \"closed\" !== e || (i && _this230.emit($m.P2P_LOST), i = !1, _this230.reconnectPC(new Ad(lC.PC_CLOSED)).catch(function (e) {\n              t(e);\n            }));\n          }, _this230.removeAllListeners($m.GATEWAY_P2P_LOST), _this230.once($m.GATEWAY_P2P_LOST, function (e) {\n            var r;\n\n            if (_this230.pc.ID.toString() === e.toString()) {\n              if (vc.info(Xe(r = \"[\".concat(_this230.connectionId, \"] \")).call(r, _this230.type, \" p2p gateway lost\")), i && _this230.emit($m.P2P_LOST), i = !1, _this230.pc.allCandidateReceived && 0 === _this230.pc.localCandidateCount) return _this230.disconnectedReason = new Ad(lC.NO_ICE_CANDIDATE, \"can not get candidate in this pc\"), void _this230.closeP2PConnection(!0);\n\n              _this230.reconnectPC(new Ad(lC.GATEWAY_P2P_LOST)).catch(function (e) {\n                t(e);\n              });\n            }\n          });\n        });\n      }\n    }, {\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        e !== this._connectionState && (this.emit($m.CONNECTION_STATE_CHANGE, e, this._connectionState), this._connectionState = e);\n      }\n    }, {\n      key: \"connectionId\",\n      get: function get() {\n        var e, t;\n        return Xe(e = Xe(t = \"\".concat(this.joinInfo.clientId, \"-\")).call(t, this.type ? this.type : \"sub(\".concat(this._userId, \")\"), \"-\")).call(e, this.ID);\n      }\n    }]);\n\n    return DS;\n  }(Ll);\n\n  function kS(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function LS(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = kS(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = kS(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var PS = function PS(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      BS = function BS(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var MS =\n  /*#__PURE__*/\n  function (_kC2) {\n    _inherits(MS, _kC2);\n\n    function MS(e, t, i, r, n) {\n      var _this231;\n\n      _classCallCheck(this, MS);\n\n      _this231 = _possibleConstructorReturn(this, _getPrototypeOf(MS).call(this, e, n)), _this231.trackMediaType = \"video\", _this231._scalabiltyMode = {\n        numSpatialLayers: 1,\n        numTemporalLayers: 1\n      }, _this231._enabled = !0, _this231.updateMediaStreamTrackResolution(), _this231._encoderConfig = t, _this231._scalabiltyMode = i, _this231._optimizationMode = r;\n      return _this231;\n    }\n\n    _createClass(MS, [{\n      key: \"play\",\n      value: function play(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var i = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.LOCAL_VIDEO_TRACK_PLAY,\n          options: [this.getTrackId(), \"string\" == typeof e ? e : \"HTMLElement\", t]\n        });\n\n        if (!(e instanceof HTMLElement)) {\n          var _t169 = document.getElementById(e.toString());\n\n          var r;\n          if (_t169) e = _t169;else vc.warning(Xe(r = \"[\".concat(this.getTrackId(), '] can not find \"#')).call(r, e, '\" element, use document.body')), e = document.body;\n        }\n\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), ge(t));\n        var n = LS({}, this._getDefaultPlayerConfig(), {}, t, {\n          trackId: this.getTrackId(),\n          element: e\n        });\n        this._player ? this._player.updateConfig(n) : (this._player = new x_(n), this._player.updateVideoTrack(this._mediaStreamTrack)), this._player.play(), i.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Fm.LOCAL_VIDEO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        if (!this._player) return e.onSuccess();\n        this._player.destroy(), this._player = void 0, vc.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")), e.onSuccess();\n      }\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled7 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee258(e, t) {\n          var i;\n          return _regeneratorRuntime.wrap(function _callee258$(_context258) {\n            while (1) {\n              switch (_context258.prev = _context258.next) {\n                case 0:\n                  if (t) {\n                    _context258.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context258.next = 3;\n                    break;\n                  }\n\n                  return _context258.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e);\n                  _context258.next = 7;\n                  return this._enabledMutex.lock();\n\n                case 7:\n                  i = _context258.sent;\n\n                  if (e) {\n                    _context258.next = 19;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.enabled = !1;\n                  _context258.prev = 10;\n                  _context258.next = 13;\n                  return Lh(this, pC.NEED_REMOVE_TRACK, this);\n\n                case 13:\n                  _context258.next = 18;\n                  break;\n\n                case 15:\n                  _context258.prev = 15;\n                  _context258.t0 = _context258[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context258.t0.toString()), i(), _context258.t0;\n\n                case 18:\n                  return _context258.abrupt(\"return\", (t || (this._enabled = !1), vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\")), i()));\n\n                case 19:\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context258.prev = 20;\n                  _context258.next = 23;\n                  return Lh(this, pC.NEED_ADD_TRACK, this);\n\n                case 23:\n                  _context258.next = 28;\n                  break;\n\n                case 25:\n                  _context258.prev = 25;\n                  _context258.t1 = _context258[\"catch\"](20);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context258.t1.toString()), i(), _context258.t1;\n\n                case 28:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0), i();\n\n                case 29:\n                case \"end\":\n                  return _context258.stop();\n              }\n            }\n          }, _callee258, this, [[10, 15], [20, 25]]);\n        }));\n\n        function setEnabled(_x393, _x394) {\n          return _setEnabled7.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setMuted\",\n      value: function () {\n        var _setMuted4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee259(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee259$(_context259) {\n            while (1) {\n              switch (_context259.prev = _context259.next) {\n                case 0:\n                  if (!(e !== this._muted)) {\n                    _context259.next = 10;\n                    break;\n                  }\n\n                  if (!(this.stateCheck(\"muted\", e), this._muted = e, pa().name === vm.FIREFOX)) {\n                    _context259.next = 6;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this.getTrackId(), \"] firefox set mute fallback to set enabled\"));\n                  _context259.next = 5;\n                  return this.setEnabled(!e, !0);\n\n                case 5:\n                  return _context259.abrupt(\"return\", void _context259.sent);\n\n                case 6:\n                  this._mediaStreamTrack.enabled = !e;\n                  vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] start set muted: \")).call(t, e));\n                  _context259.next = 10;\n                  return Lh(this, pC.SET_VIDEO_TRACK_MUTED, {\n                    track: this,\n                    muted: e\n                  });\n\n                case 10:\n                case \"end\":\n                  return _context259.stop();\n              }\n            }\n          }, _callee259, this);\n        }));\n\n        function setMuted(_x395) {\n          return _setMuted4.apply(this, arguments);\n        }\n\n        return setMuted;\n      }()\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead\");\n        }, \"localVideoTrackGetStatsWarning\");\n        var e = Ph(this, pC.GET_STATS);\n        return e || LS({}, iC);\n      }\n    }, {\n      key: \"setBeautyEffect\",\n      value: function () {\n        var _setBeautyEffect2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee260(e) {\n          var _this232 = this;\n\n          var t,\n              i,\n              _e166,\n              _e167,\n              _args260 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee260$(_context260) {\n            while (1) {\n              switch (_context260.prev = _context260.next) {\n                case 0:\n                  t = _args260.length > 1 && _args260[1] !== undefined ? _args260[1] : {};\n                  i = wC.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Fm.LOCAL_VIDEO_TRACK_BEAUTY,\n                    options: [this.getTrackId(), e, t]\n                  });\n\n                  if (!(e || this._videoBeautyProcessor)) {\n                    _context260.next = 28;\n                    break;\n                  }\n\n                  if (!(Ia() === Tm.IOS || Ia() === Tm.ANDROID)) {\n                    _context260.next = 6;\n                    break;\n                  }\n\n                  _e166 = new Ad(ad.INVALID_OPERATION, \"can not enable beauty effect on mobile device\");\n                  throw i.onError(_e166), _e166;\n\n                case 6:\n                  if (!(!this._enabled && e)) {\n                    _context260.next = 9;\n                    break;\n                  }\n\n                  _e167 = new Ad(ad.TRACK_IS_DISABLED, \"can not enable beauty effect when track is disabled\");\n                  throw i.onError(_e167), _e167;\n\n                case 9:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setBeautyEffect\"), e, ge(t));\n                  _context260.prev = 10;\n\n                  if (!this._videoBeautyProcessor) {\n                    _context260.next = 16;\n                    break;\n                  }\n\n                  _context260.next = 14;\n                  return this._videoBeautyProcessor.setBeautyEffectOptions(e, t);\n\n                case 14:\n                  _context260.next = 22;\n                  break;\n\n                case 16:\n                  this._videoBeautyProcessor = new lI();\n\n                  this._videoBeautyProcessor.onOverload = function () {\n                    Qh(function () {\n                      return _this232.emit(gC.BEAUTY_EFFECT_OVERLOAD);\n                    });\n                  };\n\n                  _context260.next = 20;\n                  return this._videoBeautyProcessor.setBeautyEffectOptions(e, t);\n\n                case 20:\n                  _context260.next = 22;\n                  return this._registerTrackProcessor(this._videoBeautyProcessor);\n\n                case 22:\n                  _context260.next = 27;\n                  break;\n\n                case 24:\n                  _context260.prev = 24;\n                  _context260.t0 = _context260[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setBeautyEffect error\"), _context260.t0.toString()), i.onError(_context260.t0), _context260.t0;\n\n                case 27:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setBeautyEffect success\")), i.onSuccess();\n\n                case 28:\n                case \"end\":\n                  return _context260.stop();\n              }\n            }\n          }, _callee260, this, [[10, 24]]);\n        }));\n\n        function setBeautyEffect(_x396) {\n          return _setBeautyEffect2.apply(this, arguments);\n        }\n\n        return setBeautyEffect;\n      }()\n    }, {\n      key: \"getCurrentFrameData\",\n      value: function getCurrentFrameData() {\n        return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n      }\n    }, {\n      key: \"clone\",\n      value: function clone(e, t, i, r) {\n        var n = this._mediaStreamTrack.clone();\n\n        return new MS(n, e, t, i, r);\n      }\n    }, {\n      key: \"setBitrateLimit\",\n      value: function () {\n        var _setBitrateLimit2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee261(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee261$(_context261) {\n            while (1) {\n              switch (_context261.prev = _context261.next) {\n                case 0:\n                  if (!(vc.debug(Xe(t = \"[\".concat(this.getTrackId(), \"] set bitrate limit, \")).call(t, ge(e))), e)) {\n                    _context261.next = 10;\n                    break;\n                  }\n\n                  this._forceBitrateLimit = e, this._encoderConfig && (this._encoderConfig.bitrateMax ? this._encoderConfig.bitrateMax = this._encoderConfig.bitrateMax < e.max_bitrate ? this._encoderConfig.bitrateMax : e.max_bitrate : this._encoderConfig.bitrateMax = e.max_bitrate, this._encoderConfig.bitrateMin, this._encoderConfig.bitrateMin = e.min_bitrate);\n                  _context261.prev = 2;\n                  _context261.next = 5;\n                  return Lh(this, pC.NEED_RESET_REMOTE_SDP);\n\n                case 5:\n                  _context261.next = 10;\n                  break;\n\n                case 7:\n                  _context261.prev = 7;\n                  _context261.t0 = _context261[\"catch\"](2);\n                  return _context261.abrupt(\"return\", _context261.t0.throw());\n\n                case 10:\n                case \"end\":\n                  return _context261.stop();\n              }\n            }\n          }, _callee261, this, [[2, 7]]);\n        }));\n\n        function setBitrateLimit(_x397) {\n          return _setBitrateLimit2.apply(this, arguments);\n        }\n\n        return setBitrateLimit;\n      }()\n    }, {\n      key: \"setOptimizationMode\",\n      value: function () {\n        var _setOptimizationMode2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee262(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee262$(_context262) {\n            while (1) {\n              switch (_context262.prev = _context262.next) {\n                case 0:\n                  if (!(\"motion\" === e || \"detail\" === e || \"balanced\" === e)) {\n                    _context262.next = 13;\n                    break;\n                  }\n\n                  _context262.prev = 1;\n                  this._optimizationMode = e;\n                  _context262.next = 5;\n                  return Lh(this, pC.SET_OPTIMIZATION_MODE, e);\n\n                case 5:\n                  _context262.next = 10;\n                  break;\n\n                case 7:\n                  _context262.prev = 7;\n                  _context262.t0 = _context262[\"catch\"](1);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] set optimization mode failed\"), _context262.t0.toString()), _context262.t0;\n\n                case 10:\n                  vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set optimization mode success (\")).call(t, e, \")\"));\n                  _context262.next = 14;\n                  break;\n\n                case 13:\n                  vc.error(ad.INVALID_PARAMS, \"optimization mode must be motion, detail or balanced\");\n\n                case 14:\n                case \"end\":\n                  return _context262.stop();\n              }\n            }\n          }, _callee262, this, [[1, 7]]);\n        }));\n\n        function setOptimizationMode(_x398) {\n          return _setOptimizationMode2.apply(this, arguments);\n        }\n\n        return setOptimizationMode;\n      }()\n    }, {\n      key: \"setScalabiltyMode\",\n      value: function setScalabiltyMode(e) {\n        var t;\n        if (1 === e.numSpatialLayers && 1 !== e.numTemporalLayers) return vc.error(ad.INVALID_PARAMS, \"scalability mode currently not supported, no SVC.\"), void (this._scalabiltyMode = {\n          numSpatialLayers: 1,\n          numTemporalLayers: 1\n        });\n        this._scalabiltyMode = e, vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set scalability mode success (\")).call(t, e, \")\"));\n      }\n    }, {\n      key: \"updateMediaStreamTrackResolution\",\n      value: function updateMediaStreamTrackResolution() {\n        var _this233 = this;\n\n        bh(this._originMediaStreamTrack).then(function (_ref193) {\n          var _ref194 = _slicedToArray(_ref193, 2),\n              e = _ref194[0],\n              t = _ref194[1];\n\n          _this233._videoHeight = t, _this233._videoWidth = e;\n        }).catch(Oh);\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n      }\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {\n          fit: \"contain\"\n        };\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee263() {\n          return _regeneratorRuntime.wrap(function _callee263$(_context263) {\n            while (1) {\n              switch (_context263.prev = _context263.next) {\n                case 0:\n                case \"end\":\n                  return _context263.stop();\n              }\n            }\n          }, _callee263, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack5.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return !(!this._player || this._player.videoElementStatus !== wm.PLAYING);\n      }\n    }]);\n\n    return MS;\n  }(kC);\n\n  PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Object, Object]), BS(\"design:returntype\", void 0)], MS.prototype, \"play\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Boolean, Boolean]), BS(\"design:returntype\", As)], MS.prototype, \"setEnabled\", null), PS([LC(), yC({\n    report: wC\n  }), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Boolean]), BS(\"design:returntype\", As)], MS.prototype, \"setMuted\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", []), BS(\"design:returntype\", Object)], MS.prototype, \"getStats\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Boolean, Object]), BS(\"design:returntype\", As)], MS.prototype, \"setBeautyEffect\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", []), BS(\"design:returntype\", ImageData)], MS.prototype, \"getCurrentFrameData\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Object]), BS(\"design:returntype\", As)], MS.prototype, \"setBitrateLimit\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [String]), BS(\"design:returntype\", As)], MS.prototype, \"setOptimizationMode\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Object]), BS(\"design:returntype\", void 0)], MS.prototype, \"setScalabiltyMode\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", []), BS(\"design:returntype\", void 0)], MS.prototype, \"updateMediaStreamTrackResolution\", null);\n\n  var US =\n  /*#__PURE__*/\n  function (_MS) {\n    _inherits(US, _MS);\n\n    function US(e, t, i, r, n, s) {\n      var _this234;\n\n      _classCallCheck(this, US);\n\n      _this234 = _possibleConstructorReturn(this, _getPrototypeOf(US).call(this, e, t.encoderConfig ? Lc(t.encoderConfig) : {}, r, n, s)), _this234._enabled = !0, _this234._deviceName = \"default\", _this234.tryResumeVideoForIOS15WeChat =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee264() {\n        return _regeneratorRuntime.wrap(function _callee264$(_context264) {\n          while (1) {\n            switch (_context264.prev = _context264.next) {\n              case 0:\n                _context264.t0 = ya() && ba() && _this234._mediaStreamTrack.muted && _this234._enabled && !_this234._isClosed;\n\n                if (!_context264.t0) {\n                  _context264.next = 7;\n                  break;\n                }\n\n                vc.debug(\"[\".concat(_this234.getTrackId(), \"] try capture camera media device for interrupted iOS 15 device on WeChat.\"));\n                _context264.next = 5;\n                return _this234.setEnabled(!1);\n\n              case 5:\n                _context264.next = 7;\n                return _this234.setEnabled(!0);\n\n              case 7:\n              case \"end\":\n                return _context264.stop();\n            }\n          }\n        }, _callee264, this);\n      })), _this234._config = t, _this234._constraints = i, _this234._deviceName = e.label, _this234._config.encoderConfig && (_this234._encoderConfig = Lc(_this234._config.encoderConfig)), Au.on(cu.IOS_15_INTERRUPTION_END, _this234.tryResumeVideoForIOS15WeChat);\n      return _this234;\n    }\n\n    _createClass(US, [{\n      key: \"setDevice\",\n      value: function () {\n        var _setDevice4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee265(e) {\n          var t, i, _t170, _i120, _r75, _t171;\n\n          return _regeneratorRuntime.wrap(function _callee265$(_context265) {\n            while (1) {\n              switch (_context265.prev = _context265.next) {\n                case 0:\n                  i = wC.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Fm.CAM_VIDEO_TRACK_SET_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (!(vc.info(Xe(t = \"[\".concat(this.getTrackId(), \"] set device to \")).call(t, e)), this._enabled)) {\n                    _context265.next = 37;\n                    break;\n                  }\n\n                  _context265.prev = 2;\n                  _context265.next = 5;\n                  return Du.getDeviceById(e);\n\n                case 5:\n                  _t170 = _context265.sent;\n                  _i120 = {};\n                  _i120.video = LS({}, this._constraints), _i120.video.deviceId = {\n                    exact: e\n                  }, _i120.video.facingMode = void 0, this._originMediaStreamTrack.stop();\n                  _r75 = null;\n                  _context265.prev = 9;\n                  _context265.next = 12;\n                  return wu(_i120, this.getTrackId());\n\n                case 12:\n                  _r75 = _context265.sent;\n                  _context265.next = 24;\n                  break;\n\n                case 15:\n                  _context265.prev = 15;\n                  _context265.t0 = _context265[\"catch\"](9);\n                  vc.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context265.t0.toString());\n                  _context265.next = 20;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 20:\n                  _r75 = _context265.sent;\n                  _context265.next = 23;\n                  return this._updateOriginMediaStreamTrack(_r75.getVideoTracks()[0], !1);\n\n                case 23:\n                  throw _context265.t0;\n\n                case 24:\n                  _context265.next = 26;\n                  return this._updateOriginMediaStreamTrack(_r75.getVideoTracks()[0], !1);\n\n                case 26:\n                  this.updateMediaStreamTrackResolution();\n                  this._deviceName = _t170.label;\n                  this._config.cameraId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context265.next = 35;\n                  break;\n\n                case 32:\n                  _context265.prev = 32;\n                  _context265.t1 = _context265[\"catch\"](2);\n                  throw i.onError(_context265.t1), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context265.t1.toString()), _context265.t1;\n\n                case 35:\n                  _context265.next = 47;\n                  break;\n\n                case 37:\n                  _context265.prev = 37;\n                  _context265.next = 40;\n                  return Du.getDeviceById(e);\n\n                case 40:\n                  _t171 = _context265.sent;\n                  this._deviceName = _t171.label, this._config.cameraId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context265.next = 47;\n                  break;\n\n                case 44:\n                  _context265.prev = 44;\n                  _context265.t2 = _context265[\"catch\"](37);\n                  throw i.onError(_context265.t2), vc.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context265.t2.toString()), _context265.t2;\n\n                case 47:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] setDevice success\")), i.onSuccess();\n\n                case 48:\n                case \"end\":\n                  return _context265.stop();\n              }\n            }\n          }, _callee265, this, [[2, 32], [9, 15], [37, 44]]);\n        }));\n\n        function setDevice(_x399) {\n          return _setDevice4.apply(this, arguments);\n        }\n\n        return setDevice;\n      }()\n    }, {\n      key: \"setEnabled\",\n      value: function () {\n        var _setEnabled8 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee266(e, t) {\n          var i, r, n, _e168;\n\n          return _regeneratorRuntime.wrap(function _callee266$(_context266) {\n            while (1) {\n              switch (_context266.prev = _context266.next) {\n                case 0:\n                  if (t) {\n                    _context266.next = 4;\n                    break;\n                  }\n\n                  if (!(e === this._enabled)) {\n                    _context266.next = 3;\n                    break;\n                  }\n\n                  return _context266.abrupt(\"return\");\n\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n\n                case 4:\n                  vc.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e);\n                  _context266.next = 7;\n                  return this._enabledMutex.lock();\n\n                case 7:\n                  i = _context266.sent;\n\n                  if (e) {\n                    _context266.next = 19;\n                    break;\n                  }\n\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), t || (this._enabled = !1);\n                  _context266.prev = 10;\n                  _context266.next = 13;\n                  return Lh(this, pC.NEED_REMOVE_TRACK, this);\n\n                case 13:\n                  _context266.next = 18;\n                  break;\n\n                case 15:\n                  _context266.prev = 15;\n                  _context266.t0 = _context266[\"catch\"](10);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context266.t0.toString()), i(), _context266.t0;\n\n                case 18:\n                  return _context266.abrupt(\"return\", (vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\")), i()));\n\n                case 19:\n                  r = LS({}, this._constraints), n = Du.searchDeviceIdByName(this._deviceName);\n                  n && !r.deviceId && (r.deviceId = {\n                    exact: n\n                  });\n                  _context266.prev = 21;\n                  _context266.next = 24;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 24:\n                  _e168 = _context266.sent;\n                  _context266.next = 27;\n                  return this._updateOriginMediaStreamTrack(_e168.getVideoTracks()[0], !1);\n\n                case 27:\n                  _context266.next = 29;\n                  return Lh(this, pC.NEED_ADD_TRACK, this);\n\n                case 29:\n                  _context266.next = 34;\n                  break;\n\n                case 31:\n                  _context266.prev = 31;\n                  _context266.t1 = _context266[\"catch\"](21);\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] setEnabled true error\"), _context266.t1.toString()), i(), _context266.t1;\n\n                case 34:\n                  this.updateMediaStreamTrackResolution(), vc.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0), i();\n\n                case 35:\n                case \"end\":\n                  return _context266.stop();\n              }\n            }\n          }, _callee266, this, [[10, 15], [21, 31]]);\n        }));\n\n        function setEnabled(_x400, _x401) {\n          return _setEnabled8.apply(this, arguments);\n        }\n\n        return setEnabled;\n      }()\n    }, {\n      key: \"setEncoderConfiguration\",\n      value: function () {\n        var _setEncoderConfiguration2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee267(e, t) {\n          var i, _e169, r, n, _t172;\n\n          return _regeneratorRuntime.wrap(function _callee267$(_context267) {\n            while (1) {\n              switch (_context267.prev = _context267.next) {\n                case 0:\n                  i = wC.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Fm.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._enabled) {\n                    _context267.next = 4;\n                    break;\n                  }\n\n                  _e169 = new Ad(ad.TRACK_IS_DISABLED, \"can not set encoder configuration when track is disabled\");\n                  throw i.onError(_e169), _e169;\n\n                case 4:\n                  e = Lc(e), this._forceBitrateLimit && (e.bitrateMax = this._forceBitrateLimit.max_bitrate ? this._forceBitrateLimit.max_bitrate : e.bitrateMax, e.bitrateMin = this._forceBitrateLimit.min_bitrate ? this._forceBitrateLimit.min_bitrate : e.bitrateMin);\n                  r = Fh(this._config);\n                  r.encoderConfig = e;\n                  n = AI(r);\n                  vc.debug(\"[\".concat(this.getTrackId(), \"] setEncoderConfiguration applyConstraints\"), ge(e), ge(n));\n                  _context267.prev = 9;\n                  _context267.next = 12;\n                  return this._originMediaStreamTrack.applyConstraints(n);\n\n                case 12:\n                  this.updateMediaStreamTrackResolution();\n                  _context267.next = 19;\n                  break;\n\n                case 15:\n                  _context267.prev = 15;\n                  _context267.t0 = _context267[\"catch\"](9);\n                  _t172 = new Ad(ad.UNEXPECTED_ERROR, _context267.t0.toString());\n                  throw vc.error(\"[\".concat(this.getTrackId(), \"] applyConstraints error\"), _t172.toString()), i.onError(_t172), _t172;\n\n                case 19:\n                  this._config = r, this._constraints = n, this._encoderConfig = e;\n                  _context267.prev = 20;\n                  _context267.next = 23;\n                  return Lh(this, pC.NEED_RENEGOTIATE);\n\n                case 23:\n                  _context267.next = 28;\n                  break;\n\n                case 25:\n                  _context267.prev = 25;\n                  _context267.t1 = _context267[\"catch\"](20);\n                  return _context267.abrupt(\"return\", (i.onError(_context267.t1), _context267.t1.throw()));\n\n                case 28:\n                  i.onSuccess();\n\n                case 29:\n                case \"end\":\n                  return _context267.stop();\n              }\n            }\n          }, _callee267, this, [[9, 15], [20, 25]]);\n        }));\n\n        function setEncoderConfiguration(_x402, _x403) {\n          return _setEncoderConfiguration2.apply(this, arguments);\n        }\n\n        return setEncoderConfiguration;\n      }()\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {\n          mirror: !0,\n          fit: \"cover\"\n        };\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        var _this235 = this;\n\n        if ((va() || Oa()) && this._enabled && !this._isClosed && Au.duringInterruption) {\n          var _e170 =\n          /*#__PURE__*/\n          function () {\n            var _ref196 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee268() {\n              return _regeneratorRuntime.wrap(function _callee268$(_context268) {\n                while (1) {\n                  switch (_context268.prev = _context268.next) {\n                    case 0:\n                      Au.off(cu.IOS_INTERRUPTION_END, _e170);\n                      _context268.t0 = _this235._enabled && !_this235._isClosed;\n\n                      if (!_context268.t0) {\n                        _context268.next = 8;\n                        break;\n                      }\n\n                      vc.debug(\"[\".concat(_this235.getTrackId(), \"] try capture camera media device for interrupted iOS device.\"));\n                      _context268.next = 6;\n                      return _this235.setEnabled(!1);\n\n                    case 6:\n                      _context268.next = 8;\n                      return _this235.setEnabled(!0);\n\n                    case 8:\n                    case \"end\":\n                      return _context268.stop();\n                  }\n                }\n              }, _callee268, this);\n            }));\n\n            return function _e170() {\n              return _ref196.apply(this, arguments);\n            };\n          }();\n\n          Au.on(cu.IOS_INTERRUPTION_END, _e170);\n        } else vc.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(gC.TRACK_ENDED);\n      }\n    }, {\n      key: \"renewMediaStreamTrack\",\n      value: function () {\n        var _renewMediaStreamTrack6 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee269() {\n          var e, t, i;\n          return _regeneratorRuntime.wrap(function _callee269$(_context269) {\n            while (1) {\n              switch (_context269.prev = _context269.next) {\n                case 0:\n                  e = LS({}, this._constraints), t = Du.searchDeviceIdByName(this._deviceName);\n                  t && !e.deviceId && (e.deviceId = {\n                    exact: t\n                  });\n                  _context269.next = 4;\n                  return wu({\n                    video: this._constraints\n                  }, this.getTrackId());\n\n                case 4:\n                  i = _context269.sent;\n                  _context269.next = 7;\n                  return this._updateOriginMediaStreamTrack(i.getVideoTracks()[0], !0);\n\n                case 7:\n                  this.updateMediaStreamTrackResolution();\n\n                case 8:\n                case \"end\":\n                  return _context269.stop();\n              }\n            }\n          }, _callee269, this);\n        }));\n\n        function renewMediaStreamTrack() {\n          return _renewMediaStreamTrack6.apply(this, arguments);\n        }\n\n        return renewMediaStreamTrack;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        _get(_getPrototypeOf(US.prototype), \"close\", this).call(this), Au.off(cu.IOS_15_INTERRUPTION_END, this.tryResumeVideoForIOS15WeChat);\n      }\n    }]);\n\n    return US;\n  }(MS);\n\n  function QS(e, t) {\n    var i = e.match(/a=rtpmap:(\\d+) opus/);\n    if (!i || !i[0] || !i[1]) return e;\n    var r = i[1],\n        n = e.match(\"a=fmtp:\".concat(r, \".*\\r\\n\"));\n    if (!n || !n[0]) return e;\n    var s = \"a=fmtp:\".concat(r, \" minptime=10;useinbandfec=1;\");\n    var o;\n    (t.bitrate && !Ta() && (s += \"maxaveragebitrate=\".concat(Math.floor(1e3 * t.bitrate), \";\")), t.sampleRate) && (s += Xe(o = \"maxplaybackrate=\".concat(t.sampleRate, \";sprop-maxcapturerate=\")).call(o, t.sampleRate, \";\"));\n    return t.stereo && (s += \"stereo=1;sprop-stereo-1;\"), s += \"\\r\\n\", e = e.replace(n[0], s);\n  }\n\n  function FS(e) {\n    return e.replace(\"minptime=10\", \"minptime=10;stereo=1;sprop-stereo=1\");\n  }\n\n  function xS(e, t, i) {\n    var r = !1;\n\n    switch (t) {\n      case \"h264\":\n        return e;\n\n      case \"vp8\":\n        if (!Fc(\"SIMULCAST\")) return e;\n        r = !0, i && (i.numSpatialLayers = 2);\n\n      case \"vp9\":\n        r = !0;\n\n      case \"av1\":\n        r = !0;\n    }\n\n    if (r) {\n      var n;\n\n      var _t173 = qs(n = RegExp.prototype.test).call(n, /^([a-z])=(.*)/),\n          _r76 = e.split(\"m=\");\n\n      var _I2,\n          _f2,\n          _m2 = null,\n          _C4 = null,\n          _S3 = null,\n          _R4 = [],\n          _T = [],\n          _v = [],\n          _y = [],\n          _w = null,\n          _N3 = null,\n          _O = 0;\n\n      var _b = [],\n          _D = [];\n\n      for (var _e171 = 0; _e171 < _r76.length; ++_e171) {\n        if (_m2 = _r76[_e171].match(/a=msid-semantic:/), _m2) {\n          _m2 = _r76[_e171];\n          break;\n        }\n      }\n\n      for (var _e172 = 0; _e172 < _r76.length; ++_e172) {\n        if (_C4 = _r76[_e172].match(/audio /), _C4) {\n          _I2 = _e172, _C4 = \"m=\" + _r76[_e172];\n          break;\n        }\n      }\n\n      for (var _e173 = 0; _e173 < _r76.length; ++_e173) {\n        if (_S3 = _r76[_e173].match(/video /), _S3) {\n          _f2 = _e173, _S3 = \"m=\" + _r76[_e173];\n          break;\n        }\n      }\n\n      var s, o;\n      if (_m2) _R4 = Fr(s = _m2.split(/(\\r\\n|\\r|\\n)/)).call(s, _t173);\n      if (_R4.length > 0 && (_y = Xe(_y).call(_y, _R4)), _C4) _T = Fr(o = _C4.split(/(\\r\\n|\\r|\\n)/)).call(o, _t173);\n      if (!_S3) return e;\n      {\n        var a;\n        _v = Fr(a = _S3.split(/(\\r\\n|\\r|\\n)/)).call(a, _t173);\n\n        for (var _e174 = 0; _e174 < _v.length; ++_e174) {\n          if (null === _w && (_w = _v[_e174].match(/cname:/), null !== _w)) {\n            _w = \"cname:\" + _v[_e174].split(\"cname:\")[1];\n            break;\n          }\n        }\n\n        for (var _e175 = 0; _e175 < _v.length; ++_e175) {\n          null === _N3 && (_N3 = _v[_e175].match(/a=msid:/), null !== _N3 && (_N3 = \"msid:\" + _v[_e175].split(\":\")[1]));\n\n          if (_v[_e175].match(/a=ssrc-group:FID/)) {\n            var _t174 = _v[_e175].split(\" \");\n\n            _O = _e175, _b.push(Number(_t174[1])), _t174[2] && _D.push(Number(_t174[2])), _v.length = _O;\n            break;\n          }\n        }\n\n        for (var _e176 = 1; _e176 < i.numSpatialLayers; ++_e176) {\n          _b.push(_b[0] + _e176), _D.length > 0 && _D.push(_D[0] + _e176);\n        }\n\n        var _r77 = \"a=ssrc-group:SIM \";\n        var _n48 = \"a=ssrc-group:FID \";\n\n        for (var _e177 = 0; _e177 < _b.length; ++_e177) {\n          _r77 = Xe(_r77).call(_r77, String(_b[_e177])), _e177 < _b.length - 1 && (_r77 = Xe(_r77).call(_r77, \" \"));\n        }\n\n        _v.push(_r77);\n\n        for (var _e178 = 0; _e178 < i.numSpatialLayers; ++_e178) {\n          var c, d;\n\n          var _t175 = Xe(c = Xe(d = Xe(_n48).call(_n48, String(_b[_e178]))).call(d, \" \")).call(c, String(_D[_e178]));\n\n          _v.push(_t175);\n        }\n\n        for (var _t176 = 0; _t176 < i.numSpatialLayers; ++_t176) {\n          var l, A, u, h;\n          if (null === _w || null === _N3) return e;\n\n          var _i121 = Xe(l = Xe(A = \"a=ssrc:\".concat(String(_b[_t176]))).call(A, \" \")).call(l, _w),\n              _r78 = Xe(u = Xe(h = \"a=ssrc:\".concat(String(_b[_t176]))).call(h, \" \")).call(u, _N3);\n\n          _v.push(_i121), _v.push(_r78);\n        }\n\n        for (var _t177 = 0; _t177 < i.numSpatialLayers; ++_t177) {\n          var p, E, g, _;\n\n          if (null === _w || null === _N3) return e;\n\n          var _i122 = Xe(p = Xe(E = \"a=ssrc:\".concat(String(_D[_t177]))).call(E, \" \")).call(p, _w),\n              _r79 = Xe(g = Xe(_ = \"a=ssrc:\".concat(String(_D[_t177]))).call(_, \" \")).call(g, _N3);\n\n          _v.push(_i122), _v.push(_r79);\n        }\n      }\n      _I2 && _f2 && _I2 > _f2 ? (_y = Xe(_y).call(_y, _v), _y = Xe(_y).call(_y, _T)) : (_y = Xe(_y).call(_y, _T), _y = Xe(_y).call(_y, _v)), e = _y.join(\"\\r\\n\") + \"\\r\\n\";\n    }\n\n    return e;\n  }\n\n  PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [String]), BS(\"design:returntype\", As)], US.prototype, \"setDevice\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Boolean, Boolean]), BS(\"design:returntype\", As)], US.prototype, \"setEnabled\", null), PS([LC(), BS(\"design:type\", Function), BS(\"design:paramtypes\", [Object, Boolean]), BS(\"design:returntype\", As)], US.prototype, \"setEncoderConfiguration\", null);\n\n  var VS = function VS(e, t) {\n    var i = null;\n    if (\"h264\" === t ? i = e.match(/a=rtpmap:(\\d+) H264.*\\r\\n/) || e.match(/a=rtpmap:(\\d+) H264.*\\n/) : \"vp8\" === t ? i = e.match(/a=rtpmap:(\\d+) VP8.*\\r\\n/) || e.match(/a=rtpmap:(\\d+) VP8.*\\n/) : \"vp9\" === t ? i = e.match(/a=rtpmap:(\\d+) VP9.*\\r\\n/) || e.match(/a=rtpmap:(\\d+) VP9.*\\n/) : \"av1\" === t && (i = e.match(/a=rtpmap:(\\d+) AV1.*\\r\\n/) || e.match(/a=rtpmap:(\\d+) AV1.*\\n/)), i && i[1]) return i[1];\n  };\n\n  function GS(e, t) {\n    var i = function i(e, t) {\n      var n = VS(e, t);\n      return n ? i(r(e, n), t) : e;\n    },\n        r = function r(e, t) {\n      var i, r;\n      var n = qs(i = RegExp.prototype.test).call(i, /^([a-z])=(.*)/),\n          s = [\"a=rtpmap:\".concat(t), \"a=rtcp-fb:\".concat(t), \"a=fmtp:\".concat(t)],\n          o = Fr(r = e.split(/(\\r\\n|\\r|\\n)/)).call(r, n),\n          a = [];\n      Xi(o).call(o, function (e, t) {\n        Xi(s).call(s, function (i) {\n          eo(e).call(e, i) && a.push(t);\n        });\n      });\n      var c = OI(o).call(o, function (e) {\n        return eo(e).call(e, \"apt=\".concat(t));\n      });\n      var d;\n\n      if (c) {\n        a.push(c, c - 1);\n\n        var _e179 = o[c - 1].match(/a=rtpmap:(\\d+) rtx.*/);\n\n        d = _e179 && _e179[1];\n      }\n\n      Xi(a).call(a, function (e) {\n        o[e] = \"\";\n      });\n      var l = OI(o).call(o, function (e) {\n        return eo(e).call(e, \"m=video\");\n      });\n      return o[l] = o[l].replace(\" \".concat(t), \"\"), d && (o[l] = o[l].replace(\" \".concat(d), \"\")), Fr(o).call(o, function (e) {\n        return !!e;\n      }).join(\"\\r\\n\") + \"\\r\\n\";\n    };\n\n    return Xi(t).call(t, function (t) {\n      e = i(e, t);\n    }), e;\n  }\n\n  function jS(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function KS(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = jS(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = jS(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var WS =\n  /*#__PURE__*/\n  function (_DS) {\n    _inherits(WS, _DS);\n\n    function WS(e, t, i, r) {\n      var _this236;\n\n      _classCallCheck(this, WS);\n\n      _this236 = _possibleConstructorReturn(this, _getPrototypeOf(WS).call(this, t, t.stringUid || t.uid)), _this236.suspendTracks = [], _this236.type = \"pub\", _this236.detecting = !1, _this236._waitingSuccessResponse = !1, _this236.handleMuteVideoTrack = function (_ref197, i, r) {\n        var e = _ref197.track,\n            t = _ref197.muted;\n\n        _this236.setVideoTrackMuteState(t).then(i).catch(r);\n      }, _this236.handleMuteAudioTrack = function (_ref198, i, r) {\n        var e = _ref198.track,\n            t = _ref198.muted;\n\n        _this236.setAudioTrackMuteState(t, e).then(i).catch(r);\n      }, _this236.renegotiateWithGateway =\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee271() {\n        return _regeneratorRuntime.wrap(function _callee271$(_context271) {\n          while (1) {\n            switch (_context271.prev = _context271.next) {\n              case 0:\n                return _context271.abrupt(\"return\", (vc.debug(\"[pc-\".concat(_this236.pc.ID, \"] renegotiate start\")), new As(\n                /*#__PURE__*/\n                function () {\n                  var _ref200 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee270(e, t) {\n                    var i, r, _e180, n, s;\n\n                    return _regeneratorRuntime.wrap(function _callee270$(_context270) {\n                      while (1) {\n                        switch (_context270.prev = _context270.next) {\n                          case 0:\n                            _this236.connectionState = \"connecting\";\n\n                            i = function i(r) {\n                              \"connected\" === r && (_this236.off($m.CONNECTION_STATE_CHANGE, i), e()), \"disconnected\" === r && (_this236.off($m.CONNECTION_STATE_CHANGE, i), t(new Ad(lC.OPERATION_ABORTED, \"renegotiate abort\")));\n                            };\n\n                            _this236.on($m.CONNECTION_STATE_CHANGE, i);\n\n                            _context270.t0 = Ta() && Fc(\"SIMULCAST\") && _this236.videoTrack && _this236.videoTrack._scalabiltyMode;\n\n                            if (!_context270.t0) {\n                              _context270.next = 7;\n                              break;\n                            }\n\n                            _context270.next = 7;\n                            return _this236.addSimulcast4Firefox(_this236.videoTrack._scalabiltyMode);\n\n                          case 7:\n                            _context270.next = 9;\n                            return _this236.pc.createOfferSDP();\n\n                          case 9:\n                            r = _context270.sent;\n                            _this236.audioTrack && _this236.audioTrack._encoderConfig && (r = QS(r, _this236.audioTrack._encoderConfig));\n                            _this236.videoTrack && _this236.videoTrack._scalabiltyMode && (\"vp9\" !== _this236.codec && \"vp8\" !== _this236.codec ? (_this236.videoTrack._scalabiltyMode.numSpatialLayers = 1, _this236.videoTrack._scalabiltyMode.numTemporalLayers = 1) : (_this236.videoTrack._scalabiltyMode.numSpatialLayers > 1 || _this236.videoTrack._scalabiltyMode.numTemporalLayers > 1) && (r = xS(r, _this236.codec, _this236.videoTrack._scalabiltyMode)), vc.debug(\"renegoation spatial layers: \", _this236.videoTrack._scalabiltyMode.numSpatialLayers));\n                            _context270.next = 14;\n                            return _this236.pc.setOfferSDP(r);\n\n                          case 14:\n                            if (!(_this236.audioTrack instanceof VC)) {\n                              _context270.next = 17;\n                              break;\n                            }\n\n                            _e180 = {\n                              videoActive: _this236.videoTrack && !_this236.videoTrack.muted,\n                              audioActive: _this236.audioTrack && _this236.audioTrack.isActive\n                            };\n\n                            _this236.pc.onOfferSettled(_e180);\n\n                          case 17:\n                            _context270.next = 19;\n                            return kh(_assertThisInitialized(_assertThisInitialized(_this236)), $m.NEED_RENEGOTIATE, r);\n\n                          case 19:\n                            n = _context270.sent;\n                            _this236.videoTrack && !Ta() && Fc(\"SIMULCAST\") && _this236.videoTrack._scalabiltyMode && _this236.setSimulcastVideoRtpEncodingParameters(_this236.videoTrack._scalabiltyMode);\n\n                            s = function (e, t) {\n                              var i, r, n;\n                              var s = qs(i = RegExp.prototype.test).call(i, /^([a-z])=(.*)/),\n                                  o = Fr(r = e.split(/(\\r\\n|\\r|\\n)/)).call(r, s),\n                                  a = Fr(n = t.split(/(\\r\\n|\\r|\\n)/)).call(n, s);\n                              var c = null;\n                              var d = new Li();\n                              return Xi(o).call(o, function (e) {\n                                var t = e.match(/m=(audio|video)/);\n                                if (t && t[1]) return void (c = t[1]);\n                                if (!c) return;\n                                var i = e.match(/\\=(sendrecv|recvonly|sendonly|inactive)/);\n                                i && i[1] && d.set(c, i[1]);\n                              }), c = null, Es(a).call(a, function (e) {\n                                var t = e.match(/m=(audio|video)/);\n                                if (t && t[1]) return c = t[1], e;\n                                if (!c) return e;\n                                var i = e.match(/\\=(sendrecv|recvonly|sendonly|inactive)/);\n\n                                if (i && i[1]) {\n                                  var _t178 = d.get(c);\n\n                                  if (_t178 && _t178 !== i[1]) return e.replace(i[1], _t178);\n                                }\n\n                                return e;\n                              }).join(\"\\r\\n\") + \"\\r\\n\";\n                            }(r, _this236.updateAnswerSDP(n.sdp));\n\n                            _context270.next = 24;\n                            return _this236.pc.setAnswerSDP(s);\n\n                          case 24:\n                            vc.debug(\"[pc-\".concat(_this236.pc.ID, \"] renegotiate success\"));\n                            _this236.connectionState = \"connected\";\n\n                          case 26:\n                          case \"end\":\n                            return _context270.stop();\n                        }\n                      }\n                    }, _callee270, this);\n                  }));\n\n                  return function (_x404, _x405) {\n                    return _ref200.apply(this, arguments);\n                  };\n                }())));\n\n              case 1:\n              case \"end\":\n                return _context271.stop();\n            }\n          }\n        }, _callee271, this);\n      })), _this236.handleStreamRenegotiate = function (e, t) {\n        \"connected\" === _this236.connectionState ? _this236.renegotiateWithGateway().then(e).catch(t) : e();\n      }, _this236.handleReplaceTrack = function (e, t, i) {\n        if (_this236.audioTrack instanceof VC && \"audio\" === e.kind) return t();\n\n        _this236.pc.replaceTrack(e).then(function (e) {\n          return e ? _this236.renegotiateWithGateway() : As.resolve();\n        }).then(t).catch(i);\n      }, _this236.handleCloseAudioTrack = function (e) {}, _this236.handleCloseVideoTrack = function () {\n        _this236.lowStreamConnection && _this236.lowStreamConnection.videoTrack && _this236.lowStreamConnection.videoTrack.close();\n      }, _this236.handleGetSessionID = function (e) {\n        e(_this236.joinInfo.sid);\n      }, _this236.handleGetLocalVideoStats = function (e) {\n        e(_this236.statsCollector.getLocalVideoTrackStats(_this236.connectionId));\n      }, _this236.handleGetLocalAudioStats = function (e) {\n        e(_this236.statsCollector.getLocalAudioTrackStats(_this236.connectionId));\n      }, _this236.handleSetOptimizationMode = function (e, t, i) {\n        _this236.videoTrack && _this236.setRtpSenderParametersByTrackConfig(_this236.videoTrack).then(t).catch(i);\n      }, _this236.isLowStreamConnection = !!r, _this236.codec = i, _this236.statsCollector = e, _this236.statsCollector.addLocalConnection(_assertThisInitialized(_assertThisInitialized(_this236)));\n      return _this236;\n    }\n\n    _createClass(WS, [{\n      key: \"getAllTracks\",\n      value: function getAllTracks() {\n        var _e181;\n\n        var e = [];\n        return this.videoTrack && e.push(this.videoTrack), this.audioTrack && this.audioTrack instanceof VC ? e = Xe(e).call(e, this.audioTrack.trackList) : this.audioTrack && e.push(this.audioTrack), (_e181 = e).push.apply(_e181, _toConsumableArray(this.suspendTracks)), e;\n      }\n    }, {\n      key: \"addTracks\",\n      value: function () {\n        var _addTracks = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee272(e) {\n          var _this237 = this;\n\n          var t, i, r, _r80, _n49, _e182, _e183, _r81, _t179;\n\n          return _regeneratorRuntime.wrap(function _callee272$(_context272) {\n            while (1) {\n              switch (_context272.prev = _context272.next) {\n                case 0:\n                  t = Ul();\n\n                  if (!(\"connecting\" === this.connectionState)) {\n                    _context272.next = 13;\n                    break;\n                  }\n\n                  _context272.prev = 2;\n                  _context272.next = 5;\n                  return this.createWaitConnectionConnectedPromise();\n\n                case 5:\n                  _context272.next = 7;\n                  return this.addTracks(e);\n\n                case 7:\n                  return _context272.abrupt(\"return\", _context272.sent);\n\n                case 10:\n                  _context272.prev = 10;\n                  _context272.t0 = _context272[\"catch\"](2);\n                  throw new Ad(lC.OPERATION_ABORTED, \"publish abort\");\n\n                case 13:\n                  i = !1;\n                  r = this.getAllTracks();\n                  e = Uh(e = Fr(e).call(e, function (e) {\n                    return -1 === Os(r).call(r, e);\n                  }));\n                  _r80 = 0;\n\n                case 17:\n                  if (!(_r80 < e.length)) {\n                    _context272.next = 80;\n                    break;\n                  }\n\n                  _n49 = e[_r80];\n\n                  if (_n49 instanceof kC) {\n                    _context272.next = 21;\n                    break;\n                  }\n\n                  return _context272.abrupt(\"return\", new Ad(lC.INVALID_LOCAL_TRACK).throw());\n\n                case 21:\n                  if (!(_n49 instanceof MS && this.disabledVideoTrack)) {\n                    _context272.next = 25;\n                    break;\n                  }\n\n                  if (!(this.disabledVideoTrack !== _n49)) {\n                    _context272.next = 24;\n                    break;\n                  }\n\n                  return _context272.abrupt(\"return\", new Ad(lC.EXIST_DISABLED_VIDEO_TRACK).throw());\n\n                case 24:\n                  this.disabledVideoTrack = void 0;\n\n                case 25:\n                  if (!(_n49 instanceof MS && this.videoTrack)) {\n                    _context272.next = 27;\n                    break;\n                  }\n\n                  return _context272.abrupt(\"return\", new Ad(lC.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw());\n\n                case 27:\n                  if (!(_n49 instanceof QC)) {\n                    _context272.next = 61;\n                    break;\n                  }\n\n                  if (!(this.audioTrack && this.audioTrack._bypassWebAudio)) {\n                    _context272.next = 30;\n                    break;\n                  }\n\n                  throw vc.error(\"One of the audio track was created with config bypassWebAudio set to true, there is no way to publish multiple audio tracks.\"), new Ad(lC.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);\n\n                case 30:\n                  if (!(this.audioTrack instanceof VC)) {\n                    _context272.next = 38;\n                    break;\n                  }\n\n                  _context272.t1 = 0 === this.audioTrack.trackList.length;\n\n                  if (!_context272.t1) {\n                    _context272.next = 35;\n                    break;\n                  }\n\n                  _context272.next = 35;\n                  return this.pc.setAudioRtpEncodingParameters({\n                    active: !0\n                  });\n\n                case 35:\n                  this.audioTrack.addAudioTrack(_n49);\n                  _context272.next = 59;\n                  break;\n\n                case 38:\n                  if (!t.webAudioMediaStreamDest) {\n                    _context272.next = 55;\n                    break;\n                  }\n\n                  if (!_n49._bypassWebAudio) {\n                    _context272.next = 48;\n                    break;\n                  }\n\n                  if (!this.audioTrack) {\n                    _context272.next = 42;\n                    break;\n                  }\n\n                  throw vc.error(\"Can not publish another audio track with bypassWebAudio set to true.\"), new Ad(lC.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);\n\n                case 42:\n                  vc.debug(\"[\".concat(this.connectionId, \"] audio track doesn't not pass through WebAudio, use original audio track to publish\"));\n                  _context272.next = 45;\n                  return this.addTrackWithPC(_n49);\n\n                case 45:\n                  i = _context272.sent;\n                  _context272.next = 53;\n                  break;\n\n                case 48:\n                  _e182 = new VC();\n                  _n49.muted ? this.suspendTracks.push(_n49) : _e182.addAudioTrack(_n49);\n                  _context272.next = 52;\n                  return this.addTrackWithPC(_e182);\n\n                case 52:\n                  i = _context272.sent;\n\n                case 53:\n                  _context272.next = 59;\n                  break;\n\n                case 55:\n                  vc.debug(\"[\".concat(this.connectionId, \"] your browser does not support mixing track, use original audio track to publish\"));\n                  _context272.next = 58;\n                  return this.addTrackWithPC(_n49);\n\n                case 58:\n                  i = _context272.sent;\n\n                case 59:\n                  _context272.next = 77;\n                  break;\n\n                case 61:\n                  if (!(_n49 instanceof MS && this.isLowStreamConnection)) {\n                    _context272.next = 72;\n                    break;\n                  }\n\n                  _e183 = KS({}, {\n                    width: 160,\n                    height: 120,\n                    framerate: 15,\n                    bitrate: 50\n                  }, {}, this.lowStreamParameter);\n                  _r81 = void 0;\n                  if (t.supportDualStreamEncoding) vc.debug(\"[\".concat(this.connectionId, \"] creating low stream using rtp encoding.\")), this.lowStreamEncoding = eS(_e183, _n49), _r81 = _n49.clone({\n                    bitrateMax: _e183.bitrate,\n                    bitrateMin: _e183.bitrate\n                  });else {\n                    vc.debug(\"[\".concat(this.connectionId, \"] creating low stream using canvas.\"));\n                    _t179 = Ff(_n49, _e183);\n                    _r81 = new MS(_t179, {\n                      bitrateMax: _e183.bitrate,\n                      bitrateMin: _e183.bitrate\n                    });\n                  }\n\n                  _r81._hints.push(EC.LOW_STREAM);\n\n                  _context272.next = 68;\n                  return this.addTrackWithPC(_r81);\n\n                case 68:\n                  i = _context272.sent;\n                  this.bindTrackEvents(_r81);\n                  _context272.next = 77;\n                  break;\n\n                case 72:\n                  this.detecting = !0;\n                  Ua(function () {\n                    _this237.detecting = !1;\n                  }, 8e3);\n                  _context272.next = 76;\n                  return this.addTrackWithPC(_n49);\n\n                case 76:\n                  i = _context272.sent;\n\n                case 77:\n                  _r80 += 1;\n                  _context272.next = 17;\n                  break;\n\n                case 80:\n                  _context272.next = 82;\n                  return this.updateControlMessage();\n\n                case 82:\n                  _context272.t2 = i;\n\n                  if (!_context272.t2) {\n                    _context272.next = 86;\n                    break;\n                  }\n\n                  _context272.next = 86;\n                  return this.renegotiateWithGateway();\n\n                case 86:\n                  Xi(e).call(e, function (e) {\n                    return _this237.bindTrackEvents(e);\n                  });\n\n                case 87:\n                case \"end\":\n                  return _context272.stop();\n              }\n            }\n          }, _callee272, this, [[2, 10]]);\n        }));\n\n        function addTracks(_x406) {\n          return _addTracks.apply(this, arguments);\n        }\n\n        return addTracks;\n      }()\n    }, {\n      key: \"removeTracks\",\n      value: function () {\n        var _removeTracks = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee273(e, t) {\n          var _this238 = this;\n\n          var i, r, _i123, _n50, _i124, _e184, n, _t180;\n\n          return _regeneratorRuntime.wrap(function _callee273$(_context273) {\n            while (1) {\n              switch (_context273.prev = _context273.next) {\n                case 0:\n                  i = this.getAllTracks();\n                  e = Uh(e = Fr(e).call(e, function (e) {\n                    return -1 !== Os(i).call(i, e) || e === _this238.disabledVideoTrack;\n                  }));\n                  r = [];\n                  _i123 = 0;\n\n                case 4:\n                  if (!(_i123 < e.length)) {\n                    _context273.next = 25;\n                    break;\n                  }\n\n                  _n50 = e[_i123];\n\n                  if (!(this.unbindTrackEvents(_n50), this.audioTrack instanceof VC && _n50 instanceof QC)) {\n                    _context273.next = 10;\n                    break;\n                  }\n\n                  this.audioTrack.removeAudioTrack(_n50), Mh(this.suspendTracks, _n50), 0 === this.audioTrack.trackList.length && (r.push(this.audioTrack), this.audioTrack = void 0);\n                  _context273.next = 22;\n                  break;\n\n                case 10:\n                  if (!(_n50 instanceof QC)) {\n                    _context273.next = 14;\n                    break;\n                  }\n\n                  r.push(_n50), this.audioTrack = void 0;\n                  _context273.next = 22;\n                  break;\n\n                case 14:\n                  if (!(_n50 instanceof MS)) {\n                    _context273.next = 22;\n                    break;\n                  }\n\n                  if (!t) {\n                    _context273.next = 20;\n                    break;\n                  }\n\n                  if (!(this.disabledVideoTrack === _n50)) {\n                    _context273.next = 18;\n                    break;\n                  }\n\n                  return _context273.abrupt(\"return\", void (this.disabledVideoTrack = void 0));\n\n                case 18:\n                  _context273.next = 21;\n                  break;\n\n                case 20:\n                  this.disabledVideoTrack = this.videoTrack;\n\n                case 21:\n                  r.push(_n50), this.isLowStreamConnection && _n50.close(), this.videoTrack = void 0;\n\n                case 22:\n                  _i123 += 1;\n                  _context273.next = 4;\n                  break;\n\n                case 25:\n                  if (!(this.videoTrack || this.audioTrack)) {\n                    _context273.next = 55;\n                    break;\n                  }\n\n                  if (!(0 === r.length)) {\n                    _context273.next = 28;\n                    break;\n                  }\n\n                  return _context273.abrupt(\"return\");\n\n                case 28:\n                  if (!(\"connecting\" === this.connectionState)) {\n                    _context273.next = 37;\n                    break;\n                  }\n\n                  _context273.prev = 29;\n                  _context273.next = 32;\n                  return this.createWaitConnectionConnectedPromise();\n\n                case 32:\n                  _context273.next = 37;\n                  break;\n\n                case 34:\n                  _context273.prev = 34;\n                  _context273.t0 = _context273[\"catch\"](29);\n                  return _context273.abrupt(\"return\");\n\n                case 37:\n                  _i124 = 0;\n\n                case 38:\n                  if (!(_i124 < r.length)) {\n                    _context273.next = 51;\n                    break;\n                  }\n\n                  _e184 = r[_i124];\n                  vc.debug(Xe(n = \"[\".concat(this.connectionId, \"] remove \")).call(n, _e184.trackMediaType, \" from pc\"));\n                  _context273.next = 43;\n                  return this.pc.removeTrack(_e184._mediaStreamTrack);\n\n                case 43:\n                  _t180 = pa();\n                  _context273.t1 = \"Safari\" === _t180.name && \"11\" === _t180.version;\n\n                  if (!_context273.t1) {\n                    _context273.next = 48;\n                    break;\n                  }\n\n                  _context273.next = 48;\n                  return _e184.renewMediaStreamTrack();\n\n                case 48:\n                  _i124++;\n                  _context273.next = 38;\n                  break;\n\n                case 51:\n                  _context273.next = 53;\n                  return this.renegotiateWithGateway();\n\n                case 53:\n                  _context273.next = 57;\n                  break;\n\n                case 55:\n                  _context273.next = 57;\n                  return this.closeP2PConnection();\n\n                case 57:\n                case \"end\":\n                  return _context273.stop();\n              }\n            }\n          }, _callee273, this, [[29, 34]]);\n        }));\n\n        function removeTracks(_x407, _x408) {\n          return _removeTracks.apply(this, arguments);\n        }\n\n        return removeTracks;\n      }()\n    }, {\n      key: \"updateControlMessage\",\n      value: function () {\n        var _updateControlMessage = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee274() {\n          return _regeneratorRuntime.wrap(function _callee274$(_context274) {\n            while (1) {\n              switch (_context274.prev = _context274.next) {\n                case 0:\n                  _context274.t0 = this.audioTrack instanceof VC && \"connected\" === this.connectionState;\n\n                  if (!_context274.t0) {\n                    _context274.next = 10;\n                    break;\n                  }\n\n                  _context274.t1 = this.audioTrack;\n\n                  if (!_context274.t1) {\n                    _context274.next = 6;\n                    break;\n                  }\n\n                  _context274.next = 6;\n                  return kh(this, $m.NEED_CONTROL, {\n                    type: \"audio\",\n                    muted: !this.audioTrack.isActive\n                  });\n\n                case 6:\n                  _context274.t2 = this.videoTrack;\n\n                  if (!_context274.t2) {\n                    _context274.next = 10;\n                    break;\n                  }\n\n                  _context274.next = 10;\n                  return kh(this, $m.NEED_CONTROL, {\n                    type: \"video\",\n                    muted: this.videoTrack.muted\n                  });\n\n                case 10:\n                case \"end\":\n                  return _context274.stop();\n              }\n            }\n          }, _callee274, this);\n        }));\n\n        function updateControlMessage() {\n          return _updateControlMessage.apply(this, arguments);\n        }\n\n        return updateControlMessage;\n      }()\n    }, {\n      key: \"setSimulcastVideoRtpEncodingParameters\",\n      value: function () {\n        var _setSimulcastVideoRtpEncodingParameters = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee275(e) {\n          var t, i, _e185;\n\n          return _regeneratorRuntime.wrap(function _callee275$(_context275) {\n            while (1) {\n              switch (_context275.prev = _context275.next) {\n                case 0:\n                  t = this.pc.getSender(\"video\");\n\n                  if (t) {\n                    _context275.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(lC.LOW_STREAM_ENCODING_ERROR, \"Low stream has no video sender.\");\n\n                case 3:\n                  i = t.getParameters();\n\n                  if (!(!i.encodings || !i.encodings[0])) {\n                    _context275.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(lC.LOW_STREAM_ENCODING_ERROR, \"Low stream RtpEncodingParameters is empty.\");\n\n                case 6:\n                  if (this.videoTrack && this.videoTrack._encoderConfig && this.videoTrack._encoderConfig.bitrateMax && this.videoTrack._encoderConfig.bitrateMax > 200 && e.numSpatialLayers > 1) {\n                    _e185 = {\n                      high: 1e3 * (this.videoTrack._encoderConfig.bitrateMax - 50),\n                      medium: 5e4\n                    };\n                    i.encodings = [{\n                      active: !0,\n                      adaptivePtime: !1,\n                      networkPriority: \"high\",\n                      priority: \"high\",\n                      maxBitrate: _e185.high\n                    }, {\n                      active: !0,\n                      adaptivePtime: !1,\n                      networkPriority: \"low\",\n                      priority: \"low\",\n                      maxBitrate: _e185.medium,\n                      scaleResolutionDownBy: 4\n                    }];\n                  }\n\n                  _context275.next = 9;\n                  return t.setParameters(i);\n\n                case 9:\n                case \"end\":\n                  return _context275.stop();\n              }\n            }\n          }, _callee275, this);\n        }));\n\n        function setSimulcastVideoRtpEncodingParameters(_x409) {\n          return _setSimulcastVideoRtpEncodingParameters.apply(this, arguments);\n        }\n\n        return setSimulcastVideoRtpEncodingParameters;\n      }()\n    }, {\n      key: \"startP2PConnection\",\n      value: function startP2PConnection() {\n        var _this239 = this;\n\n        return new As(\n        /*#__PURE__*/\n        function () {\n          var _ref201 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee276(e, t) {\n            var i, r, _e186, _t181, _e187, _i125, _n51, _s45;\n\n            return _regeneratorRuntime.wrap(function _callee276$(_context276) {\n              while (1) {\n                switch (_context276.prev = _context276.next) {\n                  case 0:\n                    if (!(!_this239.audioTrack && !_this239.videoTrack)) {\n                      _context276.next = 2;\n                      break;\n                    }\n\n                    return _context276.abrupt(\"return\", t(new Ad(lC.UNEXPECTED_ERROR, \"no track to publish\")));\n\n                  case 2:\n                    i = function i(r) {\n                      if (\"connected\" === r && (_this239.off($m.CONNECTION_STATE_CHANGE, i), e()), \"disconnected\" === r) {\n                        if (_this239.off($m.CONNECTION_STATE_CHANGE, i), _this239.disconnectedReason) return t(_this239.disconnectedReason);\n                        t(new Ad(lC.OPERATION_ABORTED, \"publish abort\"));\n                      }\n                    };\n\n                    _this239.on($m.CONNECTION_STATE_CHANGE, i), _this239.disconnectedReason = void 0, _this239.connectionState = \"connecting\", _this239._waitingSuccessResponse = !0, _this239.startTime = La();\n                    _context276.prev = 4;\n                    _context276.t0 = !_this239.pc.audioTrack && _this239.audioTrack;\n\n                    if (!_context276.t0) {\n                      _context276.next = 9;\n                      break;\n                    }\n\n                    _context276.next = 9;\n                    return _this239.pc.addTrack(_this239.audioTrack._mediaStreamTrack);\n\n                  case 9:\n                    _context276.t1 = !_this239.pc.videoTrack && _this239.videoTrack;\n\n                    if (!_context276.t1) {\n                      _context276.next = 13;\n                      break;\n                    }\n\n                    _context276.next = 13;\n                    return _this239.pc.addTrack(_this239.videoTrack._mediaStreamTrack);\n\n                  case 13:\n                    _context276.t2 = Ta() && Fc(\"SIMULCAST\") && _this239.videoTrack && _this239.videoTrack._scalabiltyMode;\n\n                    if (!_context276.t2) {\n                      _context276.next = 17;\n                      break;\n                    }\n\n                    _context276.next = 17;\n                    return _this239.addSimulcast4Firefox(_this239.videoTrack._scalabiltyMode);\n\n                  case 17:\n                    _context276.next = 19;\n                    return _this239.pc.createOfferSDP();\n\n                  case 19:\n                    _e186 = _context276.sent;\n                    Fc(\"REMOVE_NEW_CODECS\") && (_e186 = \"vp9\" === _this239.codec ? GS(_e186, [\"av1\"]) : \"av1\" === _this239.codec ? GS(_e186, [\"vp9\"]) : GS(_e186, [\"vp9\", \"av1\"]));\n\n                    _t181 = function (e) {\n                      var t = {\n                        video: [],\n                        audio: []\n                      };\n                      return e.match(/ VP8/i) && t.video.push(\"VP8\"), e.match(/ VP9/i) && t.video.push(\"VP9\"), e.match(/ AV1X/i) && t.video.push(\"AV1\"), e.match(/ H264/i) && t.video.push(\"H264\"), e.match(/ opus/i) && t.audio.push(\"OPUS\"), t;\n                    }(_e186);\n\n                    _this239.videoTrack && !eo(r = _t181.video).call(r, _this239.codec.toUpperCase()) && vc.warning(\"current codec is not supported, support list: \".concat(_t181.video.join(\",\")));\n                    _this239.audioTrack && _this239.audioTrack._encoderConfig && (_e186 = QS(_e186, _this239.audioTrack._encoderConfig));\n                    _this239.videoTrack && !Ta() && _this239.videoTrack._scalabiltyMode && (\"vp9\" !== _this239.codec && \"vp8\" !== _this239.codec ? (_this239.videoTrack._scalabiltyMode.numSpatialLayers = 1, _this239.videoTrack._scalabiltyMode.numTemporalLayers = 1) : (_this239.videoTrack._scalabiltyMode.numSpatialLayers > 1 || _this239.videoTrack._scalabiltyMode.numTemporalLayers > 1) && (_e186 = xS(_e186, _this239.codec, _this239.videoTrack._scalabiltyMode)), vc.debug(\"spatial layers: \", _this239.videoTrack._scalabiltyMode.numSpatialLayers));\n                    _context276.next = 27;\n                    return _this239.pc.setOfferSDP(_e186);\n\n                  case 27:\n                    if (!(_this239.audioTrack instanceof VC)) {\n                      _context276.next = 30;\n                      break;\n                    }\n\n                    _e187 = {\n                      videoActive: _this239.videoTrack && !_this239.videoTrack.muted,\n                      audioActive: _this239.audioTrack && _this239.audioTrack.isActive\n                    };\n\n                    _this239.pc.onOfferSettled(_e187);\n\n                  case 30:\n                    _this239.videoTrack && _this239.setRtpSenderParametersByTrackConfig(_this239.videoTrack), vc.debug(\"[\".concat(_this239.connectionId, \"] create and set offer success\"));\n                    _i125 = {\n                      messageType: \"OFFER\",\n                      sdp: _e186,\n                      offererSessionId: 104,\n                      retry: !0\n                    };\n                    _context276.t3 = Ul().supportDualStreamEncoding && _this239.isLowStreamConnection && _this239.lowStreamEncoding && _this239.videoTrack;\n\n                    if (!_context276.t3) {\n                      _context276.next = 36;\n                      break;\n                    }\n\n                    _context276.next = 36;\n                    return _this239.setLowStreamEncoding(_this239.lowStreamEncoding, _this239.videoTrack);\n\n                  case 36:\n                    _this239.videoTrack && !Ta() && Fc(\"SIMULCAST\") && _this239.videoTrack._scalabiltyMode && _this239.setSimulcastVideoRtpEncodingParameters(_this239.videoTrack._scalabiltyMode);\n                    _context276.next = 39;\n                    return kh(_this239, $m.NEED_ANSWER, _i125);\n\n                  case 39:\n                    _n51 = _context276.sent;\n                    _s45 = _this239.updateAnswerSDP(_n51.sdp);\n                    _context276.next = 43;\n                    return _this239.pc.setAnswerSDP(_s45);\n\n                  case 43:\n                    vc.debug(\"[\".concat(_this239.connectionId, \"] set answer success\"));\n                    _context276.next = 46;\n                    return _this239.icePromise;\n\n                  case 46:\n                    _this239.connectionState = \"connected\";\n\n                    _this239.startUploadStats();\n\n                    _context276.next = 53;\n                    break;\n\n                  case 50:\n                    _context276.prev = 50;\n                    _context276.t4 = _context276[\"catch\"](4);\n                    _this239.off($m.CONNECTION_STATE_CHANGE, i), _this239.connectionState = \"disconnected\", _this239.reportPublishEvent(!1, _context276.t4.code), vc.error(\"[\".concat(_this239.connectionId, \"] connection error\"), _context276.t4.toString()), t(_context276.t4);\n\n                  case 53:\n                  case \"end\":\n                    return _context276.stop();\n                }\n              }\n            }, _callee276, this, [[4, 50]]);\n          }));\n\n          return function (_x410, _x411) {\n            return _ref201.apply(this, arguments);\n          };\n        }());\n      }\n    }, {\n      key: \"reportPublishEvent\",\n      value: function reportPublishEvent(e, t, i) {\n        var r;\n        this._waitingSuccessResponse = !1, wC.publish(this.joinInfo.sid, {\n          lts: this.startTime,\n          succ: e,\n          ec: t,\n          audioName: this.audioTrack && (this.audioTrack instanceof VC ? this.audioTrack.getSubTrackLabels().join(\",\") : this.audioTrack.getTrackLabel()),\n          videoName: this.videoTrack && this.videoTrack.getTrackLabel(),\n          screenshare: !(!this.videoTrack || -1 === Os(r = this.videoTrack._hints).call(r, EC.SCREEN_TRACK)),\n          audio: !!this.audioTrack,\n          video: !!this.videoTrack,\n          p2pid: this.pc.ID,\n          publishRequestid: this.ID,\n          extend: i\n        });\n      }\n    }, {\n      key: \"closeP2PConnection\",\n      value: function () {\n        var _closeP2PConnection = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee277(e) {\n          var _this240 = this;\n\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee277$(_context277) {\n            while (1) {\n              switch (_context277.prev = _context277.next) {\n                case 0:\n                  t = this.getAllTracks();\n                  (Xi(t).call(t, function (e) {\n                    _this240.unbindTrackEvents(e);\n                  }), this.isLowStreamConnection && this.videoTrack && this.videoTrack.close(), this.videoTrack = void 0, this.audioTrack instanceof VC) && (Xi(i = this.audioTrack.trackList).call(i, function (e) {\n                    _this240.audioTrack.removeAudioTrack(e);\n                  }), this.audioTrack.close());\n                  this.audioTrack = void 0;\n                  this.stopUploadStats();\n                  this.statsCollector.removeConnection(this.connectionId);\n                  _context277.next = 7;\n                  return this.closePC(e);\n\n                case 7:\n                  this.connectionState = \"disconnected\";\n                  this.removeAllListeners();\n\n                case 9:\n                case \"end\":\n                  return _context277.stop();\n              }\n            }\n          }, _callee277, this);\n        }));\n\n        function closeP2PConnection(_x412) {\n          return _closeP2PConnection.apply(this, arguments);\n        }\n\n        return closeP2PConnection;\n      }()\n    }, {\n      key: \"getNetworkQuality\",\n      value: function getNetworkQuality() {\n        var e;\n        var t = this.pc.getStats();\n        if (!t.videoSend[0] && !t.audioSend[0]) return 1;\n        var i = Ph(this, $m.NEED_SIGNAL_RTT),\n            r = t.videoSend[0] ? t.videoSend[0].rttMs : void 0,\n            n = t.audioSend[0] ? t.audioSend[0].rttMs : void 0,\n            s = r && n ? (r + n) / 2 : r || n,\n            o = (s && i ? (s + i) / 2 : s || i) || 0,\n            a = 100 * t.sendPacketLossRate * .7 / 50 + .3 * o / 1500,\n            c = a < .17 ? 1 : a < .36 ? 2 : a < .59 ? 3 : a < .1 ? 4 : 5;\n\n        if (this.videoTrack && this.videoTrack._encoderConfig && -1 === Os(e = this.videoTrack._hints).call(e, EC.SCREEN_TRACK)) {\n          var _e188 = this.videoTrack._encoderConfig.bitrateMax,\n              _i126 = t.bitrate.actualEncoded;\n\n          if (_e188 && _i126) {\n            var _t182 = (1e3 * _e188 - _i126) / (1e3 * _e188);\n\n            return Hc[_t182 < .15 ? 0 : _t182 < .3 ? 1 : _t182 < .45 ? 2 : _t182 < .6 ? 3 : 4][c];\n          }\n        }\n\n        return c;\n      }\n    }, {\n      key: \"handleUpdateBitrateLimit\",\n      value: function handleUpdateBitrateLimit(e) {\n        this.videoTrack && this.videoTrack.setBitrateLimit(e);\n      }\n    }, {\n      key: \"setAudioTrackMuteState\",\n      value: function () {\n        var _setAudioTrackMuteState = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee278(e, t) {\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee278$(_context278) {\n            while (1) {\n              switch (_context278.prev = _context278.next) {\n                case 0:\n                  if (this.audioTrack instanceof VC) {\n                    _context278.next = 2;\n                    break;\n                  }\n\n                  return _context278.abrupt(\"return\", void vc.debug(\"[\".concat(this.connectionId, \"] set audio mute in unsupported environment\")));\n\n                case 2:\n                  i = this.audioTrack;\n                  _context278.prev = 3;\n\n                  if (!e) {\n                    _context278.next = 12;\n                    break;\n                  }\n\n                  if (!(i.removeAudioTrack(t), 0 === i.trackList.length)) {\n                    _context278.next = 9;\n                    break;\n                  }\n\n                  vc.debug(Xe(r = \"[\".concat(this.connectionId, \"] set audio encoding active, id: \")).call(r, t.getTrackId(), \", state: \", !1));\n                  _context278.next = 9;\n                  return this.pc.setAudioRtpEncodingParameters({\n                    active: !1\n                  });\n\n                case 9:\n                  this.suspendTracks.push(t);\n                  _context278.next = 16;\n                  break;\n\n                case 12:\n                  _context278.next = 14;\n                  return this.pc.setAudioRtpEncodingParameters({\n                    active: !0\n                  });\n\n                case 14:\n                  i.addAudioTrack(t);\n                  Mh(this.suspendTracks, t);\n\n                case 16:\n                  _context278.next = 21;\n                  break;\n\n                case 18:\n                  _context278.prev = 18;\n                  _context278.t0 = _context278[\"catch\"](3);\n                  vc.warning(Xe(n = \"[\".concat(this.connectionId, \"] set audio muted error \")).call(n, _context278.t0, \", fallback to set enabled\"));\n\n                case 21:\n                  _context278.next = 23;\n                  return kh(this, $m.NEED_CONTROL, {\n                    type: \"audio\",\n                    muted: !(!this.audioTrack || this.audioTrack.isActive)\n                  });\n\n                case 23:\n                case \"end\":\n                  return _context278.stop();\n              }\n            }\n          }, _callee278, this, [[3, 18]]);\n        }));\n\n        function setAudioTrackMuteState(_x413, _x414) {\n          return _setAudioTrackMuteState.apply(this, arguments);\n        }\n\n        return setAudioTrackMuteState;\n      }()\n    }, {\n      key: \"setVideoTrackMuteState\",\n      value: function () {\n        var _setVideoTrackMuteState = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee279(e) {\n          var t, i, r, n, s, o, a;\n          return _regeneratorRuntime.wrap(function _callee279$(_context279) {\n            while (1) {\n              switch (_context279.prev = _context279.next) {\n                case 0:\n                  t = !e;\n                  i = !1;\n\n                  if (!(pa().name === vm.FIREFOX)) {\n                    _context279.next = 6;\n                    break;\n                  }\n\n                  i = !0;\n                  _context279.next = 15;\n                  break;\n\n                case 6:\n                  _context279.prev = 6;\n                  vc.debug(Xe(r = Xe(n = \"[\".concat(this.connectionId, \"] set video encoding active, id: \")).call(n, this.videoTrack && this.videoTrack.getTrackId(), \", state: \")).call(r, t));\n                  _context279.next = 10;\n                  return this.pc.setVideoRtpEncodingParameters({\n                    active: t\n                  });\n\n                case 10:\n                  _context279.next = 15;\n                  break;\n\n                case 12:\n                  _context279.prev = 12;\n                  _context279.t0 = _context279[\"catch\"](6);\n                  vc.warning(Xe(s = \"[\".concat(this.connectionId, \"] set video encoding active error \")).call(s, _context279.t0, \", fallback to set enabled\")), i = !0;\n\n                case 15:\n                  i && this.videoTrack && (vc.debug(Xe(o = Xe(a = \"[\".concat(this.connectionId, \"] set video encoding active fallback to enabled on firefox, type: \")).call(a, this.videoTrack && this.videoTrack.getTrackId(), \", state: \")).call(o, t)), this.videoTrack.getMediaStreamTrack().enabled = t);\n                  this.lowStreamConnection && this.lowStreamConnection.setVideoTrackMuteState(e);\n                  _context279.t1 = !this.isLowStreamConnection;\n\n                  if (!_context279.t1) {\n                    _context279.next = 21;\n                    break;\n                  }\n\n                  _context279.next = 21;\n                  return kh(this, $m.NEED_CONTROL, {\n                    type: \"video\",\n                    muted: e\n                  });\n\n                case 21:\n                case \"end\":\n                  return _context279.stop();\n              }\n            }\n          }, _callee279, this, [[6, 12]]);\n        }));\n\n        function setVideoTrackMuteState(_x415) {\n          return _setVideoTrackMuteState.apply(this, arguments);\n        }\n\n        return setVideoTrackMuteState;\n      }()\n    }, {\n      key: \"uploadStats\",\n      value: function uploadStats(e, t) {\n        var _this241 = this;\n\n        var i = this.audioTrack ? function (e, t) {\n          var i = e.audioSend[0];\n          if (!i) return null;\n          var r = {\n            id: wh(10, \"\"),\n            timestamp: new Date(e.timestamp).toISOString(),\n            mediaType: \"audio\",\n            type: \"ssrc\",\n            ssrc: i.ssrc.toString()\n          };\n          return r.A_astd = t._originMediaStreamTrack.enabled && t._mediaStreamTrack.enabled ? \"0\" : \"1\", i.inputLevel ? r.A_ail = Math.round(100 * i.inputLevel).toString() : r.A_ail = Math.round(100 * t._source.getAccurateVolumeLevel()).toString(), r.A_apil = Math.round(100 * t._source.getAccurateVolumeLevel()).toString(), r;\n        }(e, this.audioTrack) : void 0,\n            r = this.videoTrack ? function (e, t) {\n          var i = e.videoSend[0];\n          if (!i) return null;\n          var r = {\n            id: wh(10, \"\"),\n            timestamp: new Date(e.timestamp).toISOString(),\n            mediaType: \"video\",\n            type: \"ssrc\",\n            ssrc: i.ssrc.toString()\n          };\n\n          switch (r.A_vstd = t._originMediaStreamTrack && !t._originMediaStreamTrack.enabled || !t._mediaStreamTrack.enabled ? \"1\" : \"0\", i.sentFrame && (r.A_fhs = i.sentFrame.height.toString(), r.A_frs = i.sentFrame.frameRate.toString(), r.A_fws = i.sentFrame.width.toString()), i.adaptionChangeReason) {\n            case \"none\":\n              r.A_ac = \"0\";\n              break;\n\n            case \"cpu\":\n              r.A_ac = \"1\";\n              break;\n\n            case \"bandwidth\":\n              r.A_ac = \"2\";\n              break;\n\n            case \"other\":\n              r.A_ac = \"3\";\n          }\n\n          return r.A_nr = i.nacksCount.toString(), i.avgEncodeMs && (r.A_aem = i.avgEncodeMs.toFixed(0).toString()), r;\n        }(e, this.videoTrack) : void 0,\n            n = ZC(e, t),\n            s = function (e) {\n          var t = {\n            id: \"bweforvideo\",\n            timestamp: new Date(e.timestamp).toISOString(),\n            type: \"VideoBwe\"\n          };\n          return e.bitrate.retransmit && (t.A_rb = e.bitrate.retransmit.toString()), e.bitrate.targetEncoded && (t.A_teb = e.bitrate.targetEncoded.toString()), t.A_aeb = e.bitrate.actualEncoded.toString(), t.A_tb = e.bitrate.transmit.toString(), void 0 !== e.sendBandwidth && (t.A_asb = e.sendBandwidth.toString()), t;\n        }(e);\n\n        i && Qh(function () {\n          return _this241.emit($m.NEED_UPLOAD, zm.PUBLISH_STATS, i);\n        }), r && Qh(function () {\n          return _this241.emit($m.NEED_UPLOAD, zm.PUBLISH_STATS, KS({}, r, {}, n));\n        }), s && Qh(function () {\n          return _this241.emit($m.NEED_UPLOAD, zm.PUBLISH_STATS, s);\n        });\n      }\n    }, {\n      key: \"uploadSlowStats\",\n      value: function uploadSlowStats(e) {\n        var _this242 = this;\n\n        var t = ZC(e);\n        t && Qh(function () {\n          return _this242.emit($m.NEED_UPLOAD, zm.PUBLISH_STATS, t);\n        });\n      }\n    }, {\n      key: \"uploadRelatedStats\",\n      value: function uploadRelatedStats(e) {\n        var _this243 = this;\n\n        var t = function (e) {\n          var t = e.videoSend[0];\n          return t ? {\n            mediaType: \"video\",\n            isVideoMute: !1,\n            frameRateInput: t.inputFrame && t.inputFrame.frameRate.toString(),\n            frameRateSent: t.sentFrame && t.sentFrame.frameRate.toString(),\n            googRtt: t.rttMs.toString()\n          } : null;\n        }(e);\n\n        t && (t.isVideoMute = !(!this.videoTrack || !this.videoTrack.muted), Qh(function () {\n          _this243.emit($m.NEED_UPLOAD, zm.PUBLISH_RELATED_STATS, t);\n        }));\n      }\n    }, {\n      key: \"addSimulcast4Firefox\",\n      value: function () {\n        var _addSimulcast4Firefox = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee280(e) {\n          var _e189, _t183, _i127;\n\n          return _regeneratorRuntime.wrap(function _callee280$(_context280) {\n            while (1) {\n              switch (_context280.prev = _context280.next) {\n                case 0:\n                  if (!(Ta() && this.videoTrack && this.videoTrack._encoderConfig && this.videoTrack._encoderConfig.bitrateMax && this.videoTrack._encoderConfig.bitrateMax > 200 && e.numSpatialLayers > 1 && \"vp8\" === this.codec)) {\n                    _context280.next = 10;\n                    break;\n                  }\n\n                  _e189 = this.pc.getSender(\"video\");\n\n                  if (!_e189) {\n                    _context280.next = 10;\n                    break;\n                  }\n\n                  _t183 = _e189.getParameters();\n                  vc.debug(\"getParameters : \", _t183), _t183 || vc.error(\"[\".concat(this.connectionId, \"] get sender parameter error.\"));\n                  _i127 = {\n                    high: 1e3 * (this.videoTrack._encoderConfig.bitrateMax - 50),\n                    medium: 5e4\n                  };\n                  _t183.encodings = [{\n                    rid: \"m\",\n                    active: !0,\n                    maxBitrate: _i127.medium,\n                    scaleResolutionDownBy: 4\n                  }, {\n                    rid: \"h\",\n                    active: !0,\n                    maxBitrate: _i127.high\n                  }];\n                  _context280.next = 9;\n                  return _e189.setParameters(_t183);\n\n                case 9:\n                  vc.debug(\"setParameters : \", _t183);\n\n                case 10:\n                case \"end\":\n                  return _context280.stop();\n              }\n            }\n          }, _callee280, this);\n        }));\n\n        function addSimulcast4Firefox(_x416) {\n          return _addSimulcast4Firefox.apply(this, arguments);\n        }\n\n        return addSimulcast4Firefox;\n      }()\n    }, {\n      key: \"bindTrackEvents\",\n      value: function bindTrackEvents(e) {\n        var t;\n        e.addListener(pC.NEED_RESET_REMOTE_SDP, qs(t = this.handleResetRemoteSdp).call(t, this)), this.isLowStreamConnection || (e instanceof QC ? (e.addListener(pC.GET_STATS, this.handleGetLocalAudioStats), e.addListener(pC.NEED_CLOSE, this.handleCloseAudioTrack), e.addListener(pC.SET_AUDIO_TRACK_MUTED, this.handleMuteAudioTrack)) : e instanceof MS && (e.addListener(pC.GET_STATS, this.handleGetLocalVideoStats), e.addListener(pC.NEED_CLOSE, this.handleCloseVideoTrack), e.addListener(pC.SET_OPTIMIZATION_MODE, this.handleSetOptimizationMode), e.addListener(pC.SET_VIDEO_TRACK_MUTED, this.handleMuteVideoTrack)), e.addListener(pC.NEED_RENEGOTIATE, this.handleStreamRenegotiate), e.addListener(pC.NEED_REPLACE_TRACK, this.handleReplaceTrack), e.addListener(pC.NEED_SESSION_ID, this.handleGetSessionID));\n      }\n    }, {\n      key: \"unbindTrackEvents\",\n      value: function unbindTrackEvents(e) {\n        this.isLowStreamConnection || (e instanceof QC ? (e.off(pC.GET_STATS, this.handleGetLocalAudioStats), e.off(pC.NEED_CLOSE, this.handleCloseAudioTrack), e.off(pC.SET_AUDIO_TRACK_MUTED, this.handleMuteAudioTrack)) : e instanceof MS && (e.off(pC.GET_STATS, this.handleGetLocalVideoStats), e.off(pC.NEED_CLOSE, this.handleCloseVideoTrack), e.off(pC.SET_OPTIMIZATION_MODE, this.handleSetOptimizationMode), e.off(pC.SET_VIDEO_TRACK_MUTED, this.handleMuteVideoTrack)), e.off(pC.NEED_RENEGOTIATE, this.handleStreamRenegotiate), e.off(pC.NEED_REPLACE_TRACK, this.handleReplaceTrack), e.off(pC.NEED_SESSION_ID, this.handleGetSessionID));\n      }\n    }, {\n      key: \"addTrackWithPC\",\n      value: function () {\n        var _addTrackWithPC = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee281(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee281$(_context281) {\n            while (1) {\n              switch (_context281.prev = _context281.next) {\n                case 0:\n                  if (!(\"connecting\" === this.connectionState)) {\n                    _context281.next = 2;\n                    break;\n                  }\n\n                  return _context281.abrupt(\"return\", new Ad(lC.INVALID_OPERATION, \"last publish operation has not finished\").throw());\n\n                case 2:\n                  t = this.videoTrack;\n                  i = !1;\n\n                  if (!(this.audioTrack && e instanceof VC)) {\n                    _context281.next = 12;\n                    break;\n                  }\n\n                  this.audioTrack = e;\n                  vc.debug(\"[\".concat(this.connectionId, \"] replace pc audio track\"));\n                  _context281.next = 9;\n                  return this.pc.replaceTrack(e._mediaStreamTrack);\n\n                case 9:\n                  i = _context281.sent;\n                  _context281.next = 35;\n                  break;\n\n                case 12:\n                  if (!(this.videoTrack && e instanceof MS)) {\n                    _context281.next = 20;\n                    break;\n                  }\n\n                  this.videoTrack = e;\n                  vc.debug(\"[\".concat(this.connectionId, \"] replace pc video track\"));\n                  _context281.next = 17;\n                  return this.pc.replaceTrack(e._mediaStreamTrack);\n\n                case 17:\n                  i = _context281.sent;\n                  _context281.next = 35;\n                  break;\n\n                case 20:\n                  if (!(e instanceof QC)) {\n                    _context281.next = 28;\n                    break;\n                  }\n\n                  this.audioTrack = e;\n                  vc.debug(\"[\".concat(this.connectionId, \"] add audio track to pc\"));\n                  _context281.next = 25;\n                  return this.pc.addTrack(e._mediaStreamTrack);\n\n                case 25:\n                  i = !0;\n                  _context281.next = 35;\n                  break;\n\n                case 28:\n                  _context281.t0 = e instanceof MS;\n\n                  if (!_context281.t0) {\n                    _context281.next = 35;\n                    break;\n                  }\n\n                  this.videoTrack = e;\n                  vc.debug(\"[\".concat(this.connectionId, \"] add video track to pc\"));\n                  _context281.next = 34;\n                  return this.pc.addTrack(e._mediaStreamTrack);\n\n                case 34:\n                  i = !0;\n\n                case 35:\n                  _context281.t1 = \"connected\" === this.connectionState && this.videoTrack !== t && this.videoTrack;\n\n                  if (!_context281.t1) {\n                    _context281.next = 39;\n                    break;\n                  }\n\n                  _context281.next = 39;\n                  return this.setRtpSenderParametersByTrackConfig(this.videoTrack);\n\n                case 39:\n                  return _context281.abrupt(\"return\", \"disconnected\" !== this.connectionState && i);\n\n                case 40:\n                case \"end\":\n                  return _context281.stop();\n              }\n            }\n          }, _callee281, this);\n        }));\n\n        function addTrackWithPC(_x417) {\n          return _addTrackWithPC.apply(this, arguments);\n        }\n\n        return addTrackWithPC;\n      }()\n    }, {\n      key: \"handleResetRemoteSdp\",\n      value: function handleResetRemoteSdp() {\n        var _this244 = this;\n\n        return new As(function (e, t) {\n          var i;\n          vc.info(\"[pc-\".concat(_this244.pc.ID, \"] start reset remote sdp\"));\n\n          var r = _this244.pc.getOfferSDP(),\n              n = _this244.pc.getAnswerSDP();\n\n          if (!n || !r) return e();\n          var s = n.sdp;\n          var o;\n          _this244.videoTrack && _this244.videoTrack._encoderConfig && -1 === Os(i = _this244.videoTrack._hints).call(i, EC.SCREEN_TRACK) && (o = function (e, t) {\n            var i, r;\n            var n = t.bitrateMin;\n            var s = t.bitrateMax;\n            var o = qs(i = RegExp.prototype.test).call(i, /^([a-z])=(.*)/),\n                a = Fr(r = e.split(/(\\r\\n|\\r|\\n)/)).call(r, o);\n\n            if (s) {\n              var _e190 = \"AS\";\n              pa().name === Aa.FIREFOX && (s = 1e3 * (s >>> 0), _e190 = \"TIAS\");\n\n              var _t184 = OI(a).call(a, function (t) {\n                return eo(t).call(t, _e190);\n              });\n\n              var c;\n              _t184 > 0 && (a[_t184] = Xe(c = \"b=\".concat(_e190, \":\")).call(c, s));\n            }\n\n            if (n) {\n              var _e191 = OI(a).call(a, function (e) {\n                return eo(e).call(e, \"x-google-min-bitrate\");\n              });\n\n              _e191 > 0 && (a[_e191] = a[_e191].replace(/x-google-min-bitrate=(.*)/, \"x-google-min-bitrate=\".concat(n)));\n            }\n\n            return a.join(\"\\r\\n\") + \"\\r\\n\";\n          }(s, _this244.videoTrack._encoderConfig)), s !== o ? _this244.pc.setOfferSDP(r.sdp).then(function () {\n            if (o) return _this244.pc.setAnswerSDP(o);\n          }).then(e).catch(function (e) {\n            var i;\n            vc.error(Xe(i = \"[pc-\".concat(_this244.pc.ID, \"] reset remote sdp error, \")).call(i, e)), t(e);\n          }) : vc.debug(\"[pc-\".concat(_this244.pc.ID, \"] remote sdp have no not changed\"));\n        });\n      }\n    }, {\n      key: \"setRtpSenderParametersByTrackConfig\",\n      value: function () {\n        var _setRtpSenderParametersByTrackConfig = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee282(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee282$(_context282) {\n            while (1) {\n              switch (_context282.prev = _context282.next) {\n                case 0:\n                  if (Ul().supportSetRtpSenderParameters) {\n                    _context282.next = 2;\n                    break;\n                  }\n\n                  return _context282.abrupt(\"return\", void vc.debug(\"[\".concat(this.connectionId, \"] do not support set pc rtp sender, skip\")));\n\n                case 2:\n                  t = {};\n                  i = \"balanced\";\n                  \"motion\" === e._optimizationMode ? i = \"maintain-framerate\" : \"detail\" === e._optimizationMode && (i = \"maintain-resolution\");\n                  vc.debug(\"[\".concat(this.connectionId, \"] set pc rtp sender\"), t, i);\n                  _context282.next = 8;\n                  return this.pc.setRtpSenderParameters(t, i);\n\n                case 8:\n                case \"end\":\n                  return _context282.stop();\n              }\n            }\n          }, _callee282, this);\n        }));\n\n        function setRtpSenderParametersByTrackConfig(_x418) {\n          return _setRtpSenderParametersByTrackConfig.apply(this, arguments);\n        }\n\n        return setRtpSenderParametersByTrackConfig;\n      }()\n    }, {\n      key: \"updateAnswerSDP\",\n      value: function updateAnswerSDP(e) {\n        var t, i;\n        return e = e.replace(/a=x-google-flag:conference\\r\\n/g, \"\"), this.videoTrack && Os(t = this.videoTrack._hints).call(t, EC.SCREEN_TRACK), this.videoTrack && this.videoTrack._encoderConfig && -1 === Os(i = this.videoTrack._hints).call(i, EC.SCREEN_TRACK) && (e = function (e, t, i) {\n          var r = Ul(),\n              n = i.bitrateMin;\n          var s = i.bitrateMax;\n          var o = e.match(/m=video.*\\r\\n/) || e.match(/m=video.*\\n/);\n\n          if (o && o.length > 0 && r.supportMinBitrate && n) {\n            var _i128 = VS(e, t);\n\n            if (_i128) if (Fc(\"SIMULCAST\")) {\n              var a, c;\n\n              var _t185 = s ? .7 * s : 300;\n\n              e = e.replace(o[0], Xe(a = Xe(c = \"\".concat(o[0], \"a=fmtp:\")).call(c, _i128, \" x-google-start-bitrate=\")).call(a, _t185, \"\\r\\n\"));\n            } else {\n              var d, l;\n              e = e.replace(o[0], Xe(d = Xe(l = \"\".concat(o[0], \"a=fmtp:\")).call(l, _i128, \" x-google-min-bitrate=\")).call(d, n, \"\\r\\n\"));\n            }\n          }\n\n          if (o && o.length > 0 && s) {\n            var A, u;\n            var _t186 = \"AS\";\n            pa().name === Aa.FIREFOX && (s = 1e3 * (s >>> 0), _t186 = \"TIAS\"), e = e.replace(o[0], Xe(A = Xe(u = \"\".concat(o[0], \"b=\")).call(u, _t186, \":\")).call(A, s, \"\\r\\n\"));\n          }\n\n          return e;\n        }(e, this.codec, this.videoTrack._encoderConfig)), this.audioTrack && this.audioTrack._encoderConfig && (e = QS(e, this.audioTrack._encoderConfig)), e = function (e) {\n          var t = pa();\n          return t.name !== Aa.SAFARI && t.os !== la.IOS ? e : e.replace(/a=.*video-orientation\\r\\n/g, \"\");\n        }(e);\n      }\n    }, {\n      key: \"createPC\",\n      value: function createPC() {\n        this.pc = new wS({\n          turnServer: this.joinInfo.turnServer\n        }), this.updateICEPromise();\n      }\n    }, {\n      key: \"closePC\",\n      value: function () {\n        var _closePC = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee283(e) {\n          return _regeneratorRuntime.wrap(function _callee283$(_context283) {\n            while (1) {\n              switch (_context283.prev = _context283.next) {\n                case 0:\n                  this.pc.onICEConnectionStateChange = void 0;\n                  this.pc.close();\n                  _context283.t0 = !e;\n\n                  if (!_context283.t0) {\n                    _context283.next = 7;\n                    break;\n                  }\n\n                  _context283.next = 6;\n                  return kh(this, $m.NEED_UNPUB);\n\n                case 6:\n                  _context283.t0 = _context283.sent;\n\n                case 7:\n                  return _context283.abrupt(\"return\", _context283.t0);\n\n                case 8:\n                case \"end\":\n                  return _context283.stop();\n              }\n            }\n          }, _callee283, this);\n        }));\n\n        function closePC(_x419) {\n          return _closePC.apply(this, arguments);\n        }\n\n        return closePC;\n      }()\n    }, {\n      key: \"onPCDisconnected\",\n      value: function onPCDisconnected(e) {\n        this.reportPublishEvent(!1, e.code);\n      }\n    }, {\n      key: \"setLowStreamEncoding\",\n      value: function () {\n        var _setLowStreamEncoding = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee284(e, t) {\n          var _i129, _r82, _i130, _n52;\n\n          return _regeneratorRuntime.wrap(function _callee284$(_context284) {\n            while (1) {\n              switch (_context284.prev = _context284.next) {\n                case 0:\n                  _context284.prev = 0;\n                  _context284.next = 3;\n                  return this.pc.setVideoRtpEncodingParameters(e);\n\n                case 3:\n                  _i129 = _context284.sent;\n                  _r82 = t.getMediaStreamTrack();\n\n                  if (!(e.scaleResolutionDownBy && _i129.encodings[0].scaleResolutionDownBy !== e.scaleResolutionDownBy)) {\n                    _context284.next = 11;\n                    break;\n                  }\n\n                  _i130 = t._videoHeight || _r82.getSettings().height, _n52 = t._videoWidth || _r82.getSettings().width;\n                  _context284.t0 = _i130 && _n52;\n\n                  if (!_context284.t0) {\n                    _context284.next = 11;\n                    break;\n                  }\n\n                  _context284.next = 11;\n                  return _r82.applyConstraints({\n                    height: _i130 / e.scaleResolutionDownBy,\n                    width: _n52 / e.scaleResolutionDownBy\n                  });\n\n                case 11:\n                  _context284.t1 = e.maxFramerate && _i129.encodings[0].maxFramerate !== e.maxFramerate;\n\n                  if (!_context284.t1) {\n                    _context284.next = 15;\n                    break;\n                  }\n\n                  _context284.next = 15;\n                  return _r82.applyConstraints({\n                    frameRate: e.maxFramerate\n                  });\n\n                case 15:\n                  _context284.next = 22;\n                  break;\n\n                case 17:\n                  _context284.prev = 17;\n                  _context284.t2 = _context284[\"catch\"](0);\n\n                  if (!(_context284.t2 instanceof Ad)) {\n                    _context284.next = 21;\n                    break;\n                  }\n\n                  throw _context284.t2;\n\n                case 21:\n                  throw new Ad(lC.LOW_STREAM_ENCODING_ERROR, _context284.t2.message);\n\n                case 22:\n                case \"end\":\n                  return _context284.stop();\n              }\n            }\n          }, _callee284, this, [[0, 17]]);\n        }));\n\n        function setLowStreamEncoding(_x420, _x421) {\n          return _setLowStreamEncoding.apply(this, arguments);\n        }\n\n        return setLowStreamEncoding;\n      }()\n    }]);\n\n    return WS;\n  }(DS);\n\n  function HS(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function YS(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = HS(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = HS(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var qS =\n  /*#__PURE__*/\n  function (_DC2) {\n    _inherits(qS, _DC2);\n\n    function qS(e, t, i, r) {\n      var _this245;\n\n      _classCallCheck(this, qS);\n\n      var n, s, o;\n      _this245 = _possibleConstructorReturn(this, _getPrototypeOf(qS).call(this, e, Xe(n = Xe(s = Xe(o = \"track-\".concat(e.kind, \"-\")).call(o, t, \"-\")).call(s, r, \"_\")).call(n, wh(5, \"\")))), _this245._isDestroyed = !1, _this245._userId = t, _this245._uintId = i;\n      return _this245;\n    }\n\n    _createClass(qS, [{\n      key: \"getUserId\",\n      value: function getUserId() {\n        return this._userId;\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function _updateOriginMediaStreamTrack(e) {\n        this._originMediaStreamTrack = e, this._mediaStreamTrack = e, this._updatePlayerSource();\n      }\n    }, {\n      key: \"_destroy\",\n      value: function _destroy() {\n        this._isDestroyed = !0, vc.info(\"[\".concat(this.getTrackId(), \"] is destroyed\")), this.stop(), _get(_getPrototypeOf(qS.prototype), \"close\", this).call(this);\n      }\n    }]);\n\n    return qS;\n  }(DC);\n\n  var JS =\n  /*#__PURE__*/\n  function (_qS) {\n    _inherits(JS, _qS);\n\n    function JS(e, t, i, r) {\n      var _this246;\n\n      _classCallCheck(this, JS);\n\n      _this246 = _possibleConstructorReturn(this, _getPrototypeOf(JS).call(this, e, t, i, r)), _this246.trackMediaType = \"video\", _this246.updateMediaStreamTrackResolution();\n      return _this246;\n    }\n\n    _createClass(JS, [{\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead\");\n        }, \"remoteVideoTrackGetStatsWarning\");\n        return Ph(this, pC.GET_STATS) || YS({}, nC);\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        var _this247 = this;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var i = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Od.REMOTE_VIDEO_TRACK_PLAY,\n          options: [this.getTrackId(), \"string\" == typeof e ? e : \"HTMLElement\", t]\n        });\n\n        if (\"string\" == typeof e) {\n          var _t187 = document.getElementById(e);\n\n          var r;\n          if (_t187) e = _t187;else vc.warning(Xe(r = \"[\".concat(this.getTrackId(), '] can not find \"#')).call(r, e, '\" element, use document.body')), e = document.body;\n        }\n\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), ge(t));\n        var n = YS({\n          fit: \"cover\"\n        }, t, {\n          trackId: this.getTrackId(),\n          element: e\n        });\n        this._player ? this._player.updateConfig(n) : (this._player = new x_(n), this._player.updateVideoTrack(this._mediaStreamTrack), this._player.onFirstVideoFrameDecoded = function () {\n          _this247.emit(_C.FIRST_FRAME_DECODED);\n        }), this._player.play(), i.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Od.REMOTE_VIDEO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        if (!this._player) return e.onSuccess();\n        this._player.destroy(), this._player = void 0, vc.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")), e.onSuccess();\n      }\n    }, {\n      key: \"getCurrentFrameData\",\n      value: function getCurrentFrameData() {\n        return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n      }\n    }, {\n      key: \"updateMediaStreamTrackResolution\",\n      value: function updateMediaStreamTrackResolution() {\n        var _this248 = this;\n\n        bh(this._originMediaStreamTrack).then(function (_ref202) {\n          var _ref203 = _slicedToArray(_ref202, 2),\n              e = _ref203[0],\n              t = _ref203[1];\n\n          _this248._videoHeight = t, _this248._videoWidth = e;\n        }).catch(Oh);\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n      }\n    }, {\n      key: \"getVideoElementVisibleStatus\",\n      value: function getVideoElementVisibleStatus() {\n        try {\n          var e, t;\n\n          var _i131 = null == this || null === (e = this._player) || void 0 === e ? void 0 : e.getContainerElement(),\n              _r83 = {\n            track: this,\n            element: null == this || null === (t = this._player) || void 0 === t ? void 0 : t.getVideoElement(),\n            slot: null == _i131 ? void 0 : _i131.parentElement\n          },\n              _n53 = _r83.element,\n              _s46 = _r83.slot;\n\n          if (this.isPlaying && _n53 instanceof HTMLVideoElement && _s46 instanceof HTMLElement) {\n            var _e192 = gI.checkOneElementVisible(_n53),\n                _t188 = er({}, _e192);\n\n            if (!_t188.visible) {\n              wC.reportApiInvoke(null, {\n                tag: xm.TRACER,\n                name: Od.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,\n                options: [this.getTrackId()]\n              }).onSuccess(\"Not visible because of \".concat(_t188.reason));\n            }\n\n            return _t188;\n          }\n\n          return;\n        } catch (e) {\n          throw new Ad(ad.GET_VIDEO_ELEMENT_VISIBLE_ERROR, e.message);\n        }\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return !(!this._player || this._player.videoElementStatus !== wm.PLAYING);\n      }\n    }]);\n\n    return JS;\n  }(qS);\n\n  var XS =\n  /*#__PURE__*/\n  function (_qS2) {\n    _inherits(XS, _qS2);\n\n    function XS(e, t, i, r) {\n      var _this249;\n\n      _classCallCheck(this, XS);\n\n      _this249 = _possibleConstructorReturn(this, _getPrototypeOf(XS).call(this, e, t, i, r)), _this249.trackMediaType = \"audio\", _this249._useAudioElement = !0, _this249._volume = 100, _this249._source = new Iu(e, !0), _this249._source.once(eC.RECEIVE_TRACK_BUFFER, function () {\n        _this249.emit(_C.FIRST_FRAME_DECODED);\n      });\n      return _this249;\n    }\n\n    _createClass(XS, [{\n      key: \"setAudioFrameCallback\",\n      value: function setAudioFrameCallback(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4096;\n        if (!e) return this._source.removeAllListeners(eC.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n        this._source.startGetAudioBuffer(t), this._source.removeAllListeners(eC.ON_AUDIO_BUFFER), this._source.on(eC.ON_AUDIO_BUFFER, function (t) {\n          return e(t);\n        });\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        var t = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Od.REMOTE_AUDIO_SET_VOLUME,\n          options: [this.getTrackId(), e]\n        }, 300);\n        this._volume = e, this._useAudioElement ? Lu.setVolume(this.getTrackId(), e) : this._source.setVolume(e / 100), t.onSuccess();\n      }\n    }, {\n      key: \"setPlaybackDevice\",\n      value: function () {\n        var _setPlaybackDevice4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee285(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee285$(_context285) {\n            while (1) {\n              switch (_context285.prev = _context285.next) {\n                case 0:\n                  t = wC.reportApiInvoke(null, {\n                    tag: xm.TRACER,\n                    name: Od.REMOTE_AUDIO_SET_OUTPUT_DEVICE,\n                    options: [this.getTrackId(), e]\n                  });\n\n                  if (this._useAudioElement) {\n                    _context285.next = 3;\n                    break;\n                  }\n\n                  throw new Ad(ad.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n\n                case 3:\n                  _context285.prev = 3;\n                  _context285.next = 6;\n                  return Lu.setSinkID(this.getTrackId(), e);\n\n                case 6:\n                  _context285.next = 11;\n                  break;\n\n                case 8:\n                  _context285.prev = 8;\n                  _context285.t0 = _context285[\"catch\"](3);\n                  throw t.onError(_context285.t0), _context285.t0;\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context285.stop();\n              }\n            }\n          }, _callee285, this, [[3, 8]]);\n        }));\n\n        function setPlaybackDevice(_x422) {\n          return _setPlaybackDevice4.apply(this, arguments);\n        }\n\n        return setPlaybackDevice;\n      }()\n    }, {\n      key: \"getVolumeLevel\",\n      value: function getVolumeLevel() {\n        return this._source.getAccurateVolumeLevel();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        Vh(function () {\n          vc.warning(\"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead\");\n        }, \"remoteAudioTrackGetStatsWarning\");\n        return Ph(this, pC.GET_STATS) || YS({}, rC);\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        var e = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Od.REMOTE_AUDIO_TRACK_PLAY,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._useAudioElement ? (vc.debug(\"[\".concat(this.getTrackId(), \"] use audio element to play\")), Lu.play(this._mediaStreamTrack, this.getTrackId(), this._volume)) : this._source.play(), e.onSuccess();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var e = wC.reportApiInvoke(null, {\n          tag: xm.TRACER,\n          name: Od.REMOTE_AUDIO_TRACK_STOP,\n          options: [this.getTrackId()]\n        });\n        vc.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._useAudioElement ? Lu.stop(this.getTrackId()) : this._source.stop(), e.onSuccess();\n      }\n    }, {\n      key: \"_destroy\",\n      value: function _destroy() {\n        _get(_getPrototypeOf(XS.prototype), \"_destroy\", this).call(this), this._source.destroy();\n      }\n    }, {\n      key: \"_isFreeze\",\n      value: function _isFreeze() {\n        return this._source.isFreeze;\n      }\n    }, {\n      key: \"_updatePlayerSource\",\n      value: function _updatePlayerSource() {\n        vc.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && Lu.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n      }\n    }, {\n      key: \"isPlaying\",\n      get: function get() {\n        return this._useAudioElement ? Lu.isPlaying(this.getTrackId()) : this._source.isPlayed;\n      }\n    }]);\n\n    return XS;\n  }(qS);\n\n  var zS =\n  /*#__PURE__*/\n  function (_DS2) {\n    _inherits(zS, _DS2);\n\n    function zS(e, t, i, r) {\n      var _this250;\n\n      _classCallCheck(this, zS);\n\n      _this250 = _possibleConstructorReturn(this, _getPrototypeOf(zS).call(this, i, e.uid)), _this250.type = \"sub\", _this250.unusedTracks = [], _this250.onTrack = function (e) {\n        var t, i;\n        if (\"audio\" === e.kind && !_this250.subscribeOptions.audio || \"video\" === e.kind && !_this250.subscribeOptions.video) return _this250.unusedTracks.push(e), void vc.debug(Xe(i = \"[\".concat(_this250.connectionId, \"] unused ontrack event, kind: \")).call(i, e.kind));\n        vc.debug(Xe(t = \"[\".concat(_this250.connectionId, \"] emit pc ontrack after subscribe \")).call(t, e.kind), e);\n        var r = \"audio\" === e.kind ? _this250.user._audioTrack : _this250.user._videoTrack;\n        var n, s;\n        r ? r._updateOriginMediaStreamTrack(e) : \"audio\" === e.kind ? (_this250.pc._statsFilter.setIsFirstAudioDecoded(!1), _this250.user._audioTrack = new XS(e, _this250.getUserId(), _this250.user._uintid, _this250.joinInfo.clientId), vc.info(Xe(n = \"[\".concat(_this250.connectionId, \"] create remote audio track: \")).call(n, _this250.user._audioTrack.getTrackId())), _this250.bindTrackEvents(_this250.user._audioTrack)) : (_this250.user._videoTrack = new JS(e, _this250.getUserId(), _this250.user._uintid, _this250.joinInfo.clientId), vc.info(Xe(s = \"[\".concat(_this250.connectionId, \"] create remote video track: \")).call(s, _this250.user._videoTrack.getTrackId())), _this250.bindTrackEvents(_this250.user._videoTrack));\n      }, _this250.handleGetRemoteAudioStats = function (e) {\n        e(_this250.statsCollector.getRemoteAudioTrackStats(_this250.connectionId));\n      }, _this250.handleGetRemoteVideoStats = function (e) {\n        e(_this250.statsCollector.getRemoteVideoTrackStats(_this250.connectionId));\n      }, _this250.handleGetSessionID = function (e) {\n        e(_this250.joinInfo.sid);\n      }, _this250.user = e, _this250.statsCollector = t, _this250.statsCollector.addRemoteConnection(_assertThisInitialized(_assertThisInitialized(_this250))), _this250.subscribeOptions = r;\n      return _this250;\n    }\n\n    _createClass(zS, [{\n      key: \"startP2PConnection\",\n      value: function () {\n        var _startP2PConnection2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee287() {\n          var _this251 = this;\n\n          return _regeneratorRuntime.wrap(function _callee287$(_context287) {\n            while (1) {\n              switch (_context287.prev = _context287.next) {\n                case 0:\n                  return _context287.abrupt(\"return\", new As(\n                  /*#__PURE__*/\n                  function () {\n                    var _ref204 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee286(e, t) {\n                      var i, r, n, _e193, _t189, _i133, _r84, _a19, _c17, s, o;\n\n                      return _regeneratorRuntime.wrap(function _callee286$(_context286) {\n                        while (1) {\n                          switch (_context286.prev = _context286.next) {\n                            case 0:\n                              i = function i(r) {\n                                if (\"connected\" === r && (wC.subscribe(_this251.joinInfo.sid, {\n                                  lts: _this251.startTime,\n                                  succ: !0,\n                                  video: _this251.subscribeOptions.video,\n                                  audio: _this251.subscribeOptions.audio,\n                                  peerid: _this251.user.uid,\n                                  ec: null,\n                                  subscribeRequestid: _this251.ID,\n                                  p2pid: _this251.pc.ID\n                                }), _this251.off($m.CONNECTION_STATE_CHANGE, i), e()), \"disconnected\" === r) {\n                                  if (_this251.off($m.CONNECTION_STATE_CHANGE, i), _this251.disconnectedReason) return t(_this251.disconnectedReason);\n                                  t(new Ad(ad.OPERATION_ABORTED, \"subscribe abort\"));\n                                }\n                              };\n\n                              if (!(_this251.on($m.CONNECTION_STATE_CHANGE, i), _this251.disconnectedReason = void 0, _this251.connectionState = \"connecting\", _this251.startTime = La(), !_this251.subscribeOptions)) {\n                                _context286.next = 3;\n                                break;\n                              }\n\n                              return _context286.abrupt(\"return\", void t(new Ad(ad.UNEXPECTED_ERROR, \"no subscribe options\")));\n\n                            case 3:\n                              r = new MediaStream(), n = new As(function (e) {\n                                _this251.pc.onTrack = function (t, i) {\n                                  var n, s;\n                                  if (\"audio\" === t.kind && !_this251.subscribeOptions.audio || \"video\" === t.kind && !_this251.subscribeOptions.video) return _this251.unusedTracks.push(t), void vc.debug(Xe(s = \"[\".concat(_this251.connectionId, \"] unused ontrack event \")).call(s, t.kind));\n                                  r.addTrack(t);\n                                  var o = {\n                                    audio: r.getAudioTracks().length > 0,\n                                    video: r.getVideoTracks().length > 0\n                                  };\n                                  vc.debug(Xe(n = \"[\".concat(_this251.connectionId, \"] subscribe ontrack: \")).call(n, t.kind), i, t), function (e, t) {\n                                    var i, r;\n                                    var n = od(i = ir(e)).call(i),\n                                        s = od(r = ir(t)).call(r);\n\n                                    for (var _i132 = 0; _i132 < n.length; _i132 += 1) {\n                                      if (n[_i132] !== s[_i132]) return !1;\n                                      if (e[n[_i132]] !== t[n[_i132]]) return !1;\n                                    }\n\n                                    return !0;\n                                  }(o, _this251.subscribeOptions) && (_this251.pc.onTrack = _this251.onTrack, vc.debug(\"[\".concat(_this251.connectionId, \"] get all subscribed tracks\")), e(r));\n                                };\n                              });\n                              _context286.prev = 4;\n\n                              _context286.t0 = function (e) {\n                                return pa().name !== Aa.FIREFOX ? e : e.replace(\"/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\", \" http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\");\n                              };\n\n                              _context286.t1 = FS;\n                              _context286.next = 9;\n                              return _this251.pc.createOfferSDP();\n\n                            case 9:\n                              _context286.t2 = _context286.sent;\n                              _context286.t3 = (0, _context286.t1)(_context286.t2);\n                              _e193 = (0, _context286.t0)(_context286.t3);\n                              _context286.next = 14;\n                              return _this251.pc.setOfferSDP(_e193);\n\n                            case 14:\n                              vc.debug(\"[\".concat(_this251.connectionId, \"] create and set offer success\"));\n                              _t189 = {\n                                messageType: \"OFFER\",\n                                sdp: _e193,\n                                offererSessionId: 104,\n                                retry: !0\n                              };\n                              _context286.next = 18;\n                              return kh(_this251, $m.NEED_ANSWER, _t189);\n\n                            case 18:\n                              _i133 = _context286.sent;\n                              _context286.next = 21;\n                              return _this251.pc.setAnswerSDP(FS(_i133.sdp));\n\n                            case 21:\n                              vc.debug(\"[\".concat(_this251.connectionId, \"] set answer success\"));\n                              _context286.next = 24;\n                              return As.all([n, _this251.icePromise]);\n\n                            case 24:\n                              _r84 = _context286.sent;\n                              _a19 = _r84[0].getAudioTracks()[0];\n                              _c17 = _r84[0].getVideoTracks()[0];\n                              if (_a19) if (_this251.user._audioTrack) _this251.user._audioTrack._updateOriginMediaStreamTrack(_a19);else _this251.user._audioTrack = new XS(_a19, _this251.getUserId(), _this251.user._uintid, _this251.joinInfo.clientId), vc.info(Xe(s = \"[\".concat(_this251.connectionId, \"] create remote audio track: \")).call(s, _this251.user._audioTrack.getTrackId())), _this251.bindTrackEvents(_this251.user._audioTrack);\n                              if (_c17) if (_this251.user._videoTrack) _this251.user._videoTrack._updateOriginMediaStreamTrack(_c17);else _this251.user._videoTrack = new JS(_c17, _this251.getUserId(), _this251.user._uintid, _this251.joinInfo.clientId), vc.info(Xe(o = \"[\".concat(_this251.connectionId, \"] create remote video track: \")).call(o, _this251.user._videoTrack.getTrackId())), _this251.bindTrackEvents(_this251.user._videoTrack);\n                              _this251.connectionState = \"connected\", _this251.startUploadStats();\n                              _context286.next = 35;\n                              break;\n\n                            case 32:\n                              _context286.prev = 32;\n                              _context286.t4 = _context286[\"catch\"](4);\n                              _this251.off($m.CONNECTION_STATE_CHANGE, i), _this251.connectionState = \"disconnected\", wC.subscribe(_this251.joinInfo.sid, {\n                                lts: _this251.startTime,\n                                succ: !1,\n                                video: _this251.subscribeOptions.video,\n                                audio: _this251.subscribeOptions.audio,\n                                peerid: _this251.user.uid,\n                                ec: _context286.t4.code,\n                                subscribeRequestid: _this251.ID,\n                                p2pid: _this251.pc.ID\n                              }), t(_context286.t4);\n\n                            case 35:\n                            case \"end\":\n                              return _context286.stop();\n                          }\n                        }\n                      }, _callee286, this, [[4, 32]]);\n                    }));\n\n                    return function (_x423, _x424) {\n                      return _ref204.apply(this, arguments);\n                    };\n                  }()));\n\n                case 1:\n                case \"end\":\n                  return _context287.stop();\n              }\n            }\n          }, _callee287, this);\n        }));\n\n        function startP2PConnection() {\n          return _startP2PConnection2.apply(this, arguments);\n        }\n\n        return startP2PConnection;\n      }()\n    }, {\n      key: \"closeP2PConnection\",\n      value: function () {\n        var _closeP2PConnection2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee288(e) {\n          return _regeneratorRuntime.wrap(function _callee288$(_context288) {\n            while (1) {\n              switch (_context288.prev = _context288.next) {\n                case 0:\n                  _context288.t0 = \"disconnected\" !== this.connectionState;\n\n                  if (!_context288.t0) {\n                    _context288.next = 10;\n                    break;\n                  }\n\n                  this.stopUploadStats();\n                  this.statsCollector.removeConnection(this.connectionId);\n                  this.connectionState = \"disconnected\";\n                  _context288.next = 7;\n                  return this.setSubscribeOptions({\n                    audio: !1,\n                    video: !1\n                  });\n\n                case 7:\n                  _context288.next = 9;\n                  return this.closePC(e);\n\n                case 9:\n                  this.removeAllListeners();\n\n                case 10:\n                case \"end\":\n                  return _context288.stop();\n              }\n            }\n          }, _callee288, this);\n        }));\n\n        function closeP2PConnection(_x425) {\n          return _closeP2PConnection2.apply(this, arguments);\n        }\n\n        return closeP2PConnection;\n      }()\n    }, {\n      key: \"getNetworkQuality\",\n      value: function getNetworkQuality() {\n        var e = this.pc.getStats();\n        if (!e.audioRecv[0] && !e.videoRecv[0]) return 1;\n        var t = Ph(this, $m.NEED_SIGNAL_RTT),\n            i = e.rtt,\n            r = (i && t ? (i + t) / 2 : i || t) || 0,\n            n = e.audioRecv[0] ? e.audioRecv[0].jitterMs : void 0,\n            s = e.recvPacketLossRate;\n        var o = .7 * s * 100 / 50 + .3 * r / 1500;\n        n && (o = .6 * s * 100 / 50 + .2 * r / 1500 + .2 * n / 400);\n        return o < .1 ? 1 : o < .17 ? 2 : o < .36 ? 3 : o < .59 ? 4 : 5;\n      }\n    }, {\n      key: \"uploadStats\",\n      value: function uploadStats(e) {\n        var _this252 = this;\n\n        var t = this.user.audioTrack ? function (e, t) {\n          var i = e.audioRecv[0];\n          if (!i) return null;\n          var r = {\n            id: wh(10, \"\"),\n            timestamp: new Date(e.timestamp).toISOString(),\n            mediaType: \"audio\",\n            type: \"ssrc\",\n            ssrc: i.ssrc.toString()\n          };\n          return r.bytesReceived = i.bytes.toString(), r.packetsLost = i.packetsLost.toString(), r.packetsReceived = i.packets.toString(), i.outputLevel ? r.A_aol = Math.round(100 * i.outputLevel).toString() : r.A_aol = Math.round(100 * t._source.getAccurateVolumeLevel()).toString(), r.A_apol = Math.round(100 * t._source.getAccurateVolumeLevel()).toString(), t && (r.A_artd = t._originMediaStreamTrack.enabled && t._mediaStreamTrack.enabled ? \"0\" : \"1\"), r.A_jr = i.jitterMs.toString(), r.A_jbm = Math.floor(i.jitterBufferMs).toString(), r.A_cdm = Math.floor(i.jitterBufferMs).toString(), r;\n        }(e, this.user.audioTrack) : void 0,\n            i = this.user.videoTrack ? function (e, t) {\n          var i = e.videoRecv[0];\n          if (!i) return null;\n          var r = {\n            id: wh(10, \"\"),\n            timestamp: new Date(e.timestamp).toISOString(),\n            mediaType: \"video\",\n            type: \"ssrc\",\n            ssrc: i.ssrc.toString()\n          };\n          var n;\n          return r.bytesReceived = i.bytes.toString(), r.packetsLost = i.packetsLost.toString(), r.packetsReceived = i.packets.toString(), i.framesRateFirefox && (r.A_frr = i.framesRateFirefox.toString()), i.receivedFrame && (r.A_frr = i.receivedFrame.frameRate.toString()), r.A_frd = i.decodeFrameRate.toString(), i.outputFrame && (r.A_fro = i.outputFrame.frameRate.toString()), void 0 !== i.jitterBufferMs && (r.A_jbm = Math.floor(i.jitterBufferMs).toString()), void 0 !== i.currentDelayMs && (r.A_cdm = Math.floor(i.currentDelayMs).toString()), r.A_fs = i.firsCount.toString(), r.A_ns = i.nacksCount.toString(), r.A_ps = i.plisCount.toString(), t && (r.A_vrtd = t._originMediaStreamTrack.enabled && t._mediaStreamTrack.enabled ? \"0\" : \"1\"), t._player && t._player.freezeTimeCounterList.length > 0 && (r.A_vrft = Ss(n = t._player.freezeTimeCounterList).call(n, 0, 1)[0].toString()), r;\n        }(e, this.user.videoTrack) : void 0;\n        t && Qh(function () {\n          return _this252.emit($m.NEED_UPLOAD, zm.SUBSCRIBE_STATS, t);\n        }), i && Qh(function () {\n          return _this252.emit($m.NEED_UPLOAD, zm.SUBSCRIBE_STATS, i);\n        });\n      }\n    }, {\n      key: \"uploadSlowStats\",\n      value: function uploadSlowStats(e) {}\n    }, {\n      key: \"uploadRelatedStats\",\n      value: function uploadRelatedStats(e, t) {\n        var _this253 = this;\n\n        var i = !0 === this.pc._statsFilter.videoIsReady,\n            r = function (e, t, i) {\n          var r = e.audioRecv[0];\n          if (!r) return null;\n          var n = HC.isRemoteAudioFreeze(i);\n          return {\n            mediaType: \"audio\",\n            isAudioMute: !1,\n            peerId: t,\n            googJitterReceived: r.jitterMs.toString(),\n            isFreeze: n,\n            bytesReceived: r.bytes.toString(),\n            packetsReceived: r.packets.toString(),\n            packetsLost: r.packetsLost.toString(),\n            frameReceived: r.receivedFrames.toString(),\n            frameDropped: r.droppedFrames.toString()\n          };\n        }(e, this.getUserId(), this.user.audioTrack),\n            n = function (e, t, i, r, n) {\n          var s = t.videoRecv[0],\n              o = r ? r.videoRecv[0] : void 0;\n          if (!s) return null;\n          var a = HC.isRemoteVideoFreeze(n, s, o) && e,\n              c = {\n            mediaType: \"video\",\n            isVideoMute: !1,\n            peerId: i,\n            frameRateReceived: s.receivedFrame && s.receivedFrame.frameRate.toString(),\n            frameRateDecoded: s.decodedFrame && s.decodedFrame.frameRate.toString(),\n            isFreeze: a,\n            bytesReceived: s.bytes.toString(),\n            packetsReceived: s.packets.toString(),\n            packetsLost: s.packetsLost.toString()\n          };\n          return s.framesRateFirefox && (c.frameRateDecoded = s.framesRateFirefox.toString(), c.frameRateReceived = s.framesRateFirefox.toString()), c;\n        }(i, e, this.getUserId(), t, this.user.videoTrack);\n\n        r && Qh(function () {\n          _this253.emit($m.NEED_UPLOAD, zm.SUBSCRIBE_RELATED_STATS, r);\n        }), n && Qh(function () {\n          _this253.emit($m.NEED_UPLOAD, zm.SUBSCRIBE_RELATED_STATS, n);\n        });\n      }\n    }, {\n      key: \"emitOnTrackFromUnusedTracks\",\n      value: function emitOnTrackFromUnusedTracks() {\n        if (!this.subscribeOptions) return;\n        var e = this.subscribeOptions.video;\n\n        if (this.subscribeOptions.audio) {\n          var t;\n\n          var _e194 = Vs(t = this.unusedTracks).call(t, function (e) {\n            return \"audio\" === e.kind && \"live\" === e.readyState;\n          });\n\n          Mh(this.unusedTracks, _e194), _e194 && this.onTrack(_e194);\n        }\n\n        if (e) {\n          var i;\n\n          var _e195 = Vs(i = this.unusedTracks).call(i, function (e) {\n            return \"video\" === e.kind && \"live\" === e.readyState;\n          });\n\n          Mh(this.unusedTracks, _e195), _e195 && this.onTrack(_e195);\n        }\n      }\n    }, {\n      key: \"setSubscribeOptions\",\n      value: function () {\n        var _setSubscribeOptions = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee289(e) {\n          var t, i, r, n;\n          return _regeneratorRuntime.wrap(function _callee289$(_context289) {\n            while (1) {\n              switch (_context289.prev = _context289.next) {\n                case 0:\n                  if (!(e.audio !== this.subscribeOptions.audio || e.video !== this.subscribeOptions.video)) {\n                    _context289.next = 11;\n                    break;\n                  }\n\n                  if (!(\"connecting\" === this.connectionState)) {\n                    _context289.next = 10;\n                    break;\n                  }\n\n                  _context289.prev = 2;\n                  _context289.next = 5;\n                  return this.createWaitConnectionConnectedPromise();\n\n                case 5:\n                  _context289.next = 10;\n                  break;\n\n                case 7:\n                  _context289.prev = 7;\n                  _context289.t0 = _context289[\"catch\"](2);\n                  throw new Ad(ad.OPERATION_ABORTED, \"can not update subscribe options, operation abort\");\n\n                case 10:\n                  e.audio === this.subscribeOptions.audio && e.video === this.subscribeOptions.video || (vc.debug(Xe(t = Xe(i = Xe(r = Xe(n = \"[\".concat(this.connectionId, \"] update subscribe options [a: \")).call(n, this.subscribeOptions.audio, \", v: \")).call(r, this.subscribeOptions.video, \"] -> [a: \")).call(i, e.audio, \", v: \")).call(t, e.video, \"]\")), this.subscribeOptions = e, !e.audio && this.user._audioTrack && (this.unusedTracks.push(this.user._audioTrack._originMediaStreamTrack), this.user._audioTrack._destroy(), this.unbindTrackEvents(this.user._audioTrack), this.user._audioTrack = void 0), !e.video && this.user._videoTrack && (this.unusedTracks.push(this.user._videoTrack._originMediaStreamTrack), this.user._videoTrack._destroy(), this.unbindTrackEvents(this.user._videoTrack), this.user._videoTrack = void 0), this.emitOnTrackFromUnusedTracks());\n\n                case 11:\n                case \"end\":\n                  return _context289.stop();\n              }\n            }\n          }, _callee289, this, [[2, 7]]);\n        }));\n\n        function setSubscribeOptions(_x426) {\n          return _setSubscribeOptions.apply(this, arguments);\n        }\n\n        return setSubscribeOptions;\n      }()\n    }, {\n      key: \"createPC\",\n      value: function createPC() {\n        var _this254 = this;\n\n        this.pc = new NS({\n          turnServer: this.joinInfo.turnServer\n        }), this.pc.onFirstAudioDecoded = function () {\n          _this254.user.audioTrack && _this254.user.audioTrack.emit(_C.FIRST_FRAME_DECODED), wC.firstRemoteFrame(_this254.joinInfo.sid, Mm.FIRST_AUDIO_DECODE, Um.FIRST_AUDIO_DECODE, {\n            peer: _this254.user._uintid,\n            subscribeElapse: La() - _this254.startTime,\n            subscribeRequestid: _this254.ID,\n            p2pid: _this254.pc.ID\n          });\n        }, this.pc.onFirstAudioReceived = function () {\n          wC.firstRemoteFrame(_this254.joinInfo.sid, Mm.FIRST_AUDIO_RECEIVED, Um.FIRST_AUDIO_RECEIVED, {\n            peer: _this254.user._uintid,\n            subscribeElapse: La() - _this254.startTime,\n            subscribeRequestid: _this254.ID,\n            p2pid: _this254.pc.ID\n          });\n        }, this.pc.onFirstVideoDecoded = function (e, t) {\n          wC.firstRemoteFrame(_this254.joinInfo.sid, Mm.FIRST_VIDEO_DECODE, Um.FIRST_VIDEO_DECODE, {\n            peer: _this254.user._uintid,\n            videowidth: e,\n            videoheight: t,\n            subscribeElapse: La() - _this254.startTime,\n            subscribeRequestid: _this254.ID,\n            p2pid: _this254.pc.ID\n          });\n        }, this.pc.onFirstVideoReceived = function () {\n          wC.firstRemoteFrame(_this254.joinInfo.sid, Mm.FIRST_VIDEO_RECEIVED, Um.FIRST_VIDEO_RECEIVED, {\n            peer: _this254.user._uintid,\n            subscribeElapse: La() - _this254.startTime,\n            subscribeRequestid: _this254.ID,\n            p2pid: _this254.pc.ID\n          });\n        }, this.updateICEPromise();\n      }\n    }, {\n      key: \"closePC\",\n      value: function () {\n        var _closePC2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee290(e) {\n          return _regeneratorRuntime.wrap(function _callee290$(_context290) {\n            while (1) {\n              switch (_context290.prev = _context290.next) {\n                case 0:\n                  if (!(this.pc.audioTrack && this.pc.audioTrack.stop(), this.pc.videoTrack && this.pc.videoTrack.stop(), this.pc.onTrack = void 0, this.pc.onICEConnectionStateChange = void 0, this.pc.close(), !e)) {\n                    _context290.next = 4;\n                    break;\n                  }\n\n                  _context290.next = 3;\n                  return kh(this, $m.NEED_UNSUB);\n\n                case 3:\n                  return _context290.abrupt(\"return\", _context290.sent);\n\n                case 4:\n                  return _context290.abrupt(\"return\", !1);\n\n                case 5:\n                case \"end\":\n                  return _context290.stop();\n              }\n            }\n          }, _callee290, this);\n        }));\n\n        function closePC(_x427) {\n          return _closePC2.apply(this, arguments);\n        }\n\n        return closePC;\n      }()\n    }, {\n      key: \"onPCDisconnected\",\n      value: function onPCDisconnected(e) {\n        wC.subscribe(this.joinInfo.sid, {\n          lts: this.startTime,\n          succ: !1,\n          video: this.subscribeOptions.video,\n          audio: this.subscribeOptions.audio,\n          peerid: this.user.uid,\n          ec: e.code,\n          subscribeRequestid: this.ID,\n          p2pid: this.pc.ID\n        });\n      }\n    }, {\n      key: \"bindTrackEvents\",\n      value: function bindTrackEvents(e) {\n        e instanceof XS ? e.addListener(pC.GET_STATS, this.handleGetRemoteAudioStats) : e instanceof JS && e.addListener(pC.GET_STATS, this.handleGetRemoteVideoStats);\n      }\n    }, {\n      key: \"unbindTrackEvents\",\n      value: function unbindTrackEvents(e) {\n        e instanceof XS ? e.off(pC.GET_STATS, this.handleGetRemoteAudioStats) : e instanceof JS && e.off(pC.GET_STATS, this.handleGetRemoteVideoStats);\n      }\n    }]);\n\n    return zS;\n  }(DS);\n\n  var ZS =\n  /*#__PURE__*/\n  function () {\n    function ZS(e, t) {\n      _classCallCheck(this, ZS);\n\n      this._trust_in_room_ = !0, this._trust_audio_enabled_state_ = !0, this._trust_video_enabled_state_ = !0, this._trust_audio_mute_state_ = !0, this._trust_video_mute_state_ = !0, this._trust_stream_added_state_ = !0, this._audio_muted_ = !1, this._video_muted_ = !1, this._audio_enabled_ = !0, this._video_enabled_ = !0, this._audio_added_ = !1, this._video_added_ = !1, this.uid = e, this._uintid = t;\n    }\n\n    _createClass(ZS, [{\n      key: \"hasVideo\",\n      get: function get() {\n        return this._video_enabled_ && !this._video_muted_ && this._video_added_;\n      }\n    }, {\n      key: \"hasAudio\",\n      get: function get() {\n        return this._audio_enabled_ && !this._audio_muted_ && this._audio_added_;\n      }\n    }, {\n      key: \"audioTrack\",\n      get: function get() {\n        if (this.hasAudio) return this._audioTrack;\n      }\n    }, {\n      key: \"videoTrack\",\n      get: function get() {\n        if (this.hasVideo) return this._videoTrack;\n      }\n    }]);\n\n    return ZS;\n  }();\n\n  function $S(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function eR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = $S(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = $S(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  var tR = function tR(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      iR = function iR(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var rR =\n  /*#__PURE__*/\n  function (_Ll26) {\n    _inherits(rR, _Ll26);\n\n    function rR(e) {\n      var _this255;\n\n      _classCallCheck(this, rR);\n\n      var t, i, r, n;\n      var s;\n      if (_this255 = _possibleConstructorReturn(this, _getPrototypeOf(rR).call(this)), _this255._users = [], _this255._sessionId = null, _this255._bindEnabledTracks = [], _this255._leaveMutex = new su(\"client-leave\"), _this255._publishMutex = new su(\"client-publish\"), _this255._subscribeMutex = new Li(), _this255._remoteStream = new Li(), _this255._encryptionMode = \"none\", _this255._encryptionSecret = null, _this255._encryptionSalt = null, _this255._turnServer = {\n        servers: [],\n        mode: \"auto\"\n      }, _this255._cloudProxyServerMode = \"disabled\", _this255._isDualStreamEnabled = !1, _this255._streamFallbackTypeCacheMap = new Li(), _this255._remoteStreamTypeCacheMap = new Li(), _this255._axiosCancelSource = mc.CancelToken.source(), _this255._networkQualitySensitivity = \"normal\", _this255._useLocalAccessPoint = !1, _this255._handleLocalTrackEnable = function (e, t, i) {\n        _this255.publish(e, !1).then(t).catch(i);\n      }, _this255._handleLocalTrackDisable = function (e, t, i) {\n        _this255.unpublish(e, !1).then(t).catch(i);\n      }, _this255._handleUserOnline = function (e) {\n        var t;\n        _this255.isStringUID && \"string\" != typeof e.uid && vc.error(\"[\".concat(_this255._clientId, \"] StringUID is Mixed with UintUID\"));\n        var i = Vs(t = _this255._users).call(t, function (t) {\n          return t.uid === e.uid;\n        });\n        if (i) i._trust_in_room_ = !0;else {\n          var _t190 = new ZS(e.uid, e.uint_id || e.uid);\n\n          _this255._users.push(_t190), vc.debug(\"[\".concat(_this255._clientId, \"] user online\"), e.uid), _this255.emit(Sm.USER_JOINED, _t190);\n        }\n      }, _this255._handleUserOffline = function (e) {\n        var t;\n        var i = Vs(t = _this255._users).call(t, function (t) {\n          return t.uid === e.uid;\n        });\n        i && (_this255._handleRemoveStream(e), Mh(_this255._users, i), _this255._remoteStreamTypeCacheMap.delete(i.uid), _this255._streamFallbackTypeCacheMap.delete(i.uid), vc.debug(\"[\".concat(_this255._clientId, \"] user offline\"), e.uid, \"reason:\", e.reason), _this255.emit(Sm.USER_LEAVED, i, e.reason));\n      }, _this255._handleAddAudioOrVideoStream = function (e, t, i) {\n        var r, n, s;\n        var o = Vs(r = _this255._users).call(r, function (e) {\n          return e.uid === t;\n        });\n        if (!o) return void vc.error(\"[\".concat(_this255._clientId, \"] can not find target user!(on_add_stream)\"));\n        vc.debug(Xe(n = Xe(s = \"[\".concat(_this255._clientId, \"] stream added with uid \")).call(s, t, \", type \")).call(n, e));\n        var a = \"audio\" === e ? o.hasAudio : o.hasVideo;\n        var c, d;\n        (o._uintid || (o._uintid = i || t), o._trust_stream_added_state_ = !0, \"audio\" === e ? o._audio_added_ = !0 : o._video_added_ = !0, (\"audio\" === e ? o.hasAudio : o.hasVideo) && !a) && (vc.info(Xe(c = Xe(d = \"[\".concat(_this255._clientId, \"] remote user \")).call(d, o.uid, \" published \")).call(c, e)), _this255.emit(Sm.USER_PUBLISHED, o, e));\n        \"video\" === e ? wC.onGatewayStream(_this255._sessionId, Mm.ON_ADD_VIDEO_STREAM, Um.ON_ADD_VIDEO_STREAM, {\n          peer: i || t\n        }) : wC.onGatewayStream(_this255._sessionId, Mm.ON_ADD_AUDIO_STREAM, Um.ON_ADD_AUDIO_STREAM, {\n          peer: i || t\n        });\n\n        var l = _this255._remoteStream.get(t);\n\n        l && l.readyToReconnect && \"connecting\" === l.connectionState && l.reconnectPC().catch(function (e) {\n          vc.error(\"[\".concat(_this255._clientId, \"] resubscribe error\"), e.toString());\n        });\n      }, _this255._handleRemoveStream = function (e) {\n        var t, i;\n        var r = Vs(t = _this255._users).call(t, function (t) {\n          return t.uid === e.uid;\n        });\n        if (!r) return void vc.warning(\"[\".concat(_this255._clientId, \"] can not find target user!(on_remove_stream)\"));\n        vc.debug(Xe(i = \"[\".concat(_this255._clientId, \"] stream removed with uid \")).call(i, e.uid));\n\n        var n = function n() {};\n\n        r.hasAudio && r.hasVideo ? n = function n() {\n          var e, t;\n          vc.info(Xe(e = \"[\".concat(_this255._clientId, \"] remote user \")).call(e, r.uid, \" unpublished audio track\")), _this255.emit(Sm.USER_UNPUBLISHED, r, \"audio\"), vc.info(Xe(t = \"[\".concat(_this255._clientId, \"] remote user \")).call(t, r.uid, \" unpublished video track\")), _this255.emit(Sm.USER_UNPUBLISHED, r, \"video\");\n        } : r.hasVideo ? n = function n() {\n          var e;\n          vc.info(Xe(e = \"[\".concat(_this255._clientId, \"] remote user \")).call(e, r.uid, \" unpublished video track\")), _this255.emit(Sm.USER_UNPUBLISHED, r, \"video\");\n        } : r.hasAudio && (n = function n() {\n          var e;\n          vc.info(Xe(e = \"[\".concat(_this255._clientId, \"] remote user \")).call(e, r.uid, \" unpublished audio track\")), _this255.emit(Sm.USER_UNPUBLISHED, r, \"audio\");\n        }), r._trust_stream_added_state_ = !0, r._audio_added_ = !1, r._video_added_ = !1;\n\n        var s = _this255._remoteStream.get(r.uid);\n\n        s && (s.closeP2PConnection(), _this255._remoteStream.delete(r.uid)), wC.onGatewayStream(_this255._sessionId, Mm.ON_REMOVE_STREAM, Um.ON_REMOVE_STREAM, {\n          peer: e.uint_id || e.uid\n        }), n();\n      }, _this255._handleSetStreamLocalEnable = function (e, t, i) {\n        var r, n, s, o, a, c;\n        var d = Vs(r = _this255._users).call(r, function (e) {\n          return e.uid === t;\n        });\n        if (!d) return void vc.error(\"[\".concat(_this255._clientId, \"] can not find target user!(disable_local)\"));\n        vc.debug(Xe(n = Xe(s = Xe(o = \"[\".concat(_this255._clientId, \"] local \")).call(o, e, \" \")).call(s, i ? \"enabled\" : \"disabled\", \" with uid \")).call(n, t));\n        var l = \"audio\" === e ? d.hasAudio : d.hasVideo;\n\n        if (\"audio\" === e) {\n          d._trust_audio_enabled_state_ = !0;\n          var _e196 = d._audio_enabled_;\n          if (d._audio_enabled_ = i, d._audio_enabled_ === _e196) return;\n          {\n            var A, u;\n\n            var _e197 = d._audio_enabled_ ? \"enable-local-audio\" : \"disable-local-audio\";\n\n            vc.debug(Xe(A = Xe(u = \"[\".concat(_this255._clientId, \"] user-info-updated, uid: \")).call(u, t, \", msg: \")).call(A, _e197)), _this255.emit(Sm.USER_INFO_UPDATED, t, _e197);\n          }\n        } else {\n          d._trust_video_enabled_state_ = !0;\n          var _e198 = d._video_enabled_;\n          if (d._video_enabled_ = i, d._video_enabled_ === _e198) return;\n          {\n            var h, p;\n\n            var _e199 = d._video_enabled_ ? \"enable-local-video\" : \"disable-local-video\";\n\n            vc.debug(Xe(h = Xe(p = \"[\".concat(_this255._clientId, \"] user-info-update, uid: \")).call(p, t, \", msg: \")).call(h, _e199)), _this255.emit(Sm.USER_INFO_UPDATED, t, _e199);\n          }\n        }\n\n        var E = \"audio\" === e ? d.hasAudio : d.hasVideo;\n        if (l === E) return;\n\n        var g, _;\n\n        if (!l && E) return vc.info(Xe(g = Xe(_ = \"[\".concat(_this255._clientId, \"] remote user \")).call(_, t, \" published \")).call(g, e)), void _this255.emit(Sm.USER_PUBLISHED, d, e);\n\n        var I = _this255._remoteStream.get(t);\n\n        if (I) {\n          var _e200 = eR({}, I.subscribeOptions);\n\n          _e200.audio = !!d.hasAudio && _e200.audio, _e200.video = !!d.hasVideo && _e200.video, _e200.audio || _e200.video ? I.setSubscribeOptions(_e200) : (I.closeP2PConnection().catch(function (e) {\n            vc.warning(\"close sub pc error\", e);\n          }), _this255._remoteStream.delete(d.uid));\n        }\n\n        vc.info(Xe(a = Xe(c = \"[\".concat(_this255._clientId, \"] remote user \")).call(c, d.uid, \" unpublished \")).call(a, e)), _this255.emit(Sm.USER_UNPUBLISHED, d, e);\n      }, _this255._handleMuteStream = function (e, t, i) {\n        var r, n, s;\n        vc.debug(\"[\".concat(_this255._clientId, \"] receive mute message\"), e, t, i);\n        var o = Vs(r = _this255._users).call(r, function (t) {\n          return t.uid === e;\n        });\n        var a;\n        if (!o) return void vc.warning(Xe(a = \"[\".concat(_this255._clientId, \"] can not find remote user, ignore mute event, uid: \")).call(a, e));\n        var c = \"audio\" === t ? o.hasAudio : o.hasVideo;\n\n        if (\"audio\" === t) {\n          o._trust_audio_mute_state_ = !0;\n          var _t191 = o._audio_muted_;\n          if (o._audio_muted_ = i, o._audio_muted_ === _t191) return;\n          {\n            var d, l;\n\n            var _t192 = o._audio_muted_ ? \"mute-audio\" : \"unmute-audio\";\n\n            vc.debug(Xe(d = Xe(l = \"[\".concat(_this255._clientId, \"] user-info-update, uid: \")).call(l, e, \", msg: \")).call(d, _t192)), _this255.emit(Sm.USER_INFO_UPDATED, e, _t192);\n          }\n        } else {\n          o._trust_video_mute_state_ = !0;\n          var _t193 = o._video_muted_;\n          if (o._video_muted_ = i, o._video_muted_ === _t193) return;\n          {\n            var A, u;\n\n            var _t194 = o._video_muted_ ? \"mute-video\" : \"unmute-video\";\n\n            vc.debug(Xe(A = Xe(u = \"[\".concat(_this255._clientId, \"] user-info-update, uid: \")).call(u, e, \", msg: \")).call(A, _t194)), _this255.emit(Sm.USER_INFO_UPDATED, e, _t194);\n          }\n        }\n\n        var h = \"audio\" === t ? o.hasAudio : o.hasVideo;\n        if (c === h) return;\n        var p, E;\n        if (!c && h) return vc.info(Xe(p = Xe(E = \"[\".concat(_this255._clientId, \"] remote user \")).call(E, e, \" published \")).call(p, t)), void _this255.emit(Sm.USER_PUBLISHED, o, t);\n\n        var g = _this255._remoteStream.get(e);\n\n        if (g) {\n          var _e201 = eR({}, g.subscribeOptions);\n\n          _e201.audio = !!o.hasAudio && _e201.audio, _e201.video = !!o.hasVideo && _e201.video, \"video\" === t && g.pc._statsFilter.setVideoIsReady(!1), _e201.audio || _e201.video ? g.setSubscribeOptions(_e201) : (g.closeP2PConnection().catch(function (e) {\n            vc.warning(\"close sub pc error\", e);\n          }), _this255._remoteStream.delete(o.uid));\n        }\n\n        vc.info(Xe(n = Xe(s = \"[\".concat(_this255._clientId, \"] remote user \")).call(s, e, \" unpublished \")).call(n, t)), _this255.emit(Sm.USER_UNPUBLISHED, o, t);\n      }, _this255._handleP2PLost = function (e) {\n        vc.debug(\"[\".concat(_this255._clientId, \"] receive p2p lost\"), e);\n        var t = null;\n        if (_this255._highStream && _this255._highStream.pc.ID === e.p2pid) t = _this255._highStream;else if (_this255._lowStream && _this255._lowStream.pc.ID === e.p2pid) t = _this255._lowStream;else {\n          var i;\n          Xi(i = _this255._remoteStream).call(i, function (i) {\n            i.pc.ID === e.p2pid && (t = i);\n          });\n        }\n        t ? t.emit($m.GATEWAY_P2P_LOST, e.p2pid) : vc.warning(\"P2PLost stream not found\", e);\n      }, _this255._handleTokenWillExpire = function () {\n        vc.debug(\"[\".concat(_this255._clientId, \"] received message onTokenPrivilegeWillExpire\")), _this255.emit(Sm.ON_TOKEN_PRIVILEGE_WILL_EXPIRE);\n      }, _this255._handleBeforeUnload = function (e) {\n        void 0 !== e.returnValue && \"\" !== e.returnValue || (_this255.leave(), vc.info(\"[\".concat(_this255._clientId, \"] auto leave onbeforeunload\")));\n      }, _this255._handleUpdateNetworkQuality = function () {\n        var e;\n        if (\"normal\" === _this255._networkQualitySensitivity) return;\n        if (navigator && void 0 !== navigator.onLine && !navigator.onLine) return void _this255.emit(Sm.NETWORK_QUALITY, {\n          downlinkNetworkQuality: 6,\n          uplinkNetworkQuality: 6\n        });\n        var t = {\n          downlinkNetworkQuality: 0,\n          uplinkNetworkQuality: 0\n        };\n        _this255._highStream && !_this255._highStream.detecting && (t.uplinkNetworkQuality = _this255._highStream.getNetworkQuality());\n        var i = 0;\n        Xi(e = _this255._remoteStream).call(e, function (e) {\n          return i += e.getNetworkQuality();\n        }), _this255._remoteStream.size > 0 && (t.downlinkNetworkQuality = Math.round(i / _this255._remoteStream.size)), _this255.emit(Sm.NETWORK_QUALITY, t);\n      }, _this255._codec = e.codec, _this255._mode = e.mode, e.proxyServer && (_this255._proxyServer = e.proxyServer, wC.setProxyServer(_this255._proxyServer), vc.setProxyServer(_this255._proxyServer)), e.turnServer && (_this255._turnServer = eR({}, _this255._turnServer, {\n        mode: \"manual\"\n      }, e.turnServer)), _this255._clientId = wh(5, \"client-\"), vc.info(Xe(t = Xe(i = Xe(r = Xe(n = \"[\".concat(_this255._clientId, \"] Initializing AgoraRTC client v\")).call(n, wc, \" build: \")).call(r, yc, \", mode: \")).call(i, _this255._mode, \", codec: \")).call(t, _this255._codec)), _this255._performanceRecorder = Im(_this255._clientId, \"join\"), e.clientRoleOptions) try {\n        Lm(e.clientRoleOptions), s = er({}, e.clientRoleOptions);\n      } catch (e) {\n        var o;\n        vc.warning(Xe(o = \"[\".concat(_this255._clientId, \"] \")).call(o, e.toString()));\n      }\n      _this255._statsCollector = new HC(_this255._clientId), _this255._statsCollector.onStatsException = function (e, t, i) {\n        var r, n, s;\n        vc.debug(Xe(r = Xe(n = Xe(s = \"[\".concat(_this255._clientId, \"] receive exception msg, code: \")).call(s, e, \", msg: \")).call(n, t, \", uid: \")).call(r, i)), _this255.emit(Sm.EXCEPTION, {\n          code: e,\n          msg: t,\n          uid: i\n        });\n      }, _this255._statsCollector.onUploadPublishDuration = function (e, t, i, r) {\n        var n;\n        var s = Vs(n = _this255._users).call(n, function (t) {\n          return t.uid === e;\n        });\n        s && wC.peerPublishStatus(_this255._sessionId, {\n          subscribeElapse: r,\n          audioPublishDuration: t,\n          videoPublishDuration: i,\n          peer: s._uintid\n        });\n      }, _this255._gateway = new oS({\n        clientId: _this255._clientId,\n        mode: _this255._mode,\n        codec: _this255._codec,\n        websocketRetryConfig: e.websocketRetryConfig || HA,\n        httpRetryConfig: e.httpRetryConfig || HA,\n        forceWaitGatewayResponse: void 0 === e.forceWaitGatewayResponse || e.forceWaitGatewayResponse,\n        statsCollector: _this255._statsCollector,\n        role: e.role,\n        clientRoleOptions: s\n      }), _this255._config = e, _this255._configDistribute = new O_(), _this255._handleGatewayEvents();\n      return _possibleConstructorReturn(_this255);\n    }\n\n    _createClass(rR, [{\n      key: \"join\",\n      value: function () {\n        var _join6 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee291(e, t, i, r, n) {\n          var _this256 = this;\n\n          var s, o, a, c, d, _e202, l, A, _r85, _e203, u, _e204, h, _e205, _n54, _t195;\n\n          return _regeneratorRuntime.wrap(function _callee291$(_context291) {\n            while (1) {\n              switch (_context291.prev = _context291.next) {\n                case 0:\n                  this._performanceRecorder.checkPoint(\"startJoin\");\n\n                  o = pm(), a = Em() ? window.isSecureContext : \"Browser Not Support\", c = function c() {\n                    vc.warning(\"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\");\n                  };\n                  Em() ? window.isSecureContext || c() : o || c();\n                  d = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.JOIN,\n                    options: [e, t, i, r],\n                    states: {\n                      isHttps: o,\n                      isSecureContext: a\n                    },\n                    tag: xm.TRACER\n                  });\n                  _context291.prev = 4;\n\n                  if (!(!i && null !== i)) {\n                    _context291.next = 7;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_PARAMS, \"Invalid token: \".concat(i, \". If you don not use token, set it to null\"));\n\n                case 7:\n                  i && Ed(i, \"token\", 1, 2047), Ed(e, \"appid\", 1, 2047), _d(t), r && Id(r), n && Ed(n, \"optionalInfo\", 1, 2047);\n                  _context291.next = 13;\n                  break;\n\n                case 10:\n                  _context291.prev = 10;\n                  _context291.t0 = _context291[\"catch\"](4);\n                  throw d.onError(_context291.t0), _context291.t0;\n\n                case 13:\n                  if (!(vc.info(Xe(s = \"[\".concat(this._clientId, \"] start join channel \")).call(s, t)), this._leaveMutex.isLocked)) {\n                    _context291.next = 20;\n                    break;\n                  }\n\n                  vc.debug(\"[\".concat(this._clientId, \"] join: waiting leave operation\"));\n                  _context291.next = 17;\n                  return this._leaveMutex.lock();\n\n                case 17:\n                  _context291.t1 = _context291.sent;\n                  (0, _context291.t1)();\n                  vc.debug(\"[\".concat(this._clientId, \"] join: continue\"));\n\n                case 20:\n                  if (!(\"DISCONNECTED\" !== this.connectionState)) {\n                    _context291.next = 23;\n                    break;\n                  }\n\n                  _e202 = new Ad(ad.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already in connecting/connected state\"));\n                  throw d.onError(_e202), _e202;\n\n                case 23:\n                  this._sessionId || (this._sessionId = Nh()), this._gateway.state = \"CONNECTING\";\n                  l = {\n                    clientId: this._clientId,\n                    appId: e,\n                    sid: this._sessionId,\n                    cname: t,\n                    uid: \"string\" != typeof r ? r : null,\n                    turnServer: this._turnServer,\n                    proxyServer: this._proxyServer,\n                    token: i || e,\n                    cloudProxyServer: this._cloudProxyServerMode,\n                    optionalInfo: n,\n                    useLocalAccessPoint: this._useLocalAccessPoint\n                  };\n                  \"string\" == typeof r && (l.stringUid = r, this._uintUid ? (l.uid = this._uintUid, this._uintUid = void 0) : l.uid = 0);\n                  _context291.t2 = \"none\" !== this._encryptionMode && this._encryptionSecret;\n\n                  if (!_context291.t2) {\n                    _context291.next = 33;\n                    break;\n                  }\n\n                  l.aesmode = this._encryptionMode;\n                  _context291.next = 31;\n                  return sh(this._encryptionSecret);\n\n                case 31:\n                  l.aespassword = _context291.sent;\n                  this._encryptionSalt && (l.aessalt = this._encryptionSalt);\n\n                case 33:\n                  this._startSession(this._sessionId, {\n                    channel: t,\n                    appId: e\n                  });\n\n                  Ua(function () {\n                    \"CONNECTING\" === _this256.connectionState && wC.joinChannelTimeout(_this256._sessionId, 5);\n                  }, 5e3);\n                  _context291.prev = 35;\n                  if (\"443only\" === l.cloudProxyServer) l.proxyServer = Fc(\"PROXY_SERVER_TYPE2\");else if (\"proxy3\" === l.cloudProxyServer || \"proxy4\" === l.cloudProxyServer || \"proxy5\" === l.cloudProxyServer) {\n                    _e203 = Fc(\"PROXY_SERVER_TYPE3\");\n                    ld(_e203) ? l.proxyServer = _e203[0] : l.proxyServer = _e203;\n                  }\n\n                  if (!(wC.setProxyServer(l.proxyServer), vc.setProxyServer(l.proxyServer), this._performanceRecorder.checkPoint(\"startRequestAp\"), l.stringUid && !l.uid && \"normal\" === l.cloudProxyServer)) {\n                    _context291.next = 50;\n                    break;\n                  }\n\n                  _context291.next = 40;\n                  return gS(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !1);\n\n                case 40:\n                  _context291.next = 42;\n                  return _S(l.stringUid, l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 42:\n                  _e204 = _context291.sent;\n                  vc.debug(Xe(u = \"getUserAccount Success \".concat(l.stringUid, \" => \")).call(u, _e204));\n                  l.uid = _e204;\n                  _context291.next = 47;\n                  return ES(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 47:\n                  _r85 = _context291.sent;\n                  _context291.next = 64;\n                  break;\n\n                case 50:\n                  if (!(l.stringUid && !l.uid)) {\n                    _context291.next = 61;\n                    break;\n                  }\n\n                  _context291.next = 53;\n                  return _S(l.stringUid, l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA);\n\n                case 53:\n                  _e205 = _context291.sent;\n                  vc.debug(Xe(h = \"getUserAccount Success \".concat(l.stringUid, \" => \")).call(h, _e205));\n                  l.uid = _e205;\n                  _context291.next = 58;\n                  return gS(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !0);\n\n                case 58:\n                  _r85 = _context291.sent;\n                  _context291.next = 64;\n                  break;\n\n                case 61:\n                  _context291.next = 63;\n                  return gS(l, this._axiosCancelSource.token, this._config.httpRetryConfig || HA, !0);\n\n                case 63:\n                  _r85 = _context291.sent;\n\n                case 64:\n                  this._performanceRecorder.checkPoint(\"startJoinGateway\"), this._configDistribute.startGetConfigDistribute(l, this._axiosCancelSource.token), this._configDistribute.on(mC.UPDATE_BITRATE_LIMIT, function (e) {\n                    _this256._highStream && _this256._highStream.handleUpdateBitrateLimit(e.uplink), e.low_stream_uplink && _this256._lowStream && _this256._lowStream.handleUpdateBitrateLimit({\n                      max_bitrate: e.low_stream_uplink.bitrate,\n                      min_bitrate: e.low_stream_uplink.bitrate || 0\n                    });\n                  }), this._key = i || e, this._joinInfo = eR({}, l, {\n                    cid: _r85.gatewayInfo.cid,\n                    uid: l.uid ? l.uid : _r85.gatewayInfo.uid,\n                    vid: _r85.gatewayInfo.vid,\n                    apResponse: _r85.gatewayInfo.res,\n                    uni_lbs_ip: _r85.gatewayInfo.uni_lbs_ip,\n                    gatewayAddrs: _r85.gatewayInfo.gatewayAddrs\n                  });\n                  _context291.next = 67;\n                  return this._gateway.join(this._joinInfo, this._key);\n\n                case 67:\n                  _n54 = _context291.sent;\n                  return _context291.abrupt(\"return\", (d.onSuccess(_n54), this._appId = e, this._channelName = l.cname, this._uid = _n54, this._networkQualityInterval && window.clearInterval(this._networkQualityInterval), this._networkQualityInterval = window.setInterval(this._handleUpdateNetworkQuality, 2e3), window.addEventListener(\"beforeunload\", this._handleBeforeUnload), vc.info(Xe(A = \"[\".concat(this._clientId, \"] Joining channel success: \")).call(A, t)), Ua(function () {\n                    vc.startUpload();\n                  }, 5e3), this._performanceRecorder.checkPoint(\"finishJoin\"), Jc(this), _n54));\n\n                case 71:\n                  _context291.prev = 71;\n                  _context291.t3 = _context291[\"catch\"](35);\n                  _t195 = ld(_context291.t3) ? _context291.t3[0] : _context291.t3;\n                  throw vc.error(\"[\".concat(this._clientId, \"] Joining channel failed, rollback\"), _t195), _t195.code !== ad.OPERATION_ABORTED && (this._gateway.state = \"DISCONNECTED\", this._reset()), d.onError(_t195), _t195;\n\n                case 75:\n                case \"end\":\n                  return _context291.stop();\n              }\n            }\n          }, _callee291, this, [[4, 10], [35, 71]]);\n        }));\n\n        function join(_x428, _x429, _x430, _x431, _x432) {\n          return _join6.apply(this, arguments);\n        }\n\n        return join;\n      }()\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee292() {\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee292$(_context292) {\n            while (1) {\n              switch (_context292.prev = _context292.next) {\n                case 0:\n                  e = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.LEAVE,\n                    options: [],\n                    tag: xm.TRACER\n                  });\n                  vc.info(\"[\".concat(this._clientId, \"] Leaving channel\")), window.removeEventListener(\"beforeunload\", this._handleBeforeUnload), this._reset(), Xc(this);\n                  _context292.next = 4;\n                  return this._leaveMutex.lock();\n\n                case 4:\n                  t = _context292.sent;\n\n                  if (!(\"DISCONNECTED\" === this.connectionState)) {\n                    _context292.next = 7;\n                    break;\n                  }\n\n                  return _context292.abrupt(\"return\", (vc.info(\"[\".concat(this._clientId, \"] Leaving channel repeated, success\")), t(), e.onSuccess()));\n\n                case 7:\n                  _context292.next = 9;\n                  return this._gateway.leave(\"CONNECTED\" !== this.connectionState);\n\n                case 9:\n                  vc.info(\"[\".concat(this._clientId, \"] Leaving channel success\"));\n                  t();\n                  e.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context292.stop();\n              }\n            }\n          }, _callee292, this);\n        }));\n\n        function leave() {\n          return _leave4.apply(this, arguments);\n        }\n\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee293(e) {\n          var _this257 = this;\n\n          var t,\n              i,\n              r,\n              n,\n              _e206,\n              _e207,\n              _iteratorNormalCompletion27,\n              _didIteratorError27,\n              _iteratorError27,\n              _iterator27,\n              _step27,\n              _i135,\n              _e208,\n              _e209,\n              s,\n              _t196,\n              _i134,\n              _args293 = arguments;\n\n          return _regeneratorRuntime.wrap(function _callee293$(_context293) {\n            while (1) {\n              switch (_context293.prev = _context293.next) {\n                case 0:\n                  t = _args293.length > 1 && _args293[1] !== undefined ? _args293[1] : !0;\n                  ld(e) || (e = [e]);\n                  n = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.PUBLISH,\n                    options: Es(e).call(e, function (e) {\n                      return e ? Object(e).toString() : \"null\";\n                    }),\n                    tag: xm.TRACER\n                  });\n\n                  if (!(0 === e.length)) {\n                    _context293.next = 6;\n                    break;\n                  }\n\n                  _e206 = new Ad(ad.INVALID_PARAMS, \"track list is empty\");\n                  return _context293.abrupt(\"return\", (n.onError(_e206), _e206.throw()));\n\n                case 6:\n                  if (!(\"audience\" === this._gateway.role)) {\n                    _context293.next = 9;\n                    break;\n                  }\n\n                  _e207 = new Ad(ad.INVALID_OPERATION, \"audience can not publish stream\");\n                  return _context293.abrupt(\"return\", (n.onError(_e207), _e207.throw()));\n\n                case 9:\n                  _iteratorNormalCompletion27 = true;\n                  _didIteratorError27 = false;\n                  _iteratorError27 = undefined;\n                  _context293.prev = 12;\n                  _iterator27 = e[Symbol.iterator]();\n\n                case 14:\n                  if (_iteratorNormalCompletion27 = (_step27 = _iterator27.next()).done) {\n                    _context293.next = 25;\n                    break;\n                  }\n\n                  _i135 = _step27.value;\n\n                  if (_i135 instanceof kC) {\n                    _context293.next = 19;\n                    break;\n                  }\n\n                  _e208 = new Ad(ad.INVALID_PARAMS, \"pamameter is not local track\");\n                  return _context293.abrupt(\"return\", (n.onError(_e208), _e208.throw()));\n\n                case 19:\n                  if (!(!_i135._enabled && t)) {\n                    _context293.next = 22;\n                    break;\n                  }\n\n                  _e209 = new Ad(ad.TRACK_IS_DISABLED, \"can not publish a disabled track: \".concat(_i135.getTrackId()));\n                  return _context293.abrupt(\"return\", (n.onError(_e209), _e209.throw()));\n\n                case 22:\n                  _iteratorNormalCompletion27 = true;\n                  _context293.next = 14;\n                  break;\n\n                case 25:\n                  _context293.next = 31;\n                  break;\n\n                case 27:\n                  _context293.prev = 27;\n                  _context293.t0 = _context293[\"catch\"](12);\n                  _didIteratorError27 = true;\n                  _iteratorError27 = _context293.t0;\n\n                case 31:\n                  _context293.prev = 31;\n                  _context293.prev = 32;\n\n                  if (!_iteratorNormalCompletion27 && _iterator27.return != null) {\n                    _iterator27.return();\n                  }\n\n                case 34:\n                  _context293.prev = 34;\n\n                  if (!_didIteratorError27) {\n                    _context293.next = 37;\n                    break;\n                  }\n\n                  throw _iteratorError27;\n\n                case 37:\n                  return _context293.finish(34);\n\n                case 38:\n                  return _context293.finish(31);\n\n                case 39:\n                  vc.info(Xe(i = \"[\".concat(this._clientId, \"] Publishing tracks, id \")).call(i, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  })));\n                  _context293.next = 42;\n                  return this._configDistribute.awaitConfigDistributeComplete();\n\n                case 42:\n                  t && Xi(e).call(e, function (e) {\n                    var t;\n\n                    var i = _this257._configDistribute.getBitrateLimit();\n\n                    var r;\n                    (e instanceof MS && i && e.setBitrateLimit(i.uplink), -1 === Os(t = _this257._bindEnabledTracks).call(t, e)) && (e.addListener(pC.NEED_ADD_TRACK, _this257._handleLocalTrackEnable), e.addListener(pC.NEED_REMOVE_TRACK, _this257._handleLocalTrackDisable), _this257._bindEnabledTracks.push(e), Ta() && e.muted && vc.debug(Xe(r = \"[\".concat(_this257._clientId, \"] on firefox publish a muted track \")).call(r, e.getTrackId(), \", skip the pub operation and wait unmute\")));\n                  });\n\n                  if (!(Ta() && 0 === (e = Fr(e).call(e, function (e) {\n                    return !e.muted;\n                  })).length)) {\n                    _context293.next = 45;\n                    break;\n                  }\n\n                  return _context293.abrupt(\"return\", void n.onSuccess(Es(e).call(e, function (e) {\n                    return e.trackMediaType + \":\" + e.getTrackLabel();\n                  }).toString()));\n\n                case 45:\n                  _context293.next = 47;\n                  return this._publishMutex.lock();\n\n                case 47:\n                  s = _context293.sent;\n                  _context293.prev = 48;\n                  _context293.next = 51;\n                  return this._publishHighStream(e);\n\n                case 51:\n                  _t196 = _context293.sent;\n                  _i134 = (_t196.audioTrack, _t196.videoTrack);\n                  _context293.t1 = this._isDualStreamEnabled && _i134 && !this._lowStream;\n\n                  if (!_context293.t1) {\n                    _context293.next = 57;\n                    break;\n                  }\n\n                  _context293.next = 57;\n                  return this._publishLowStream(_i134);\n\n                case 57:\n                  s();\n                  n.onSuccess(Es(e).call(e, function (e) {\n                    return e.trackMediaType + \":\" + e.getTrackLabel();\n                  }).toString());\n                  _context293.next = 64;\n                  break;\n\n                case 61:\n                  _context293.prev = 61;\n                  _context293.t2 = _context293[\"catch\"](48);\n                  throw s(), t && Xi(e).call(e, function (e) {\n                    var t, i;\n                    var r = Os(t = _this257._bindEnabledTracks).call(t, e);\n                    -1 !== r && (e.off(pC.NEED_ADD_TRACK, _this257._handleLocalTrackEnable), e.off(pC.NEED_REMOVE_TRACK, _this257._handleLocalTrackDisable), Ss(i = _this257._bindEnabledTracks).call(i, r, 1));\n                  }), n.onError(_context293.t2), vc.error(\"[\".concat(this._clientId, \"] publish error\"), _context293.t2.toString()), _context293.t2;\n\n                case 64:\n                  vc.info(Xe(r = \"[\".concat(this._clientId, \"] Publish success, id \")).call(r, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  })));\n\n                case 65:\n                case \"end\":\n                  return _context293.stop();\n              }\n            }\n          }, _callee293, this, [[12, 27, 31, 39], [32,, 34, 38], [48, 61]]);\n        }));\n\n        function publish(_x433) {\n          return _publish4.apply(this, arguments);\n        }\n\n        return publish;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee294(e) {\n          var _this258 = this;\n\n          var t,\n              i,\n              r,\n              n,\n              s,\n              o,\n              a,\n              c,\n              _args294 = arguments;\n          return _regeneratorRuntime.wrap(function _callee294$(_context294) {\n            while (1) {\n              switch (_context294.prev = _context294.next) {\n                case 0:\n                  t = _args294.length > 1 && _args294[1] !== undefined ? _args294[1] : !0;\n                  _context294.next = 3;\n                  return this._publishMutex.lock();\n\n                case 3:\n                  r = _context294.sent;\n                  _context294.prev = 4;\n\n                  if (this._highStream) {\n                    _context294.next = 7;\n                    break;\n                  }\n\n                  return _context294.abrupt(\"return\", (vc.warning(\"[\".concat(this._clientId, \"] Could not find tracks to unpublish\")), void (r && r())));\n\n                case 7:\n                  if (!(n = this._highStream.getAllTracks(), e ? ld(e) || (e = [e]) : e = this._highStream.getAllTracks(), s = function (e, t) {\n                    if (e.length !== t.length) return !1;\n\n                    var _loop4 = function _loop4(_i136) {\n                      var r = e[_i136];\n                      if (Fr(e).call(e, function (e) {\n                        return e === r;\n                      }).length !== Fr(t).call(t, function (e) {\n                        return e === r;\n                      }).length) return {\n                        v: !1\n                      };\n                    };\n\n                    for (var _i136 = 0; _i136 < e.length; _i136 += 1) {\n                      var _ret = _loop4(_i136);\n\n                      if (typeof _ret === \"object\") return _ret.v;\n                    }\n\n                    return !0;\n                  }(n, e), o = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.UNPUBLISH,\n                    options: Es(e).call(e, function (e) {\n                      return e.getTrackId();\n                    }),\n                    tag: xm.TRACER\n                  }), vc.info(Xe(a = Xe(c = \"[\".concat(this._clientId, \"] Unpublish tracks, tracks \")).call(c, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId(), \" \");\n                  }), \", isClosePC: \")).call(a, s)), !this._highStream)) {\n                    _context294.next = 9;\n                    break;\n                  }\n\n                  return _context294.abrupt(\"return\", (vc.warning(\"[\".concat(this._clientId, \"] Could not find tracks to unpublish\")), void (r && r())));\n\n                case 9:\n                  _context294.next = 14;\n                  break;\n\n                case 11:\n                  _context294.prev = 11;\n                  _context294.t0 = _context294[\"catch\"](4);\n                  throw r && r(), _context294.t0;\n\n                case 14:\n                  _context294.prev = 14;\n                  _context294.t1 = this._lowStream && Fr(e).call(e, function (e) {\n                    return \"video\" === e.trackMediaType;\n                  }).length > 0;\n\n                  if (!_context294.t1) {\n                    _context294.next = 20;\n                    break;\n                  }\n\n                  _context294.next = 19;\n                  return this._lowStream.closeP2PConnection();\n\n                case 19:\n                  this._lowStream = void 0;\n\n                case 20:\n                  if (!s) {\n                    _context294.next = 25;\n                    break;\n                  }\n\n                  _context294.next = 23;\n                  return this._highStream.closeP2PConnection();\n\n                case 23:\n                  _context294.next = 27;\n                  break;\n\n                case 25:\n                  _context294.next = 27;\n                  return this._highStream.removeTracks(e, t);\n\n                case 27:\n                  r && r();\n                  _context294.next = 35;\n                  break;\n\n                case 30:\n                  _context294.prev = 30;\n                  _context294.t2 = _context294[\"catch\"](14);\n\n                  if (!(_context294.t2.code !== ad.OPERATION_ABORTED)) {\n                    _context294.next = 34;\n                    break;\n                  }\n\n                  throw o.onError(_context294.t2), vc.error(\"[\".concat(this._clientId, \"] unpublish error\"), _context294.t2.toString()), r && r(), _context294.t2;\n\n                case 34:\n                  vc.debug(\"[\".concat(this._clientId, \"] ignore unpub operation abort\")), r && r();\n\n                case 35:\n                  this._highStream && \"disconnected\" === this._highStream.connectionState && (this._highStream = void 0, this._lowStream = void 0), t && Xi(e).call(e, function (e) {\n                    var t, i;\n                    var r = Os(t = _this258._bindEnabledTracks).call(t, e);\n                    -1 !== r && (e.off(pC.NEED_ADD_TRACK, _this258._handleLocalTrackEnable), e.off(pC.NEED_REMOVE_TRACK, _this258._handleLocalTrackDisable), Ss(i = _this258._bindEnabledTracks).call(i, r, 1));\n                  }), vc.info(Xe(i = \"[\".concat(this._clientId, \"] Unpublish success,tracks \")).call(i, Es(e).call(e, function (e) {\n                    return \"\".concat(e.getTrackId());\n                  }))), o.onSuccess();\n\n                case 36:\n                case \"end\":\n                  return _context294.stop();\n              }\n            }\n          }, _callee294, this, [[4, 11], [14, 30]]);\n        }));\n\n        function unpublish(_x434) {\n          return _unpublish4.apply(this, arguments);\n        }\n\n        return unpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee295(e, t) {\n          var _this259 = this;\n\n          var i, r, n, s, o, a, _e210, _e211, c, _t197, d, _t198, l, A, u, _i137, h, p, E, g, _, _e212;\n\n          return _regeneratorRuntime.wrap(function _callee295$(_context295) {\n            while (1) {\n              switch (_context295.prev = _context295.next) {\n                case 0:\n                  hd(t, \"mediaType\", [\"audio\", \"video\"]);\n                  a = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.SUBSCRIBE,\n                    options: [e.uid, t],\n                    tag: xm.TRACER\n                  });\n\n                  if (this._joinInfo) {\n                    _context295.next = 5;\n                    break;\n                  }\n\n                  _e210 = new Ad(ad.INVALID_OPERATION, \"Can't subscribe stream, not joined\");\n                  throw a.onError(_e210), _e210;\n\n                case 5:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context295.next = 8;\n                    break;\n                  }\n\n                  _e211 = new Ad(ad.INVALID_OPERATION, \"Can't subscribe stream in \".concat(this.connectionState, \" state\"));\n                  throw a.onError(_e211), _e211;\n\n                case 8:\n                  if (Vs(i = this._users).call(i, function (t) {\n                    return t === e;\n                  })) {\n                    _context295.next = 11;\n                    break;\n                  }\n\n                  _t197 = new Ad(ad.INVALID_REMOTE_USER, \"user is not in the channel\");\n                  throw vc.error(Xe(c = \"[\".concat(this._clientId, \"] can not subscribe \")).call(c, e.uid, \", this user is not in the channel\")), a.onError(_t197), _t197;\n\n                case 11:\n                  if (!(!e.hasAudio && !e.hasVideo)) {\n                    _context295.next = 14;\n                    break;\n                  }\n\n                  _t198 = new Ad(ad.INVALID_REMOTE_USER, \"user is not published\");\n                  throw vc.error(Xe(d = \"[\".concat(this._clientId, \"] can not subscribe \")).call(d, e.uid, \", user is not published\")), a.onError(_t198), _t198;\n\n                case 14:\n                  l = {\n                    audio: \"audio\" === t,\n                    video: \"video\" === t\n                  };\n\n                  if (!(!e.hasAudio && l.audio || !e.hasVideo && l.video)) {\n                    _context295.next = 18;\n                    break;\n                  }\n\n                  _i137 = new Ad(ad.REMOTE_USER_IS_NOT_PUBLISHED);\n                  throw vc.error(Xe(A = Xe(u = \"[\".concat(this._clientId, \"] can not subscribe \")).call(u, e.uid, \" with mediaType \")).call(A, t, \", remote track is not published\")), a.onError(_i137), _i137;\n\n                case 18:\n                  h = this._subscribeMutex.get(e.uid);\n                  h || (h = new su(\"sub-\".concat(e.uid)), this._subscribeMutex.set(e.uid, h)), vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] subscribe user \")).call(n, e.uid, \", mediaType: \")).call(r, t));\n                  _context295.next = 22;\n                  return h.lock();\n\n                case 22:\n                  p = _context295.sent;\n                  E = this._remoteStream.get(e.uid);\n                  _context295.prev = 24;\n\n                  if (!E) {\n                    _context295.next = 32;\n                    break;\n                  }\n\n                  l.audio = l.audio || E.subscribeOptions.audio;\n                  l.video = l.video || E.subscribeOptions.video;\n                  _context295.next = 30;\n                  return this._gateway.subscribeChange(E, l);\n\n                case 30:\n                  _context295.next = 42;\n                  break;\n\n                case 32:\n                  E = new zS(e, this._statsCollector, this._joinInfo, l), this._remoteStream.set(e.uid, E);\n                  _context295.prev = 33;\n                  _context295.next = 36;\n                  return this._gateway.subscribe(E);\n\n                case 36:\n                  _context295.next = 41;\n                  break;\n\n                case 38:\n                  _context295.prev = 38;\n                  _context295.t0 = _context295[\"catch\"](33);\n                  throw this._remoteStream.delete(e.uid), _context295.t0;\n\n                case 41:\n                  E.on($m.CONNECTION_STATE_CHANGE, function (t, i) {\n                    \"connecting\" === t ? _this259.emit(Sm.MEDIA_RECONNECT_START, e.uid) : \"connected\" === t && _this259.emit(Sm.MEDIA_RECONNECT_END, e.uid);\n                  });\n\n                case 42:\n                  p();\n                  _context295.next = 48;\n                  break;\n\n                case 45:\n                  _context295.prev = 45;\n                  _context295.t1 = _context295[\"catch\"](24);\n                  throw a.onError(_context295.t1), p(), vc.error(Xe(g = \"[\".concat(this._clientId, \"] subscribe user \")).call(g, e.uid, \" error\"), _context295.t1), _context295.t1;\n\n                case 48:\n                  vc.info(Xe(s = Xe(o = \"[\".concat(this._clientId, \"] subscribe success user \")).call(o, e.uid, \", mediaType: \")).call(s, t)), this._defaultStreamFallbackType && this.setStreamFallbackOption(e.uid, this._defaultStreamFallbackType).catch(function (e) {\n                    vc.warning(\"[\".concat(_this259._clientId, \"] auto set fallback failed\"), e);\n                  });\n                  _ = \"audio\" === t ? e.audioTrack : e.videoTrack;\n\n                  if (_) {\n                    _context295.next = 53;\n                    break;\n                  }\n\n                  _e212 = new Ad(ad.UNEXPECTED_ERROR, \"can not find remote track in user object\");\n                  return _context295.abrupt(\"return\", (a.onError(_e212), _e212.throw()));\n\n                case 53:\n                  return _context295.abrupt(\"return\", (a.onSuccess(_.getTrackId()), _));\n\n                case 54:\n                case \"end\":\n                  return _context295.stop();\n              }\n            }\n          }, _callee295, this, [[24, 45], [33, 38]]);\n        }));\n\n        function subscribe(_x435, _x436) {\n          return _subscribe5.apply(this, arguments);\n        }\n\n        return subscribe;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee296(e, t) {\n          var i, r, n, s, o, a, c, _t199, d, l, A, u, h, p;\n\n          return _regeneratorRuntime.wrap(function _callee296$(_context296) {\n            while (1) {\n              switch (_context296.prev = _context296.next) {\n                case 0:\n                  t && hd(t, \"mediaType\", [\"audio\", \"video\"]);\n                  a = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.UNSUBSCRIBE,\n                    options: [e.uid, t],\n                    tag: xm.TRACER\n                  });\n\n                  if (Vs(i = this._users).call(i, function (t) {\n                    return t === e;\n                  })) {\n                    _context296.next = 5;\n                    break;\n                  }\n\n                  _t199 = new Ad(ad.INVALID_REMOTE_USER, \"user is not in the channel\");\n                  throw vc.error(Xe(c = \"[\".concat(this._clientId, \"] can not subscribe \")).call(c, e.uid, \", user is not in the channel\")), a.onError(_t199), _t199;\n\n                case 5:\n                  vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] unsubscribe uid: \")).call(n, e.uid, \", mediaType: \")).call(r, t));\n                  d = this._subscribeMutex.get(e.uid);\n                  d || (d = new su(\"sub-\".concat(e.uid)), this._subscribeMutex.set(e.uid, d));\n                  _context296.next = 10;\n                  return d.lock();\n\n                case 10:\n                  l = _context296.sent;\n                  A = this._remoteStream.get(e.uid);\n\n                  if (A) {\n                    _context296.next = 14;\n                    break;\n                  }\n\n                  return _context296.abrupt(\"return\", (vc.warning(Xe(u = \"[\".concat(this._clientId, \"]: you have not subscribe the remote user \")).call(u, e.uid)), a.onSuccess(), void l()));\n\n                case 14:\n                  h = eR({}, A.subscribeOptions);\n                  \"audio\" === t ? h.audio = !1 : \"video\" === t ? (h.video = !1, A.pc._statsFilter.setVideoIsReady(!1)) : (h.audio = !1, h.video = !1);\n                  _context296.prev = 16;\n\n                  if (!(h.audio || h.video)) {\n                    _context296.next = 22;\n                    break;\n                  }\n\n                  _context296.next = 20;\n                  return this._gateway.subscribeChange(A, h);\n\n                case 20:\n                  _context296.next = 25;\n                  break;\n\n                case 22:\n                  _context296.next = 24;\n                  return A.closeP2PConnection();\n\n                case 24:\n                  this._remoteStream.delete(e.uid);\n\n                case 25:\n                  l();\n                  _context296.next = 33;\n                  break;\n\n                case 28:\n                  _context296.prev = 28;\n                  _context296.t0 = _context296[\"catch\"](16);\n\n                  if (!(_context296.t0.code !== ad.OPERATION_ABORTED)) {\n                    _context296.next = 32;\n                    break;\n                  }\n\n                  throw a.onError(_context296.t0), l(), vc.error(Xe(p = \"[\".concat(this._clientId, \"] unsubscribe user \")).call(p, e.uid, \" error\"), _context296.t0.toString()), _context296.t0;\n\n                case 32:\n                  l(), vc.debug(\"[\".concat(this._clientId, \"] ignore unsub operation abort\"));\n\n                case 33:\n                  vc.info(Xe(s = Xe(o = \"[\".concat(this._clientId, \"] unsubscribe success uid: \")).call(o, e.uid, \", mediaType: \")).call(s, t)), a.onSuccess();\n\n                case 34:\n                case \"end\":\n                  return _context296.stop();\n              }\n            }\n          }, _callee296, this, [[16, 28]]);\n        }));\n\n        function unsubscribe(_x437, _x438) {\n          return _unsubscribe5.apply(this, arguments);\n        }\n\n        return unsubscribe;\n      }()\n    }, {\n      key: \"setLowStreamParameter\",\n      value: function setLowStreamParameter(e) {\n        !function (e) {\n          if (!e) throw new Ad(lC.INVALID_PARAMS);\n          fd(e.width) || pd(e.width, \"streamParameter.width\"), fd(e.height) || pd(e.height, \"streamParameter.height\"), fd(e.framerate) || pd(e.framerate, \"streamParameter.framerate\"), fd(e.bitrate) || pd(e.bitrate, \"streamParameter.bitrate\");\n        }(e);\n        var t = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.SET_LOW_STREAM_PARAMETER,\n          options: [e],\n          tag: xm.TRACER\n        });\n        (!e.width && e.height || e.width && !e.height) && vc.warning(\"[\".concat(this._clientId, \"] The width and height parameters take effect only when both are set\")), vc.info(\"[\".concat(this._clientId, \"] set low stream parameter to\"), ge(e));\n\n        var i = this._configDistribute.getLowStreamConfigDistribute();\n\n        i && i.bitrate && e.bitrate && i.bitrate < e.bitrate && (e.bitrate = i.bitrate), this._lowStreamParameter = e, t.onSuccess();\n      }\n    }, {\n      key: \"enableDualStream\",\n      value: function () {\n        var _enableDualStream2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee297() {\n          var e, _t200, _t201;\n\n          return _regeneratorRuntime.wrap(function _callee297$(_context297) {\n            while (1) {\n              switch (_context297.prev = _context297.next) {\n                case 0:\n                  e = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.ENABLE_DUAL_STREAM,\n                    options: [],\n                    tag: xm.TRACER\n                  });\n\n                  if (Ul().supportDualStream) {\n                    _context297.next = 5;\n                    break;\n                  }\n\n                  wC.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !1\n                  });\n                  _t200 = new Ad(ad.NOT_SUPPORTED, \"Your browser is not support dual stream\");\n                  throw e.onError(_t200), _t200;\n\n                case 5:\n                  if (!this._isDualStreamEnabled) {\n                    _context297.next = 8;\n                    break;\n                  }\n\n                  _t201 = new Ad(ad.INVALID_OPERATION, \"Dual stream is already enabled\");\n                  throw e.onError(_t201), _t201;\n\n                case 8:\n                  if (!(this._highStream && \"connected\" === this._highStream.connectionState && this._highStream.videoTrack)) {\n                    _context297.next = 17;\n                    break;\n                  }\n\n                  _context297.prev = 9;\n                  _context297.next = 12;\n                  return this._publishLowStream(this._highStream.videoTrack);\n\n                case 12:\n                  _context297.next = 17;\n                  break;\n\n                case 14:\n                  _context297.prev = 14;\n                  _context297.t0 = _context297[\"catch\"](9);\n                  throw wC.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !1\n                  }), e.onError(_context297.t0), _context297.t0;\n\n                case 17:\n                  this._isDualStreamEnabled = !0, wC.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !0,\n                    succ: !0\n                  }), vc.info(\"[\".concat(this._clientId, \"] enable dual stream\")), e.onSuccess();\n\n                case 18:\n                case \"end\":\n                  return _context297.stop();\n              }\n            }\n          }, _callee297, this, [[9, 14]]);\n        }));\n\n        function enableDualStream() {\n          return _enableDualStream2.apply(this, arguments);\n        }\n\n        return enableDualStream;\n      }()\n    }, {\n      key: \"disableDualStream\",\n      value: function () {\n        var _disableDualStream2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee298() {\n          var e;\n          return _regeneratorRuntime.wrap(function _callee298$(_context298) {\n            while (1) {\n              switch (_context298.prev = _context298.next) {\n                case 0:\n                  e = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.DISABLE_DUAL_STREAM,\n                    options: [],\n                    tag: xm.TRACER\n                  });\n\n                  if (!this._lowStream) {\n                    _context298.next = 10;\n                    break;\n                  }\n\n                  _context298.prev = 2;\n                  _context298.next = 5;\n                  return this._lowStream.closeP2PConnection();\n\n                case 5:\n                  _context298.next = 10;\n                  break;\n\n                case 7:\n                  _context298.prev = 7;\n                  _context298.t0 = _context298[\"catch\"](2);\n                  throw wC.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !1,\n                    succ: !1\n                  }), e.onError(_context298.t0), _context298.t0;\n\n                case 10:\n                  this._lowStream = void 0, this._isDualStreamEnabled = !1, this._highStream && (this._highStream.lowStreamConnection = void 0), wC.streamSwitch(this._sessionId, {\n                    lts: La(),\n                    isdual: !1,\n                    succ: !0\n                  }), vc.info(\"[\".concat(this._clientId, \"] disable dual stream\")), e.onSuccess();\n\n                case 11:\n                case \"end\":\n                  return _context298.stop();\n              }\n            }\n          }, _callee298, this, [[2, 7]]);\n        }));\n\n        function disableDualStream() {\n          return _disableDualStream2.apply(this, arguments);\n        }\n\n        return disableDualStream;\n      }()\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee299(e, t) {\n          var i, _e213, _e214, r, n, _e215;\n\n          return _regeneratorRuntime.wrap(function _callee299$(_context299) {\n            while (1) {\n              switch (_context299.prev = _context299.next) {\n                case 0:\n                  !function (e) {\n                    hd(e, \"role\", [\"audience\", \"host\"]);\n                  }(e), t && Lm(t);\n                  i = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.SET_CLIENT_ROLE,\n                    options: [e, t],\n                    tag: xm.TRACER\n                  });\n\n                  if (!(\"rtc\" === this._mode)) {\n                    _context299.next = 6;\n                    break;\n                  }\n\n                  vc.warning(\"[\".concat(this._clientId, \"]rtc mode can not use setClientRole\"));\n                  _e213 = new Ad(ad.INVALID_OPERATION, \"rtc mode can not use setClientRole\");\n                  return _context299.abrupt(\"return\", (i.onError(_e213), _e213.throw()));\n\n                case 6:\n                  if (!(t && t.level && \"host\" === e)) {\n                    _context299.next = 9;\n                    break;\n                  }\n\n                  _e214 = new Ad(ad.INVALID_OPERATION, \"host mode can not set audience latency level\");\n                  return _context299.abrupt(\"return\", (i.onError(_e214), _e214.throw()));\n\n                case 9:\n                  _context299.prev = 9;\n\n                  if (!(\"audience\" === e && this._highStream)) {\n                    _context299.next = 13;\n                    break;\n                  }\n\n                  _e215 = new Ad(ad.INVALID_OPERATION, \"can not set client role to audience when publishing stream\");\n                  return _context299.abrupt(\"return\", (i.onError(_e215), _e215.throw()));\n\n                case 13:\n                  _context299.next = 15;\n                  return this._gateway.setClientRole(e, t);\n\n                case 15:\n                  vc.info(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] set client role to \")).call(n, e, \", level: \")).call(r, t && t.level));\n                  i.onSuccess();\n                  _context299.next = 22;\n                  break;\n\n                case 19:\n                  _context299.prev = 19;\n                  _context299.t0 = _context299[\"catch\"](9);\n                  throw i.onError(_context299.t0), _context299.t0;\n\n                case 22:\n                case \"end\":\n                  return _context299.stop();\n              }\n            }\n          }, _callee299, this, [[9, 19]]);\n        }));\n\n        function setClientRole(_x439, _x440) {\n          return _setClientRole4.apply(this, arguments);\n        }\n\n        return setClientRole;\n      }()\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        if (Ed(e, \"proxyServer\"), \"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Set proxy server before join channel\");\n        if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n        this._proxyServer = e, wC.setProxyServer(this._proxyServer), vc.setProxyServer(this._proxyServer);\n      }\n    }, {\n      key: \"setTurnServer\",\n      value: function setTurnServer(e) {\n        if (ld(e) || (e = [e]), \"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Set turn server before join channel\");\n        if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n        var t;\n        if (function (e) {\n          if (!ld(e) || e.length < 1) return !1;\n\n          try {\n            Xi(e).call(e, function (e) {\n              if (!e.urls) throw Error();\n            });\n          } catch (e) {\n            return !1;\n          }\n\n          return !0;\n        }(e)) return this._turnServer = {\n          servers: e,\n          mode: \"original-manual\"\n        }, void vc.info(Xe(t = \"[\".concat(this._clientId, \"] Set original turnserver success: \")).call(t, Es(e).call(e, function (e) {\n          return e.urls;\n        }).join(\",\"), \".\"));\n        Xi(e).call(e, function (e) {\n          return km(e);\n        }), this._turnServer = {\n          servers: e,\n          mode: \"manual\"\n        }, vc.info(\"[\".concat(this._clientId, \"] Set turnserver success.\"));\n      }\n    }, {\n      key: \"startProxyServer\",\n      value: function startProxyServer(e) {\n        var t = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.START_PROXY_SERVER,\n          options: [],\n          tag: xm.TRACER\n        });\n\n        if (\"DISCONNECTED\" !== this.connectionState) {\n          var _e216 = new Ad(ad.INVALID_OPERATION, \"Start proxy server before join channel\");\n\n          throw t.onError(_e216), _e216;\n        }\n\n        if (this._proxyServer || \"manual\" === this._turnServer.mode || this._useLocalAccessPoint) {\n          var _e217 = new Ad(ad.INVALID_OPERATION, \"You have already set the proxy\");\n\n          throw t.onError(_e217), _e217;\n        }\n\n        var i = [1, 2, 3, 4, 5];\n\n        switch (void 0 === e && (e = 1), e) {\n          case 1:\n            this._cloudProxyServerMode = \"normal\";\n            break;\n\n          case 2:\n            this._cloudProxyServerMode = \"443only\";\n            break;\n\n          case 3:\n            this._cloudProxyServerMode = \"proxy3\";\n            break;\n\n          case 4:\n            this._cloudProxyServerMode = \"proxy4\";\n            break;\n\n          case 5:\n            this._cloudProxyServerMode = \"proxy5\";\n            break;\n\n          default:\n            {\n              var _e218 = new Ad(ad.INVALID_PARAMS, \"proxy server mode must be \".concat(i.join(\"|\")));\n\n              throw t.onError(_e218), _e218;\n            }\n        }\n\n        vc.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode), t.onSuccess();\n      }\n    }, {\n      key: \"stopProxyServer\",\n      value: function stopProxyServer() {\n        var e = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.STOP_PROXY_SERVER,\n          options: [],\n          tag: xm.TRACER\n        });\n        if (\"DISCONNECTED\" !== this.connectionState) throw new Ad(ad.INVALID_OPERATION, \"Stop proxy server after leave channel\");\n        wC.setProxyServer(), vc.setProxyServer(), this._cloudProxyServerMode = \"disabled\", vc.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode), this._proxyServer = void 0, this._turnServer = {\n          mode: \"auto\",\n          servers: []\n        }, e.onSuccess();\n      }\n    }, {\n      key: \"setLocalAccessPoints\",\n      value: function setLocalAccessPoints(e, t) {\n        if (gd(e, \"serverList\"), Ed(t, \"domain\"), this._proxyServer || \"disabled\" !== this._cloudProxyServerMode) throw new Ad(ad.INVALID_OPERATION, \"set local access point failed, You have already set the cloud proxy\");\n        var i = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;\n        e = Es(e).call(e, function (e) {\n          var r;\n          return i.test(e) ? Xe(r = \"\".concat(e.replace(/\\./g, \"-\"), \".\")).call(r, t) : e;\n        }), this._useLocalAccessPoint = !0, Qc(\"WEBCS_DOMAIN\", e), Qc(\"WEBCS_DOMAIN_BACKUP_LIST\", e), Qc(\"GATEWAY_DOMAINS\", [t]), Qc(\"EVENT_REPORT_DOMAIN\", e[0]), Qc(\"EVENT_REPORT_BACKUP_DOMAIN\", e[1] || e[0]), Qc(\"LOG_UPLOAD_SERVER\", \"\".concat(e[0], \":6444\")), vc.info(\"set local access point success\");\n      }\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee300(e, t) {\n          var _this260 = this;\n\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee300$(_context300) {\n            while (1) {\n              switch (_context300.prev = _context300.next) {\n                case 0:\n                  hd(t, \"streamType\", [0, 1]);\n                  n = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.SET_REMOTE_VIDEO_STREAM_TYPE,\n                    options: [e, t],\n                    tag: xm.TRACER\n                  });\n                  _context300.prev = 2;\n                  _context300.next = 5;\n                  return this._gateway.setRemoteVideoStreamType(e, t);\n\n                case 5:\n                  Ua(function () {\n                    var t;\n                    var i = Vs(t = _this260._users).call(t, function (t) {\n                      return t.uid === e;\n                    });\n                    i && i.videoTrack && i.videoTrack.updateMediaStreamTrackResolution();\n                  }, 2e3);\n                  _context300.next = 11;\n                  break;\n\n                case 8:\n                  _context300.prev = 8;\n                  _context300.t0 = _context300[\"catch\"](2);\n                  throw n.onError(_context300.t0), vc.error(\"[\".concat(this._clientId, \"] set remote video stream type error\"), _context300.t0.toString()), _context300.t0;\n\n                case 11:\n                  vc.info(Xe(i = Xe(r = \"[\".concat(this._clientId, \"] set remote \")).call(r, e, \" video stream type to \")).call(i, t)), this._remoteStreamTypeCacheMap.set(e, t), n.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context300.stop();\n              }\n            }\n          }, _callee300, this, [[2, 8]]);\n        }));\n\n        function setRemoteVideoStreamType(_x441, _x442) {\n          return _setRemoteVideoStreamType4.apply(this, arguments);\n        }\n\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee301(e, t) {\n          var i, r, n;\n          return _regeneratorRuntime.wrap(function _callee301$(_context301) {\n            while (1) {\n              switch (_context301.prev = _context301.next) {\n                case 0:\n                  hd(t, \"fallbackType\", [0, 1, 2]);\n                  n = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.SET_STREAM_FALLBACK_OPTION,\n                    options: [\"too long to show\", t],\n                    tag: xm.TRACER\n                  });\n                  _context301.prev = 2;\n                  _context301.next = 5;\n                  return this._gateway.setStreamFallbackOption(e, t);\n\n                case 5:\n                  _context301.next = 10;\n                  break;\n\n                case 7:\n                  _context301.prev = 7;\n                  _context301.t0 = _context301[\"catch\"](2);\n                  throw n.onError(_context301.t0), vc.error(\"[\".concat(this._clientId, \"] set stream fallback option\"), _context301.t0.toString()), _context301.t0;\n\n                case 10:\n                  vc.info(Xe(i = Xe(r = \"[\".concat(this._clientId, \"] set remote \")).call(r, e, \" stream fallback type to \")).call(i, t)), this._streamFallbackTypeCacheMap.set(e, t), n.onSuccess();\n\n                case 11:\n                case \"end\":\n                  return _context301.stop();\n              }\n            }\n          }, _callee301, this, [[2, 7]]);\n        }));\n\n        function setStreamFallbackOption(_x443, _x444) {\n          return _setStreamFallbackOption4.apply(this, arguments);\n        }\n\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"setEncryptionConfig\",\n      value: function setEncryptionConfig(e, t, i) {\n        !function (e) {\n          hd(e, \"encryptionMode\", [\"aes-128-xts\", \"aes-256-xts\", \"aes-128-ecb\", \"sm4-128-ecb\", \"aes-128-gcm\", \"aes-256-gcm\", \"aes-128-gcm2\", \"aes-256-gcm2\", \"none\"]);\n        }(e), Ed(t, \"secret\");\n        var r = [\"aes-128-gcm2\", \"aes-256-gcm2\"];\n\n        if (eo(r).call(r, e)) {\n          if (!i || !(i instanceof Uint8Array && 32 === i.length)) throw new Ad(ad.INVALID_PARAMS, \"salt must be an Uint8Array and exactly equal to 32 bytes\");\n        } else if (i) throw new Ad(ad.INVALID_PARAMS, \"current encrypt mode does not need salt\");\n\n        new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\\\"|{}\\\\[\\\\]])(?=.{8,})\").test(t) || vc.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer.\\n      \"), this._encryptionMode = e, this._encryptionSecret = t, i && (this._encryptionSalt = jh(i));\n      }\n    }, {\n      key: \"renewToken\",\n      value: function () {\n        var _renewToken2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee302(e) {\n          var t, _e219;\n\n          return _regeneratorRuntime.wrap(function _callee302$(_context302) {\n            while (1) {\n              switch (_context302.prev = _context302.next) {\n                case 0:\n                  Ed(e, \"token\", 1, 2047);\n                  t = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.RENEW_TOKEN,\n                    options: [e],\n                    tag: xm.TRACER\n                  });\n\n                  if (this._key) {\n                    _context302.next = 5;\n                    break;\n                  }\n\n                  _e219 = new Ad(ad.INVALID_OPERATION, \"renewToken should not be called before user join\");\n                  return _context302.abrupt(\"return\", (t.onError(_e219), _e219.throw()));\n\n                case 5:\n                  this._key = e;\n                  _context302.prev = 6;\n                  _context302.next = 9;\n                  return this._gateway.renewToken(e);\n\n                case 9:\n                  _context302.next = 14;\n                  break;\n\n                case 11:\n                  _context302.prev = 11;\n                  _context302.t0 = _context302[\"catch\"](6);\n                  throw t.onError(_context302.t0), vc.error(\"[\".concat(this._clientId, \"] renewToken failed\"), _context302.t0.toString()), _context302.t0;\n\n                case 14:\n                  vc.debug(\"[\".concat(this._clientId, \"] renewToken success\")), t.onSuccess();\n\n                case 15:\n                case \"end\":\n                  return _context302.stop();\n              }\n            }\n          }, _callee302, this, [[6, 11]]);\n        }));\n\n        function renewToken(_x445) {\n          return _renewToken2.apply(this, arguments);\n        }\n\n        return renewToken;\n      }()\n    }, {\n      key: \"enableAudioVolumeIndicator\",\n      value: function enableAudioVolumeIndicator() {\n        var _this261 = this;\n\n        var e = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.ENABLE_AUDIO_VOLUME_INDICATOR,\n          options: [],\n          tag: xm.TRACER\n        });\n        if (this._audioVolumeIndicationInterval) return vc.warning(\"you have already enabled audio volume indicator!\"), e.onSuccess();\n        this._audioVolumeIndicationInterval = window.setInterval(function () {\n          var e, t, i;\n          var r = od(e = Es(t = BA(Xh(i = _this261._remoteStream).call(i))).call(t, function (e) {\n            return {\n              level: e.user.audioTrack ? 100 * e.user.audioTrack._source.getAccurateVolumeLevel() : 0,\n              uid: e.getUserId()\n            };\n          })).call(e, function (e, t) {\n            return e.level - t.level;\n          });\n          _this261._highStream && _this261._highStream.audioTrack && (r.push({\n            level: 100 * _this261._highStream.audioTrack._source.getAccurateVolumeLevel(),\n            uid: _this261._highStream._userId\n          }), r = od(r).call(r, function (e, t) {\n            return e.level - t.level;\n          })), _this261.emit(Sm.VOLUME_INDICATOR, r);\n        }, Fc(\"AUDIO_VOLUME_INDICATION_INTERVAL\") || 2e3), e.onSuccess();\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e = this._statsCollector.getRTCStats(),\n            t = this._gateway.getInChannelInfo();\n\n        return e.Duration = Math.round(t.duration / 1e3), e;\n      }\n    }, {\n      key: \"startLiveStreaming\",\n      value: function startLiveStreaming(e, t) {\n        var i = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.START_LIVE_STREAMING,\n          options: [e, t],\n          tag: xm.TRACER\n        });\n\n        if (!t) {\n          if (\"h264\" !== this._codec) {\n            var _e220 = new Ad(ad.LIVE_STREAMING_INVALID_RAW_STREAM, \"raw streaming is only support h264\");\n\n            return i.onError(_e220), As.reject(_e220);\n          }\n\n          if (!this._highStream) {\n            var _e221 = new Ad(ad.LIVE_STREAMING_INVALID_RAW_STREAM, \"can not find stream to raw streaming\");\n\n            return i.onError(_e221), As.reject(_e221);\n          }\n        }\n\n        if (this._liveRawStreamingClient && this._liveRawStreamingClient.hasUrl(e) || this._liveTranscodeStreamingClient && this._liveTranscodeStreamingClient.hasUrl(e)) {\n          var _e222 = new Ad(ad.LIVE_STREAMING_TASK_CONFLICT);\n\n          return i.onError(_e222), As.reject(_e222);\n        }\n\n        var r = t ? oC.TRANSCODE : oC.RAW;\n        return this._createLiveStreamingClient(r).startLiveStreamingTask(e, r).then(function () {\n          return i.onSuccess();\n        }).catch(function (e) {\n          throw i.onError(e), e;\n        });\n      }\n    }, {\n      key: \"setLiveTranscoding\",\n      value: function setLiveTranscoding(e) {\n        var t = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.SET_LIVE_TRANSCODING,\n          options: [e],\n          tag: xm.TRACER\n        });\n        return this._createLiveStreamingClient(oC.TRANSCODE).setTranscodingConfig(e).then(function () {\n          return t.onSuccess();\n        }).catch(function (e) {\n          throw t.onError(e), e;\n        });\n      }\n    }, {\n      key: \"stopLiveStreaming\",\n      value: function stopLiveStreaming(e) {\n        var t;\n        var i = wC.reportApiInvoke(this._sessionId, {\n          name: Fm.STOP_LIVE_STREAMING,\n          options: [e],\n          tag: xm.TRACER\n        }),\n            r = Fr(t = [this._liveRawStreamingClient, this._liveTranscodeStreamingClient]).call(t, function (t) {\n          return t && t.hasUrl(e);\n        });\n\n        if (!r.length) {\n          var _e223 = new Ad(ad.INVALID_PARAMS, \"can not find live streaming url to stop\");\n\n          return i.onError(_e223), As.reject(_e223);\n        }\n\n        return As.all(Es(r).call(r, function (t) {\n          return t && t.stopLiveStreamingTask(e);\n        })).then(function () {\n          return i.onSuccess();\n        }).catch(function (e) {\n          throw i.onError(e), e;\n        });\n      }\n    }, {\n      key: \"addInjectStreamUrl\",\n      value: function () {\n        var _addInjectStreamUrl2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee303(e, t) {\n          var i, _i138;\n\n          return _regeneratorRuntime.wrap(function _callee303$(_context303) {\n            while (1) {\n              switch (_context303.prev = _context303.next) {\n                case 0:\n                  i = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.ADD_INJECT_STREAM_URL,\n                    options: [e, t],\n                    tag: xm.TRACER\n                  });\n                  _context303.prev = 1;\n\n                  if (this._joinInfo) {\n                    _context303.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not addInjectStreamUrl, no joininfo\");\n\n                case 4:\n                  _i138 = this._createLiveStreamingClient(oC.INJECT);\n\n                  _i138.setInjectStreamConfig(t, 0);\n\n                  _context303.next = 8;\n                  return _i138.startLiveStreamingTask(e, oC.INJECT);\n\n                case 8:\n                  _context303.next = 13;\n                  break;\n\n                case 10:\n                  _context303.prev = 10;\n                  _context303.t0 = _context303[\"catch\"](1);\n                  throw i.onError(_context303.t0), _context303.t0;\n\n                case 13:\n                  i.onSuccess();\n\n                case 14:\n                case \"end\":\n                  return _context303.stop();\n              }\n            }\n          }, _callee303, this, [[1, 10]]);\n        }));\n\n        function addInjectStreamUrl(_x446, _x447) {\n          return _addInjectStreamUrl2.apply(this, arguments);\n        }\n\n        return addInjectStreamUrl;\n      }()\n    }, {\n      key: \"removeInjectStreamUrl\",\n      value: function () {\n        var _removeInjectStreamUrl2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee304() {\n          var e, t, i, _e224, _r86;\n\n          return _regeneratorRuntime.wrap(function _callee304$(_context304) {\n            while (1) {\n              switch (_context304.prev = _context304.next) {\n                case 0:\n                  e = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.REMOVE_INJECT_STREAM_URL,\n                    options: [],\n                    tag: xm.TRACER\n                  });\n                  _context304.prev = 1;\n                  _e224 = this._createLiveStreamingClient(oC.INJECT), _r86 = Vs(t = BA(Xh(i = _e224.streamingTasks).call(i))).call(t, function (e) {\n                    return e.mode === oC.INJECT;\n                  });\n\n                  if (!(!this._joinInfo || !_r86)) {\n                    _context304.next = 5;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can remove addInjectStreamUrl, no joininfo or inject task\");\n\n                case 5:\n                  _context304.next = 7;\n                  return _e224.stopLiveStreamingTask(_r86.url);\n\n                case 7:\n                  _context304.next = 12;\n                  break;\n\n                case 9:\n                  _context304.prev = 9;\n                  _context304.t0 = _context304[\"catch\"](1);\n                  throw e.onError(_context304.t0), _context304.t0;\n\n                case 12:\n                  e.onSuccess();\n\n                case 13:\n                case \"end\":\n                  return _context304.stop();\n              }\n            }\n          }, _callee304, this, [[1, 9]]);\n        }));\n\n        function removeInjectStreamUrl() {\n          return _removeInjectStreamUrl2.apply(this, arguments);\n        }\n\n        return removeInjectStreamUrl;\n      }()\n    }, {\n      key: \"startChannelMediaRelay\",\n      value: function () {\n        var _startChannelMediaRelay3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee305(e) {\n          var t, _t202;\n\n          return _regeneratorRuntime.wrap(function _callee305$(_context305) {\n            while (1) {\n              switch (_context305.prev = _context305.next) {\n                case 0:\n                  t = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.START_CHANNEL_MEDIA_RELAY,\n                    options: [e],\n                    tag: xm.TRACER\n                  });\n                  _context305.prev = 1;\n                  U_(e);\n                  _t202 = this._createChannelMediaRelayClient();\n                  _context305.next = 6;\n                  return _t202.startChannelMediaRelay(e);\n\n                case 6:\n                  _context305.next = 11;\n                  break;\n\n                case 8:\n                  _context305.prev = 8;\n                  _context305.t0 = _context305[\"catch\"](1);\n                  return _context305.abrupt(\"return\", (t.onError(_context305.t0), _context305.t0.throw()));\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context305.stop();\n              }\n            }\n          }, _callee305, this, [[1, 8]]);\n        }));\n\n        function startChannelMediaRelay(_x448) {\n          return _startChannelMediaRelay3.apply(this, arguments);\n        }\n\n        return startChannelMediaRelay;\n      }()\n    }, {\n      key: \"updateChannelMediaRelay\",\n      value: function () {\n        var _updateChannelMediaRelay3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee306(e) {\n          var t, _t203;\n\n          return _regeneratorRuntime.wrap(function _callee306$(_context306) {\n            while (1) {\n              switch (_context306.prev = _context306.next) {\n                case 0:\n                  t = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.UPDATE_CHANNEL_MEDIA_RELAY,\n                    options: [e],\n                    tag: xm.TRACER\n                  });\n                  _context306.prev = 1;\n                  U_(e);\n                  _t203 = this._createChannelMediaRelayClient();\n                  _context306.next = 6;\n                  return _t203.updateChannelMediaRelay(e);\n\n                case 6:\n                  _context306.next = 11;\n                  break;\n\n                case 8:\n                  _context306.prev = 8;\n                  _context306.t0 = _context306[\"catch\"](1);\n                  return _context306.abrupt(\"return\", (t.onError(_context306.t0), _context306.t0.throw()));\n\n                case 11:\n                  t.onSuccess();\n\n                case 12:\n                case \"end\":\n                  return _context306.stop();\n              }\n            }\n          }, _callee306, this, [[1, 8]]);\n        }));\n\n        function updateChannelMediaRelay(_x449) {\n          return _updateChannelMediaRelay3.apply(this, arguments);\n        }\n\n        return updateChannelMediaRelay;\n      }()\n    }, {\n      key: \"stopChannelMediaRelay\",\n      value: function () {\n        var _stopChannelMediaRelay3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee307() {\n          var e, _e225;\n\n          return _regeneratorRuntime.wrap(function _callee307$(_context307) {\n            while (1) {\n              switch (_context307.prev = _context307.next) {\n                case 0:\n                  e = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.STOP_CHANNEL_MEDIA_RELAY,\n                    options: [],\n                    tag: xm.TRACER\n                  });\n                  _context307.prev = 1;\n                  _e225 = this._createChannelMediaRelayClient();\n                  _context307.next = 5;\n                  return _e225.stopChannelMediaRelay();\n\n                case 5:\n                  _context307.next = 10;\n                  break;\n\n                case 7:\n                  _context307.prev = 7;\n                  _context307.t0 = _context307[\"catch\"](1);\n                  return _context307.abrupt(\"return\", (e.onError(_context307.t0), _context307.t0.throw()));\n\n                case 10:\n                  e.onSuccess();\n\n                case 11:\n                case \"end\":\n                  return _context307.stop();\n              }\n            }\n          }, _callee307, this, [[1, 7]]);\n        }));\n\n        function stopChannelMediaRelay() {\n          return _stopChannelMediaRelay3.apply(this, arguments);\n        }\n\n        return stopChannelMediaRelay;\n      }()\n    }, {\n      key: \"sendStreamMessage\",\n      value: function sendStreamMessage(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        if (!this._joinInfo) throw new Ad(ad.INVALID_OPERATION, \"can not send data stream, not joined\");\n\n        if (\"string\" == typeof e) {\n          e = new TextEncoder().encode(e);\n        }\n\n        if (new Blob([e]).size > 1024) throw new Ad(ad.INVALID_PARAMS, \"stream message out of range.\");\n        return this._gateway.signal.request(Xm.DATA_STREAM, {\n          payload: jh(e)\n        }, !t);\n      }\n    }, {\n      key: \"sendMetadata\",\n      value: function sendMetadata(e) {\n        if (!this._joinInfo) throw new Ad(ad.INVALID_OPERATION, \"can not send metadata, not joined\");\n        if (new Blob([e]).size > 1024) throw new Ad(ad.METADATA_OUT_OF_RANGE);\n        return this._gateway.signal.request(Xm.SEND_METADATA, {\n          session_id: this._joinInfo.sid,\n          metadata: jh(e)\n        });\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee308(e) {\n          var t, _e226;\n\n          return _regeneratorRuntime.wrap(function _callee308$(_context308) {\n            while (1) {\n              switch (_context308.prev = _context308.next) {\n                case 0:\n                  ld(e) || (e = [e]), Xi(e).call(e, Pm);\n                  t = wC.reportApiInvoke(this._sessionId, {\n                    name: Fm.SEND_CUSTOM_REPORT_MESSAGE,\n                    options: [ge(e)],\n                    tag: xm.TRACER\n                  });\n\n                  if (this._joinInfo) {\n                    _context308.next = 5;\n                    break;\n                  }\n\n                  _e226 = new Ad(ad.INVALID_OPERATION, \"can not send custom report, not joined\");\n                  return _context308.abrupt(\"return\", (t.onError(_e226), _e226.throw()));\n\n                case 5:\n                  _context308.next = 7;\n                  return wC.sendCustomReportMessage(this._joinInfo.sid, e);\n\n                case 7:\n                  t.onSuccess();\n\n                case 8:\n                case \"end\":\n                  return _context308.stop();\n              }\n            }\n          }, _callee308, this);\n        }));\n\n        function sendCustomReportMessage(_x450) {\n          return _sendCustomReportMessage4.apply(this, arguments);\n        }\n\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"getLocalAudioStats\",\n      value: function getLocalAudioStats() {\n        if (!this._highStream) return tC;\n\n        var e = this._statsCollector.getLocalAudioTrackStats(this._highStream.connectionId);\n\n        return Ra() && this._highStream && this._highStream.audioTrack && (this._highStream.audioTrack instanceof VC ? !this._highStream.audioTrack.isActive : !this._highStream.audioTrack.enabled) && (e.sendVolumeLevel = 0), e;\n      }\n    }, {\n      key: \"getRemoteAudioStats\",\n      value: function getRemoteAudioStats() {\n        var _this262 = this;\n\n        var e;\n        var t = {};\n        return Xi(e = this._remoteStream).call(e, function (e, i) {\n          t[i] = _this262._statsCollector.getRemoteAudioTrackStats(e.connectionId);\n        }), t;\n      }\n    }, {\n      key: \"getLocalVideoStats\",\n      value: function getLocalVideoStats() {\n        if (!this._highStream) return iC;\n        return this._statsCollector.getLocalVideoTrackStats(this._highStream.connectionId);\n      }\n    }, {\n      key: \"getRemoteVideoStats\",\n      value: function getRemoteVideoStats() {\n        var _this263 = this;\n\n        var e;\n        var t = {};\n        return Xi(e = this._remoteStream).call(e, function (e, i) {\n          t[i] = _this263._statsCollector.getRemoteVideoTrackStats(e.connectionId);\n        }), t;\n      }\n    }, {\n      key: \"getRemoteNetworkQuality\",\n      value: function getRemoteNetworkQuality() {\n        var _this264 = this;\n\n        var e;\n        var t = {};\n        return Xi(e = this._remoteStream).call(e, function (e, i) {\n          t[i] = _this264._statsCollector.getRemoteNetworkQualityStats(e.connectionId);\n        }), t;\n      }\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee309(e, t) {\n          return _regeneratorRuntime.wrap(function _callee309$(_context309) {\n            while (1) {\n              switch (_context309.prev = _context309.next) {\n                case 0:\n                  hd(t.spatialLayer, \"spatialLayer\", [0, 1, 2, 3]), hd(t.temporalLayer, \"temporalLayer\", [0, 1, 2, 3]);\n                  _context309.prev = 1;\n                  _context309.next = 4;\n                  return this._gateway.pickSVCLayer(e, t);\n\n                case 4:\n                  _context309.next = 9;\n                  break;\n\n                case 6:\n                  _context309.prev = 6;\n                  _context309.t0 = _context309[\"catch\"](1);\n                  throw vc.error(\"[\".concat(this._clientId, \"] pick SVC layer failed\"), _context309.t0.toString()), _context309.t0;\n\n                case 9:\n                case \"end\":\n                  return _context309.stop();\n              }\n            }\n          }, _callee309, this, [[1, 6]]);\n        }));\n\n        function pickSVCLayer(_x451, _x452) {\n          return _pickSVCLayer4.apply(this, arguments);\n        }\n\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"_reset\",\n      value: function _reset() {\n        var _this265 = this;\n\n        var e, t, i;\n        vc.debug(\"[\".concat(this._clientId, \"] reset client\")), this._axiosCancelSource.cancel(), this._axiosCancelSource = mc.CancelToken.source(), this._streamFallbackTypeCacheMap = new Li(), this._remoteStreamTypeCacheMap = new Li(), this._configDistribute.stopGetConfigDistribute(), this._joinInfo = void 0, this._proxyServer = void 0, this._defaultStreamFallbackType = void 0, this._sessionId = null, this._statsCollector.reset(), this._key = void 0, this._appId = void 0, this._uid = void 0, this._channelName = void 0, this._encryptionMode = \"none\", this._encryptionSecret = null, this._encryptionSalt = null, Xi(e = this._users).call(e, function (e) {\n          e.audioTrack && (e.audioTrack.stop(), e.audioTrack._isDestroyed = !0), e.videoTrack && (e.videoTrack.stop(), e.videoTrack._isDestroyed = !0);\n        }), this._users = [], this._audioVolumeIndicationInterval && (window.clearInterval(this._audioVolumeIndicationInterval), this._audioVolumeIndicationInterval = void 0), this._highStream && (this._highStream.closeP2PConnection(!0), this._highStream = void 0), Xi(t = this._bindEnabledTracks).call(t, function (e) {\n          e.off(pC.NEED_ADD_TRACK, _this265._handleLocalTrackEnable), e.off(pC.NEED_REMOVE_TRACK, _this265._handleLocalTrackDisable);\n        }), this._bindEnabledTracks = [], this._lowStream && (this._lowStream.closeP2PConnection(!0), this._lowStream = void 0), Xi(i = this._remoteStream).call(i, function (e) {\n          e.closeP2PConnection(!0);\n        }), this._remoteStream = new Li(), this._publishMutex = new su(\"client-publish\"), this._subscribeMutex = new Li(), this._networkQualityInterval && (window.clearInterval(this._networkQualityInterval), this._networkQualityInterval = void 0), this._injectStreamingClient && (this._injectStreamingClient.terminate(), this._injectStreamingClient.removeAllListeners(), this._injectStreamingClient = void 0), this._liveRawStreamingClient && (this._liveRawStreamingClient.terminate(), this._liveRawStreamingClient.removeAllListeners(), this._liveRawStreamingClient = void 0), this._liveTranscodeStreamingClient && (this._liveTranscodeStreamingClient.terminate(), this._liveTranscodeStreamingClient.removeAllListeners(), this._liveTranscodeStreamingClient = void 0), this._channelMediaRelayClient && (this._channelMediaRelayClient.dispose(), this._channelMediaRelayClient = void 0);\n      }\n    }, {\n      key: \"_startSession\",\n      value: function _startSession(e, t) {\n        var i, r, n;\n        var s = e || Nh();\n        e ? vc.debug(Xe(i = \"[\".concat(this._clientId, \"] new Session \")).call(i, s)) : vc.debug(Xe(r = Xe(n = \"[\".concat(this._clientId, \"] renewSession \")).call(n, this._sessionId, \" => \")).call(r, s)), this._sessionId = s, t ? wC.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: t.channel,\n          appid: t.appId,\n          mode: this._mode\n        }) : this._joinInfo ? wC.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._joinInfo.cname,\n          appid: this._joinInfo.appId,\n          mode: this._mode\n        }) : this._gateway.joinInfo && wC.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._gateway.joinInfo.cname,\n          appid: this._gateway.joinInfo.appId,\n          mode: this._mode\n        }), this._joinInfo && (this._joinInfo.sid = s), this._gateway.joinInfo && (this._gateway.joinInfo.sid = s);\n      }\n    }, {\n      key: \"_publishHighStream\",\n      value: function () {\n        var _publishHighStream3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee310(e) {\n          var _this266 = this;\n\n          return _regeneratorRuntime.wrap(function _callee310$(_context310) {\n            while (1) {\n              switch (_context310.prev = _context310.next) {\n                case 0:\n                  if (this._joinInfo) {\n                    _context310.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n\n                case 2:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context310.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n\n                case 4:\n                  if (!(\"auto\" === this._turnServer.mode && Fc(\"FORCE_TURN\") && !Fc(\"TURN_ENABLE_TCP\") && !Fc(\"TURN_ENABLE_UDP\"))) {\n                    _context310.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"force TURN With No TURN Configuration\");\n\n                case 6:\n                  if (!(vc.debug(\"[\".concat(this._clientId, \"] publish high stream\")), this._highStream)) {\n                    _context310.next = 10;\n                    break;\n                  }\n\n                  _context310.next = 9;\n                  return this._highStream.addTracks(e);\n\n                case 9:\n                  return _context310.abrupt(\"return\", this._highStream);\n\n                case 10:\n                  this._highStream = new WS(this._statsCollector, this._joinInfo, this._codec);\n\n                  this._highStream.on($m.P2P_LOST, function () {\n                    _this266._highStream && _this266.emit(Sm.P2P_LOST, _this266._highStream.getUserId());\n                  });\n\n                  _context310.next = 14;\n                  return this._highStream.addTracks(e);\n\n                case 14:\n                  _context310.prev = 14;\n                  _context310.next = 17;\n                  return this._gateway.publish(this._highStream, \"high\");\n\n                case 17:\n                  _context310.next = 22;\n                  break;\n\n                case 19:\n                  _context310.prev = 19;\n                  _context310.t0 = _context310[\"catch\"](14);\n                  throw this._highStream = void 0, _context310.t0;\n\n                case 22:\n                  return _context310.abrupt(\"return\", (this._highStream.on($m.CONNECTION_STATE_CHANGE, function (e, t) {\n                    _this266._highStream && (\"connected\" === e ? _this266.emit(Sm.MEDIA_RECONNECT_END, _this266._highStream.getUserId()) : \"connecting\" === e && _this266.emit(Sm.MEDIA_RECONNECT_START, _this266._highStream.getUserId()));\n                  }), this._highStream));\n\n                case 23:\n                case \"end\":\n                  return _context310.stop();\n              }\n            }\n          }, _callee310, this, [[14, 19]]);\n        }));\n\n        function _publishHighStream(_x453) {\n          return _publishHighStream3.apply(this, arguments);\n        }\n\n        return _publishHighStream;\n      }()\n    }, {\n      key: \"_publishLowStream\",\n      value: function () {\n        var _publishLowStream3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee311(e) {\n          var t;\n          return _regeneratorRuntime.wrap(function _callee311$(_context311) {\n            while (1) {\n              switch (_context311.prev = _context311.next) {\n                case 0:\n                  if (this._joinInfo) {\n                    _context311.next = 2;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n\n                case 2:\n                  if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                    _context311.next = 4;\n                    break;\n                  }\n\n                  throw new Ad(ad.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n\n                case 4:\n                  if (!(!this._highStream || \"connected\" !== this._highStream.connectionState)) {\n                    _context311.next = 6;\n                    break;\n                  }\n\n                  throw new Ad(ad.UNEXPECTED_ERROR, \"Could not find high stream\");\n\n                case 6:\n                  if (!this._lowStream) {\n                    _context311.next = 8;\n                    break;\n                  }\n\n                  return _context311.abrupt(\"return\", new Ad(ad.UNEXPECTED_ERROR, \"[\".concat(this._clientId, \"] Can't publish low stream when stream already publish\")).throw());\n\n                case 8:\n                  vc.debug(\"[\".concat(this._clientId, \"] publish low stream\")), this._lowStream = new WS(this._statsCollector, this._joinInfo, this._codec, !0);\n                  t = this._configDistribute.getLowStreamConfigDistribute();\n                  t && t.bitrate && (this._lowStreamParameter || (this._lowStreamParameter = {\n                    width: 160,\n                    height: 120,\n                    framerate: 15,\n                    bitrate: 50\n                  }), this._lowStreamParameter && this._lowStreamParameter.bitrate && t.bitrate < this._lowStreamParameter.bitrate && (this._lowStreamParameter.bitrate = t.bitrate));\n                  this._lowStream.lowStreamParameter = this._lowStreamParameter;\n                  _context311.next = 14;\n                  return this._lowStream.addTracks([e]);\n\n                case 14:\n                  _context311.prev = 14;\n                  _context311.next = 17;\n                  return this._gateway.publish(this._lowStream, \"low\");\n\n                case 17:\n                  _context311.next = 22;\n                  break;\n\n                case 19:\n                  _context311.prev = 19;\n                  _context311.t0 = _context311[\"catch\"](14);\n                  throw this._lowStream = void 0, _context311.t0;\n\n                case 22:\n                  this._highStream.lowStreamConnection = this._lowStream;\n\n                case 23:\n                case \"end\":\n                  return _context311.stop();\n              }\n            }\n          }, _callee311, this, [[14, 19]]);\n        }));\n\n        function _publishLowStream(_x454) {\n          return _publishLowStream3.apply(this, arguments);\n        }\n\n        return _publishLowStream;\n      }()\n    }, {\n      key: \"_createLiveStreamingClient\",\n      value: function _createLiveStreamingClient(e) {\n        var _this267 = this;\n\n        if (!this._joinInfo || !this._appId) {\n          return new Ad(ad.INVALID_OPERATION, \"can not create live streaming client, please join channel first\").throw();\n        }\n\n        var t = function t() {\n          return new B_(_this267._joinInfo, _this267._config.websocketRetryConfig || HA, _this267._config.httpRetryConfig || HA);\n        },\n            i = function i(e) {\n          e.onLiveStreamError = function (e, t) {\n            wC.reportApiInvoke(_this267._sessionId, {\n              name: Fm.ON_LIVE_STREAM_ERROR,\n              options: [e, t],\n              tag: xm.TRACER\n            }).onSuccess(), _this267.emit(Sm.LIVE_STREAMING_ERROR, e, t);\n          }, e.onLiveStreamWarning = function (e, t) {\n            wC.reportApiInvoke(_this267._sessionId, {\n              name: Fm.ON_LIVE_STREAM_WARNING,\n              options: [e, t],\n              tag: xm.TRACER\n            }).onSuccess(), _this267.emit(Sm.LIVE_STREAMING_WARNING, e, t);\n          }, e.on(cC.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n            if (!_this267._joinInfo) return i(new Ad(ad.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n            fS(e, _this267._joinInfo, _this267._axiosCancelSource.token, HA).then(t).catch(i);\n          });\n        };\n\n        switch (e) {\n          case oC.RAW:\n            return this._liveRawStreamingClient || (this._liveRawStreamingClient = t(), i(this._liveRawStreamingClient)), this._liveRawStreamingClient;\n\n          case oC.TRANSCODE:\n            return this._liveTranscodeStreamingClient || (this._liveTranscodeStreamingClient = t(), i(this._liveTranscodeStreamingClient)), this._liveTranscodeStreamingClient;\n\n          case oC.INJECT:\n            return this._injectStreamingClient || (this._injectStreamingClient = t(), this._injectStreamingClient.on(cC.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n              if (!_this267._joinInfo) return i(new Ad(ad.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n              fS(e, _this267._joinInfo, _this267._axiosCancelSource.token, HA).then(t).catch(i);\n            }), this._injectStreamingClient.onInjectStatusChange = function (e, t, i) {\n              _this267.emit(Sm.INJECT_STREAM_STATUS, e, t, i);\n            }), this._injectStreamingClient;\n        }\n      }\n    }, {\n      key: \"_createChannelMediaRelayClient\",\n      value: function _createChannelMediaRelayClient() {\n        var _this268 = this;\n\n        if (!this._joinInfo) {\n          return new Ad(ad.INVALID_OPERATION, \"can not create channel media relay client, please join channel first\").throw();\n        }\n\n        return this._channelMediaRelayClient || (this._channelMediaRelayClient = new F_(this._joinInfo, this._clientId, this._config.websocketRetryConfig || HA, this._config.httpRetryConfig || HA), this._channelMediaRelayClient.on(\"state\", function (e) {\n          \"RELAY_STATE_FAILURE\" === e && _this268._channelMediaRelayClient && _this268._channelMediaRelayClient.dispose(), _this268.emit(Sm.CHANNEL_MEDIA_RELAY_STATE, e);\n        }), this._channelMediaRelayClient.on(\"event\", function (e) {\n          _this268.emit(Sm.CHANNEL_MEDIA_RELAY_EVENT, e);\n        })), this._channelMediaRelayClient;\n      }\n    }, {\n      key: \"_handleGatewayEvents\",\n      value: function _handleGatewayEvents() {\n        var _this269 = this;\n\n        this._gateway.on(El.DISCONNECT_P2P, function () {\n          var e;\n          vc.debug(\"[\".concat(_this269._clientId, \"] start full reconnect\")), _this269._highStream && \"disconnected\" !== _this269._highStream.connectionState && (vc.debug(\"[\".concat(_this269._clientId, \"] ready to reconnect high stream\")), _this269._highStream.readyToReconnectPC()), _this269._lowStream && \"disconnected\" !== _this269._lowStream.connectionState && (vc.debug(\"[\".concat(_this269._clientId, \"] ready to reconnect low stream\")), _this269._lowStream.readyToReconnectPC()), Xi(e = _this269._remoteStream).call(e, function (e, t) {\n            var i;\n            vc.debug(Xe(i = \"[\".concat(_this269._clientId, \"] ready to reconnect remote stream \")).call(i, t)), e.readyToReconnectPC();\n          });\n        }), this._gateway.on(El.CONNECTION_STATE_CHANGE, function (e, t, i) {\n          var r, n;\n\n          var s = function s() {\n            _this269.emit(Sm.CONNECTION_STATE_CHANGE, e, t, i);\n          };\n\n          if (vc.info(Xe(r = Xe(n = \"[\".concat(_this269._clientId, \"] connection state change: \")).call(n, t, \" -> \")).call(r, e)), \"DISCONNECTED\" === e) return _this269._reset(), void s();\n          var o, a;\n          if (\"RECONNECTING\" === e) _this269._highStream && \"connecting\" === _this269._highStream.connectionState && (vc.debug(\"[\".concat(_this269._clientId, \"] ready to reconnect high stream\")), _this269._highStream.readyToReconnectPC()), _this269._lowStream && \"connecting\" === _this269._lowStream.connectionState && (vc.debug(\"[\".concat(_this269._clientId, \"] ready to reconnect low stream\")), _this269._lowStream.readyToReconnectPC()), Xi(o = _this269._remoteStream).call(o, function (e, t) {\n            var i;\n            \"connecting\" === e.connectionState && (vc.debug(Xe(i = \"[\".concat(_this269._clientId, \"] ready to reconnect remote stream \")).call(i, t)), e.readyToReconnectPC());\n          }), Xi(a = _this269._users).call(a, function (e) {\n            e._trust_in_room_ = !1, e._trust_audio_enabled_state_ = !1, e._trust_video_enabled_state_ = !1, e._trust_audio_mute_state_ = !1, e._trust_video_mute_state_ = !1, e._trust_stream_added_state_ = !1;\n          }), _this269._userOfflineTimeout && window.clearTimeout(_this269._userOfflineTimeout), _this269._streamRemovedTimeout && window.clearTimeout(_this269._streamRemovedTimeout), _this269._userOfflineTimeout = void 0, _this269._streamRemovedTimeout = void 0;else if (\"CONNECTED\" === e) {\n            var c, d;\n            Xi(c = _this269._streamFallbackTypeCacheMap).call(c, function (e, t) {\n              _this269._gateway.setStreamFallbackOption(t, e).catch(function (e) {\n                return vc.warning(\"[\".concat(_this269._clientId, \"] auto set stream fallback option failed\"), e);\n              });\n            }), Xi(d = _this269._remoteStreamTypeCacheMap).call(d, function (e, t) {\n              _this269._gateway.setRemoteVideoStreamType(t, e).catch(function (e) {\n                return vc.warning(\"[\".concat(_this269._clientId, \"] auto set remote stream type failed\"), e);\n              });\n            }), _this269._highStream && \"connecting\" === _this269._highStream.connectionState ? _this269._highStream.reconnectPC().then(function () {\n              _this269._lowStream && \"connecting\" === _this269._lowStream.connectionState && _this269._lowStream.reconnectPC().catch(function (e) {\n                vc.error(\"[\".concat(_this269._clientId, \"] republish low stream error\"), e.toString()), _this269.emit(Sm.ERROR, {\n                  reason: e\n                });\n              });\n            }).catch(function (e) {\n              vc.error(\"[\".concat(_this269._clientId, \"] republish high stream error\"), e.toString()), _this269.emit(Sm.ERROR, {\n                reason: e\n              });\n            }) : _this269._lowStream && \"connecting\" === _this269._lowStream.connectionState && _this269._lowStream.reconnectPC().catch(function (e) {\n              vc.error(\"[\".concat(_this269._clientId, \"] republish low stream error\"), e.toString()), _this269.emit(Sm.ERROR, {\n                reason: e\n              });\n            }), _this269._userOfflineTimeout = window.setTimeout(function () {\n              var e;\n              if (\"CONNECTED\" !== _this269.connectionState) return;\n              _this269._userOfflineTimeout = void 0;\n              var t = Fr(e = _this269._users).call(e, function (e) {\n                return !e._trust_in_room_;\n              });\n              Xi(t).call(t, function (e) {\n                var t;\n                vc.debug(Xe(t = \"[\".concat(_this269._clientId, \"] user offline timeout, emit user offline \")).call(t, e.uid)), _this269._handleUserOffline({\n                  uid: e.uid\n                });\n              });\n            }, 3e3), _this269._streamRemovedTimeout = window.setTimeout(function () {\n              var e;\n              \"CONNECTED\" === _this269.connectionState && (_this269._streamRemovedTimeout = void 0, Xi(e = _this269._users).call(e, function (e) {\n                var t, i, r, n, s;\n                e._trust_audio_mute_state_ || (vc.debug(Xe(t = \"[\".concat(_this269._clientId, \"] auto dispatch audio unmute event \")).call(t, e.uid)), _this269._handleMuteStream(e.uid, \"audio\", !1));\n                e._trust_video_mute_state_ || (vc.debug(Xe(i = \"[\".concat(_this269._clientId, \"] auto dispatch video unmute event \")).call(i, e.uid)), _this269._handleMuteStream(e.uid, \"video\", !1));\n                e._trust_audio_enabled_state_ || (vc.debug(Xe(r = \"[\".concat(_this269._clientId, \"] auto dispatch enable local audio \")).call(r, e.uid)), _this269._handleSetStreamLocalEnable(\"audio\", e.uid, !0));\n                !e._trust_video_enabled_state_ && e._video_enabled_ && (vc.debug(Xe(n = \"[\".concat(_this269._clientId, \"] auto dispatch enable local video \")).call(n, e.uid)), _this269._handleSetStreamLocalEnable(\"video\", e.uid, !0));\n                e._trust_stream_added_state_ || (vc.debug(Xe(s = \"[\".concat(_this269._clientId, \"] auto dispatch stream remove \")).call(s, e.uid)), _this269._handleRemoveStream({\n                  uid: e.uid,\n                  uint_id: e._uintid\n                }));\n              }));\n            }, 1e3);\n          }\n          s();\n        }), this._gateway.on(El.REQUEST_NEW_GATEWAY_LIST, function (e, t) {\n          if (!_this269._joinInfo) return t(new Ad(ad.UNEXPECTED_ERROR, \"can not recover, no join info\"));\n          ES(_this269._joinInfo, _this269._axiosCancelSource.token, _this269._config.httpRetryConfig || HA).then(function (t) {\n            var i;\n            _this269._joinInfo && (_this269._joinInfo.apResponse = t.gatewayInfo.res), e(Es(i = t.gatewayInfo.gatewayAddrs).call(i, function (e) {\n              if (_this269._joinInfo && _this269._joinInfo.proxyServer) {\n                var t, i;\n\n                var _r87 = e.split(\":\");\n\n                return Xe(t = Xe(i = \"wss://\".concat(_this269._joinInfo.proxyServer, \"/ws/?h=\")).call(i, _r87[0], \"&p=\")).call(t, _r87[1]);\n              }\n\n              return \"wss://\".concat(e);\n            }));\n          }).catch(t);\n        }), this._gateway.on(El.NETWORK_QUALITY, function (e) {\n          \"normal\" === _this269._networkQualitySensitivity && _this269.emit(Sm.NETWORK_QUALITY, e);\n        }), this._gateway.on(El.STREAM_TYPE_CHANGE, function (e, t) {\n          _this269.emit(Sm.STREAM_TYPE_CHANGED, e, t);\n\n          wC.reportApiInvoke(_this269._sessionId, {\n            name: Fm.STREAM_TYPE_CHANGE,\n            options: [e, t],\n            tag: xm.TRACER\n          }).onSuccess(ge({\n            uid: e,\n            streamType: t\n          }));\n        }), this._gateway.on(El.IS_P2P_DISCONNECTED, function (e) {\n          var t, i, r;\n          var n = [];\n          return _this269._highStream && n.push(_this269._highStream), Xi(t = _this269._remoteStream).call(t, function (e) {\n            return n.push(e);\n          }), 0 === n.length || 0 === Fr(n).call(n, function (e) {\n            return \"connected\" === e.connectionState;\n          }).length ? e(!0) : (vc.debug(Xe(i = \"[\".concat(_this269._clientId, \"] \")).call(i, Es(r = Fr(n).call(n, function (e) {\n            return \"connected\" === e.connectionState;\n          })).call(r, function (e) {\n            return e.connectionId;\n          }), \" is connected\")), void e(!1));\n        }), this._gateway.on(El.NEED_RENEW_SESSION, function () {\n          _this269._startSession();\n        }), this._gateway.signal.on(Zm.ON_USER_ONLINE, this._handleUserOnline), this._gateway.signal.on(Zm.ON_USER_OFFLINE, this._handleUserOffline), this._gateway.signal.on(Zm.ON_ADD_AUDIO_STREAM, function (e) {\n          return _this269._handleAddAudioOrVideoStream(\"audio\", e.uid, e.uint_id);\n        }), this._gateway.signal.on(Zm.ON_ADD_VIDEO_STREAM, function (e) {\n          return _this269._handleAddAudioOrVideoStream(\"video\", e.uid, e.uint_id);\n        }), this._gateway.signal.on(Zm.ON_REMOVE_STREAM, this._handleRemoveStream), this._gateway.signal.on(Zm.ON_P2P_LOST, this._handleP2PLost), this._gateway.signal.on(Zm.MUTE_AUDIO, function (e) {\n          return _this269._handleMuteStream(e.uid, \"audio\", !0);\n        }), this._gateway.signal.on(Zm.UNMUTE_AUDIO, function (e) {\n          return _this269._handleMuteStream(e.uid, \"audio\", !1);\n        }), this._gateway.signal.on(Zm.MUTE_VIDEO, function (e) {\n          return _this269._handleMuteStream(e.uid, \"video\", !0);\n        }), this._gateway.signal.on(Zm.UNMUTE_VIDEO, function (e) {\n          return _this269._handleMuteStream(e.uid, \"video\", !1);\n        }), this._gateway.signal.on(Zm.RECEIVE_METADATA, function (e) {\n          var t = Gh(e.metadata);\n\n          _this269.emit(Sm.RECEIVE_METADATA, e.uid, t);\n        }), this._gateway.signal.on(Zm.ON_DATA_STREAM, function (e) {\n          e.seq && delete e.seq, e.payload = Gh(e.payload), _this269.emit(Sm.STREAM_MESSAGE, e.uid, e.payload), _this269.onStreamMessage && _this269.onStreamMessage(e);\n        }), this._gateway.signal.on(Zm.ON_CRYPT_ERROR, function () {\n          Vh(function () {\n            vc.warning(\"[\".concat(_this269._clientId, \"] on crypt error\")), _this269.emit(Sm.CRYPT_ERROR);\n          }, _this269._sessionId);\n        }), this._gateway.signal.on(Zm.ON_TOKEN_PRIVILEGE_WILL_EXPIRE, this._handleTokenWillExpire), this._gateway.signal.on(Zm.ON_TOKEN_PRIVILEGE_DID_EXPIRE, function () {\n          vc.warning(\"[\".concat(_this269._clientId, \"] received message onTokenPrivilegeDidExpire, please get new token and join again\")), _this269._reset(), _this269._gateway.leave(!0), _this269.emit(Sm.ON_TOKEN_PRIVILEGE_DID_EXPIRE);\n        }), this._gateway.signal.on(Zm.ON_STREAM_FALLBACK_UPDATE, function (e) {\n          var t, i;\n          vc.debug(Xe(t = Xe(i = \"[\".concat(_this269._clientId, \"] stream fallback peerId: \")).call(i, e.stream_id, \", attr: \")).call(t, e.stream_type)), _this269.emit(Sm.STREAM_FALLBACK, e.stream_id, 1 === e.stream_type ? \"fallback\" : \"recover\");\n        }), this._gateway.signal.on(Zm.ON_PUBLISH_STREAM, function (e) {\n          var t;\n          _this269.uid === _this269._uid && (_this269._highStream && _this269._highStream._waitingSuccessResponse && \"connected\" === _this269._highStream.connectionState ? (_this269._highStream.reportPublishEvent(!0, null, ge({\n            proxy: e.proxy\n          })), vc.info(Xe(t = \"[\".concat(_this269._clientId, \"] on publish stream, \")).call(t, ge(e))), void 0 !== e.proxy && _this269.emit(Sm.IS_USING_CLOUD_PROXY, !!e.proxy)) : _this269._lowStream ? _this269._lowStream.reportPublishEvent(!0, null, ge({\n            proxy: e.proxy\n          })) : vc.warning(\"get on_publish_stream message but cannot handle\"));\n        }), this._gateway.signal.on(Zm.ENABLE_LOCAL_VIDEO, function (e) {\n          _this269._handleSetStreamLocalEnable(\"video\", e.uid, !0);\n        }), this._gateway.signal.on(Zm.DISABLE_LOCAL_VIDEO, function (e) {\n          _this269._handleSetStreamLocalEnable(\"video\", e.uid, !1);\n        }), this._gateway.signal.on(Jm.REQUEST_TIMEOUT, function (e, t) {\n          if (_this269._joinInfo) switch (e) {\n            case Xm.PUBLISH:\n              {\n                var i;\n                if (!t) return;\n\n                var _e227 = \"high\" === t.stream_type ? _this269._highStream : _this269._lowStream;\n\n                if (!_e227) return;\n                \"offer\" === t.state && wC.publish(_this269._joinInfo.sid, {\n                  lts: _e227.startTime,\n                  succ: !1,\n                  ec: ad.TIMEOUT,\n                  audio: t.audio,\n                  video: t.video,\n                  p2pid: t.p2p_id,\n                  publishRequestid: _e227.ID,\n                  screenshare: !(!_e227.videoTrack || -1 === Os(i = _e227.videoTrack._hints).call(i, EC.SCREEN_TRACK)),\n                  audioName: _e227.audioTrack && (_e227.audioTrack instanceof VC ? _e227.audioTrack.getSubTrackLabels().join(\",\") : _e227.audioTrack.getTrackLabel()),\n                  videoName: _e227.videoTrack && _e227.videoTrack.getTrackLabel()\n                });\n                break;\n              }\n\n            case Xm.SUBSCRIBE:\n              {\n                var _e228 = t.stream_id,\n                    _i139 = _this269._remoteStream.get(_e228);\n\n                if (!_i139) return;\n                t && wC.subscribe(_this269._joinInfo.sid, {\n                  lts: _i139.startTime,\n                  succ: !1,\n                  ec: ad.TIMEOUT,\n                  audio: !!t.audio,\n                  video: !!t.video,\n                  peerid: t.stream_id,\n                  subscribeRequestid: _i139.ID,\n                  p2pid: _i139.pc.ID\n                });\n                break;\n              }\n          }\n        });\n      }\n    }, {\n      key: \"connectionState\",\n      get: function get() {\n        return this._gateway.state;\n      }\n    }, {\n      key: \"remoteUsers\",\n      get: function get() {\n        return this._users;\n      }\n    }, {\n      key: \"localTracks\",\n      get: function get() {\n        return this._highStream ? this._highStream.getAllTracks() : [];\n      }\n    }, {\n      key: \"uid\",\n      get: function get() {\n        return this._uid;\n      }\n    }, {\n      key: \"channelName\",\n      get: function get() {\n        return this._channelName;\n      }\n    }, {\n      key: \"isStringUID\",\n      get: function get() {\n        return !!this._joinInfo && !!this._joinInfo.stringUid;\n      }\n    }]);\n\n    return rR;\n  }(Ll);\n\n  function nR() {\n    return _nR.apply(this, arguments);\n  }\n\n  function _nR() {\n    _nR = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee377() {\n      var e, _t212, _i149;\n\n      return _regeneratorRuntime.wrap(function _callee377$(_context377) {\n        while (1) {\n          switch (_context377.prev = _context377.next) {\n            case 0:\n              e = {\n                audio: [],\n                video: []\n              };\n              _context377.prev = 1;\n              _t212 = new RTCPeerConnection();\n              _t212.addTransceiver(\"video\", {\n                direction: \"recvonly\"\n              }), _t212.addTransceiver(\"audio\", {\n                direction: \"recvonly\"\n              });\n              _context377.next = 6;\n              return _t212.createOffer();\n\n            case 6:\n              _i149 = _context377.sent.sdp;\n\n              if (_i149) {\n                _context377.next = 9;\n                break;\n              }\n\n              return _context377.abrupt(\"return\", e);\n\n            case 9:\n              _t212.close(), _t212 = null, e = function (e) {\n                var t = {\n                  video: [],\n                  audio: []\n                };\n                return e.match(/ VP8/i) && t.video.push(\"VP8\"), e.match(/ VP9/i) && t.video.push(\"VP9\"), e.match(/ AV1X/i) && t.video.push(\"AV1\"), e.match(/ H264/i) && t.video.push(\"H264\"), e.match(/ opus/i) && t.audio.push(\"OPUS\"), t;\n              }(_i149);\n              _context377.next = 15;\n              break;\n\n            case 12:\n              _context377.prev = 12;\n              _context377.t0 = _context377[\"catch\"](1);\n              throw new Ad(ad.CREATE_OFFER_FAILED, _context377.t0.toString && _context377.t0.toString()).print();\n\n            case 15:\n              return _context377.abrupt(\"return\", e);\n\n            case 16:\n            case \"end\":\n              return _context377.stop();\n          }\n        }\n      }, _callee377, this, [[1, 12]]);\n    }));\n    return _nR.apply(this, arguments);\n  }\n\n  function sR() {\n    var e = iu.reportApiInvoke(null, {\n      name: Od.CHECK_SYSTEM_REQUIREMENTS,\n      options: [],\n      tag: bd.TRACER\n    });\n    var t = !1;\n\n    try {\n      var _e229 = window.RTCPeerConnection,\n          _i140 = navigator.mediaDevices && navigator.mediaDevices.getUserMedia,\n          _r88 = window.WebSocket;\n\n      t = !!(_e229 && _i140 && _r88);\n    } catch (e) {\n      return vc.error(\"check system requirement failed: \", e), !1;\n    }\n\n    var i = !1;\n    var r = pa();\n    r.name === Aa.CHROME && Number(r.version) >= 58 && (!Ca() || ma()) && (i = !0), r.name === Aa.FIREFOX && Number(r.version) >= 56 && (i = !0), r.name === Aa.OPERA && Number(r.version) >= 45 && (i = !0), r.name === Aa.SAFARI && Number(r.version) >= 11 && (i = !0), (ba() || pa().name === Aa.QQ) && (i = !0), vc.debug(\"checkSystemRequirements, api:\", t, \"browser\", i);\n    var n = t && i;\n    return e.onSuccess(n), n;\n  }\n\n  tR([vC({\n    report: wC\n  }), iR(\"design:type\", Function), iR(\"design:paramtypes\", [String]), iR(\"design:returntype\", void 0)], rR.prototype, \"setProxyServer\", null), tR([vC(), iR(\"design:type\", Function), iR(\"design:paramtypes\", [Object]), iR(\"design:returntype\", void 0)], rR.prototype, \"setTurnServer\", null), tR([vC({\n    report: wC\n  }), iR(\"design:type\", Function), iR(\"design:paramtypes\", [Array, String]), iR(\"design:returntype\", void 0)], rR.prototype, \"setLocalAccessPoints\", null), tR([vC({\n    report: wC\n  }), iR(\"design:type\", Function), iR(\"design:paramtypes\", [String, String, Uint8Array]), iR(\"design:returntype\", void 0)], rR.prototype, \"setEncryptionConfig\", null), tR([yC({\n    report: wC\n  }), iR(\"design:type\", Function), iR(\"design:paramtypes\", [Object, Object]), iR(\"design:returntype\", As)], rR.prototype, \"pickSVCLayer\", null);\n\n  var oR =\n  /*#__PURE__*/\n  function (_u6) {\n    _inherits(oR, _u6);\n\n    function oR(e) {\n      var _this270;\n\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, oR);\n\n      _this270 = _possibleConstructorReturn(this, _getPrototypeOf(oR).call(this)), _this270.startPlayTime = 0, _this270.startPlayOffset = 0, _this270.pausePlayTime = 0, _this270.currentLoopCount = 0, _this270._currentState = \"stopped\", _this270.audioBuffer = e, _this270.options = t, _this270.startPlayOffset = _this270.options.startPlayTime || 0;\n      return _this270;\n    }\n\n    _createClass(oR, [{\n      key: \"createWebAudioDiagram\",\n      value: function createWebAudioDiagram() {\n        return this.context.createGain();\n      }\n    }, {\n      key: \"updateOptions\",\n      value: function updateOptions(e) {\n        \"stopped\" === this.currentState ? (this.options = e, this.startPlayOffset = this.options.startPlayTime || 0) : vc.warning(\"can not set audio source options\");\n      }\n    }, {\n      key: \"startProcessAudioBuffer\",\n      value: function startProcessAudioBuffer() {\n        this.sourceNode && this.stopProcessAudioBuffer(), this.sourceNode = this.createSourceNode(), this.startSourceNode(), this.currentState = \"playing\";\n      }\n    }, {\n      key: \"pauseProcessAudioBuffer\",\n      value: function pauseProcessAudioBuffer() {\n        this.sourceNode && \"playing\" === this.currentState && (this.pausePlayTime = this.currentTime, this.sourceNode.onended = null, this.sourceNode.stop(), this.sourceNode.buffer = null, this.sourceNode = this.createSourceNode(), this.currentState = \"paused\");\n      }\n    }, {\n      key: \"seekAudioBuffer\",\n      value: function seekAudioBuffer(e) {\n        this.sourceNode && (this.sourceNode.onended = null, \"playing\" === this.currentState && this.sourceNode.stop(), this.sourceNode = this.createSourceNode(), \"playing\" === this.currentState ? (this.startPlayOffset = e, this.startSourceNode()) : \"paused\" === this.currentState && (this.pausePlayTime = e));\n      }\n    }, {\n      key: \"resumeProcessAudioBuffer\",\n      value: function resumeProcessAudioBuffer() {\n        \"paused\" === this.currentState && this.sourceNode && (this.startPlayOffset = this.pausePlayTime, this.pausePlayTime = 0, this.startSourceNode(), this.currentState = \"playing\");\n      }\n    }, {\n      key: \"stopProcessAudioBuffer\",\n      value: function stopProcessAudioBuffer() {\n        if (this.sourceNode) {\n          this.sourceNode.onended = null;\n\n          try {\n            this.sourceNode.stop();\n          } catch (e) {}\n\n          this.reset();\n        }\n      }\n    }, {\n      key: \"startSourceNode\",\n      value: function startSourceNode() {\n        var e;\n        this.sourceNode && this.sourceNode.buffer && (this.sourceNode.start(0, this.startPlayOffset), this.startPlayTime = this.context.currentTime, this.sourceNode.onended = qs(e = this.handleSourceNodeEnded).call(e, this));\n      }\n    }, {\n      key: \"createSourceNode\",\n      value: function createSourceNode() {\n        var e = this.context.createBufferSource();\n        return e.buffer = this.audioBuffer, e.loop = !!this.options.loop, e.connect(this.outputNode), e;\n      }\n    }, {\n      key: \"handleSourceNodeEnded\",\n      value: function handleSourceNodeEnded() {\n        if (this.currentLoopCount += 1, this.options.cycle && this.options.cycle > this.currentLoopCount) return this.startPlayOffset = 0, this.sourceNode = void 0, void this.startProcessAudioBuffer();\n        this.reset();\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.startPlayOffset = this.options.startPlayTime || 0, this.currentState = \"stopped\", this.sourceNode && (this.sourceNode.disconnect(), this.sourceNode = void 0), this.currentLoopCount = 0;\n      }\n    }, {\n      key: \"currentState\",\n      set: function set(e) {\n        e !== this._currentState && (this._currentState = e, this.emit(Hd.AUDIO_SOURCE_STATE_CHANGE, this._currentState));\n      },\n      get: function get() {\n        return this._currentState;\n      }\n    }, {\n      key: \"duration\",\n      get: function get() {\n        return this.audioBuffer.duration;\n      }\n    }, {\n      key: \"currentTime\",\n      get: function get() {\n        return \"stopped\" === this.currentState ? 0 : \"paused\" === this.currentState ? this.pausePlayTime : (this.context.currentTime - this.startPlayTime + this.startPlayOffset) % this.audioBuffer.duration;\n      }\n    }]);\n\n    return oR;\n  }(_u);\n\n  var aR = new Li();\n\n  function cR(_x455, _x456) {\n    return _cR.apply(this, arguments);\n  }\n\n  function _cR() {\n    _cR = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee378(e, t) {\n      var i, _t213, _t214, r;\n\n      return _regeneratorRuntime.wrap(function _callee378$(_context378) {\n        while (1) {\n          switch (_context378.prev = _context378.next) {\n            case 0:\n              i = null;\n\n              if (!(\"string\" == typeof e)) {\n                _context378.next = 16;\n                break;\n              }\n\n              _t213 = aR.get(e);\n\n              if (!_t213) {\n                _context378.next = 5;\n                break;\n              }\n\n              return _context378.abrupt(\"return\", (vc.debug(\"use cached audio resource: \", e), _t213));\n\n            case 5:\n              _context378.prev = 5;\n              _context378.next = 8;\n              return qA(function () {\n                return mc.get(e, {\n                  responseType: \"arraybuffer\"\n                });\n              }, void 0, void 0, {\n                maxRetryCount: 3\n              });\n\n            case 8:\n              i = _context378.sent.data;\n              _context378.next = 14;\n              break;\n\n            case 11:\n              _context378.prev = 11;\n              _context378.t0 = _context378[\"catch\"](5);\n              throw new Ad(ad.FETCH_AUDIO_FILE_FAILED, _context378.t0.toString());\n\n            case 14:\n              _context378.next = 20;\n              break;\n\n            case 16:\n              _t214 = new As(function (t, i) {\n                var r = new FileReader();\n                r.onload = function (e) {\n                  e.target ? t(e.target.result) : i(new Ad(ad.READ_LOCAL_AUDIO_FILE_ERROR));\n                }, r.onerror = function () {\n                  i(new Ad(ad.READ_LOCAL_AUDIO_FILE_ERROR));\n                }, r.readAsArrayBuffer(e);\n              });\n              _context378.next = 19;\n              return _t214;\n\n            case 19:\n              i = _context378.sent;\n\n            case 20:\n              _context378.next = 22;\n              return function (e) {\n                var t = hu();\n                return new As(function (i, r) {\n                  t.decodeAudioData(e, function (e) {\n                    i(e);\n                  }, function (e) {\n                    r(new Ad(ad.DECODE_AUDIO_FILE_FAILED, e.toString()));\n                  });\n                });\n              }(i);\n\n            case 22:\n              r = _context378.sent;\n              return _context378.abrupt(\"return\", (\"string\" == typeof e && t && aR.set(e, r), r));\n\n            case 24:\n            case \"end\":\n              return _context378.stop();\n          }\n        }\n      }, _callee378, this, [[5, 11]]);\n    }));\n    return _cR.apply(this, arguments);\n  }\n\n  function dR(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function lR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = dR(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = dR(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function AR(e, t, i, r) {\n    i.optimizationMode && (r && r.width && r.height ? (i.encoderConfig = lR({}, r, {\n      bitrateMin: r.bitrateMin,\n      bitrateMax: r.bitrateMax\n    }), \"motion\" !== i.optimizationMode && \"detail\" !== i.optimizationMode || (t.contentHint = i.optimizationMode, t.contentHint === i.optimizationMode ? vc.debug(\"[\".concat(e, \"] set content hint to\"), i.optimizationMode) : vc.debug(\"[\".concat(e, \"] set content hint failed\")))) : vc.warning(\"[\".concat(e, \"] can not apply optimization mode bitrate config, no encoderConfig\")));\n  }\n\n  function uR(e, t) {\n    var i = ir(e);\n\n    if (vA) {\n      var r = vA(e);\n      t && (r = Fr(r).call(r, function (t) {\n        return Br(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n\n    return i;\n  }\n\n  function hR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i,\n          r = null != arguments[t] ? arguments[t] : {};\n      if (t % 2) Xi(i = uR(Object(r), !0)).call(i, function (t) {\n        NA(e, t, r[t]);\n      });else if (Vl) se(e, Vl(r));else {\n        var n;\n        Xi(n = uR(Object(r))).call(n, function (t) {\n          dr(e, t, Br(r, t));\n        });\n      }\n    }\n\n    return e;\n  }\n\n  function pR(e, t, i, r) {\n    i.optimizationMode && (r && r.width && r.height ? (i.encoderConfig = hR({}, r, {\n      bitrateMin: r.bitrateMin,\n      bitrateMax: r.bitrateMax\n    }), \"motion\" !== i.optimizationMode && \"detail\" !== i.optimizationMode || (t.contentHint = i.optimizationMode, t.contentHint === i.optimizationMode ? vc.debug(\"[\".concat(e, \"] set content hint to\"), i.optimizationMode) : vc.debug(\"[\".concat(e, \"] set content hint failed\")))) : vc.warning(\"[\".concat(e, \"] can not apply optimization mode bitrate config, no encoderConfig\")));\n  }\n\n  var ER = L.setInterval;\n  var gR = pa().name;\n  var _R = pa().name;\n\n  var IR =\n  /*#__PURE__*/\n  function () {\n    function IR(e, t) {\n      _classCallCheck(this, IR);\n\n      this.id = 0, IR.count += 1, this.id = IR.count, this.element = e, this.context = t;\n    }\n\n    _createClass(IR, [{\n      key: \"initPeers\",\n      value: function initPeers() {\n        var _this271 = this;\n\n        this.peerPair = [new RTCPeerConnection(), new RTCPeerConnection()], this.peerPair[1].ontrack = function (e) {\n          var t = document.createElement(\"audio\");\n          t.srcObject = new MediaStream([e.track]), t.play(), _this271.audioPlayerElement = t;\n        };\n      }\n    }, {\n      key: \"switchSdp\",\n      value: function () {\n        var _switchSdp = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee314() {\n          var e, t, _i141, _r89;\n\n          return _regeneratorRuntime.wrap(function _callee314$(_context314) {\n            while (1) {\n              switch (_context314.prev = _context314.next) {\n                case 0:\n                  if (this.peerPair) {\n                    _context314.next = 2;\n                    break;\n                  }\n\n                  return _context314.abrupt(\"return\");\n\n                case 2:\n                  e =\n                  /*#__PURE__*/\n                  function () {\n                    var _ref205 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee312(_e230, t) {\n                      var i;\n                      return _regeneratorRuntime.wrap(function _callee312$(_context312) {\n                        while (1) {\n                          switch (_context312.prev = _context312.next) {\n                            case 0:\n                              if (!(\"offer\" === t)) {\n                                _context312.next = 6;\n                                break;\n                              }\n\n                              _context312.next = 3;\n                              return _e230.createOffer();\n\n                            case 3:\n                              _context312.t0 = _context312.sent;\n                              _context312.next = 9;\n                              break;\n\n                            case 6:\n                              _context312.next = 8;\n                              return _e230.createAnswer();\n\n                            case 8:\n                              _context312.t0 = _context312.sent;\n\n                            case 9:\n                              i = _context312.t0;\n                              _context312.next = 12;\n                              return _e230.setLocalDescription(i);\n\n                            case 12:\n                              return _context312.abrupt(\"return\", \"complete\" === _e230.iceGatheringState ? _e230.localDescription : new As(function (t) {\n                                _e230.onicegatheringstatechange = function () {\n                                  \"complete\" === _e230.iceGatheringState && t(_e230.localDescription);\n                                };\n                              }));\n\n                            case 13:\n                            case \"end\":\n                              return _context312.stop();\n                          }\n                        }\n                      }, _callee312, this);\n                    }));\n\n                    return function e(_x457, _x458) {\n                      return _ref205.apply(this, arguments);\n                    };\n                  }(), t =\n                  /*#__PURE__*/\n                  function () {\n                    var _ref206 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee313(e, _t204) {\n                      return _regeneratorRuntime.wrap(function _callee313$(_context313) {\n                        while (1) {\n                          switch (_context313.prev = _context313.next) {\n                            case 0:\n                              _context313.next = 2;\n                              return e.setRemoteDescription(_t204);\n\n                            case 2:\n                              return _context313.abrupt(\"return\", _context313.sent);\n\n                            case 3:\n                            case \"end\":\n                              return _context313.stop();\n                          }\n                        }\n                      }, _callee313, this);\n                    }));\n\n                    return function t(_x459, _x460) {\n                      return _ref206.apply(this, arguments);\n                    };\n                  }();\n                  _context314.prev = 3;\n                  _context314.next = 6;\n                  return e(this.peerPair[0], \"offer\");\n\n                case 6:\n                  _i141 = _context314.sent;\n                  _context314.next = 9;\n                  return t(this.peerPair[1], _i141);\n\n                case 9:\n                  _context314.next = 11;\n                  return e(this.peerPair[1], \"answer\");\n\n                case 11:\n                  _r89 = _context314.sent;\n                  _context314.next = 14;\n                  return t(this.peerPair[0], _r89);\n\n                case 14:\n                  _context314.next = 19;\n                  break;\n\n                case 16:\n                  _context314.prev = 16;\n                  _context314.t0 = _context314[\"catch\"](3);\n                  throw new Ad(ad.LOCAL_AEC_ERROR, _context314.t0.toString()).print();\n\n                case 19:\n                case \"end\":\n                  return _context314.stop();\n              }\n            }\n          }, _callee314, this, [[3, 16]]);\n        }));\n\n        function switchSdp() {\n          return _switchSdp.apply(this, arguments);\n        }\n\n        return switchSdp;\n      }()\n    }, {\n      key: \"getTracksFromMediaElement\",\n      value: function () {\n        var _getTracksFromMediaElement = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee315(e) {\n          var t, i;\n          return _regeneratorRuntime.wrap(function _callee315$(_context315) {\n            while (1) {\n              switch (_context315.prev = _context315.next) {\n                case 0:\n                  if (!this.audioTrack) {\n                    _context315.next = 2;\n                    break;\n                  }\n\n                  return _context315.abrupt(\"return\", this.audioTrack);\n\n                case 2:\n                  _context315.prev = 2;\n                  e instanceof HTMLVideoElement && (e.captureStream ? e.captureStream() : e.mozCaptureStream()), t = this.context.createMediaStreamDestination();\n                  this.context.createMediaElementSource(e).connect(t);\n                  _context315.next = 10;\n                  break;\n\n                case 7:\n                  _context315.prev = 7;\n                  _context315.t0 = _context315[\"catch\"](2);\n                  throw new Ad(ad.LOCAL_AEC_ERROR, _context315.t0.toString()).print();\n\n                case 10:\n                  if (t) {\n                    _context315.next = 12;\n                    break;\n                  }\n\n                  throw new Ad(ad.LOCAL_AEC_ERROR, \"no dest node when local aec\").print();\n\n                case 12:\n                  i = t.stream.getAudioTracks()[0];\n                  return _context315.abrupt(\"return\", (this.audioTrack = i, i));\n\n                case 14:\n                case \"end\":\n                  return _context315.stop();\n              }\n            }\n          }, _callee315, this, [[2, 7]]);\n        }));\n\n        function getTracksFromMediaElement(_x461) {\n          return _getTracksFromMediaElement.apply(this, arguments);\n        }\n\n        return getTracksFromMediaElement;\n      }()\n    }, {\n      key: \"getElement\",\n      value: function getElement() {\n        return this.element;\n      }\n    }, {\n      key: \"startEchoCancellation\",\n      value: function () {\n        var _startEchoCancellation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee316() {\n          var e, t;\n          return _regeneratorRuntime.wrap(function _callee316$(_context316) {\n            while (1) {\n              switch (_context316.prev = _context316.next) {\n                case 0:\n                  this.context.resume(), this.peerPair && this.close(), this.initPeers();\n                  e = this.element;\n                  _context316.next = 4;\n                  return this.getTracksFromMediaElement(e);\n\n                case 4:\n                  t = _context316.sent;\n                  this.peerPair && this.peerPair[0].addTrack(t);\n                  _context316.next = 8;\n                  return this.switchSdp();\n\n                case 8:\n                case \"end\":\n                  return _context316.stop();\n              }\n            }\n          }, _callee316, this);\n        }));\n\n        function startEchoCancellation() {\n          return _startEchoCancellation.apply(this, arguments);\n        }\n\n        return startEchoCancellation;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        vc.debug(\"close echo cancellation unit, id is\", this.id), this.audioPlayerElement && this.audioPlayerElement.pause(), this.peerPair && Xi(e = this.peerPair).call(e, function (e) {\n          e.close();\n        }), this.peerPair = void 0, this.audioPlayerElement = void 0;\n      }\n    }]);\n\n    return IR;\n  }();\n\n  IR.count = 0;\n\n  var fR = function fR(e, t, i, r) {\n    var n,\n        s = arguments.length,\n        o = s < 3 ? t : null === r ? r = Br(t, i) : r;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, r);else for (var a = e.length - 1; a >= 0; a--) {\n      (n = e[a]) && (o = (s < 3 ? n(o) : s > 3 ? n(t, i, o) : n(t, i)) || o);\n    }\n    return s > 3 && o && dr(t, i, o), o;\n  },\n      mR = function mR(e, t) {\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.metadata) return Reflect.metadata(e, t);\n  };\n\n  var CR = window.AudioContext || window.webkitAudioContext;\n\n  var SR =\n  /*#__PURE__*/\n  function () {\n    function SR() {\n      _classCallCheck(this, SR);\n\n      this.units = [];\n    }\n\n    _createClass(SR, [{\n      key: \"processExternalMediaAEC\",\n      value: function processExternalMediaAEC(e) {\n        var t;\n        if (!this._doesEnvironmentNeedAEC()) return vc.debug(\"the system does not need to process local aec\"), -1;\n        this.context || (this.context = new CR());\n        var i = Vs(t = this.units).call(t, function (t) {\n          return t && t.getElement() === e;\n        });\n        return i || (i = new IR(e, this.context), this.units.push(i)), i.startEchoCancellation(), vc.debug(\"start processing local audio echo cancellation, id is\", i.id), i.id;\n      }\n    }, {\n      key: \"_doesEnvironmentNeedAEC\",\n      value: function _doesEnvironmentNeedAEC() {\n        return pa().name !== Aa.SAFARI;\n      }\n    }]);\n\n    return SR;\n  }();\n\n  fR([eu({\n    report: iu\n  }), mR(\"design:type\", Function), mR(\"design:paramtypes\", [HTMLAudioElement]), mR(\"design:returntype\", Number)], SR.prototype, \"processExternalMediaAEC\", null);\n  var RR = new SR();\n  var TR, vR, yR, wR;\n\n  function NR(e) {\n    return Du.enumerateDevices(!0, !0, e);\n  }\n\n  function OR(e) {\n    return Du.getRecordingDevices(e);\n  }\n\n  function bR(e) {\n    return Du.getCamerasDevices(e);\n  }\n\n  function DR(e) {\n    return Du.getSpeakers(e);\n  }\n\n  function kR() {\n    return new M_();\n  }\n\n  function LR(e) {\n    vc.setLogLevel(e);\n  }\n\n  function PR() {\n    vc.enableLogUpload();\n  }\n\n  function BR() {\n    vc.disableLogUpload();\n  }\n\n  function MR(_x462, _x463) {\n    return _MR.apply(this, arguments);\n  }\n\n  function _MR() {\n    _MR = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee379(e, t) {\n      var i;\n      return _regeneratorRuntime.wrap(function _callee379$(_context379) {\n        while (1) {\n          switch (_context379.prev = _context379.next) {\n            case 0:\n              if (!(vc.debug(Xe(i = \"loadModule: \".concat(e.name, \", loadOption: \")).call(i, ge(t))), !e.moduleInit)) {\n                _context379.next = 2;\n                break;\n              }\n\n              throw vc.debug(\"Invalid Plugin\"), new Ad(ad.INVALID_PLUGIN, \"invalid plugin\");\n\n            case 2:\n              _context379.prev = 2;\n              _context379.next = 5;\n              return e.moduleInit({\n                logger: vc,\n                report: iu\n              }, t);\n\n            case 5:\n              _context379.next = 10;\n              break;\n\n            case 7:\n              _context379.prev = 7;\n              _context379.t0 = _context379[\"catch\"](2);\n              throw new Ad(ad.UNEXPECTED_ERROR, \"unexpected error in loadModule\", _context379.t0);\n\n            case 10:\n            case \"end\":\n              return _context379.stop();\n          }\n        }\n      }, _callee379, this, [[2, 7]]);\n    }));\n    return _MR.apply(this, arguments);\n  }\n\n  function UR(e) {\n    RR.processExternalMediaAEC(e);\n  }\n\n  Qc(\"PROCESS_ID\", Xe(TR = Xe(vR = Xe(yR = Xe(wR = \"process-\".concat(wh(8, \"\"), \"-\")).call(wR, wh(4, \"\"), \"-\")).call(yR, wh(4, \"\"), \"-\")).call(vR, wh(4, \"\"), \"-\")).call(TR, wh(12, \"\"))), function () {\n    var e = pa();\n    Ml.getDisplayMedia = function (e) {\n      if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) return !0;\n      return !1;\n    }(), Ml.getStreamFromExtension = e.name === Aa.CHROME && Number(e.version) > 34, Ml.supportUnifiedPlan = function () {\n      if (!window.RTCRtpTransceiver) return !1;\n      if (!(\"currentDirection\" in RTCRtpTransceiver.prototype)) return !1;\n      var e = new RTCPeerConnection();\n      var t = !1;\n\n      try {\n        e.addTransceiver(\"audio\"), t = !0;\n      } catch (e) {}\n\n      return e.close(), t;\n    }(), Ml.supportMinBitrate = e.name === Aa.CHROME || e.name === Aa.EDGE, Ml.supportSetRtpSenderParameters = function () {\n      var e = pa();\n      if (!window.RTCRtpSender || !window.RTCRtpSender.prototype.setParameters || !window.RTCRtpSender.prototype.getParameters) return !1;\n      return !!ka() || !(!Ra() && !fa()) || e.name === Aa.FIREFOX && Number(e.version) >= 64;\n    }(), e.name === Aa.SAFARI && (Number(e.version) >= 14 ? Ml.supportDualStream = !0 : Ml.supportDualStream = !1), Ml.webAudioMediaStreamDest = function () {\n      var e = pa();\n      if (e.name === Aa.SAFARI && Number(e.version) < 12) return !1;\n      return !0;\n    }(), Ml.supportReplaceTrack = function () {\n      if (!window.RTCRtpSender) return !1;\n      if (\"function\" == typeof RTCRtpSender.prototype.replaceTrack) return !0;\n      return !1;\n    }(), Ml.supportWebGL = \"undefined\" != typeof WebGLRenderingContext, Ml.supportRequestFrame = !!window.CanvasCaptureMediaStreamTrack, ka() || (Ml.webAudioWithAEC = !0), Ml.supportShareAudio = function () {\n      var e = pa();\n      if ((e.os === la.WIN_10 || e.os === la.WIN_81 || e.os === la.WIN_7 || e.os === la.LINUX || e.os === la.MAC_OS) && e.name === Aa.CHROME && Number(e.version) >= 74) return !0;\n      return !1;\n    }(), Ml.supportDualStreamEncoding = function () {\n      var e = pa();\n      return \"Safari\" === e.name && Number(e.version) >= 14;\n    }(), vc.info(\"browser compatibility\", ge(Ml), ge(e));\n  }(), function () {\n    var e = window.localStorage.getItem(\"websdk_ng_global_parameter\");\n    if (e) try {\n      var t;\n\n      var _i142 = JSON.parse(window.atob(e)),\n          _r90 = La();\n\n      vc.debug(\"Loading global parameters from cache\", _i142), Xi(t = ir(_i142)).call(t, function (e) {\n        if (Object.prototype.hasOwnProperty.call(xc, e)) {\n          var _i142$e = _i142[e],\n              _t205 = _i142$e.value,\n              _n55 = _i142$e.expires;\n          if (_n55 && _n55 <= _r90) return;\n          Vc[e] = _t205, xc[e] = _t205;\n        }\n      });\n    } catch (t) {\n      vc.error(\"Error loading mutableParamsCache: \".concat(e), t.message);\n    }\n  }();\n  var QR = {\n    __CLIENT_LIST__: Yc,\n    __TRACK_LIST__: qc,\n    VERSION: wc,\n    BUILD: yc,\n    setParameter: Qc,\n    getParameter: Fc,\n    getSupportedCodec: nR,\n    checkSystemRequirements: sR,\n    getDevices: NR,\n    getMicrophones: OR,\n    getCameras: bR,\n    getElectronScreenSources: Cu,\n    getPlaybackDevices: DR,\n    createClient: function createClient() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        codec: \"vp8\",\n        mode: \"rtc\"\n      };\n      var t = iu.reportApiInvoke(null, {\n        name: Od.CREATE_CLIENT,\n        options: [e],\n        tag: bd.TRACER\n      });\n\n      try {\n        !function (e) {\n          hd(e.codec, \"config.codec\", [\"vp8\", \"vp9\", \"av1\", \"h264\"]), hd(e.mode, \"config.mode\", [\"rtc\", \"live\"]), void 0 !== e.proxyServer && Ed(e.proxyServer, \"config.proxyServer\", 1, 1e4), void 0 !== e.turnServer && Jd(e.turnServer), void 0 !== e.httpRetryConfig && Yd(e.httpRetryConfig), void 0 !== e.websocketRetryConfig && Yd(e.websocketRetryConfig);\n        }(e);\n      } catch (e) {\n        throw t.onError(e), e;\n      }\n\n      return t.onSuccess(), new bm(Cm({\n        forceWaitGatewayResponse: !0\n      }, e, {\n        role: \"rtc\" === e.mode ? \"host\" : e.role\n      }));\n    },\n    createCameraVideoTrack: function () {\n      var _createCameraVideoTrack = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee317() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            _e231,\n            s,\n            _args317 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee317$(_context317) {\n          while (1) {\n            switch (_context317.prev = _context317.next) {\n              case 0:\n                e = _args317.length > 0 && _args317[0] !== undefined ? _args317[0] : {\n                  encoderConfig: \"480p_1\"\n                };\n                t = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CREATE_CAM_VIDEO_TRACK,\n                  options: [lR({}, e)]\n                }), i = AI(e), r = wh(8, \"track-cam-\");\n                n = null;\n                vc.info(\"start create camera video track with config\", ge(e), \"trackId\", r);\n                _context317.prev = 4;\n                _context317.next = 7;\n                return wu({\n                  video: i\n                }, r);\n\n              case 7:\n                _context317.t0 = _context317.sent.getVideoTracks()[0];\n\n                if (_context317.t0) {\n                  _context317.next = 10;\n                  break;\n                }\n\n                _context317.t0 = null;\n\n              case 10:\n                n = _context317.t0;\n                _context317.next = 16;\n                break;\n\n              case 13:\n                _context317.prev = 13;\n                _context317.t1 = _context317[\"catch\"](4);\n                throw t.onError(_context317.t1), _context317.t1;\n\n              case 16:\n                if (n) {\n                  _context317.next = 19;\n                  break;\n                }\n\n                _e231 = new Ad(ad.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context317.abrupt(\"return\", (t.onError(_e231), _e231.throw()));\n\n              case 19:\n                e.optimizationMode && AR(r, n, e, e.encoderConfig && Lc(e.encoderConfig));\n                s = new SI(n, e, i, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, r);\n                return _context317.abrupt(\"return\", (t.onSuccess(s.getTrackId()), vc.info(\"create camera video success, trackId:\", r), s));\n\n              case 22:\n              case \"end\":\n                return _context317.stop();\n            }\n          }\n        }, _callee317, this, [[4, 13]]);\n      }));\n\n      function createCameraVideoTrack() {\n        return _createCameraVideoTrack.apply(this, arguments);\n      }\n\n      return createCameraVideoTrack;\n    }(),\n    createCustomVideoTrack: function createCustomVideoTrack(e) {\n      var t = iu.reportApiInvoke(null, {\n        tag: bd.TRACER,\n        name: Od.CREATE_CUSTOM_VIDEO_TRACK,\n        options: [e]\n      }),\n          i = new CI(e.mediaStreamTrack, {\n        bitrateMax: e.bitrateMax,\n        bitrateMin: e.bitrateMin\n      }, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n        numSpatialLayers: 1,\n        numTemporalLayers: 1\n      }, e.optimizationMode);\n      return t.onSuccess(i.getTrackId()), vc.info(\"create custom video track success with config\", e, \"trackId\", i.getTrackId()), i;\n    },\n    createScreenVideoTrack: function () {\n      var _createScreenVideoTrack = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee318() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            s,\n            o,\n            a,\n            _e232,\n            _e233,\n            _e234,\n            _e235,\n            c,\n            d,\n            _args318 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee318$(_context318) {\n          while (1) {\n            switch (_context318.prev = _context318.next) {\n              case 0:\n                e = _args318.length > 0 && _args318[0] !== undefined ? _args318[0] : {};\n                t = _args318.length > 1 && _args318[1] !== undefined ? _args318[1] : \"disable\";\n                i = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CREATE_SCREEN_VIDEO_TRACK,\n                  options: [lR({}, e), t]\n                });\n                e.encoderConfig ? \"string\" == typeof e.encoderConfig || e.encoderConfig.width && e.encoderConfig.height || (e.encoderConfig.width = {\n                  max: 1920\n                }, e.encoderConfig.height = {\n                  max: 1080\n                }) : e.encoderConfig = \"1080p_2\";\n                r = uI(e), n = wh(8, \"track-scr\");\n                s = null, o = null;\n                a = Ul();\n\n                if (!(!a.supportShareAudio && \"enable\" === t)) {\n                  _context318.next = 10;\n                  break;\n                }\n\n                _e232 = new Ad(ad.NOT_SUPPORTED, \"your browser or platform is not support share-screen with audio\");\n                return _context318.abrupt(\"return\", (i.onError(_e232), _e232.throw()));\n\n              case 10:\n                vc.info(\"start create screen video track with config\", e, \"withAudio\", t, \"trackId\", n);\n                _context318.prev = 11;\n                _context318.next = 14;\n                return wu({\n                  screen: r,\n                  screenAudio: \"auto\" === t ? a.supportShareAudio : \"enable\" === t\n                }, n);\n\n              case 14:\n                _e233 = _context318.sent;\n                s = _e233.getVideoTracks()[0] || null, o = _e233.getAudioTracks()[0] || null;\n                _context318.next = 21;\n                break;\n\n              case 18:\n                _context318.prev = 18;\n                _context318.t0 = _context318[\"catch\"](11);\n                throw i.onError(_context318.t0), _context318.t0;\n\n              case 21:\n                if (s) {\n                  _context318.next = 24;\n                  break;\n                }\n\n                _e234 = new Ad(ad.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context318.abrupt(\"return\", (i.onError(_e234), _e234.throw()));\n\n              case 24:\n                if (!(!o && \"enable\" === t)) {\n                  _context318.next = 28;\n                  break;\n                }\n\n                s && s.stop();\n                _e235 = new Ad(ad.SHARE_AUDIO_NOT_ALLOWED);\n                return _context318.abrupt(\"return\", (i.onError(_e235), _e235.throw()));\n\n              case 28:\n                e.optimizationMode || (e.optimizationMode = \"detail\"), e.optimizationMode && (AR(n, s, e, e.encoderConfig && Pc(e.encoderConfig)), e.encoderConfig && \"string\" != typeof e.encoderConfig && (e.encoderConfig.bitrateMin = e.encoderConfig.bitrateMax));\n                c = new CI(s, e.encoderConfig ? Pc(e.encoderConfig) : {}, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, n);\n\n                if (!(c._hints.push(_l.SCREEN_TRACK), !o)) {\n                  _context318.next = 32;\n                  break;\n                }\n\n                return _context318.abrupt(\"return\", (i.onSuccess(c.getTrackId()), vc.info(\"create screen video track success\", \"video:\", c.getTrackId()), c));\n\n              case 32:\n                d = new Fu(o);\n                return _context318.abrupt(\"return\", (i.onSuccess([c.getTrackId(), d.getTrackId()]), vc.info(\"create screen video track success\", \"video:\", c.getTrackId(), \"audio:\", d.getTrackId()), [c, d]));\n\n              case 34:\n              case \"end\":\n                return _context318.stop();\n            }\n          }\n        }, _callee318, this, [[11, 18]]);\n      }));\n\n      function createScreenVideoTrack() {\n        return _createScreenVideoTrack.apply(this, arguments);\n      }\n\n      return createScreenVideoTrack;\n    }(),\n    createMicrophoneAndCameraTracks: function () {\n      var _createMicrophoneAndCameraTracks = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee319() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            s,\n            o,\n            a,\n            c,\n            d,\n            l,\n            A,\n            u,\n            h,\n            _e236,\n            _e237,\n            p,\n            E,\n            _args319 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee319$(_context319) {\n          while (1) {\n            switch (_context319.prev = _context319.next) {\n              case 0:\n                e = _args319.length > 0 && _args319[0] !== undefined ? _args319[0] : {};\n                t = _args319.length > 1 && _args319[1] !== undefined ? _args319[1] : {\n                  encoderConfig: \"480p_1\"\n                };\n                o = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CREATE_MIC_AND_CAM_TRACKS,\n                  options: [e, t]\n                }), a = AI(t), c = hI(e), d = wh(8, \"track-mic-\"), l = wh(8, \"track-cam-\");\n                A = null, u = null;\n                vc.info(Xe(i = Xe(r = Xe(n = \"start create camera video track(\".concat(l, \") and microphone audio track(\")).call(n, d, \") with config, audio: \")).call(r, ge(e), \", video: \")).call(i, ge(t)));\n                _context319.prev = 5;\n                _context319.next = 8;\n                return wu({\n                  audio: c,\n                  video: a\n                }, Xe(h = \"\".concat(d, \"-\")).call(h, l));\n\n              case 8:\n                _e236 = _context319.sent;\n                A = _e236.getAudioTracks()[0], u = _e236.getVideoTracks()[0];\n                _context319.next = 15;\n                break;\n\n              case 12:\n                _context319.prev = 12;\n                _context319.t0 = _context319[\"catch\"](5);\n                throw o.onError(_context319.t0), _context319.t0;\n\n              case 15:\n                if (!(!A || !u)) {\n                  _context319.next = 18;\n                  break;\n                }\n\n                _e237 = new Ad(ad.UNEXPECTED_ERROR, \"can not find tracks in media stream\");\n                return _context319.abrupt(\"return\", (o.onError(_e237), _e237.throw()));\n\n              case 18:\n                t.optimizationMode && AR(l, u, t, t.encoderConfig && Lc(t.encoderConfig));\n                p = new xu(A, e, c, d), E = new SI(u, t, a, t.scalabiltyMode ? Bc(t.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, t.optimizationMode, l);\n                return _context319.abrupt(\"return\", (o.onSuccess([p.getTrackId(), E.getTrackId()]), vc.info(Xe(s = \"create camera video track(\".concat(l, \") and microphone audio track(\")).call(s, d, \") success\")), [p, E]));\n\n              case 21:\n              case \"end\":\n                return _context319.stop();\n            }\n          }\n        }, _callee319, this, [[5, 12]]);\n      }));\n\n      function createMicrophoneAndCameraTracks() {\n        return _createMicrophoneAndCameraTracks.apply(this, arguments);\n      }\n\n      return createMicrophoneAndCameraTracks;\n    }(),\n    createMicrophoneAudioTrack: function () {\n      var _createMicrophoneAudioTrack = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee320() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            _e238,\n            s,\n            _args320 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee320$(_context320) {\n          while (1) {\n            switch (_context320.prev = _context320.next) {\n              case 0:\n                e = _args320.length > 0 && _args320[0] !== undefined ? _args320[0] : {};\n                t = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CREATE_MIC_AUDIO_TRACK,\n                  options: [e]\n                }), i = hI(e), r = wh(8, \"track-mic-\");\n                n = null;\n                vc.info(\"start create microphone audio track with config\", ge(e), \"trackId\", r);\n                _context320.prev = 4;\n                _context320.next = 7;\n                return wu({\n                  audio: i\n                }, r);\n\n              case 7:\n                _context320.t0 = _context320.sent.getAudioTracks()[0];\n\n                if (_context320.t0) {\n                  _context320.next = 10;\n                  break;\n                }\n\n                _context320.t0 = null;\n\n              case 10:\n                n = _context320.t0;\n                _context320.next = 16;\n                break;\n\n              case 13:\n                _context320.prev = 13;\n                _context320.t1 = _context320[\"catch\"](4);\n                throw t.onError(_context320.t1), _context320.t1;\n\n              case 16:\n                if (n) {\n                  _context320.next = 19;\n                  break;\n                }\n\n                _e238 = new Ad(ad.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context320.abrupt(\"return\", (t.onError(_e238), _e238.throw()));\n\n              case 19:\n                s = new xu(n, e, i, r);\n                return _context320.abrupt(\"return\", (t.onSuccess(s.getTrackId()), vc.info(\"create microphone audio track success, trackId:\", r), s));\n\n              case 21:\n              case \"end\":\n                return _context320.stop();\n            }\n          }\n        }, _callee320, this, [[4, 13]]);\n      }));\n\n      function createMicrophoneAudioTrack() {\n        return _createMicrophoneAudioTrack.apply(this, arguments);\n      }\n\n      return createMicrophoneAudioTrack;\n    }(),\n    createCustomAudioTrack: function createCustomAudioTrack(e) {\n      var t = iu.reportApiInvoke(null, {\n        tag: bd.TRACER,\n        name: Od.CREATE_CUSTOM_AUDIO_TRACK,\n        options: [e]\n      }),\n          i = new Fu(e.mediaStreamTrack, e.encoderConfig ? Uc(e.encoderConfig) : {});\n      return vc.info(\"create custom audio track success with config\", e, \"trackId\", i.getTrackId()), t.onSuccess(i.getTrackId()), i;\n    },\n    createBufferSourceAudioTrack: function () {\n      var _createBufferSourceAudioTrack = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee321(e) {\n        var t, i, r, n, s;\n        return _regeneratorRuntime.wrap(function _callee321$(_context321) {\n          while (1) {\n            switch (_context321.prev = _context321.next) {\n              case 0:\n                t = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CREATE_BUFFER_AUDIO_TRACK,\n                  options: [e]\n                }), i = wh(8, \"track-buf-\");\n                vc.info(\"start create buffer source audio track with config\", ge(e), \"trackId\", i);\n                r = e.source;\n\n                if (e.source instanceof AudioBuffer) {\n                  _context321.next = 13;\n                  break;\n                }\n\n                _context321.prev = 4;\n                _context321.next = 7;\n                return cR(e.source, e.cacheOnlineFile);\n\n              case 7:\n                e.source = _context321.sent;\n                _context321.next = 13;\n                break;\n\n              case 10:\n                _context321.prev = 10;\n                _context321.t0 = _context321[\"catch\"](4);\n                return _context321.abrupt(\"return\", (t.onError(_context321.t0), _context321.t0.throw()));\n\n              case 13:\n                n = new oR(e.source), s = new Vu(r, n, e.encoderConfig ? Uc(e.encoderConfig) : {}, i);\n                return _context321.abrupt(\"return\", (vc.info(\"create buffer source audio track success, trackId:\", i), t.onSuccess(s.getTrackId()), s));\n\n              case 15:\n              case \"end\":\n                return _context321.stop();\n            }\n          }\n        }, _callee321, this, [[4, 10]]);\n      }));\n\n      function createBufferSourceAudioTrack(_x464) {\n        return _createBufferSourceAudioTrack.apply(this, arguments);\n      }\n\n      return createBufferSourceAudioTrack;\n    }(),\n    setLogLevel: LR,\n    enableLogUpload: PR,\n    disableLogUpload: BR,\n    createChannelMediaRelayConfiguration: kR,\n    checkAudioTrackIsActive: function () {\n      var _checkAudioTrackIsActive = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee322(e) {\n        var t,\n            i,\n            _e239,\n            r,\n            n,\n            s,\n            o,\n            a,\n            _args322 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee322$(_context322) {\n          while (1) {\n            switch (_context322.prev = _context322.next) {\n              case 0:\n                t = _args322.length > 1 && _args322[1] !== undefined ? _args322[1] : 5e3;\n                i = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CHECK_AUDIO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n\n                if (e instanceof Fu || e instanceof Kf) {\n                  _context322.next = 5;\n                  break;\n                }\n\n                _e239 = new Ad(ad.INVALID_TRACK, \"the parameter is not a audio track\");\n                return _context322.abrupt(\"return\", (i.onError(_e239), _e239.throw()));\n\n              case 5:\n                t && t < 1e3 && (t = 1e3);\n                r = e instanceof Fu ? e.getTrackLabel() : \"remote_track\", n = e.getVolumeLevel();\n                s = n, o = n;\n                a = La();\n                return _context322.abrupt(\"return\", new As(function (n) {\n                  var c = ER(function () {\n                    var d = e.getVolumeLevel();\n                    s = d > s ? d : s, o = d < o ? d : o;\n                    var l = s - o > 1e-4,\n                        A = La() - a;\n\n                    if (l || A > t) {\n                      var u;\n                      clearInterval(c);\n                      var _t206 = l,\n                          _o24 = {\n                        duration: A,\n                        deviceLabel: r,\n                        maxVolumeLevel: s,\n                        result: _t206\n                      };\n                      vc.info(Xe(u = \"[track-\".concat(e.getTrackId(), \"] check audio track active completed. \")).call(u, ge(_o24))), i.onSuccess(_o24), n(_t206);\n                    }\n                  }, 200);\n                }));\n\n              case 10:\n              case \"end\":\n                return _context322.stop();\n            }\n          }\n        }, _callee322, this);\n      }));\n\n      function checkAudioTrackIsActive(_x465) {\n        return _checkAudioTrackIsActive.apply(this, arguments);\n      }\n\n      return checkAudioTrackIsActive;\n    }(),\n    checkVideoTrackIsActive: function () {\n      var _checkVideoTrackIsActive = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee323(e) {\n        var t,\n            i,\n            r,\n            _e240,\n            n,\n            s,\n            o,\n            a,\n            c,\n            d,\n            _e241,\n            l,\n            A,\n            _args323 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee323$(_context323) {\n          while (1) {\n            switch (_context323.prev = _context323.next) {\n              case 0:\n                t = _args323.length > 1 && _args323[1] !== undefined ? _args323[1] : 5e3;\n                r = iu.reportApiInvoke(null, {\n                  tag: bd.TRACER,\n                  name: Od.CHECK_VIDEO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n\n                if (e instanceof CI || e instanceof jf) {\n                  _context323.next = 5;\n                  break;\n                }\n\n                _e240 = new Ad(ad.INVALID_TRACK, \"the parameter is not a video track\");\n                return _context323.abrupt(\"return\", (r.onError(_e240), _e240.throw()));\n\n              case 5:\n                t && t < 1e3 && (t = 1e3);\n                n = e instanceof CI ? e.getTrackLabel() : \"remote_track\", s = e.getMediaStreamTrack(!0), o = document.createElement(\"video\");\n                o.style.width = \"1px\", o.style.height = \"1px\", o.setAttribute(\"muted\", \"\"), o.muted = !0, o.setAttribute(\"playsinline\", \"\"), o.controls = !1, (Ra() || fa()) && (o.style.opacity = \"0.01\", o.style.position = \"fixed\", o.style.left = \"0\", o.style.top = \"0\", document.body.appendChild(o)), o.srcObject = new MediaStream([s]), o.play();\n                a = document.createElement(\"canvas\");\n                a.width = 160, a.height = 120;\n                c = 0, d = 0;\n                _context323.prev = 11;\n                _e241 = La();\n                _context323.next = 15;\n                return function (e, t, i, r) {\n                  var n,\n                      s = 0,\n                      o = null;\n                  return new As(function (a, c) {\n                    function d() {\n                      s > r && n && (n(), a(s));\n                      var t = i.getContext(\"2d\");\n\n                      if (!t) {\n                        var _e242 = new Ad(ad.UNEXPECTED_ERROR, \"can not get canvas 2d context.\");\n\n                        return vc.error(_e242.toString()), void c(_e242);\n                      }\n\n                      t.drawImage(e, 0, 0, 160, 120);\n                      var d = t.getImageData(0, 0, i.width, i.height),\n                          l = Math.floor(d.data.length / 3);\n\n                      if (o) {\n                        for (var _e243 = 0; _e243 < l; _e243 += 3) {\n                          if (d.data[_e243] !== o[_e243]) return s += 1, void (o = d.data);\n                        }\n\n                        o = d.data;\n                      } else o = d.data;\n                    }\n\n                    Ua(function () {\n                      n && (n(), a(s));\n                    }, t), n = gu(function () {\n                      d();\n                    }, 30);\n                  });\n                }(o, t, a, 4);\n\n              case 15:\n                c = _context323.sent;\n                d = La() - _e241;\n                _context323.next = 22;\n                break;\n\n              case 19:\n                _context323.prev = 19;\n                _context323.t0 = _context323[\"catch\"](11);\n                throw r.onError(_context323.t0), _context323.t0;\n\n              case 22:\n                gR === Aa.SAFARI && (o.pause(), o.remove()), o.srcObject = null;\n                l = c > 4, A = {\n                  duration: d,\n                  changedPicNum: c,\n                  deviceLabel: n,\n                  result: l\n                };\n                return _context323.abrupt(\"return\", (vc.info(Xe(i = \"[track-\".concat(e.getTrackId(), \"] check video track active completed. \")).call(i, ge(A))), r.onSuccess(A), l));\n\n              case 25:\n              case \"end\":\n                return _context323.stop();\n            }\n          }\n        }, _callee323, this, [[11, 19]]);\n      }));\n\n      function checkVideoTrackIsActive(_x466) {\n        return _checkVideoTrackIsActive.apply(this, arguments);\n      }\n\n      return checkVideoTrackIsActive;\n    }(),\n    setArea: I_,\n    loadModule: MR,\n    processExternalMediaAEC: UR\n  },\n      FR = {\n    __CLIENT_LIST__: Yc,\n    __TRACK_LIST__: qc,\n    VERSION: wc,\n    BUILD: yc,\n    setParameter: Qc,\n    getParameter: Fc,\n    getSupportedCodec: nR,\n    checkSystemRequirements: sR,\n    getDevices: NR,\n    getMicrophones: OR,\n    getCameras: bR,\n    getElectronScreenSources: Cu,\n    getPlaybackDevices: DR,\n    createClient: function createClient() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        codec: \"vp8\",\n        mode: \"rtc\"\n      };\n      var t = wC.reportApiInvoke(null, {\n        name: Fm.CREATE_CLIENT,\n        options: [e],\n        tag: xm.TRACER\n      });\n\n      try {\n        !function (e) {\n          hd(e.codec, \"config.codec\", [\"vp8\", \"vp9\", \"av1\", \"h264\"]), hd(e.mode, \"config.mode\", [\"rtc\", \"live\"]), void 0 !== e.proxyServer && Ed(e.proxyServer, \"config.proxyServer\", 1, 1e4), void 0 !== e.turnServer && km(e.turnServer), void 0 !== e.httpRetryConfig && Dm(e.httpRetryConfig), void 0 !== e.websocketRetryConfig && Dm(e.websocketRetryConfig);\n        }(e);\n      } catch (e) {\n        throw t.onError(e), e;\n      }\n\n      return t.onSuccess(), new rR(eR({\n        forceWaitGatewayResponse: !0\n      }, e, {\n        role: \"rtc\" === e.mode ? \"host\" : e.role\n      }));\n    },\n    createCameraVideoTrack: function () {\n      var _createCameraVideoTrack2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee324() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            _e244,\n            s,\n            _args324 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee324$(_context324) {\n          while (1) {\n            switch (_context324.prev = _context324.next) {\n              case 0:\n                e = _args324.length > 0 && _args324[0] !== undefined ? _args324[0] : {\n                  encoderConfig: \"480p_1\"\n                };\n                t = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CREATE_CAM_VIDEO_TRACK,\n                  options: [hR({}, e)]\n                }), i = AI(e), r = wh(8, \"track-cam-\");\n                n = null;\n                vc.info(\"start create camera video track with config\", ge(e), \"trackId\", r);\n                _context324.prev = 4;\n                _context324.next = 7;\n                return wu({\n                  video: i\n                }, r);\n\n              case 7:\n                _context324.t0 = _context324.sent.getVideoTracks()[0];\n\n                if (_context324.t0) {\n                  _context324.next = 10;\n                  break;\n                }\n\n                _context324.t0 = null;\n\n              case 10:\n                n = _context324.t0;\n                _context324.next = 16;\n                break;\n\n              case 13:\n                _context324.prev = 13;\n                _context324.t1 = _context324[\"catch\"](4);\n                throw t.onError(_context324.t1), _context324.t1;\n\n              case 16:\n                if (n) {\n                  _context324.next = 19;\n                  break;\n                }\n\n                _e244 = new Ad(lC.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context324.abrupt(\"return\", (t.onError(_e244), _e244.throw()));\n\n              case 19:\n                e.optimizationMode && pR(r, n, e, e.encoderConfig && Lc(e.encoderConfig));\n                s = new US(n, e, i, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, r);\n                return _context324.abrupt(\"return\", (t.onSuccess(s.getTrackId()), vc.info(\"create camera video success, trackId:\", r), s));\n\n              case 22:\n              case \"end\":\n                return _context324.stop();\n            }\n          }\n        }, _callee324, this, [[4, 13]]);\n      }));\n\n      function createCameraVideoTrack() {\n        return _createCameraVideoTrack2.apply(this, arguments);\n      }\n\n      return createCameraVideoTrack;\n    }(),\n    createCustomVideoTrack: function createCustomVideoTrack(e) {\n      var t = wC.reportApiInvoke(null, {\n        tag: xm.TRACER,\n        name: Fm.CREATE_CUSTOM_VIDEO_TRACK,\n        options: [e]\n      }),\n          i = new MS(e.mediaStreamTrack, {\n        bitrateMax: e.bitrateMax,\n        bitrateMin: e.bitrateMin\n      }, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n        numSpatialLayers: 1,\n        numTemporalLayers: 1\n      }, e.optimizationMode);\n      return t.onSuccess(i.getTrackId()), vc.info(\"create custom video track success with config\", e, \"trackId\", i.getTrackId()), i;\n    },\n    createScreenVideoTrack: function () {\n      var _createScreenVideoTrack2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee325() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            s,\n            o,\n            a,\n            _e245,\n            _e246,\n            _e247,\n            _e248,\n            c,\n            d,\n            _args325 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee325$(_context325) {\n          while (1) {\n            switch (_context325.prev = _context325.next) {\n              case 0:\n                e = _args325.length > 0 && _args325[0] !== undefined ? _args325[0] : {};\n                t = _args325.length > 1 && _args325[1] !== undefined ? _args325[1] : \"disable\";\n                i = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CREATE_SCREEN_VIDEO_TRACK,\n                  options: [hR({}, e), t]\n                });\n                e.encoderConfig ? \"string\" == typeof e.encoderConfig || e.encoderConfig.width && e.encoderConfig.height || (e.encoderConfig.width = {\n                  max: 1920\n                }, e.encoderConfig.height = {\n                  max: 1080\n                }) : e.encoderConfig = \"1080p_2\";\n                r = uI(e), n = wh(8, \"track-scr\");\n                s = null, o = null;\n                a = Ul();\n\n                if (!(!a.supportShareAudio && \"enable\" === t)) {\n                  _context325.next = 10;\n                  break;\n                }\n\n                _e245 = new Ad(lC.NOT_SUPPORTED, \"your browser or platform is not support share-screen with audio\");\n                return _context325.abrupt(\"return\", (i.onError(_e245), _e245.throw()));\n\n              case 10:\n                vc.info(\"start create screen video track with config\", e, \"withAudio\", t, \"trackId\", n);\n                _context325.prev = 11;\n                _context325.next = 14;\n                return wu({\n                  screen: r,\n                  screenAudio: \"auto\" === t ? a.supportShareAudio : \"enable\" === t\n                }, n);\n\n              case 14:\n                _e246 = _context325.sent;\n                s = _e246.getVideoTracks()[0] || null, o = _e246.getAudioTracks()[0] || null;\n                _context325.next = 21;\n                break;\n\n              case 18:\n                _context325.prev = 18;\n                _context325.t0 = _context325[\"catch\"](11);\n                throw i.onError(_context325.t0), _context325.t0;\n\n              case 21:\n                if (s) {\n                  _context325.next = 24;\n                  break;\n                }\n\n                _e247 = new Ad(lC.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context325.abrupt(\"return\", (i.onError(_e247), _e247.throw()));\n\n              case 24:\n                if (!(!o && \"enable\" === t)) {\n                  _context325.next = 28;\n                  break;\n                }\n\n                s && s.stop();\n                _e248 = new Ad(lC.SHARE_AUDIO_NOT_ALLOWED);\n                return _context325.abrupt(\"return\", (i.onError(_e248), _e248.throw()));\n\n              case 28:\n                e.optimizationMode || (e.optimizationMode = \"detail\"), e.optimizationMode && (pR(n, s, e, e.encoderConfig && Pc(e.encoderConfig)), e.encoderConfig && \"string\" != typeof e.encoderConfig && (e.encoderConfig.bitrateMin = e.encoderConfig.bitrateMax));\n                c = new MS(s, e.encoderConfig ? Pc(e.encoderConfig) : {}, e.scalabiltyMode ? Bc(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, n);\n\n                if (!(c._hints.push(EC.SCREEN_TRACK), !o)) {\n                  _context325.next = 32;\n                  break;\n                }\n\n                return _context325.abrupt(\"return\", (i.onSuccess(c.getTrackId()), vc.info(\"create screen video track success\", \"video:\", c.getTrackId()), c));\n\n              case 32:\n                d = new QC(o);\n                return _context325.abrupt(\"return\", (i.onSuccess([c.getTrackId(), d.getTrackId()]), vc.info(\"create screen video track success\", \"video:\", c.getTrackId(), \"audio:\", d.getTrackId()), [c, d]));\n\n              case 34:\n              case \"end\":\n                return _context325.stop();\n            }\n          }\n        }, _callee325, this, [[11, 18]]);\n      }));\n\n      function createScreenVideoTrack() {\n        return _createScreenVideoTrack2.apply(this, arguments);\n      }\n\n      return createScreenVideoTrack;\n    }(),\n    createMicrophoneAndCameraTracks: function () {\n      var _createMicrophoneAndCameraTracks2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee326() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            s,\n            o,\n            a,\n            c,\n            d,\n            l,\n            A,\n            u,\n            h,\n            _e249,\n            _e250,\n            p,\n            E,\n            _args326 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee326$(_context326) {\n          while (1) {\n            switch (_context326.prev = _context326.next) {\n              case 0:\n                e = _args326.length > 0 && _args326[0] !== undefined ? _args326[0] : {};\n                t = _args326.length > 1 && _args326[1] !== undefined ? _args326[1] : {\n                  encoderConfig: \"480p_1\"\n                };\n                o = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CREATE_MIC_AND_CAM_TRACKS,\n                  options: [e, t]\n                }), a = AI(t), c = hI(e), d = wh(8, \"track-mic-\"), l = wh(8, \"track-cam-\");\n                A = null, u = null;\n                vc.info(Xe(i = Xe(r = Xe(n = \"start create camera video track(\".concat(l, \") and microphone audio track(\")).call(n, d, \") with config, audio: \")).call(r, ge(e), \", video: \")).call(i, ge(t)));\n                _context326.prev = 5;\n                _context326.next = 8;\n                return wu({\n                  audio: c,\n                  video: a\n                }, Xe(h = \"\".concat(d, \"-\")).call(h, l));\n\n              case 8:\n                _e249 = _context326.sent;\n                A = _e249.getAudioTracks()[0], u = _e249.getVideoTracks()[0];\n                _context326.next = 15;\n                break;\n\n              case 12:\n                _context326.prev = 12;\n                _context326.t0 = _context326[\"catch\"](5);\n                throw o.onError(_context326.t0), _context326.t0;\n\n              case 15:\n                if (!(!A || !u)) {\n                  _context326.next = 18;\n                  break;\n                }\n\n                _e250 = new Ad(lC.UNEXPECTED_ERROR, \"can not find tracks in media stream\");\n                return _context326.abrupt(\"return\", (o.onError(_e250), _e250.throw()));\n\n              case 18:\n                t.optimizationMode && pR(l, u, t, t.encoderConfig && Lc(t.encoderConfig));\n                p = new FC(A, e, c, d), E = new US(u, t, a, t.scalabiltyMode ? Bc(t.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, t.optimizationMode, l);\n                return _context326.abrupt(\"return\", (o.onSuccess([p.getTrackId(), E.getTrackId()]), vc.info(Xe(s = \"create camera video track(\".concat(l, \") and microphone audio track(\")).call(s, d, \") success\")), [p, E]));\n\n              case 21:\n              case \"end\":\n                return _context326.stop();\n            }\n          }\n        }, _callee326, this, [[5, 12]]);\n      }));\n\n      function createMicrophoneAndCameraTracks() {\n        return _createMicrophoneAndCameraTracks2.apply(this, arguments);\n      }\n\n      return createMicrophoneAndCameraTracks;\n    }(),\n    createMicrophoneAudioTrack: function () {\n      var _createMicrophoneAudioTrack2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee327() {\n        var e,\n            t,\n            i,\n            r,\n            n,\n            _e251,\n            s,\n            _args327 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee327$(_context327) {\n          while (1) {\n            switch (_context327.prev = _context327.next) {\n              case 0:\n                e = _args327.length > 0 && _args327[0] !== undefined ? _args327[0] : {};\n                t = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CREATE_MIC_AUDIO_TRACK,\n                  options: [e]\n                }), i = hI(e), r = wh(8, \"track-mic-\");\n                n = null;\n                vc.info(\"start create microphone audio track with config\", ge(e), \"trackId\", r);\n                _context327.prev = 4;\n                _context327.next = 7;\n                return wu({\n                  audio: i\n                }, r);\n\n              case 7:\n                _context327.t0 = _context327.sent.getAudioTracks()[0];\n\n                if (_context327.t0) {\n                  _context327.next = 10;\n                  break;\n                }\n\n                _context327.t0 = null;\n\n              case 10:\n                n = _context327.t0;\n                _context327.next = 16;\n                break;\n\n              case 13:\n                _context327.prev = 13;\n                _context327.t1 = _context327[\"catch\"](4);\n                throw t.onError(_context327.t1), _context327.t1;\n\n              case 16:\n                if (n) {\n                  _context327.next = 19;\n                  break;\n                }\n\n                _e251 = new Ad(lC.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context327.abrupt(\"return\", (t.onError(_e251), _e251.throw()));\n\n              case 19:\n                s = new FC(n, e, i, r);\n                return _context327.abrupt(\"return\", (t.onSuccess(s.getTrackId()), vc.info(\"create microphone audio track success, trackId:\", r), s));\n\n              case 21:\n              case \"end\":\n                return _context327.stop();\n            }\n          }\n        }, _callee327, this, [[4, 13]]);\n      }));\n\n      function createMicrophoneAudioTrack() {\n        return _createMicrophoneAudioTrack2.apply(this, arguments);\n      }\n\n      return createMicrophoneAudioTrack;\n    }(),\n    createCustomAudioTrack: function createCustomAudioTrack(e) {\n      var t = wC.reportApiInvoke(null, {\n        tag: xm.TRACER,\n        name: Fm.CREATE_CUSTOM_AUDIO_TRACK,\n        options: [e]\n      }),\n          i = new QC(e.mediaStreamTrack, e.encoderConfig ? Uc(e.encoderConfig) : {});\n      return vc.info(\"create custom audio track success with config\", e, \"trackId\", i.getTrackId()), t.onSuccess(i.getTrackId()), i;\n    },\n    createBufferSourceAudioTrack: function () {\n      var _createBufferSourceAudioTrack2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee328(e) {\n        var t, i, r, n, s;\n        return _regeneratorRuntime.wrap(function _callee328$(_context328) {\n          while (1) {\n            switch (_context328.prev = _context328.next) {\n              case 0:\n                t = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CREATE_BUFFER_AUDIO_TRACK,\n                  options: [e]\n                }), i = wh(8, \"track-buf-\");\n                vc.info(\"start create buffer source audio track with config\", ge(e), \"trackId\", i);\n                r = e.source;\n\n                if (e.source instanceof AudioBuffer) {\n                  _context328.next = 13;\n                  break;\n                }\n\n                _context328.prev = 4;\n                _context328.next = 7;\n                return cR(e.source, e.cacheOnlineFile);\n\n              case 7:\n                e.source = _context328.sent;\n                _context328.next = 13;\n                break;\n\n              case 10:\n                _context328.prev = 10;\n                _context328.t0 = _context328[\"catch\"](4);\n                return _context328.abrupt(\"return\", (t.onError(_context328.t0), _context328.t0.throw()));\n\n              case 13:\n                n = new oR(e.source), s = new xC(r, n, e.encoderConfig ? Uc(e.encoderConfig) : {}, i);\n                return _context328.abrupt(\"return\", (vc.info(\"create buffer source audio track success, trackId:\", i), t.onSuccess(s.getTrackId()), s));\n\n              case 15:\n              case \"end\":\n                return _context328.stop();\n            }\n          }\n        }, _callee328, this, [[4, 10]]);\n      }));\n\n      function createBufferSourceAudioTrack(_x467) {\n        return _createBufferSourceAudioTrack2.apply(this, arguments);\n      }\n\n      return createBufferSourceAudioTrack;\n    }(),\n    setLogLevel: LR,\n    enableLogUpload: PR,\n    disableLogUpload: BR,\n    createChannelMediaRelayConfiguration: kR,\n    checkAudioTrackIsActive: function () {\n      var _checkAudioTrackIsActive2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee329(e) {\n        var t,\n            i,\n            _e252,\n            r,\n            n,\n            s,\n            o,\n            a,\n            _args329 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee329$(_context329) {\n          while (1) {\n            switch (_context329.prev = _context329.next) {\n              case 0:\n                t = _args329.length > 1 && _args329[1] !== undefined ? _args329[1] : 5e3;\n                i = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CHECK_AUDIO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n\n                if (e instanceof QC || e instanceof XS) {\n                  _context329.next = 5;\n                  break;\n                }\n\n                _e252 = new Ad(lC.INVALID_TRACK, \"the parameter is not a audio track\");\n                return _context329.abrupt(\"return\", (i.onError(_e252), _e252.throw()));\n\n              case 5:\n                t && t < 1e3 && (t = 1e3);\n                r = e instanceof QC ? e.getTrackLabel() : \"remote_track\", n = e.getVolumeLevel();\n                s = n, o = n;\n                a = La();\n                return _context329.abrupt(\"return\", new As(function (n) {\n                  var c = ER(function () {\n                    var d = e.getVolumeLevel();\n                    s = d > s ? d : s, o = d < o ? d : o;\n                    var l = s - o > 1e-4,\n                        A = La() - a;\n\n                    if (l || A > t) {\n                      var u;\n                      clearInterval(c);\n                      var _t207 = l,\n                          _o25 = {\n                        duration: A,\n                        deviceLabel: r,\n                        maxVolumeLevel: s,\n                        result: _t207\n                      };\n                      vc.info(Xe(u = \"[track-\".concat(e.getTrackId(), \"] check audio track active completed. \")).call(u, ge(_o25))), i.onSuccess(_o25), n(_t207);\n                    }\n                  }, 200);\n                }));\n\n              case 10:\n              case \"end\":\n                return _context329.stop();\n            }\n          }\n        }, _callee329, this);\n      }));\n\n      function checkAudioTrackIsActive(_x468) {\n        return _checkAudioTrackIsActive2.apply(this, arguments);\n      }\n\n      return checkAudioTrackIsActive;\n    }(),\n    checkVideoTrackIsActive: function () {\n      var _checkVideoTrackIsActive2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee330(e) {\n        var t,\n            i,\n            r,\n            _e253,\n            n,\n            s,\n            o,\n            a,\n            c,\n            d,\n            _e254,\n            l,\n            A,\n            _args330 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee330$(_context330) {\n          while (1) {\n            switch (_context330.prev = _context330.next) {\n              case 0:\n                t = _args330.length > 1 && _args330[1] !== undefined ? _args330[1] : 5e3;\n                r = wC.reportApiInvoke(null, {\n                  tag: xm.TRACER,\n                  name: Fm.CHECK_VIDEO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n\n                if (e instanceof MS || e instanceof JS) {\n                  _context330.next = 5;\n                  break;\n                }\n\n                _e253 = new Ad(lC.INVALID_TRACK, \"the parameter is not a video track\");\n                return _context330.abrupt(\"return\", (r.onError(_e253), _e253.throw()));\n\n              case 5:\n                t && t < 1e3 && (t = 1e3);\n                n = e instanceof MS ? e.getTrackLabel() : \"remote_track\", s = e.getMediaStreamTrack(!0), o = document.createElement(\"video\");\n                o.style.width = \"1px\", o.style.height = \"1px\", o.setAttribute(\"muted\", \"\"), o.muted = !0, o.setAttribute(\"playsinline\", \"\"), o.controls = !1, (Ra() || fa()) && (o.style.opacity = \"0.01\", o.style.position = \"fixed\", o.style.left = \"0\", o.style.top = \"0\", document.body.appendChild(o)), o.srcObject = new MediaStream([s]), o.play();\n                a = document.createElement(\"canvas\");\n                a.width = 160, a.height = 120;\n                c = 0, d = 0;\n                _context330.prev = 11;\n                _e254 = La();\n                _context330.next = 15;\n                return function (e, t, i, r) {\n                  var n,\n                      s = 0,\n                      o = null;\n                  return new As(function (a, c) {\n                    function d() {\n                      s > r && n && (n(), a(s));\n                      var t = i.getContext(\"2d\");\n\n                      if (!t) {\n                        var _e255 = new Ad(lC.UNEXPECTED_ERROR, \"can not get canvas 2d context.\");\n\n                        return vc.error(_e255.toString()), void c(_e255);\n                      }\n\n                      t.drawImage(e, 0, 0, 160, 120);\n                      var d = t.getImageData(0, 0, i.width, i.height),\n                          l = Math.floor(d.data.length / 3);\n\n                      if (o) {\n                        for (var _e256 = 0; _e256 < l; _e256 += 3) {\n                          if (d.data[_e256] !== o[_e256]) return s += 1, void (o = d.data);\n                        }\n\n                        o = d.data;\n                      } else o = d.data;\n                    }\n\n                    Ua(function () {\n                      n && (n(), a(s));\n                    }, t), n = gu(function () {\n                      d();\n                    }, 30);\n                  });\n                }(o, t, a, 4);\n\n              case 15:\n                c = _context330.sent;\n                d = La() - _e254;\n                _context330.next = 22;\n                break;\n\n              case 19:\n                _context330.prev = 19;\n                _context330.t0 = _context330[\"catch\"](11);\n                throw r.onError(_context330.t0), _context330.t0;\n\n              case 22:\n                _R === vm.SAFARI && (o.pause(), o.remove()), o.srcObject = null;\n                l = c > 4, A = {\n                  duration: d,\n                  changedPicNum: c,\n                  deviceLabel: n,\n                  result: l\n                };\n                return _context330.abrupt(\"return\", (vc.info(Xe(i = \"[track-\".concat(e.getTrackId(), \"] check video track active completed. \")).call(i, ge(A))), r.onSuccess(A), l));\n\n              case 25:\n              case \"end\":\n                return _context330.stop();\n            }\n          }\n        }, _callee330, this, [[11, 19]]);\n      }));\n\n      function checkVideoTrackIsActive(_x469) {\n        return _checkVideoTrackIsActive2.apply(this, arguments);\n      }\n\n      return checkVideoTrackIsActive;\n    }(),\n    setArea: I_,\n    loadModule: MR,\n    processExternalMediaAEC: UR\n  },\n      xR = Fc(\"SDK_FALLBACK\") ? FR : QR;\n  return se(xR, {\n    onAudioAutoplayFailed: {\n      get: function get() {\n        return XA.onAudioAutoplayFailed;\n      },\n      set: function set(e) {\n        XA.onAudioAutoplayFailed = e;\n      }\n    },\n    onAutoplayFailed: {\n      get: function get() {\n        return XA.onAutoplayFailed;\n      },\n      set: function set(e) {\n        XA.onAutoplayFailed = e;\n      }\n    }\n  }), Du.on(kd.CAMERA_DEVICE_CHANGED, function (e) {\n    vc.info(\"camera device changed\", ge(e)), xR.onCameraChanged && xR.onCameraChanged(e);\n  }), Du.on(kd.RECORDING_DEVICE_CHANGED, function (e) {\n    vc.info(\"microphone device changed\", ge(e)), xR.onMicrophoneChanged && xR.onMicrophoneChanged(e);\n  }), Du.on(kd.PLAYOUT_DEVICE_CHANGED, function (e) {\n    vc.debug(\"playout device changed\", ge(e)), xR.onPlaybackDeviceChanged && xR.onPlaybackDeviceChanged(e);\n  }), Lu.onAutoplayFailed = function () {\n    vc.info(\"detect audio element autoplay failed\"), XA.onAudioAutoplayFailed && XA.onAudioAutoplayFailed();\n  }, Au.on(\"autoplay-failed\", function () {\n    vc.info(\"detect webaudio autoplay failed\"), XA.onAudioAutoplayFailed && XA.onAudioAutoplayFailed();\n  }), window && (window.__ARTC__ = xR), xR;\n});","map":null,"metadata":{},"sourceType":"script"}