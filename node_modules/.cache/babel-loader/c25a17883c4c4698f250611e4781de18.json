{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/ConstantEditor/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Localization from \"../../Localization\";\nimport { BLOCK } from \"../../OOBC/type\";\nimport \"./index.scss\";\nimport numpadDelete from \"../../Image/numpad-delete.png\";\nexport default function (props) {\n  var constantBlock = props.constantBlock,\n      onClickOverlay = props.onClickOverlay,\n      onClickConfirm = props.onClickConfirm,\n      onClickCancel = props.onClickCancel,\n      onChangeData = props.onChangeData;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"oobceditor_constanteditor_container\",\n    className: \"oobceditor_constanteditor_container\".concat(constantBlock ? \" oobceditor_constanteditor_container-visible\" : \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"oobceditor_constanteditor_overlay\",\n    className: \"oobceditor_constanteditor_overlay\",\n    onClick: onClickOverlay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }), constantBlock && constantBlock.type === BLOCK.KEY ? /*#__PURE__*/React.createElement(KeyConstantEditor, {\n    block: constantBlock,\n    onClickConfirm: onClickConfirm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(ConstantEditor, {\n    constantBlock: constantBlock,\n    onClickConfirm: onClickConfirm,\n    onClickCancel: onClickCancel,\n    onChangeData: onChangeData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }));\n}\n\nvar ConstantEditor = /*#__PURE__*/function (_Component) {\n  _inherits(ConstantEditor, _Component);\n\n  var _super = _createSuper(ConstantEditor);\n\n  function ConstantEditor(props) {\n    var _this;\n\n    _classCallCheck(this, ConstantEditor);\n\n    _this = _super.call(this, props);\n\n    _this.onFocusInput = function (e) {\n      e.currentTarget.select();\n    };\n\n    _this.onChangeInput = function (e) {\n      var type = _this.state.type;\n      var newValue = e.currentTarget.value;\n\n      switch (type) {\n        case BLOCK.NUMBERBLOCK:\n        case BLOCK.POSITION:\n          break;\n\n        case BLOCK.STRINGBLOCK:\n          _this.setState({\n            data: newValue\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.onClickInput = function (e) {\n      var inputId = e.currentTarget.id;\n\n      _this.setState({\n        focusedInputId: inputId\n      });\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.key === \"Enter\") {\n        _this.onClickConfirm();\n      } else {\n        switch (_this.state.type) {\n          case BLOCK.NUMBERBLOCK:\n          case BLOCK.POSITION:\n            _this.onNumberKeyDown(e);\n\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n\n    _this.onNumberKeyDown = function (e) {\n      switch (e.key) {\n        case \"1\":\n        case \"2\":\n        case \"3\":\n        case \"4\":\n        case \"5\":\n        case \"6\":\n        case \"7\":\n        case \"8\":\n        case \"9\":\n        case \"0\":\n        case \"-\":\n        case \".\":\n          _this.onClickNumpad(e.key);\n\n          break;\n\n        case \"Delete\":\n        case \"Backspace\":\n          _this.onClickNumpad(\"delete\");\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.onClickNumpad = function (numpad) {\n      var value = _this.getFocusedInputValue();\n\n      switch (numpad) {\n        case \".\":\n          if (value === \"\") {\n            value = \"0.\";\n          } else if (value === \"-\") {\n            value = \"-0.\";\n          } else if (value.indexOf(numpad) < 0) {\n            value = value + numpad;\n          }\n\n          break;\n\n        case \"-\":\n          if (value.indexOf(numpad) < 0) {\n            value = numpad + value;\n          } else {\n            value = value.slice(1, value.length);\n          }\n\n          break;\n\n        case \"delete\":\n          if (value === \"0.\") {\n            value = \"\";\n          } else {\n            value = value.slice(0, value.length - 1);\n          }\n\n          break;\n\n        case \"0\":\n          if (value !== \"0\" && value !== \"-0\") {\n            value = value + numpad;\n          }\n\n          break;\n\n        default:\n          if (value === \"0\") {\n            value = numpad;\n          } else if (value === \"-0\") {\n            value = -numpad;\n          } else {\n            value = value + numpad;\n          }\n\n          break;\n      }\n\n      if (parseFloat(value) >= 10000) value = \"9999\";\n\n      _this.updateFocusedInputValue(value);\n    };\n\n    _this.onClickClear = function () {\n      var _this$state = _this.state,\n          type = _this$state.type,\n          focusedInputId = _this$state.focusedInputId;\n\n      switch (type) {\n        case BLOCK.NUMBERBLOCK:\n        case BLOCK.STRINGBLOCK:\n          _this.setState({\n            data: \"\"\n          });\n\n          break;\n\n        case BLOCK.POSITION:\n          var data = _objectSpread({}, _this.state.data);\n\n          if (focusedInputId === \"oobceditor_constanteditor_input\") {\n            data.x = \"\";\n          } else {\n            data.y = \"\";\n          }\n\n          _this.setState({\n            data: data\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.onClickCancel = function () {\n      var _this$props = _this.props,\n          constantBlock = _this$props.constantBlock,\n          onClickCancel = _this$props.onClickCancel;\n\n      if (onClickCancel) {\n        onClickCancel(constantBlock);\n      }\n    };\n\n    _this.onClickConfirm = function () {\n      var _this$props2 = _this.props,\n          constantBlock = _this$props2.constantBlock,\n          onClickConfirm = _this$props2.onClickConfirm;\n      var type = _this.state.type;\n      var data = _this.state.data;\n\n      if (type === BLOCK.NUMBERBLOCK) {\n        data = parseFloat(data) || 0;\n      } else if (type === BLOCK.POSITION) {\n        data = {\n          x: parseFloat(data.x) || 0,\n          y: parseFloat(data.y) || 0\n        };\n      }\n\n      if (onClickConfirm) {\n        onClickConfirm(constantBlock, data);\n      }\n    };\n\n    _this.state = {\n      type: undefined,\n      data: undefined,\n      focusedInputId: \"oobceditor_constanteditor_input\"\n    };\n    return _this;\n  }\n\n  _createClass(ConstantEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.didUpdateConstantBlock();\n      window.addEventListener(\"keydown\", this.onKeyDown);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"keydown\", this.onKeyDown);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.constantBlock !== this.props.constantBlock) {\n        this.didUpdateConstantBlock();\n      }\n\n      if (prevState.data !== this.state.data) {\n        var onChangeData = this.props.onChangeData;\n\n        if (onChangeData) {\n          onChangeData(this.state.data);\n        }\n      }\n    }\n  }, {\n    key: \"didUpdateConstantBlock\",\n    value: function didUpdateConstantBlock() {\n      var constantBlock = this.props.constantBlock;\n      var type = constantBlock && constantBlock.type;\n      var data = constantBlock && constantBlock.data;\n\n      if (data === null) {\n        switch (type) {\n          case BLOCK.NUMBERBLOCK:\n            data = 0;\n            break;\n\n          case BLOCK.STRINGBLOCK:\n            data = Localization.formatWithId(\"ID_OOBC_BLOCK_STRING_DEFAULT\");\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      this.setState({\n        type: type,\n        data: data\n      });\n    }\n  }, {\n    key: \"getInputsForBlockType\",\n    value: function getInputsForBlockType(type) {\n      var inputs;\n\n      switch (type) {\n        case BLOCK.NUMBERBLOCK:\n          inputs = this.getInputsForNumberBlock();\n          break;\n\n        case BLOCK.STRINGBLOCK:\n          inputs = this.getInputsForStringBlock();\n          break;\n\n        case BLOCK.POSITION:\n          inputs = this.getInputsForPositionBlock();\n          break;\n\n        default:\n          break;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_inputs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 12\n        }\n      }, inputs);\n    }\n  }, {\n    key: \"getInputsForNumberBlock\",\n    value: function getInputsForNumberBlock() {\n      var data = this.state.data;\n      return /*#__PURE__*/React.createElement(\"input\", {\n        id: \"oobceditor_constanteditor_input\",\n        className: \"oobceditor_constanteditor_input\",\n        value: data,\n        autoFocus: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 7\n        }\n      });\n    }\n  }, {\n    key: \"getInputsForStringBlock\",\n    value: function getInputsForStringBlock() {\n      var data = this.state.data;\n      return /*#__PURE__*/React.createElement(\"input\", {\n        id: \"oobceditor_constanteditor_input\",\n        className: \"oobceditor_constanteditor_input\",\n        value: data,\n        onFocus: this.onFocusInput,\n        onChange: this.onChangeInput,\n        autoFocus: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 7\n        }\n      });\n    }\n  }, {\n    key: \"getInputsForPositionBlock\",\n    value: function getInputsForPositionBlock() {\n      var _this$state2 = this.state,\n          data = _this$state2.data,\n          focusedInputId = _this$state2.focusedInputId;\n      var x = data.x,\n          y = data.y;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"oobceditor_constanteditor_input\",\n        className: \"oobceditor_constanteditor_input_wrapper\",\n        onClick: this.onClickInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_input_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }\n      }, \"x :\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"oobceditor_constanteditor_input\".concat(focusedInputId === \"oobceditor_constanteditor_input\" ? \"\" : \" oobceditor_constanteditor_input-blurred\"),\n        onClick: this.onClickInput,\n        value: x,\n        autoFocus: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"oobceditor_constanteditor_input2\",\n        className: \"oobceditor_constanteditor_input_wrapper\",\n        onClick: this.onClickInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_input_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, \"y :\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"oobceditor_constanteditor_input\".concat(focusedInputId === \"oobceditor_constanteditor_input2\" ? \"\" : \" oobceditor_constanteditor_input-blurred\"),\n        value: y,\n        autoFocus: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      })));\n    }\n  }, {\n    key: \"getKeypadForBlockType\",\n    value: function getKeypadForBlockType(type) {\n      var keypad;\n\n      switch (type) {\n        case BLOCK.NUMBERBLOCK:\n        case BLOCK.POSITION:\n          keypad = this.getNumpad();\n          break;\n\n        default:\n          break;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_keypad\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 12\n        }\n      }, keypad);\n    }\n  }, {\n    key: \"getNumpad\",\n    value: function getNumpad() {\n      var _this2 = this;\n\n      var numpads = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \".\", \"-\", \"delete\"];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_numpads\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 7\n        }\n      }, numpads.map(function (numpad) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: numpad,\n          className: \"oobceditor_constanteditor_numpad oobceditor_constanteditor_numpad-\".concat(numpad),\n          onClick: function onClick() {\n            _this2.onClickNumpad(numpad);\n          },\n          onTouchStart: function onTouchStart(e) {\n            e.currentTarget.classList.add(\"oobceditor_constanteditor_numpad-touched\");\n          },\n          onTouchEnd: function onTouchEnd(e) {\n            e.currentTarget.classList.remove(\"oobceditor_constanteditor_numpad-touched\");\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 11\n          }\n        }, numpad === \"delete\" ? /*#__PURE__*/React.createElement(\"img\", {\n          className: \"oobceditor_constanteditor_numpad_img\",\n          src: numpadDelete,\n          alt: numpad,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }\n        }) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"oobceditor_constanteditor_numpad_title\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }\n        }, numpad));\n      }));\n    }\n  }, {\n    key: \"getFocusedInputValue\",\n    value: function getFocusedInputValue() {\n      var _this$state3 = this.state,\n          type = _this$state3.type,\n          data = _this$state3.data,\n          focusedInputId = _this$state3.focusedInputId;\n      var value;\n\n      if (type === BLOCK.NUMBERBLOCK) {\n        value = data;\n      } else if (type === BLOCK.POSITION) {\n        var x = data.x,\n            y = data.y;\n\n        if (focusedInputId === \"oobceditor_constanteditor_input\") {\n          value = x;\n        } else {\n          value = y;\n        }\n      }\n\n      return \"\".concat(value);\n    }\n  }, {\n    key: \"updateFocusedInputValue\",\n    value: function updateFocusedInputValue(value) {\n      var _this$state4 = this.state,\n          type = _this$state4.type,\n          focusedInputId = _this$state4.focusedInputId;\n      var data;\n\n      if (type === BLOCK.NUMBERBLOCK) {\n        data = value;\n      } else if (type === BLOCK.POSITION) {\n        data = _objectSpread({}, this.state.data);\n\n        if (focusedInputId === \"oobceditor_constanteditor_input\") {\n          data.x = value;\n        } else {\n          data.y = value;\n        }\n      }\n\n      this.setState({\n        data: data\n      });\n    }\n  }, {\n    key: \"getButtonForId\",\n    value: function getButtonForId(id) {\n      var formatMessageId = \"ID_OOBC_GENERAL_\".concat(id.toUpperCase());\n      var buttonTitle = Localization.formatWithId(formatMessageId);\n      var onClick = {\n        clear: this.onClickClear,\n        cancel: this.onClickCancel,\n        confirm: this.onClickConfirm\n      }[id];\n      return /*#__PURE__*/React.createElement(\"button\", {\n        id: \"oobceditor_constanteditor_button-\".concat(id),\n        className: \"oobceditor_constanteditor_button oobceditor_constanteditor_button-\".concat(id),\n        onClick: onClick,\n        onTouchStart: function onTouchStart(e) {\n          e.currentTarget.classList.add(\"oobceditor_constanteditor_button-touched\");\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          e.currentTarget.classList.remove(\"oobceditor_constanteditor_button-touched\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 7\n        }\n      }, buttonTitle);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var type = this.state.type;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 7\n        }\n      }, this.getInputsForBlockType(type), this.getKeypadForBlockType(type), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_buttons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 9\n        }\n      }, this.getButtonForId(\"clear\"), this.getButtonForId(\"cancel\"), this.getButtonForId(\"confirm\")));\n    }\n  }]);\n\n  return ConstantEditor;\n}(Component);\n\nvar KeyConstantEditor = /*#__PURE__*/function (_Component2) {\n  _inherits(KeyConstantEditor, _Component2);\n\n  var _super2 = _createSuper(KeyConstantEditor);\n\n  function KeyConstantEditor() {\n    var _this3;\n\n    _classCallCheck(this, KeyConstantEditor);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this3 = _super2.call.apply(_super2, [this].concat(args));\n\n    _this3.onKeyDown = function (e) {\n      if (_this3.keysPrevented.includes(e.key)) {\n        return;\n      }\n\n      e.preventDefault();\n\n      _this3.props.onClickConfirm(_this3.props.block, _this3.convertKey(e.key));\n    };\n\n    return _this3;\n  }\n\n  _createClass(KeyConstantEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"keydown\", this.onKeyDown);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"keydown\", this.onKeyDown);\n    }\n  }, {\n    key: \"keysPrevented\",\n    get: function get() {\n      return [\"Meta\", \"HangulMode\", \"HanjaMode\"];\n    }\n  }, {\n    key: \"convertKey\",\n    value: function convertKey(key) {\n      switch (key) {\n        case \"ArrowUp\":\n          return \"up\";\n\n        case \"ArrowDown\":\n          return \"down\";\n\n        case \"ArrowLeft\":\n          return \"left\";\n\n        case \"ArrowRight\":\n          return \"right\";\n\n        case \"Escape\":\n          return \"esc\";\n\n        case \" \":\n          return \"space\";\n\n        default:\n          return key.toLowerCase();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor oobceditor_constanteditor--key\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"oobceditor_constanteditor_keymessage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 9\n        }\n      }, Localization.formatWithId(\"ID_OOBC_CONSTANTEDITOR_KEY_MESSAGE\")));\n    }\n  }]);\n\n  return KeyConstantEditor;\n}(Component);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/ConstantEditor/index.js"],"names":["React","Component","Localization","BLOCK","numpadDelete","props","constantBlock","onClickOverlay","onClickConfirm","onClickCancel","onChangeData","type","KEY","ConstantEditor","onFocusInput","e","currentTarget","select","onChangeInput","state","newValue","value","NUMBERBLOCK","POSITION","STRINGBLOCK","setState","data","onClickInput","inputId","id","focusedInputId","onKeyDown","key","onNumberKeyDown","onClickNumpad","numpad","getFocusedInputValue","indexOf","slice","length","parseFloat","updateFocusedInputValue","onClickClear","x","y","undefined","didUpdateConstantBlock","window","addEventListener","removeEventListener","prevProps","prevState","formatWithId","inputs","getInputsForNumberBlock","getInputsForStringBlock","getInputsForPositionBlock","keypad","getNumpad","numpads","map","classList","add","remove","formatMessageId","toUpperCase","buttonTitle","onClick","clear","cancel","confirm","getInputsForBlockType","getKeypadForBlockType","getButtonForId","KeyConstantEditor","keysPrevented","includes","preventDefault","block","convertKey","toLowerCase"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Localization from \"../../Localization\";\nimport { BLOCK } from \"../../OOBC/type\";\nimport \"./index.scss\";\n\nimport numpadDelete from \"../../Image/numpad-delete.png\";\n\nexport default function (props) {\n  const {\n    constantBlock,\n    onClickOverlay,\n    onClickConfirm,\n    onClickCancel,\n    onChangeData\n  } = props;\n  return (\n    <div\n      id=\"oobceditor_constanteditor_container\"\n      className={`oobceditor_constanteditor_container${\n        constantBlock ? \" oobceditor_constanteditor_container-visible\" : \"\"\n      }`}\n    >\n      <div\n        id=\"oobceditor_constanteditor_overlay\"\n        className=\"oobceditor_constanteditor_overlay\"\n        onClick={onClickOverlay}\n      />\n      {constantBlock && constantBlock.type === BLOCK.KEY ? (\n        <KeyConstantEditor\n          block={constantBlock}\n          onClickConfirm={onClickConfirm}\n        />\n      ) : (\n        <ConstantEditor\n          constantBlock={constantBlock}\n          onClickConfirm={onClickConfirm}\n          onClickCancel={onClickCancel}\n          onChangeData={onChangeData}\n        />\n      )}\n    </div>\n  );\n}\n\nclass ConstantEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: undefined,\n      data: undefined,\n      focusedInputId: \"oobceditor_constanteditor_input\"\n    };\n  }\n  componentDidMount() {\n    this.didUpdateConstantBlock();\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.constantBlock !== this.props.constantBlock) {\n      this.didUpdateConstantBlock();\n    }\n    if (prevState.data !== this.state.data) {\n      const { onChangeData } = this.props;\n      if (onChangeData) {\n        onChangeData(this.state.data);\n      }\n    }\n  }\n  didUpdateConstantBlock() {\n    const { constantBlock } = this.props;\n    const type = constantBlock && constantBlock.type;\n    let data = constantBlock && constantBlock.data;\n    if (data === null) {\n      switch (type) {\n        case BLOCK.NUMBERBLOCK:\n          data = 0;\n          break;\n        case BLOCK.STRINGBLOCK:\n          data = Localization.formatWithId(\"ID_OOBC_BLOCK_STRING_DEFAULT\");\n          break;\n        default:\n          break;\n      }\n    }\n    this.setState({ type, data });\n  }\n\n  getInputsForBlockType(type) {\n    let inputs;\n    switch (type) {\n      case BLOCK.NUMBERBLOCK:\n        inputs = this.getInputsForNumberBlock();\n        break;\n      case BLOCK.STRINGBLOCK:\n        inputs = this.getInputsForStringBlock();\n        break;\n      case BLOCK.POSITION:\n        inputs = this.getInputsForPositionBlock();\n        break;\n      default:\n        break;\n    }\n    return <div className=\"oobceditor_constanteditor_inputs\">{inputs}</div>;\n  }\n  getInputsForNumberBlock() {\n    const { data } = this.state;\n    return (\n      <input\n        id=\"oobceditor_constanteditor_input\"\n        className=\"oobceditor_constanteditor_input\"\n        value={data}\n        autoFocus\n        disabled\n      />\n    );\n  }\n  getInputsForStringBlock() {\n    const { data } = this.state;\n    return (\n      <input\n        id=\"oobceditor_constanteditor_input\"\n        className=\"oobceditor_constanteditor_input\"\n        value={data}\n        onFocus={this.onFocusInput}\n        onChange={this.onChangeInput}\n        autoFocus\n      />\n    );\n  }\n  getInputsForPositionBlock() {\n    const { data, focusedInputId } = this.state;\n    const { x, y } = data;\n    return (\n      <>\n        <div\n          id=\"oobceditor_constanteditor_input\"\n          className=\"oobceditor_constanteditor_input_wrapper\"\n          onClick={this.onClickInput}\n        >\n          <div className=\"oobceditor_constanteditor_input_title\">x :</div>\n          <input\n            className={`oobceditor_constanteditor_input${\n              focusedInputId === \"oobceditor_constanteditor_input\"\n                ? \"\"\n                : \" oobceditor_constanteditor_input-blurred\"\n            }`}\n            onClick={this.onClickInput}\n            value={x}\n            autoFocus\n            disabled\n          />\n        </div>\n        <div\n          id=\"oobceditor_constanteditor_input2\"\n          className=\"oobceditor_constanteditor_input_wrapper\"\n          onClick={this.onClickInput}\n        >\n          <div className=\"oobceditor_constanteditor_input_title\">y :</div>\n          <input\n            className={`oobceditor_constanteditor_input${\n              focusedInputId === \"oobceditor_constanteditor_input2\"\n                ? \"\"\n                : \" oobceditor_constanteditor_input-blurred\"\n            }`}\n            value={y}\n            autoFocus\n            disabled\n          />\n        </div>\n      </>\n    );\n  }\n\n  onFocusInput = e => {\n    e.currentTarget.select();\n  };\n  onChangeInput = e => {\n    const { type } = this.state;\n    const newValue = e.currentTarget.value;\n    switch (type) {\n      case BLOCK.NUMBERBLOCK:\n      case BLOCK.POSITION:\n        break;\n      case BLOCK.STRINGBLOCK:\n        this.setState({ data: newValue });\n        break;\n      default:\n        break;\n    }\n  };\n  onClickInput = e => {\n    const inputId = e.currentTarget.id;\n    this.setState({ focusedInputId: inputId });\n  };\n\n  onKeyDown = e => {\n    if(e.key === \"Enter\") {\n      this.onClickConfirm();\n    } else {\n      switch (this.state.type) {\n        case BLOCK.NUMBERBLOCK:\n        case BLOCK.POSITION:\n          this.onNumberKeyDown(e);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  onNumberKeyDown = e => {\n    switch(e.key) {\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n      case \"5\":\n      case \"6\":\n      case \"7\":\n      case \"8\":\n      case \"9\":\n      case \"0\":\n      case \"-\":\n      case \".\":\n        this.onClickNumpad(e.key);\n        break;\n      case \"Delete\":\n      case \"Backspace\":\n        this.onClickNumpad(\"delete\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  getKeypadForBlockType(type) {\n    let keypad;\n    switch (type) {\n      case BLOCK.NUMBERBLOCK:\n      case BLOCK.POSITION:\n        keypad = this.getNumpad();\n        break;\n      default:\n        break;\n    }\n    return <div className=\"oobceditor_constanteditor_keypad\">{keypad}</div>;\n  }\n  getNumpad() {\n    const numpads = [\n      \"1\",\n      \"2\",\n      \"3\",\n      \"4\",\n      \"5\",\n      \"6\",\n      \"7\",\n      \"8\",\n      \"9\",\n      \"0\",\n      \".\",\n      \"-\",\n      \"delete\"\n    ];\n    return (\n      <div className=\"oobceditor_constanteditor_numpads\">\n        {numpads.map(numpad => (\n          <div\n            key={numpad}\n            className={`oobceditor_constanteditor_numpad oobceditor_constanteditor_numpad-${numpad}`}\n            onClick={() => {\n              this.onClickNumpad(numpad);\n            }}\n            onTouchStart={e => {\n              e.currentTarget.classList.add(\n                \"oobceditor_constanteditor_numpad-touched\"\n              );\n            }}\n            onTouchEnd={e => {\n              e.currentTarget.classList.remove(\n                \"oobceditor_constanteditor_numpad-touched\"\n              );\n            }}\n          >\n            {numpad === \"delete\" ? (\n              <img\n                className=\"oobceditor_constanteditor_numpad_img\"\n                src={numpadDelete}\n                alt={numpad}\n              />\n            ) : (\n              <div className=\"oobceditor_constanteditor_numpad_title\">\n                {numpad}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  }\n  onClickNumpad = numpad => {\n    let value = this.getFocusedInputValue();\n    switch (numpad) {\n      case \".\":\n        if (value === \"\") {\n          value = \"0.\";\n        } else if (value === \"-\") {\n          value = \"-0.\";\n        } else if (value.indexOf(numpad) < 0) {\n          value = value + numpad;\n        }\n        break;\n      case \"-\":\n        if (value.indexOf(numpad) < 0) {\n          value = numpad + value;\n        } else {\n          value = value.slice(1, value.length);\n        }\n        break;\n      case \"delete\":\n        if (value === \"0.\") {\n          value = \"\";\n        } else {\n          value = value.slice(0, value.length - 1);\n        }\n        break;\n      case \"0\":\n        if (value !== \"0\" && value !== \"-0\") {\n          value = value + numpad;\n        }\n        break;\n      default:\n        if (value === \"0\") {\n          value = numpad;\n        } else if (value === \"-0\") {\n          value = -numpad;\n        } else {\n          value = value + numpad;\n        }\n        break;\n    }\n    if (parseFloat(value) >= 10000) value = \"9999\";\n    this.updateFocusedInputValue(value);\n  };\n  getFocusedInputValue() {\n    const { type, data, focusedInputId } = this.state;\n    let value;\n    if (type === BLOCK.NUMBERBLOCK) {\n      value = data;\n    } else if (type === BLOCK.POSITION) {\n      const { x, y } = data;\n      if (focusedInputId === \"oobceditor_constanteditor_input\") {\n        value = x;\n      } else {\n        value = y;\n      }\n    }\n    return `${value}`;\n  }\n  updateFocusedInputValue(value) {\n    const { type, focusedInputId } = this.state;\n    let data;\n    if (type === BLOCK.NUMBERBLOCK) {\n      data = value;\n    } else if (type === BLOCK.POSITION) {\n      data = { ...this.state.data };\n      if (focusedInputId === \"oobceditor_constanteditor_input\") {\n        data.x = value;\n      } else {\n        data.y = value;\n      }\n    }\n    this.setState({ data });\n  }\n\n  getButtonForId(id) {\n    const formatMessageId = `ID_OOBC_GENERAL_${id.toUpperCase()}`;\n    const buttonTitle = Localization.formatWithId(formatMessageId);\n    const onClick = {\n      clear: this.onClickClear,\n      cancel: this.onClickCancel,\n      confirm: this.onClickConfirm\n    }[id];\n    return (\n      <button\n        id={`oobceditor_constanteditor_button-${id}`}\n        className={`oobceditor_constanteditor_button oobceditor_constanteditor_button-${id}`}\n        onClick={onClick}\n        onTouchStart={e => {\n          e.currentTarget.classList.add(\n            \"oobceditor_constanteditor_button-touched\"\n          );\n        }}\n        onTouchEnd={e => {\n          e.currentTarget.classList.remove(\n            \"oobceditor_constanteditor_button-touched\"\n          );\n        }}\n      >\n        {buttonTitle}\n      </button>\n    );\n  }\n  onClickClear = () => {\n    const { type, focusedInputId } = this.state;\n    switch (type) {\n      case BLOCK.NUMBERBLOCK:\n      case BLOCK.STRINGBLOCK:\n        this.setState({ data: \"\" });\n        break;\n      case BLOCK.POSITION:\n        const data = { ...this.state.data };\n        if (focusedInputId === \"oobceditor_constanteditor_input\") {\n          data.x = \"\";\n        } else {\n          data.y = \"\";\n        }\n        this.setState({ data });\n        break;\n      default:\n        break;\n    }\n  };\n  onClickCancel = () => {\n    const { constantBlock, onClickCancel } = this.props;\n    if (onClickCancel) {\n      onClickCancel(constantBlock);\n    }\n  };\n  onClickConfirm = () => {\n    const { constantBlock, onClickConfirm } = this.props;\n    const { type } = this.state;\n    let data = this.state.data;\n    if (type === BLOCK.NUMBERBLOCK) {\n      data = parseFloat(data) || 0;\n    } else if (type === BLOCK.POSITION) {\n      data = {\n        x: parseFloat(data.x) || 0,\n        y: parseFloat(data.y) || 0\n      };\n    }\n    if (onClickConfirm) {\n      onClickConfirm(constantBlock, data);\n    }\n  };\n\n  render() {\n    const { type } = this.state;\n    return (\n      <div className=\"oobceditor_constanteditor\">\n        {this.getInputsForBlockType(type)}\n        {this.getKeypadForBlockType(type)}\n        <div className=\"oobceditor_constanteditor_buttons\">\n          {this.getButtonForId(\"clear\")}\n          {this.getButtonForId(\"cancel\")}\n          {this.getButtonForId(\"confirm\")}\n        </div>\n      </div>\n    );\n  }\n}\n\nclass KeyConstantEditor extends Component {\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown = e => {\n    if(this.keysPrevented.includes(e.key)) {\n      return;\n    }\n    \n    e.preventDefault();\n    this.props.onClickConfirm(this.props.block, this.convertKey(e.key));\n  }\n  get keysPrevented() {\n    return [\n      \"Meta\",\n      \"HangulMode\",\n      \"HanjaMode\"\n    ]\n  }\n  convertKey(key) {\n    switch(key) {\n      case \"ArrowUp\":\n        return \"up\";\n      case \"ArrowDown\":\n        return \"down\";\n      case \"ArrowLeft\":\n        return \"left\";\n      case \"ArrowRight\":\n        return \"right\";\n      case \"Escape\":\n        return \"esc\";\n      case \" \":\n        return \"space\";\n      default:\n        return key.toLowerCase();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"oobceditor_constanteditor oobceditor_constanteditor--key\">\n        <div className=\"oobceditor_constanteditor_keymessage\">\n          {Localization.formatWithId(\"ID_OOBC_CONSTANTEDITOR_KEY_MESSAGE\")}\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}