{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/GatherEvent/Container.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport QueryString from \"query-string\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../../Common/Component/PopUp\";\nimport SignIn from \"../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n    _this.getBrick =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request.addRebrickBlock({\n                block: _this.state.findBrickName\n              }).then(function (res) {\n                return res.json();\n              }).then(function (result) {\n                var status = result.status,\n                    user = result.user;\n\n                if (status === \"finish\") {\n                  _this.setState({\n                    isFinished: true\n                  });\n                }\n\n                _this.setState({\n                  firstLineBricks: [{\n                    name: \"r1\",\n                    get: user.r1\n                  }, {\n                    name: \"e\",\n                    get: user.e\n                  }, {\n                    name: \"d\",\n                    get: user.d\n                  }],\n                  secondLineBricks: [{\n                    name: \"b\",\n                    get: user.b\n                  }, {\n                    name: \"r2\",\n                    get: user.r2\n                  }, {\n                    name: \"i\",\n                    get: user.i\n                  }, {\n                    name: \"c\",\n                    get: user.c\n                  }, {\n                    name: \"k\",\n                    get: user.k\n                  }]\n                });\n              }).catch(function (error) {\n                return console.error(error);\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.checkLogin = function () {\n      if (!_this.props.userinfo.email) {\n        showPopUp(React.createElement(PopUp.OneButton, {\n          title: \"\\uC774\\uBCA4\\uD2B8 \\uCC38\\uC5EC\\uB97C \\uC704\\uD574 \\uC704\\uC988\\uB7A9 \\uB85C\\uADF8\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\",\n          buttonName: \"\\uD655\\uC778\",\n          buttonAction: function buttonAction() {\n            showPopUp(React.createElement(SignIn, {\n              history: _this.props.history,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 92\n              },\n              __self: this\n            }), {\n              darkmode: true,\n              mobileFullscreen: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }), {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        });\n      }\n\n      _this.getBrick();\n    };\n\n    var _QueryString$parse = QueryString.parse(_this.props.location.search),\n        brick = _QueryString$parse.brick;\n\n    _this.state = {\n      isFinished: false,\n      firstLineBricks: [{\n        name: \"r1\",\n        get: false\n      }, {\n        name: \"e\",\n        get: false\n      }, {\n        name: \"d\",\n        get: false\n      }],\n      secondLineBricks: [{\n        name: \"b\",\n        get: false\n      }, {\n        name: \"r2\",\n        get: false\n      }, {\n        name: \"i\",\n        get: false\n      }, {\n        name: \"c\",\n        get: false\n      }, {\n        name: \"k\",\n        get: false\n      }],\n      findBrickName: brick\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.checkLogin();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.userinfo.email !== this.props.userinfo.email) {\n        if (!this.props.userinfo.email) {\n          this.setState({\n            firstLineBricks: [{\n              name: \"r1\",\n              get: false\n            }, {\n              name: \"e\",\n              get: false\n            }, {\n              name: \"d\",\n              get: false\n            }],\n            secondLineBricks: [{\n              name: \"b\",\n              get: false\n            }, {\n              name: \"r2\",\n              get: false\n            }, {\n              name: \"i\",\n              get: false\n            }, {\n              name: \"c\",\n              get: false\n            }, {\n              name: \"k\",\n              get: false\n            }]\n          });\n        }\n\n        this.checkLogin();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isFinished = _this$state.isFinished,\n          firstLineBricks = _this$state.firstLineBricks,\n          secondLineBricks = _this$state.secondLineBricks,\n          findBrickName = _this$state.findBrickName;\n      return React.createElement(View, {\n        isFinished: isFinished,\n        firstLineBricks: firstLineBricks,\n        secondLineBricks: secondLineBricks,\n        findBrickName: findBrickName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(withRouter(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/GatherEvent/Container.js"],"names":["React","Component","connect","withRouter","QueryString","request","PopUp","showPopUp","SignIn","View","Container","props","getBrick","addRebrickBlock","block","state","findBrickName","then","res","json","result","status","user","setState","isFinished","firstLineBricks","name","get","r1","e","d","secondLineBricks","b","r2","i","c","k","catch","error","console","checkLogin","userinfo","email","history","darkmode","mobileFullscreen","dismissButton","dismissOverlay","parse","location","search","brick","prevProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport QueryString from \"query-string\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../../Common/Component/PopUp\";\nimport SignIn from \"../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    const { brick } = QueryString.parse(this.props.location.search);\n    this.state = {\n      isFinished: false,\n      firstLineBricks: [\n        { name: \"r1\", get: false },\n        { name: \"e\", get: false },\n        { name: \"d\", get: false },\n      ],\n      secondLineBricks: [\n        { name: \"b\", get: false },\n        { name: \"r2\", get: false },\n        { name: \"i\", get: false },\n        { name: \"c\", get: false },\n        { name: \"k\", get: false },\n      ],\n      findBrickName: brick\n    }\n  }\n\n  componentDidMount() {\n    this.checkLogin();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userinfo.email !== this.props.userinfo.email) {\n      if ( !this.props.userinfo.email ) {\n        this.setState({\n          firstLineBricks : [\n            { name: \"r1\", get: false },\n            { name: \"e\", get: false },\n            { name: \"d\", get: false }\n          ],\n          secondLineBricks: [\n            { name: \"b\", get: false },\n            { name: \"r2\", get: false },\n            { name: \"i\", get: false },\n            { name: \"c\", get: false },\n            { name: \"k\", get: false }\n          ]\n        })\n      }\n      this.checkLogin();\n    }\n  }\n\n  getBrick = async() => {\n    await request.addRebrickBlock({block: this.state.findBrickName})\n      .then(res => res.json())\n      .then(result => {\n        const { status, user } = result;\n        if (status === \"finish\") {\n          this.setState({ isFinished : true })\n        }\n        this.setState({\n          firstLineBricks : [\n            { name: \"r1\", get: user.r1 },\n            { name: \"e\", get: user.e },\n            { name: \"d\", get: user.d }\n          ],\n          secondLineBricks: [\n            { name: \"b\", get: user.b },\n            { name: \"r2\", get: user.r2 },\n            { name: \"i\", get: user.i },\n            { name: \"c\", get: user.c },\n            { name: \"k\", get: user.k }\n          ]\n        })\n      })\n      .catch(error => console.error(error))\n  }\n\n  checkLogin = () => {\n    if (!this.props.userinfo.email) {\n      showPopUp(\n        <PopUp.OneButton\n          title=\"이벤트 참여를 위해 위즈랩 로그인이 필요합니다.\"\n          buttonName=\"확인\"\n          buttonAction= {() => {\n            showPopUp( \n              <SignIn history={this.props.history} />, \n              { darkmode: true, mobileFullscreen: true }\n            )}}\n        />,\n        {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        }\n      );\n    } \n    this.getBrick();\n  }\n\n  render() {\n    const { isFinished, firstLineBricks, secondLineBricks, findBrickName } = this.state;\n    return (\n      <View \n        isFinished={isFinished}\n        firstLineBricks={firstLineBricks}\n        secondLineBricks={secondLineBricks}\n        findBrickName={findBrickName}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {}\n)(withRouter(Container));\n"]},"metadata":{},"sourceType":"module"}