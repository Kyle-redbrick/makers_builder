{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/DreamBuilder/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\";\nimport { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport * as projectActions from \"../../Store/Reducer/project\";\nimport * as previewActions from \"../../Store/Reducer/preview\";\nimport * as dreamActions from \"../../Store/Reducer/dream\";\nimport AssetLibrary from \"../../utils/assetLibrary\";\nimport MissionClearPopUp from \"./PopUp/MissionClear\";\nimport ProjectClearPopUp from \"./PopUp/ProjectClear\";\nimport View from \"./View\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.linkToDeveloping = function (developing) {\n      _this.props.history.replace(\"/builder/\".concat(developing.pId));\n\n      _this.props.history.go(0);\n    };\n\n    _this.forceSlideRerender = function () {\n      _this.setState({\n        shouldSlideRerender: true\n      }, function () {\n        _this.setState({\n          shouldSlideRerender: false\n        });\n      });\n    };\n\n    _this.didShowTutorialPopup = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var title, didShowTutorialPopup;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // temp : astro boy 동영상을 보여주기 위한 임시조치\n              title = _this.props.project && _this.props.project.localized[0] && _this.props.project.localized[0].title;\n\n              if (!(title === \"Catch the Super Magnet\")) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _this.setState({\n                isAstroBoyProject: true\n              }));\n\n            case 3:\n              didShowTutorialPopup = localStorage.getItem(\"didShowTutorial_\".concat(_this.props.editorMode));\n              if (didShowTutorialPopup) _this.setState({\n                isTutorialShow: false\n              });else _this.setState({\n                isTutorialShow: true\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.hiddenTutorial = function () {\n      _this.setState({\n        isTutorialShow: false\n      });\n    };\n\n    _this.hiddenAstroBoyPopup = function () {\n      _this.setState({\n        isAstroBoyProject: false\n      });\n    };\n\n    _this.state = {\n      shouldSlideRerender: false,\n      isTutorialShow: false,\n      isAstroBoyProject: false\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.load();\n    }\n  }, {\n    key: \"load\",\n    value: function load() {\n      var _this2 = this;\n\n      var myDreamLectureProjectId = this.props.match.params.id;\n      request.getMyDreamProject(myDreamLectureProjectId).then(function (res) {\n        return res.json();\n      }).then(function (myDreamProject) {\n        if (!myDreamProject) {\n          window.alert(\"no myDreamProject\");\n          return;\n        } // temp: 테스트 계정의 프로젝트는 유저 인증 생략하기\n\n\n        if (myDreamProject.email !== \"test@wizschool.io\" && myDreamProject.email !== _this2.props.email) {\n          window.alert(\"invalid user\");\n          return;\n        } // if(myDreamProject.email !== this.props.email) {\n        //   window.alert(\"invalid user\");\n        //   return;\n        // }\n\n\n        try {\n          myDreamProject.project.template = JSON.parse(myDreamProject.project.localized[0].template);\n        } catch (err) {\n          window.alert(\"wrong template\");\n          return;\n        }\n\n        _this2.props.setMyDreamProject(myDreamProject);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.myProject) {\n        if (!prevProps.myProject || prevProps.myProject.id !== this.props.myProject.id) {\n          this.didSetMyProject();\n        }\n      }\n\n      if (prevProps.currentMission !== this.props.currentMission) {\n        this.didSetCurrentMission();\n      }\n\n      if (prevProps.isConditionsClear !== this.props.isConditionsClear) {\n        if (this.props.currentMission && this.props.isConditionsClear) {\n          this.didClearConditions();\n        }\n      }\n\n      if (prevProps.editorMode !== this.props.editorMode) {\n        this.didShowTutorialPopup();\n      }\n    }\n  }, {\n    key: \"didSetMyProject\",\n    value: function didSetMyProject() {\n      var myProject = this.props.myProject;\n      var missions = (myProject.project.template.missions || []).map(function (mission, index) {\n        return _objectSpread({}, mission, {\n          isCompleted: index < myProject.completedMissionNum\n        });\n      });\n      var currentMissionIndex = this.props.isReplaying ? 0 : myProject.completedMissionNum;\n\n      if (currentMissionIndex > missions.length - 1) {\n        currentMissionIndex = missions.length - 1;\n      }\n\n      this.props.setDreamMissions(missions);\n      this.props.setCurrentDreamMissionIndex(currentMissionIndex);\n      this.save();\n    }\n  }, {\n    key: \"didSetCurrentMission\",\n    value: function didSetCurrentMission() {\n      var _this3 = this;\n\n      if (!this.props.currentMission) return;\n\n      if (this.missionSetTimer) {\n        clearTimeout(this.missionSetTimer);\n      } // TODO: Refer to the following issue.\n      // Issue Link: https://www.notion.so/wizschool/b77303a59acc4be7886ec81875607bf6\n\n\n      this.missionSetTimer = setTimeout(function () {\n        try {\n          var state = JSON.parse(_this3.props.currentMission.state);\n          AssetLibrary.loadAssetsFromScene(state.scene, function () {\n            _this3.props.setProject({\n              state: state\n            });\n\n            _this3.forceSlideRerender();\n          });\n        } catch (err) {\n          window.alert(\"wrong mission state\");\n        }\n      }, 200);\n    }\n  }, {\n    key: \"didClearConditions\",\n    value: function didClearConditions() {\n      if (!this.props.currentMission.isCompleted || this.props.isReplaying) {\n        this.props.completeCurrentDreamMission();\n\n        if (this.props.currentMissionIndex < this.props.missions.length - 1) {\n          this.didClearMission();\n        } else {\n          this.didClearProject();\n        }\n      }\n    }\n  }, {\n    key: \"didClearMission\",\n    value: function didClearMission() {\n      this.saveMissionClear();\n      this.alertMissionClear();\n    }\n  }, {\n    key: \"didClearProject\",\n    value: function didClearProject() {\n      this.saveProjectClear();\n      this.alertProjectClear();\n    }\n  }, {\n    key: \"saveMissionClear\",\n    value: function saveMissionClear() {\n      if (this.props.isReplaying) {\n        return;\n      }\n\n      this.save({\n        completedMissionNum: this.props.currentMissionIndex + 1\n      });\n    }\n  }, {\n    key: \"saveProjectClear\",\n    value: function saveProjectClear() {\n      if (this.props.isReplaying) {\n        return;\n      }\n\n      this.save({\n        completedMissionNum: this.props.missions.length,\n        completed: true\n      });\n    }\n  }, {\n    key: \"save\",\n    value: function save(values) {\n      var _this4 = this;\n\n      var myDreamLectureProjectId = this.props.match.params.id;\n      request.saveMyDreamProject(myDreamLectureProjectId, values).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.success) {\n          console.log(_this4.props.intl.formatMessage({\n            id: \"ID_DREAMBUILDER_SAVE_LECTURE\"\n          }));\n        } else {\n          console.warn(\"\".concat(_this4.props.intl.formatMessage({\n            id: \"ID_DREAMBUILDER_SAVE_LECTURE_ERROR\"\n          }), \"(\").concat(json.reason, \")\"));\n        }\n      });\n    }\n  }, {\n    key: \"alertMissionClear\",\n    value: function alertMissionClear() {\n      var _this5 = this;\n\n      if (!this.props.currentMission.conditions || this.props.currentMission.conditions.length < 1) return;\n      setTimeout(function () {\n        showPopUp(React.createElement(MissionClearPopUp, {\n          onClickConfirm: function onClickConfirm() {\n            _this5.props.setIsPlaying(false);\n\n            _this5.props.setCurrentDreamMissionIndex(_this5.props.currentMissionIndex + 1);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }), {\n          dismissButton: false\n        });\n      }, 2000);\n    }\n  }, {\n    key: \"alertProjectClear\",\n    value: function alertProjectClear() {\n      var _this6 = this;\n\n      setTimeout(function () {\n        showPopUp(React.createElement(ProjectClearPopUp, {\n          onClickCancel: function onClickCancel() {\n            if (_this6.props.isReplaying) {\n              window.close();\n            } else {\n              _this6.createDeveloping(window.close);\n            }\n          },\n          onClickConfirm: function onClickConfirm() {\n            if (_this6.props.isReplaying) {\n              if (_this6.props.myProject.developing.isDeleted) {\n                _this6.createDeveloping(_this6.linkToDeveloping);\n              } else {\n                _this6.linkToDeveloping(_this6.props.myProject.developing);\n              }\n            } else {\n              _this6.createDeveloping(_this6.linkToDeveloping);\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), {\n          dismissButton: false\n        });\n      }, 1000);\n    }\n  }, {\n    key: \"createDeveloping\",\n    value: function createDeveloping(callback) {\n      var _this$props$myProject = this.props.myProject,\n          id = _this$props$myProject.id,\n          project = _this$props$myProject.project;\n      var params = {\n        pId: generatePID(this.props.email),\n        email: this.props.email,\n        name: project.title,\n        type: {\n          javascript: \"js\",\n          oobc: \"wizlabOOBC\"\n        }[project.lecture.course.type],\n        icon: project.localized && project.localized[0].thumbnailURL.toDreamclassS3URL() || \"\",\n        useCustomIcon: true,\n        state: JSON.stringify(this.getManipulatedProjectState()),\n        myDreamProjectId: id\n      };\n      request.postDevelopingProject(params).then(function (res) {\n        return res.json();\n      }).then(function (developing) {\n        if (callback) {\n          callback(developing);\n        }\n      });\n    }\n  }, {\n    key: \"getManipulatedProjectState\",\n    value: function getManipulatedProjectState() {\n      var state = JSON.parse(JSON.stringify(this.props.projectState));\n      state.preview.isPlaying = false;\n\n      for (var sceneId in state.scene.scenes) {\n        var scene = state.scene.scenes[sceneId];\n        scene.isHiddenLockSprites = false;\n\n        for (var spriteId in scene.sprites) {\n          var sprite = scene.sprites[spriteId];\n          sprite.locked = false;\n        }\n      }\n\n      return state;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, Object.assign({}, this.props, {\n        shouldSlideRerender: this.state.shouldSlideRerender,\n        isTutorialShow: this.state.isTutorialShow,\n        isAstroBoyProject: this.state.isAstroBoyProject,\n        hiddenTutorial: this.hiddenTutorial,\n        hiddenAstroBoyPopup: this.hiddenAstroBoyPopup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    project: state.dream.myProject && state.dream.myProject.project,\n    editorMode: state.scene.editorMode,\n    email: state.userinfo.email,\n    myProject: state.dream.myProject,\n    isReplaying: state.dream.isReplaying,\n    missions: state.dream.missions,\n    currentMission: state.dream.currentMission,\n    currentMissionIndex: state.dream.currentMissionIndex,\n    isConditionsClear: state.dream.isConditionsClear,\n    isCodeConditionsClear: state.dream.isCodeConditionsClear,\n    projectState: {\n      scene: state.scene,\n      interaction: state.interaction,\n      preview: state.preview\n    }\n  };\n}, {\n  setProject: projectActions.setProject,\n  setIsPlaying: previewActions.setIsPlaying,\n  setMyDreamProject: dreamActions.setMyDreamProject,\n  setDreamMissions: dreamActions.setDreamMissions,\n  setCurrentDreamMissionIndex: dreamActions.setCurrentDreamMissionIndex,\n  completeCurrentDreamMission: dreamActions.completeCurrentDreamMission\n})(withRouter(injectIntl(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/DreamBuilder/Container.js"],"names":["React","Component","withRouter","connect","injectIntl","generatePID","showPopUp","request","projectActions","previewActions","dreamActions","AssetLibrary","MissionClearPopUp","ProjectClearPopUp","View","Container","props","linkToDeveloping","developing","history","replace","pId","go","forceSlideRerender","setState","shouldSlideRerender","didShowTutorialPopup","title","project","localized","isAstroBoyProject","localStorage","getItem","editorMode","isTutorialShow","hiddenTutorial","hiddenAstroBoyPopup","state","load","myDreamLectureProjectId","match","params","id","getMyDreamProject","then","res","json","myDreamProject","window","alert","email","template","JSON","parse","err","setMyDreamProject","prevProps","prevState","myProject","didSetMyProject","currentMission","didSetCurrentMission","isConditionsClear","didClearConditions","missions","map","mission","index","isCompleted","completedMissionNum","currentMissionIndex","isReplaying","length","setDreamMissions","setCurrentDreamMissionIndex","save","missionSetTimer","clearTimeout","setTimeout","loadAssetsFromScene","scene","setProject","completeCurrentDreamMission","didClearMission","didClearProject","saveMissionClear","alertMissionClear","saveProjectClear","alertProjectClear","completed","values","saveMyDreamProject","success","console","log","intl","formatMessage","warn","reason","conditions","setIsPlaying","dismissButton","close","createDeveloping","isDeleted","callback","name","type","javascript","oobc","lecture","course","icon","thumbnailURL","toDreamclassS3URL","useCustomIcon","stringify","getManipulatedProjectState","myDreamProjectId","postDevelopingProject","projectState","preview","isPlaying","sceneId","scenes","isHiddenLockSprites","spriteId","sprites","sprite","locked","dream","userinfo","isCodeConditionsClear","interaction"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\"\nimport { showPopUp } from \"../../../../Common/Component/PopUp\"\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport * as projectActions from \"../../Store/Reducer/project\";\nimport * as previewActions from \"../../Store/Reducer/preview\";\nimport * as dreamActions from \"../../Store/Reducer/dream\"\nimport AssetLibrary from \"../../utils/assetLibrary\";\nimport MissionClearPopUp from \"./PopUp/MissionClear\";\nimport ProjectClearPopUp from \"./PopUp/ProjectClear\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      shouldSlideRerender: false, \n      isTutorialShow: false,\n      isAstroBoyProject: false\n    };\n  }\n  componentDidMount() {\n    this.load();\n  }\n  load() {\n    const { id: myDreamLectureProjectId } = this.props.match.params;\n    request\n      .getMyDreamProject(myDreamLectureProjectId)\n      .then(res => res.json())\n      .then(myDreamProject => {\n        if(!myDreamProject) {\n          window.alert(\"no myDreamProject\");\n          return;\n        }\n\n        // temp: 테스트 계정의 프로젝트는 유저 인증 생략하기\n        if(myDreamProject.email !== \"test@wizschool.io\" && myDreamProject.email !== this.props.email) {\n            window.alert(\"invalid user\");\n            return;\n        }\n        // if(myDreamProject.email !== this.props.email) {\n        //   window.alert(\"invalid user\");\n        //   return;\n        // }\n\n        try {\n          myDreamProject.project.template = JSON.parse(myDreamProject.project.localized[0].template)\n        } catch(err) {\n          window.alert(\"wrong template\");\n          return;\n        }\n\n        this.props.setMyDreamProject(myDreamProject);\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if(this.props.myProject) {\n      if(!prevProps.myProject || prevProps.myProject.id !== this.props.myProject.id) {\n        this.didSetMyProject();\n      }\n    }\n    if(prevProps.currentMission !== this.props.currentMission) {\n      this.didSetCurrentMission();\n    }\n    if(prevProps.isConditionsClear !== this.props.isConditionsClear) {\n      if(this.props.currentMission && this.props.isConditionsClear) {\n        this.didClearConditions();\n      }\n    }\n    if(prevProps.editorMode !== this.props.editorMode) {\n      this.didShowTutorialPopup();\n    }\n  }\n  didSetMyProject() {\n    const { myProject } = this.props;\n\n    const missions = \n      (myProject.project.template.missions || [])\n      .map((mission, index) => ({\n        ...mission, \n        isCompleted: index < myProject.completedMissionNum\n      }))\n\n    let currentMissionIndex = this.props.isReplaying ? 0 : myProject.completedMissionNum;\n    if(currentMissionIndex > missions.length - 1) {\n      currentMissionIndex = missions.length - 1\n    }\n    \n    this.props.setDreamMissions(missions);\n    this.props.setCurrentDreamMissionIndex(currentMissionIndex);\n    this.save();\n  }\n  didSetCurrentMission() {\n    if(!this.props.currentMission) return;\n\n    if(this.missionSetTimer) {\n      clearTimeout(this.missionSetTimer);\n    }\n  \n    // TODO: Refer to the following issue.\n    // Issue Link: https://www.notion.so/wizschool/b77303a59acc4be7886ec81875607bf6\n    this.missionSetTimer = setTimeout(() => {\n      try {\n        const state = JSON.parse(this.props.currentMission.state);\n        AssetLibrary.loadAssetsFromScene(state.scene, () => {\n          this.props.setProject({ state });\n          this.forceSlideRerender();\n        });\n      } catch(err) {\n        window.alert(\"wrong mission state\");\n      }\n    }, 200);\n  }\n  didClearConditions() {\n    if(!this.props.currentMission.isCompleted || this.props.isReplaying) {\n      this.props.completeCurrentDreamMission();\n\n      if(this.props.currentMissionIndex < this.props.missions.length - 1) {\n        this.didClearMission();\n      } else {\n        this.didClearProject();\n      }\n    }\n  }\n  didClearMission() {\n    this.saveMissionClear();\n    this.alertMissionClear();\n  }\n  didClearProject() {\n    this.saveProjectClear();\n    this.alertProjectClear();\n  }\n\n  saveMissionClear() {\n    if(this.props.isReplaying) {\n      return;\n    }\n\n    this.save({ completedMissionNum: this.props.currentMissionIndex + 1 });\n  }\n  saveProjectClear() {\n    if(this.props.isReplaying) {\n      return;\n    }\n\n    this.save({ \n      completedMissionNum: this.props.missions.length,\n      completed: true\n    });\n  }\n  save(values) {\n    const { id: myDreamLectureProjectId } = this.props.match.params;\n    request\n      .saveMyDreamProject(myDreamLectureProjectId, values)\n      .then(res => res.json())\n      .then(json => {\n        if(json.success) {\n          console.log(this.props.intl.formatMessage({ id: \"ID_DREAMBUILDER_SAVE_LECTURE\" }));\n        } else {\n          console.warn(`${this.props.intl.formatMessage({ id: \"ID_DREAMBUILDER_SAVE_LECTURE_ERROR\" })}(${json.reason})`);\n        }\n      });\n  }\n\n  alertMissionClear() {\n    if(!this.props.currentMission.conditions || this.props.currentMission.conditions.length < 1) return;\n    setTimeout(() => {\n      showPopUp(\n        <MissionClearPopUp\n          onClickConfirm={() => {\n            this.props.setIsPlaying(false);\n            this.props.setCurrentDreamMissionIndex(this.props.currentMissionIndex + 1);\n          }}\n        />, { dismissButton: false }\n      );\n    }, 2000);\n  }\n  alertProjectClear() {\n    setTimeout(() => {\n      showPopUp(\n        <ProjectClearPopUp\n          onClickCancel={() => {\n            if(this.props.isReplaying) {\n              window.close();\n            } else { \n              this.createDeveloping(window.close);\n            }\n          }}\n          onClickConfirm={() => {\n            if(this.props.isReplaying) {\n              if(this.props.myProject.developing.isDeleted) {\n                this.createDeveloping(this.linkToDeveloping);\n              } else {\n                this.linkToDeveloping(this.props.myProject.developing);\n              }\n            } else { \n              this.createDeveloping(this.linkToDeveloping);\n            }\n          }}\n        />,\n        { dismissButton: false }\n      );\n    }, 1000);\n  }\n\n  createDeveloping(callback) {\n    const { id, project } = this.props.myProject;\n    const params = {\n      pId: generatePID(this.props.email),\n      email: this.props.email,\n      name: project.title,\n      type: { javascript: \"js\", oobc: \"wizlabOOBC\" }[project.lecture.course.type],\n      icon: project.localized && project.localized[0].thumbnailURL.toDreamclassS3URL() || \"\",\n      useCustomIcon: true,\n      state: JSON.stringify(this.getManipulatedProjectState()),\n      myDreamProjectId: id\n    }\n    request\n      .postDevelopingProject(params)\n      .then(res => res.json())\n      .then(developing => {\n        if(callback) {\n          callback(developing);\n        }\n      })\n  }\n  getManipulatedProjectState() {\n    const state = JSON.parse(JSON.stringify(this.props.projectState));\n    state.preview.isPlaying = false;\n    for(let sceneId in state.scene.scenes) {\n      const scene = state.scene.scenes[sceneId];\n      scene.isHiddenLockSprites = false;\n      for(let spriteId in scene.sprites) {\n        const sprite = scene.sprites[spriteId];\n        sprite.locked = false;\n      }\n    }\n    return state;\n  }\n  linkToDeveloping = developing => {\n    this.props.history.replace(`/builder/${developing.pId}`);\n    this.props.history.go(0);\n  }\n\n  forceSlideRerender = () => {\n    this.setState({ shouldSlideRerender: true }, () => {\n      this.setState({ shouldSlideRerender: false });\n    });\n  }\n\n  didShowTutorialPopup = async() => {\n    // temp : astro boy 동영상을 보여주기 위한 임시조치\n    const title =\n      this.props.project\n      && this.props.project.localized[0]\n      && this.props.project.localized[0].title\n    if(title === \"Catch the Super Magnet\") {\n      return this.setState({ isAstroBoyProject : true });\n    }\n    \n    const didShowTutorialPopup = localStorage.getItem(`didShowTutorial_${this.props.editorMode}`);\n    if (didShowTutorialPopup) this.setState({ isTutorialShow: false });\n    else this.setState({ isTutorialShow: true });\n  }\n  \n  hiddenTutorial = () => {\n    this.setState({ isTutorialShow: false });\n  }\n  \n  hiddenAstroBoyPopup = () => {\n    this.setState({ isAstroBoyProject : false });\n  }\n  \n  render() {\n    return (\n      <View \n        {...this.props}\n        shouldSlideRerender={this.state.shouldSlideRerender}\n        isTutorialShow={this.state.isTutorialShow}\n        isAstroBoyProject={this.state.isAstroBoyProject}\n        hiddenTutorial={this.hiddenTutorial}\n        hiddenAstroBoyPopup={this.hiddenAstroBoyPopup}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ \n    project: state.dream.myProject && state.dream.myProject.project,\n    editorMode: state.scene.editorMode,\n    email: state.userinfo.email,\n    myProject: state.dream.myProject,\n    isReplaying: state.dream.isReplaying,\n    missions: state.dream.missions,\n    currentMission: state.dream.currentMission,\n    currentMissionIndex: state.dream.currentMissionIndex,\n    isConditionsClear: state.dream.isConditionsClear,\n    isCodeConditionsClear: state.dream.isCodeConditionsClear,\n    projectState: {\n      scene: state.scene,\n      interaction: state.interaction,\n      preview: state.preview\n    }\n  }),\n  { \n    setProject: projectActions.setProject,\n    setIsPlaying: previewActions.setIsPlaying,\n    setMyDreamProject: dreamActions.setMyDreamProject,\n    setDreamMissions: dreamActions.setDreamMissions,\n    setCurrentDreamMissionIndex: dreamActions.setCurrentDreamMissionIndex,\n    completeCurrentDreamMission: dreamActions.completeCurrentDreamMission\n  }\n)(withRouter(injectIntl(Container)));\n"]},"metadata":{},"sourceType":"module"}