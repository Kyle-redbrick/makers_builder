{"ast":null,"code":"import _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _this = this,\n    _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/CourseDetail/View.js\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport Layout from \"../../Common/Component/Layout\";\nimport Intro from \"./Sections/Intro\";\nimport Lectures from \"./Sections/Lectures\";\nimport Games from \"./Sections/Games\";\nimport Comments from \"./Sections/Comments\";\nimport { Comment, Lecture, Project, Game } from \"../../models\";\nimport { getComments, getLecture } from \"./api\";\nvar Self = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\"])));\nvar Br = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  margin: 0 auto 19.5px;\\n  width: 100%;\\n  max-width: 1170px;\\n  height: 1px;\\n  background-color: rgba(255, 255, 255, 0.2);\\n\\n  @media screen and (max-width: 1169px) { \\n    width: 88.33vw;\\n    margin: 0 auto;\\n  }\\n\"])));\n\nvar View = function View(_ref) {\n  var courseId = _ref.courseId;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      scrollFixed = _useState2[0],\n      setScrollFixed = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lecture = _useState4[0],\n      setLecture = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      projects = _useState6[0],\n      setProjects = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      comments = _useState8[0],\n      setComments = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      publishedGames = _useState10[0],\n      setPublishedGames = _useState10[1];\n\n  var init = useCallback(function () {\n    getLecture({\n      id: courseId\n    }).then(function (lecture) {\n      if (lecture) {\n        setProjects(lecture.projects.map(function (p) {\n          return new Project(p, lecture);\n        }));\n\n        if (lecture.publishedList) {\n          setPublishedGames(lecture.publishedList.map(function (game) {\n            return new Game(game);\n          }));\n        }\n\n        setLecture(new Lecture(lecture));\n      }\n    });\n    fetchComments();\n  }, [courseId]);\n  useEffect(init, []);\n  useEffect(function () {\n    window.scrollTo(0, 0);\n\n    function watchScroll() {\n      window.addEventListener(\"scroll\", scroll);\n    }\n\n    watchScroll();\n    return function () {\n      window.removeEventListener(\"scroll\", scroll);\n    };\n  }, []);\n  var scroll = useCallback(function () {\n    if (window.pageYOffset > 330) {\n      setScrollFixed(true);\n    } else {\n      setScrollFixed(false);\n    }\n  }, []);\n  var fetchComments = useCallback(function () {\n    getComments({\n      lectureId: courseId\n    }).then(function (comments) {\n      setComments(comments.rows.map(function (c) {\n        return new Comment(c);\n      }));\n    });\n  }, [getComments]);\n  var onAfterCommentSubmit = useCallback(function () {\n    fetchComments();\n  }, []);\n  var onWindowFocus = useCallback(init, []);\n  useEffect(function () {\n    window.addEventListener(\"focus\", onWindowFocus);\n    return function () {\n      window.removeEventListener(\"focus\", onWindowFocus);\n    };\n  }, [onWindowFocus]);\n  return /*#__PURE__*/React.createElement(Layout, {\n    isHome: true,\n    hideHeader: scrollFixed ? true : false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Self, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Intro, {\n    lecture: lecture,\n    fixed: scrollFixed // onClickLearnNow={handleClickLearnNow}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Br, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Lectures, {\n    items: projects,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Br, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }), lecture.type !== 'python' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Games, {\n    items: publishedGames,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Br, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }))));\n};\n\nexport default View;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/CourseDetail/View.js"],"names":["React","useCallback","useEffect","useState","styled","Layout","Intro","Lectures","Games","Comments","Comment","Lecture","Project","Game","getComments","getLecture","Self","div","Br","View","courseId","scrollFixed","setScrollFixed","lecture","setLecture","projects","setProjects","comments","setComments","publishedGames","setPublishedGames","init","id","then","map","p","publishedList","game","fetchComments","window","scrollTo","watchScroll","addEventListener","scroll","removeEventListener","pageYOffset","lectureId","rows","c","onAfterCommentSubmit","onWindowFocus","type"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport Layout from \"../../Common/Component/Layout\";\n\nimport Intro from \"./Sections/Intro\";\nimport Lectures from \"./Sections/Lectures\";\nimport Games from \"./Sections/Games\";\nimport Comments from \"./Sections/Comments\";\nimport { Comment, Lecture, Project, Game } from \"../../models\";\n\nimport { getComments, getLecture } from \"./api\";\n\nconst Self = styled.div``;\n\nconst Br = styled.div`\n  margin: 0 auto 19.5px;\n  width: 100%;\n  max-width: 1170px;\n  height: 1px;\n  background-color: rgba(255, 255, 255, 0.2);\n\n  @media screen and (max-width: 1169px) { \n    width: 88.33vw;\n    margin: 0 auto;\n  }\n`;\n\nconst View = ({ courseId }) => {\n  const [scrollFixed, setScrollFixed] = useState(false);\n\n  const [lecture, setLecture] = useState({});\n  const [projects, setProjects] = useState([]);\n  const [comments, setComments] = useState([]);\n  const [publishedGames, setPublishedGames] = useState([]);\n\n  const init = useCallback(() => {\n    getLecture({ id: courseId }).then((lecture) => {\n      if (lecture) {\n        setProjects(lecture.projects.map((p) => new Project(p, lecture)));\n        if(lecture.publishedList) {\n          setPublishedGames(lecture.publishedList.map((game) => new Game(game)));\n        }\n        setLecture(new Lecture(lecture));\n      }\n    });\n\n    fetchComments();\n  }, [courseId])\n\n  useEffect(init, []);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    function watchScroll() {\n      window.addEventListener(\"scroll\", scroll);\n    }\n\n    watchScroll();\n\n    return () => {\n      window.removeEventListener(\"scroll\", scroll);\n    };\n  }, []);\n\n  const scroll = useCallback(() => {\n    if (window.pageYOffset > 330) {\n      setScrollFixed(true);\n    } else {\n      setScrollFixed(false);\n    }\n  }, []);\n\n  const fetchComments = useCallback(\n    () => {\n      getComments({ lectureId: courseId }).then((comments) => {\n        setComments(comments.rows.map((c) => new Comment(c)));\n      });\n    },\n    [getComments]\n  );\n\n  const onAfterCommentSubmit = useCallback(() => {\n    fetchComments();\n  }, []);\n\n  const onWindowFocus = useCallback(init, []);\n  useEffect(() => {\n    window.addEventListener(\"focus\", onWindowFocus);\n    return () => {\n      window.removeEventListener(\"focus\", onWindowFocus);\n    }\n  }, [onWindowFocus]);\n\n  return (\n    <Layout isHome={true} hideHeader={scrollFixed ? true : false}>\n      <Self>\n        <Intro\n          lecture={lecture} \n          fixed={scrollFixed}\n          // onClickLearnNow={handleClickLearnNow}\n        />\n        <Br />\n        <Lectures items={projects} />\n        <Br />\n        {\n          lecture.type !== 'python' && (\n            <>\n              <Games items={publishedGames} />\n              <Br />\n            </>\n          )\n        }\n        {/* <Comments courseId={courseId} items={comments} onAfterSubmit={onAfterCommentSubmit} /> */}\n      </Self>\n    </Layout>\n  );\n};\n\nexport default View;\n"]},"metadata":{},"sourceType":"module"}