{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Component/MakingNew/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { isTablet, isMobile } from \"react-device-detect\";\nimport View from \"./View\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.fetchTemplates = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$state, dataType, keyword, res, templates;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, dataType = _this$state.dataType, keyword = _this$state.keyword;\n              _context.prev = 1;\n              _context.next = 4;\n              return request.getTemplateProjectsByKeyword({\n                type: dataType,\n                keyword: keyword\n              });\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              templates = _context.sent;\n\n              if (templates) {\n                templates = templates.rows.filter(function (item) {\n                  return item.description !== \"empty\";\n                });\n\n                _this.setState({\n                  templates: templates\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              return _context.abrupt(\"return\", []);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n\n    _this.onClick2DGame = function () {\n      if (isTablet || isMobile) {\n        return showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n          title: \"PC\\uC5D0\\uC11C \\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\",\n          buttonName: \"\\uD655\\uC778\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        });\n      } else {\n        showPopUp( /*#__PURE__*/React.createElement(NewProjectPopup, {\n          gameDimension: \"2D\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    _this.onClick3DGame = function () {\n      if (isMobile) {\n        return showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n          title: \"PC \\uB610\\uB294 Tablet\\uC5D0\\uC11C \\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\",\n          buttonName: \"\\uD655\\uC778\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        });\n      } else {\n        // TOOD: redbrick.space로 연결\n        showPopUp( /*#__PURE__*/React.createElement(NewProjectPopup, {\n          gameDimension: \"3D\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    _this.onClickProject = function (templateId) {\n      if (!templateId) return;\n      var pageURL;\n\n      if (_this.props.email) {\n        pageURL = \"/\".concat(PAGETYPE.BUILDER, \"/\").concat(generatePID(_this.props.email), \"/\").concat(templateId);\n      } else {\n        pageURL = \"/\".concat(PAGETYPE.BUILDER, \"?t=\").concat(templateId);\n      }\n\n      _this.props.history.replace({\n        pathname: pageURL\n      });\n\n      window.location.reload();\n    };\n\n    _this.setFilteringData = function () {\n      var filteredType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var keyword = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n      _this.setState({\n        dataType: filteredType,\n        keyword: keyword\n      }, function () {\n        _this.fetchTemplates();\n      });\n    };\n\n    _this.state = {\n      templates: [],\n      dataType: [],\n      keyword: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var onClick2DGame = this.onClick2DGame,\n          onClick3DGame = this.onClick3DGame,\n          onClickProject = this.onClickProject,\n          setFilteringData = this.setFilteringData;\n      var templates = this.state.templates;\n      return /*#__PURE__*/React.createElement(View, {\n        onClick2DGame: onClick2DGame,\n        onClick3DGame: onClick3DGame,\n        templates: templates,\n        onClickProject: onClickProject,\n        intl: this.props.intl,\n        setFilteringData: setFilteringData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Component/MakingNew/Container.js"],"names":["React","Component","injectIntl","withRouter","connect","isTablet","isMobile","View","NewProjectPopup","PopUp","showPopUp","request","PAGETYPE","generatePID","Container","props","fetchTemplates","state","dataType","keyword","getTemplateProjectsByKeyword","type","res","json","templates","rows","filter","item","description","setState","console","log","onClick2DGame","darkmode","dismissButton","dismissOverlay","onClick3DGame","onClickProject","templateId","pageURL","email","BUILDER","history","replace","pathname","window","location","reload","setFilteringData","filteredType","intl","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { isTablet, isMobile } from \"react-device-detect\";\nimport View from \"./View\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      templates: [],\n      dataType: [],\n      keyword: \"\"\n    };\n  }\n  fetchTemplates = async () => {\n    const { dataType, keyword } = this.state;\n    try {\n      let res = await request.getTemplateProjectsByKeyword({\n        type: dataType,\n        keyword\n      });\n      let templates = await res.json();\n      if (templates) {\n        templates = templates.rows.filter(item => item.description !== \"empty\");\n        this.setState({ templates });\n      }\n    } catch (error) {\n      console.log(error);\n      return [];\n    }\n  };\n\n  onClick2DGame = () => {\n    if (isTablet || isMobile) {\n      return showPopUp(\n        <PopUp.OneButton\n          title=\"PC에서 사용 가능합니다.\"\n          buttonName=\"확인\"\n        />,\n        {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        }\n      );\n    } else {\n      showPopUp(<NewProjectPopup gameDimension=\"2D\" />);\n    }\n  };\n\n  onClick3DGame = () => {\n    if (isMobile) {\n      return showPopUp(\n        <PopUp.OneButton\n          title=\"PC 또는 Tablet에서 사용 가능합니다.\"\n          buttonName=\"확인\"\n        />,\n        {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        }\n      );\n    } else {\n      // TOOD: redbrick.space로 연결\n      showPopUp(<NewProjectPopup gameDimension=\"3D\" />);\n    }\n  };\n\n  onClickProject = templateId => {\n    if (!templateId) return;\n    let pageURL;\n    if (this.props.email) {\n      pageURL = `/${PAGETYPE.BUILDER}/${generatePID(\n        this.props.email\n      )}/${templateId}`;\n    } else {\n      pageURL = `/${PAGETYPE.BUILDER}?t=${templateId}`;\n    }\n    this.props.history.replace({\n      pathname: pageURL\n    });\n    window.location.reload();\n  };\n\n  setFilteringData = (filteredType = [], keyword = \"\") => {\n    this.setState({ dataType: filteredType, keyword }, () => {\n      this.fetchTemplates();\n    });\n  };\n  render() {\n    const {\n      onClick2DGame,\n      onClick3DGame,\n      onClickProject,\n      setFilteringData\n    } = this;\n    const { templates } = this.state;\n\n    return (\n      <View\n        onClick2DGame={onClick2DGame}\n        onClick3DGame={onClick3DGame}\n        templates={templates}\n        onClickProject={onClickProject}\n        intl={this.props.intl}\n        setFilteringData={setFilteringData}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ email: state.userinfo.email }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}