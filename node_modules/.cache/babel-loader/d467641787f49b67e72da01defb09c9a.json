{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Header/Container.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\"; // import moment from \"moment\";\n\nimport { withRouter } from \"react-router-dom\";\nimport store from \"../../Store\";\nimport { injectIntl } from \"react-intl\";\nimport * as userInfoActions from \"../../../../Common/Store/Reducer/UserInfo\";\nimport * as projectActions from \"../../../Builder/Store/Reducer/project\";\nimport { PAGETYPE } from \"../../../../Common/Util/Constant\";\nimport checkBlockedUser from \"../../../../Common/Util/CheckBlockedUser\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport InstantMobileRun from \"../../../../Common/Component/InstantMobileRun\";\nimport QRPopup from \"../../../../Common/Component/QRPopup\";\nimport Publish from \"../../../../Common/Component/Publish\";\nimport SignIn from \"../../../../Common/Component/SignIn\";\nimport { getColorTheme, toggleColorTheme } from \"../../utils/colorThemeUtil\";\nimport * as TrackingUtil from \"../../../../Common/Util/TrackingUtil\";\nimport * as modalActions from \"../../Store/Reducer/modal\";\nimport * as webrtcActions from \"../../Store/Reducer/webrtc\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.handleChangeTheme = function () {\n      toggleColorTheme();\n\n      _this.setState({\n        currentTheme: getColorTheme()\n      }, function () {\n        TrackingUtil.sendGAEvent({\n          category: \"Builder\",\n          action: \"ChangeColorMode\",\n          label: getColorTheme()\n        });\n      });\n    };\n\n    _this.openInstantRunPopup = function () {\n      TrackingUtil.sendGAEvent({\n        category: \"Builder\",\n        action: \"MenuActions\",\n        label: \"MobilePlay\"\n      });\n      showPopUp(React.createElement(InstantMobileRun, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), {\n        store: store,\n        defaultPadding: false,\n        dismissOverlay: true\n      });\n    };\n\n    _this.openSharePopup = function () {\n      TrackingUtil.sendGAEvent({\n        category: \"Builder\",\n        action: \"MenuActions\",\n        label: \"Share\"\n      });\n      showPopUp(React.createElement(QRPopup, {\n        project: _this.props.project,\n        isBuilder: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), {\n        store: store,\n        defaultPadding: false,\n        dismissOverlay: true,\n        overflow: true\n      });\n    };\n\n    _this.clickPublishPopup = function () {\n      _this.setState({\n        isClickPublish: !_this.state.isClickPublish\n      });\n    };\n\n    _this.openPublishPopup = function () {\n      _this.setState({\n        isClickPublish: false\n      });\n\n      var isBlocked = checkBlockedUser(_this.props.userinfo);\n\n      if (isBlocked) {\n        return;\n      }\n\n      if (_this.props.userinfo.email) {\n        TrackingUtil.sendGAEvent({\n          category: \"Builder\",\n          action: \"MenuActions\",\n          label: \"Publishing\"\n        }); // 퍼블리싱 팝업 open\n\n        _this.props.setLog({\n          publish: true\n        });\n\n        if (_this.pageType === PAGETYPE.TUTORIAL) {\n          showPopUp(React.createElement(Publish, {\n            isDeveloping: true,\n            isBuilder: true,\n            tutorialLevel: _this.pageParams.level * 1,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }), {\n            store: store,\n            dismissOverlay: false,\n            defaultPadding: false,\n            scrollable: true\n          });\n        } else {\n          showPopUp(React.createElement(Publish, {\n            isDeveloping: true,\n            isBuilder: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119\n            },\n            __self: this\n          }), {\n            store: store,\n            dismissOverlay: false,\n            defaultPadding: false,\n            scrollable: true\n          });\n        }\n      } else {\n        _this.openLoginPopup();\n      }\n    };\n\n    _this.openPublishGame = function () {\n      _this.setState({\n        isClickPublish: false\n      }); // 퍼블리싱 한 게임 보기\n\n    };\n\n    _this.openLoginPopup = function () {\n      showPopUp(React.createElement(SignIn, {\n        isBuilder: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), {\n        store: store,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.openHelp = function () {\n      _this.props.handleHelp(true);\n    };\n\n    _this.handleLogout = function () {\n      localStorage.removeItem(\"wizToken\");\n\n      _this.props.updateUserInfo();\n    };\n\n    _this.handleTemplateBtn = function () {\n      _this.props.setIsAppModalOn(true, \"PROJECTLIST\");\n    };\n\n    _this.editProjectName = function (pId, newName) {\n      request.updateDevelopingProject({\n        pId: pId,\n        name: newName\n      }).then(function (res) {\n        return res.json;\n      }).catch(function (e) {\n        return console.error(e);\n      });\n\n      _this.props.setProjectName(newName);\n    };\n\n    _this.handlechangeProjectName = function (pId, name) {\n      showPopUp(React.createElement(PopUp.OneInput, {\n        titleId: \"ID_PROJECT_POPUP_EDIT_TITLE\",\n        defaultInput: name,\n        buttonNameId: \"ID_PROJECT_POPUP_EDIT_OK\",\n        buttonAction: function buttonAction(newVal) {\n          _this.editProjectName(pId, newVal);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), {\n        store: store,\n        dismissOverlay: true\n      });\n    };\n\n    _this.pageType = props.match.path.split(\"/\")[1];\n    _this.pageParams = props.match.params;\n    var isMenuEnabled = true;\n\n    if (_this.pageType === PAGETYPE.TUTORIAL && _this.pageParams.level !== \"10\") {\n      isMenuEnabled = false;\n    }\n\n    _this.state = {\n      currentTheme: getColorTheme(),\n      isMenuEnabled: isMenuEnabled,\n      isClickPublish: false\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var didReadHelp = localStorage.getItem(\"didReadHelp\");\n\n      if (!didReadHelp && this.pageType !== PAGETYPE.OCP2) {\n        this.openHelp();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          userinfo = _this$props.userinfo,\n          project = _this$props.project,\n          openProjectPopup = _this$props.openProjectPopup,\n          intl = _this$props.intl,\n          isTutor = _this$props.isTutor,\n          isAppModalOn = _this$props.isAppModalOn,\n          appModalType = _this$props.appModalType,\n          handleSelectTab = _this$props.handleSelectTab,\n          editorMode = _this$props.editorMode;\n      var openInstantRunPopup = this.openInstantRunPopup,\n          openSharePopup = this.openSharePopup,\n          openPublishPopup = this.openPublishPopup,\n          openLoginPopup = this.openLoginPopup,\n          openHelp = this.openHelp,\n          handleLogout = this.handleLogout,\n          handleChangeTheme = this.handleChangeTheme,\n          handleTemplateBtn = this.handleTemplateBtn,\n          clickPublishPopup = this.clickPublishPopup,\n          handlechangeProjectName = this.handlechangeProjectName;\n      var _this$state = this.state,\n          currentTheme = _this$state.currentTheme,\n          isMenuEnabled = _this$state.isMenuEnabled,\n          isClickPublish = _this$state.isClickPublish;\n      return React.createElement(View, {\n        email: userinfo.email,\n        name: userinfo.name,\n        icon: userinfo.icon,\n        project: project,\n        openProjectPopup: openProjectPopup,\n        openInstantRunPopup: openInstantRunPopup,\n        openSharePopup: openSharePopup,\n        openPublishPopup: openPublishPopup,\n        clickPublishPopup: clickPublishPopup,\n        openLoginPopup: openLoginPopup,\n        openHelp: openHelp,\n        handleLogout: handleLogout,\n        handleChangeTheme: handleChangeTheme,\n        currentTheme: currentTheme,\n        isMenuEnabled: isMenuEnabled,\n        intl: intl,\n        pageType: this.pageType,\n        isTutor: isTutor,\n        isAppModalOn: isAppModalOn,\n        appModalType: appModalType,\n        handleTemplateBtn: handleTemplateBtn,\n        handleSelectTab: handleSelectTab,\n        editorMode: editorMode,\n        isClickPublish: isClickPublish,\n        handlechangeProjectName: handlechangeProjectName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo,\n    isTutor: state.userinfo.isTutor,\n    email: state.userinfo.email,\n    icon: state.userinfo.icon,\n    name: state.userinfo.name,\n    project: state.project,\n    isAppModalOn: state.modal.isAppModalOn,\n    appModalType: state.modal.appModalType,\n    editorMode: state.scene.editorMode\n  };\n}, {\n  updateUserInfo: userInfoActions.updateUserInfo,\n  setIsAppModalOn: modalActions.setIsAppModalOn,\n  setLog: webrtcActions.setLog,\n  setProjectName: projectActions.setProjectName\n})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Header/Container.js"],"names":["React","Component","connect","withRouter","store","injectIntl","userInfoActions","projectActions","PAGETYPE","checkBlockedUser","PopUp","showPopUp","InstantMobileRun","QRPopup","Publish","SignIn","getColorTheme","toggleColorTheme","TrackingUtil","modalActions","webrtcActions","request","View","Container","props","handleChangeTheme","setState","currentTheme","sendGAEvent","category","action","label","openInstantRunPopup","defaultPadding","dismissOverlay","openSharePopup","project","overflow","clickPublishPopup","isClickPublish","state","openPublishPopup","isBlocked","userinfo","email","setLog","publish","pageType","TUTORIAL","pageParams","level","scrollable","openLoginPopup","openPublishGame","mobileFullscreen","openHelp","handleHelp","handleLogout","localStorage","removeItem","updateUserInfo","handleTemplateBtn","setIsAppModalOn","editProjectName","pId","newName","updateDevelopingProject","name","then","res","json","catch","e","console","error","setProjectName","handlechangeProjectName","newVal","match","path","split","params","isMenuEnabled","didReadHelp","getItem","OCP2","openProjectPopup","intl","isTutor","isAppModalOn","appModalType","handleSelectTab","editorMode","icon","modal","scene"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n// import moment from \"moment\";\nimport { withRouter } from \"react-router-dom\";\nimport store from \"../../Store\";\nimport { injectIntl } from \"react-intl\";\nimport * as userInfoActions from \"../../../../Common/Store/Reducer/UserInfo\";\nimport * as projectActions from \"../../../Builder/Store/Reducer/project\";\nimport { PAGETYPE } from \"../../../../Common/Util/Constant\";\nimport checkBlockedUser from \"../../../../Common/Util/CheckBlockedUser\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport InstantMobileRun from \"../../../../Common/Component/InstantMobileRun\";\nimport QRPopup from \"../../../../Common/Component/QRPopup\";\nimport Publish from \"../../../../Common/Component/Publish\";\nimport SignIn from \"../../../../Common/Component/SignIn\";\nimport { getColorTheme, toggleColorTheme } from \"../../utils/colorThemeUtil\";\nimport * as TrackingUtil from \"../../../../Common/Util/TrackingUtil\";\nimport * as modalActions from \"../../Store/Reducer/modal\";\nimport * as webrtcActions from \"../../Store/Reducer/webrtc\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.pageType = props.match.path.split(\"/\")[1];\n    this.pageParams = props.match.params;\n    let isMenuEnabled = true;\n    if (this.pageType === PAGETYPE.TUTORIAL && this.pageParams.level !== \"10\") {\n      isMenuEnabled = false;\n    }\n    this.state = {\n      currentTheme: getColorTheme(),\n      isMenuEnabled,\n      isClickPublish: false\n    };\n  }\n\n  componentDidMount() {\n    const didReadHelp = localStorage.getItem(\"didReadHelp\");\n    if (!didReadHelp && this.pageType !== PAGETYPE.OCP2) {\n      this.openHelp();\n    }\n  }\n\n  handleChangeTheme = () => {\n    toggleColorTheme();\n    this.setState({ currentTheme: getColorTheme() }, () => {\n      TrackingUtil.sendGAEvent({\n        category: \"Builder\",\n        action: `ChangeColorMode`,\n        label: getColorTheme()\n      });\n    });\n  };\n\n  openInstantRunPopup = () => {\n    TrackingUtil.sendGAEvent({\n      category: \"Builder\",\n      action: `MenuActions`,\n      label: \"MobilePlay\"\n    });\n    showPopUp(<InstantMobileRun />, {\n      store,\n      defaultPadding: false,\n      dismissOverlay: true\n    });\n  };\n\n  openSharePopup = () => {\n    TrackingUtil.sendGAEvent({\n      category: \"Builder\",\n      action: `MenuActions`,\n      label: \"Share\"\n    });\n    showPopUp(<QRPopup project={this.props.project} isBuilder={true} />, {\n      store,\n      defaultPadding: false,\n      dismissOverlay: true,\n      overflow: true\n    });\n  };\n\n  clickPublishPopup = () => {\n    this.setState({ isClickPublish: !this.state.isClickPublish });\n  };\n\n  openPublishPopup = () => {\n    this.setState({ isClickPublish: false });\n    const isBlocked = checkBlockedUser(this.props.userinfo);\n    if (isBlocked) {\n      return;\n    }\n    if (this.props.userinfo.email) {\n      TrackingUtil.sendGAEvent({\n        category: \"Builder\",\n        action: `MenuActions`,\n        label: \"Publishing\"\n      });\n\n      // 퍼블리싱 팝업 open\n      this.props.setLog({ publish: true });\n\n      if (this.pageType === PAGETYPE.TUTORIAL) {\n        showPopUp(\n          <Publish\n            isDeveloping={true}\n            isBuilder={true}\n            tutorialLevel={this.pageParams.level * 1}\n          />,\n          {\n            store,\n            dismissOverlay: false,\n            defaultPadding: false,\n            scrollable: true\n          }\n        );\n      } else {\n        showPopUp(<Publish isDeveloping={true} isBuilder={true} />, {\n          store,\n          dismissOverlay: false,\n          defaultPadding: false,\n          scrollable: true\n        });\n      }\n    } else {\n      this.openLoginPopup();\n    }\n  };\n\n  openPublishGame = () => {\n    this.setState({ isClickPublish: false });\n\n    // 퍼블리싱 한 게임 보기\n  };\n\n  openLoginPopup = () => {\n    showPopUp(<SignIn isBuilder={true} />, { store, mobileFullscreen: true });\n  };\n\n  openHelp = () => {\n    this.props.handleHelp(true);\n  };\n\n  handleLogout = () => {\n    localStorage.removeItem(\"wizToken\");\n    this.props.updateUserInfo();\n  };\n\n  handleTemplateBtn = () => {\n    this.props.setIsAppModalOn(true, \"PROJECTLIST\");\n  };\n\n  editProjectName = (pId, newName) => {\n    request\n      .updateDevelopingProject({ pId, name: newName })\n      .then(res => res.json)\n      .catch(e => console.error(e));\n    this.props.setProjectName(newName);\n  };\n\n  handlechangeProjectName = (pId, name) => {\n    showPopUp(\n      <PopUp.OneInput\n        titleId=\"ID_PROJECT_POPUP_EDIT_TITLE\"\n        defaultInput={name}\n        buttonNameId=\"ID_PROJECT_POPUP_EDIT_OK\"\n        buttonAction={newVal => {\n          this.editProjectName(pId, newVal);\n        }}\n      />,\n      { store, dismissOverlay: true }\n    );\n  };\n\n  render() {\n    const {\n      userinfo,\n      project,\n      openProjectPopup,\n      intl,\n      isTutor,\n      isAppModalOn,\n      appModalType,\n      handleSelectTab,\n      editorMode\n    } = this.props;\n    const {\n      openInstantRunPopup,\n      openSharePopup,\n      openPublishPopup,\n      openLoginPopup,\n      openHelp,\n      handleLogout,\n      handleChangeTheme,\n      handleTemplateBtn,\n      clickPublishPopup,\n      handlechangeProjectName\n    } = this;\n    const { currentTheme, isMenuEnabled, isClickPublish } = this.state;\n    return (\n      <View\n        email={userinfo.email}\n        name={userinfo.name}\n        icon={userinfo.icon}\n        project={project}\n        openProjectPopup={openProjectPopup}\n        openInstantRunPopup={openInstantRunPopup}\n        openSharePopup={openSharePopup}\n        openPublishPopup={openPublishPopup}\n        clickPublishPopup={clickPublishPopup}\n        openLoginPopup={openLoginPopup}\n        openHelp={openHelp}\n        handleLogout={handleLogout}\n        handleChangeTheme={handleChangeTheme}\n        currentTheme={currentTheme}\n        isMenuEnabled={isMenuEnabled}\n        intl={intl}\n        pageType={this.pageType}\n        isTutor={isTutor}\n        isAppModalOn={isAppModalOn}\n        appModalType={appModalType}\n        handleTemplateBtn={handleTemplateBtn}\n        handleSelectTab={handleSelectTab}\n        editorMode={editorMode}\n        isClickPublish={isClickPublish}\n        handlechangeProjectName={handlechangeProjectName}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    userinfo: state.userinfo,\n    isTutor: state.userinfo.isTutor,\n    email: state.userinfo.email,\n    icon: state.userinfo.icon,\n    name: state.userinfo.name,\n    project: state.project,\n    isAppModalOn: state.modal.isAppModalOn,\n    appModalType: state.modal.appModalType,\n    editorMode: state.scene.editorMode\n  }),\n  {\n    updateUserInfo: userInfoActions.updateUserInfo,\n    setIsAppModalOn: modalActions.setIsAppModalOn,\n    setLog: webrtcActions.setLog,\n    setProjectName: projectActions.setProjectName\n  }\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}