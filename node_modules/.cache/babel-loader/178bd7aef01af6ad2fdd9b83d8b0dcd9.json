{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/EmailVerify/Container.js\";\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport PopUp, { showPopUp } from \"../../Common/Component/PopUp\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport Validate from \"../../Common/Util/Validate\";\nimport View from \"./View\";\nimport * as userInfoSelector from \"../../Common/Store/Selector/UserInfo\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.onSubmit = function () {\n      request.sendVerifyEmail({\n        receiverEmail: _this.state.email\n      }).catch(function (error) {\n        _this.showAlert({\n          titleId: \"ID_CHALLENGE_APPLY_SERVER_ERROR_TITLE\",\n          subtitleId: \"ID_CHALLENGE_APPLY_SERVER_ERROR_SUBTITLE\",\n          buttonNameId: \"ID_CONFIRM\"\n        });\n\n        console.error(error);\n      });\n\n      if (_this.state.isRegistered) {\n        _this.showAlert({\n          titleId: \"ID_EMAIL_VERIFY_SEND_COMPLETED_TITLE\",\n          subtitleId: \"ID_EMAIL_VERIFY_SEND_COMPLETED_SUBTITLE\",\n          buttonNameId: \"ID_CONFIRM\"\n        });\n      } else {\n        _this.setState({\n          isRegistered: true\n        });\n      }\n    };\n\n    _this.showAlert = function (_ref) {\n      var titleId = _ref.titleId,\n          subtitleId = _ref.subtitleId,\n          buttonNameId = _ref.buttonNameId;\n      var intl = _this.props.intl;\n      showPopUp(React.createElement(PopUp.OneButton, {\n        title: intl.formatMessage({\n          id: titleId\n        }),\n        subtitle: intl.formatMessage({\n          id: subtitleId\n        }),\n        buttonName: intl.formatMessage({\n          id: buttonNameId\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), {\n        darkmode: true\n      });\n    };\n\n    _this.onClickBack = function () {\n      _this.setState({\n        isRegistered: false\n      });\n    };\n\n    _this.onChange = function (id, value) {\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.onClickPrevPage = function () {\n      _this.props.history.goBack();\n    };\n\n    _this.state = {\n      isRegistered: false,\n      email: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, Object.assign({}, this.state, {\n        emailWarningId: this.emailWarningId,\n        isOverAge14: this.props.isUserAgeOver14,\n        onChange: this.onChange,\n        onClickPrevPage: this.onClickPrevPage,\n        onSubmit: this.onSubmit,\n        onClickBack: this.onClickBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"emailWarningId\",\n    get: function get() {\n      return Validate.email(this.state.email).id;\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    isUserAgeOver14: userInfoSelector.getIsAgeOver14(state.userinfo)\n  };\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/EmailVerify/Container.js"],"names":["React","Component","injectIntl","connect","PopUp","showPopUp","request","Validate","View","userInfoSelector","Container","props","onSubmit","sendVerifyEmail","receiverEmail","state","email","catch","error","showAlert","titleId","subtitleId","buttonNameId","console","isRegistered","setState","intl","formatMessage","id","darkmode","onClickBack","onChange","value","onClickPrevPage","history","goBack","emailWarningId","isUserAgeOver14","getIsAgeOver14","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport PopUp, { showPopUp } from \"../../Common/Component/PopUp\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport Validate from \"../../Common/Util/Validate\";\nimport View from \"./View\";\nimport * as userInfoSelector from \"../../Common/Store/Selector/UserInfo\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isRegistered: false,\n      email: \"\"\n    }\n  }\n\n  get emailWarningId() {\n    return Validate.email(this.state.email).id;\n  }\n\n  onSubmit = () => {\n    request.sendVerifyEmail({ receiverEmail: this.state.email })\n      .catch(error => {\n        this.showAlert({\n          titleId: \"ID_CHALLENGE_APPLY_SERVER_ERROR_TITLE\",\n          subtitleId: \"ID_CHALLENGE_APPLY_SERVER_ERROR_SUBTITLE\",\n          buttonNameId: \"ID_CONFIRM\"\n        })\n        console.error(error);\n      });\n\n    if (this.state.isRegistered) {\n      this.showAlert({\n        titleId: \"ID_EMAIL_VERIFY_SEND_COMPLETED_TITLE\",\n        subtitleId: \"ID_EMAIL_VERIFY_SEND_COMPLETED_SUBTITLE\",\n        buttonNameId: \"ID_CONFIRM\"\n      })\n    } else {\n      this.setState({ isRegistered: true })\n    }\n  }\n\n  showAlert = ({ titleId, subtitleId, buttonNameId }) => {\n    const { intl } = this.props;\n    showPopUp(\n      <PopUp.OneButton\n        title={intl.formatMessage({ id: titleId })}\n        subtitle={intl.formatMessage({ id: subtitleId })}\n        buttonName={intl.formatMessage({ id: buttonNameId })}\n      />,\n      { darkmode: true }\n    )\n  }\n\n  onClickBack = () => {\n    this.setState({ isRegistered: false })\n  }\n\n  onChange = (id, value) => {\n    this.setState({ [id]: value })\n  }\n\n  onClickPrevPage = () => {\n    this.props.history.goBack()\n  }\n\n  render() {\n    return (\n      <View\n        {...this.state}\n        emailWarningId={this.emailWarningId}\n        isOverAge14={this.props.isUserAgeOver14}\n        onChange={this.onChange}\n        onClickPrevPage={this.onClickPrevPage}\n        onSubmit={this.onSubmit}\n        onClickBack={this.onClickBack}\n      />\n    )\n  }\n}\n\nexport default connect(\n  state => ({ isUserAgeOver14: userInfoSelector.getIsAgeOver14(state.userinfo) })\n)(injectIntl(Container))"]},"metadata":{},"sourceType":"module"}