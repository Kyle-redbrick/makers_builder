{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/MonitorContainer/DrawingBoard/index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as webrtcActions from \"../../../Store/Reducer/webrtc\";\nimport { fabric } from \"fabric\";\n\nvar DrawingBoard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DrawingBoard, _Component);\n\n  function DrawingBoard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DrawingBoard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DrawingBoard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.presetColors = [\"#20a1ec\", \"#ffd185\", \"#77d354\", \"#ffba5c\", \"#23d8af\", \"#f96063\", \"#916cc5\", \"#3e4852\", \"#969fa9\", \"#ffffff\"];\n\n    _this.onMouseUp = function () {\n      var objects = _this.canvas.getObjects();\n\n      var object = objects[objects.length - 1];\n\n      _this.props.addDrawing(object.toObject());\n    };\n\n    _this.handleChangeColor = function (color) {\n      _this.canvas.freeDrawingBrush.color = color;\n    };\n\n    return _this;\n  }\n\n  _createClass(DrawingBoard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initFabric();\n    }\n  }, {\n    key: \"initFabric\",\n    value: function initFabric() {\n      this.canvas = new fabric.Canvas(\"drawCanvas\");\n      this.canvas.setWidth(1280);\n      this.canvas.setHeight(720);\n      this.canvas.setDimensions({\n        width: \"100%\",\n        height: \"100%\"\n      }, {\n        cssOnly: true\n      });\n      this.canvas.selection = false;\n      this.canvas.isDrawingMode = true;\n      this.canvas.freeDrawingBrush.color = \"#FFFFFF\";\n      this.canvas.freeDrawingBrush.width = 3;\n      this.canvas.on(\"mouse:up\", this.onMouseUp);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this2 = this;\n\n      if (nextProps.webrtcDrawing.length !== this.canvas.getObjects().length) {\n        var obj = nextProps.webrtcDrawing[nextProps.webrtcDrawing.length - 1];\n        new fabric.Path.fromObject(obj, function (path, callback) {\n          _this2.canvas.add(path);\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"DrawingBoard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"canvas\", {\n        id: \"drawCanvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"CanvasContainer__colorlist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, this.presetColors.map(function (color, index) {\n        return React.createElement(\"li\", {\n          key: index,\n          onClick: function onClick(e) {\n            _this3.handleChangeColor(color);\n          },\n          style: {\n            backgroundColor: color\n          },\n          className: \"CanvasContainer__colors\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        });\n      })), React.createElement(\"p\", {\n        className: \"closeBtn\",\n        onClick: function onClick() {\n          return _this3.props.handleClose(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DrawingBoard;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    webrtcDrawing: state.webrtc.drawing\n  };\n}, {\n  addDrawing: webrtcActions.addDrawing\n})(DrawingBoard);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/MonitorContainer/DrawingBoard/index.js"],"names":["React","Component","connect","webrtcActions","fabric","DrawingBoard","presetColors","onMouseUp","objects","canvas","getObjects","object","length","props","addDrawing","toObject","handleChangeColor","color","freeDrawingBrush","initFabric","Canvas","setWidth","setHeight","setDimensions","width","height","cssOnly","selection","isDrawingMode","on","nextProps","nextState","webrtcDrawing","obj","Path","fromObject","path","callback","add","map","index","e","backgroundColor","handleClose","state","webrtc","drawing"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as webrtcActions from \"../../../Store/Reducer/webrtc\";\nimport { fabric } from \"fabric\";\n\nclass DrawingBoard extends Component {\n  presetColors = [\n    \"#20a1ec\",\n    \"#ffd185\",\n    \"#77d354\",\n    \"#ffba5c\",\n    \"#23d8af\",\n    \"#f96063\",\n    \"#916cc5\",\n    \"#3e4852\",\n    \"#969fa9\",\n    \"#ffffff\"\n  ];\n\n  componentDidMount() {\n    this.initFabric();\n  }\n\n  initFabric() {\n    this.canvas = new fabric.Canvas(\"drawCanvas\");\n    this.canvas.setWidth(1280);\n    this.canvas.setHeight(720);\n    this.canvas.setDimensions(\n      { width: \"100%\", height: \"100%\" },\n      { cssOnly: true }\n    );\n    this.canvas.selection = false;\n    this.canvas.isDrawingMode = true;\n    this.canvas.freeDrawingBrush.color = \"#FFFFFF\";\n    this.canvas.freeDrawingBrush.width = 3;\n\n    this.canvas.on(\"mouse:up\", this.onMouseUp);\n  }\n\n  onMouseUp = () => {\n    const objects = this.canvas.getObjects();\n    const object = objects[objects.length - 1];\n    this.props.addDrawing(object.toObject());\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.webrtcDrawing.length !== this.canvas.getObjects().length) {\n      const obj = nextProps.webrtcDrawing[nextProps.webrtcDrawing.length - 1];\n      new fabric.Path.fromObject(obj, (path, callback) => {\n        this.canvas.add(path);\n      });\n    }\n    return true;\n  }\n\n  handleChangeColor = color => {\n    this.canvas.freeDrawingBrush.color = color;\n  };\n\n  render() {\n    return (\n      <div className=\"DrawingBoard\">\n        <canvas id=\"drawCanvas\" />\n        <ul className=\"CanvasContainer__colorlist\">\n          {this.presetColors.map((color, index) => {\n            return (\n              <li\n                key={index}\n                onClick={e => {\n                  this.handleChangeColor(color);\n                }}\n                style={{ backgroundColor: color }}\n                className=\"CanvasContainer__colors\"\n              />\n            );\n          })}\n        </ul>\n        <p className=\"closeBtn\" onClick={() => this.props.handleClose(false)} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    webrtcDrawing: state.webrtc.drawing\n  }),\n  { addDrawing: webrtcActions.addDrawing }\n)(DrawingBoard);\n"]},"metadata":{},"sourceType":"module"}