{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Event/Event2/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\"; // import * as TrackingUtil from \"../../../Common/Util/TrackingUtil\";\n\nimport * as userInfoActions from \"../../../Common/Store/Reducer/UserInfo\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\nimport TwoButton from \"../../../Common/Component/PopUp/TwoButton\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.onClickShare = function (type) {\n      // TrackingUtil.kakaoPixelEvent(\"event_\" + type);\n      if (!_this.props.userinfo.email) {\n        showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }\n        }), {\n          darkmode: true\n        });\n        return;\n      }\n\n      if (!_this.props.userinfo.isMarketingAgreement) {\n        showPopUp( /*#__PURE__*/React.createElement(TwoButton, {\n          title: \"\\uAD11\\uACE0\\uC131 \\uC815\\uBCF4 \\uB3D9\\uC758\",\n          subtitle: \"\\uBCF8 \\uC774\\uBCA4\\uD2B8\\uB294 \\uAD11\\uACE0\\uC131 \\uC815\\uBCF4 \\uB3D9\\uC758\\uC5D0 \\uB3D9\\uC758\\uD55C \\uD68C\\uC6D0\\uC5D0 \\uD55C\\uD574 \\uCC38\\uC5EC\\uD558\\uC2E4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\\n\\uB3D9\\uC758\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n          confirmButtonName: \"\\uB3D9\\uC758\",\n          cancelButtonName: \"\\uCDE8\\uC18C\",\n          confirmAction: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return request.updateUserInfo({\n                      email: _this.props.userinfo.email,\n                      isMarketingAgreement: true\n                    });\n\n                  case 2:\n                    _this.props.updateUserInfo({\n                      isMarketingAgreement: true\n                    });\n\n                    _this.onClickShare(type);\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          })),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true\n        });\n        return;\n      }\n\n      if (type === \"kakao\") {\n        window.Kakao.Link.sendCustom({\n          templateId: 28463,\n          templateArgs: {\n            name: _this.props.userinfo.name,\n            code: _this.state.codeInfo.code\n          },\n          fail: function fail(error) {\n            console.error(error);\n            alert(\"Error while sharing.\");\n          },\n          callback: function callback() {}\n        });\n      } else {\n        // const email = this.props.userinfo.email;\n        window.FB.ui({\n          method: \"share\",\n          href: \"https://wizlab.net/event/1/\".concat(_this.state.codeInfo.code),\n          quote: \"\".concat(_this.props.userinfo.name, \"\\uB2D8\\uC774 \\uC704\\uC988\\uB7A9\\uC73C\\uB85C \\uCD08\\uB300\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4.\\n\\uC704\\uC988\\uB7A9\\uC5D0\\uC11C \\uBC29\\uD0C8\\uCD9C \\uAC8C\\uC784\\uC744 \\uB9CC\\uB4E4\\uBA74, \\uB204\\uAD6C\\uC5D0\\uAC8C\\uB098 \\uBB38\\uD654\\uC0C1\\uD488\\uAD8C5000\\uC6D0\\uC744 \\uB4DC\\uB824\\uC694!\\n\\uCD94\\uCC9C\\uC778 \\uCF54\\uB4DC: \").concat(_this.state.codeInfo && _this.state.codeInfo.code, \"\\nhttps://wizlab.net/event/1/\").concat(_this.state.codeInfo.code)\n        }, function (response) {\n          if (response && !response.error_message) {// TrackingUtil.sendGAEvent(\n            //   {\n            //     category: \"Event\",\n            //     action: \"Event2_Facebook\"\n            //   },\n            //   email\n            // );\n          } else {\n            alert(\"Error while posting.\");\n          }\n        });\n      }\n    };\n\n    _this.onClickLogin = function () {\n      showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: true\n      });\n    };\n\n    _this.onClickEvent1Banner = function () {\n      window.scrollTo(0, 0);\n\n      _this.props.history.push({\n        pathname: \"/event/1\"\n      }); // TrackingUtil.sendGAEvent(\n      //   {\n      //     category: \"Event\",\n      //     action: \"Event2_Move\"\n      //   },\n      //   this.props.userinfo.emaill\n      // );\n\n    };\n\n    _this.state = {\n      codeInfo: undefined,\n      recommendCodes: [],\n      facebook: undefined\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // TrackingUtil.sendPageEvent(\"/event/2\", this.props.userinfo.email);\n      //get my recommend code\n      // if (this.props.userinfo && this.props.userinfo.email) {\n      //   request\n      //     .getRecommendCode({ email: this.props.userinfo.email })\n      //     .then(res => res.json())\n      //     .then(json => {\n      //       if (json.code) {\n      //         this.setState({\n      //           codeInfo: json\n      //         });\n      //       }\n      //     })\n      //     .catch(e => console.error(e));\n      // }\n      //get recommdne code ranking\n      request.getRecommendRanking().then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json) {\n          _this2.setState({\n            recommendCodes: json\n          });\n        }\n      }).catch(function (e) {\n        return console.error(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          codeInfo = _this$state.codeInfo,\n          recommendCodes = _this$state.recommendCodes;\n      return /*#__PURE__*/React.createElement(View, {\n        codeInfo: codeInfo,\n        userinfo: this.props.userinfo,\n        recommendCodes: recommendCodes,\n        onClickShare: this.onClickShare,\n        onClickLogin: this.onClickLogin,\n        onClickEvent1Banner: this.onClickEvent1Banner,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(Container);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Event/Event2/Container.js"],"names":["React","Component","connect","View","userInfoActions","request","showPopUp","SignIn","TwoButton","Container","props","onClickShare","type","userinfo","email","darkmode","isMarketingAgreement","updateUserInfo","window","Kakao","Link","sendCustom","templateId","templateArgs","name","code","state","codeInfo","fail","error","console","alert","callback","FB","ui","method","href","quote","response","error_message","onClickLogin","onClickEvent1Banner","scrollTo","history","push","pathname","undefined","recommendCodes","facebook","getRecommendRanking","then","res","json","setState","catch","e"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\n// import * as TrackingUtil from \"../../../Common/Util/TrackingUtil\";\nimport * as userInfoActions from \"../../../Common/Store/Reducer/UserInfo\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\nimport TwoButton from \"../../../Common/Component/PopUp/TwoButton\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      codeInfo: undefined,\n      recommendCodes: [],\n      facebook: undefined\n    };\n  }\n\n  componentDidMount() {\n    // TrackingUtil.sendPageEvent(\"/event/2\", this.props.userinfo.email);\n    //get my recommend code\n    // if (this.props.userinfo && this.props.userinfo.email) {\n    //   request\n    //     .getRecommendCode({ email: this.props.userinfo.email })\n    //     .then(res => res.json())\n    //     .then(json => {\n    //       if (json.code) {\n    //         this.setState({\n    //           codeInfo: json\n    //         });\n    //       }\n    //     })\n    //     .catch(e => console.error(e));\n    // }\n\n    //get recommdne code ranking\n    request\n      .getRecommendRanking()\n      .then(res => res.json())\n      .then(json => {\n        if (json) {\n          this.setState({\n            recommendCodes: json\n          });\n        }\n      })\n      .catch(e => console.error(e));\n  }\n\n  onClickShare = type => {\n    // TrackingUtil.kakaoPixelEvent(\"event_\" + type);\n    if (!this.props.userinfo.email) {\n      showPopUp(<SignIn />, { darkmode: true });\n      return;\n    }\n    if (!this.props.userinfo.isMarketingAgreement) {\n      showPopUp(\n        <TwoButton\n          title=\"광고성 정보 동의\"\n          subtitle={`본 이벤트는 광고성 정보 동의에 동의한 회원에 한해 참여하실 수 있습니다\\n동의하시겠습니까?`}\n          confirmButtonName=\"동의\"\n          cancelButtonName=\"취소\"\n          confirmAction={async () => {\n            await request.updateUserInfo({\n              email: this.props.userinfo.email,\n              isMarketingAgreement: true\n            });\n            this.props.updateUserInfo({ isMarketingAgreement: true });\n            this.onClickShare(type);\n          }}\n        />,\n        { darkmode: true }\n      );\n\n      return;\n    }\n\n    if (type === \"kakao\") {\n      window.Kakao.Link.sendCustom({\n        templateId: 28463,\n        templateArgs: {\n          name: this.props.userinfo.name,\n          code: this.state.codeInfo.code\n        },\n        fail: function(error) {\n          console.error(error);\n          alert(\"Error while sharing.\");\n        },\n        callback: () => {}\n      });\n    } else {\n      // const email = this.props.userinfo.email;\n      window.FB.ui(\n        {\n          method: \"share\",\n          href: `https://wizlab.net/event/1/${this.state.codeInfo.code}`,\n          quote: `${\n            this.props.userinfo.name\n          }님이 위즈랩으로 초대하셨습니다.\\n위즈랩에서 방탈출 게임을 만들면, 누구에게나 문화상품권5000원을 드려요!\\n추천인 코드: ${this\n            .state.codeInfo &&\n            this.state.codeInfo.code}\\nhttps://wizlab.net/event/1/${\n            this.state.codeInfo.code\n          }`\n        },\n        function(response) {\n          if (response && !response.error_message) {\n            // TrackingUtil.sendGAEvent(\n            //   {\n            //     category: \"Event\",\n            //     action: \"Event2_Facebook\"\n            //   },\n            //   email\n            // );\n          } else {\n            alert(\"Error while posting.\");\n          }\n        }\n      );\n    }\n  };\n\n  onClickLogin = () => {\n    showPopUp(<SignIn />, { darkmode: true });\n  };\n\n  onClickEvent1Banner = () => {\n    window.scrollTo(0, 0);\n    this.props.history.push({ pathname: \"/event/1\" });\n    // TrackingUtil.sendGAEvent(\n    //   {\n    //     category: \"Event\",\n    //     action: \"Event2_Move\"\n    //   },\n    //   this.props.userinfo.emaill\n    // );\n  };\n\n  render() {\n    const { codeInfo, recommendCodes } = this.state;\n\n    return (\n      <View\n        codeInfo={codeInfo}\n        userinfo={this.props.userinfo}\n        recommendCodes={recommendCodes}\n        onClickShare={this.onClickShare}\n        onClickLogin={this.onClickLogin}\n        onClickEvent1Banner={this.onClickEvent1Banner}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({\n    userinfo: state.userinfo\n  }),\n  {\n    updateUserInfo: userInfoActions.updateUserInfo\n  }\n)(Container);\n"]},"metadata":{},"sourceType":"module"}