{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/utils/RndWrapper.js\";\nimport React, { Component } from \"react\";\nimport { Rnd } from \"react-rnd\";\n\nvar RndWrapper =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RndWrapper, _Component);\n\n  function RndWrapper(props) {\n    var _this;\n\n    _classCallCheck(this, RndWrapper);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RndWrapper).call(this, props));\n\n    _this.saveFrame = function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          screenMode = _this$props.screenMode;\n\n      if (id) {\n        var _this$state = _this.state,\n            width = _this$state.width,\n            height = _this$state.height,\n            x = _this$state.x,\n            y = _this$state.y;\n        var frame = {\n          width: width,\n          height: height,\n          x: x,\n          y: y,\n          screenMode: screenMode\n        };\n        localStorage.setItem(id + \"Frame\", JSON.stringify(frame));\n      }\n    };\n\n    _this.resizeView = function () {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight - 32;\n      var _this$state2 = _this.state,\n          x = _this$state2.x,\n          y = _this$state2.y,\n          _this$state2$width = _this$state2.width,\n          width = _this$state2$width === void 0 ? _this.rnd.resizable.size.width : _this$state2$width,\n          _this$state2$height = _this$state2.height,\n          height = _this$state2$height === void 0 ? _this.rnd.resizable.size.height : _this$state2$height;\n      var newX = x;\n      var newY = y;\n\n      if (x + width > windowWidth) {\n        newX = windowWidth - width;\n        if (newX < 0) newX = 0;\n      }\n\n      if (y + height > windowHeight) {\n        newY = windowHeight - height;\n        if (newY < 0) newY = 0;\n      }\n\n      _this.setState({\n        x: newX,\n        y: newY\n      });\n    };\n\n    _this.setRndRef = function (ref) {\n      _this.rnd = ref;\n    };\n\n    _this.onDragStop = function (e, d) {\n      _this.setState({\n        x: d.x,\n        y: d.y\n      });\n    };\n\n    _this.onResize = function (e, direction, ref, delta, position) {\n      _this.setState(function (prev) {\n        return _objectSpread({\n          width: ref.offsetWidth,\n          height: ref.offsetHeight\n        }, position);\n      }, function () {\n        var onResize = _this.props.onResize;\n        if (onResize) onResize(e);\n      });\n    };\n\n    var _frame = JSON.parse(localStorage.getItem(props.id + \"Frame\"));\n\n    if (_frame) {\n      if (props.screenMode) {\n        var screenModeChanged = props.screenMode !== _frame.screenMode;\n        _this.state = _objectSpread({}, _frame, {\n          width: screenModeChanged ? props.defaultWidth : _frame.width,\n          height: screenModeChanged ? props.defaultHeight : _frame.height\n        });\n      } else {\n        _this.state = _objectSpread({}, _frame);\n      }\n    } else {\n      _this.state = {\n        width: props.defaultWidth,\n        height: props.defaultHeight,\n        x: props.defaultX,\n        y: props.defaultY\n      };\n    }\n\n    return _this;\n  }\n\n  _createClass(RndWrapper, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.defaultWidth !== this.props.defaultWidth) {\n        this.setState({\n          width: this.props.defaultWidth\n        });\n      }\n\n      if (prevProps.defaultHeight !== this.props.defaultHeight) {\n        this.setState({\n          height: this.props.defaultHeight\n        });\n      }\n\n      this.saveFrame();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.resizeView);\n      this.resizeView();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.resizeView);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          width = _this$state3.width,\n          height = _this$state3.height,\n          x = _this$state3.x,\n          y = _this$state3.y;\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          style = _this$props2.style,\n          minWidth = _this$props2.minWidth,\n          minHeight = _this$props2.minHeight,\n          lockAspectRatio = _this$props2.lockAspectRatio,\n          lockAspectRatioExtraHeight = _this$props2.lockAspectRatioExtraHeight,\n          enableResizing = _this$props2.enableResizing;\n      return React.createElement(Rnd, {\n        ref: this.setRndRef,\n        size: {\n          width: width,\n          height: height\n        },\n        position: {\n          x: x,\n          y: y\n        },\n        style: style,\n        minWidth: minWidth,\n        minHeight: minHeight,\n        lockAspectRatio: lockAspectRatio,\n        lockAspectRatioExtraHeight: lockAspectRatioExtraHeight,\n        enableResizing: enableResizing,\n        onDragStop: this.onDragStop,\n        onResizeStart: this.onResizeStart,\n        onResize: this.onResize,\n        onResizeStop: this.onResizeStop,\n        dragHandleClassName: \"handle\",\n        bounds: \".Content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, children);\n    }\n  }]);\n\n  return RndWrapper;\n}(Component);\n\nexport { RndWrapper as default };","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/utils/RndWrapper.js"],"names":["React","Component","Rnd","RndWrapper","props","saveFrame","id","screenMode","state","width","height","x","y","frame","localStorage","setItem","JSON","stringify","resizeView","windowWidth","window","innerWidth","windowHeight","innerHeight","rnd","resizable","size","newX","newY","setState","setRndRef","ref","onDragStop","e","d","onResize","direction","delta","position","prev","offsetWidth","offsetHeight","parse","getItem","screenModeChanged","defaultWidth","defaultHeight","defaultX","defaultY","prevProps","addEventListener","removeEventListener","children","style","minWidth","minHeight","lockAspectRatio","lockAspectRatioExtraHeight","enableResizing","onResizeStart","onResizeStop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Rnd } from \"react-rnd\";\n\nexport default class RndWrapper extends Component {\n  constructor(props) {\n    super(props);\n    const frame = JSON.parse(localStorage.getItem(props.id + \"Frame\"));\n    if (frame) {\n      if (props.screenMode) {\n        const screenModeChanged = props.screenMode !== frame.screenMode;\n        this.state = {\n          ...frame,\n          width: screenModeChanged ? props.defaultWidth : frame.width,\n          height: screenModeChanged ? props.defaultHeight : frame.height\n        };\n      } else {\n        this.state = { ...frame };\n      }\n    } else {\n      this.state = {\n        width: props.defaultWidth,\n        height: props.defaultHeight,\n        x: props.defaultX,\n        y: props.defaultY\n      };\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.defaultWidth !== this.props.defaultWidth) {\n      this.setState({ width: this.props.defaultWidth });\n    }\n    if (prevProps.defaultHeight !== this.props.defaultHeight) {\n      this.setState({ height: this.props.defaultHeight });\n    }\n    this.saveFrame();\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeView);\n    this.resizeView();\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeView);\n  }\n\n  saveFrame = () => {\n    const { id, screenMode } = this.props;\n    if (id) {\n      const { width, height, x, y } = this.state;\n      const frame = { width, height, x, y, screenMode };\n      localStorage.setItem(id + \"Frame\", JSON.stringify(frame));\n    }\n  };\n  resizeView = () => {\n    const windowWidth = window.innerWidth;\n    const windowHeight = window.innerHeight - 32;\n    const {\n      x,\n      y,\n      width = this.rnd.resizable.size.width,\n      height = this.rnd.resizable.size.height\n    } = this.state;\n    let newX = x;\n    let newY = y;\n    if (x + width > windowWidth) {\n      newX = windowWidth - width;\n      if (newX < 0) newX = 0;\n    }\n    if (y + height > windowHeight) {\n      newY = windowHeight - height;\n      if (newY < 0) newY = 0;\n    }\n    this.setState({ x: newX, y: newY });\n  };\n\n  setRndRef = ref => {\n    this.rnd = ref;\n  };\n  onDragStop = (e, d) => {\n    this.setState({ x: d.x, y: d.y });\n  };\n  onResize = (e, direction, ref, delta, position) => {\n    this.setState(\n      prev => ({\n        width: ref.offsetWidth,\n        height: ref.offsetHeight,\n        ...position\n      }),\n      () => {\n        const { onResize } = this.props;\n        if (onResize) onResize(e);\n      }\n    );\n  };\n\n  render() {\n    const { width, height, x, y } = this.state;\n    const {\n      children,\n      style,\n      minWidth,\n      minHeight,\n      lockAspectRatio,\n      lockAspectRatioExtraHeight,\n      enableResizing\n    } = this.props;\n    return (\n      <Rnd\n        ref={this.setRndRef}\n        size={{ width, height }}\n        position={{ x, y }}\n        style={style}\n        minWidth={minWidth}\n        minHeight={minHeight}\n        lockAspectRatio={lockAspectRatio}\n        lockAspectRatioExtraHeight={lockAspectRatioExtraHeight}\n        enableResizing={enableResizing}\n        onDragStop={this.onDragStop}\n        onResizeStart={this.onResizeStart}\n        onResize={this.onResize}\n        onResizeStop={this.onResizeStop}\n        dragHandleClassName=\"handle\"\n        bounds=\".Content\"\n      >\n        {children}\n      </Rnd>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}