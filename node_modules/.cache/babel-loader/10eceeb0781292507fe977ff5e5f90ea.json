{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder3D/Component/Api/Container.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport RndWrapper from \"../RndProvider/RndWrapper\";\nimport ApiLibrary from \"../../Util/ApiLibrary3d\";\nimport * as builderActions from \"../../Store/Reducer/builder\";\nimport View from \"./View\";\n\nfunction Container(props) {\n  var rndId = props.rndId,\n      rndOrder = props.rndOrder,\n      bringRndToTop = props.bringRndToTop,\n      setIsApiOn = props.setIsApiOn,\n      isApiOn = props.isApiOn,\n      intl = props.intl;\n\n  var _useState = useState(\"ID_ALL\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedCategory = _useState2[0],\n      setSelectedCategory = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedApi = _useState4[0],\n      setSelectedApi = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchValue = _useState6[0],\n      setSearchValue = _useState6[1];\n\n  var apiList = useRef(_toConsumableArray(ApiLibrary.apiList));\n  useEffect(function () {\n    apiList.current.splice(0, 0, {\n      name: \"ID_ALL\",\n      api: []\n    });\n  }, []);\n  useEffect(function () {\n    if (isApiOn) {\n      bringRndToTop();\n    }\n  }, [isApiOn]);\n\n  var onClickClose = function onClickClose() {\n    setIsApiOn(false);\n  };\n\n  var onCategorySelect = function onCategorySelect(name) {\n    if (name !== selectedCategory) {\n      setSelectedCategory(name);\n      setSelectedApi(undefined);\n    }\n  };\n\n  var onApiSelect = function onApiSelect(name) {\n    if (name === selectedApi) {\n      setSelectedApi(undefined);\n    } else {\n      setSelectedApi(name);\n    }\n  };\n\n  var onChange = function onChange(e) {\n    var value = e.target.value;\n    setSearchValue(value);\n    setSelectedApi(undefined);\n  };\n\n  var getApis = function getApis() {\n    var apiArray = selectedCategory === \"ID_ALL\" ? apiList.current.reduce(function (acc, val) {\n      return acc.concat(val.api.map(function (method) {\n        return _objectSpread({}, method, {\n          menu: val.name\n        });\n      }));\n    }, []) : apiList.current.find(function (item) {\n      return item.name === selectedCategory;\n    }).api.map(function (method) {\n      return _objectSpread({}, method, {\n        menu: selectedCategory\n      });\n    });\n\n    if (searchValue && searchValue !== \"\") {\n      apiArray = apiArray.filter(function (method) {\n        var checkMenu = method.menu.toLowerCase().indexOf(searchValue) > -1;\n        var checkName = method.name.toLowerCase().indexOf(searchValue) > -1;\n        var checkDesc1 = method.tip && method.tip.description && method.tip.description.ko.toLowerCase().indexOf(searchValue) > -1;\n        var checkDesc2 = method.tip && method.tip.description2 && method.tip.description2.ko.toLowerCase().indexOf(searchValue) > -1;\n        return checkMenu || checkName || checkDesc1 || checkDesc2;\n      });\n    }\n\n    apiArray.forEach(function (method, index) {\n      var duplicatedIndex;\n      var duplicated = apiArray.find(function (_method, _index) {\n        duplicatedIndex = _index;\n        return _method.name === method.name && _index !== index;\n      });\n\n      if (duplicated) {\n        apiArray.splice(duplicatedIndex, 1);\n      }\n    });\n    return apiArray;\n  };\n\n  var getRndWrapperConfig = function getRndWrapperConfig() {\n    var rndProvider = document.getElementById(\"editor_3d\");\n    var providerWidth = rndProvider ? rndProvider.offsetWidth : window.innerWidth;\n    var providerHeight = rndProvider ? rndProvider.offsetHeight : window.innerHeight;\n    var defaultWidth = 400;\n    var defaultHeight = 400;\n    var defaultX = (providerWidth - defaultWidth) / 2;\n    var defaultY = (providerHeight - defaultHeight) / 2;\n    var minWidth = 400;\n    var minHeight = 370;\n    return {\n      defaultX: defaultX,\n      defaultY: defaultY,\n      defaultWidth: defaultWidth,\n      defaultHeight: defaultHeight,\n      minWidth: minWidth,\n      minHeight: minHeight\n    };\n  };\n\n  return isApiOn ? /*#__PURE__*/React.createElement(RndWrapper, Object.assign({\n    rndId: rndId,\n    rndOrder: rndOrder,\n    bringRndToTop: bringRndToTop\n  }, getRndWrapperConfig(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(View, {\n    onCategorySelect: onCategorySelect,\n    selectedCategory: selectedCategory,\n    onApiSelect: onApiSelect,\n    selectedApi: selectedApi,\n    formatMessage: intl.formatMessage,\n    apiLibrary: ApiLibrary,\n    apiList: apiList.current,\n    apiItems: getApis(),\n    searchValue: searchValue,\n    onChange: onChange,\n    onClickClose: onClickClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null);\n}\n\nexport default connect(function (state) {\n  return {\n    isApiOn: state.builder.isApiOn\n  };\n}, {\n  setIsApiOn: builderActions.setIsApiOn\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder3D/Component/Api/Container.js"],"names":["React","useState","useEffect","useRef","connect","injectIntl","RndWrapper","ApiLibrary","builderActions","View","Container","props","rndId","rndOrder","bringRndToTop","setIsApiOn","isApiOn","intl","selectedCategory","setSelectedCategory","selectedApi","setSelectedApi","searchValue","setSearchValue","apiList","current","splice","name","api","onClickClose","onCategorySelect","undefined","onApiSelect","onChange","e","value","target","getApis","apiArray","reduce","acc","val","concat","map","method","menu","find","item","filter","checkMenu","toLowerCase","indexOf","checkName","checkDesc1","tip","description","ko","checkDesc2","description2","forEach","index","duplicatedIndex","duplicated","_method","_index","getRndWrapperConfig","rndProvider","document","getElementById","providerWidth","offsetWidth","window","innerWidth","providerHeight","offsetHeight","innerHeight","defaultWidth","defaultHeight","defaultX","defaultY","minWidth","minHeight","formatMessage","state","builder"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport RndWrapper from \"../RndProvider/RndWrapper\";\nimport ApiLibrary from \"../../Util/ApiLibrary3d\";\nimport * as builderActions from \"../../Store/Reducer/builder\";\nimport View from \"./View\";\n\nfunction Container(props) {\n  const { rndId, rndOrder, bringRndToTop, setIsApiOn, isApiOn, intl } = props;\n\n  const [selectedCategory, setSelectedCategory] = useState(\"ID_ALL\");\n  const [selectedApi, setSelectedApi] = useState();\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const apiList = useRef([...ApiLibrary.apiList]);\n\n  useEffect(() => {\n    apiList.current.splice(0, 0, {\n      name: \"ID_ALL\",\n      api: []\n    });\n  }, []);\n\n  useEffect(() => {\n    if (isApiOn) {\n      bringRndToTop();\n    }\n  }, [isApiOn]);\n\n  const onClickClose = () => {\n    setIsApiOn(false);\n  };\n\n  const onCategorySelect = name => {\n    if (name !== selectedCategory) {\n      setSelectedCategory(name);\n      setSelectedApi(undefined);\n    }\n  };\n\n  const onApiSelect = name => {\n    if (name === selectedApi) {\n      setSelectedApi(undefined);\n    } else {\n      setSelectedApi(name);\n    }\n  };\n\n  const onChange = e => {\n    const value = e.target.value;\n    setSearchValue(value);\n    setSelectedApi(undefined);\n  };\n\n  const getApis = () => {\n    let apiArray =\n      selectedCategory === \"ID_ALL\"\n        ? apiList.current.reduce(\n            (acc, val) =>\n              acc.concat(\n                val.api.map(method => ({ ...method, menu: val.name }))\n              ),\n            []\n          )\n        : apiList.current\n            .find(item => item.name === selectedCategory)\n            .api.map(method => ({ ...method, menu: selectedCategory }));\n\n    if (searchValue && searchValue !== \"\") {\n      apiArray = apiArray.filter(method => {\n        const checkMenu = method.menu.toLowerCase().indexOf(searchValue) > -1;\n        const checkName = method.name.toLowerCase().indexOf(searchValue) > -1;\n        const checkDesc1 =\n          method.tip &&\n          method.tip.description &&\n          method.tip.description.ko.toLowerCase().indexOf(searchValue) > -1;\n        const checkDesc2 =\n          method.tip &&\n          method.tip.description2 &&\n          method.tip.description2.ko.toLowerCase().indexOf(searchValue) > -1;\n        return checkMenu || checkName || checkDesc1 || checkDesc2;\n      });\n    }\n\n    apiArray.forEach((method, index) => {\n      let duplicatedIndex;\n      const duplicated = apiArray.find((_method, _index) => {\n        duplicatedIndex = _index;\n        return _method.name === method.name && _index !== index;\n      });\n      if (duplicated) {\n        apiArray.splice(duplicatedIndex, 1);\n      }\n    });\n    return apiArray;\n  };\n\n  const getRndWrapperConfig = () => {\n    const rndProvider = document.getElementById(\"editor_3d\");\n    const providerWidth = rndProvider\n      ? rndProvider.offsetWidth\n      : window.innerWidth;\n    const providerHeight = rndProvider\n      ? rndProvider.offsetHeight\n      : window.innerHeight;\n    const defaultWidth = 400;\n    const defaultHeight = 400;\n    const defaultX = (providerWidth - defaultWidth) / 2;\n    const defaultY = (providerHeight - defaultHeight) / 2;\n    const minWidth = 400;\n    const minHeight = 370;\n    return {\n      defaultX,\n      defaultY,\n      defaultWidth,\n      defaultHeight,\n      minWidth,\n      minHeight\n    };\n  };\n\n  return isApiOn ? (\n    <RndWrapper\n      rndId={rndId}\n      rndOrder={rndOrder}\n      bringRndToTop={bringRndToTop}\n      {...getRndWrapperConfig()}\n    >\n      <View\n        onCategorySelect={onCategorySelect}\n        selectedCategory={selectedCategory}\n        onApiSelect={onApiSelect}\n        selectedApi={selectedApi}\n        formatMessage={intl.formatMessage}\n        apiLibrary={ApiLibrary}\n        apiList={apiList.current}\n        apiItems={getApis()}\n        searchValue={searchValue}\n        onChange={onChange}\n        onClickClose={onClickClose}\n      />\n    </RndWrapper>\n  ) : (\n    <></>\n  );\n}\n\nexport default connect(\n  state => {\n    return { isApiOn: state.builder.isApiOn };\n  },\n  { setIsApiOn: builderActions.setIsApiOn }\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}