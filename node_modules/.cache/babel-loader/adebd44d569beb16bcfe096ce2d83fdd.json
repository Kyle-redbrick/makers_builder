{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OCPCertification/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport \"./index.scss\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport html2canvas from \"html2canvas\";\nimport { OCPGame } from \"../../Util/Constant\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container() {\n    _classCallCheck(this, Container);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Container, [{\n    key: \"printCertificate\",\n    value: function printCertificate() {\n      var html = document.querySelector(\"html\");\n      var printContents = document.querySelector(\".OCPCertification\").innerHTML;\n      var printDiv = document.createElement(\"div\");\n      printDiv.className = \"OCPCertificationContainer\";\n      html.appendChild(printDiv);\n      printDiv.innerHTML = printContents;\n      document.body.style.display = \"none\";\n      document.title = \"온라인코딩파티 with 위즈랩\";\n      window.print();\n      document.body.style.display = \"block\";\n      printDiv.style.display = \"none\";\n      document.title = \"위즈랩\";\n      if (this.props.callback) this.props.callback();\n      showPopUp(null);\n    }\n  }, {\n    key: \"downloadCertificate\",\n    value: function () {\n      var _downloadCertificate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var canvas, imgURL, downloadLink;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return html2canvas(document.querySelector(\".OCPCertification\"), {\n                  scrollX: 0,\n                  scrollY: 0\n                });\n\n              case 2:\n                canvas = _context.sent;\n                imgURL = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n                downloadLink = document.createElement(\"a\"); //TODO 다운로드 파일 타입 이름 변경\n\n                downloadLink.setAttribute(\"download\", \"\\uCF54\\uB529\\uD30C\\uD2F0\\uC778\\uC99D\\uC11C_\".concat(this.props.type === \"escape\" ? \"방탈출\" : this.props.type === \"game\" ? \"게임개발자\" : \"게임개발자 - 블록\", \"_\").concat(this.props.grade, \"_\").concat(this.props.name, \".png\"));\n                downloadLink.setAttribute(\"href\", imgURL);\n                downloadLink.click();\n\n                if (this.props.callback) {\n                  this.props.callback();\n                }\n\n                showPopUp(null);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function downloadCertificate() {\n        return _downloadCertificate.apply(this, arguments);\n      }\n\n      return downloadCertificate;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          name = _this$props.name,\n          organization = _this$props.organization,\n          grade = _this$props.grade,\n          type = _this$props.type;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertification\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"OCPCertificationImg\",\n        src: OCPGame[type].itemInfo[grade].certificationImg,\n        alt: \"certificationImg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationTexts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationTexts_titleWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationTexts_tw-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }\n      }, \"\".concat(OCPGame[type].title, \" \").concat(type === \"game\" ? \"텍스트코딩\" : type === \"block\" ? \"블록코딩\" : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationTexts_tw-missionTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }\n      }, OCPGame[type].itemInfo[grade].title)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationTextOrgName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationText_School\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, organization), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationText_Name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }\n      }, name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationText_Date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      }, moment().format(\"YYYY년 M월 DD일\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationContainerTools\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationContainerTool OCPCertificationPrint\",\n        onClick: function onClick() {\n          return _this.downloadCertificate();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, \"\\uB2E4\\uC6B4\\uB85C\\uB4DC\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"OCPCertificationContainerTool OCPCertificationPrint\",\n        onClick: function onClick() {\n          return _this.printCertificate();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      }, \"\\uC778\\uC1C4\\uD558\\uAE30\")));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n})(Container);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OCPCertification/index.js"],"names":["React","Component","connect","moment","showPopUp","html2canvas","OCPGame","Container","html","document","querySelector","printContents","innerHTML","printDiv","createElement","className","appendChild","body","style","display","title","window","print","props","callback","scrollX","scrollY","canvas","imgURL","toDataURL","replace","downloadLink","setAttribute","type","grade","name","click","organization","itemInfo","certificationImg","format","downloadCertificate","printCertificate","state","email","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport \"./index.scss\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport html2canvas from \"html2canvas\";\nimport { OCPGame } from \"../../Util/Constant\";\n\nclass Container extends Component {\n  printCertificate() {\n    const html = document.querySelector(\"html\");\n    const printContents = document.querySelector(\".OCPCertification\").innerHTML;\n    const printDiv = document.createElement(\"div\");\n    printDiv.className = \"OCPCertificationContainer\";\n    html.appendChild(printDiv);\n    printDiv.innerHTML = printContents;\n    document.body.style.display = \"none\";\n    document.title = \"온라인코딩파티 with 위즈랩\";\n    window.print();\n    document.body.style.display = \"block\";\n    printDiv.style.display = \"none\";\n    document.title = \"위즈랩\";\n    if (this.props.callback) this.props.callback();\n    showPopUp(null);\n  }\n\n  async downloadCertificate() {\n    const canvas = await html2canvas(\n      document.querySelector(\".OCPCertification\"),\n      {\n        scrollX: 0,\n        scrollY: 0\n      }\n    );\n\n    let imgURL = canvas\n      .toDataURL(\"image/png\")\n      .replace(\"image/png\", \"image/octet-stream\");\n    let downloadLink = document.createElement(\"a\");\n    //TODO 다운로드 파일 타입 이름 변경\n    downloadLink.setAttribute(\n      \"download\",\n      `코딩파티인증서_${\n        this.props.type === \"escape\"\n          ? \"방탈출\"\n          : this.props.type === \"game\"\n          ? \"게임개발자\"\n          : \"게임개발자 - 블록\"\n      }_${this.props.grade}_${this.props.name}.png`\n    );\n    downloadLink.setAttribute(\"href\", imgURL);\n    downloadLink.click();\n    if (this.props.callback) {\n      this.props.callback();\n    }\n    showPopUp(null);\n  }\n  render() {\n    const { name, organization, grade, type } = this.props;\n    return (\n      <div className={`OCPCertificationContainer`}>\n        <div className=\"OCPCertification\">\n          <img\n            className=\"OCPCertificationImg\"\n            src={OCPGame[type].itemInfo[grade].certificationImg}\n            alt=\"certificationImg\"\n          />\n          <div className=\"OCPCertificationTexts\">\n            <div className=\"OCPCertificationTexts_titleWrap\">\n              <div className=\"OCPCertificationTexts_tw-title\">\n                {`${OCPGame[type].title} ${\n                  type === \"game\"\n                    ? \"텍스트코딩\"\n                    : type === \"block\"\n                    ? \"블록코딩\"\n                    : \"\"\n                }`}\n              </div>\n              <div className=\"OCPCertificationTexts_tw-missionTitle\">\n                {OCPGame[type].itemInfo[grade].title}\n              </div>\n            </div>\n            <div className=\"OCPCertificationTextOrgName\">\n              <div className=\"OCPCertificationText_School\">{organization}</div>\n              <div className=\"OCPCertificationText_Name\">{name}</div>\n            </div>\n            <div className=\"OCPCertificationText_Date\">\n              {moment().format(\"YYYY년 M월 DD일\")}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"OCPCertificationContainerTools\">\n          <div\n            className=\"OCPCertificationContainerTool OCPCertificationPrint\"\n            onClick={() => this.downloadCertificate()}\n          >\n            다운로드\n          </div>\n\n          <div\n            className=\"OCPCertificationContainerTool OCPCertificationPrint\"\n            onClick={() => this.printCertificate()}\n          >\n            인쇄하기\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(state => ({\n  email: state.userinfo.email\n}))(Container);\n"]},"metadata":{},"sourceType":"module"}