{"ast":null,"code":"import _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _taggedTemplateLiteral from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _this = this,\n    _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/CourseDetail/Components/CommentMore.js\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport DreamReport from \"../../../Common/Component/DreamReport\";\nimport styled from \"@emotion/styled\";\nimport IMAGE from \"./../Constants/Images\";\nvar Self = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 0;\\n  top: 16px;\\n\"])));\nvar More = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 34px;\\n  height: 34px;\\n  border-radius: 17px;\\n  cursor: pointer;\\n\\n  \", \"\\n\"])), function (props) {\n  return props.active && \"background-color: rgba(255, 255, 255, 0.15);\";\n});\nvar Dot = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  width: 4px;\\n  height: 4px;\\n  border-radius: 50%;\\n  margin: 0 2px;\\n  background-color: rgba(255, 255, 255, 0.5);\\n\"])));\nvar MorePopup = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  width: 120px;\\n  padding: 10px;\\n  border-radius: 16px;\\n  background-color: #1c1c1c;\\n  position: absolute;\\n  top: 44px;\\n  right: 0;\\n  display: \", \";\\n  z-index: 10;\\n\"])), function (props) {\n  return props.show ? 'block' : 'none';\n});\nvar PopupItem = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 50px;\\n  border-radius: 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  font-size: 16px;\\n  line-height: 1.5;\\n  color: #fff;\\n  cursor: pointer;\\n\\n  &:hover {\\n    background-color: rgba(255, 255, 255, 0.05);\\n  }\\n\"])));\nvar Icon = styled.img(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  margin-right: 5px;\\n  margin-left: 8px;\\n  width: 34px;\\n\"])));\n\nvar CommentMore = function CommentMore(_ref) {\n  var item = _ref.item,\n      editComment = _ref.editComment,\n      deleteComment = _ref.deleteComment,\n      reportComment = _ref.reportComment,\n      currentIdOnMore = _ref.currentIdOnMore,\n      handleChangeMore = _ref.handleChangeMore,\n      props = _objectWithoutProperties(_ref, [\"item\", \"editComment\", \"deleteComment\", \"reportComment\", \"currentIdOnMore\", \"handleChangeMore\"]);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  useEffect(function () {\n    if (currentIdOnMore !== item.id) {\n      setShow(false);\n    }\n  }, [currentIdOnMore]);\n  var togglePopup = useCallback(function () {\n    if (!show) {\n      handleChangeMore(item.id);\n    }\n\n    setShow(!show);\n  }, [show]);\n  var handleDeleteComment = useCallback(function () {\n    setShow(false);\n    deleteComment();\n  }, []);\n  var handleReportComment = useCallback(function () {\n    setShow(false);\n    showPopUp( /*#__PURE__*/React.createElement(DreamReport, {\n      targetType: \"comment\",\n      targetContentId: item.id,\n      targetUserId: item.user.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }), {\n      darkmode: true,\n      dismissButton: false\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(Self, Object.assign({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(More, {\n    onClick: togglePopup,\n    active: show,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Dot, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Dot, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Dot, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(MorePopup, {\n    show: show,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, item.user && item.user.id === props.userId ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PopupItem, {\n    onClick: editComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    alt: \"\\uC218\\uC815 \\uC544\\uC774\\uCF58\",\n    src: IMAGE.ICON_COMMENT_EDIT,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_COURSE_DETAIL_EDIT\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(PopupItem, {\n    onClick: handleDeleteComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    alt: \"\\uC0AD\\uC81C \\uC544\\uC774\\uCF58\",\n    src: IMAGE.ICON_COMMENT_DELETE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_COURSE_DETAIL_DELETE\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }))) : /*#__PURE__*/React.createElement(PopupItem, {\n    onClick: handleReportComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    alt: \"\\uC2E0\\uACE0 \\uC544\\uC774\\uCF58\",\n    src: IMAGE.ICON_COMMENT_SHARE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"ID_COURSE_DETAIL_REPORT\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default connect(function (state) {\n  return {\n    userId: state.userinfo.id\n  };\n}, {})(CommentMore);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/CourseDetail/Components/CommentMore.js"],"names":["React","useCallback","useEffect","useState","FormattedMessage","connect","showPopUp","DreamReport","styled","IMAGE","Self","div","More","props","active","Dot","MorePopup","show","PopupItem","Icon","img","CommentMore","item","editComment","deleteComment","reportComment","currentIdOnMore","handleChangeMore","setShow","id","togglePopup","handleDeleteComment","handleReportComment","user","darkmode","dismissButton","userId","ICON_COMMENT_EDIT","ICON_COMMENT_DELETE","ICON_COMMENT_SHARE","state","userinfo"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport DreamReport from \"../../../Common/Component/DreamReport\";\nimport styled from \"@emotion/styled\";\n\nimport IMAGE from \"./../Constants/Images\";\n\nconst Self = styled.div`\n  position: absolute;\n  right: 0;\n  top: 16px;\n`;\n\nconst More = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 34px;\n  height: 34px;\n  border-radius: 17px;\n  cursor: pointer;\n\n  ${(props) => props.active && `background-color: rgba(255, 255, 255, 0.15);`}\n`\n\nconst Dot = styled.div`\n  width: 4px;\n  height: 4px;\n  border-radius: 50%;\n  margin: 0 2px;\n  background-color: rgba(255, 255, 255, 0.5);\n`\n\nconst MorePopup = styled.div`\n  width: 120px;\n  padding: 10px;\n  border-radius: 16px;\n  background-color: #1c1c1c;\n  position: absolute;\n  top: 44px;\n  right: 0;\n  display: ${(props) => props.show ? 'block' : 'none'};\n  z-index: 10;\n`\n\nconst PopupItem = styled.div`\n  width: 100%;\n  height: 50px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 16px;\n  line-height: 1.5;\n  color: #fff;\n  cursor: pointer;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.05);\n  }\n`\n\nconst Icon = styled.img`\n  margin-right: 5px;\n  margin-left: 8px;\n  width: 34px;\n`\n\nconst CommentMore = ({ \n  item,\n  editComment,\n  deleteComment,\n  reportComment,\n  currentIdOnMore,\n  handleChangeMore,\n  ...props\n}) => {\n  const [show, setShow] = useState(false);\n\n  useEffect(() => {\n    if (currentIdOnMore !== item.id) {\n      setShow(false);\n    }\n  }, [currentIdOnMore])\n\n  const togglePopup = useCallback(() => {\n    if (!show) {\n      handleChangeMore(item.id);\n    }\n\n    setShow(!show);\n  }, [show]);\n\n  const handleDeleteComment = useCallback(() => {\n    setShow(false);\n    deleteComment();\n  }, []);\n\n  const handleReportComment = useCallback(() => {\n    setShow(false);\n    showPopUp(\n      <DreamReport\n        targetType=\"comment\"\n        targetContentId={item.id}\n        targetUserId={item.user.id}\n      />,\n      { darkmode: true, dismissButton: false }\n    );\n  }, []);\n\n  return (\n    <Self {...props}>\n      <More onClick={togglePopup} active={show}>\n        <Dot />\n        <Dot />\n        <Dot />\n      </More>\n      <MorePopup show={show}>\n        {item.user && item.user.id === props.userId ? (\n          <>\n            <PopupItem onClick={editComment}>\n              <Icon alt=\"수정 아이콘\" src={IMAGE.ICON_COMMENT_EDIT} />\n              <FormattedMessage id=\"ID_COURSE_DETAIL_EDIT\" />\n            </PopupItem>\n            <PopupItem onClick={handleDeleteComment}>\n              <Icon alt=\"삭제 아이콘\" src={IMAGE.ICON_COMMENT_DELETE} />\n              <FormattedMessage id=\"ID_COURSE_DETAIL_DELETE\" />\n            </PopupItem>\n          </>\n        ) : ( \n          <PopupItem onClick={handleReportComment}>\n            <Icon alt=\"신고 아이콘\" src={IMAGE.ICON_COMMENT_SHARE} />\n            <FormattedMessage id=\"ID_COURSE_DETAIL_REPORT\" />\n          </PopupItem>\n        )}\n      </MorePopup>\n    </Self>\n  );\n};\n\nexport default connect(\n  state => ({\n    userId: state.userinfo.id,\n  }),\n  {}\n)(CommentMore);"]},"metadata":{},"sourceType":"module"}