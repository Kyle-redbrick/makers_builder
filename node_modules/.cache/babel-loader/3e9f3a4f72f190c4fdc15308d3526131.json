{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizAppDetail/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"./View\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { URL } from \"../../../Common/Util/Constant\";\nimport generatePID from \"../../Util/PIDGenerator\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport Publish from \"../../../Common/Component/Publish\";\nimport store from \"../../Store\";\nimport PopUp, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\nimport DreamReport from \"../DreamReport\";\nimport \"./index.scss\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.componentWillUnmount = function () {\n      window.removeEventListener(\"resize\", _this.handleRandomProjectCount); //뒷 페이지 스크롤 막기\n\n      var rootElement = document.documentElement;\n      if (rootElement) rootElement.style.overflow = \"initial\";\n    };\n\n    _this.setProject = function (pId) {\n      var email = _this.props.userinfo.email;\n      pId = pId ? pId : _this.props.pId;\n      request.getPublishedProjectV2({\n        pId: pId\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (!json || !json.live) {\n          showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n            title: _this.props.intl.formatMessage({\n              id: \"PLAY_DETAIL_CANNOT_ACCESS\"\n            }),\n            buttonName: _this.props.intl.formatMessage({\n              id: \"ID_WIZLIVE_CLASS_MESSAGE_SUCCESS_OK\"\n            }),\n            buttonAction: function buttonAction() {\n              _this.props.history.replace({\n                pathname: \"/game\"\n              });\n            },\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 13\n            }\n          }), {\n            darkmode: true\n          });\n        } else {\n          json.viewCount += 1;\n\n          _this.setState({\n            project: json,\n            allCommentCount: json.commentCount\n          }, function () {\n            _this.getRandomProjects();\n\n            _this.getCreator();\n\n            _this.setState({\n              isDescFold: _this.state.project.description.length > 180 || _this.state.project.description.split(\"\\n\").length > 5\n            });\n\n            var curElement = document.querySelector(\".wizappDetail__inner\"); //scroll top\n\n            if (curElement) {\n              curElement.scrollTop = 0;\n            }\n          });\n        }\n      }).catch(function (e) {\n        return console.error(e);\n      });\n      request.getPublishedLike({\n        pId: pId,\n        email: email\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.setState({\n          isLiked: json.isLiked\n        });\n      }).catch(function (e) {\n        return console.error(e);\n      });\n      request.updatePublishedProjectsViewCount({\n        pId: pId\n      });\n    };\n\n    _this.getCreator = function () {\n      var project = _this.state.project;\n      request.userProfile({\n        email: project.user.email\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        var creator = json;\n        creator.email = project.user.email;\n\n        _this.setState({\n          creator: creator,\n          subscribeCount: creator.subscribeCount\n        }, function () {\n          var creator = _this.state.creator;\n          request.isSubscribe({\n            email: _this.props.userinfo.email,\n            creatorEmail: creator.email\n          }).then(function (res) {\n            return res.json();\n          }).then(function (json) {\n            var isSubscribe = json.isSubscribe;\n\n            _this.setState({\n              isSubscribed: isSubscribe\n            });\n          });\n        });\n      }).catch(function (e) {\n        return console.error(e);\n      });\n    };\n\n    _this.getRandomProjects = function () {\n      request.getProjectsByType({\n        type: \"random\",\n        limit: 6,\n        offset: 0\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this.setState({\n          randomGames: json\n        });\n      });\n    };\n\n    _this.handleRandomProjectCount = function () {\n      if (window.innerWidth <= 1080 && !_this.state.isMobile) {\n        _this.setState({\n          isMobile: true\n        });\n      }\n\n      if (window.innerWidth > 1080 && _this.state.isMobile) {\n        _this.setState({\n          isMobile: false\n        });\n      }\n    };\n\n    _this.handleClose = function () {\n      _this.props.history.push(_this.props.location.pathname); //뒷 페이지 스크롤 풀기\n\n\n      var rootElement = document.documentElement;\n      if (rootElement) rootElement.style.overflow = \"initial\";\n    };\n\n    _this.handleLikeToggle = function (e) {\n      e.preventDefault();\n\n      if (_this.props.userinfo.email) {\n        var _this$state = _this.state,\n            isLiked = _this$state.isLiked,\n            project = _this$state.project;\n        request.updatePublishedLike({\n          email: _this.props.userinfo.email,\n          pId: _this.props.pId,\n          ownerEmail: project.user.email\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.success) {\n            var likeCount = isLiked ? project.likeCount - 1 : project.likeCount + 1;\n\n            _this.setState({\n              isLiked: !isLiked,\n              project: _objectSpread({}, project, {\n                likeCount: likeCount\n              })\n            });\n          } else {\n            showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n              title: _this.props.intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n              }),\n              buttonName: _this.props.intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n              }),\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 15\n              }\n            }), {\n              darkmode: true\n            });\n          }\n        }).catch(function (e) {\n          return console.error(e);\n        });\n      } else {\n        showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n      }\n    };\n\n    _this.handleSubscribe = function (creatorEmail) {\n      if (_this.lastLikeTime) {\n        if (new Date().getTime() - _this.lastLikeTime < 800) {\n          _this.lastLikeTime = new Date().getTime();\n          showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n            title: _this.props.intl.formatMessage({\n              id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n            }),\n            buttonName: _this.props.intl.formatMessage({\n              id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n            }),\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 11\n            }\n          }), {\n            darkmode: true\n          });\n          return;\n        }\n      }\n\n      _this.lastLikeTime = new Date().getTime();\n      var _this$props = _this.props,\n          userinfo = _this$props.userinfo,\n          intl = _this$props.intl;\n      var params = {\n        creatorEmail: creatorEmail,\n        email: userinfo.email\n      };\n\n      if (!userinfo.email) {\n        showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n        return;\n      }\n\n      if (!_this.state.isSubscribed) {\n        request.addSubscribe(params).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json) {\n            _this.setState({\n              isSubscribed: true,\n              subscribeCount: _this.state.subscribeCount + 1\n            });\n          } else {\n            showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n              title: intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n              }),\n              buttonName: intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n              }),\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 15\n              }\n            }), {\n              darkmode: true\n            });\n          }\n        });\n      } else {\n        request.removeSubscribe(params).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.success) {\n            _this.setState({\n              isSubscribed: false,\n              subscribeCount: _this.state.subscribeCount - 1\n            });\n          } else {\n            showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n              title: intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n              }),\n              buttonName: intl.formatMessage({\n                id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n              }),\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 15\n              }\n            }), {\n              darkmode: true\n            });\n          }\n        });\n      }\n    };\n\n    _this.moveToComment = function () {\n      _this.commentRef.current.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    };\n\n    _this.handleShareProject = function (e) {\n      e.stopPropagation();\n\n      _this.setState({\n        isShareBoxOpen: !_this.state.isShareBoxOpen\n      });\n    };\n\n    _this.handleShareKakao = function (pId) {\n      window.Kakao.Link.sendCustom({\n        templateId: 30669,\n        templateArgs: {\n          path: \"detail/\".concat(pId)\n        },\n        fail: function fail(error) {\n          console.log(error);\n          alert(\"Error while sharing.\");\n        },\n        callback: function callback() {\n          request.checkShareGame({\n            type: \"kakao\"\n          });\n        }\n      });\n    };\n\n    _this.handleShareFB = function (pId) {\n      var url = URL.WIZ_APP + pId;\n      window.FB.ui({\n        method: \"share\",\n        href: url,\n        quote: url\n      }, function (response) {\n        if (response && !response.error_message) {\n          request.checkShareGame({\n            type: \"facebook\"\n          });\n        } else {\n          alert(\"Error while posting.\");\n        }\n      });\n    };\n\n    _this.handleCopyUrl = function (pId) {\n      var url = URL.WIZ_APP + pId;\n      navigator.clipboard.writeText(url);\n\n      _this.setState({\n        copied: true\n      }, function () {\n        setTimeout(function () {\n          _this.setState({\n            copied: false\n          });\n        }, 1500);\n      });\n    };\n\n    _this.handleEditProject = function (e) {\n      var project = _this.state.project;\n      e.preventDefault();\n      showPopUp( /*#__PURE__*/React.createElement(Publish, {\n        pId: project.pId,\n        isDeveloping: false,\n        isBuilder: false,\n        buttonAction: _this.setProject,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 7\n        }\n      }), {\n        store: store,\n        dismissOverlay: false,\n        defaultPadding: false,\n        scrollable: true\n      });\n    };\n\n    _this.handleCopyProject = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var project, _yield$_this$getDevPr, type, params, builderURL, newWindow, formatMessage;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                project = _this.state.project;\n                _context.next = 4;\n                return _this.getDevProject(project.pId);\n\n              case 4:\n                _yield$_this$getDevPr = _context.sent;\n                type = _yield$_this$getDevPr.type;\n\n                if (!_this.props.userinfo.email) {\n                  _context.next = 29;\n                  break;\n                }\n\n                params = _objectSpread({}, project, {\n                  type: type,\n                  email: _this.props.userinfo.email,\n                  pId: generatePID(_this.props.userinfo.email),\n                  targetPID: project.pId\n                });\n                delete params[\"createdAt\"];\n                delete params[\"updatedAt\"];\n                _context.prev = 10;\n                _context.next = 13;\n                return request.postDevelopingProject(params);\n\n              case 13:\n                _context.t0 = type;\n                _context.next = _context.t0 === \"js3d\" ? 16 : 18;\n                break;\n\n              case 16:\n                builderURL = \"/builder3d/\".concat(params.pId);\n                return _context.abrupt(\"break\", 20);\n\n              case 18:\n                builderURL = \"/builder/\".concat(params.pId);\n                return _context.abrupt(\"break\", 20);\n\n              case 20:\n                newWindow = window.open(builderURL, \"_blank\");\n                newWindow.focus();\n                _context.next = 27;\n                break;\n\n              case 24:\n                _context.prev = 24;\n                _context.t1 = _context[\"catch\"](10);\n                console.error(_context.t1);\n\n              case 27:\n                _context.next = 31;\n                break;\n\n              case 29:\n                formatMessage = _this.props.intl.formatMessage;\n                showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n                  title: formatMessage({\n                    id: \"ID_LOGIN_ALERT_TITLE\"\n                  }),\n                  subtitle: formatMessage({\n                    id: \"ID_LOGIN_ALERT_MSG\"\n                  }),\n                  buttonName: formatMessage({\n                    id: \"ID_LOGIN_ALERT_LOGINBTN\"\n                  }),\n                  buttonAction: function buttonAction() {\n                    showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n                      __self: _assertThisInitialized(_this),\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 402,\n                        columnNumber: 23\n                      }\n                    }), {\n                      darkmode: true,\n                      mobileFullscreen: true\n                    });\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 9\n                  }\n                }), {\n                  darkmode: true\n                });\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[10, 24]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleFold = function () {\n      _this.setState({\n        isDescFold: !_this.state.isDescFold\n      });\n    };\n\n    _this.handleProjectCommentCount = function (count) {\n      _this.setState({\n        allCommentCount: count\n      });\n    };\n\n    _this.handleRandomGame = function (pId) {\n      _this.setState({\n        project: undefined,\n        isLiked: undefined,\n        creator: undefined,\n        subscribeCount: undefined,\n        isSubscribed: undefined,\n        randomGames: [],\n        isMobile: window.innerWidth <= 1080,\n        isDescFold: undefined,\n        allCommentCount: 0\n      }, function () {\n        _this.props.history.push(\"?pId=\".concat(pId));\n\n        _this.setProject(pId);\n      });\n    };\n\n    _this.handleReport = function () {\n      if (_this.props.userinfo.email) {\n        showPopUp( /*#__PURE__*/React.createElement(DreamReport, {\n          targetType: \"game\",\n          targetContentId: _this.state.project.pId,\n          targetUserId: _this.state.creator.id,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          mobileFullscreen: false,\n          dismissButton: false\n        });\n      } else {\n        showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 17\n          }\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n      }\n    };\n\n    _this.state = {\n      project: undefined,\n      isLiked: undefined,\n      creator: undefined,\n      subscribeCount: undefined,\n      isSubscribed: undefined,\n      randomGames: [],\n      isMobile: window.innerWidth <= 1080,\n      isDescFold: undefined,\n      allCommentCount: 0,\n      isShareBoxOpen: false\n    };\n    _this.commentRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.pId) {\n        this.handleClose();\n        return;\n      }\n\n      this.setProject();\n      window.addEventListener(\"resize\", this.handleRandomProjectCount); //뒷 페이지 스크롤 막기\n\n      var rootElement = document.documentElement;\n      if (rootElement) rootElement.style.overflow = \"hidden\";\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.pId !== this.props.pId) {\n        this.setProject();\n      }\n    }\n  }, {\n    key: \"getDevProject\",\n    value: function () {\n      var _getDevProject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pId) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return request.getDevelopingProjectInfo({\n                  pId: pId\n                }).then(function (res) {\n                  return res.json();\n                }).catch(function (e) {\n                  return console.error(e);\n                });\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getDevProject(_x2) {\n        return _getDevProject.apply(this, arguments);\n      }\n\n      return getDevProject;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          pId = _this$props2.pId,\n          userinfo = _this$props2.userinfo;\n      var _this$state2 = this.state,\n          project = _this$state2.project,\n          randomGames = _this$state2.randomGames,\n          isLiked = _this$state2.isLiked,\n          creator = _this$state2.creator,\n          isSubscribed = _this$state2.isSubscribed,\n          subscribeCount = _this$state2.subscribeCount,\n          isDescFold = _this$state2.isDescFold,\n          isMobile = _this$state2.isMobile,\n          allCommentCount = _this$state2.allCommentCount,\n          isShareBoxOpen = _this$state2.isShareBoxOpen;\n      var handleClose = this.handleClose,\n          handleLikeToggle = this.handleLikeToggle,\n          handleSubscribe = this.handleSubscribe,\n          commentRef = this.commentRef,\n          moveToComment = this.moveToComment,\n          handleReport = this.handleReport,\n          handleEditProject = this.handleEditProject,\n          handleShareProject = this.handleShareProject,\n          handleCopyProject = this.handleCopyProject,\n          handleFold = this.handleFold,\n          handleProjectCommentCount = this.handleProjectCommentCount,\n          handleRandomGame = this.handleRandomGame,\n          handleShareKakao = this.handleShareKakao,\n          handleShareFB = this.handleShareFB,\n          handleCopyUrl = this.handleCopyUrl;\n\n      if (!project) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(View, {\n        project: project,\n        randomGames: randomGames,\n        handleLikeToggle: handleLikeToggle,\n        handleShareProject: handleShareProject,\n        handleEditProject: handleEditProject,\n        handleCopyProject: handleCopyProject,\n        isLiked: isLiked,\n        isShareBoxOpen: isShareBoxOpen,\n        creator: creator,\n        isSubscribed: isSubscribed,\n        subscribeCount: subscribeCount,\n        handleSubscribe: handleSubscribe,\n        commentRef: commentRef,\n        moveToComment: moveToComment,\n        pId: pId,\n        userinfo: userinfo,\n        handleClose: handleClose,\n        isDescFold: isDescFold,\n        handleFold: handleFold,\n        isMobile: isMobile,\n        handleProjectCommentCount: handleProjectCommentCount,\n        allCommentCount: allCommentCount,\n        handleRandomGame: handleRandomGame,\n        handleReport: handleReport,\n        handleShareKakao: handleShareKakao,\n        handleShareFB: handleShareFB,\n        handleCopyUrl: handleCopyUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(withRouter(injectIntl(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizAppDetail/Container.js"],"names":["React","Component","View","connect","withRouter","injectIntl","URL","generatePID","request","Publish","store","PopUp","showPopUp","SignIn","DreamReport","Container","props","componentWillUnmount","window","removeEventListener","handleRandomProjectCount","rootElement","document","documentElement","style","overflow","setProject","pId","email","userinfo","getPublishedProjectV2","then","res","json","live","intl","formatMessage","id","history","replace","pathname","darkmode","viewCount","setState","project","allCommentCount","commentCount","getRandomProjects","getCreator","isDescFold","state","description","length","split","curElement","querySelector","scrollTop","catch","e","console","error","getPublishedLike","isLiked","updatePublishedProjectsViewCount","userProfile","user","creator","subscribeCount","isSubscribe","creatorEmail","isSubscribed","getProjectsByType","type","limit","offset","randomGames","innerWidth","isMobile","handleClose","push","location","handleLikeToggle","preventDefault","updatePublishedLike","ownerEmail","success","likeCount","mobileFullscreen","handleSubscribe","lastLikeTime","Date","getTime","params","addSubscribe","removeSubscribe","moveToComment","commentRef","current","scrollIntoView","behavior","handleShareProject","stopPropagation","isShareBoxOpen","handleShareKakao","Kakao","Link","sendCustom","templateId","templateArgs","path","fail","log","alert","callback","checkShareGame","handleShareFB","url","WIZ_APP","FB","ui","method","href","quote","response","error_message","handleCopyUrl","navigator","clipboard","writeText","copied","setTimeout","handleEditProject","dismissOverlay","defaultPadding","scrollable","handleCopyProject","getDevProject","targetPID","postDevelopingProject","builderURL","newWindow","open","focus","handleFold","handleProjectCommentCount","count","handleRandomGame","undefined","handleReport","dismissButton","createRef","addEventListener","prevProps","getDevelopingProjectInfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport View from \"./View\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { URL } from \"../../../Common/Util/Constant\";\nimport generatePID from \"../../Util/PIDGenerator\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport Publish from \"../../../Common/Component/Publish\";\nimport store from \"../../Store\";\nimport PopUp, { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\nimport DreamReport from \"../DreamReport\";\nimport \"./index.scss\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project: undefined,\n      isLiked: undefined,\n      creator: undefined,\n      subscribeCount: undefined,\n      isSubscribed: undefined,\n      randomGames: [],\n      isMobile: window.innerWidth <= 1080,\n      isDescFold: undefined,\n      allCommentCount: 0,\n      isShareBoxOpen: false\n    };\n    this.commentRef = React.createRef();\n  }\n\n  componentDidMount() {\n    if (!this.props.pId) {\n      this.handleClose();\n      return;\n    }\n    this.setProject();\n    window.addEventListener(\"resize\", this.handleRandomProjectCount);\n    //뒷 페이지 스크롤 막기\n    const rootElement = document.documentElement;\n    if (rootElement) rootElement.style.overflow = \"hidden\";\n  }\n  componentWillUnmount = () => {\n    window.removeEventListener(\"resize\", this.handleRandomProjectCount);\n    //뒷 페이지 스크롤 막기\n    const rootElement = document.documentElement;\n    if (rootElement) rootElement.style.overflow = \"initial\";\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.pId !== this.props.pId) {\n      this.setProject();\n    }\n  }\n  setProject = pId => {\n    const email = this.props.userinfo.email;\n    pId = pId ? pId : this.props.pId;\n\n    request\n      .getPublishedProjectV2({ pId })\n      .then(res => res.json())\n      .then(json => {\n        if (!json || !json.live) {\n          showPopUp(\n            <PopUp.OneButton\n              title={this.props.intl.formatMessage({\n                id: \"PLAY_DETAIL_CANNOT_ACCESS\"\n              })}\n              buttonName={this.props.intl.formatMessage({\n                id: \"ID_WIZLIVE_CLASS_MESSAGE_SUCCESS_OK\"\n              })}\n              buttonAction={() => {\n                this.props.history.replace({\n                  pathname: \"/game\"\n                });\n              }}\n            />,\n            { darkmode: true }\n          );\n        } else {\n          json.viewCount += 1;\n          this.setState(\n            { project: json, allCommentCount: json.commentCount },\n            () => {\n              this.getRandomProjects();\n              this.getCreator();\n\n              this.setState({\n                isDescFold:\n                  this.state.project.description.length > 180 ||\n                  this.state.project.description.split(\"\\n\").length > 5\n              });\n\n              const curElement = document.querySelector(\".wizappDetail__inner\");\n              //scroll top\n              if (curElement) {\n                curElement.scrollTop = 0;\n              }\n            }\n          );\n        }\n      })\n      .catch(e => console.error(e));\n    request\n      .getPublishedLike({ pId, email })\n      .then(res => res.json())\n      .then(json => this.setState({ isLiked: json.isLiked }))\n      .catch(e => console.error(e));\n\n    request.updatePublishedProjectsViewCount({ pId });\n  };\n  getCreator = () => {\n    const { project } = this.state;\n    request\n      .userProfile({ email: project.user.email })\n      .then(res => res.json())\n      .then(json => {\n        const creator = json;\n        creator.email = project.user.email;\n        this.setState(\n          { creator: creator, subscribeCount: creator.subscribeCount },\n          () => {\n            const { creator } = this.state;\n            request\n              .isSubscribe({\n                email: this.props.userinfo.email,\n                creatorEmail: creator.email\n              })\n              .then(res => res.json())\n              .then(json => {\n                const { isSubscribe } = json;\n                this.setState({ isSubscribed: isSubscribe });\n              });\n          }\n        );\n      })\n      .catch(e => console.error(e));\n  };\n  async getDevProject(pId) {\n    return await request\n      .getDevelopingProjectInfo({ pId })\n      .then(res => res.json())\n      .catch(e => console.error(e));\n  }\n\n  getRandomProjects = () => {\n    request\n      .getProjectsByType({\n        type: \"random\",\n        limit: 6,\n        offset: 0\n      })\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ randomGames: json });\n      });\n  };\n  handleRandomProjectCount = () => {\n    if (window.innerWidth <= 1080 && !this.state.isMobile) {\n      this.setState({ isMobile: true });\n    }\n    if (window.innerWidth > 1080 && this.state.isMobile) {\n      this.setState({ isMobile: false });\n    }\n  };\n  handleClose = () => {\n    this.props.history.push(this.props.location.pathname);\n    //뒷 페이지 스크롤 풀기\n    const rootElement = document.documentElement;\n    if (rootElement) rootElement.style.overflow = \"initial\";\n  };\n\n  handleLikeToggle = e => {\n    e.preventDefault();\n    if (this.props.userinfo.email) {\n      const { isLiked, project } = this.state;\n      request\n        .updatePublishedLike({\n          email: this.props.userinfo.email,\n          pId: this.props.pId,\n          ownerEmail: project.user.email\n        })\n        .then(res => res.json())\n        .then(json => {\n          if (json.success) {\n            const likeCount = isLiked\n              ? project.likeCount - 1\n              : project.likeCount + 1;\n            this.setState({\n              isLiked: !isLiked,\n              project: { ...project, likeCount: likeCount }\n            });\n          } else {\n            showPopUp(\n              <PopUp.OneButton\n                title={this.props.intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n                })}\n                buttonName={this.props.intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n                })}\n              />,\n              { darkmode: true }\n            );\n          }\n        })\n        .catch(e => console.error(e));\n    } else {\n      showPopUp(<SignIn />, {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    }\n  };\n\n  handleSubscribe = creatorEmail => {\n    if (this.lastLikeTime) {\n      if (new Date().getTime() - this.lastLikeTime < 800) {\n        this.lastLikeTime = new Date().getTime();\n        showPopUp(\n          <PopUp.OneButton\n            title={this.props.intl.formatMessage({\n              id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n            })}\n            buttonName={this.props.intl.formatMessage({\n              id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n            })}\n          />,\n          { darkmode: true }\n        );\n        return;\n      }\n    }\n    this.lastLikeTime = new Date().getTime();\n\n    const { userinfo, intl } = this.props;\n    const params = { creatorEmail, email: userinfo.email };\n    if (!userinfo.email) {\n      showPopUp(<SignIn />, {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n      return;\n    }\n    if (!this.state.isSubscribed) {\n      request\n        .addSubscribe(params)\n        .then(res => res.json())\n        .then(json => {\n          if (json) {\n            this.setState({\n              isSubscribed: true,\n              subscribeCount: this.state.subscribeCount + 1\n            });\n          } else {\n            showPopUp(\n              <PopUp.OneButton\n                title={intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n                })}\n                buttonName={intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n                })}\n              />,\n              { darkmode: true }\n            );\n          }\n        });\n    } else {\n      request\n        .removeSubscribe(params)\n        .then(res => res.json())\n        .then(json => {\n          if (json.success) {\n            this.setState({\n              isSubscribed: false,\n              subscribeCount: this.state.subscribeCount - 1\n            });\n          } else {\n            showPopUp(\n              <PopUp.OneButton\n                title={intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_TITLE\"\n                })}\n                buttonName={intl.formatMessage({\n                  id: \"ID_POPUP_WARNING_REPEAT_CLICK_BTN\"\n                })}\n              />,\n              { darkmode: true }\n            );\n          }\n        });\n    }\n  };\n\n  moveToComment = () => {\n    this.commentRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  handleShareProject = (e) => {\n    e.stopPropagation();\n    this.setState({ isShareBoxOpen : !this.state.isShareBoxOpen });\n  }\n\n  handleShareKakao = (pId) => {\n    window.Kakao.Link.sendCustom({\n      templateId: 30669,\n      templateArgs: { path: `detail/${pId}` },\n      fail: function(error) {\n        console.log(error);\n        alert(\"Error while sharing.\");\n      },\n      callback: () => {\n        request.checkShareGame({type: \"kakao\"});\n      }\n    });\n  };\n\n  handleShareFB = (pId) => {\n    const url = URL.WIZ_APP + pId;\n    window.FB.ui(\n      {\n        method: \"share\",\n        href: url,\n        quote: url\n      },\n      function(response) {\n        if (response && !response.error_message) {\n          request.checkShareGame({type: \"facebook\"});\n        } else {\n          alert(\"Error while posting.\");\n        }\n      }\n    );\n  };\n\n  handleCopyUrl = (pId) => {\n    const url = URL.WIZ_APP + pId;\n    navigator.clipboard.writeText(url);\n    this.setState({ copied: true }, () => {\n      setTimeout(() => {\n        this.setState({ copied: false });\n      }, 1500);\n    });\n  };\n\n  handleEditProject = e => {\n    const { project } = this.state;\n    e.preventDefault();\n    showPopUp(\n      <Publish pId={project.pId} isDeveloping={false} isBuilder={false} buttonAction={this.setProject} />,\n      {\n        store,\n        dismissOverlay: false,\n        defaultPadding: false,\n        scrollable: true\n      }\n    );\n  };\n\n  handleCopyProject = async e => {\n    e.preventDefault();\n    const { project } = this.state;\n    const { type } = await this.getDevProject(project.pId);\n\n    if (this.props.userinfo.email) {\n      const params = {\n        ...project,\n        type,\n        email: this.props.userinfo.email,\n        pId: generatePID(this.props.userinfo.email),\n        targetPID: project.pId\n      };\n      delete params[\"createdAt\"];\n      delete params[\"updatedAt\"];\n\n      try {\n        await request.postDevelopingProject(params);\n        let builderURL;\n        switch (type) {\n          case \"js3d\":\n            builderURL = `/builder3d/${params.pId}`;\n            break;\n          default:\n            builderURL = `/builder/${params.pId}`;\n            break;\n        }\n        var newWindow = window.open(builderURL, \"_blank\");\n        newWindow.focus();\n      } catch (e) {\n        console.error(e);\n      }\n    } else {\n      const { formatMessage } = this.props.intl;\n      showPopUp(\n        <PopUp.OneButton\n          title={formatMessage({ id: \"ID_LOGIN_ALERT_TITLE\" })}\n          subtitle={formatMessage({ id: \"ID_LOGIN_ALERT_MSG\" })}\n          buttonName={formatMessage({ id: \"ID_LOGIN_ALERT_LOGINBTN\" })}\n          buttonAction={() => {\n            showPopUp(<SignIn />, {\n              darkmode: true,\n              mobileFullscreen: true\n            });\n          }}\n        />,\n        { darkmode: true }\n      );\n    }\n  };\n  handleFold = () => {\n    this.setState({ isDescFold: !this.state.isDescFold });\n  };\n  handleProjectCommentCount = count => {\n    this.setState({ allCommentCount: count });\n  };\n  handleRandomGame = pId => {\n    this.setState(\n      {\n        project: undefined,\n        isLiked: undefined,\n        creator: undefined,\n        subscribeCount: undefined,\n        isSubscribed: undefined,\n        randomGames: [],\n        isMobile: window.innerWidth <= 1080,\n        isDescFold: undefined,\n        allCommentCount: 0\n      },\n      () => {\n        this.props.history.push(`?pId=${pId}`);\n        this.setProject(pId);\n      }\n    );\n  };\n  handleReport = () => {\n    if (this.props.userinfo.email) {\n      showPopUp(\n        <DreamReport\n          targetType=\"game\"\n          targetContentId={this.state.project.pId}\n          targetUserId={this.state.creator.id}\n        />,\n        {\n          darkmode: true,\n          mobileFullscreen: false,\n          dismissButton: false\n        }\n      );\n    } else {\n      showPopUp(<SignIn />, {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    }\n  };\n\n  render() {\n    const { pId, userinfo } = this.props;\n    const {\n      project,\n      randomGames,\n      isLiked,\n      creator,\n      isSubscribed,\n      subscribeCount,\n      isDescFold,\n      isMobile,\n      allCommentCount,\n      isShareBoxOpen\n    } = this.state;\n    const {\n      handleClose,\n      handleLikeToggle,\n      handleSubscribe,\n      commentRef,\n      moveToComment,\n      handleReport,\n      handleEditProject,\n      handleShareProject,\n      handleCopyProject,\n      handleFold,\n      handleProjectCommentCount,\n      handleRandomGame,\n      handleShareKakao,\n      handleShareFB,\n      handleCopyUrl\n    } = this;\n    if (!project) {\n      return <div />;\n    }\n    return (\n      <View\n        project={project}\n        randomGames={randomGames}\n        handleLikeToggle={handleLikeToggle}\n        handleShareProject={handleShareProject}\n        handleEditProject={handleEditProject}\n        handleCopyProject={handleCopyProject}\n        isLiked={isLiked}\n        isShareBoxOpen={isShareBoxOpen}\n        creator={creator}\n        isSubscribed={isSubscribed}\n        subscribeCount={subscribeCount}\n        handleSubscribe={handleSubscribe}\n        commentRef={commentRef}\n        moveToComment={moveToComment}\n        pId={pId}\n        userinfo={userinfo}\n        handleClose={handleClose}\n        isDescFold={isDescFold}\n        handleFold={handleFold}\n        isMobile={isMobile}\n        handleProjectCommentCount={handleProjectCommentCount}\n        allCommentCount={allCommentCount}\n        handleRandomGame={handleRandomGame}\n        handleReport={handleReport}\n        handleShareKakao={handleShareKakao}\n        handleShareFB={handleShareFB}\n        handleCopyUrl={handleCopyUrl}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    userinfo: state.userinfo\n  }),\n  {}\n)(withRouter(injectIntl(Container)));\n"]},"metadata":{},"sourceType":"module"}