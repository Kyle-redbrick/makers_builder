{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignUp/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport Markdown from \"react-markdown\";\nimport { loadReCaptcha } from \"react-recaptcha-google\";\nimport { ReCaptcha } from \"react-recaptcha-google\";\nimport sha256 from \"../../Util/SHA256\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport { DEFAULT_PROFILE_IMAGES } from \"../../Util/Constant\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport SignIn from \"../SignIn\";\nimport \"./index.scss\";\nimport terms from \"./Agreements/terms\";\nimport privacy from \"./Agreements/privacy\";\nimport advertisement from \"./Agreements/advertisement\";\nimport arrowImg from \"../../../Image/signup_arrow.svg\";\nimport PhoneDropDown from \"../QRPopup/PhoneDropDown\";\n\nvar SignUp = /*#__PURE__*/function (_Component) {\n  _inherits(SignUp, _Component);\n\n  var _super = _createSuper(SignUp);\n\n  function SignUp(props) {\n    var _this;\n\n    _classCallCheck(this, SignUp);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function () {\n      console.log(\"loadReCaptcha!!!!\");\n      loadReCaptcha();\n      TrackingUtil.kakaoPixelPageView(\"signUp\");\n    };\n\n    _this.componentWillUnmount = function () {\n      document.body.classList.toggle(\"body-unsrollable\");\n    };\n\n    _this.checkEmailFormat = function () {\n      var regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return regex.test(_this.state.email);\n    };\n\n    _this.checkPasswordFormat = function () {\n      return _this.state.password.length >= 6;\n    };\n\n    _this.checkPasswordIdentical = function () {\n      return _this.state.password === _this.state.password_re;\n    };\n\n    _this.checkNameFormat = function () {\n      return _this.state.name.length >= 2;\n    };\n\n    _this.checkPhoneFormat = function () {\n      return _this.state.phone.length >= 8;\n    };\n\n    _this.checkSmsCodeFormat = function () {\n      return _this.state.smsCode.length >= 5;\n    };\n\n    _this.onChangeInput = function (e) {\n      var formatMessage = _this.props.intl.formatMessage;\n      var _e$target = e.target,\n          id = _e$target.id,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, id, value), function () {\n        switch (id) {\n          case \"email\":\n            if (_this.checkEmailFormat() || value === \"\") {\n              _this.setState({\n                warning_email: \"\"\n              });\n            } else {\n              _this.setState({\n                warning_email: formatMessage({\n                  id: \"ID_SIGNUP_WARNING_EMAIL_FORMAT\"\n                })\n              });\n            }\n\n            break;\n\n          case \"password\":\n          case \"password_re\":\n            if (_this.checkPasswordFormat()) {\n              if (_this.checkPasswordIdentical() || _this.state.password_re === \"\") {\n                _this.setState({\n                  warning_password: \"\"\n                });\n              } else {\n                _this.setState({\n                  warning_password: formatMessage({\n                    id: \"ID_SIGNUP_WARNING_PW_RE\"\n                  })\n                });\n              }\n            } else if (value === \"\") {\n              _this.setState({\n                warning_password: \"\"\n              });\n            } else {\n              _this.setState({\n                warning_password: formatMessage({\n                  id: \"ID_SIGNUP_WARNING_PW_FORMAT\"\n                })\n              });\n            }\n\n            break;\n\n          case \"name\":\n            if (_this.checkNameFormat() || value === \"\") {\n              _this.setState({\n                warning_name: \"\"\n              });\n            } else {\n              _this.setState({\n                warning_name: formatMessage({\n                  id: \"ID_SIGNUP_WARNING_NAME_FORMAT\"\n                })\n              });\n            }\n\n            break;\n\n          case \"phone\":\n            _this.setState({\n              smsSent: false,\n              smsConfirmed: false,\n              warning_phone: \"\"\n            });\n\n            break;\n\n          case \"smsCode\":\n            _this.setState({\n              warning_phone: \"\"\n            });\n\n            break;\n\n          case \"recommendCode\":\n            _this.setState({\n              warning_recommendCode: \"\",\n              recommendCodeConfirmed: false\n            });\n\n            break;\n\n          default:\n            break;\n        }\n      });\n    };\n\n    _this.onChangeCountryCode = function (countryCode) {\n      _this.setState({\n        countryCode: countryCode,\n        smsSent: false,\n        smsConfirmed: false,\n        warning_phone: \"\"\n      });\n    };\n\n    _this.onClickSmsSend = function (e) {\n      e.preventDefault();\n      var formatMessage = _this.props.intl.formatMessage;\n\n      if (_this.checkPhoneFormat()) {\n        var params = {\n          localNumber: _this.state.phone,\n          countryCode: _this.state.countryCode\n        };\n        request.smsIssue(params).then(function (res) {\n          if (res.status === 409) {\n            _this.setState({\n              warning_phone: formatMessage({\n                id: \"ID_SIGNUP_WARNING_PHONE_SIGNED\"\n              })\n            });\n          } else {\n            _this.setState({\n              warning_phone: \"\",\n              smsSent: true\n            });\n          }\n        });\n      } else {\n        _this.setState({\n          warning_phone: formatMessage({\n            id: \"ID_SIGNUP_WARNING_PHONE_FORMAT\"\n          })\n        });\n      }\n    };\n\n    _this.onClickSmsConfirm = function (e) {\n      e.preventDefault();\n      var formatMessage = _this.props.intl.formatMessage;\n\n      if (_this.state.smsSent) {\n        if (_this.checkSmsCodeFormat()) {\n          var params = {\n            localNumber: _this.state.phone,\n            countryCode: _this.state.countryCode,\n            certcode: _this.state.smsCode\n          };\n          request.smsCheck(params).then(function (res) {\n            if (res.status === 200) {\n              _this.setState({\n                warning_phone: \"\",\n                smsConfirmed: true\n              });\n            } else {\n              _this.setState({\n                warning_phone: formatMessage({\n                  id: \"ID_SIGNUP_WARNING_SMSCODE_UNACCEPTED\"\n                })\n              });\n            }\n          });\n        } else {\n          _this.setState({\n            warning_phone: formatMessage({\n              id: \"ID_SIGNUP_WARNING_SMSCODE_FORMAT\"\n            })\n          });\n        }\n      } else {\n        _this.setState({\n          warning_phone: formatMessage({\n            id: \"ID_SIGNUP_WARNING_SMSCODE_UNSENT\"\n          })\n        });\n      }\n    };\n\n    _this.onClickRecommendCodeConfirm = function (e) {\n      if (e) e.preventDefault();\n      var formatMessage = _this.props.intl.formatMessage;\n      var recommendCode = _this.state.recommendCode;\n      request.checkRecommendCode({\n        recommendCode: recommendCode\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json && json.code) {\n          _this.setState({\n            warning_recommendCode: \"\",\n            recommendCodeConfirmed: true\n          });\n        } else {\n          _this.setState({\n            warning_recommendCode: formatMessage({\n              id: \"ID_SIGNUP_WARNING_RECOMMEND\"\n            }),\n            recommendCodeConfirmed: false\n          });\n        }\n      }).catch(function (e) {\n        console.error(e);\n\n        _this.setState({\n          warning_recommendCode: formatMessage({\n            id: \"ID_SIGNUP_WARNING_RECOMMEND\"\n          }),\n          recommendCodeConfirmed: false\n        });\n      });\n    };\n\n    _this.onClickAgree = function (id) {\n      var _this$setState2;\n\n      var dismissButton = document.getElementById(\"popup_dismissbtn\");\n      if (dismissButton) dismissButton.hidden = false;\n\n      _this.setState((_this$setState2 = {}, _defineProperty(_this$setState2, id, true), _defineProperty(_this$setState2, \"warning_agreement\", \"\"), _defineProperty(_this$setState2, \"agreement\", null), _this$setState2));\n    };\n\n    _this.onClickAgreement = function (id) {\n      var _this$setState3;\n\n      var agreed = _this.state[id];\n\n      _this.setState((_this$setState3 = {}, _defineProperty(_this$setState3, id, !agreed), _defineProperty(_this$setState3, \"warning_agreement\", \"\"), _defineProperty(_this$setState3, \"agreement\", null), _this$setState3));\n    };\n\n    _this.onClickShowAgreement = function (id) {\n      var agreement = _this.agreements.find(function (agreement) {\n        return agreement.id === id;\n      });\n\n      var contents = document.getElementById(\"popup_contents\");\n      var scrollable = document.getElementById(\"popup_scrollable\");\n      var dismissButton = document.getElementById(\"popup_dismissbtn\");\n      if (contents) contents.scrollTo(0, 0);\n      if (scrollable) scrollable.scrollTo(0, 0);\n      if (dismissButton) dismissButton.hidden = true;\n\n      _this.setState({\n        agreement: agreement\n      });\n    };\n\n    _this.onClickSignUp = function (e) {\n      e.preventDefault();\n      var formatMessage = _this.props.intl.formatMessage;\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password,\n          password_re = _this$state.password_re,\n          name = _this$state.name,\n          countryCode = _this$state.countryCode,\n          phone = _this$state.phone,\n          smsSent = _this$state.smsSent,\n          smsConfirmed = _this$state.smsConfirmed,\n          agreed_terms = _this$state.agreed_terms,\n          agreed_privacy = _this$state.agreed_privacy,\n          agreed_advertisement = _this$state.agreed_advertisement,\n          recaptchaToken = _this$state.recaptchaToken;\n\n      if (email === \"\") {\n        _this.setState({\n          warning_email: formatMessage({\n            id: \"ID_SIGNUP_WARNING_EMAIL_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (password === \"\") {\n        _this.setState({\n          warning_password: formatMessage({\n            id: \"ID_SIGNUP_WARNING_PW_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (password_re === \"\") {\n        _this.setState({\n          warning_password: formatMessage({\n            id: \"ID_SIGNUP_WARNING_PW_RE_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (name === \"\") {\n        _this.setState({\n          warning_name: formatMessage({\n            id: \"ID_SIGNUP_WARNING_NAME_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (!smsSent) {\n        _this.setState({\n          warning_phone: formatMessage({\n            id: \"ID_SIGNUP_WARNING_PHONE_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (!smsConfirmed) {\n        _this.setState({\n          warning_phone: formatMessage({\n            id: \"ID_SIGNUP_WARNING_SMSCODE_EMPTY\"\n          })\n        });\n\n        return;\n      }\n\n      if (!agreed_terms || !agreed_privacy) {\n        _this.setState({\n          warning_agreement: formatMessage({\n            id: \"ID_SIGNUP_WARNING_AGREEMENT\"\n          })\n        });\n\n        return;\n      }\n\n      if (!recaptchaToken) {\n        _this.setState({\n          warning_recaptchaToken: true\n        });\n\n        return;\n      }\n\n      if (_this.checkEmailFormat() && _this.checkPasswordFormat() && _this.checkPasswordIdentical() && _this.checkNameFormat() && _this.checkPhoneFormat() && _this.checkSmsCodeFormat()) {\n        var params = {\n          email: email,\n          password: sha256(password),\n          phone: phone,\n          name: name,\n          countryCode: countryCode,\n          icon: DEFAULT_PROFILE_IMAGES[Math.floor(Math.random() * Math.floor(DEFAULT_PROFILE_IMAGES.length))],\n          isMarketingAgreement: agreed_advertisement,\n          recaptchaToken: recaptchaToken\n        };\n\n        if (_this.state.recommendCodeConfirmed) {\n          params.recommendCode = _this.state.recommendCode;\n        }\n\n        request.signup(params).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.status === 409) {\n            _this.setState({\n              warning_email: formatMessage({\n                id: \"ID_SIGNUP_WARNING_EMAIL_USED\"\n              })\n            });\n          } else if (json.status === 401) {\n            _this.setState({\n              warning_recaptchaToken: true\n            });\n          } else if (json.status === 406) {\n            _this.setState({\n              warning_name: formatMessage({\n                id: \"ID_MYPAGE_NAME_USERNAME_OFFICIAL_WARNING\"\n              })\n            });\n          } else if (json.user) {\n            // TrackingUtil.sendGAEvent(\n            //   { category: \"Signup\", action: \"Signup_Success\" },\n            //   email\n            // );\n            // TrackingUtil.kakaoPixelEvent(\"signup\");\n            TrackingUtil.kakaoPixelPageView(\"completeRegistration\");\n            TrackingUtil.sendGTMEvent(\"Signup_Success\");\n            /*\n            author : john@wizscool.io\n            date : 2020.07.01\n            */\n\n            /* test Case1 */\n            // let bizSpring = document.createElement(\"script\");\n            // bizSpring._TRK_PI = \"RGR\";\n            // bizSpring._TRK_SX = \"\";\n            // bizSpring._TRK_AG = \"\";\n\n            /* test Case2 */\n            // window.setBizSpring();\n\n            request.login({\n              email: email,\n              password: sha256(password)\n            }).then(function (res) {\n              return res.json();\n            }).then(function (json) {\n              // TrackingUtil.sendGAEvent(\n              //   { category: \"Login\", action: \"Login_Success\" },\n              //   email\n              // );\n              TrackingUtil.sendGTMEvent(\"Login_Success\");\n              localStorage.setItem(\"wizToken\", json.token);\n\n              _this.props.updateUserInfo(json.user);\n            });\n            showPopUp(React.createElement(PopUp.OneButton, {\n              title: formatMessage({\n                id: \"ID_SIGNUP_SIGNED_TITLE\"\n              }),\n              buttonName: formatMessage({\n                id: \"ID_SIGNUP_SIGNED_CONFIRM\"\n              }),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 466\n              },\n              __self: this\n            }), {\n              darkmode: !_this.props.isBuilder\n            });\n          }\n        });\n      }\n    };\n\n    _this.onClickSignIn = function (e) {\n      e.preventDefault();\n      showPopUp(React.createElement(SignIn, {\n        isBuilder: _this.props.isBuilder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      }), {\n        store: _this.props.store,\n        darkmode: !_this.props.isBuilder,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.setRecaptchaRef = function (recaptcha) {\n      _this.recaptcha = recaptcha;\n    };\n\n    _this.verifyCallback = function (recaptchaToken) {\n      _this.setState({\n        recaptchaToken: recaptchaToken,\n        warning_recaptchaToken: false\n      });\n    };\n\n    _this.onLoadRecaptcha = function () {\n      if (_this.recaptcha) {\n        _this.recaptcha.reset();\n      }\n    };\n\n    _this.locale = props.intl.locale;\n\n    if (_this.locale === \"zh\") {\n      _this.locale = \"zh-CN\";\n    }\n\n    _this.agreements = [{\n      id: \"agreed_terms\",\n      title: _this.props.intl.formatMessage({\n        id: \"ID_SIGNUP_TERMS_AGREEMENT_TERMSOFUSE\"\n      }),\n      text: terms\n    }, {\n      id: \"agreed_privacy\",\n      title: _this.props.intl.formatMessage({\n        id: \"ID_SIGNUP_TERMS_AGREEMENT_PRIVACY\"\n      }),\n      text: privacy\n    }, {\n      id: \"agreed_advertisement\",\n      title: _this.props.intl.formatMessage({\n        id: \"ID_SIGNUP_TERMS_AGREEMENT_AD\"\n      }),\n      text: advertisement\n    }];\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      password_re: \"\",\n      name: \"\",\n      countryCode: \"+82\",\n      phone: \"\",\n      smsCode: \"\",\n      recommendCode: \"\",\n      recommendCodeEditable: true,\n      recaptchaToken: null,\n      smsSent: false,\n      smsConfirmed: false,\n      warning_email: \"\",\n      warning_password: \"\",\n      warning_name: \"\",\n      warning_phone: \"\",\n      warning_agreement: \"\",\n      warning_recommendCode: \"\",\n      warning_recaptchaToken: false,\n      agreement: null,\n      agreed_terms: false,\n      agreed_privacy: false,\n      agreed_advertisement: false\n    };\n\n    if (_this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n\n    if (sessionStorage.getItem(\"recommendCode\")) {\n      _this.state.recommendCode = sessionStorage.getItem(\"recommendCode\");\n      _this.state.recommendCodeEditable = false;\n\n      _this.onClickRecommendCodeConfirm();\n    }\n\n    return _this;\n  }\n\n  _createClass(SignUp, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var formatMessage = this.props.intl.formatMessage;\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          password_re = _this$state2.password_re,\n          name = _this$state2.name,\n          countryCode = _this$state2.countryCode,\n          phone = _this$state2.phone,\n          smsCode = _this$state2.smsCode,\n          smsSent = _this$state2.smsSent,\n          smsConfirmed = _this$state2.smsConfirmed,\n          warning_email = _this$state2.warning_email,\n          warning_password = _this$state2.warning_password,\n          warning_name = _this$state2.warning_name,\n          warning_phone = _this$state2.warning_phone,\n          warning_agreement = _this$state2.warning_agreement,\n          agreement = _this$state2.agreement,\n          warning_recommendCode = _this$state2.warning_recommendCode;\n      var agreements = this.agreements,\n          onChangeInput = this.onChangeInput,\n          onChangeCountryCode = this.onChangeCountryCode,\n          onClickSmsSend = this.onClickSmsSend,\n          onClickSmsConfirm = this.onClickSmsConfirm,\n          onClickAgree = this.onClickAgree,\n          onClickAgreement = this.onClickAgreement,\n          onClickShowAgreement = this.onClickShowAgreement,\n          onClickSignUp = this.onClickSignUp,\n          onClickSignIn = this.onClickSignIn;\n      return agreement ? React.createElement(\"div\", {\n        className: \"agreement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"agreement_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }, agreement.title), React.createElement(\"div\", {\n        className: \"agreement_text agreement_text-\".concat(agreement.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, React.createElement(Markdown, {\n        source: agreement.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"popup_button\",\n        onClick: function onClick() {\n          onClickAgree(agreement.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_AGREE\"\n      }))) : React.createElement(\"div\", {\n        className: \"signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_title signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_TITLE\"\n      })), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_input_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_EMAIL\"\n      }), React.createElement(\"span\", {\n        className: \"signup_input_title_dot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning_email !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"email\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_EMAIL_PLACEHOLDER\"\n        }),\n        value: email,\n        onChange: onChangeInput,\n        type: \"text\",\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, warning_email), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_input_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_PW\"\n      }), React.createElement(\"span\", {\n        className: \"signup_input_title_dot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning_password !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"password\",\n        type: \"password\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_PW_PLACEHOLDER\"\n        }),\n        value: password,\n        onChange: onChangeInput,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_input_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 598\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_PW_RE\"\n      }), React.createElement(\"span\", {\n        className: \"signup_input_title_dot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning_password !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"password_re\",\n        type: \"password\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_PW_RE_PLACEHOLDER\"\n        }),\n        value: password_re,\n        onChange: onChangeInput,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 602\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      }, warning_password), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_input_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_NAME\"\n      }), React.createElement(\"span\", {\n        className: \"signup_input_title_dot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning_name !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"name\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_NAME_PLACEHOLDER\"\n        }),\n        value: name,\n        onChange: onChangeInput,\n        type: \"text\",\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 634\n        },\n        __self: this\n      }, warning_name), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 637\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_input_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 638\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_PHONE\"\n      }), React.createElement(\"span\", {\n        className: \"signup_input_title_dot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 640\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"div\", {\n        className: \"signup_phone_warpper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, React.createElement(PhoneDropDown, {\n        phoneNum: phone,\n        countryCode: countryCode,\n        handleSelectItem: onChangeCountryCode,\n        handleInputChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"signup_phone \".concat(warning_phone !== \"\" ? \"signup_phone-warning\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"popup_input popup_input-phone \".concat(warning_phone !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"phone\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_PHONE_PLACEHOLDER\"\n        }),\n        value: phone,\n        onChange: onChangeInput,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 655\n        },\n        __self: this\n      }), smsSent ? React.createElement(\"button\", {\n        className: \"popup_button popup_button-phone popup_button-complete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SMSCODE_SENT\"\n      })) : React.createElement(\"button\", {\n        className: \"popup_button popup_button-phone\",\n        onClick: onClickSmsSend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SMSCODE_SEND\"\n      }))))), React.createElement(\"div\", {\n        className: \"signup_input_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 682\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_phone \".concat(warning_phone !== \"\" ? \"signup_phone-warning\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 683\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"popup_input popup_input-smscode \".concat(warning_phone !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"smsCode\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNUP_SMSCODE_PLACEHOLDER\"\n        }),\n        value: smsCode,\n        onChange: onChangeInput,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 688\n        },\n        __self: this\n      }), smsConfirmed ? React.createElement(\"button\", {\n        className: \"popup_button popup_button-smscode popup_button-complete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 701\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SMSCODE_CONFIRMED\"\n      })) : React.createElement(\"button\", {\n        className: \"popup_button popup_button-smscode\",\n        onClick: onClickSmsConfirm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 705\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SMSCODE_CONFIRM\"\n      })))), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 714\n        },\n        __self: this\n      }, warning_phone), React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 753\n        },\n        __self: this\n      }, warning_recommendCode), React.createElement(\"div\", {\n        className: \"signup_agreements signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 756\n        },\n        __self: this\n      }, agreements.map(function (agreement, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"signup_agreement\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 758\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"signup_agreement_box \".concat(warning_agreement !== \"\" && !_this2.state[agreement.id] && agreement.id !== \"agreed_advertisement\" ? \"signup_agreement_box-warning\" : \"\"),\n          onClick: function onClick() {\n            onClickAgreement(agreement.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 759\n          },\n          __self: this\n        }, _this2.state[agreement.id] && React.createElement(\"div\", {\n          className: \"signup_agreement_box_inner\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 772\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"signup_agreement_title\",\n          onClick: function onClick() {\n            onClickAgreement(agreement.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 775\n          },\n          __self: this\n        }, agreement.title), React.createElement(\"img\", {\n          className: \"signup_agreement_arrow\",\n          src: arrowImg,\n          alt: \"arrow\",\n          onClick: function onClick() {\n            onClickShowAgreement(agreement.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 783\n          },\n          __self: this\n        }));\n      })), React.createElement(\"div\", {\n        className: \"popup_warning popup_warning-agreement signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 794\n        },\n        __self: this\n      }, warning_agreement), React.createElement(\"div\", {\n        className: \"signup_msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 798\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_DESC\"\n      })), React.createElement(\"div\", {\n        className: \"signup_recaptch \".concat(this.state.warning_recaptchaToken ? \"signup_recaptch-warning\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 802\n        },\n        __self: this\n      }, React.createElement(ReCaptcha, {\n        size: \"normal\",\n        theme: !this.props.isBuilder ? \"dark\" : \"white\",\n        render: \"explicit\",\n        sitekey: \"6LeEuwweAAAAAHVgkO-9Y7Hr4kwQgoo9uwXgPpS2\",\n        ref: this.setRecaptchaRef,\n        onloadCallback: this.onLoadRecaptcha,\n        verifyCallback: this.verifyCallback,\n        hl: this.locale,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 807\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"popup_button popup_button-singup\",\n        onClick: onClickSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 819\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SIGNUP\"\n      })), React.createElement(\"div\", {\n        className: \"signup_link_wrapper signup__padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 825\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signup_link_desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 826\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SIGNIN_DESC\"\n      })), React.createElement(\"div\", {\n        className: \"signup_link\",\n        onClick: onClickSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 829\n        },\n        __self: this\n      }, formatMessage({\n        id: \"ID_SIGNUP_SIGNIN\"\n      })))));\n    }\n  }]);\n\n  return SignUp;\n}(Component);\n\nexport default connect(undefined, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(injectIntl(SignUp));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignUp/index.js"],"names":["React","Component","connect","injectIntl","Markdown","loadReCaptcha","ReCaptcha","sha256","request","TrackingUtil","DEFAULT_PROFILE_IMAGES","userInfoActions","PopUp","showPopUp","SignIn","terms","privacy","advertisement","PhoneDropDown","SignUp","props","componentDidMount","console","log","kakaoPixelPageView","componentWillUnmount","document","body","classList","toggle","checkEmailFormat","regex","test","state","email","checkPasswordFormat","password","length","checkPasswordIdentical","password_re","checkNameFormat","name","checkPhoneFormat","phone","checkSmsCodeFormat","smsCode","onChangeInput","e","formatMessage","intl","target","id","value","setState","warning_email","warning_password","warning_name","smsSent","smsConfirmed","warning_phone","warning_recommendCode","recommendCodeConfirmed","onChangeCountryCode","countryCode","onClickSmsSend","preventDefault","params","localNumber","smsIssue","then","res","status","onClickSmsConfirm","certcode","smsCheck","onClickRecommendCodeConfirm","recommendCode","checkRecommendCode","json","code","catch","error","onClickAgree","dismissButton","getElementById","hidden","onClickAgreement","agreed","onClickShowAgreement","agreement","agreements","find","contents","scrollable","scrollTo","onClickSignUp","agreed_terms","agreed_privacy","agreed_advertisement","recaptchaToken","warning_agreement","warning_recaptchaToken","icon","Math","floor","random","isMarketingAgreement","signup","user","sendGTMEvent","login","localStorage","setItem","token","updateUserInfo","darkmode","isBuilder","onClickSignIn","store","mobileFullscreen","setRecaptchaRef","recaptcha","verifyCallback","onLoadRecaptcha","reset","locale","title","text","recommendCodeEditable","require","sessionStorage","getItem","handleInputChange","map","index","arrowImg","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport Markdown from \"react-markdown\";\nimport { loadReCaptcha } from \"react-recaptcha-google\";\nimport { ReCaptcha } from \"react-recaptcha-google\";\n\nimport sha256 from \"../../Util/SHA256\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport { DEFAULT_PROFILE_IMAGES } from \"../../Util/Constant\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport SignIn from \"../SignIn\";\nimport \"./index.scss\";\n\nimport terms from \"./Agreements/terms\";\nimport privacy from \"./Agreements/privacy\";\nimport advertisement from \"./Agreements/advertisement\";\nimport arrowImg from \"../../../Image/signup_arrow.svg\";\nimport PhoneDropDown from \"../QRPopup/PhoneDropDown\";\n\nclass SignUp extends Component {\n  constructor(props) {\n    super(props);\n    this.locale = props.intl.locale;\n    if (this.locale === \"zh\") {\n      this.locale = \"zh-CN\";\n    }\n    this.agreements = [\n      {\n        id: \"agreed_terms\",\n        title: this.props.intl.formatMessage({\n          id: \"ID_SIGNUP_TERMS_AGREEMENT_TERMSOFUSE\"\n        }),\n        text: terms\n      },\n      {\n        id: \"agreed_privacy\",\n        title: this.props.intl.formatMessage({\n          id: \"ID_SIGNUP_TERMS_AGREEMENT_PRIVACY\"\n        }),\n        text: privacy\n      },\n      {\n        id: \"agreed_advertisement\",\n        title: this.props.intl.formatMessage({\n          id: \"ID_SIGNUP_TERMS_AGREEMENT_AD\"\n        }),\n        text: advertisement\n      }\n    ];\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      password_re: \"\",\n      name: \"\",\n      countryCode: \"+82\",\n      phone: \"\",\n      smsCode: \"\",\n      recommendCode: \"\",\n      recommendCodeEditable: true,\n      recaptchaToken: null,\n\n      smsSent: false,\n      smsConfirmed: false,\n\n      warning_email: \"\",\n      warning_password: \"\",\n      warning_name: \"\",\n      warning_phone: \"\",\n      warning_agreement: \"\",\n      warning_recommendCode: \"\",\n      warning_recaptchaToken: false,\n\n      agreement: null,\n      agreed_terms: false,\n      agreed_privacy: false,\n      agreed_advertisement: false\n    };\n    if (this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n\n    if (sessionStorage.getItem(\"recommendCode\")) {\n      this.state.recommendCode = sessionStorage.getItem(\"recommendCode\");\n      this.state.recommendCodeEditable = false;\n      this.onClickRecommendCodeConfirm();\n    }\n  }\n\n  componentDidMount = () => {\n    console.log(\"loadReCaptcha!!!!\")\n    loadReCaptcha();\n    TrackingUtil.kakaoPixelPageView(\"signUp\");\n  };\n  componentWillUnmount = () => {\n    document.body.classList.toggle(\"body-unsrollable\");\n  };\n\n  checkEmailFormat = () => {\n    const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return regex.test(this.state.email);\n  };\n  checkPasswordFormat = () => {\n    return this.state.password.length >= 6;\n  };\n  checkPasswordIdentical = () => {\n    return this.state.password === this.state.password_re;\n  };\n  checkNameFormat = () => {\n    return this.state.name.length >= 2;\n  };\n  checkPhoneFormat = () => {\n    return this.state.phone.length >= 8;\n  };\n  checkSmsCodeFormat = () => {\n    return this.state.smsCode.length >= 5;\n  };\n\n  onChangeInput = e => {\n    const { formatMessage } = this.props.intl;\n    const { id, value } = e.target;\n    this.setState({ [id]: value }, () => {\n      switch (id) {\n        case \"email\":\n          if (this.checkEmailFormat() || value === \"\") {\n            this.setState({ warning_email: \"\" });\n          } else {\n            this.setState({\n              warning_email: formatMessage({\n                id: \"ID_SIGNUP_WARNING_EMAIL_FORMAT\"\n              })\n            });\n          }\n          break;\n        case \"password\":\n        case \"password_re\":\n          if (this.checkPasswordFormat()) {\n            if (\n              this.checkPasswordIdentical() ||\n              this.state.password_re === \"\"\n            ) {\n              this.setState({ warning_password: \"\" });\n            } else {\n              this.setState({\n                warning_password: formatMessage({\n                  id: \"ID_SIGNUP_WARNING_PW_RE\"\n                })\n              });\n            }\n          } else if (value === \"\") {\n            this.setState({ warning_password: \"\" });\n          } else {\n            this.setState({\n              warning_password: formatMessage({\n                id: \"ID_SIGNUP_WARNING_PW_FORMAT\"\n              })\n            });\n          }\n          break;\n        case \"name\":\n          if (this.checkNameFormat() || value === \"\") {\n            this.setState({ warning_name: \"\" });\n          } else {\n            this.setState({\n              warning_name: formatMessage({\n                id: \"ID_SIGNUP_WARNING_NAME_FORMAT\"\n              })\n            });\n          }\n          break;\n        case \"phone\":\n          this.setState({\n            smsSent: false,\n            smsConfirmed: false,\n            warning_phone: \"\"\n          });\n          break;\n        case \"smsCode\":\n          this.setState({ warning_phone: \"\" });\n          break;\n        case \"recommendCode\":\n          this.setState({\n            warning_recommendCode: \"\",\n            recommendCodeConfirmed: false\n          });\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  onChangeCountryCode = countryCode => {\n    this.setState({\n      countryCode,\n      smsSent: false,\n      smsConfirmed: false,\n      warning_phone: \"\"\n    });\n  };\n  onClickSmsSend = e => {\n    e.preventDefault();\n    const { formatMessage } = this.props.intl;\n    if (this.checkPhoneFormat()) {\n      const params = {\n        localNumber: this.state.phone,\n        countryCode: this.state.countryCode\n      };\n      request.smsIssue(params).then(res => {\n        if (res.status === 409) {\n          this.setState({\n            warning_phone: formatMessage({\n              id: \"ID_SIGNUP_WARNING_PHONE_SIGNED\"\n            })\n          });\n        } else {\n          this.setState({ warning_phone: \"\", smsSent: true });\n        }\n      });\n    } else {\n      this.setState({\n        warning_phone: formatMessage({ id: \"ID_SIGNUP_WARNING_PHONE_FORMAT\" })\n      });\n    }\n  };\n  onClickSmsConfirm = e => {\n    e.preventDefault();\n    const { formatMessage } = this.props.intl;\n    if (this.state.smsSent) {\n      if (this.checkSmsCodeFormat()) {\n        const params = {\n          localNumber: this.state.phone,\n          countryCode: this.state.countryCode,\n          certcode: this.state.smsCode\n        };\n        request.smsCheck(params).then(res => {\n          if (res.status === 200) {\n            this.setState({ warning_phone: \"\", smsConfirmed: true });\n          } else {\n            this.setState({\n              warning_phone: formatMessage({\n                id: \"ID_SIGNUP_WARNING_SMSCODE_UNACCEPTED\"\n              })\n            });\n          }\n        });\n      } else {\n        this.setState({\n          warning_phone: formatMessage({\n            id: \"ID_SIGNUP_WARNING_SMSCODE_FORMAT\"\n          })\n        });\n      }\n    } else {\n      this.setState({\n        warning_phone: formatMessage({\n          id: \"ID_SIGNUP_WARNING_SMSCODE_UNSENT\"\n        })\n      });\n    }\n  };\n  onClickRecommendCodeConfirm = e => {\n    if (e) e.preventDefault();\n    const { formatMessage } = this.props.intl;\n    const { recommendCode } = this.state;\n    request\n      .checkRecommendCode({ recommendCode })\n      .then(res => res.json())\n      .then(json => {\n        if (json && json.code) {\n          this.setState({\n            warning_recommendCode: \"\",\n            recommendCodeConfirmed: true\n          });\n        } else {\n          this.setState({\n            warning_recommendCode: formatMessage({\n              id: \"ID_SIGNUP_WARNING_RECOMMEND\"\n            }),\n            recommendCodeConfirmed: false\n          });\n        }\n      })\n      .catch(e => {\n        console.error(e);\n        this.setState({\n          warning_recommendCode: formatMessage({\n            id: \"ID_SIGNUP_WARNING_RECOMMEND\"\n          }),\n          recommendCodeConfirmed: false\n        });\n      });\n  };\n  onClickAgree = id => {\n    const dismissButton = document.getElementById(\"popup_dismissbtn\");\n    if (dismissButton) dismissButton.hidden = false;\n    this.setState({ [id]: true, warning_agreement: \"\", agreement: null });\n  };\n  onClickAgreement = id => {\n    const agreed = this.state[id];\n    this.setState({ [id]: !agreed, warning_agreement: \"\", agreement: null });\n  };\n  onClickShowAgreement = id => {\n    const agreement = this.agreements.find(agreement => agreement.id === id);\n    const contents = document.getElementById(\"popup_contents\");\n    const scrollable = document.getElementById(\"popup_scrollable\");\n    const dismissButton = document.getElementById(\"popup_dismissbtn\");\n    if (contents) contents.scrollTo(0, 0);\n    if (scrollable) scrollable.scrollTo(0, 0);\n    if (dismissButton) dismissButton.hidden = true;\n    this.setState({ agreement });\n  };\n\n  onClickSignUp = e => {\n    e.preventDefault();\n    const { formatMessage } = this.props.intl;\n    const {\n      email,\n      password,\n      password_re,\n      name,\n      countryCode,\n      phone,\n      smsSent,\n      smsConfirmed,\n      agreed_terms,\n      agreed_privacy,\n      agreed_advertisement,\n      recaptchaToken\n    } = this.state;\n    if (email === \"\") {\n      this.setState({\n        warning_email: formatMessage({ id: \"ID_SIGNUP_WARNING_EMAIL_EMPTY\" })\n      });\n      return;\n    }\n    if (password === \"\") {\n      this.setState({\n        warning_password: formatMessage({ id: \"ID_SIGNUP_WARNING_PW_EMPTY\" })\n      });\n      return;\n    }\n    if (password_re === \"\") {\n      this.setState({\n        warning_password: formatMessage({\n          id: \"ID_SIGNUP_WARNING_PW_RE_EMPTY\"\n        })\n      });\n      return;\n    }\n    if (name === \"\") {\n      this.setState({\n        warning_name: formatMessage({ id: \"ID_SIGNUP_WARNING_NAME_EMPTY\" })\n      });\n      return;\n    }\n    if (!smsSent) {\n      this.setState({\n        warning_phone: formatMessage({ id: \"ID_SIGNUP_WARNING_PHONE_EMPTY\" })\n      });\n      return;\n    }\n    if (!smsConfirmed) {\n      this.setState({\n        warning_phone: formatMessage({ id: \"ID_SIGNUP_WARNING_SMSCODE_EMPTY\" })\n      });\n      return;\n    }\n    if (!agreed_terms || !agreed_privacy) {\n      this.setState({\n        warning_agreement: formatMessage({ id: \"ID_SIGNUP_WARNING_AGREEMENT\" })\n      });\n      return;\n    }\n    if (!recaptchaToken) {\n      this.setState({\n        warning_recaptchaToken: true\n      });\n      return;\n    }\n\n    if (\n      this.checkEmailFormat() &&\n      this.checkPasswordFormat() &&\n      this.checkPasswordIdentical() &&\n      this.checkNameFormat() &&\n      this.checkPhoneFormat() &&\n      this.checkSmsCodeFormat()\n    ) {\n      let params = {\n        email,\n        password: sha256(password),\n        phone,\n        name,\n        countryCode,\n        icon:\n          DEFAULT_PROFILE_IMAGES[\n            Math.floor(\n              Math.random() * Math.floor(DEFAULT_PROFILE_IMAGES.length)\n            )\n          ],\n        isMarketingAgreement: agreed_advertisement,\n        recaptchaToken\n      };\n      if (this.state.recommendCodeConfirmed) {\n        params.recommendCode = this.state.recommendCode;\n      }\n      request\n        .signup(params)\n        .then(res => res.json())\n        .then(json => {\n          if (json.status === 409) {\n            this.setState({\n              warning_email: formatMessage({\n                id: \"ID_SIGNUP_WARNING_EMAIL_USED\"\n              })\n            });\n          } else if (json.status === 401) {\n            this.setState({\n              warning_recaptchaToken: true\n            });\n          } else if (json.status === 406) {\n            this.setState({\n              warning_name: formatMessage({\n                id: \"ID_MYPAGE_NAME_USERNAME_OFFICIAL_WARNING\"\n              })\n            });\n          } else if (json.user) {\n            // TrackingUtil.sendGAEvent(\n            //   { category: \"Signup\", action: \"Signup_Success\" },\n            //   email\n            // );\n            // TrackingUtil.kakaoPixelEvent(\"signup\");\n            TrackingUtil.kakaoPixelPageView(\"completeRegistration\");\n            TrackingUtil.sendGTMEvent(\"Signup_Success\");\n\n            /*\n            author : john@wizscool.io\n            date : 2020.07.01\n            */\n            /* test Case1 */\n            // let bizSpring = document.createElement(\"script\");\n            // bizSpring._TRK_PI = \"RGR\";\n            // bizSpring._TRK_SX = \"\";\n            // bizSpring._TRK_AG = \"\";\n\n            /* test Case2 */\n            // window.setBizSpring();\n\n            request\n              .login({ email, password: sha256(password) })\n              .then(res => res.json())\n              .then(json => {\n                // TrackingUtil.sendGAEvent(\n                //   { category: \"Login\", action: \"Login_Success\" },\n                //   email\n                // );\n                TrackingUtil.sendGTMEvent(\"Login_Success\");\n                localStorage.setItem(\"wizToken\", json.token);\n                this.props.updateUserInfo(json.user);\n              });\n\n            showPopUp(\n              <PopUp.OneButton\n                title={formatMessage({ id: \"ID_SIGNUP_SIGNED_TITLE\" })}\n                buttonName={formatMessage({ id: \"ID_SIGNUP_SIGNED_CONFIRM\" })}\n              />,\n              { darkmode: !this.props.isBuilder }\n            );\n          }\n        });\n    }\n  };\n  onClickSignIn = e => {\n    e.preventDefault();\n    showPopUp(<SignIn isBuilder={this.props.isBuilder} />, {\n      store: this.props.store,\n      darkmode: !this.props.isBuilder,\n      mobileFullscreen: true\n    });\n  };\n\n  setRecaptchaRef = recaptcha => {\n    this.recaptcha = recaptcha;\n  };\n  verifyCallback = recaptchaToken => {\n    this.setState({\n      recaptchaToken,\n      warning_recaptchaToken: false\n    });\n  };\n  onLoadRecaptcha = () => {\n    if (this.recaptcha) {\n      this.recaptcha.reset();\n    }\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const {\n      email,\n      password,\n      password_re,\n      name,\n      countryCode,\n      phone,\n      smsCode,\n      smsSent,\n      smsConfirmed,\n      warning_email,\n      warning_password,\n      warning_name,\n      warning_phone,\n      warning_agreement,\n      agreement,\n      // recommendCode,\n      // recommendCodeConfirmed,\n      warning_recommendCode\n      // recommendCodeEditable\n    } = this.state;\n    const {\n      agreements,\n      onChangeInput,\n      onChangeCountryCode,\n      onClickSmsSend,\n      onClickSmsConfirm,\n      onClickAgree,\n      onClickAgreement,\n      onClickShowAgreement,\n      onClickSignUp,\n      onClickSignIn\n      // onClickRecommendCodeConfirm\n    } = this;\n\n    return agreement ? (\n      <div className=\"agreement\">\n        <div className=\"agreement_title\">{agreement.title}</div>\n        <div className={`agreement_text agreement_text-${agreement.id}`}>\n          <Markdown source={agreement.text} />\n        </div>\n        <button\n          className=\"popup_button\"\n          onClick={() => {\n            onClickAgree(agreement.id);\n          }}\n        >\n          {formatMessage({ id: \"ID_SIGNUP_AGREE\" })}\n        </button>\n      </div>\n    ) : (\n      <div className=\"signup\">\n        <form autoComplete=\"off\">\n          <div className=\"signup_title signup__padding\">\n            {formatMessage({ id: \"ID_SIGNUP_TITLE\" })}\n          </div>\n\n          {/* ===== 이메일 =================================== */}\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_EMAIL\" })}\n              <span className=\"signup_input_title_dot\">*</span>\n            </div>\n            <input\n              className={`popup_input ${\n                warning_email !== \"\" ? \"popup_input-warning\" : \"\"\n              }`}\n              id=\"email\"\n              placeholder={formatMessage({ id: \"ID_SIGNUP_EMAIL_PLACEHOLDER\" })}\n              value={email}\n              onChange={onChangeInput}\n              type=\"text\"\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"popup_warning\">{warning_email}</div>\n\n          {/* ===== 비밀번호 =================================== */}\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_PW\" })}\n              <span className=\"signup_input_title_dot\">*</span>\n            </div>\n            <input\n              className={`popup_input ${\n                warning_password !== \"\" ? \"popup_input-warning\" : \"\"\n              }`}\n              id=\"password\"\n              type=\"password\"\n              placeholder={formatMessage({ id: \"ID_SIGNUP_PW_PLACEHOLDER\" })}\n              value={password}\n              onChange={onChangeInput}\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_PW_RE\" })}\n              <span className=\"signup_input_title_dot\">*</span>\n            </div>\n            <input\n              className={`popup_input ${\n                warning_password !== \"\" ? \"popup_input-warning\" : \"\"\n              }`}\n              id=\"password_re\"\n              type=\"password\"\n              placeholder={formatMessage({ id: \"ID_SIGNUP_PW_RE_PLACEHOLDER\" })}\n              value={password_re}\n              onChange={onChangeInput}\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"popup_warning\">{warning_password}</div>\n\n          {/* ===== 이름 =================================== */}\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_NAME\" })}\n              <span className=\"signup_input_title_dot\">*</span>\n            </div>\n            <input\n              className={`popup_input ${\n                warning_name !== \"\" ? \"popup_input-warning\" : \"\"\n              }`}\n              id=\"name\"\n              placeholder={formatMessage({ id: \"ID_SIGNUP_NAME_PLACEHOLDER\" })}\n              value={name}\n              onChange={onChangeInput}\n              type=\"text\"\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"popup_warning\">{warning_name}</div>\n\n          {/* ===== 전화번호 =================================== */}\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_PHONE\" })}\n              <span className=\"signup_input_title_dot\">*</span>\n            </div>\n            <div className=\"signup_phone_warpper\">\n              <PhoneDropDown\n                phoneNum={phone}\n                countryCode={countryCode}\n                handleSelectItem={onChangeCountryCode}\n                handleInputChange={this.handleInputChange}\n              />\n\n              <div\n                className={`signup_phone ${\n                  warning_phone !== \"\" ? \"signup_phone-warning\" : \"\"\n                }`}\n              >\n                <input\n                  className={`popup_input popup_input-phone ${\n                    warning_phone !== \"\" ? \"popup_input-warning\" : \"\"\n                  }`}\n                  id=\"phone\"\n                  placeholder={formatMessage({\n                    id: \"ID_SIGNUP_PHONE_PLACEHOLDER\"\n                  })}\n                  value={phone}\n                  onChange={onChangeInput}\n                  autoComplete=\"off\"\n                />\n                {smsSent ? (\n                  <button className=\"popup_button popup_button-phone popup_button-complete\">\n                    {formatMessage({ id: \"ID_SIGNUP_SMSCODE_SENT\" })}\n                  </button>\n                ) : (\n                  <button\n                    className=\"popup_button popup_button-phone\"\n                    onClick={onClickSmsSend}\n                  >\n                    {formatMessage({ id: \"ID_SIGNUP_SMSCODE_SEND\" })}\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"signup_input_wrapper signup__padding\">\n            <div\n              className={`signup_phone ${\n                warning_phone !== \"\" ? \"signup_phone-warning\" : \"\"\n              }`}\n            >\n              <input\n                className={`popup_input popup_input-smscode ${\n                  warning_phone !== \"\" ? \"popup_input-warning\" : \"\"\n                }`}\n                id=\"smsCode\"\n                placeholder={formatMessage({\n                  id: \"ID_SIGNUP_SMSCODE_PLACEHOLDER\"\n                })}\n                value={smsCode}\n                onChange={onChangeInput}\n                autoComplete=\"off\"\n              />\n              {smsConfirmed ? (\n                <button className=\"popup_button popup_button-smscode popup_button-complete\">\n                  {formatMessage({ id: \"ID_SIGNUP_SMSCODE_CONFIRMED\" })}\n                </button>\n              ) : (\n                <button\n                  className=\"popup_button popup_button-smscode\"\n                  onClick={onClickSmsConfirm}\n                >\n                  {formatMessage({ id: \"ID_SIGNUP_SMSCODE_CONFIRM\" })}\n                </button>\n              )}\n            </div>\n          </div>\n          <div className=\"popup_warning\">{warning_phone}</div>\n\n          {/* ===== 추천인코드 =================================== */}\n          {/* <div className=\"signup_input_wrapper signup__padding\">\n            <div className=\"signup_input_title\">\n              {formatMessage({ id: \"ID_SIGNUP_RECOMMEND\" })}\n            </div>\n            <div\n              className={`signup_phone ${\n                warning_recommendCode !== \"\" ? \"signup_phone-warning\" : \"\"\n              }`}\n            >\n              <input\n                readOnly={!recommendCodeEditable}\n                className={`popup_input popup_input-recommendCode ${\n                  warning_recommendCode !== \"\" ? \"popup_input-warning\" : \"\"\n                }`}\n                type=\"text\"\n                id=\"recommendCode\"\n                placeholder={formatMessage({\n                  id: \"ID_SIGNUP_RECOMMEND_PLACEHOLDER\"\n                })}\n                value={recommendCode}\n                onChange={onChangeInput}\n              />\n              {recommendCodeConfirmed ? (\n                <button className=\"popup_button popup_button-recommendCode popup_button-complete\">\n                  {formatMessage({ id: \"ID_SIGNUP_RECOMMEND_CONFIRMED\" })}\n                </button>\n              ) : (\n                <button\n                  className=\"popup_button popup_button-recommendCode\"\n                  onClick={onClickRecommendCodeConfirm}\n                >\n                  {formatMessage({ id: \"ID_SIGNUP_RECOMMEND_CONFIRM\" })}\n                </button>\n              )}\n            </div> */}\n          {/* </div> */}\n          <div className=\"popup_warning\">{warning_recommendCode}</div>\n\n          {/* ===== 이용약관 =================================== */}\n          <div className=\"signup_agreements signup__padding\">\n            {agreements.map((agreement, index) => (\n              <div key={index} className=\"signup_agreement\">\n                <div\n                  className={`signup_agreement_box ${\n                    warning_agreement !== \"\" &&\n                    !this.state[agreement.id] &&\n                    agreement.id !== \"agreed_advertisement\"\n                      ? \"signup_agreement_box-warning\"\n                      : \"\"\n                  }`}\n                  onClick={() => {\n                    onClickAgreement(agreement.id);\n                  }}\n                >\n                  {this.state[agreement.id] && (\n                    <div className=\"signup_agreement_box_inner\" />\n                  )}\n                </div>\n                <div\n                  className=\"signup_agreement_title\"\n                  onClick={() => {\n                    onClickAgreement(agreement.id);\n                  }}\n                >\n                  {agreement.title}\n                </div>\n                <img\n                  className=\"signup_agreement_arrow\"\n                  src={arrowImg}\n                  alt=\"arrow\"\n                  onClick={() => {\n                    onClickShowAgreement(agreement.id);\n                  }}\n                />\n              </div>\n            ))}\n          </div>\n          <div className=\"popup_warning popup_warning-agreement signup__padding\">\n            {warning_agreement}\n          </div>\n\n          <div className=\"signup_msg\">\n            {formatMessage({ id: \"ID_SIGNUP_DESC\" })}\n          </div>\n\n          <div\n            className={`signup_recaptch ${\n              this.state.warning_recaptchaToken ? \"signup_recaptch-warning\" : \"\"\n            }`}\n          >\n            <ReCaptcha\n              size=\"normal\"\n              theme={!this.props.isBuilder ? \"dark\" : \"white\"}\n              render=\"explicit\"\n              sitekey=\"6LeEuwweAAAAAHVgkO-9Y7Hr4kwQgoo9uwXgPpS2\"\n              ref={this.setRecaptchaRef}\n              onloadCallback={this.onLoadRecaptcha}\n              verifyCallback={this.verifyCallback}\n              hl={this.locale}\n            />\n          </div>\n\n          <button\n            className=\"popup_button popup_button-singup\"\n            onClick={onClickSignUp}\n          >\n            {formatMessage({ id: \"ID_SIGNUP_SIGNUP\" })}\n          </button>\n          <div className=\"signup_link_wrapper signup__padding\">\n            <div className=\"signup_link_desc\">\n              {formatMessage({ id: \"ID_SIGNUP_SIGNIN_DESC\" })}\n            </div>\n            <div className=\"signup_link\" onClick={onClickSignIn}>\n              {formatMessage({ id: \"ID_SIGNUP_SIGNIN\" })}\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  undefined,\n  {\n    updateUserInfo: userInfoActions.updateUserInfo\n  }\n)(injectIntl(SignUp));\n"]},"metadata":{},"sourceType":"module"}