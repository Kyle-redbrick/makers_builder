{"ast":null,"code":"import _toConsumableArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizAppMode/Container.js\";\nimport React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Redirect } from \"react-router-dom\";\nimport View from \"./View\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport * as request from \"../../Util/HTTPRequest\"; // import * as TrackingUtil from \"../../Util/TrackingUtil\";\n\nimport \"./index.scss\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.handleMoreBtn = function () {\n      _this.setState({\n        isLoading: true\n      }, function () {\n        _this.requestItems(_this.state.stepSize);\n      });\n    };\n\n    _this.requestItems = function (limit) {\n      var isFirst = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _this$state = _this.state,\n          criterion = _this$state.criterion,\n          offset = _this$state.offset;\n      var newOffset = isFirst ? limit : offset + limit;\n\n      if (criterion === \"challengeRank\") {// return;\n      }\n\n      request.getAppsBy({\n        mode: criterion,\n        offset: offset,\n        limit: limit\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this.setState(function (state) {\n          return {\n            items: [].concat(_toConsumableArray(state.items), _toConsumableArray(json.rows)),\n            totalCnt: json.count,\n            offset: newOffset,\n            isLoading: false\n          };\n        }, function () {\n          var mode = _this.props.match.params.mode;\n\n          if (Number(_this.props.match.params.offset) !== _this.state.offset) {\n            _this.props.history.replace(\"/wizapps/\".concat(mode, \"/\").concat(_this.state.offset));\n          }\n        });\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    };\n\n    var _mode = _this.props.match.params.mode;\n\n    var title, labelForTitle, _criterion;\n\n    switch (_mode) {\n      case \"pop\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_POP_TITLE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18\n          },\n          __self: this\n        });\n        labelForTitle = \"HOT!\";\n        _criterion = \"likeCount\";\n        break;\n\n      case \"new\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_NEW_TITLE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23\n          },\n          __self: this\n        });\n        labelForTitle = \"NEW!\";\n        _criterion = \"editedAt\";\n        break;\n\n      case \"rnd\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_RANDOM_TITLE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        });\n        _criterion = \"random\";\n        break;\n\n      case \"recommend\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_RECOMMEND_TITLE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        });\n        _criterion = \"recommend\";\n        break;\n\n      case \"view\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_VIEW_TITLE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        });\n        _criterion = \"viewCount\";\n        break;\n\n      case \"challengeRank\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_CHALLENGE_RANK\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        });\n        _criterion = \"challengeRank\";\n        break;\n\n      case \"challengeNew\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_CHALLENGE_NEW\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        });\n        _criterion = \"challengeNew\";\n        break;\n\n      case \"ssafyRank\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_SSAFY_RANK\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        });\n        _criterion = \"ssafyRank\";\n        break;\n\n      case \"ssafyNew\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_SSAFY_NEW\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        });\n        _criterion = \"ssafyNew\";\n        break;\n\n      case \"jjRank\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_JJ_RANK\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        });\n        _criterion = \"jjRank\";\n        break;\n\n      case \"jjNew\":\n        title = React.createElement(FormattedMessage, {\n          id: \"ID_WIZAPP_MODE_JJ_NEW\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        });\n        _criterion = \"jjNew\";\n        break;\n\n      default:\n        break;\n    }\n\n    _this.state = {\n      title: title,\n      labelForTitle: labelForTitle,\n      criterion: _criterion,\n      items: [],\n      totalCnt: null,\n      offset: 0,\n      stepSize: 20,\n      isLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // TrackingUtil.sendPageEvent(this.props.location.pathname, this.props.email);\n      //const { mode } = this.props.match.params;\n      // init list\n      var stepSize = this.state.stepSize;\n      var firstLimit = Number(this.props.match.params.offset);\n\n      if (!firstLimit || firstLimit < stepSize) {\n        // only if firstly access to this page,\n        firstLimit = stepSize;\n        window.scrollTo(0, 0);\n      }\n\n      this.requestItems(firstLimit, true);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          labelForTitle = _this$state2.labelForTitle,\n          items = _this$state2.items,\n          isLoading = _this$state2.isLoading;\n      var mode = this.props.match.params.mode;\n      var isAll;\n      var cand = [\"pop\", \"new\", \"rnd\", \"recommend\", \"view\", \"challengeRank\", \"challengeNew\", \"ssafyRank\", \"ssafyNew\", \"jjRank\", \"jjNew\"];\n\n      if (cand.indexOf(mode) < 0) {\n        return React.createElement(Redirect, {\n          to: \"/game\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        });\n      }\n\n      if (mode === \"pop\") {\n        isAll = true;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"Page--WizAppMode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(View, {\n        title: title,\n        labelForTitle: labelForTitle,\n        mode: mode,\n        items: items,\n        isAll: isAll,\n        isLoading: isLoading,\n        handleMoreBtn: this.handleMoreBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n})(withRouter(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/WizAppMode/Container.js"],"names":["React","Component","FormattedMessage","Redirect","View","withRouter","connect","request","Container","props","handleMoreBtn","setState","isLoading","requestItems","state","stepSize","limit","isFirst","criterion","offset","newOffset","getAppsBy","mode","then","res","json","items","rows","totalCnt","count","match","params","Number","history","replace","catch","err","console","error","title","labelForTitle","firstLimit","window","scrollTo","isAll","cand","indexOf","email","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Redirect } from \"react-router-dom\";\nimport View from \"./View\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport * as request from \"../../Util/HTTPRequest\";\n// import * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport \"./index.scss\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    const { mode } = this.props.match.params;\n    let title, labelForTitle, criterion;\n    switch (mode) {\n      case \"pop\":\n        title = <FormattedMessage id=\"ID_WIZAPP_POP_TITLE\" />;\n        labelForTitle = \"HOT!\";\n        criterion = \"likeCount\";\n        break;\n      case \"new\":\n        title = <FormattedMessage id=\"ID_WIZAPP_NEW_TITLE\" />;\n        labelForTitle = \"NEW!\";\n        criterion = \"editedAt\";\n        break;\n      case \"rnd\":\n        title = <FormattedMessage id=\"ID_WIZAPP_RANDOM_TITLE\" />;\n        criterion = \"random\";\n        break;\n      case \"recommend\":\n        title = <FormattedMessage id=\"ID_WIZAPP_RECOMMEND_TITLE\" />;\n        criterion = \"recommend\";\n        break;\n      case \"view\":\n        title = <FormattedMessage id=\"ID_WIZAPP_VIEW_TITLE\" />;\n        criterion = \"viewCount\";\n        break;\n      case \"challengeRank\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_CHALLENGE_RANK\" />;\n        criterion = \"challengeRank\";\n        break;\n      case \"challengeNew\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_CHALLENGE_NEW\" />;\n        criterion = \"challengeNew\";\n        break;\n      case \"ssafyRank\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_SSAFY_RANK\" />;\n        criterion = \"ssafyRank\";\n        break;\n      case \"ssafyNew\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_SSAFY_NEW\" />;\n        criterion = \"ssafyNew\";\n        break;\n      case \"jjRank\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_JJ_RANK\" />;\n        criterion = \"jjRank\";\n        break;\n      case \"jjNew\":\n        title = <FormattedMessage id=\"ID_WIZAPP_MODE_JJ_NEW\" />;\n        criterion = \"jjNew\";\n        break;\n      default:\n        break;\n    }\n\n    this.state = {\n      title,\n      labelForTitle,\n      criterion,\n      items: [],\n      totalCnt: null,\n      offset: 0,\n      stepSize: 20,\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    // TrackingUtil.sendPageEvent(this.props.location.pathname, this.props.email);\n    //const { mode } = this.props.match.params;\n\n    // init list\n    const { stepSize } = this.state;\n    let firstLimit = Number(this.props.match.params.offset);\n    if (!firstLimit || firstLimit < stepSize) {\n      // only if firstly access to this page,\n      firstLimit = stepSize;\n      window.scrollTo(0, 0);\n    }\n\n    this.requestItems(firstLimit, true);\n  }\n\n  handleMoreBtn = () => {\n    this.setState(\n      {\n        isLoading: true\n      },\n      () => {\n        this.requestItems(this.state.stepSize);\n      }\n    );\n  };\n\n  requestItems = (limit, isFirst = false) => {\n    const { criterion, offset } = this.state;\n    const newOffset = isFirst ? limit : offset + limit;\n    if (criterion === \"challengeRank\") {\n      // return;\n    }\n    request\n      .getAppsBy({ mode: criterion, offset, limit })\n      .then(res => res.json())\n      .then(json => {\n        this.setState(\n          state => ({\n            items: [...state.items, ...json.rows],\n            totalCnt: json.count,\n            offset: newOffset,\n            isLoading: false\n          }),\n          () => {\n            const { mode } = this.props.match.params;\n\n            if (Number(this.props.match.params.offset) !== this.state.offset) {\n              this.props.history.replace(\n                `/wizapps/${mode}/${this.state.offset}`\n              );\n            }\n          }\n        );\n      })\n      .catch(err => console.error(err));\n  };\n\n  render() {\n    const {\n      title,\n      labelForTitle,\n      items,\n      //totalCnt,\n      //offset,\n      isLoading\n    } = this.state;\n    const { mode } = this.props.match.params;\n    let isAll;\n\n    const cand = [\n      \"pop\",\n      \"new\",\n      \"rnd\",\n      \"recommend\",\n      \"view\",\n      \"challengeRank\",\n      \"challengeNew\",\n      \"ssafyRank\",\n      \"ssafyNew\",\n      \"jjRank\",\n      \"jjNew\"\n    ];\n    if (cand.indexOf(mode) < 0) {\n      return <Redirect to=\"/game\" />;\n    }\n\n    if (mode === \"pop\") {\n      isAll = true;\n    }\n\n    return (\n      <div className=\"Page--WizAppMode\">\n        <View\n          title={title}\n          labelForTitle={labelForTitle}\n          mode={mode}\n          items={items}\n          isAll={isAll}\n          isLoading={isLoading}\n          handleMoreBtn={this.handleMoreBtn}\n        />\n      </div>\n    );\n  }\n}\n\nexport default connect(state => ({ email: state.userinfo.email }))(\n  withRouter(Container)\n);\n"]},"metadata":{},"sourceType":"module"}