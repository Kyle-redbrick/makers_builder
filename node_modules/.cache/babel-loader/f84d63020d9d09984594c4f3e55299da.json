{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Live/Component/DrawingBoard/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as webrtcActions from \"../../../../Store/Reducer/webrtc\";\nimport { fabric } from \"fabric\";\nimport \"./index.scss\";\n\nvar DrawingBoard = /*#__PURE__*/function (_Component) {\n  _inherits(DrawingBoard, _Component);\n\n  var _super = _createSuper(DrawingBoard);\n\n  function DrawingBoard() {\n    var _this;\n\n    _classCallCheck(this, DrawingBoard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.presetColors = [\"#20a1ec\", \"#ffd185\", \"#77d354\", \"#ffba5c\", \"#23d8af\", \"#f96063\", \"#916cc5\", \"#3e4852\", \"#969fa9\", \"#ffffff\"];\n\n    _this.onKeyDown = function (e) {\n      return e.key === \"Escape\" && _this.props.handleClose(false);\n    };\n\n    _this.onMouseUp = function () {\n      var objects = _this.canvas.getObjects();\n\n      var object = objects[objects.length - 1];\n\n      _this.props.addDrawing(object.toObject());\n    };\n\n    _this.handleChangeColor = function (color) {\n      _this.canvas.freeDrawingBrush.color = color;\n    };\n\n    return _this;\n  }\n\n  _createClass(DrawingBoard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.initFabric();\n      window.addEventListener(\"keydown\", function (e) {\n        return _this2.onKeyDown(e);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      window.removeEventListener(\"keydown\", function (e) {\n        return _this3.onKeyDown(e);\n      });\n    }\n  }, {\n    key: \"initFabric\",\n    value: function initFabric() {\n      this.canvas = new fabric.Canvas(\"drawCanvas\");\n      this.canvas.setWidth(1280);\n      this.canvas.setHeight(720);\n      this.canvas.setDimensions({\n        width: \"100%\",\n        height: \"100%\"\n      }, {\n        cssOnly: true\n      });\n      this.canvas.selection = false;\n      this.canvas.isDrawingMode = true;\n      this.canvas.freeDrawingBrush.color = \"#FFFFFF\";\n      this.canvas.freeDrawingBrush.width = 3;\n      this.canvas.on(\"mouse:up\", this.onMouseUp);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this4 = this;\n\n      if (nextProps.webrtcDrawing.length !== this.canvas.getObjects().length) {\n        var obj = nextProps.webrtcDrawing[nextProps.webrtcDrawing.length - 1];\n        new fabric.Path.fromObject(obj, function (path, callback) {\n          _this4.canvas.add(path);\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(\"div\", {\n        className: \"DrawingBoard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"canvas\", {\n        id: \"drawCanvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"CanvasContainer__colorlist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, this.presetColors.map(function (color, index) {\n        return React.createElement(\"li\", {\n          key: index,\n          onClick: function onClick(e) {\n            _this5.handleChangeColor(color);\n          },\n          style: {\n            backgroundColor: color\n          },\n          className: \"CanvasContainer__colors\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        });\n      })), React.createElement(\"p\", {\n        className: \"closeBtn\",\n        onClick: function onClick() {\n          return _this5.props.handleClose(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DrawingBoard;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    webrtcDrawing: state.webrtc.drawing\n  };\n}, {\n  addDrawing: webrtcActions.addDrawing\n})(DrawingBoard);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Live/Component/DrawingBoard/index.js"],"names":["React","Component","connect","webrtcActions","fabric","DrawingBoard","presetColors","onKeyDown","e","key","props","handleClose","onMouseUp","objects","canvas","getObjects","object","length","addDrawing","toObject","handleChangeColor","color","freeDrawingBrush","initFabric","window","addEventListener","removeEventListener","Canvas","setWidth","setHeight","setDimensions","width","height","cssOnly","selection","isDrawingMode","on","nextProps","nextState","webrtcDrawing","obj","Path","fromObject","path","callback","add","map","index","backgroundColor","state","webrtc","drawing"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as webrtcActions from \"../../../../Store/Reducer/webrtc\";\nimport { fabric } from \"fabric\";\nimport \"./index.scss\";\n\nclass DrawingBoard extends Component {\n  presetColors = [\n    \"#20a1ec\",\n    \"#ffd185\",\n    \"#77d354\",\n    \"#ffba5c\",\n    \"#23d8af\",\n    \"#f96063\",\n    \"#916cc5\",\n    \"#3e4852\",\n    \"#969fa9\",\n    \"#ffffff\"\n  ];\n\n  componentDidMount() {\n    this.initFabric();\n    window.addEventListener(\"keydown\", e => this.onKeyDown(e));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", e => this.onKeyDown(e));\n  }\n\n  onKeyDown = e => e.key === \"Escape\" && this.props.handleClose(false);\n\n  initFabric() {\n    this.canvas = new fabric.Canvas(\"drawCanvas\");\n    this.canvas.setWidth(1280);\n    this.canvas.setHeight(720);\n    this.canvas.setDimensions(\n      { width: \"100%\", height: \"100%\" },\n      { cssOnly: true }\n    );\n    this.canvas.selection = false;\n    this.canvas.isDrawingMode = true;\n    this.canvas.freeDrawingBrush.color = \"#FFFFFF\";\n    this.canvas.freeDrawingBrush.width = 3;\n\n    this.canvas.on(\"mouse:up\", this.onMouseUp);\n  }\n\n  onMouseUp = () => {\n    const objects = this.canvas.getObjects();\n    const object = objects[objects.length - 1];\n    this.props.addDrawing(object.toObject());\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.webrtcDrawing.length !== this.canvas.getObjects().length) {\n      const obj = nextProps.webrtcDrawing[nextProps.webrtcDrawing.length - 1];\n      new fabric.Path.fromObject(obj, (path, callback) => {\n        this.canvas.add(path);\n      });\n    }\n    return true;\n  }\n\n  handleChangeColor = color => {\n    this.canvas.freeDrawingBrush.color = color;\n  };\n\n  render() {\n    return (\n      <div className=\"DrawingBoard\">\n        <canvas id=\"drawCanvas\" />\n        <ul className=\"CanvasContainer__colorlist\">\n          {this.presetColors.map((color, index) => {\n            return (\n              <li\n                key={index}\n                onClick={e => {\n                  this.handleChangeColor(color);\n                }}\n                style={{ backgroundColor: color }}\n                className=\"CanvasContainer__colors\"\n              />\n            );\n          })}\n        </ul>\n        <p className=\"closeBtn\" onClick={() => this.props.handleClose(false)} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    webrtcDrawing: state.webrtc.drawing\n  }),\n  { addDrawing: webrtcActions.addDrawing }\n)(DrawingBoard);\n"]},"metadata":{},"sourceType":"module"}