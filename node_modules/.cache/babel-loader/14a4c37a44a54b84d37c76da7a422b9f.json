{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/MyCodingStyle/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { URL } from \"../../Common/Util/Constant\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../Common/Component/PopUp\";\nimport View from \"./View\";\nimport myCodingStyle from \"./myCodingStyle\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(_props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, _props);\n\n    _this.onClickStart = function () {\n      _this.start();\n    };\n\n    _this.onClickChoice = function (choiceNum) {\n      _this.updateChoiceFor(choiceNum);\n\n      _this.setNext();\n    };\n\n    _this.onClickBack = function () {\n      if (_this.choiceIds.length > 0) {\n        _this.choiceIds = _this.choiceIds.slice(0, -1);\n        var questionId = _this.choiceIds.length;\n\n        _this.setQuestionFor(questionId);\n      } else {\n        _this.setState({\n          currentQuestion: null\n        });\n      }\n    };\n\n    _this.onClickRetry = function () {\n      _this.setState({\n        currentQuestion: null,\n        result: null\n      });\n    };\n\n    _this.onClickFreeTrial = function () {\n      _this.showWizLiveFreeTrialForm();\n\n      _this.updateParticipant({\n        didClickFreeTrial: true\n      });\n    };\n\n    _this.showWizLiveFreeTrialForm = function () {\n      var WizliveFreeTrialForm = _this.createWizliveFreeTrialForm;\n\n      var resultId = _this.getResultIdFor(_this.choiceIds);\n\n      var popupOptions = {\n        darkmode: true,\n        mobileFullscreen: true,\n        defaultPadding: false\n      };\n      showPopUp(React.createElement(WizliveFreeTrialForm, {\n        resultId: resultId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), popupOptions);\n    };\n\n    _this.createWizliveFreeTrialForm = function (props) {\n      var resultId = props.resultId;\n\n      var wizliveURL = _this.getWizliveFreeTrialURL(resultId);\n\n      return React.createElement(\"div\", {\n        className: \"WizliveFreeTrialForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"iframe\", {\n        src: wizliveURL,\n        title: \"WizliveFreeTrialForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }));\n    };\n\n    _this.getWizliveFreeTrialURL = function (resultId) {\n      return \"\".concat(URL.WIZLIVE, \"/myCodingStyleEvent?myCodingStyleId=\").concat(resultId);\n    };\n\n    _this.onClickShareKakao = function () {\n      _this.shareForKakao();\n\n      _this.updateParticipant({\n        didClickKakaoShare: true\n      });\n    };\n\n    _this.shareForKakao = function () {\n      var resultId = _this.getResultIdFor(_this.choiceIds);\n\n      var templateId = {\n        0: 38909,\n        1: 38910,\n        2: 38911\n      }[resultId];\n      window.Kakao.Link.sendCustom({\n        templateId: templateId,\n        callback: function callback() {\n          _this.updateParticipant({\n            didShareKakao: true\n          });\n        },\n        fail: function fail(error) {\n          console.error(error);\n        }\n      });\n    };\n\n    _this.onClickShareFacebook = function () {\n      _this.shareForFacebook();\n\n      _this.updateParticipant({\n        didClickFacebookShare: true\n      });\n    };\n\n    _this.shareForFacebook = function () {\n      var resultId = _this.getResultIdFor(_this.choiceIds);\n\n      var result = _this.getResultFor(resultId);\n\n      var href = \"https://dream.wizlab.net/codingparty\" + (resultId ? \"?myCodingStyleId=\".concat(resultId) : \"\");\n      var quote = \"[\\uC2EC\\uB9AC\\uD14C\\uC2A4\\uD2B8 \\uACB0\\uACFC] \\n    \\uB098\\uB294 \".concat(result.title, \"\\uD0C0\\uC785!\\n\\n    [\\uC2EC\\uB9AC\\uD14C\\uC2A4\\uD2B8] \\uB098\\uC5D0\\uAC8C \\uB9DE\\uB294 \\uCF54\\uB529 \\uC2A4\\uD0C0\\uC77C\\uC740?\\n    \\uC704\\uC988\\uB7A9X\\uC628\\uB77C\\uC778\\uCF54\\uB529\\uD30C\\uD2F0\\uC5D0\\uC11C \\uC900\\uBE44\\uD55C \\uD2B9\\uBCC4\\uD55C \\uC774\\uBCA4\\uD2B8\\n    A or B \\uC2EC\\uB9AC\\uD14C\\uC2A4\\uD2B8\\uB85C \\uB0B4 \\uCF54\\uB529 \\uC2A4\\uD0C0\\uC77C \\uCC3E\\uACE0! \\uBB34\\uB8CC\\uB85C \\uAC8C\\uC784 \\uCF54\\uB529 \\uBC30\\uC6B0\\uACE0! \\uC544\\uC774\\uD328\\uB4DC\\uB3C4 \\uBC1B\\uC544\\uAC00\\uC138\\uC694!\");\n      window.FB.ui({\n        method: \"share\",\n        href: href,\n        quote: quote,\n        description: \"hethet\"\n      }, function (res) {\n        if (_this.checkSuccessFacebookShare(res)) {\n          _this.updateParticipant({\n            didShareFacebook: true\n          });\n        } else {\n          if (res) {\n            console.error(res.error_message);\n          } else {\n            console.error(\"Error shareForFacebook::undefined response\");\n          }\n        }\n      });\n    };\n\n    _this.state = {\n      title: null,\n      currentQuestion: null,\n      result: null\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.loadMyCodingStyle(function () {\n        _this2.init();\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.email !== this.props.email) {\n        this.init();\n      }\n    }\n  }, {\n    key: \"loadMyCodingStyle\",\n    value: function loadMyCodingStyle(onload) {\n      this.myCodingStyle = myCodingStyle;\n      onload();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.participantId = null;\n      this.questionsLength = this.myCodingStyle.questions.length;\n      this.setState({\n        title: this.myCodingStyle.title,\n        result: null,\n        currentQuestion: null\n      });\n    }\n  }, {\n    key: \"createParticipantAndSetId\",\n    value: function createParticipantAndSetId() {\n      var _this3 = this;\n\n      var email = this.props.email;\n      var params = {\n        email: email\n      };\n      request.createMyCodingStyleParticipant(params).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this3.participantId = json.participantId;\n      });\n    }\n  }, {\n    key: \"completeParticipantWith\",\n    value: function completeParticipantWith(resultId) {\n      if (this.participantId && resultId) {\n        var params = {\n          id: this.participantId,\n          resultId: resultId\n        };\n        request.completeMyCodingStyleParticipant(params);\n      }\n    }\n  }, {\n    key: \"updateParticipant\",\n    value: function updateParticipant(_ref) {\n      var didClickFreeTrial = _ref.didClickFreeTrial,\n          didClickKakaoShare = _ref.didClickKakaoShare,\n          didShareKakao = _ref.didShareKakao,\n          didClickFacebookShare = _ref.didClickFacebookShare,\n          didShareFacebook = _ref.didShareFacebook;\n\n      if (this.participantId) {\n        var params = {\n          id: this.participantId,\n          didClickFreeTrial: didClickFreeTrial,\n          didClickKakaoShare: didClickKakaoShare,\n          didShareKakao: didShareKakao,\n          didClickFacebookShare: didClickFacebookShare,\n          didShareFacebook: didShareFacebook\n        };\n        request.updateMyCodingStyleParticipant(params);\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.initChoice();\n      this.setFirstQuestion();\n      this.createParticipantAndSetId();\n    }\n  }, {\n    key: \"initChoice\",\n    value: function initChoice() {\n      this.choiceIds = \"\";\n    }\n  }, {\n    key: \"setFirstQuestion\",\n    value: function setFirstQuestion() {\n      this.setQuestionFor(0);\n    }\n  }, {\n    key: \"setQuestionFor\",\n    value: function setQuestionFor(index) {\n      var firstQuestion = this.myCodingStyle.questions[index];\n      this.setState({\n        currentQuestion: firstQuestion\n      });\n    }\n  }, {\n    key: \"updateChoiceFor\",\n    value: function updateChoiceFor(choiceNum) {\n      this.choiceIds += \"\".concat(choiceNum);\n    }\n  }, {\n    key: \"setNext\",\n    value: function setNext() {\n      var nextQuestionId = this.choiceIds.length;\n\n      if (nextQuestionId < this.questionsLength) {\n        this.setQuestionFor(nextQuestionId);\n      } else {\n        this.setResult();\n      }\n    }\n  }, {\n    key: \"setResult\",\n    value: function setResult() {\n      var resultId = this.getResultIdFor(this.choiceIds);\n      var result = this.getResultFor(resultId);\n      this.setState({\n        result: result\n      });\n      this.completeParticipantWith(resultId);\n    }\n  }, {\n    key: \"getResultIdFor\",\n    value: function getResultIdFor(choiceIds) {\n      return this.myCodingStyle.resultMap[choiceIds];\n    }\n  }, {\n    key: \"getResultFor\",\n    value: function getResultFor(resultId) {\n      return this.myCodingStyle.results[resultId];\n    }\n  }, {\n    key: \"checkSuccessFacebookShare\",\n    value: function checkSuccessFacebookShare(res) {\n      return res && !res.error_message;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          title = _this$state.title,\n          currentQuestion = _this$state.currentQuestion,\n          result = _this$state.result;\n      var isBackButtonHidden = !this.choiceIds || this.choiceIds.length < 1;\n      return React.createElement(View, {\n        title: title,\n        currentQuestion: currentQuestion,\n        result: result,\n        isBackButtonHidden: isBackButtonHidden,\n        onClickStart: this.onClickStart,\n        onClickChoice: this.onClickChoice,\n        onClickBack: this.onClickBack,\n        onClickRetry: this.onClickRetry,\n        onClickFreeTrial: this.onClickFreeTrial,\n        onClickShareKakao: this.onClickShareKakao,\n        onClickShareFacebook: this.onClickShareFacebook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n})(Container);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/MyCodingStyle/Container.js"],"names":["React","Component","connect","URL","request","showPopUp","View","myCodingStyle","Container","props","onClickStart","start","onClickChoice","choiceNum","updateChoiceFor","setNext","onClickBack","choiceIds","length","slice","questionId","setQuestionFor","setState","currentQuestion","onClickRetry","result","onClickFreeTrial","showWizLiveFreeTrialForm","updateParticipant","didClickFreeTrial","WizliveFreeTrialForm","createWizliveFreeTrialForm","resultId","getResultIdFor","popupOptions","darkmode","mobileFullscreen","defaultPadding","wizliveURL","getWizliveFreeTrialURL","WIZLIVE","onClickShareKakao","shareForKakao","didClickKakaoShare","templateId","window","Kakao","Link","sendCustom","callback","didShareKakao","fail","error","console","onClickShareFacebook","shareForFacebook","didClickFacebookShare","getResultFor","href","quote","title","FB","ui","method","description","res","checkSuccessFacebookShare","didShareFacebook","error_message","state","loadMyCodingStyle","init","prevProps","email","onload","participantId","questionsLength","questions","params","createMyCodingStyleParticipant","then","json","id","completeMyCodingStyleParticipant","updateMyCodingStyleParticipant","initChoice","setFirstQuestion","createParticipantAndSetId","index","firstQuestion","nextQuestionId","setResult","completeParticipantWith","resultMap","results","isBackButtonHidden","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { URL } from \"../../Common/Util/Constant\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../Common/Component/PopUp\";\nimport View from \"./View\";\n\nimport myCodingStyle from \"./myCodingStyle\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: null,\n      currentQuestion: null,\n      result: null\n    };\n  }\n  componentDidMount() {\n    this.loadMyCodingStyle(() => {\n      this.init();\n    });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.email !== this.props.email) {\n      this.init();\n    }\n  }\n  loadMyCodingStyle(onload) {\n    this.myCodingStyle = myCodingStyle;\n    onload();\n  }\n  init() {\n    this.participantId = null;\n    this.questionsLength = this.myCodingStyle.questions.length;\n    this.setState({\n      title: this.myCodingStyle.title,\n      result: null,\n      currentQuestion: null\n    });\n  }\n\n  createParticipantAndSetId() {\n    const { email } = this.props;\n    const params = { email };\n    request\n      .createMyCodingStyleParticipant(params)\n      .then(res => res.json())\n      .then(json => {\n        this.participantId = json.participantId;\n      });\n  }\n  completeParticipantWith(resultId) {\n    if (this.participantId && resultId) {\n      const params = { id: this.participantId, resultId };\n      request.completeMyCodingStyleParticipant(params);\n    }\n  }\n  updateParticipant({\n    didClickFreeTrial,\n    didClickKakaoShare,\n    didShareKakao,\n    didClickFacebookShare,\n    didShareFacebook\n  }) {\n    if (this.participantId) {\n      const params = {\n        id: this.participantId,\n        didClickFreeTrial,\n        didClickKakaoShare,\n        didShareKakao,\n        didClickFacebookShare,\n        didShareFacebook\n      };\n      request.updateMyCodingStyleParticipant(params);\n    }\n  }\n\n  onClickStart = () => {\n    this.start();\n  };\n  start() {\n    this.initChoice();\n    this.setFirstQuestion();\n    this.createParticipantAndSetId();\n  }\n  initChoice() {\n    this.choiceIds = \"\";\n  }\n  setFirstQuestion() {\n    this.setQuestionFor(0);\n  }\n  setQuestionFor(index) {\n    const firstQuestion = this.myCodingStyle.questions[index];\n    this.setState({ currentQuestion: firstQuestion });\n  }\n\n  onClickChoice = choiceNum => {\n    this.updateChoiceFor(choiceNum);\n    this.setNext();\n  };\n  updateChoiceFor(choiceNum) {\n    this.choiceIds += `${choiceNum}`;\n  }\n  setNext() {\n    const nextQuestionId = this.choiceIds.length;\n    if (nextQuestionId < this.questionsLength) {\n      this.setQuestionFor(nextQuestionId);\n    } else {\n      this.setResult();\n    }\n  }\n  setResult() {\n    const resultId = this.getResultIdFor(this.choiceIds);\n    const result = this.getResultFor(resultId);\n    this.setState({ result });\n    this.completeParticipantWith(resultId);\n  }\n  getResultIdFor(choiceIds) {\n    return this.myCodingStyle.resultMap[choiceIds];\n  }\n  getResultFor(resultId) {\n    return this.myCodingStyle.results[resultId];\n  }\n\n  onClickBack = () => {\n    if (this.choiceIds.length > 0) {\n      this.choiceIds = this.choiceIds.slice(0, -1);\n      const questionId = this.choiceIds.length;\n      this.setQuestionFor(questionId);\n    } else {\n      this.setState({ currentQuestion: null });\n    }\n  };\n  onClickRetry = () => {\n    this.setState({ currentQuestion: null, result: null });\n  };\n  onClickFreeTrial = () => {\n    this.showWizLiveFreeTrialForm();\n    this.updateParticipant({ didClickFreeTrial: true });\n  };\n  showWizLiveFreeTrialForm = () => {\n    const WizliveFreeTrialForm = this.createWizliveFreeTrialForm;\n    const resultId = this.getResultIdFor(this.choiceIds);\n    const popupOptions = {\n      darkmode: true,\n      mobileFullscreen: true,\n      defaultPadding: false\n    };\n    showPopUp(<WizliveFreeTrialForm resultId={resultId} />, popupOptions);\n  };\n  createWizliveFreeTrialForm = props => {\n    const { resultId } = props;\n    const wizliveURL = this.getWizliveFreeTrialURL(resultId);\n    return (\n      <div className=\"WizliveFreeTrialForm\">\n        <iframe src={wizliveURL} title=\"WizliveFreeTrialForm\" />\n      </div>\n    );\n  };\n  getWizliveFreeTrialURL = resultId => {\n    return `${URL.WIZLIVE}/myCodingStyleEvent?myCodingStyleId=${resultId}`;\n  };\n\n  onClickShareKakao = () => {\n    this.shareForKakao();\n    this.updateParticipant({ didClickKakaoShare: true });\n  };\n  shareForKakao = () => {\n    const resultId = this.getResultIdFor(this.choiceIds);\n    const templateId = { 0: 38909, 1: 38910, 2: 38911 }[resultId];\n    window.Kakao.Link.sendCustom({\n      templateId,\n      callback: () => {\n        this.updateParticipant({ didShareKakao: true });\n      },\n      fail: error => {\n        console.error(error);\n      }\n    });\n  };\n  onClickShareFacebook = () => {\n    this.shareForFacebook();\n    this.updateParticipant({ didClickFacebookShare: true });\n  };\n  shareForFacebook = () => {\n    const resultId = this.getResultIdFor(this.choiceIds);\n    const result = this.getResultFor(resultId);\n    const href =\n      \"https://dream.wizlab.net/codingparty\" +\n      (resultId ? `?myCodingStyleId=${resultId}` : \"\");\n    const quote = `[심리테스트 결과] \n    나는 ${result.title}타입!\n\n    [심리테스트] 나에게 맞는 코딩 스타일은?\n    위즈랩X온라인코딩파티에서 준비한 특별한 이벤트\n    A or B 심리테스트로 내 코딩 스타일 찾고! 무료로 게임 코딩 배우고! 아이패드도 받아가세요!`;\n    window.FB.ui(\n      { method: \"share\", href, quote, description: \"hethet\" },\n      res => {\n        if (this.checkSuccessFacebookShare(res)) {\n          this.updateParticipant({ didShareFacebook: true });\n        } else {\n          if (res) {\n            console.error(res.error_message);\n          } else {\n            console.error(\"Error shareForFacebook::undefined response\");\n          }\n        }\n      }\n    );\n  };\n  checkSuccessFacebookShare(res) {\n    return res && !res.error_message;\n  }\n\n  render() {\n    const { title, currentQuestion, result } = this.state;\n    const isBackButtonHidden = !this.choiceIds || this.choiceIds.length < 1;\n    return (\n      <View\n        title={title}\n        currentQuestion={currentQuestion}\n        result={result}\n        isBackButtonHidden={isBackButtonHidden}\n        onClickStart={this.onClickStart}\n        onClickChoice={this.onClickChoice}\n        onClickBack={this.onClickBack}\n        onClickRetry={this.onClickRetry}\n        onClickFreeTrial={this.onClickFreeTrial}\n        onClickShareKakao={this.onClickShareKakao}\n        onClickShareFacebook={this.onClickShareFacebook}\n      />\n    );\n  }\n}\n\nexport default connect(state => ({\n  email: state.userinfo.email\n}))(Container);\n"]},"metadata":{},"sourceType":"module"}