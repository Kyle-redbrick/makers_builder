{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignIn/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport sha256 from \"../../Util/SHA256\";\nimport { showPopUp } from \"../PopUp\";\nimport SignUp from \"../SignUp\";\nimport ForgotPw from \"../ForgotPw\";\nimport ForgotEmail from \"../ForgotEmail\";\nimport logoImg from \"../../../Image/wizlab_logo.svg\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport \"./index.scss\";\n\nvar SignIn = /*#__PURE__*/function (_Component) {\n  _inherits(SignIn, _Component);\n\n  var _super = _createSuper(SignIn);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _super.call(this, props);\n\n    _this.onChangeInput = function (e) {\n      var _this$setState;\n\n      var _e$target = e.target,\n          id = _e$target.id,\n          value = _e$target.value;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, id, value), _defineProperty(_this$setState, \"warning\", \"\"), _this$setState));\n    };\n\n    _this.onClickSignIn = function () {\n      var formatMessage = _this.props.intl.formatMessage;\n\n      _this.setState({\n        warning: \"\"\n      }, function () {\n        var _this$state = _this.state,\n            email = _this$state.email,\n            password = _this$state.password;\n        var params = {\n          email: email,\n          password: sha256(password)\n        };\n        request.login(params).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.status === 403) {\n            _this.setState({\n              warning: formatMessage({\n                id: \"ID_SIGNIN_CHECK_EMAILPW\"\n              })\n            });\n          } else {\n            // TrackingUtil.sendGAEvent(\n            //   {\n            //     category: \"Login\",\n            //     action: \"Login_Success\"\n            //   },\n            //   this.props.email\n            // );\n            TrackingUtil.sendGTMEvent(\"Login_Success\");\n            localStorage.setItem(\"wizToken\", json.token);\n\n            _this.props.updateUserInfo(json.user);\n\n            _this.props.dismiss(); // window.location.reload();\n\n          }\n        });\n      });\n    };\n\n    _this.onClickForgotPw = function () {\n      showPopUp( /*#__PURE__*/React.createElement(ForgotPw, {\n        isBuilder: _this.props.isBuilder,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: !_this.props.isBuilder,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.onClickSignUp = function () {\n      showPopUp( /*#__PURE__*/React.createElement(SignUp, {\n        isBuilder: _this.props.isBuilder,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: !_this.props.isBuilder,\n        scrollable: true,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.onClickForgotEmail = function () {\n      showPopUp( /*#__PURE__*/React.createElement(ForgotEmail, {\n        isBuilder: _this.props.isBuilder,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: !_this.props.isBuilder,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      warning: \"\"\n    };\n\n    if (_this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      var formatMessage = this.props.intl.formatMessage;\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          warning = _this$state2.warning;\n      var onChangeInput = this.onChangeInput,\n          onClickSignIn = this.onClickSignIn,\n          onClickForgotPw = this.onClickForgotPw,\n          onClickSignUp = this.onClickSignUp,\n          onClickForgotEmail = this.onClickForgotEmail;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"signin_logo\",\n        src: logoImg,\n        alt: \"logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }), formatMessage({\n        id: \"ID_SIGNIN\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_input_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_input_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_EMAIL\"\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"email\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNIN_EMAIL_PLACEHOLDER\"\n        }),\n        value: email,\n        onChange: onChangeInput,\n        onKeyDown: function onKeyDown(e) {\n          if (e.keyCode === 13) onClickSignIn();\n        },\n        type: \"text\",\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_input_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_input_title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_PW\"\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"popup_input \".concat(warning !== \"\" ? \"popup_input-warning\" : \"\"),\n        id: \"password\",\n        type: \"password\",\n        placeholder: formatMessage({\n          id: \"ID_SIGNIN_PW_PLACEHOLDER\"\n        }),\n        value: password,\n        onChange: onChangeInput,\n        onKeyDown: function onKeyDown(e) {\n          if (e.keyCode === 13) onClickSignIn();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_FORGOTPW_DESC\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link\",\n        onClick: onClickForgotPw,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_FORGOTPW\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_FORGOT_EMAIL_DESC\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link\",\n        onClick: onClickForgotEmail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_FORGOT_EMAIL\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link_desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_SIGNUP_DESC\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"signin_link\",\n        onClick: onClickSignUp,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_SIGNUP\"\n      }))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"popup_button\",\n        onClick: onClickSignIn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_SIGNIN_CONFIRM\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"popup_warning\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }\n      }, warning));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nexport default connect(undefined, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(injectIntl(SignIn));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/SignIn/index.js"],"names":["React","Component","connect","injectIntl","userInfoActions","request","sha256","showPopUp","SignUp","ForgotPw","ForgotEmail","TrackingUtil","SignIn","props","onChangeInput","e","target","id","value","setState","onClickSignIn","formatMessage","intl","warning","state","email","password","params","login","then","res","json","status","sendGTMEvent","localStorage","setItem","token","updateUserInfo","user","dismiss","onClickForgotPw","isBuilder","darkmode","mobileFullscreen","onClickSignUp","scrollable","onClickForgotEmail","require","logoImg","keyCode","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport sha256 from \"../../Util/SHA256\";\nimport { showPopUp } from \"../PopUp\";\nimport SignUp from \"../SignUp\";\nimport ForgotPw from \"../ForgotPw\";\nimport ForgotEmail from \"../ForgotEmail\";\nimport logoImg from \"../../../Image/wizlab_logo.svg\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\nimport \"./index.scss\";\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      warning: \"\"\n    };\n    if (this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n  }\n\n  onChangeInput = e => {\n    const { id, value } = e.target;\n    this.setState({ [id]: value, warning: \"\" });\n  };\n  onClickSignIn = () => {\n    const { formatMessage } = this.props.intl;\n    this.setState({ warning: \"\" }, () => {\n      const { email, password } = this.state;\n      const params = { email, password: sha256(password) };\n\n      request\n        .login(params)\n        .then(res => res.json())\n        .then(json => {\n          if (json.status === 403) {\n            this.setState({\n              warning: formatMessage({ id: \"ID_SIGNIN_CHECK_EMAILPW\" })\n            });\n          } else {\n            // TrackingUtil.sendGAEvent(\n            //   {\n            //     category: \"Login\",\n            //     action: \"Login_Success\"\n            //   },\n            //   this.props.email\n            // );\n            TrackingUtil.sendGTMEvent(\"Login_Success\");\n\n            localStorage.setItem(\"wizToken\", json.token);\n            this.props.updateUserInfo(json.user);\n            this.props.dismiss();\n            // window.location.reload();\n          }\n        });\n    });\n  };\n  onClickForgotPw = () => {\n    showPopUp(<ForgotPw isBuilder={this.props.isBuilder} />, {\n      darkmode: !this.props.isBuilder,\n      mobileFullscreen: true\n    });\n  };\n  onClickSignUp = () => {\n    showPopUp(<SignUp isBuilder={this.props.isBuilder} />, {\n      darkmode: !this.props.isBuilder,\n      scrollable: true,\n      mobileFullscreen: true\n    });\n  };\n  onClickForgotEmail = () => {\n    showPopUp(<ForgotEmail isBuilder={this.props.isBuilder} />, {\n      darkmode: !this.props.isBuilder,\n      mobileFullscreen: true\n    });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const { email, password, warning } = this.state;\n    const {\n      onChangeInput,\n      onClickSignIn,\n      onClickForgotPw,\n      onClickSignUp,\n      onClickForgotEmail\n    } = this;\n\n    return (\n      <div className=\"signin\">\n        <div className=\"signin_title\">\n          <img className=\"signin_logo\" src={logoImg} alt=\"logo\" />\n          {formatMessage({ id: \"ID_SIGNIN\" })}\n        </div>\n        <div className=\"signin_input_wrapper\">\n          <div className=\"signin_input_title\">\n            {formatMessage({ id: \"ID_SIGNIN_EMAIL\" })}\n          </div>\n          <input\n            className={`popup_input ${\n              warning !== \"\" ? \"popup_input-warning\" : \"\"\n            }`}\n            id=\"email\"\n            placeholder={formatMessage({ id: \"ID_SIGNIN_EMAIL_PLACEHOLDER\" })}\n            value={email}\n            onChange={onChangeInput}\n            onKeyDown={e => {\n              if (e.keyCode === 13) onClickSignIn();\n            }}\n            type=\"text\"\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"signin_input_wrapper\">\n          <div className=\"signin_input_title\">\n            {formatMessage({ id: \"ID_SIGNIN_PW\" })}\n          </div>\n          <input\n            className={`popup_input ${\n              warning !== \"\" ? \"popup_input-warning\" : \"\"\n            }`}\n            id=\"password\"\n            type=\"password\"\n            placeholder={formatMessage({ id: \"ID_SIGNIN_PW_PLACEHOLDER\" })}\n            value={password}\n            onChange={onChangeInput}\n            onKeyDown={e => {\n              if (e.keyCode === 13) onClickSignIn();\n            }}\n          />\n        </div>\n        <div className=\"signin_link_wrapper\">\n          <div className=\"signin_link_desc\">\n            {formatMessage({ id: \"ID_SIGNIN_FORGOTPW_DESC\" })}\n          </div>\n          <div className=\"signin_link\" onClick={onClickForgotPw}>\n            {formatMessage({ id: \"ID_SIGNIN_FORGOTPW\" })}\n          </div>\n        </div>\n        <div className=\"signin_link_wrapper\">\n          <div className=\"signin_link_desc\">\n            {formatMessage({ id: \"ID_SIGNIN_FORGOT_EMAIL_DESC\" })}\n          </div>\n          <div className=\"signin_link\" onClick={onClickForgotEmail}>\n            {formatMessage({ id: \"ID_SIGNIN_FORGOT_EMAIL\" })}\n          </div>\n        </div>\n        <div className=\"signin_link_wrapper\">\n          <div className=\"signin_link_desc\">\n            {formatMessage({ id: \"ID_SIGNIN_SIGNUP_DESC\" })}\n          </div>\n          <div className=\"signin_link\" onClick={onClickSignUp}>\n            {formatMessage({ id: \"ID_SIGNIN_SIGNUP\" })}\n          </div>\n        </div>\n        <button className=\"popup_button\" onClick={onClickSignIn}>\n          {formatMessage({ id: \"ID_SIGNIN_CONFIRM\" })}\n        </button>\n        <div className=\"popup_warning\">{warning}</div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  undefined,\n  {\n    updateUserInfo: userInfoActions.updateUserInfo\n  }\n)(injectIntl(SignIn));\n"]},"metadata":{},"sourceType":"module"}