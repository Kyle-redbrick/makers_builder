{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Container.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport PublishPopup from \"../../../../Common/Component/Publish\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\";\nimport View from \"./View\";\nimport homeOnIcon from \"../../../../Image/icon-home-pressed.svg\";\nimport homeOffIcon from \"../../../../Image/icon-home-default.svg\";\nimport createOnIcon from \"../../../../Image/icon-create-pressed.svg\";\nimport createOffIcon from \"../../../../Image/icon-create-default.svg\";\nimport openOnIcon from \"../../../../Image/icon-open-pressed.svg\";\nimport openOffIcon from \"../../../../Image/icon-open-default.svg\";\nimport publishingOnIcon from \"../../../../Image/icon-publishing-pressed.svg\";\nimport publishingOffIcon from \"../../../../Image/icon-publishing-default.svg\";\nimport apkOnIcon from \"../../../../Image/icon-apk-pressed.svg\";\nimport apkOffIcon from \"../../../../Image/icon-apk-default.svg\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.onClickPage = function (pageId) {\n      _this.resetSelectProject();\n\n      _this.setCurrentPage(pageId);\n\n      _this.setState({\n        isClickedPageList: false\n      });\n    };\n\n    _this.onClickPageList = function () {\n      _this.setState({\n        isClickedPageList: !_this.state.isClickedPageList\n      });\n    };\n\n    _this.setCurrentPage = function (pageId) {\n      _this.setState({\n        currentPageId: pageId\n      });\n    };\n\n    _this.resetSelectProject = function () {\n      _this.setState({\n        selectProject: {}\n      });\n    };\n\n    _this.handleEdit = function (pId, name, callback) {\n      _this.resetSelectProject();\n\n      showPopUp(React.createElement(PopUp.OneInput, {\n        titleId: \"ID_PROJECT_POPUP_EDIT_TITLE\",\n        defaultInput: name,\n        buttonNameId: \"ID_PROJECT_POPUP_EDIT_OK\",\n        buttonAction: function buttonAction(newVal) {\n          _this.editProject(pId, newVal, callback);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), {\n        dismissOverlay: true\n      });\n    };\n\n    _this.editProject = function (pId, newName, callback) {\n      _this.resetSelectProject();\n\n      request.updateDevelopingProject({\n        pId: pId,\n        name: newName\n      }).then(function (res) {\n        return res.json;\n      }).then(function (json) {\n        callback(pId, newName); // this.getMyProjects({\n        //   currentPage: this.state.currentPage,\n        //   keyword: this.state.keyword\n        // });\n      }).catch(function (e) {\n        return console.error(e);\n      });\n    };\n\n    _this.onClickProjectEdit = function (published) {\n      showPopUp(React.createElement(PublishPopup, {\n        pId: published.pId,\n        isDeveloping: false,\n        publishCallback: _this.updateItemInfo,\n        isBuilder: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), {\n        defaultPadding: false,\n        scrollable: true\n      });\n    };\n\n    _this.onClickDetailBtn = function (pId, type) {\n      if (_this.state.selectProject.pId === pId) {\n        _this.resetSelectProject();\n      } else {\n        _this.setState({\n          selectProject: {\n            pId: pId,\n            type: type\n          }\n        });\n      }\n    };\n\n    _this.handleDelete =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(pId, callback) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return request.deleteDevelopingProject({\n                  pId: pId,\n                  email: _this.props.email\n                });\n\n              case 2:\n                // let result = await res.json();\n                request.deleteDevelopingProject({\n                  pId: pId,\n                  email: _this.props.email\n                }).then(function (res) {\n                  return res.json();\n                }).then(function () {\n                  callback();\n                }).catch(function (e) {\n                  console.error(e);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleCopy =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(pId, callback) {\n        var res, project, param;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return request.getDevelopingProject({\n                  pId: pId\n                });\n\n              case 2:\n                res = _context2.sent;\n                _context2.next = 5;\n                return res.json();\n\n              case 5:\n                project = _context2.sent;\n\n                if (project) {\n                  param = {\n                    pId: generatePID(_this.props.email),\n                    email: project.email,\n                    icon: project.icon,\n                    name: \"\".concat(project.name, \" copy\"),\n                    state: project.state,\n                    url: project.url,\n                    useCustomIcon: project.useCustomIcon\n                  };\n                  request.copyDevelopingProject({\n                    param: param\n                  }).then(function (res) {\n                    return res.json();\n                  }).then(function () {\n                    callback();\n                  }).catch(function (e) {\n                    return console.error(e);\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      currentPageId: props.email ? \"main\" : \"makingNew\",\n      selectProject: {},\n      isClickedPageList: false\n    };\n\n    if (props.email) {\n      _this.pageList = [{\n        title: \"홈\",\n        id: \"main\",\n        onImg: homeOnIcon,\n        offImg: homeOffIcon\n      }, {\n        title: \"새로 만들기\",\n        id: \"makingNew\",\n        onImg: createOnIcon,\n        offImg: createOffIcon\n      }, {\n        title: \"최근 프로젝트\",\n        id: \"myProject\",\n        onImg: openOnIcon,\n        offImg: openOffIcon\n      }, {\n        title: \"퍼블리싱 앱\",\n        id: \"myPublished\",\n        onImg: publishingOnIcon,\n        offImg: publishingOffIcon\n      }, {\n        title: \"나의 AAB\",\n        id: \"myApk\",\n        onImg: apkOnIcon,\n        offImg: apkOffIcon\n      }];\n    } else {\n      _this.pageList = [{\n        title: \"새로 만들기\",\n        id: \"makingNew\",\n        onImg: createOnIcon,\n        offImg: createOffIcon\n      }];\n    }\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          canClose = _this$props.canClose,\n          closeProjectPopup = _this$props.closeProjectPopup;\n      var pageList = this.pageList,\n          onClickPage = this.onClickPage,\n          setCurrentPage = this.setCurrentPage,\n          handleEdit = this.handleEdit,\n          onClickProjectEdit = this.onClickProjectEdit,\n          onClickDetailBtn = this.onClickDetailBtn,\n          resetSelectProject = this.resetSelectProject,\n          handleDelete = this.handleDelete,\n          handleCopy = this.handleCopy,\n          onClickPageList = this.onClickPageList;\n      var _this$state = this.state,\n          currentPageId = _this$state.currentPageId,\n          selectProject = _this$state.selectProject,\n          isClickedPageList = _this$state.isClickedPageList;\n      return React.createElement(View, {\n        pageList: pageList,\n        onClickPage: onClickPage,\n        currentPageId: currentPageId,\n        setCurrentPage: setCurrentPage,\n        canClose: canClose,\n        closeProjectPopup: closeProjectPopup,\n        handleEdit: handleEdit,\n        handleDelete: handleDelete,\n        handleCopy: handleCopy,\n        onClickProjectEdit: onClickProjectEdit,\n        resetSelectProject: resetSelectProject,\n        onClickDetailBtn: onClickDetailBtn,\n        selectProject: selectProject,\n        isClickedPageList: isClickedPageList,\n        onClickPageList: onClickPageList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email,\n    userId: state.userinfo.id\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Container.js"],"names":["React","Component","connect","injectIntl","withRouter","request","PopUp","showPopUp","PublishPopup","generatePID","View","Container","props","onClickPage","pageId","resetSelectProject","setCurrentPage","setState","isClickedPageList","onClickPageList","state","currentPageId","selectProject","handleEdit","pId","name","callback","newVal","editProject","dismissOverlay","newName","updateDevelopingProject","then","res","json","catch","e","console","error","onClickProjectEdit","published","updateItemInfo","defaultPadding","scrollable","onClickDetailBtn","type","handleDelete","deleteDevelopingProject","email","handleCopy","getDevelopingProject","project","param","icon","url","useCustomIcon","copyDevelopingProject","pageList","title","id","onImg","homeOnIcon","offImg","homeOffIcon","createOnIcon","createOffIcon","openOnIcon","openOffIcon","publishingOnIcon","publishingOffIcon","apkOnIcon","apkOffIcon","canClose","closeProjectPopup","userinfo","userId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport PublishPopup from \"../../../../Common/Component/Publish\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\";\n\nimport View from \"./View\";\n\nimport homeOnIcon from \"../../../../Image/icon-home-pressed.svg\";\nimport homeOffIcon from \"../../../../Image/icon-home-default.svg\";\nimport createOnIcon from \"../../../../Image/icon-create-pressed.svg\";\nimport createOffIcon from \"../../../../Image/icon-create-default.svg\";\nimport openOnIcon from \"../../../../Image/icon-open-pressed.svg\";\nimport openOffIcon from \"../../../../Image/icon-open-default.svg\";\nimport publishingOnIcon from \"../../../../Image/icon-publishing-pressed.svg\";\nimport publishingOffIcon from \"../../../../Image/icon-publishing-default.svg\";\nimport apkOnIcon from \"../../../../Image/icon-apk-pressed.svg\";\nimport apkOffIcon from \"../../../../Image/icon-apk-default.svg\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPageId: props.email ? \"main\" : \"makingNew\",\n      selectProject: {},\n      isClickedPageList: false,\n    };\n    if (props.email) {\n      this.pageList = [\n        { title: \"홈\", id: \"main\", onImg: homeOnIcon, offImg: homeOffIcon },\n        {\n          title: \"새로 만들기\",\n          id: \"makingNew\",\n          onImg: createOnIcon,\n          offImg: createOffIcon\n        },\n        {\n          title: \"최근 프로젝트\",\n          id: \"myProject\",\n          onImg: openOnIcon,\n          offImg: openOffIcon\n        },\n        {\n          title: \"퍼블리싱 앱\",\n          id: \"myPublished\",\n          onImg: publishingOnIcon,\n          offImg: publishingOffIcon\n        },\n        { title: \"나의 AAB\", id: \"myApk\", onImg: apkOnIcon, offImg: apkOffIcon }\n      ];\n    } else {\n      this.pageList = [\n        {\n          title: \"새로 만들기\",\n          id: \"makingNew\",\n          onImg: createOnIcon,\n          offImg: createOffIcon\n        }\n      ];\n    }\n  }\n  onClickPage = pageId => {\n    this.resetSelectProject();\n    this.setCurrentPage(pageId);\n    this.setState({ isClickedPageList: false })\n  };\n  onClickPageList = () => {\n    this.setState({ isClickedPageList: !this.state.isClickedPageList })\n  }\n\n  setCurrentPage = pageId => {\n    this.setState({ currentPageId: pageId });\n  };\n\n  resetSelectProject = () => {\n    this.setState({ selectProject: {} });\n  };\n\n  handleEdit = (pId, name, callback) => {\n    this.resetSelectProject();\n    showPopUp(\n      <PopUp.OneInput\n        titleId=\"ID_PROJECT_POPUP_EDIT_TITLE\"\n        defaultInput={name}\n        buttonNameId=\"ID_PROJECT_POPUP_EDIT_OK\"\n        buttonAction={newVal => {\n          this.editProject(pId, newVal, callback);\n        }}\n      />,\n      { dismissOverlay: true }\n    );\n  };\n  editProject = (pId, newName, callback) => {\n    this.resetSelectProject();\n    request\n      .updateDevelopingProject({ pId, name: newName })\n      .then(res => res.json)\n      .then(json => {\n        callback(pId, newName);\n        // this.getMyProjects({\n        //   currentPage: this.state.currentPage,\n        //   keyword: this.state.keyword\n        // });\n      })\n      .catch(e => console.error(e));\n  };\n  onClickProjectEdit = published => {\n    showPopUp(\n      <PublishPopup\n        pId={published.pId}\n        isDeveloping={false}\n        publishCallback={this.updateItemInfo}\n        isBuilder={true}\n      />,\n      { defaultPadding: false, scrollable: true }\n    );\n  };\n  onClickDetailBtn = (pId, type) => {\n    if (this.state.selectProject.pId === pId) {\n      this.resetSelectProject();\n    } else {\n      this.setState({ selectProject: { pId, type } });\n    }\n  };\n\n  handleDelete = async (pId, callback) => {\n    await request.deleteDevelopingProject({\n      pId,\n      email: this.props.email\n    });\n    // let result = await res.json();\n    request\n      .deleteDevelopingProject({ pId, email: this.props.email })\n      .then(res => res.json())\n      .then(() => {\n        callback();\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  };\n  handleCopy = async (pId, callback) => {\n    const res = await request.getDevelopingProject({ pId });\n    const project = await res.json();\n    if (project) {\n      const param = {\n        pId: generatePID(this.props.email),\n        email: project.email,\n        icon: project.icon,\n        name: `${project.name} copy`,\n        state: project.state,\n        url: project.url,\n        useCustomIcon: project.useCustomIcon\n      };\n\n      request\n        .copyDevelopingProject({ param })\n        .then(res => res.json())\n        .then(() => {\n          callback();\n        })\n        .catch(e => console.error(e));\n    }\n  };\n\n  render() {\n    const { canClose, closeProjectPopup } = this.props;\n    const {\n      pageList,\n      onClickPage,\n      setCurrentPage,\n      handleEdit,\n      onClickProjectEdit,\n      onClickDetailBtn,\n      resetSelectProject,\n      handleDelete,\n      handleCopy,\n      onClickPageList\n    } = this;\n    const { currentPageId, selectProject, isClickedPageList } = this.state;\n    return (\n      <View\n        pageList={pageList}\n        onClickPage={onClickPage}\n        currentPageId={currentPageId}\n        setCurrentPage={setCurrentPage}\n        canClose={canClose}\n        closeProjectPopup={closeProjectPopup}\n        handleEdit={handleEdit}\n        handleDelete={handleDelete}\n        handleCopy={handleCopy}\n        onClickProjectEdit={onClickProjectEdit}\n        resetSelectProject={resetSelectProject}\n        onClickDetailBtn={onClickDetailBtn}\n        selectProject={selectProject}\n        isClickedPageList={isClickedPageList}\n        onClickPageList={onClickPageList}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ email: state.userinfo.email, userId: state.userinfo.id }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}