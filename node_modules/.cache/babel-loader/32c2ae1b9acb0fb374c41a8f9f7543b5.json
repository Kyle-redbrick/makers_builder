{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/OCP2/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"./View\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { OCPv2, OCPGame } from \"../../Common/Util/Constant\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport signupImg from \"../../Image/new_singup.png\";\nimport signupImg_m from \"../../Image/250-169_signup.png\";\nimport reviewImg from \"../../Image/review_banner@2x.png\";\nimport reviewImg_m from \"../../Image/250-169_review.png\";\nimport campImg from \"../../Image/ocp-banner-pc-345-345@2x.png\";\nimport campImg_m from \"../../Image/ocp-banner-mobile-250-169@2x.png\";\nimport challengeImg from \"../../Image/onine_codingparty_event_banner.png\";\nimport challengeImg_m from \"../../Image/onine_coding_party_event_banner_M.png\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setFocusListener();\n\n              _this.getOcpSuccessUser();\n\n              _this.getMyOcp();\n\n              _this.scrollToWizLiveEventIfNeed();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.componentDidUpdate = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps, prevState) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (_this.props.userinfo.email !== prevProps.userinfo.email) _this.getMyOcp();\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.getOcpSuccessUser = function () {\n      request.getOcpSuccessUser2().then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.setState({\n          count: json\n        });\n      });\n    };\n\n    _this.getMyOcp = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(gameInfoCallback) {\n        var email, res, myOcpInfo;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                email = _this.props.userinfo.email;\n\n                if (!(email || _this.getGuestInfo())) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 4;\n                return request.getMyOcp2(email ? {\n                  email: email\n                } : {\n                  guestId: _this.getGuestInfo().id\n                });\n\n              case 4:\n                res = _context3.sent;\n                _context3.next = 7;\n                return res.json();\n\n              case 7:\n                myOcpInfo = _context3.sent;\n\n                if (myOcpInfo) {\n                  _this.setGameInfo(myOcpInfo, gameInfoCallback);\n                }\n\n                _context3.next = 12;\n                break;\n\n              case 11:\n                _this.setState({\n                  gameInfo: OCPGame\n                });\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.setGameInfo = function (myOcpInfo, callback) {\n      // OCPGame 데이터를 보존하기 위해\n      var gameInfo = JSON.parse(JSON.stringify(OCPGame));\n      myOcpInfo.forEach(function (myOcp) {\n        var game = gameInfo[myOcp.type];\n\n        if (game) {\n          var mission = game.itemInfo[myOcp.grade];\n          mission[\"level\"] = myOcp.level;\n        }\n      });\n\n      _this.setState({\n        gameInfo: gameInfo\n      }, function () {\n        if (callback) callback();\n\n        _this.showDetailPageByEvent();\n      });\n    };\n\n    _this.setFocusListener = function () {\n      window.addEventListener(\"focus\", _this.onFocusForRefreshGameDetail);\n    };\n\n    _this.onFocusForRefreshGameDetail = function () {\n      if (_this.state.isShowGameDetail && _this.state.selectedMission) _this.getMyOcp(_this.gameInfoCallback);\n    };\n\n    _this.gameInfoCallback = function () {\n      var _this$state = _this.state,\n          selectedMission = _this$state.selectedMission,\n          gameInfo = _this$state.gameInfo,\n          selectedGame = _this$state.selectedGame;\n      if (!selectedMission || !gameInfo || !selectedGame) return;\n\n      _this.setState({\n        selectedMission: _objectSpread({\n          gameType: selectedMission.gameType,\n          grade: selectedMission.grade\n        }, gameInfo[selectedGame].itemInfo[selectedMission.grade])\n      });\n    };\n\n    _this.handleMore = function (type) {\n      if (type === \"rank\") {\n        _this.setState(function (prev) {\n          return {\n            rankLimit: prev.rankLimit + 10\n          };\n        });\n      } else {\n        _this.setState(function (prev) {\n          return {\n            projectsLimit: prev.projectsLimit + 8\n          };\n        });\n      }\n    };\n\n    _this.handleGameType = function (gameName) {\n      localStorage.setItem(\"OCPSelectedGame\", gameName);\n\n      _this.setState({\n        selectedGame: gameName\n      });\n    };\n\n    _this.onClickTry = function (mission, grade) {\n      var selectedMission = _objectSpread({}, mission, {\n        grade: grade,\n        gameType: _this.state.selectedGame\n      });\n\n      _this.setState({\n        isShowGameDetail: true,\n        selectedMission: selectedMission\n      }, function () {\n        document.body.classList.add(\"body-unsrollable\");\n\n        _this.moveLayoutContentsLayerBy(true);\n      });\n    };\n\n    _this.handleGameDetailBack = function () {\n      document.body.classList.remove(\"body-unsrollable\");\n\n      _this.setState({\n        isShowGameDetail: false,\n        selectedMission: null\n      }, function () {\n        _this.moveLayoutContentsLayerBy(false);\n      });\n    };\n\n    _this.onClickEvent = function (event) {\n      _this.props.history.push(event.path);\n\n      window.scrollTo(0, 0);\n    };\n\n    _this.moveLayoutContentsLayerBy = function (flag) {\n      var layoutContents = document.getElementsByClassName(\"layout_contents\") ? document.getElementsByClassName(\"layout_contents\")[0] : null;\n      if (!layoutContents) return;\n\n      if (flag) {\n        layoutContents.style.zIndex = 11;\n      } else {\n        layoutContents.style.zIndex = 5;\n      }\n    };\n\n    _this.getGuestInfo = function () {\n      return localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"));\n    };\n\n    _this.showDetailPageByEvent = function () {\n      if (_this.isShowDetailPageByEvent) return;\n      _this.isShowDetailPageByEvent = true;\n\n      if (_this.props.location.search && _this.props.location.search !== \"\") {\n        var queryInfo = _this.parseQuery(_this.props.location.search);\n\n        _this.setState({\n          selectedGame: queryInfo.type\n        }, function () {\n          _this.eleCheckInterval = setInterval(function () {\n            var ele = document.getElementById(\"main_bottom_item-\".concat(queryInfo.type, \"-\").concat(queryInfo.grade));\n\n            if (ele) {\n              ele.click();\n              clearInterval(_this.eleCheckInterval);\n            }\n          }, 100);\n        });\n      }\n    };\n\n    var gameKey = _this.props.match.params.gameKey;\n    var localSelectedGame = localStorage.getItem(\"OCPSelectedGame\");\n\n    if (!localSelectedGame && !gameKey) {\n      localStorage.setItem(\"OCPSelectedGame\", OCPv2.GAMETYPE.ESCAPE);\n    }\n\n    _this.state = {\n      myData: {},\n      beginner: undefined,\n      intermediate: undefined,\n      advanced: undefined,\n      count: undefined,\n      rank: [],\n      rankLimit: 10,\n      projects: [],\n      projectsLimit: 8,\n      selectedGame: gameKey ? gameKey : localStorage.getItem(\"OCPSelectedGame\"),\n      selectedMission: undefined,\n      gameInfo: OCPGame,\n      isShowGameDetail: false\n    };\n    _this.events = [{\n      path: \"/event/codingparty/challenge\",\n      img: challengeImg,\n      mobileImg: challengeImg_m,\n      title: \"위즈랩 크리에이터 챌린지 시즌 2\",\n      date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n    }, {\n      path: \"/event/codingparty/signup\",\n      img: signupImg,\n      mobileImg: signupImg_m,\n      title: \"회원가입하면 선물 팡팡\",\n      date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n    }, {\n      path: \"/event/codingparty/review\",\n      img: reviewImg,\n      mobileImg: reviewImg_m,\n      title: \"미션 후기 이벤트\",\n      date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n    }, {\n      path: \"/event/codingparty/onlinecamp\",\n      img: campImg,\n      mobileImg: campImg_m,\n      title: \"위즈랩 온라인 캠프\",\n      date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n    }];\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"parseQuery\",\n    value: function parseQuery(queryString) {\n      var query = {};\n      var pairs = (queryString[0] === \"?\" ? queryString.substr(1) : queryString).split(\"&\");\n\n      for (var i = 0; i < pairs.length; i++) {\n        var pair = pairs[i].split(\"=\");\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || \"\");\n      }\n\n      return query;\n    }\n  }, {\n    key: \"scrollToWizLiveEventIfNeed\",\n    value: function scrollToWizLiveEventIfNeed() {\n      var search = this.props.location.search;\n      var query = this.parseQuery(search);\n      var myCodingStyleId = query.myCodingStyleId;\n      if (!myCodingStyleId) return;\n      var wizLiveEventElement = document.getElementById(\"wizliveEvent\");\n      if (!wizLiveEventElement) return;\n      window.scroll({\n        top: wizLiveEventElement.offsetTop,\n        behavior: \"smooth\"\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var intl = this.props.intl;\n      var _this$state2 = this.state,\n          count = _this$state2.count,\n          rank = _this$state2.rank,\n          rankLimit = _this$state2.rankLimit,\n          projects = _this$state2.projects,\n          projectsLimit = _this$state2.projectsLimit,\n          selectedGame = _this$state2.selectedGame,\n          gameInfo = _this$state2.gameInfo,\n          selectedMission = _this$state2.selectedMission,\n          isShowGameDetail = _this$state2.isShowGameDetail;\n      var handleMore = this.handleMore,\n          handleGameType = this.handleGameType,\n          onClickTry = this.onClickTry,\n          handleGameDetailBack = this.handleGameDetailBack,\n          events = this.events;\n      return React.createElement(View, {\n        intl: intl,\n        count: count,\n        rank: rank,\n        rankLimit: rankLimit,\n        handleMore: handleMore,\n        projects: projects,\n        projectsLimit: projectsLimit,\n        userId: this.props.userinfo.id,\n        selectedGame: selectedGame,\n        handleGameType: handleGameType,\n        gameInfo: gameInfo,\n        onClickTry: onClickTry,\n        selectedMission: selectedMission,\n        isShowGameDetail: isShowGameDetail,\n        handleGameDetailBack: handleGameDetailBack,\n        events: events,\n        onClickEvent: this.onClickEvent,\n        onFocusForRefreshGameDetail: this.onFocusForRefreshGameDetail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/OCP2/Container.js"],"names":["React","Component","View","connect","injectIntl","OCPv2","OCPGame","request","signupImg","signupImg_m","reviewImg","reviewImg_m","campImg","campImg_m","challengeImg","challengeImg_m","Container","props","componentDidMount","setFocusListener","getOcpSuccessUser","getMyOcp","scrollToWizLiveEventIfNeed","componentDidUpdate","prevProps","prevState","userinfo","email","getOcpSuccessUser2","then","res","json","setState","count","gameInfoCallback","getGuestInfo","getMyOcp2","guestId","id","myOcpInfo","setGameInfo","gameInfo","callback","JSON","parse","stringify","forEach","myOcp","game","type","mission","itemInfo","grade","level","showDetailPageByEvent","window","addEventListener","onFocusForRefreshGameDetail","state","isShowGameDetail","selectedMission","selectedGame","gameType","handleMore","prev","rankLimit","projectsLimit","handleGameType","gameName","localStorage","setItem","onClickTry","document","body","classList","add","moveLayoutContentsLayerBy","handleGameDetailBack","remove","onClickEvent","event","history","push","path","scrollTo","flag","layoutContents","getElementsByClassName","style","zIndex","getItem","isShowDetailPageByEvent","location","search","queryInfo","parseQuery","eleCheckInterval","setInterval","ele","getElementById","click","clearInterval","gameKey","match","params","localSelectedGame","GAMETYPE","ESCAPE","myData","beginner","undefined","intermediate","advanced","rank","projects","events","img","mobileImg","title","date","queryString","query","pairs","substr","split","i","length","pair","decodeURIComponent","myCodingStyleId","wizLiveEventElement","scroll","top","offsetTop","behavior","intl"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport View from \"./View\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { OCPv2, OCPGame } from \"../../Common/Util/Constant\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport signupImg from \"../../Image/new_singup.png\";\nimport signupImg_m from \"../../Image/250-169_signup.png\";\nimport reviewImg from \"../../Image/review_banner@2x.png\";\nimport reviewImg_m from \"../../Image/250-169_review.png\";\nimport campImg from \"../../Image/ocp-banner-pc-345-345@2x.png\";\nimport campImg_m from \"../../Image/ocp-banner-mobile-250-169@2x.png\";\nimport challengeImg from \"../../Image/onine_codingparty_event_banner.png\";\nimport challengeImg_m from \"../../Image/onine_coding_party_event_banner_M.png\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    const gameKey = this.props.match.params.gameKey;\n    const localSelectedGame = localStorage.getItem(\"OCPSelectedGame\");\n    if (!localSelectedGame && !gameKey) {\n      localStorage.setItem(\"OCPSelectedGame\", OCPv2.GAMETYPE.ESCAPE);\n    }\n\n    this.state = {\n      myData: {},\n      beginner: undefined,\n      intermediate: undefined,\n      advanced: undefined,\n      count: undefined,\n      rank: [],\n      rankLimit: 10,\n      projects: [],\n      projectsLimit: 8,\n      selectedGame: gameKey ? gameKey : localStorage.getItem(\"OCPSelectedGame\"),\n      selectedMission: undefined,\n      gameInfo: OCPGame,\n      isShowGameDetail: false\n    };\n    this.events = [\n      {\n        path: \"/event/codingparty/challenge\",\n        img: challengeImg,\n        mobileImg: challengeImg_m,\n        title: \"위즈랩 크리에이터 챌린지 시즌 2\",\n        date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n      },\n      {\n        path: \"/event/codingparty/signup\",\n        img: signupImg,\n        mobileImg: signupImg_m,\n        title: \"회원가입하면 선물 팡팡\",\n        date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n      },\n      {\n        path: \"/event/codingparty/review\",\n        img: reviewImg,\n        mobileImg: reviewImg_m,\n        title: \"미션 후기 이벤트\",\n        date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n      },\n      {\n        path: \"/event/codingparty/onlinecamp\",\n        img: campImg,\n        mobileImg: campImg_m,\n        title: \"위즈랩 온라인 캠프\",\n        date: \"2020년 10월 19일 ~ 11월 29일(종료)\"\n      }\n    ];\n  }\n\n  componentDidMount = async () => {\n    this.setFocusListener();\n    this.getOcpSuccessUser();\n    this.getMyOcp();\n    this.scrollToWizLiveEventIfNeed();\n  };\n\n  componentDidUpdate = async (prevProps, prevState) => {\n    if (this.props.userinfo.email !== prevProps.userinfo.email) this.getMyOcp();\n  };\n\n  /** Network  */\n  getOcpSuccessUser = () => {\n    request\n      .getOcpSuccessUser2()\n      .then(res => res.json())\n      .then(json => this.setState({ count: json }));\n  };\n\n  getMyOcp = async gameInfoCallback => {\n    const email = this.props.userinfo.email;\n    if (email || this.getGuestInfo()) {\n      let res = await request.getMyOcp2(\n        email ? { email } : { guestId: this.getGuestInfo().id }\n      );\n      let myOcpInfo = await res.json();\n      if (myOcpInfo) {\n        this.setGameInfo(myOcpInfo, gameInfoCallback);\n      }\n    } else {\n      this.setState({\n        gameInfo: OCPGame\n      });\n    }\n  };\n\n  /** Setting Methods */\n  setGameInfo = (myOcpInfo, callback) => {\n    // OCPGame 데이터를 보존하기 위해\n    const gameInfo = JSON.parse(JSON.stringify(OCPGame));\n    myOcpInfo.forEach(myOcp => {\n      const game = gameInfo[myOcp.type];\n      if (game) {\n        const mission = game.itemInfo[myOcp.grade];\n        mission[\"level\"] = myOcp.level;\n      }\n    });\n    this.setState(\n      {\n        gameInfo\n      },\n      () => {\n        if (callback) callback();\n        this.showDetailPageByEvent();\n      }\n    );\n  };\n\n  setFocusListener = () => {\n    window.addEventListener(\"focus\", this.onFocusForRefreshGameDetail);\n  };\n\n  /** Event Handler */\n\n  onFocusForRefreshGameDetail = () => {\n    if (this.state.isShowGameDetail && this.state.selectedMission)\n      this.getMyOcp(this.gameInfoCallback);\n  };\n\n  gameInfoCallback = () => {\n    const { selectedMission, gameInfo, selectedGame } = this.state;\n    if (!selectedMission || !gameInfo || !selectedGame) return;\n    this.setState({\n      selectedMission: {\n        gameType: selectedMission.gameType,\n        grade: selectedMission.grade,\n        ...gameInfo[selectedGame].itemInfo[selectedMission.grade]\n      }\n    });\n  };\n\n  handleMore = type => {\n    if (type === \"rank\") {\n      this.setState(prev => ({\n        rankLimit: prev.rankLimit + 10\n      }));\n    } else {\n      this.setState(prev => ({\n        projectsLimit: prev.projectsLimit + 8\n      }));\n    }\n  };\n  handleGameType = gameName => {\n    localStorage.setItem(\"OCPSelectedGame\", gameName);\n    this.setState({ selectedGame: gameName });\n  };\n\n  onClickTry = (mission, grade) => {\n    const selectedMission = {\n      ...mission,\n      grade,\n      gameType: this.state.selectedGame\n    };\n\n    this.setState(\n      {\n        isShowGameDetail: true,\n        selectedMission\n      },\n      () => {\n        document.body.classList.add(\"body-unsrollable\");\n        this.moveLayoutContentsLayerBy(true);\n      }\n    );\n  };\n\n  handleGameDetailBack = () => {\n    document.body.classList.remove(\"body-unsrollable\");\n\n    this.setState(\n      {\n        isShowGameDetail: false,\n        selectedMission: null\n      },\n      () => {\n        this.moveLayoutContentsLayerBy(false);\n      }\n    );\n  };\n\n  onClickEvent = event => {\n    this.props.history.push(event.path);\n    window.scrollTo(0, 0);\n  };\n\n  /** Methods */\n  moveLayoutContentsLayerBy = flag => {\n    const layoutContents = document.getElementsByClassName(\"layout_contents\")\n      ? document.getElementsByClassName(\"layout_contents\")[0]\n      : null;\n\n    if (!layoutContents) return;\n    if (flag) {\n      layoutContents.style.zIndex = 11;\n    } else {\n      layoutContents.style.zIndex = 5;\n    }\n  };\n\n  getGuestInfo = () => {\n    return (\n      localStorage.getItem(\"ocpId\") && JSON.parse(localStorage.getItem(\"ocpId\"))\n    );\n  };\n\n  parseQuery(queryString) {\n    var query = {};\n    var pairs = (queryString[0] === \"?\"\n      ? queryString.substr(1)\n      : queryString\n    ).split(\"&\");\n    for (var i = 0; i < pairs.length; i++) {\n      var pair = pairs[i].split(\"=\");\n      query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || \"\");\n    }\n    return query;\n  }\n\n  showDetailPageByEvent = () => {\n    if (this.isShowDetailPageByEvent) return;\n    this.isShowDetailPageByEvent = true;\n    if (this.props.location.search && this.props.location.search !== \"\") {\n      const queryInfo = this.parseQuery(this.props.location.search);\n      this.setState(\n        {\n          selectedGame: queryInfo.type\n        },\n        () => {\n          this.eleCheckInterval = setInterval(() => {\n            const ele = document.getElementById(\n              `main_bottom_item-${queryInfo.type}-${queryInfo.grade}`\n            );\n            if (ele) {\n              ele.click();\n              clearInterval(this.eleCheckInterval);\n            }\n          }, 100);\n        }\n      );\n    }\n  };\n\n  scrollToWizLiveEventIfNeed() {\n    const { search } = this.props.location;\n    const query = this.parseQuery(search);\n    const { myCodingStyleId } = query;\n    if (!myCodingStyleId) return;\n    const wizLiveEventElement = document.getElementById(\"wizliveEvent\");\n    if (!wizLiveEventElement) return;\n    window.scroll({\n      top: wizLiveEventElement.offsetTop,\n      behavior: \"smooth\"\n    });\n  }\n\n  render() {\n    const { intl } = this.props;\n    const {\n      count,\n      rank,\n      rankLimit,\n      projects,\n      projectsLimit,\n      selectedGame,\n      gameInfo,\n      selectedMission,\n      isShowGameDetail\n    } = this.state;\n    const {\n      handleMore,\n      handleGameType,\n      onClickTry,\n      handleGameDetailBack,\n      events\n    } = this;\n    return (\n      <View\n        intl={intl}\n        count={count}\n        rank={rank}\n        rankLimit={rankLimit}\n        handleMore={handleMore}\n        projects={projects}\n        projectsLimit={projectsLimit}\n        userId={this.props.userinfo.id}\n        selectedGame={selectedGame}\n        handleGameType={handleGameType}\n        gameInfo={gameInfo}\n        onClickTry={onClickTry}\n        selectedMission={selectedMission}\n        isShowGameDetail={isShowGameDetail}\n        handleGameDetailBack={handleGameDetailBack}\n        events={events}\n        onClickEvent={this.onClickEvent}\n        onFocusForRefreshGameDetail={this.onFocusForRefreshGameDetail}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {}\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}