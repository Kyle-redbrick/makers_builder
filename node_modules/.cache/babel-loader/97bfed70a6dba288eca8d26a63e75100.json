{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _setPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Container.js\";\n\nfunction _wrapRegExp() { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = new RegExp(re, flags); _groups.set(_this, groups || _groups.get(re)); return _setPrototypeOf(_this, BabelRegExp.prototype); } _inherits(BabelRegExp, RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = arguments; if (typeof args[args.length - 1] !== \"object\") { args = [].slice.call(args); args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as projectActions from \"./Store/Reducer/project\";\nimport * as previewActions from \"./Store/Reducer/preview\";\nimport * as webrtcActions from \"./Store/Reducer/webrtc\";\nimport * as videoActions from \"./Store/Reducer/video\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport AssetLibrary from \"./utils/assetLibrary\";\nimport { PAGETYPE, DEFAULT_VIDEO_URL } from \"../../Common/Util/Constant\";\nimport { detectIE } from \"../../Common/Util/detectBrowser\";\nimport View from \"./View\";\nimport Popup, { showPopUp } from \"../../Common/Component/PopUp\";\nimport * as TrackingUtil from \"../../Common/Util/TrackingUtil\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var email, _this$state, pageType, params, pId, reservationId, regexRoomId, _regexRoomId$exec, roomId, wizLiveRoom, wizLive1v4Room, reservation;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!_this.isIE) {\n                _context.next = 4;\n                break;\n              }\n\n              _this.props.history.replace(\"/\" + PAGETYPE.BUILDER);\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              email = _this.props.email;\n              _this$state = _this.state, pageType = _this$state.pageType, params = _this$state.params;\n              pId = params.pId, reservationId = params.reservationId;\n\n              if (pageType === PAGETYPE.WIZLIVE_1V4) {\n                regexRoomId = /*#__PURE__*/_wrapRegExp(/([0-9A-Z_a-z]+)\\x2D([0-9A-Z_a-z]+)\\x2D([0-9A-Z_a-z]+)\\x2D([0-9A-Z_a-z]+)\\x2D([0-9A-Z_a-z]+)\\x2D([0-9A-Z_a-z]+)/, {\n                  roomId: 6\n                });\n                _regexRoomId$exec = regexRoomId.exec(pId), roomId = _regexRoomId$exec.groups.roomId;\n                _this.roomId = roomId;\n              } // this.timer = setInterval(() => {\n              //   request.updateBuilderUsageTime({\n              //     email: this.props.email,\n              //     time: new Date().getTime()\n              //   });\n              // }, 1000);\n              // TrackingUtil.sendPageEvent(\"/\" + pageType, this.props.email);\n\n\n              _context.t0 = pageType;\n              _context.next = _context.t0 === PAGETYPE.WIZLIVE ? 11 : _context.t0 === PAGETYPE.MONITOR_1V4 ? 16 : _context.t0 === PAGETYPE.WIZLIVE_1V4 ? 16 : _context.t0 === PAGETYPE.BUILDER ? 28 : _context.t0 === PAGETYPE.BUILDER_EDIT ? 30 : _context.t0 === PAGETYPE.BUILDER_READONLY ? 32 : _context.t0 === PAGETYPE.QNA_READONLY ? 35 : _context.t0 === PAGETYPE.VIDEOCLASS ? 38 : _context.t0 === PAGETYPE.TUTORIAL ? 40 : _context.t0 === PAGETYPE.RECORD_PLAYER ? 46 : _context.t0 === PAGETYPE.MONITOR ? 51 : _context.t0 === PAGETYPE.BUILDER_LEARN ? 53 : 55;\n              break;\n\n            case 11:\n              _context.next = 13;\n              return request.getWizLiveRoomId({\n                email: email\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 13:\n              wizLiveRoom = _context.sent;\n\n              if (wizLiveRoom && wizLiveRoom.roomId) {\n                wizLiveRoom.myLecture.lecture.guideVideo && _this.props.setVideoURL(wizLiveRoom.myLecture.lecture.guideVideo);\n\n                _this.setState({\n                  reservationId: wizLiveRoom.id,\n                  roomId: wizLiveRoom.roomId,\n                  isTutor: wizLiveRoom.isTutor,\n                  studentEmail: wizLiveRoom.studentEmail,\n                  tutorEmail: wizLiveRoom.tutorEmail,\n                  lectureVideos: JSON.parse(wizLiveRoom.myLecture.lecture.video),\n                  lectureSlides: JSON.parse(wizLiveRoom.myLecture.lecture.slides),\n                  lectureState: wizLiveRoom.myLecture.lecture.state,\n                  lectureTitle: wizLiveRoom.myLecture.lecture.title,\n                  isFreeTrial: wizLiveRoom.isFreeTrial\n                }, function () {\n                  _this.loadWizlab();\n                });\n              } else {\n                showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                  intl: _this.props.intl,\n                  titleId: \"ID_BUILDER_ALERT_MSG_CLIVE_NOT_FOUND\",\n                  buttonNameId: \"ID_BUILDER_ALERT_CONFIRMBTN\",\n                  buttonAction: function buttonAction() {\n                    if (pId) _this.props.history.replace(\"/\".concat(PAGETYPE.BUILDER, \"/\").concat(pId));else _this.props.history.replace(\"/\" + PAGETYPE.WIZLIVE);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 15\n                  }\n                }));\n              }\n\n              return _context.abrupt(\"break\", 57);\n\n            case 16:\n              if (!(pageType === PAGETYPE.MONITOR_1V4)) {\n                _context.next = 23;\n                break;\n              }\n\n              email = window.prompt(\"튜터의 이메일을 입력해주세요\", \"johnjs@wizschool.io\");\n              _context.next = 20;\n              return request.getMonitorRoom1v4({\n                email: email\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 20:\n              wizLive1v4Room = _context.sent;\n              _context.next = 26;\n              break;\n\n            case 23:\n              _context.next = 25;\n              return request.getWizLive1v4RoomId({\n                email: email,\n                roomId: _this.roomId\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 25:\n              wizLive1v4Room = _context.sent;\n\n            case 26:\n              if (wizLive1v4Room && wizLive1v4Room.roomId) {\n                // wizLiveRoom.myLecture.lecture.guideVideo &&\n                //   this.props.setVideoURL(wizLiveRoom.myLecture.lecture.guideVideo);\n                _this.setState({\n                  reservationId: wizLive1v4Room.id,\n                  roomId: wizLive1v4Room.roomId,\n                  isTutor: pageType === PAGETYPE.MONITOR_1V4 ? false : wizLive1v4Room.isTutor,\n                  studentEmail: wizLive1v4Room.studentEmail,\n                  tutorEmail: wizLive1v4Room.tutorEmail,\n                  lectureVideos: JSON.parse(wizLive1v4Room.myLecture.lecture.video),\n                  lectureSlides: JSON.parse(wizLive1v4Room.myLecture.lecture.slides),\n                  lectureState: wizLive1v4Room.myLecture.lecture.state,\n                  lectureTitle: wizLive1v4Room.myLecture.lecture.title,\n                  isFreeTrial: wizLive1v4Room.isFreeTrial\n                }, function () {\n                  if (pageType === PAGETYPE.WIZLIVE_1V4) {\n                    _this.loadWizlab();\n                  } else if (pageType === PAGETYPE.MONITOR_1V4) {\n                    _this.defaultMonitor();\n                  }\n                });\n              } else {\n                showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                  intl: _this.props.intl,\n                  titleId: \"ID_BUILDER_ALERT_MSG_CLIVE_NOT_FOUND\",\n                  buttonNameId: \"ID_BUILDER_ALERT_CONFIRMBTN\",\n                  buttonAction: function buttonAction() {\n                    if (pId) _this.props.history.replace(\"/\".concat(PAGETYPE.BUILDER, \"/\").concat(pId));else _this.props.history.replace(\"/\" + PAGETYPE.WIZLIVE);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 15\n                  }\n                }));\n              }\n\n              return _context.abrupt(\"break\", 57);\n\n            case 28:\n              _this.loadWizlab();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 30:\n              _this.loadWizlab();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 32:\n              showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                intl: _this.props.intl,\n                titleId: \"ID_BUILDER_ALERT_MSG_READONLY\",\n                buttonNameId: \"ID_BUILDER_ALERT_CONFIRMBTN\",\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 13\n                }\n              }));\n\n              _this.loadWizlab();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 35:\n              showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                intl: _this.props.intl,\n                titleId: \"ID_BUILDER_ALERT_MSG_READONLY\",\n                buttonNameId: \"ID_BUILDER_ALERT_CONFIRMBTN\",\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 13\n                }\n              }));\n\n              _this.loadWizlabForQuestion();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 38:\n              _this.loadDefaultProject();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 40:\n              if (_this.props.email) {\n                _context.next = 44;\n                break;\n              }\n\n              showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                title: \"\\uB85C\\uADF8\\uC778 \\uD6C4 \\uC774\\uC6A9\\uD574\\uC8FC\\uC138\\uC694\",\n                buttonName: \"\\uD655\\uC778\",\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 15\n                }\n              }));\n\n              _this.loadDefaultProject();\n\n              return _context.abrupt(\"return\");\n\n            case 44:\n              _this.loadTutorial();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 46:\n              _context.next = 48;\n              return request.getReservationById({\n                reservationId: reservationId\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 48:\n              reservation = _context.sent;\n\n              _this.setState({\n                reservation: reservation.reservation\n              }, function () {\n                _this.loadRecordProject();\n              });\n\n              return _context.abrupt(\"break\", 57);\n\n            case 51:\n              _this.defaultMonitor();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 53:\n              _this.setState({\n                isLoading: false,\n                popupStates: {\n                  video: false,\n                  snippet: false,\n                  api: false,\n                  chat: false,\n                  property: false,\n                  spriteBox: false,\n                  preview: false,\n                  soundBox: false,\n                  scene: false,\n                  animation: false,\n                  qna: false\n                }\n              });\n\n              return _context.abrupt(\"break\", 57);\n\n            case 55:\n              _this.loadWizlab();\n\n              return _context.abrupt(\"break\", 57);\n\n            case 57:\n              _context.next = 62;\n              break;\n\n            case 59:\n              _context.prev = 59;\n              _context.t1 = _context[\"catch\"](0);\n              console.error(_context.t1);\n\n            case 62:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 59]]);\n    }));\n\n    _this.componentWillUnmount = function () {\n      // this.timer && clearInterval(this.timer);\n      localStorage.removeItem(\"templateId\");\n    };\n\n    _this.loadTutorial = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var myLevelInx, res, list, completeArr, levelItem, template, tutorialState;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              /** load & valid check */\n              myLevelInx = 0;\n              _context2.next = 3;\n              return request.getMyTutorialList({\n                email: _this.props.email\n              });\n\n            case 3:\n              res = _context2.sent;\n              _context2.next = 6;\n              return res.json();\n\n            case 6:\n              list = _context2.sent;\n              completeArr = list.rows.filter(function (item) {\n                return item.isComplete;\n              });\n\n              if (completeArr.length) {\n                myLevelInx = completeArr.reduce(function (pv, cv) {\n                  return pv.tutorial.level > cv.tutorial.level ? pv : cv;\n                }).tutorial.level;\n              }\n\n              _context2.next = 11;\n              return request.getMyTutorial({\n                email: _this.props.email,\n                level: _this.state.params.level\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 11:\n              levelItem = _context2.sent;\n\n              if (levelItem) {\n                _context2.next = 22;\n                break;\n              }\n\n              if (!(myLevelInx + 1 === Number(_this.state.params.level))) {\n                _context2.next = 19;\n                break;\n              }\n\n              _context2.next = 16;\n              return request.createTutorialItem({\n                email: _this.props.email,\n                level: _this.state.params.level\n              });\n\n            case 16:\n              window.location.reload();\n              _context2.next = 20;\n              break;\n\n            case 19:\n              showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n                title: \"\\uC798\\uBABB\\uB41C \\uACBD\\uB85C\\uC785\\uB2C8\\uB2E4\",\n                buttonName: \"\\uD655\\uC778\",\n                buttonAction: function buttonAction() {\n                  return _this.loadDefaultProject();\n                },\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 11\n                }\n              }));\n\n            case 20:\n              _context2.next = 25;\n              break;\n\n            case 22:\n              template = JSON.parse(levelItem.tutorial.template);\n              tutorialState = JSON.parse(levelItem.tutorial.state);\n              AssetLibrary.loadAssetsFromScene(tutorialState.scene, function () {\n                _this.props.setProject({\n                  state: tutorialState,\n                  videoclass: template\n                });\n\n                _this.setState({\n                  isLoading: false,\n                  currentTutorial: levelItem\n                });\n              });\n\n            case 25:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.defaultMonitor = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var response, project;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return request.getDefaultProject();\n\n            case 3:\n              response = _context3.sent;\n              _context3.next = 6;\n              return response.json();\n\n            case 6:\n              project = _context3.sent;\n\n              _this.setBrowserTitle(project.name);\n\n              project.state = JSON.parse(project.state);\n              AssetLibrary.loadAssetsFromScene(project.state.scene, function () {\n                _this.props.setProject(project);\n\n                _this.setState({\n                  isLoading: false\n                });\n              });\n              _context3.next = 15;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 12]]);\n    }));\n\n    _this.loadWizlab = function () {\n      document.title = \"WizLab\"; // const { pId } = this.state.params;\n      // if (pId) {\n      //   if (this.props.email) {\n      //     this.loadProject(pId);\n      //   } else {\n      //     this.handleDefaultCase();\n      //   }\n      // } else {\n      //   this.handleDefaultCase();\n      // }\n\n      var pId = _this.state.params.pId;\n\n      if (_this.props.email) {\n        if (pId) {\n          _this.loadProject(pId);\n        } else {\n          _this.setState({\n            isProjectPopupOpened: true\n          });\n        }\n      } else {\n        // this.handleDefaultCase();\n        if (!_this.props.email && _this.templateId) {\n          _this.loadTemplateProject(_this.templateId);\n\n          localStorage.removeItem(\"templateId\");\n          return;\n        }\n\n        try {\n          var urlParams = new URLSearchParams(window.location.search);\n          var templateId = urlParams.get(\"t\");\n\n          if (templateId) {\n            _this.loadTemplateProject(templateId);\n          } else {\n            _this.setState({\n              isProjectPopupOpened: true\n            });\n          }\n        } catch (e) {\n          _this.setState({\n            isProjectPopupOpened: false\n          });\n        }\n      }\n    };\n\n    _this.loadWizlabForQuestion = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var questionId, response, projectState;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              questionId = _this.state.params.questionId;\n              _context4.next = 3;\n              return request.getQuestionState({\n                id: questionId\n              });\n\n            case 3:\n              response = _context4.sent;\n              _context4.next = 6;\n              return response.json();\n\n            case 6:\n              projectState = _context4.sent;\n\n              if (projectState) {\n                projectState = JSON.parse(projectState.state);\n                AssetLibrary.loadAssetsFromScene(projectState.scene, function () {\n                  var project = {\n                    state: projectState,\n                    name: \"\"\n                  };\n\n                  _this.props.setProject(project);\n\n                  _this.setState({\n                    isLoading: false\n                  });\n                });\n              }\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    _this.openProjectPopup = function () {\n      _this.setState({\n        isProjectPopupOpened: true\n      });\n    };\n\n    _this.closeProjectPopup = function () {\n      _this.setState({\n        isProjectPopupOpened: false\n      });\n    };\n\n    _this.loadRecordProject = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var state;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              state = JSON.parse(_this.state.reservation.myLecture.lecture.state);\n              AssetLibrary.loadAssetsFromScene(state.scene, function () {\n                _this.props.setProject({\n                  state: state\n                });\n\n                _this.setState({\n                  isLoading: false\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    _this.loadProject = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(pId) {\n        var response, project, templateId;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return request.getDevelopingProject({\n                  pId: pId\n                });\n\n              case 3:\n                response = _context6.sent;\n                _context6.next = 6;\n                return response.json();\n\n              case 6:\n                project = _context6.sent;\n\n                if (!project) {\n                  _context6.next = 22;\n                  break;\n                }\n\n                if (!(_this.state.pageType === PAGETYPE.BUILDER_READONLY || _this.state.pageType === PAGETYPE.QNA_READONLY)) {\n                  _context6.next = 14;\n                  break;\n                }\n\n                if (_this.props.isTutor) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                _this.props.history.replace({\n                  pathname: \"/\" + PAGETYPE.BUILDER\n                });\n\n                return _context6.abrupt(\"return\");\n\n              case 12:\n                _context6.next = 17;\n                break;\n\n              case 14:\n                if (!(project.email !== _this.props.email && _this.state.pageType !== PAGETYPE.WIZLIVE && _this.state.pageType !== PAGETYPE.WIZLIVE_1V4)) {\n                  _context6.next = 17;\n                  break;\n                }\n\n                _this.props.history.replace({\n                  pathname: \"/\" + PAGETYPE.BUILDER\n                });\n\n                return _context6.abrupt(\"return\");\n\n              case 17:\n                _this.setBrowserTitle(project.name);\n\n                project.state = JSON.parse(project.state);\n                AssetLibrary.loadAssetsFromScene(project.state.scene, function () {\n                  _this.props.setProject(project);\n\n                  _this.setState({\n                    isLoading: false\n                  });\n                });\n                _context6.next = 24;\n                break;\n\n              case 22:\n                templateId = _this.state.params.templateId;\n\n                _this.createNewProjectFromServer(pId, templateId);\n\n              case 24:\n                _context6.next = 29;\n                break;\n\n              case 26:\n                _context6.prev = 26;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.error(_context6.t0);\n\n              case 29:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 26]]);\n      }));\n\n      return function (_x) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    _this.setBrowserTitle = function (title) {\n      document.title = \"WizLab\";\n      if (title) document.title += \" - \".concat(title);\n    };\n\n    _this.createNewProjectFromServer = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(pId, templateId) {\n        var name, email, randomChar, params, response, project;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                email = _this.props.email;\n\n                if (_this.state.lectureTitle) {\n                  name = _this.state.lectureTitle;\n                } else {\n                  randomChar = String.fromCharCode(Math.floor(Math.random() * Math.floor(48)) + 48); //temp\n\n                  name = _this.props.intl.formatMessage({\n                    id: \"ID_TIP_LAYOUT_NEW_PROJECT_FORMAT\"\n                  }, {\n                    randomChar: randomChar\n                  });\n                }\n\n                params = {\n                  pId: pId,\n                  email: email,\n                  name: name\n                };\n\n                if (_this.state.lectureState) {\n                  params.state = _this.state.lectureState;\n                }\n\n                if (templateId) {\n                  params.templateId = templateId;\n                }\n\n                _context7.prev = 5;\n                _context7.next = 8;\n                return request.postDevelopingProject(params);\n\n              case 8:\n                response = _context7.sent;\n                _context7.next = 11;\n                return response.json();\n\n              case 11:\n                project = _context7.sent;\n\n                _this.setBrowserTitle(project.name);\n\n                project.state = JSON.parse(project.state);\n                project.video = {\n                  videoURL: DEFAULT_VIDEO_URL\n                };\n                AssetLibrary.loadAssetsFromScene(project.state.scene, function () {\n                  _this.props.setProject(project);\n\n                  _this.setState({\n                    isLoading: false\n                  });\n                });\n                _context7.next = 21;\n                break;\n\n              case 18:\n                _context7.prev = 18;\n                _context7.t0 = _context7[\"catch\"](5);\n                console.error(_context7.t0);\n\n              case 21:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[5, 18]]);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    _this.loadDefaultProject = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var response, project;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return request.getDefaultProject();\n\n            case 2:\n              response = _context8.sent;\n              _context8.next = 5;\n              return response.json();\n\n            case 5:\n              project = _context8.sent;\n              project.name = \"\";\n\n              _this.setBrowserTitle(project.name);\n\n              project.state = JSON.parse(project.state);\n              project.video = {\n                videoURL: DEFAULT_VIDEO_URL\n              };\n              AssetLibrary.loadAssetsFromScene(project.state.scene, function () {\n                _this.props.setProject(project);\n\n                _this.setState({\n                  isLoading: false\n                });\n              });\n\n            case 11:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    _this.loadTemplateProject = /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(templateId) {\n        var response, project;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return request.getDefaultTemplateProject({\n                  id: templateId\n                });\n\n              case 2:\n                response = _context9.sent;\n                _context9.next = 5;\n                return response.json();\n\n              case 5:\n                project = _context9.sent;\n                project.name = \"\";\n\n                _this.setBrowserTitle(project.name);\n\n                project.state = JSON.parse(project.state);\n                project.video = {\n                  videoURL: DEFAULT_VIDEO_URL\n                };\n                AssetLibrary.loadAssetsFromScene(project.state.scene, function () {\n                  _this.props.setProject(project);\n\n                  _this.setState({\n                    isLoading: false\n                  });\n                });\n\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function (_x4) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n\n    _this.handleSelectMainViewMode = function (mainViewMode) {\n      _this.setState({\n        mainViewMode: mainViewMode\n      });\n    };\n\n    _this.handleChangeZIndex = function (name) {\n      var sort = function sort(arr) {\n        var indexes = arr.slice();\n\n        for (var i = 0; i < indexes.length; i++) {\n          if (name === indexes[i]) {\n            var value = indexes[i];\n            indexes.splice(i, 1);\n            indexes.push(value);\n            break;\n          }\n        }\n\n        return indexes;\n      };\n\n      _this.setState(function (state) {\n        return {\n          popupZIndexes: sort(state.popupZIndexes)\n        };\n      }, function () {\n        localStorage.setItem(\"popupZIndexes\", JSON.stringify(_this.state.popupZIndexes));\n      });\n    };\n\n    _this.handleSelectTab = function (name, from) {\n      _this.props.setLog(_defineProperty({}, name, !_this.state.popupStates[name]));\n\n      if (!_this.state.popupStates[name]) {\n        if (name === \"spriteView\" || name === \"sound\" || name === \"preview\") {\n          TrackingUtil.sendGAEvent({\n            category: \"Builder\",\n            action: \"MenuActions\",\n            label: name[0].toUpperCase() + name.slice(1)\n          });\n        }\n\n        if (name === \"spriteBox\") {\n          TrackingUtil.sendGAEvent({\n            category: \"Builder\",\n            action: \"AddSprite\",\n            label: from\n          });\n        }\n      }\n\n      _this.setState(function (state) {\n        return {\n          popupStates: _objectSpread({}, state.popupStates, _defineProperty({}, name, !state.popupStates[name]))\n        };\n      }, function () {\n        localStorage.setItem(\"popupStates\", JSON.stringify(_objectSpread({}, _this.state.popupStates, {\n          tutorial: undefined,\n          live: undefined\n        })));\n\n        if (_this.state.popupStates[name]) {\n          _this.handleChangeZIndex(name);\n        }\n      });\n    };\n\n    _this.showModal = function (modalContent) {\n      _this.setState({\n        modalContent: modalContent\n      });\n    };\n\n    _this.handleHelp = function (isHelpOpened) {\n      _this.setState({\n        isHelpOpened: isHelpOpened\n      });\n    };\n\n    _this.setVideoclassRef = function (ref) {\n      _this.setState({\n        videoclassRef: ref\n      });\n    };\n\n    var popupStates = JSON.parse(localStorage.getItem(\"popupStates\"));\n\n    if (!popupStates) {\n      popupStates = {\n        video: false,\n        snippet: false,\n        api: false,\n        chat: false,\n        property: false,\n        spriteBox: false,\n        preview: false,\n        soundBox: false,\n        scene: false,\n        animation: false,\n        qna: false\n      };\n    }\n\n    popupStates = _objectSpread({}, popupStates, {\n      tutorial: props.location.path.split(\"/\")[1] === PAGETYPE.TUTORIAL,\n      live: props.location.path.split(\"/\")[1] === PAGETYPE.WIZLIVE,\n      live1v4: props.location.path.split(\"/\")[1] === PAGETYPE.WIZLIVE_1V4,\n      monitor1v4: props.location.path.split(\"/\")[1] === PAGETYPE.MONITOR_1V4\n    });\n    var popupZIndexes = JSON.parse(localStorage.getItem(\"popupZIndexes\"));\n\n    if (!popupZIndexes || !popupZIndexes.includes(\"snippet\")) {\n      popupZIndexes = [\"tutorial\", \"live\", \"video\", \"snippet\", \"api\", \"chat\", \"property\", \"spriteBox\", \"preview\", \"soundBox\", \"scene\", \"animation\", \"qna\"];\n    }\n\n    _this.templateId = localStorage.getItem(\"templateId\");\n    _this.roomId = null;\n    _this.state = {\n      isLoading: true,\n      isProjectPopupOpened: false,\n      params: props.location.params,\n      pageType: props.location.path.split(\"/\")[1],\n      popupStates: popupStates,\n      popupZIndexes: popupZIndexes,\n      currentTutorial: undefined,\n      videoclassRef: undefined\n    };\n\n    switch (_this.state.pageType) {\n      case PAGETYPE.WIZLIVE:\n        _this.state.reservationId = null;\n        _this.state.roomId = null;\n        _this.state.isTutor = null;\n        _this.state.studentEmail = null;\n        _this.state.tutorEmail = null;\n        _this.state.isFreeTrial = null;\n        break;\n\n      case PAGETYPE.WIZLIVE_1V4:\n      case PAGETYPE.MONITOR_1V4:\n        _this.state.reservationId = null;\n        _this.state.roomId = null;\n        _this.state.isTutor = null;\n        _this.state.studentEmail = null;\n        _this.state.tutorEmail = null;\n        _this.state.isFreeTrial = null;\n        break;\n\n      case PAGETYPE.RECORD_PLAYER:\n        _this.state.reservationId = _this.state.params.reservationId;\n        break;\n\n      default:\n        break;\n    }\n\n    _this.isIE = detectIE();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.email && !this.props.email) {\n        this.props.history.replace({\n          pathname: \"/\" + PAGETYPE.BUILDER\n        });\n        window.location.reload();\n      } else if (!prevProps.email && this.props.email) {\n        this.props.history.replace({\n          pathname: \"/\" + PAGETYPE.BUILDER\n        });\n        window.location.reload();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          screenMode = _this$props.screenMode,\n          location = _this$props.location,\n          email = _this$props.email,\n          name = _this$props.name;\n      var _this$state2 = this.state,\n          pageType = _this$state2.pageType,\n          roomId = _this$state2.roomId,\n          reservationId = _this$state2.reservationId,\n          isTutor = _this$state2.isTutor,\n          isLoading = _this$state2.isLoading,\n          tutorEmail = _this$state2.tutorEmail,\n          studentEmail = _this$state2.studentEmail,\n          lectureVideos = _this$state2.lectureVideos,\n          lectureSlides = _this$state2.lectureSlides,\n          reservation = _this$state2.reservation,\n          isProjectPopupOpened = _this$state2.isProjectPopupOpened,\n          modalContent = _this$state2.modalContent,\n          isHelpOpened = _this$state2.isHelpOpened,\n          popupStates = _this$state2.popupStates,\n          popupZIndexes = _this$state2.popupZIndexes,\n          currentTutorial = _this$state2.currentTutorial,\n          isFreeTrial = _this$state2.isFreeTrial,\n          videoclassRef = _this$state2.videoclassRef;\n      var pId = this.state.params.pId;\n      var isIE = this.isIE,\n          openProjectPopup = this.openProjectPopup,\n          closeProjectPopup = this.closeProjectPopup,\n          handleHelp = this.handleHelp,\n          handleChangeZIndex = this.handleChangeZIndex,\n          handleSelectTab = this.handleSelectTab,\n          showModal = this.showModal,\n          setVideoclassRef = this.setVideoclassRef;\n      return /*#__PURE__*/React.createElement(DndProvider, {\n        backend: HTML5Backend,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(View, {\n        screenMode: screenMode,\n        location: location,\n        pageType: pageType,\n        roomId: roomId,\n        reservationId: reservationId,\n        isTutor: isTutor,\n        isLoading: isLoading,\n        isIE: isIE,\n        tutorEmail: tutorEmail,\n        studentEmail: studentEmail,\n        lectureVideos: lectureVideos,\n        lectureSlides: lectureSlides,\n        pId: pId,\n        reservation: reservation,\n        isProjectPopupOpened: isProjectPopupOpened,\n        openProjectPopup: openProjectPopup,\n        closeProjectPopup: closeProjectPopup,\n        modalContent: modalContent,\n        showModal: showModal,\n        isHelpOpened: isHelpOpened,\n        handleHelp: handleHelp,\n        popupStates: popupStates,\n        popupZIndexes: popupZIndexes,\n        handleChangeZIndex: handleChangeZIndex,\n        handleSelectTab: handleSelectTab,\n        currentTutorial: currentTutorial,\n        isFreeTrial: isFreeTrial,\n        videoclassRef: videoclassRef,\n        setVideoclassRef: setVideoclassRef,\n        email: email,\n        name: name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport var is3DProject = function is3DProject(item) {\n  if (item.icon) {\n    return item.icon.includes(\"redbrick\");\n  }\n};\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email,\n    name: state.userinfo.name,\n    isTutor: state.userinfo.isTutor,\n    screenMode: state.preview.screenMode\n  };\n}, {\n  setProject: projectActions.setProject,\n  resetProject: projectActions.resetProject,\n  setGameVolume: previewActions.setGameVolume,\n  setLog: webrtcActions.setLog,\n  setVideoURL: videoActions.setVideoURL\n})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Container.js"],"names":["React","Component","connect","injectIntl","DndProvider","HTML5Backend","projectActions","previewActions","webrtcActions","videoActions","request","AssetLibrary","PAGETYPE","DEFAULT_VIDEO_URL","detectIE","View","Popup","showPopUp","TrackingUtil","Container","props","componentDidMount","isIE","history","replace","BUILDER","email","state","pageType","params","pId","reservationId","WIZLIVE_1V4","regexRoomId","exec","roomId","groups","WIZLIVE","MONITOR_1V4","BUILDER_EDIT","BUILDER_READONLY","QNA_READONLY","VIDEOCLASS","TUTORIAL","RECORD_PLAYER","MONITOR","BUILDER_LEARN","getWizLiveRoomId","then","res","json","wizLiveRoom","myLecture","lecture","guideVideo","setVideoURL","setState","id","isTutor","studentEmail","tutorEmail","lectureVideos","JSON","parse","video","lectureSlides","slides","lectureState","lectureTitle","title","isFreeTrial","loadWizlab","intl","window","prompt","getMonitorRoom1v4","wizLive1v4Room","getWizLive1v4RoomId","defaultMonitor","loadWizlabForQuestion","loadDefaultProject","loadTutorial","getReservationById","reservation","loadRecordProject","isLoading","popupStates","snippet","api","chat","property","spriteBox","preview","soundBox","scene","animation","qna","console","error","componentWillUnmount","localStorage","removeItem","myLevelInx","getMyTutorialList","list","completeArr","rows","filter","item","isComplete","length","reduce","pv","cv","tutorial","level","getMyTutorial","levelItem","Number","createTutorialItem","location","reload","template","tutorialState","loadAssetsFromScene","setProject","videoclass","currentTutorial","getDefaultProject","response","project","setBrowserTitle","name","document","loadProject","isProjectPopupOpened","templateId","loadTemplateProject","urlParams","URLSearchParams","search","get","e","questionId","getQuestionState","projectState","openProjectPopup","closeProjectPopup","getDevelopingProject","pathname","createNewProjectFromServer","randomChar","String","fromCharCode","Math","floor","random","formatMessage","postDevelopingProject","videoURL","getDefaultTemplateProject","handleSelectMainViewMode","mainViewMode","handleChangeZIndex","sort","arr","indexes","slice","i","value","splice","push","popupZIndexes","setItem","stringify","handleSelectTab","from","setLog","sendGAEvent","category","action","label","toUpperCase","undefined","live","showModal","modalContent","handleHelp","isHelpOpened","setVideoclassRef","ref","videoclassRef","getItem","path","split","live1v4","monitor1v4","includes","prevProps","prevState","screenMode","is3DProject","icon","userinfo","resetProject","setGameVolume"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as projectActions from \"./Store/Reducer/project\";\nimport * as previewActions from \"./Store/Reducer/preview\";\nimport * as webrtcActions from \"./Store/Reducer/webrtc\";\nimport * as videoActions from \"./Store/Reducer/video\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport AssetLibrary from \"./utils/assetLibrary\";\nimport { PAGETYPE, DEFAULT_VIDEO_URL } from \"../../Common/Util/Constant\";\nimport { detectIE } from \"../../Common/Util/detectBrowser\";\nimport View from \"./View\";\nimport Popup, { showPopUp } from \"../../Common/Component/PopUp\";\nimport * as TrackingUtil from \"../../Common/Util/TrackingUtil\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    let popupStates = JSON.parse(localStorage.getItem(\"popupStates\"));\n    if (!popupStates) {\n      popupStates = {\n        video: false,\n        snippet: false,\n        api: false,\n        chat: false,\n        property: false,\n        spriteBox: false,\n        preview: false,\n        soundBox: false,\n        scene: false,\n        animation: false,\n        qna: false\n      };\n    }\n    popupStates = {\n      ...popupStates,\n      tutorial: props.location.path.split(\"/\")[1] === PAGETYPE.TUTORIAL,\n      live: props.location.path.split(\"/\")[1] === PAGETYPE.WIZLIVE,\n      live1v4: props.location.path.split(\"/\")[1] === PAGETYPE.WIZLIVE_1V4,\n      monitor1v4: props.location.path.split(\"/\")[1] === PAGETYPE.MONITOR_1V4\n    };\n\n    let popupZIndexes = JSON.parse(localStorage.getItem(\"popupZIndexes\"));\n    if (!popupZIndexes || !popupZIndexes.includes(\"snippet\")) {\n      popupZIndexes = [\n        \"tutorial\",\n        \"live\",\n        \"video\",\n        \"snippet\",\n        \"api\",\n        \"chat\",\n        \"property\",\n        \"spriteBox\",\n        \"preview\",\n        \"soundBox\",\n        \"scene\",\n        \"animation\",\n        \"qna\"\n      ];\n    }\n\n    this.templateId = localStorage.getItem(\"templateId\");\n\n    this.roomId = null;\n\n    this.state = {\n      isLoading: true,\n      isProjectPopupOpened: false,\n      params: props.location.params,\n      pageType: props.location.path.split(\"/\")[1],\n      popupStates,\n      popupZIndexes,\n      currentTutorial: undefined,\n      videoclassRef: undefined\n    };\n\n    switch (this.state.pageType) {\n      case PAGETYPE.WIZLIVE:\n        this.state.reservationId = null;\n        this.state.roomId = null;\n        this.state.isTutor = null;\n        this.state.studentEmail = null;\n        this.state.tutorEmail = null;\n        this.state.isFreeTrial = null;\n        break;\n      case PAGETYPE.WIZLIVE_1V4:\n      case PAGETYPE.MONITOR_1V4:\n        this.state.reservationId = null;\n        this.state.roomId = null;\n        this.state.isTutor = null;\n        this.state.studentEmail = null;\n        this.state.tutorEmail = null;\n        this.state.isFreeTrial = null;\n        break;\n      case PAGETYPE.RECORD_PLAYER:\n        this.state.reservationId = this.state.params.reservationId;\n        break;\n      default:\n        break;\n    }\n\n    this.isIE = detectIE();\n  }\n\n  componentDidMount = async () => {\n    try {\n      if (this.isIE) {\n        this.props.history.replace(\"/\" + PAGETYPE.BUILDER);\n        return;\n      }\n\n      let { email } = this.props;\n      const { pageType, params } = this.state;\n      const { pId, reservationId } = params;\n\n      if (pageType === PAGETYPE.WIZLIVE_1V4) {\n        const regexRoomId = /(\\w+)-(\\w+)-(\\w+)-(\\w+)-(\\w+)-(?<roomId>\\w+)/;\n\n        const {\n          groups: { roomId }\n        } = regexRoomId.exec(pId);\n\n        this.roomId = roomId;\n      }\n\n      // this.timer = setInterval(() => {\n      //   request.updateBuilderUsageTime({\n      //     email: this.props.email,\n      //     time: new Date().getTime()\n      //   });\n      // }, 1000);\n\n      // TrackingUtil.sendPageEvent(\"/\" + pageType, this.props.email);\n\n      switch (pageType) {\n        case PAGETYPE.WIZLIVE:\n          const wizLiveRoom = await request\n            .getWizLiveRoomId({ email })\n            .then(res => res.json());\n          if (wizLiveRoom && wizLiveRoom.roomId) {\n            wizLiveRoom.myLecture.lecture.guideVideo &&\n              this.props.setVideoURL(wizLiveRoom.myLecture.lecture.guideVideo);\n            this.setState(\n              {\n                reservationId: wizLiveRoom.id,\n                roomId: wizLiveRoom.roomId,\n                isTutor: wizLiveRoom.isTutor,\n                studentEmail: wizLiveRoom.studentEmail,\n                tutorEmail: wizLiveRoom.tutorEmail,\n                lectureVideos: JSON.parse(wizLiveRoom.myLecture.lecture.video),\n                lectureSlides: JSON.parse(wizLiveRoom.myLecture.lecture.slides),\n                lectureState: wizLiveRoom.myLecture.lecture.state,\n                lectureTitle: wizLiveRoom.myLecture.lecture.title,\n                isFreeTrial: wizLiveRoom.isFreeTrial\n              },\n              () => {\n                this.loadWizlab();\n              }\n            );\n          } else {\n            showPopUp(\n              <Popup.OneButton\n                intl={this.props.intl}\n                titleId=\"ID_BUILDER_ALERT_MSG_CLIVE_NOT_FOUND\"\n                buttonNameId=\"ID_BUILDER_ALERT_CONFIRMBTN\"\n                buttonAction={() => {\n                  if (pId)\n                    this.props.history.replace(`/${PAGETYPE.BUILDER}/${pId}`);\n                  else this.props.history.replace(\"/\" + PAGETYPE.WIZLIVE);\n                }}\n              />\n            );\n          }\n          break;\n        case PAGETYPE.MONITOR_1V4:\n        case PAGETYPE.WIZLIVE_1V4:\n          let wizLive1v4Room;\n\n          if (pageType === PAGETYPE.MONITOR_1V4) {\n            email = window.prompt(\n              \"튜터의 이메일을 입력해주세요\",\n              \"johnjs@wizschool.io\"\n            );\n\n            wizLive1v4Room = await request\n              .getMonitorRoom1v4({ email })\n              .then(res => res.json());\n          } else {\n            // WIZLIVE_1v4\n            wizLive1v4Room = await request\n              .getWizLive1v4RoomId({ email, roomId: this.roomId })\n              .then(res => res.json());\n          }\n\n          if (wizLive1v4Room && wizLive1v4Room.roomId) {\n            // wizLiveRoom.myLecture.lecture.guideVideo &&\n            //   this.props.setVideoURL(wizLiveRoom.myLecture.lecture.guideVideo);\n            this.setState(\n              {\n                reservationId: wizLive1v4Room.id,\n                roomId: wizLive1v4Room.roomId,\n                isTutor:\n                  pageType === PAGETYPE.MONITOR_1V4\n                    ? false\n                    : wizLive1v4Room.isTutor,\n                studentEmail: wizLive1v4Room.studentEmail,\n                tutorEmail: wizLive1v4Room.tutorEmail,\n                lectureVideos: JSON.parse(\n                  wizLive1v4Room.myLecture.lecture.video\n                ),\n                lectureSlides: JSON.parse(\n                  wizLive1v4Room.myLecture.lecture.slides\n                ),\n                lectureState: wizLive1v4Room.myLecture.lecture.state,\n                lectureTitle: wizLive1v4Room.myLecture.lecture.title,\n                isFreeTrial: wizLive1v4Room.isFreeTrial\n              },\n              () => {\n                if (pageType === PAGETYPE.WIZLIVE_1V4) {\n                  this.loadWizlab();\n                } else if (pageType === PAGETYPE.MONITOR_1V4) {\n                  this.defaultMonitor();\n                }\n              }\n            );\n          } else {\n            showPopUp(\n              <Popup.OneButton\n                intl={this.props.intl}\n                titleId=\"ID_BUILDER_ALERT_MSG_CLIVE_NOT_FOUND\"\n                buttonNameId=\"ID_BUILDER_ALERT_CONFIRMBTN\"\n                buttonAction={() => {\n                  if (pId)\n                    this.props.history.replace(`/${PAGETYPE.BUILDER}/${pId}`);\n                  else this.props.history.replace(\"/\" + PAGETYPE.WIZLIVE);\n                }}\n              />\n            );\n          }\n          break;\n        case PAGETYPE.BUILDER:\n          this.loadWizlab();\n          break;\n        case PAGETYPE.BUILDER_EDIT:\n          this.loadWizlab();\n          break;\n        case PAGETYPE.BUILDER_READONLY:\n          showPopUp(\n            <Popup.OneButton\n              intl={this.props.intl}\n              titleId=\"ID_BUILDER_ALERT_MSG_READONLY\"\n              buttonNameId=\"ID_BUILDER_ALERT_CONFIRMBTN\"\n            />\n          );\n          this.loadWizlab();\n          break;\n        case PAGETYPE.QNA_READONLY:\n          showPopUp(\n            <Popup.OneButton\n              intl={this.props.intl}\n              titleId=\"ID_BUILDER_ALERT_MSG_READONLY\"\n              buttonNameId=\"ID_BUILDER_ALERT_CONFIRMBTN\"\n            />\n          );\n          this.loadWizlabForQuestion();\n          break;\n        case PAGETYPE.VIDEOCLASS:\n          this.loadDefaultProject();\n          break;\n        case PAGETYPE.TUTORIAL:\n          if (!this.props.email) {\n            showPopUp(\n              <Popup.OneButton\n                title=\"로그인 후 이용해주세요\"\n                buttonName=\"확인\"\n              />\n            );\n            this.loadDefaultProject();\n            return;\n          }\n          this.loadTutorial();\n          break;\n        case PAGETYPE.RECORD_PLAYER:\n          const reservation = await request\n            .getReservationById({ reservationId })\n            .then(res => res.json());\n          this.setState({ reservation: reservation.reservation }, () => {\n            this.loadRecordProject();\n          });\n          break;\n        case PAGETYPE.MONITOR:\n          this.defaultMonitor();\n          break;\n        case PAGETYPE.BUILDER_LEARN:\n          this.setState({\n            isLoading: false, \n            popupStates: {\n              video: false,\n              snippet: false,\n              api: false,\n              chat: false,\n              property: false,\n              spriteBox: false,\n              preview: false,\n              soundBox: false,\n              scene: false,\n              animation: false,\n              qna: false\n            } \n          });\n          break;\n          default:\n          this.loadWizlab();\n          break;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  componentWillUnmount = () => {\n    // this.timer && clearInterval(this.timer);\n    localStorage.removeItem(\"templateId\");\n  };\n\n  loadTutorial = async () => {\n    /** load & valid check */\n    let myLevelInx = 0;\n    let res = await request.getMyTutorialList({ email: this.props.email });\n    let list = await res.json();\n    let completeArr = list.rows.filter(item => {\n      return item.isComplete;\n    });\n    if (completeArr.length) {\n      myLevelInx = completeArr.reduce((pv, cv) => {\n        return pv.tutorial.level > cv.tutorial.level ? pv : cv;\n      }).tutorial.level;\n    }\n\n    const levelItem = await request\n      .getMyTutorial({\n        email: this.props.email,\n        level: this.state.params.level\n      })\n      .then(res => res.json());\n\n    if (!levelItem) {\n      if (myLevelInx + 1 === Number(this.state.params.level)) {\n        await request.createTutorialItem({\n          email: this.props.email,\n          level: this.state.params.level\n        });\n        window.location.reload();\n      } else {\n        showPopUp(\n          <Popup.OneButton\n            title=\"잘못된 경로입니다\"\n            buttonName=\"확인\"\n            buttonAction={() => this.loadDefaultProject()}\n          />\n        );\n      }\n    } else {\n      const template = JSON.parse(levelItem.tutorial.template);\n      const tutorialState = JSON.parse(levelItem.tutorial.state);\n      AssetLibrary.loadAssetsFromScene(tutorialState.scene, () => {\n        this.props.setProject({\n          state: tutorialState,\n          videoclass: template\n        });\n        this.setState({ isLoading: false, currentTutorial: levelItem });\n      });\n    }\n  };\n\n  defaultMonitor = async () => {\n    try {\n      let response = await request.getDefaultProject();\n      const project = await response.json();\n\n      this.setBrowserTitle(project.name);\n      project.state = JSON.parse(project.state);\n\n      AssetLibrary.loadAssetsFromScene(project.state.scene, () => {\n        this.props.setProject(project);\n        this.setState({ isLoading: false });\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  loadWizlab = () => {\n    document.title = \"WizLab\";\n    // const { pId } = this.state.params;\n    // if (pId) {\n    //   if (this.props.email) {\n    //     this.loadProject(pId);\n    //   } else {\n    //     this.handleDefaultCase();\n    //   }\n    // } else {\n    //   this.handleDefaultCase();\n    // }\n    const { pId } = this.state.params;\n    if (this.props.email) {\n      if (pId) {\n        this.loadProject(pId);\n      } else {\n        this.setState({ isProjectPopupOpened: true });\n      }\n    } else {\n      // this.handleDefaultCase();\n      if (!this.props.email && this.templateId) {\n        this.loadTemplateProject(this.templateId);\n        localStorage.removeItem(\"templateId\");\n        return;\n      }\n\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const templateId = urlParams.get(\"t\");\n        if (templateId) {\n          this.loadTemplateProject(templateId);\n        } else {\n          this.setState({ isProjectPopupOpened: true });\n        }\n      } catch (e) {\n        this.setState({ isProjectPopupOpened: false });\n      }\n    }\n  };\n\n  loadWizlabForQuestion = async () => {\n    const questionId = this.state.params.questionId;\n    let response = await request.getQuestionState({ id: questionId });\n    let projectState = await response.json();\n    if (projectState) {\n      projectState = JSON.parse(projectState.state);\n\n      AssetLibrary.loadAssetsFromScene(projectState.scene, () => {\n        const project = {\n          state: projectState,\n          name: \"\"\n        };\n        this.props.setProject(project);\n        this.setState({ isLoading: false });\n      });\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.email && !this.props.email) {\n      this.props.history.replace({ pathname: \"/\" + PAGETYPE.BUILDER });\n      window.location.reload();\n    } else if (!prevProps.email && this.props.email) {\n      this.props.history.replace({ pathname: \"/\" + PAGETYPE.BUILDER });\n      window.location.reload();\n    }\n  }\n\n  openProjectPopup = () => {\n    this.setState({ isProjectPopupOpened: true });\n  };\n\n  closeProjectPopup = () => {\n    this.setState({ isProjectPopupOpened: false });\n  };\n\n  loadRecordProject = async () => {\n    const state = JSON.parse(this.state.reservation.myLecture.lecture.state);\n    AssetLibrary.loadAssetsFromScene(state.scene, () => {\n      this.props.setProject({ state });\n      this.setState({ isLoading: false });\n    });\n  };\n\n  loadProject = async pId => {\n    try {\n      let response = await request.getDevelopingProject({ pId });\n      const project = await response.json();\n      if (project) {\n        if (\n          this.state.pageType === PAGETYPE.BUILDER_READONLY ||\n          this.state.pageType === PAGETYPE.QNA_READONLY\n        ) {\n          if (!this.props.isTutor) {\n            this.props.history.replace({ pathname: \"/\" + PAGETYPE.BUILDER });\n            return;\n          }\n        } else if (\n          project.email !== this.props.email &&\n          this.state.pageType !== PAGETYPE.WIZLIVE &&\n          this.state.pageType !== PAGETYPE.WIZLIVE_1V4\n        ) {\n          this.props.history.replace({\n            pathname: \"/\" + PAGETYPE.BUILDER\n          });\n          return;\n        }\n\n        this.setBrowserTitle(project.name);\n        project.state = JSON.parse(project.state);\n\n        AssetLibrary.loadAssetsFromScene(project.state.scene, () => {\n          this.props.setProject(project);\n          this.setState({ isLoading: false });\n        });\n      } else {\n        const { templateId } = this.state.params;\n        this.createNewProjectFromServer(pId, templateId);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  setBrowserTitle = title => {\n    document.title = `WizLab`;\n    if (title) document.title += ` - ${title}`;\n  };\n\n  createNewProjectFromServer = async (pId, templateId) => {\n    let name;\n    const email = this.props.email;\n\n    if (this.state.lectureTitle) {\n      name = this.state.lectureTitle;\n    } else {\n      const randomChar = String.fromCharCode(\n        Math.floor(Math.random() * Math.floor(48)) + 48\n      ); //temp\n      name = this.props.intl.formatMessage(\n        { id: \"ID_TIP_LAYOUT_NEW_PROJECT_FORMAT\" },\n        { randomChar: randomChar }\n      );\n    }\n    let params = { pId, email, name };\n    if (this.state.lectureState) {\n      params.state = this.state.lectureState;\n    }\n    if (templateId) {\n      params.templateId = templateId;\n    }\n    try {\n      const response = await request.postDevelopingProject(params);\n      const project = await response.json();\n      this.setBrowserTitle(project.name);\n      project.state = JSON.parse(project.state);\n      project.video = {\n        videoURL: DEFAULT_VIDEO_URL\n      };\n\n      AssetLibrary.loadAssetsFromScene(project.state.scene, () => {\n        this.props.setProject(project);\n        this.setState({ isLoading: false });\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  loadDefaultProject = async () => {\n    const response = await request.getDefaultProject();\n    const project = await response.json();\n\n    project.name = \"\";\n    this.setBrowserTitle(project.name);\n    project.state = JSON.parse(project.state);\n    project.video = {\n      videoURL: DEFAULT_VIDEO_URL\n    };\n    AssetLibrary.loadAssetsFromScene(project.state.scene, () => {\n      this.props.setProject(project);\n      this.setState({ isLoading: false });\n    });\n  };\n\n  loadTemplateProject = async templateId => {\n    const response = await request.getDefaultTemplateProject({\n      id: templateId\n    });\n    const project = await response.json();\n\n    project.name = \"\";\n    this.setBrowserTitle(project.name);\n    project.state = JSON.parse(project.state);\n    project.video = {\n      videoURL: DEFAULT_VIDEO_URL\n    };\n    AssetLibrary.loadAssetsFromScene(project.state.scene, () => {\n      this.props.setProject(project);\n      this.setState({ isLoading: false });\n    });\n  };\n\n  handleSelectMainViewMode = mainViewMode => {\n    this.setState({ mainViewMode });\n  };\n\n  handleChangeZIndex = name => {\n    const sort = arr => {\n      let indexes = arr.slice();\n      for (let i = 0; i < indexes.length; i++) {\n        if (name === indexes[i]) {\n          const value = indexes[i];\n          indexes.splice(i, 1);\n          indexes.push(value);\n          break;\n        }\n      }\n      return indexes;\n    };\n\n    this.setState(\n      state => {\n        return {\n          popupZIndexes: sort(state.popupZIndexes)\n        };\n      },\n      () => {\n        localStorage.setItem(\n          \"popupZIndexes\",\n          JSON.stringify(this.state.popupZIndexes)\n        );\n      }\n    );\n  };\n\n  handleSelectTab = (name, from) => {\n    this.props.setLog({ [name]: !this.state.popupStates[name] });\n    if (!this.state.popupStates[name]) {\n      if (name === \"spriteView\" || name === \"sound\" || name === \"preview\") {\n        TrackingUtil.sendGAEvent({\n          category: \"Builder\",\n          action: `MenuActions`,\n          label: name[0].toUpperCase() + name.slice(1)\n        });\n      }\n\n      if (name === \"spriteBox\") {\n        TrackingUtil.sendGAEvent({\n          category: \"Builder\",\n          action: `AddSprite`,\n          label: from\n        });\n      }\n    }\n    this.setState(\n      state => {\n        return {\n          popupStates: {\n            ...state.popupStates,\n            [name]: !state.popupStates[name]\n          }\n        };\n      },\n      () => {\n        localStorage.setItem(\n          \"popupStates\",\n          JSON.stringify({\n            ...this.state.popupStates,\n            tutorial: undefined,\n            live: undefined\n          })\n        );\n        if (this.state.popupStates[name]) {\n          this.handleChangeZIndex(name);\n        }\n      }\n    );\n  };\n\n  showModal = modalContent => {\n    this.setState({ modalContent });\n  };\n  handleHelp = isHelpOpened => {\n    this.setState({ isHelpOpened });\n  };\n\n  setVideoclassRef = ref => {\n    this.setState({ videoclassRef: ref });\n  };\n\n  render() {\n    const { screenMode, location, email, name } = this.props;\n    const {\n      pageType,\n      roomId,\n      reservationId,\n      isTutor,\n      isLoading,\n      tutorEmail,\n      studentEmail,\n      lectureVideos,\n      lectureSlides,\n      reservation,\n      isProjectPopupOpened,\n      modalContent,\n      isHelpOpened,\n      popupStates,\n      popupZIndexes,\n      currentTutorial,\n      isFreeTrial,\n      videoclassRef\n    } = this.state;\n    const { pId } = this.state.params;\n    const {\n      isIE,\n      openProjectPopup,\n      closeProjectPopup,\n      handleHelp,\n      handleChangeZIndex,\n      handleSelectTab,\n      showModal,\n      setVideoclassRef\n    } = this;\n\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <View\n          screenMode={screenMode}\n          location={location}\n          pageType={pageType}\n          roomId={roomId}\n          reservationId={reservationId}\n          isTutor={isTutor}\n          isLoading={isLoading}\n          isIE={isIE}\n          tutorEmail={tutorEmail}\n          studentEmail={studentEmail}\n          lectureVideos={lectureVideos}\n          lectureSlides={lectureSlides}\n          pId={pId}\n          reservation={reservation}\n          isProjectPopupOpened={isProjectPopupOpened}\n          openProjectPopup={openProjectPopup}\n          closeProjectPopup={closeProjectPopup}\n          modalContent={modalContent}\n          showModal={showModal}\n          isHelpOpened={isHelpOpened}\n          handleHelp={handleHelp}\n          popupStates={popupStates}\n          popupZIndexes={popupZIndexes}\n          handleChangeZIndex={handleChangeZIndex}\n          handleSelectTab={handleSelectTab}\n          currentTutorial={currentTutorial}\n          isFreeTrial={isFreeTrial}\n          videoclassRef={videoclassRef}\n          setVideoclassRef={setVideoclassRef}\n          email={email}\n          name={name}\n        />\n      </DndProvider>\n    );\n  }\n}\n\nexport const is3DProject = item => {\n  if (item.icon) {\n    return item.icon.includes(\"redbrick\");\n  }\n};\n\nexport default connect(\n  state => ({\n    email: state.userinfo.email,\n    name: state.userinfo.name,\n    isTutor: state.userinfo.isTutor,\n    screenMode: state.preview.screenMode\n  }),\n  {\n    setProject: projectActions.setProject,\n    resetProject: projectActions.resetProject,\n    setGameVolume: previewActions.setGameVolume,\n    setLog: webrtcActions.setLog,\n    setVideoURL: videoActions.setVideoURL\n  }\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}