{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/MyAPK/Components/APKItem/index.js\";\nimport React, { useState } from \"react\";\nimport \"./index.scss\";\nimport moment from \"moment\";\nimport { WIZLAB_APK_STATUS } from \"../../../../Common/Util/Constant\";\nimport linkIcon from \"../../../../Image/icon-link-apkproject.svg\";\nimport { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport ApkEditPopup from \"../APKEditPopup\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport loadingIcon from \"../../../../Image/icon-loading-apk.svg\";\nimport shareIcon from \"../../../../Image/icon-share-m.svg\";\nimport APKSharePopup from \"../APKsharePopup\";\n\nvar APKItem = function APKItem(props) {\n  var apk = props.apk,\n      userName = props.userName;\n  var onClickProject = props.onClickProject,\n      onClickEditPopupSubmit = props.onClickEditPopupSubmit;\n  if (!apk || !apk.apkVersion) return React.createElement(React.Fragment, null);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isShowRetryLoading = _useState2[0],\n      setIsShowRetryLoading = _useState2[1]; // const isMobile = window.innerWidth < 1080;\n\n\n  var getRightContent = function getRightContent(isMobile) {\n    var content;\n\n    switch (apk.apkVersion.status) {\n      case WIZLAB_APK_STATUS.ONGOING:\n        content = React.createElement(\"div\", {\n          className: \"APKItem_rightWrap_ongoing\".concat(isMobile ? \"_mobile\" : \"\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"APKItem_rightWrap_ongoing-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27\n          },\n          __self: this\n        }, \"APK \\uC81C\\uC791\\uC911\"), React.createElement(\"img\", {\n          src: loadingIcon,\n          alt: \"loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        }));\n        break;\n\n      case WIZLAB_APK_STATUS.CANCEL:\n        content = React.createElement(\"div\", {\n          className: \"APKItem_rightWrap_cancel\".concat(isMobile ? \"_mobile\" : \"\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"APKItem_rw_cc_flexWrap\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, isShowRetryLoading ? React.createElement(\"img\", {\n          src: loadingIcon,\n          alt: \"loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }) : React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"APKItem_rw_cc_fw-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, \"APK \\uC81C\\uC791 \\uC2E4\\uD328\"), React.createElement(\"div\", {\n          className: \"APKItem_rw_cc_fw-retryBtn\",\n          onClick: onClickRetryCreatingAPK,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, \"\\uC7AC\\uC2DC\\uB3C4\"))));\n        break;\n\n      case WIZLAB_APK_STATUS.COMPLETE:\n        content = React.createElement(\"div\", {\n          className: \"APKItem_rightWrap_complete\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"rightWrap_cancel_top\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, apk.apkVersion.apkUrl && React.createElement(\"img\", {\n          className: \"shareImg\",\n          src: shareIcon,\n          alt: \"img\",\n          onClick: onClickShare,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"rightWrap_cancel_bottom\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"apk__edit\",\n          onClick: onClickUpdateAPK,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"\\uC218\\uC815\"), React.createElement(\"div\", {\n          className: \"apk__download\",\n          onClick: onClickPCDownload,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"\\uB2E4\\uC6B4\\uB85C\\uB4DC\")));\n        break;\n\n      default:\n        break;\n    }\n\n    return content;\n  };\n\n  var onClickUpdateAPK = function onClickUpdateAPK() {\n    showPopUp(React.createElement(ApkEditPopup, {\n      apk: apk,\n      onClickEditPopupSubmit: onClickEditPopupSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), {\n      defaultPadding: false\n    });\n  };\n\n  var onClickPCDownload = function onClickPCDownload() {\n    window.open(apk.apkVersion.apkUrl);\n  };\n\n  var onClickShare = function onClickShare() {\n    showPopUp(React.createElement(APKSharePopup, {\n      apk: apk,\n      userName: userName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }));\n  };\n\n  var onClickRetryCreatingAPK = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var updateInfo;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return postUpdateAPK();\n\n            case 2:\n              updateInfo = _context.sent;\n\n              if (!(!updateInfo || !updateInfo.success)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setIsShowRetryLoading(true);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onClickRetryCreatingAPK() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var postUpdateAPK = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _apk$apkVersion, appName, appIcon, updateInfo;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _apk$apkVersion = apk.apkVersion, appName = _apk$apkVersion.appName, appIcon = _apk$apkVersion.appIcon;\n              _context2.next = 3;\n              return request.updateWizlabAPK({\n                appName: appName,\n                appIcon: appIcon,\n                packageName: apk.packageName\n              }).then(function (res) {\n                return res.json();\n              }).catch(function (e) {\n                console.error(e);\n                return undefined;\n              });\n\n            case 3:\n              updateInfo = _context2.sent;\n              return _context2.abrupt(\"return\", updateInfo);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function postUpdateAPK() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: \"APKItem\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_h-appName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, apk.apkVersion.appName), React.createElement(\"div\", {\n    className: \"APKItem_h_projectBtnWrap\",\n    onClick: onClickProject,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_h_pbw-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"\\uD504\\uB85C\\uC81D\\uD2B8\"), React.createElement(\"img\", {\n    src: linkIcon,\n    alt: \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"APKItem_content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: apk.apkVersion.appIcon,\n    alt: \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"APKItem_apkInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_ai_topwrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_ai_tw-packageName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, apk.packageName), React.createElement(\"div\", {\n    className: \"APKItem_ai_tw-version\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"v\".concat(apk.apkVersion.version, \".0\"))), React.createElement(\"div\", {\n    className: \"APKItem_ai_bottomWrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_ai_flexWrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_ai_fw-createText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"\\uC0DD\\uC131\\uC77C\"), React.createElement(\"div\", {\n    className: \"APKItem_ai-createdAt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, moment(apk.apkVersion.createdAt).format(\"YYYY.M.D\"))), React.createElement(\"div\", {\n    className: \"APKItem_ai_flexWrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"APKItem_ai_fw-updateText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"\\uCD5C\\uADFC \\uC5C5\\uB370\\uC774\\uD2B8\"), React.createElement(\"div\", {\n    className: \"APKItem_ai-updatedAt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, moment(apk.apkVersion.updatedAt).format(\"YYYY.M.D\"))))), getRightContent(false)));\n};\n\nexport default APKItem;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/MyAPK/Components/APKItem/index.js"],"names":["React","useState","moment","WIZLAB_APK_STATUS","showPopUp","ApkEditPopup","request","APKSharePopup","APKItem","props","apk","userName","onClickProject","onClickEditPopupSubmit","apkVersion","isShowRetryLoading","setIsShowRetryLoading","getRightContent","isMobile","content","status","ONGOING","loadingIcon","CANCEL","onClickRetryCreatingAPK","COMPLETE","apkUrl","shareIcon","onClickShare","onClickUpdateAPK","onClickPCDownload","defaultPadding","window","open","postUpdateAPK","updateInfo","success","appName","appIcon","updateWizlabAPK","packageName","then","res","json","catch","e","console","error","undefined","linkIcon","version","createdAt","format","updatedAt"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"./index.scss\";\nimport moment from \"moment\";\nimport { WIZLAB_APK_STATUS } from \"../../../../Common/Util/Constant\";\nimport linkIcon from \"../../../../Image/icon-link-apkproject.svg\";\nimport { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport ApkEditPopup from \"../APKEditPopup\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport loadingIcon from \"../../../../Image/icon-loading-apk.svg\";\nimport shareIcon from \"../../../../Image/icon-share-m.svg\";\nimport APKSharePopup from \"../APKsharePopup\";\nconst APKItem = props => {\n  const { apk, userName } = props;\n  const { onClickProject, onClickEditPopupSubmit } = props;\n  if (!apk || !apk.apkVersion) return <></>;\n  const [isShowRetryLoading, setIsShowRetryLoading] = useState(false);\n  // const isMobile = window.innerWidth < 1080;\n\n  const getRightContent = isMobile => {\n    let content;\n    switch (apk.apkVersion.status) {\n      case WIZLAB_APK_STATUS.ONGOING:\n        content = (\n          <div\n            className={`APKItem_rightWrap_ongoing${isMobile ? \"_mobile\" : \"\"}`}\n          >\n            <div className=\"APKItem_rightWrap_ongoing-text\">APK 제작중</div>\n            <img src={loadingIcon} alt=\"loading\" />\n          </div>\n        );\n        break;\n      case WIZLAB_APK_STATUS.CANCEL:\n        content = (\n          <div\n            className={`APKItem_rightWrap_cancel${isMobile ? \"_mobile\" : \"\"}`}\n          >\n            <div className=\"APKItem_rw_cc_flexWrap\">\n              {isShowRetryLoading ? (\n                <img src={loadingIcon} alt=\"loading\" />\n              ) : (\n                <>\n                  <div className=\"APKItem_rw_cc_fw-text\">APK 제작 실패</div>\n                  <div\n                    className=\"APKItem_rw_cc_fw-retryBtn\"\n                    onClick={onClickRetryCreatingAPK}\n                  >\n                    재시도\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        );\n        break;\n      case WIZLAB_APK_STATUS.COMPLETE:\n        content = (\n          <div className={`APKItem_rightWrap_complete`}>\n            <div className={`rightWrap_cancel_top`}>\n              {apk.apkVersion.apkUrl && (\n                <img\n                  className={`shareImg`}\n                  src={shareIcon}\n                  alt=\"img\"\n                  onClick={onClickShare}\n                />\n              )}\n            </div>\n            <div className={`rightWrap_cancel_bottom`}>\n              <div className={`apk__edit`} onClick={onClickUpdateAPK}>\n                수정\n              </div>\n              <div className={`apk__download`} onClick={onClickPCDownload}>\n                다운로드\n              </div>\n            </div>\n          </div>\n        );\n        break;\n\n      default:\n        break;\n    }\n    return content;\n  };\n\n  const onClickUpdateAPK = () => {\n    showPopUp(\n      <ApkEditPopup\n        apk={apk}\n        onClickEditPopupSubmit={onClickEditPopupSubmit}\n      />,\n      { defaultPadding: false }\n    );\n  };\n\n  const onClickPCDownload = () => {\n    window.open(apk.apkVersion.apkUrl);\n  };\n\n  const onClickShare = () => {\n    showPopUp(<APKSharePopup apk={apk} userName={userName} />);\n  };\n\n  const onClickRetryCreatingAPK = async () => {\n    const updateInfo = await postUpdateAPK();\n    if (!updateInfo || !updateInfo.success) {\n      return;\n    }\n    setIsShowRetryLoading(true);\n  };\n\n  const postUpdateAPK = async () => {\n    const { appName, appIcon } = apk.apkVersion;\n    const updateInfo = await request\n      .updateWizlabAPK({\n        appName,\n        appIcon,\n        packageName: apk.packageName\n      })\n      .then(res => res.json())\n      .catch(e => {\n        console.error(e);\n        return undefined;\n      });\n    return updateInfo;\n  };\n\n  return (\n    <div className=\"APKItem\">\n      <div className=\"APKItem_header\">\n        <div className=\"APKItem_h-appName\">{apk.apkVersion.appName}</div>\n        <div className=\"APKItem_h_projectBtnWrap\" onClick={onClickProject}>\n          <div className=\"APKItem_h_pbw-text\">프로젝트</div>\n          <img src={linkIcon} alt=\"img\" />\n        </div>\n      </div>\n      <div className=\"APKItem_content\">\n        <div className=\"APKItem-icon\">\n          <img src={apk.apkVersion.appIcon} alt=\"img\" />\n        </div>\n        <div className=\"APKItem_apkInfo\">\n          <div className=\"APKItem_ai_topwrap\">\n            <div className=\"APKItem_ai_tw-packageName\">{apk.packageName}</div>\n            <div className=\"APKItem_ai_tw-version\">\n              {`v${apk.apkVersion.version}.0`}\n            </div>\n          </div>\n          <div className=\"APKItem_ai_bottomWrap\">\n            <div className=\"APKItem_ai_flexWrap\">\n              <div className=\"APKItem_ai_fw-createText\">생성일</div>\n              <div className=\"APKItem_ai-createdAt\">\n                {moment(apk.apkVersion.createdAt).format(\"YYYY.M.D\")}\n              </div>\n            </div>\n\n            <div className=\"APKItem_ai_flexWrap\">\n              <div className=\"APKItem_ai_fw-updateText\">최근 업데이트</div>\n              <div className=\"APKItem_ai-updatedAt\">\n                {moment(apk.apkVersion.updatedAt).format(\"YYYY.M.D\")}\n              </div>\n            </div>\n          </div>\n        </div>\n        {getRightContent(false)}\n      </div>\n    </div>\n  );\n};\n\nexport default APKItem;\n"]},"metadata":{},"sourceType":"module"}