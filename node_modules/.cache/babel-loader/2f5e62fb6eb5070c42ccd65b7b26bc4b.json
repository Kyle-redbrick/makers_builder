{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Courses/View.js\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 24px;\\n  position: absolute;\\n  right: 13px;\\n  top: 13px;\\n  z-index: 10;\\n\\n  @media screen and (max-width: 1169px){\\n    right: 8px;\\n    top: 8px;\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 52px;\\n  padding-left: 16px;\\n  padding-right: 50px;\\n  border-radius: 10px;\\n  background-color: rgba(255, 255, 255, 0.1);\\n  border: none;\\n  font-size: 16px;\\n  line-height: 1.38;\\n  color: #fff;\\n  outline: none;\\n\\n  @media screen and (max-width: 1169px){\\n    box-sizing: border-box;\\n    height: 40px;\\n    padding-left: 13px;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 370px;\\n  display: flex;\\n  position: relative;\\n\\n  @media screen and (max-width: 1169px){\\n    width: 100%;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 20px 0 39.5px;\\n  \\n  @media screen and (max-width: 1169px){\\n    width: 100%;\\n    padding: 10px 0 29.5px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport QueryString from \"query-string\";\nimport styled from \"@emotion/styled\";\nimport Layout from \"../../Common/Component/Layout\";\nimport { Course, Lecture } from \"../../models\";\nimport { getCourses, getLectures } from \"../Course/api\";\nimport Container from \"./Components/Container\";\nimport Results from \"./Sections/Results\";\nimport iconSearch from \"../../Image/course/icon-search.svg\";\nvar SearchFormWrapper = styled.div(_templateObject());\nvar Form = styled.form(_templateObject2());\nvar FormGroup = styled.div(_templateObject3());\nvar Input = styled.input(_templateObject4());\nvar SearchIcon = styled.img(_templateObject5());\nexport default function View(props) {\n  var _useState = useState(new Map()),\n      _useState2 = _slicedToArray(_useState, 2),\n      courses = _useState2[0],\n      setCourses = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lectures = _useState4[0],\n      setLectures = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      defaultValue = _useState6[0],\n      setDefaultValue = _useState6[1];\n\n  var history = useHistory();\n  var location = useLocation();\n\n  var _QueryString$parse = QueryString.parse(location.search),\n      keyword = _QueryString$parse.keyword,\n      courseType = _QueryString$parse.courseType;\n\n  useEffect(function () {\n    if (courseType) {\n      switch (courseType) {\n        case 'oobc':\n          setDefaultValue('挑战吧！游戏创作者！');\n          break;\n\n        case 'javascript':\n          setDefaultValue('创作本能！游戏制作人！');\n          break;\n\n        case 'python':\n          setDefaultValue('解决案件：项目 X');\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, []);\n  useEffect(function () {\n    fetch(keyword, courseType);\n  }, [keyword, courseType]);\n\n  var handleChange = function handleChange(e) {\n    var query = {\n      keyword: e.currentTarget.value,\n      courseType: courseType\n    };\n    var queryString = QueryString.stringify(query);\n    history.replace(\"?\" + queryString);\n  };\n\n  var fetch = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_keyword, _courseType) {\n      var _coursesResult, _courses, queryString, _lecturesResult, _lectures;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getCourses();\n\n            case 2:\n              _coursesResult = _context.sent;\n              _courses = new Map();\n\n              _coursesResult.forEach(function (_course) {\n                var course = new Course(_course);\n\n                _courses.set(_course.id, course);\n              });\n\n              setCourses(_courses);\n              queryString = QueryString.stringify({\n                keyword: _keyword,\n                courseType: _courseType\n              });\n              _context.next = 9;\n              return getLectures({\n                queryString: queryString\n              });\n\n            case 9:\n              _lecturesResult = _context.sent;\n              _lectures = [];\n\n              _lecturesResult.rows.forEach(function (_lecture) {\n                var lecture = new Lecture(_lecture);\n\n                _lectures.push(lecture);\n              });\n\n              setLectures(_lectures);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [getCourses, setCourses, setLectures]);\n  var handleSubmit = useCallback(function (e) {\n    e.preventDefault();\n\n    if (keyword) {\n      handleChange(e);\n    } else {\n      history.push(\"/\");\n    }\n  }, [history, fetch, keyword]);\n\n  var handleFocus = function handleFocus(e) {\n    if (courseType) {\n      e.currentTarget.value = '';\n      setDefaultValue('');\n    }\n  };\n\n  return React.createElement(Layout, {\n    isHome: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(SearchFormWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(FormGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: handleChange,\n    onFocus: handleFocus,\n    value: defaultValue !== '' ? defaultValue : keyword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }), React.createElement(SearchIcon, {\n    alt: \"\\uB3CB\\uBCF4\\uAE30 \\uC544\\uC774\\uCF58\",\n    src: iconSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  })))), React.createElement(Results, {\n    courses: courses,\n    items: lectures,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Courses/View.js"],"names":["React","useCallback","useEffect","useState","useHistory","useLocation","QueryString","styled","Layout","Course","Lecture","getCourses","getLectures","Container","Results","SearchFormWrapper","div","Form","form","FormGroup","Input","input","SearchIcon","img","View","props","Map","courses","setCourses","lectures","setLectures","defaultValue","setDefaultValue","history","location","parse","search","keyword","courseType","fetch","handleChange","e","query","currentTarget","value","queryString","stringify","replace","_keyword","_courseType","_coursesResult","_courses","forEach","_course","course","set","id","_lecturesResult","_lectures","rows","_lecture","lecture","push","handleSubmit","preventDefault","handleFocus","iconSearch"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport QueryString from \"query-string\"\nimport styled from \"@emotion/styled\";\n\nimport Layout from \"../../Common/Component/Layout\";\nimport { Course, Lecture } from \"../../models\";\nimport { getCourses, getLectures } from \"../Course/api\";\nimport Container from \"./Components/Container\";\nimport Results from \"./Sections/Results\";\n\nimport iconSearch from \"../../Image/course/icon-search.svg\";\n\nconst SearchFormWrapper = styled.div`\n  padding: 20px 0 39.5px;\n  \n  @media screen and (max-width: 1169px){\n    width: 100%;\n    padding: 10px 0 29.5px;\n  }\n`;\n\nconst Form = styled.form``;\n\nconst FormGroup = styled.div`\n  width: 370px;\n  display: flex;\n  position: relative;\n\n  @media screen and (max-width: 1169px){\n    width: 100%;\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  height: 52px;\n  padding-left: 16px;\n  padding-right: 50px;\n  border-radius: 10px;\n  background-color: rgba(255, 255, 255, 0.1);\n  border: none;\n  font-size: 16px;\n  line-height: 1.38;\n  color: #fff;\n  outline: none;\n\n  @media screen and (max-width: 1169px){\n    box-sizing: border-box;\n    height: 40px;\n    padding-left: 13px;\n  }\n`;\n\nconst SearchIcon = styled.img`\n  width: 24px;\n  position: absolute;\n  right: 13px;\n  top: 13px;\n  z-index: 10;\n\n  @media screen and (max-width: 1169px){\n    right: 8px;\n    top: 8px;\n  }\n`;\n\nexport default function View(props) {\n  const [courses, setCourses] = useState(new Map());\n  const [lectures, setLectures] = useState([]);\n  const [defaultValue, setDefaultValue] = useState('');\n  const history = useHistory();\n  const location = useLocation();\n  const { keyword, courseType } = QueryString.parse(location.search);\n\n  useEffect(() => {\n    if(courseType) {\n      switch (courseType) {\n        case 'oobc':\n          setDefaultValue('挑战吧！游戏创作者！');\n          break;\n        case 'javascript':\n          setDefaultValue('创作本能！游戏制作人！');\n          break;\n        case 'python':\n          setDefaultValue('解决案件：项目 X');\n          break;\n        default:\n          break;\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    fetch(keyword, courseType);\n  }, [keyword, courseType]);\n\n  const handleChange = e => {\n    const query = { keyword: e.currentTarget.value, courseType };\n    const queryString = QueryString.stringify(query);\n    history.replace(\"?\" + queryString);\n  }\n\n  const fetch = useCallback(\n    async (_keyword, _courseType) => {\n      const _coursesResult = await getCourses();\n      const _courses = new Map();\n      _coursesResult.forEach((_course) => {\n        const course = new Course(_course);\n        _courses.set(_course.id, course);\n      });\n\n      setCourses(_courses);\n\n      const queryString = QueryString.stringify({ keyword: _keyword, courseType: _courseType });\n      const _lecturesResult = await getLectures({ queryString });\n      const _lectures = [];\n      _lecturesResult.rows.forEach((_lecture) => {\n        const lecture = new Lecture(_lecture);\n        _lectures.push(lecture);\n      });\n\n      setLectures(_lectures);\n    },\n    [getCourses, setCourses, setLectures]\n  );\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      if (keyword) {\n        handleChange(e);\n      } else {\n        history.push(`/`);\n      }\n    },\n    [history, fetch, keyword]\n  );\n\n  const handleFocus = (e) => {\n    if (courseType) {\n      e.currentTarget.value = '';\n      setDefaultValue('');\n    }\n  }\n\n  return (\n    <Layout isHome={true}>\n      <Container>\n        <SearchFormWrapper>\n          <Form onSubmit={handleSubmit}>\n            <FormGroup>\n              <Input onChange={handleChange} onFocus={handleFocus} value={defaultValue !== '' ? defaultValue : keyword} />\n              <SearchIcon alt=\"돋보기 아이콘\" src={iconSearch} />\n            </FormGroup>\n          </Form>\n        </SearchFormWrapper>\n        <Results courses={courses} items={lectures} />\n      </Container>\n    </Layout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}