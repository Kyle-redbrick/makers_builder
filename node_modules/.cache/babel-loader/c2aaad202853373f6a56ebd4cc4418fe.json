{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/Selector/index.js\";\nimport React from \"react\";\nimport Localization from \"../../Localization\";\nimport OOBC from \"../../OOBC\";\nimport { Block, AddVarBlock } from \"../Block\";\nimport \"./index.scss\";\nexport var MODE = {\n  FLOAT: \"float\",\n  BOTTOM: \"bottom\"\n};\nexport var defaultMode = MODE.BOTTOM;\nexport default function (props) {\n  var _props$mode = props.mode,\n      mode = _props$mode === void 0 ? defaultMode : _props$mode,\n      context = props.context,\n      currentBlock = props.currentBlock,\n      selectorInfo = props.selectorInfo,\n      onClickPrototypeBlock = props.onClickPrototypeBlock,\n      onClickAddGlobalVar = props.onClickAddGlobalVar,\n      onClickSelectorCategory = props.onClickSelectorCategory,\n      oobcContextRef = props.oobcContextRef;\n  var isOn = !!currentBlock;\n\n  var selectorStyle = _objectSpread({}, getSelectorRect({\n    mode: mode,\n    block: currentBlock,\n    oobcContextRef: oobcContextRef\n  }));\n\n  return React.createElement(\"div\", {\n    className: \"oobceditor_selector oobceditor_selector-\".concat(isOn ? \"on\" : \"off\", \" oobceditor_selector-\").concat(mode),\n    style: selectorStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, selectorInfo && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"oobceditor_selector_categories\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, selectorInfo.categories.map(function (category) {\n    return React.createElement(Category, {\n      key: category,\n      category: category,\n      isCurrent: category === selectorInfo.currentCategory,\n      onClick: function onClick() {\n        onClickSelectorCategory(category);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    });\n  })), React.createElement(\"div\", {\n    className: \"oobceditor_selector_prototypes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"oobceditor_selector_prototypes_inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, selectorInfo.currentCategory === OOBC.TYPE.CATEGORY.VARIABLE && React.createElement(AddVarBlock, {\n    onClickBlock: onClickAddGlobalVar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), selectorInfo.currentCategory && selectorInfo.prototypeBlocksOf[selectorInfo.currentCategory].map(function (prototypeBlock, index) {\n    return React.createElement(Block, {\n      key: index,\n      context: context,\n      block: prototypeBlock,\n      disabled: selectorInfo.disabledPrototypeBlocks.includes(prototypeBlock),\n      onClickBlock: onClickPrototypeBlock,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    });\n  })))));\n}\n\nfunction getSelectorRect(option) {\n  var rect = {};\n\n  switch (option.mode) {\n    case MODE.FLOAT:\n      if (!option.block) {\n        break;\n      }\n\n      var contextElement;\n\n      if (option.oobcContextRef.current) {\n        contextElement = option.oobcContextRef.current;\n      }\n\n      var blockElement = document.getElementById(\"oobceditor_block-\" + option.block.id);\n\n      if (!contextElement || !blockElement) {\n        break;\n      }\n\n      var contextRect = contextElement.getBoundingClientRect();\n      var blockRect = blockElement.getBoundingClientRect();\n      rect.left = blockRect.left - contextRect.left;\n      rect.top = blockRect.top - contextRect.top + blockRect.height + 12;\n      rect.height = blockRect.height * 4.5;\n      rect.width = rect.height * 2.5;\n      break;\n\n    case MODE.BOTTOM:\n    default:\n      rect.bottom = 0;\n      rect.left = 0;\n      rect.width = \"calc(100% - 24px)\";\n      rect.height = \"50%\";\n      break;\n  }\n\n  return rect;\n}\n\nfunction Category(props) {\n  var category = props.category,\n      isCurrent = props.isCurrent,\n      onClick = props.onClick;\n  var formatMessageId = \"ID_OOBC_BLOCK_CATEGORY_\".concat(category.toUpperCase());\n  var formattedCategory = Localization.formatWithId(formatMessageId);\n  return React.createElement(\"div\", {\n    id: \"oobceditor_selector_category-\".concat(category),\n    className: \"oobceditor_selector_category\".concat(isCurrent ? \" oobceditor_selector_category-current\" : \"\"),\n    onClick: onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, formattedCategory);\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/OOBCEditor/Component/Selector/index.js"],"names":["React","Localization","OOBC","Block","AddVarBlock","MODE","FLOAT","BOTTOM","defaultMode","props","mode","context","currentBlock","selectorInfo","onClickPrototypeBlock","onClickAddGlobalVar","onClickSelectorCategory","oobcContextRef","isOn","selectorStyle","getSelectorRect","block","categories","map","category","currentCategory","TYPE","CATEGORY","VARIABLE","prototypeBlocksOf","prototypeBlock","index","disabledPrototypeBlocks","includes","option","rect","contextElement","current","blockElement","document","getElementById","id","contextRect","getBoundingClientRect","blockRect","left","top","height","width","bottom","Category","isCurrent","onClick","formatMessageId","toUpperCase","formattedCategory","formatWithId"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Localization from \"../../Localization\";\nimport OOBC from \"../../OOBC\";\nimport { Block, AddVarBlock } from \"../Block\";\nimport \"./index.scss\";\n\nexport const MODE = {\n  FLOAT: \"float\",\n  BOTTOM: \"bottom\"\n};\nexport const defaultMode = MODE.BOTTOM;\n\nexport default function (props) {\n  const {\n    mode = defaultMode,\n    context,\n    currentBlock,\n    selectorInfo,\n    onClickPrototypeBlock,\n    onClickAddGlobalVar,\n    onClickSelectorCategory,\n    oobcContextRef\n  } = props;\n\n  const isOn = !!currentBlock;\n  const selectorStyle = { ...getSelectorRect({ mode,block: currentBlock, oobcContextRef }) };\n\n  return (\n    <div\n      className={`oobceditor_selector oobceditor_selector-${isOn ? \"on\" : \"off\"} oobceditor_selector-${mode}`}\n      style={selectorStyle}\n    >\n      {selectorInfo && (\n        <>\n          <div className=\"oobceditor_selector_categories\">\n            {selectorInfo.categories.map(category => (\n              <Category\n                key={category}\n                category={category}\n                isCurrent={category === selectorInfo.currentCategory}\n                onClick={() => {\n                  onClickSelectorCategory(category);\n                }}\n              />\n            ))}\n          </div>\n          <div className=\"oobceditor_selector_prototypes\">\n            <div className=\"oobceditor_selector_prototypes_inner\">\n              {selectorInfo.currentCategory === OOBC.TYPE.CATEGORY.VARIABLE && (\n                <AddVarBlock onClickBlock={onClickAddGlobalVar} />\n              )}\n              {selectorInfo.currentCategory &&\n                selectorInfo.prototypeBlocksOf[\n                  selectorInfo.currentCategory\n                ].map((prototypeBlock, index) => (\n                  <Block\n                    key={index}\n                    context={context}\n                    block={prototypeBlock}\n                    disabled={selectorInfo.disabledPrototypeBlocks.includes(\n                      prototypeBlock\n                    )}\n                    onClickBlock={onClickPrototypeBlock}\n                  />\n                ))}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction getSelectorRect(option) {\n  const rect = {};\n\n  switch (option.mode) {\n    case MODE.FLOAT:\n      if(!option.block) {\n        break;\n      }\n\n      let contextElement;\n      if (option.oobcContextRef.current) {\n        contextElement = option.oobcContextRef.current;\n      }\n\n      const blockElement = document.getElementById(\"oobceditor_block-\" + option.block.id);\n      if(!contextElement || !blockElement) {\n        break;\n      }\n\n      const contextRect = contextElement.getBoundingClientRect();\n      const blockRect = blockElement.getBoundingClientRect();\n      rect.left = blockRect.left - contextRect.left;\n      rect.top = blockRect.top - contextRect.top + blockRect.height + 12;\n      rect.height = blockRect.height * 4.5;\n      rect.width = rect.height * 2.5;\n      break;\n\n    case MODE.BOTTOM:\n    default:\n      rect.bottom = 0;\n      rect.left = 0;\n      rect.width = \"calc(100% - 24px)\";\n      rect.height = \"50%\";\n      break;\n  }\n\n  return rect;\n}\n\nfunction Category(props) {\n  const { category, isCurrent, onClick } = props;\n  const formatMessageId = `ID_OOBC_BLOCK_CATEGORY_${category.toUpperCase()}`;\n  const formattedCategory = Localization.formatWithId(formatMessageId);\n  return (\n    <div\n      id={`oobceditor_selector_category-${category}`}\n      className={`oobceditor_selector_category${\n        isCurrent ? \" oobceditor_selector_category-current\" : \"\"\n      }`}\n      onClick={onClick}\n    >\n      {formattedCategory}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}