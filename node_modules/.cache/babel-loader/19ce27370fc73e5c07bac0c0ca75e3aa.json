{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/G-STAR/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport QueryString from \"query-string\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../Common/Component/PopUp\";\nimport SignIn from \"../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.addGoogleAds = function () {\n      var script = document.createElement(\"script\");\n      script.src = \"https://www.googletagmanager.com/gtag/js?id=AW-590661479\";\n      script.async = true;\n      document.body.appendChild(script);\n      var gtag = window.gtag;\n      gtag('js', new Date());\n      gtag('config', 'AW-590661479');\n    };\n\n    _this.setTimer = function () {\n      var dDay = new Date(\"Nov 18, 2021, 10:00:00\").getTime();\n      var endDay = new Date(\"Nov 21, 2021, 18:01:00\").getTime();\n      _this.timer = setInterval(function () {\n        var now = new Date();\n        var distance = dDay - now;\n        var endDistance = endDay - now;\n        var result = '';\n        var d = Math.floor(distance / (1000 * 60 * 60 * 24));\n        var h = Math.floor(distance % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));\n        var m = Math.floor(distance % (1000 * 60 * 60) / (1000 * 60));\n        var s = Math.floor(distance % (1000 * 60) / 1000);\n        result = \"D-\".concat(d < 10 ? +\"0\" + d : d, \"\\n\");\n        [h, m, s].forEach(function (num, i) {\n          if (i !== 0) result += \":\";\n          result += num < 10 ? \"0\" + num : num;\n        });\n\n        if (distance > 0) {\n          _this.setState({\n            timer: result,\n            eventState: \"coming\"\n          });\n        } else if (endDistance > 0) {\n          if (now.getHours() >= 10 && now.getHours() <= 18) {\n            if (now.getHours() === 18) {\n              now.getMinutes() < 1 ? _this.setState({\n                eventState: \"onAir\",\n                timer: \"On-Air\"\n              }) : _this.setState({\n                eventState: \"offAir\",\n                timer: \"Off-Air\"\n              });\n            } else {\n              _this.setState({\n                eventState: \"onAir\",\n                timer: \"On-Air\"\n              });\n            }\n          } else {\n            _this.setState({\n              eventState: \"offAir\",\n              timer: \"Off-Air\"\n            });\n          }\n        } else {\n          _this.setState({\n            eventState: \"end\",\n            timer: \"Off-Air\"\n          });\n        }\n      }, 1000);\n    };\n\n    _this.onChangeInput = function (e) {\n      _this.setState({\n        email: e.target.value\n      });\n    };\n\n    _this.validateEmail = function (email) {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(String(email).toLowerCase());\n    };\n\n    _this.popupTemplate = function (title) {\n      showPopUp( /*#__PURE__*/React.createElement(Popup.OneButton, {\n        title: title,\n        buttonName: \"\\uD655\\uC778\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      }), {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      });\n    };\n\n    _this.onClickSubmitEmail = function () {\n      var email = _this.state.email;\n\n      if (_this.validateEmail(email)) {\n        request.postGstarParticipation({\n          email: _this.state.email\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json) {\n            _this.popupTemplate(\"이메일 등록이 완료되었습니다!\");\n          } else {\n            _this.popupTemplate(\"이미 등록된 이메일입니다.\");\n          }\n        }).catch(function (e) {\n          return console.log(e);\n        });\n      } else {\n        _this.popupTemplate(\"올바른 이메일 형식을 입력해주세요.\");\n      }\n    };\n\n    _this.getGameData = function () {\n      request.getGstarGameList().then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this.setState({\n          gameData: json\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    };\n\n    _this.onClickReadyArea = function () {\n      _this.popupTemplate(\"준비 중입니다.\");\n    };\n\n    _this.onClickEnterBtn = function () {\n      if (!_this.props.userinfo.email) {\n        return showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n          history: _this.props.history,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          mobileFullscreen: true\n        });\n      }\n\n      window.open('https://gather.town/app/GLyclKpXO36pRN2W/gstar_metaverse_01');\n    };\n\n    _this.state = {\n      eventState: \"offAir\",\n      // comming, onAir, offAir ,end\n      timer: \"Loading\",\n      email: \"\",\n      gameData: []\n    };\n    _this.timer = null;\n    _this.eventRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.addGoogleAds();\n\n      var _QueryString$parse = QueryString.parse(this.props.location.search),\n          goToEvent = _QueryString$parse.goToEvent;\n\n      if (goToEvent) {\n        window.scrollTo({\n          behavior: 'smooth',\n          top: this.eventRef.current.offsetTop\n        });\n      }\n\n      this.setTimer();\n      this.getGameData();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.timer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var eventRef = this.eventRef,\n          onChangeInput = this.onChangeInput,\n          onClickSubmitEmail = this.onClickSubmitEmail,\n          onClickReadyArea = this.onClickReadyArea,\n          onClickEnterBtn = this.onClickEnterBtn;\n      var _this$state = this.state,\n          timer = _this$state.timer,\n          eventState = _this$state.eventState,\n          gameData = _this$state.gameData;\n      return /*#__PURE__*/React.createElement(View, {\n        timer: timer,\n        eventRef: eventRef,\n        wizlabGame: gameData.filter(function (game) {\n          return game.type === \"wizlab\";\n        }),\n        redbrickGame: gameData.filter(function (game) {\n          return game.type === \"redbrick\";\n        }),\n        gstarGame: gameData.filter(function (game) {\n          return game.type === \"gstar\";\n        }),\n        eventState: eventState,\n        onChangeInput: onChangeInput,\n        onClickSubmitEmail: onClickSubmitEmail,\n        onClickReadyArea: onClickReadyArea,\n        onClickEnterBtn: onClickEnterBtn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(withRouter(injectIntl(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/G-STAR/Container.js"],"names":["React","Component","connect","injectIntl","withRouter","QueryString","request","Popup","showPopUp","SignIn","View","Container","props","addGoogleAds","script","document","createElement","src","async","body","appendChild","gtag","window","Date","setTimer","dDay","getTime","endDay","timer","setInterval","now","distance","endDistance","result","d","Math","floor","h","m","s","forEach","num","i","setState","eventState","getHours","getMinutes","onChangeInput","e","email","target","value","validateEmail","re","test","String","toLowerCase","popupTemplate","title","darkmode","dismissButton","dismissOverlay","onClickSubmitEmail","state","postGstarParticipation","then","res","json","catch","console","log","getGameData","getGstarGameList","gameData","onClickReadyArea","onClickEnterBtn","userinfo","history","mobileFullscreen","open","eventRef","createRef","parse","location","search","goToEvent","scrollTo","behavior","top","current","offsetTop","clearInterval","filter","game","type"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport QueryString from \"query-string\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport Popup, { showPopUp } from \"../../Common/Component/PopUp\";\nimport SignIn from \"../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      eventState: \"offAir\", // comming, onAir, offAir ,end\n      timer: \"Loading\",\n      email: \"\",\n      gameData: []\n    }\n    this.timer = null;\n    this.eventRef = React.createRef();\n  }\n\n  componentDidMount(){\n\n    this.addGoogleAds();\n\n    const { goToEvent } = QueryString.parse(this.props.location.search);\n    if(goToEvent) {\n      window.scrollTo({ behavior: 'smooth', top: this.eventRef.current.offsetTop })\n    }\n    this.setTimer();\n    this.getGameData();\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.timer);\n  }\n\n  addGoogleAds = () => {\n    const script = document.createElement(\"script\");\n    script.src = \"https://www.googletagmanager.com/gtag/js?id=AW-590661479\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    const gtag = window.gtag;\n\n    gtag('js', new Date());\n    gtag('config', 'AW-590661479');\n  }\n\n  setTimer = () => {\n    const dDay = new Date(\"Nov 18, 2021, 10:00:00\").getTime();\n    const endDay = new Date(\"Nov 21, 2021, 18:01:00\").getTime();\n\n    this.timer = setInterval(() => {\n      let now = new Date();\n      let distance = dDay - now;\n      let endDistance = endDay - now;\n      let result = ''; \n    \n      let d = Math.floor(distance / (1000 * 60 * 60 * 24));\n      let h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      let m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n      let s = Math.floor((distance % (1000 * 60)) / 1000);\n\n      result = `D-${d < 10 ? + \"0\" + d : d }\\n`;\n\n      [h, m, s].forEach((num, i) => {\n        if (i !== 0) result += \":\";\n        result += num < 10 ? \"0\" + num : num;\n      })\n\n      if (distance > 0) {\n        this.setState({ timer : result, eventState: \"coming\" });\n      } else if (endDistance > 0) { \n        if (now.getHours() >= 10 && now.getHours() <= 18){ \n          if (now.getHours() === 18) {\n            now.getMinutes() < 1 ?\n            this.setState({ eventState: \"onAir\", timer: \"On-Air\" }):\n            this.setState({ eventState: \"offAir\", timer: \"Off-Air\" });\n          } else {\n            this.setState({ eventState: \"onAir\", timer: \"On-Air\" });\n          }\n        } else {\n          this.setState({ eventState: \"offAir\", timer: \"Off-Air\" });\n        }\n      } else {\n        this.setState({ eventState: \"end\", timer: \"Off-Air\" });\n      }\n    }, 1000);\n  }\n\n  onChangeInput = (e) => {\n    this.setState({ email : e.target.value })\n  }\n\n  validateEmail = (email) => {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  popupTemplate = (title) => {\n    showPopUp(\n      <Popup.OneButton\n        title={title}\n        buttonName=\"확인\"\n      />,\n      {\n        darkmode: true,\n        dismissButton: false,\n        dismissOverlay: true\n      }\n    );\n  }\n\n  onClickSubmitEmail = () => {\n    const email = this.state.email;\n    if (this.validateEmail(email)) {\n      request.postGstarParticipation({ email: this.state.email })\n        .then(res => res.json())\n        .then(json => {\n          if (json){\n            this.popupTemplate(\"이메일 등록이 완료되었습니다!\");\n          } else {\n            this.popupTemplate(\"이미 등록된 이메일입니다.\");\n          }\n        })\n        .catch(e => console.log(e));\n    } else {\n      this.popupTemplate(\"올바른 이메일 형식을 입력해주세요.\");\n    }\n  }\n\n  getGameData = () => {\n    request.getGstarGameList()\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ gameData : json })\n      })\n      .catch((e) => console.log(e));\n  }\n\n  onClickReadyArea = () => {\n    this.popupTemplate(\"준비 중입니다.\")\n  }\n\n  onClickEnterBtn = () => {\n    if (!this.props.userinfo.email) {\n      return showPopUp(\n        <SignIn history={this.props.history} />, \n        { darkmode: true, mobileFullscreen: true }\n      );\n    } \n    window.open('https://gather.town/app/GLyclKpXO36pRN2W/gstar_metaverse_01');\n  }\n\n  render() {\n    const { eventRef, onChangeInput, onClickSubmitEmail, onClickReadyArea, onClickEnterBtn } = this;\n    const { timer, eventState, gameData } = this.state;\n    return (\n      <View \n        timer={timer}\n        eventRef={eventRef}\n        wizlabGame={gameData.filter((game) => game.type === \"wizlab\")}\n        redbrickGame={gameData.filter((game) => game.type === \"redbrick\")}\n        gstarGame={gameData.filter((game) => game.type === \"gstar\")}\n        eventState={eventState}\n        onChangeInput={onChangeInput}\n        onClickSubmitEmail={onClickSubmitEmail}\n        onClickReadyArea={onClickReadyArea}\n        onClickEnterBtn={onClickEnterBtn}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {}\n)(withRouter(injectIntl(Container)));\n"]},"metadata":{},"sourceType":"module"}