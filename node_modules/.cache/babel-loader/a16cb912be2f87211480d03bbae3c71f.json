{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/SSAFY/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.getData = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, rankProjects, newProjects;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return request.getSsafyProjects({\n                limit: 14,\n                order: \"likeCount\"\n              });\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              rankProjects = _context.sent;\n              _context.next = 9;\n              return request.getSsafyProjects({\n                limit: 21,\n                order: \"editedAt\"\n              });\n\n            case 9:\n              res = _context.sent;\n              _context.next = 12;\n              return res.json();\n\n            case 12:\n              newProjects = _context.sent;\n\n              _this.setState({\n                newProjects: newProjects,\n                rankProjects: rankProjects\n              });\n\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 16]]);\n    }));\n    _this.getSearchData = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (_this.searchTimer) {\n                clearTimeout(_this.searchTimer);\n              }\n\n              _this.searchTimer = setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                var res, json;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return request.getSsafyProjects({\n                          limit: 1000,\n                          order: \"editedAt\",\n                          keyword: _this.state.searchKeyword\n                        });\n\n                      case 2:\n                        res = _context2.sent;\n                        _context2.next = 5;\n                        return res.json();\n\n                      case 5:\n                        json = _context2.sent;\n\n                        _this.setState({\n                          searchProjects: json\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              })), 500);\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.handleOnChange = function (e) {\n      var value = e.target.value;\n\n      _this.setState({\n        searchKeyword: value\n      });\n    };\n\n    _this.state = {\n      newProjects: [],\n      rankProjects: [],\n      searchProjects: [],\n      searchKeyword: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getData();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.searchKeyword !== this.state.searchKeyword) {\n        if (this.state.searchKeyword.length < 1) {\n          // this.setState({ searchProjects: [] }, this.getData);\n          this.setState({\n            searchProjects: []\n          });\n        } else {\n          this.getSearchData();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          newProjects = _this$state.newProjects,\n          rankProjects = _this$state.rankProjects,\n          searchProjects = _this$state.searchProjects,\n          searchKeyword = _this$state.searchKeyword;\n      var handleOnChange = this.handleOnChange;\n      return React.createElement(View, {\n        newProjects: newProjects,\n        rankProjects: rankProjects,\n        searchProjects: searchProjects,\n        searchKeyword: searchKeyword,\n        handleOnChange: handleOnChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/SSAFY/Container.js"],"names":["React","Component","connect","injectIntl","request","View","Container","props","getData","getSsafyProjects","limit","order","res","json","rankProjects","newProjects","setState","console","error","getSearchData","searchTimer","clearTimeout","setTimeout","keyword","state","searchKeyword","searchProjects","handleOnChange","e","value","target","prevProps","prevState","length","email","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newProjects: [],\n      rankProjects: [],\n      searchProjects: [],\n      searchKeyword: \"\"\n    };\n  }\n  componentDidMount() {\n    this.getData();\n  }\n\n  getData = async () => {\n    try {\n      let res;\n      res = await request.getSsafyProjects({\n        limit: 14,\n        order: \"likeCount\"\n      });\n      let rankProjects = await res.json();\n      res = await request.getSsafyProjects({\n        limit: 21,\n        order: \"editedAt\"\n      });\n      let newProjects = await res.json();\n      this.setState({ newProjects, rankProjects });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  getSearchData = async () => {\n    if (this.searchTimer) {\n      clearTimeout(this.searchTimer);\n    }\n    this.searchTimer = setTimeout(async () => {\n      const res = await request.getSsafyProjects({\n        limit: 1000,\n        order: \"editedAt\",\n        keyword: this.state.searchKeyword\n      });\n      const json = await res.json();\n      this.setState({ searchProjects: json });\n    }, 500);\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchKeyword !== this.state.searchKeyword) {\n      if (this.state.searchKeyword.length < 1) {\n        // this.setState({ searchProjects: [] }, this.getData);\n        this.setState({ searchProjects: [] });\n      } else {\n        this.getSearchData();\n      }\n    }\n  }\n\n  handleOnChange = e => {\n    const value = e.target.value;\n    this.setState({ searchKeyword: value });\n  };\n\n  render() {\n    const {\n      newProjects,\n      rankProjects,\n      searchProjects,\n      searchKeyword\n    } = this.state;\n    const { handleOnChange } = this;\n    return (\n      <View\n        newProjects={newProjects}\n        rankProjects={rankProjects}\n        searchProjects={searchProjects}\n        searchKeyword={searchKeyword}\n        handleOnChange={handleOnChange}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({\n    email: state.userinfo.email\n  }),\n  {}\n)(injectIntl(Container));\n"]},"metadata":{},"sourceType":"module"}