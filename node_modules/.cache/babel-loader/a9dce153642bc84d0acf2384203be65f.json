{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Camp/Component/CampInfo/Container.js\";\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport SignIn from \"../../../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.showLoginPopup = function () {\n      var formatMessage = _this.props.intl.formatMessage;\n      showPopUp(React.createElement(PopUp.OneButton, {\n        title: formatMessage({\n          id: \"ID_LOGIN_ALERT_TITLE\"\n        }),\n        subtitle: formatMessage({\n          id: \"ID_LOGIN_ALERT_MSG\"\n        }),\n        buttonName: formatMessage({\n          id: \"ID_LOGIN_ALERT_LOGINBTN\"\n        }),\n        buttonAction: function buttonAction() {\n          showPopUp(React.createElement(SignIn, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 19\n            },\n            __self: this\n          }), {\n            darkmode: true,\n            mobileFullscreen: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14\n        },\n        __self: this\n      }), {\n        darkmode: true\n      });\n    };\n\n    _this.getDevProject =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(pId) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return request.getDevelopingProjectInfo({\n                  pId: pId\n                }).then(function (res) {\n                  return res.json();\n                }).catch(function (e) {\n                  return console.error(e);\n                });\n\n              case 2:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onClickCopyProject =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(pId) {\n        var email, project, params, builderURL, newWindow;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                email = _this.props.email;\n\n                if (email) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                _this.showLoginPopup();\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                _context2.prev = 4;\n                _context2.next = 7;\n                return _this.getDevProject(pId);\n\n              case 7:\n                project = _context2.sent;\n                params = {\n                  pId: generatePID(email),\n                  email: email,\n                  name: project.name,\n                  type: project.type,\n                  icon: project.icon,\n                  state: project.state\n                };\n                _context2.next = 11;\n                return request.postDevelopingProject(params);\n\n              case 11:\n                builderURL = \"/builder/\".concat(params.pId);\n                newWindow = window.open(builderURL, \"_blank\");\n                newWindow.focus();\n                _context2.next = 19;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](4);\n                console.error(_context2.t0);\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 16]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var onClickCopyProject = this.onClickCopyProject;\n      return React.createElement(View, {\n        onClickCopyProject: onClickCopyProject,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(Container));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Camp/Component/CampInfo/Container.js"],"names":["React","Component","injectIntl","connect","request","generatePID","PopUp","showPopUp","SignIn","View","Container","showLoginPopup","formatMessage","props","intl","id","darkmode","mobileFullscreen","getDevProject","pId","getDevelopingProjectInfo","then","res","json","catch","e","console","error","onClickCopyProject","email","project","params","name","type","icon","state","postDevelopingProject","builderURL","newWindow","window","open","focus","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport generatePID from \"../../../../Common/Util/PIDGenerator\";\nimport PopUp, { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport SignIn from \"../../../../Common/Component/SignIn\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  showLoginPopup = () => {\n    const { formatMessage } = this.props.intl;\n    showPopUp(\n      <PopUp.OneButton\n        title={formatMessage({ id: \"ID_LOGIN_ALERT_TITLE\" })}\n        subtitle={formatMessage({ id: \"ID_LOGIN_ALERT_MSG\" })}\n        buttonName={formatMessage({ id: \"ID_LOGIN_ALERT_LOGINBTN\" })}\n        buttonAction={() => {\n          showPopUp(<SignIn />, {\n            darkmode: true,\n            mobileFullscreen: true\n          });\n        }}\n      />,\n      { darkmode: true }\n    );\n  }\n\n  getDevProject = async pId => {\n    return await request\n      .getDevelopingProjectInfo({ pId })\n      .then(res => res.json())\n      .catch(e => console.error(e));\n  }\n\n  onClickCopyProject = async pId => {\n    const { email } = this.props;\n    if(!email) {\n      this.showLoginPopup();\n      return;\n    }\n\n    try{\n      const project = await this.getDevProject(pId);\n      const params = {\n        pId: generatePID(email),\n        email: email,\n        name: project.name,\n        type: project.type,\n        icon: project.icon,\n        state: project.state\n      };\n      \n      await request.postDevelopingProject(params);\n      const builderURL = `/builder/${params.pId}`;\n      const newWindow = window.open(builderURL, \"_blank\");\n      newWindow.focus();\n    }catch(e) {\n      console.error(e);\n    }\n  };\n\n  render() {\n    const { onClickCopyProject } = this;\n    return (\n      <View onClickCopyProject={onClickCopyProject} />\n    );\n  }\n}\n\n\nexport default connect(\n  state => ({ email: state.userinfo.email }),\n  {}\n)(injectIntl(Container));"]},"metadata":{},"sourceType":"module"}