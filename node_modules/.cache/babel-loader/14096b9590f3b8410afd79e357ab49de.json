{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Mypage/Components/UserInfoTemplate/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport { withSubscribe } from \"../../../../Common/Util/Subscribe\";\nimport NameSetting from \"../NameSetting\";\nimport \"./index.scss\";\n\nvar UserInfoTemplate = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserInfoTemplate, _React$Component);\n\n  var _super = _createSuper(UserInfoTemplate);\n\n  function UserInfoTemplate(props) {\n    var _this;\n\n    _classCallCheck(this, UserInfoTemplate);\n\n    _this = _super.call(this, props);\n    _this.getUserProfile = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request.userProfile({\n                email: _this.props.targetEmail\n              }).then(function (res) {\n                return res.json();\n              }).catch(function (e) {\n                return console.error(e);\n              });\n\n            case 2:\n              user = _context.sent;\n\n              _this.setState({\n                user: user\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.onClickSettingBtn = function () {\n      showPopUp( /*#__PURE__*/React.createElement(NameSetting, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 7\n        }\n      }), {\n        darkmode: true,\n        defaultPadding: false,\n        mobileFullscreen: window.innerWidth < 1170\n      });\n    };\n\n    _this.state = {\n      user: props.isMyPage ? props.userinfo : null\n    };\n    return _this;\n  }\n\n  _createClass(UserInfoTemplate, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUserProfile();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.isMyPage) {\n        if (JSON.stringify(prevProps.userinfo) !== JSON.stringify(this.props.userinfo)) {\n          // 내 프로필이 변경될 경우 state가 아닌 props가 변경되기에, 내 프로필 props가 변경될 때 그 값을 state에도 sync하는 로직.\n          // 다른유저의 프로필을 표시할 때와, 내 프로필을 표시할때 공통으로 사용하고 있는 컴포넌트인데,\n          // 내 프로필일 경우, redux로부터 값을 불러오지만 (props)\n          // 다른유저일 경우는 api호출을 통해 받아옴 (state)\n          // 공통된 처리를 위해서 두 상황 모두 state에서 유저 정보를 저장하고 있음\n          this.setState({\n            user: this.props.userinfo\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var user = this.state.user;\n      var _this$props = this.props,\n          isMyPage = _this$props.isMyPage,\n          handleSelectTab = _this$props.handleSelectTab,\n          selectedTab = _this$props.selectedTab,\n          intl = _this$props.intl,\n          subscribeInfo = _this$props.subscribeInfo;\n      var onClickSettingBtn = this.onClickSettingBtn;\n      return /*#__PURE__*/React.createElement(View, {\n        intl: intl,\n        user: user,\n        isMyPage: isMyPage,\n        handleSelectTab: handleSelectTab,\n        selectedTab: selectedTab,\n        onClickSettingBtn: onClickSettingBtn,\n        subscribeInfo: subscribeInfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return UserInfoTemplate;\n}(React.Component);\n\n;\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(injectIntl(withSubscribe(UserInfoTemplate)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Mypage/Components/UserInfoTemplate/index.js"],"names":["React","connect","injectIntl","View","request","showPopUp","withSubscribe","NameSetting","UserInfoTemplate","props","getUserProfile","userProfile","email","targetEmail","then","res","json","catch","e","console","error","user","setState","onClickSettingBtn","darkmode","defaultPadding","mobileFullscreen","window","innerWidth","state","isMyPage","userinfo","prevProps","JSON","stringify","handleSelectTab","selectedTab","intl","subscribeInfo","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../../Common/Component/PopUp\";\nimport { withSubscribe } from \"../../../../Common/Util/Subscribe\";\nimport NameSetting from \"../NameSetting\";\nimport \"./index.scss\";\n\nclass UserInfoTemplate extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user : props.isMyPage ? props.userinfo : null \n    }\n  }\n  \n  componentDidMount() {\n    this.getUserProfile();\n  }\n\n  componentDidUpdate(prevProps) {\n    if(this.props.isMyPage) {\n      if(JSON.stringify(prevProps.userinfo) !== JSON.stringify(this.props.userinfo)) {\n        // 내 프로필이 변경될 경우 state가 아닌 props가 변경되기에, 내 프로필 props가 변경될 때 그 값을 state에도 sync하는 로직.\n        // 다른유저의 프로필을 표시할 때와, 내 프로필을 표시할때 공통으로 사용하고 있는 컴포넌트인데,\n        // 내 프로필일 경우, redux로부터 값을 불러오지만 (props)\n        // 다른유저일 경우는 api호출을 통해 받아옴 (state)\n        // 공통된 처리를 위해서 두 상황 모두 state에서 유저 정보를 저장하고 있음\n        this.setState({user: this.props.userinfo})\n      }\n    }\n  }\n\n  getUserProfile = async () => {\n    const user = await request\n      .userProfile({ email: this.props.targetEmail })\n      .then(res => res.json())\n      .catch(e => console.error(e));\n    this.setState({ user });\n  }\n\n  onClickSettingBtn = () => {\n    showPopUp(\n      <NameSetting />,\n      { \n        darkmode: true, \n        defaultPadding: false, \n        mobileFullscreen: window.innerWidth < 1170\n      }\n    );\n  }\n\n  render() {\n    const { user } = this.state;\n    const {\n      isMyPage,\n      handleSelectTab,\n      selectedTab,\n      intl,\n      subscribeInfo\n    } = this.props;\n\n    const { onClickSettingBtn } = this;\n\n    return (\n      <View\n        intl={intl}\n        user={user}\n        isMyPage={isMyPage}\n        handleSelectTab={handleSelectTab}\n        selectedTab={selectedTab}\n        onClickSettingBtn={onClickSettingBtn}\n        subscribeInfo={subscribeInfo}\n      />\n    );\n  }\n};\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {}\n)(injectIntl(withSubscribe(UserInfoTemplate)));\n\n"]},"metadata":{},"sourceType":"module"}