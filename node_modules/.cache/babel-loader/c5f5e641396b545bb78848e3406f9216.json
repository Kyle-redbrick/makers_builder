{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Event/Event4/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.handleWindowFocus = function () {\n      var isNeedUpdate = _this.windowFocused === false;\n\n      if (isNeedUpdate) {\n        _this.getData();\n      }\n    };\n\n    _this.handleWindowBlur = function () {\n      _this.windowFocused = false;\n    };\n\n    _this.getData = function () {\n      var email = _this.props.email;\n      request.getBingoEvents({\n        email: email\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        var bingos = json.bingos,\n            myBingos = json.myBingos,\n            allCompletedCount = json.allCompletedCount;\n\n        _this.setState({\n          bingos: bingos,\n          myBingos: myBingos,\n          allCompletedCount: allCompletedCount\n        });\n      });\n    };\n\n    _this.onClickLogin = function () {\n      showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: true\n      });\n    };\n\n    _this.state = {\n      bingos: [],\n      myBingos: [],\n      allCompletedCount: 0\n    };\n    _this.windowFocused = true;\n\n    if (_this.props.location) {\n      if (_this.props.location.search) {\n        if (_this.props.location.search === \"?utm_campaign=amy_letter&utm_medium=edm&utm_source=donga\") {\n          window.location.href = \"https://wizlive.com/?utm_campaign=amy_letter&utm_medium=edm&utm_source=donga/?trial=1\";\n        }\n      }\n    }\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"focus\", this.handleWindowFocus);\n      window.addEventListener(\"blur\", this.handleWindowBlur);\n      this.getData();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"focus\", this.handleWindowFocus);\n      window.removeEventListener(\"blur\", this.handleWindowBlur);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          bingos = _this$state.bingos,\n          myBingos = _this$state.myBingos,\n          allCompletedCount = _this$state.allCompletedCount;\n      var userId = this.props.userId;\n      var missions = [];\n\n      for (var i = 0; i < bingos.length; i++) {\n        var isClear = false;\n\n        for (var j = 0; j < myBingos.length; j++) {\n          if (bingos[i].type === myBingos[j].bingoType) {\n            isClear = true;\n            break;\n          }\n        }\n\n        missions.push({\n          title: bingos[i].title,\n          isClear: isClear\n        });\n      }\n\n      var lines = [];\n\n      if (bingos.length > 0) {\n        lines = [missions[0].isClear && missions[1].isClear && missions[2].isClear, missions[3].isClear && missions[4].isClear && missions[5].isClear, missions[6].isClear && missions[7].isClear && missions[8].isClear, missions[0].isClear && missions[3].isClear && missions[6].isClear, missions[1].isClear && missions[4].isClear && missions[7].isClear, missions[2].isClear && missions[5].isClear && missions[8].isClear, missions[0].isClear && missions[4].isClear && missions[8].isClear, missions[2].isClear && missions[4].isClear && missions[6].isClear];\n      }\n\n      return /*#__PURE__*/React.createElement(View, {\n        userId: userId,\n        missions: missions,\n        lines: lines,\n        allCompletedCount: allCompletedCount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email,\n    userId: state.userinfo.id\n  };\n}, {})(Container);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Event/Event4/Container.js"],"names":["React","Component","connect","View","request","showPopUp","SignIn","Container","props","handleWindowFocus","isNeedUpdate","windowFocused","getData","handleWindowBlur","email","getBingoEvents","then","res","json","bingos","myBingos","allCompletedCount","setState","onClickLogin","darkmode","state","location","search","window","href","addEventListener","removeEventListener","userId","missions","i","length","isClear","j","type","bingoType","push","title","lines","userinfo","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport * as request from \"../../../Common/Util/HTTPRequest\";\nimport { showPopUp } from \"../../../Common/Component/PopUp\";\nimport SignIn from \"../../../Common/Component/SignIn\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bingos: [],\n      myBingos: [],\n      allCompletedCount: 0\n    };\n    this.windowFocused = true;\n    if (this.props.location) {\n      if (this.props.location.search) {\n        if (\n          this.props.location.search ===\n          \"?utm_campaign=amy_letter&utm_medium=edm&utm_source=donga\"\n        ) {\n          window.location.href =\n            \"https://wizlive.com/?utm_campaign=amy_letter&utm_medium=edm&utm_source=donga/?trial=1\";\n        }\n      }\n    }\n  }\n  componentDidMount() {\n    window.addEventListener(\"focus\", this.handleWindowFocus);\n    window.addEventListener(\"blur\", this.handleWindowBlur);\n    this.getData();\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"focus\", this.handleWindowFocus);\n    window.removeEventListener(\"blur\", this.handleWindowBlur);\n  }\n  handleWindowFocus = () => {\n    const isNeedUpdate = this.windowFocused === false;\n    if (isNeedUpdate) {\n      this.getData();\n    }\n  };\n  handleWindowBlur = () => {\n    this.windowFocused = false;\n  };\n\n  getData = () => {\n    const { email } = this.props;\n    request\n      .getBingoEvents({ email })\n      .then(res => res.json())\n      .then(json => {\n        const { bingos, myBingos, allCompletedCount } = json;\n        this.setState({ bingos, myBingos, allCompletedCount });\n      });\n  };\n  onClickLogin = () => {\n    showPopUp(<SignIn />, { darkmode: true });\n  };\n\n  render() {\n    const { bingos, myBingos, allCompletedCount } = this.state;\n    const { userId } = this.props;\n\n    let missions = [];\n    for (let i = 0; i < bingos.length; i++) {\n      let isClear = false;\n      for (let j = 0; j < myBingos.length; j++) {\n        if (bingos[i].type === myBingos[j].bingoType) {\n          isClear = true;\n          break;\n        }\n      }\n      missions.push({ title: bingos[i].title, isClear });\n    }\n\n    let lines = [];\n    if (bingos.length > 0) {\n      lines = [\n        missions[0].isClear && missions[1].isClear && missions[2].isClear,\n        missions[3].isClear && missions[4].isClear && missions[5].isClear,\n        missions[6].isClear && missions[7].isClear && missions[8].isClear,\n        missions[0].isClear && missions[3].isClear && missions[6].isClear,\n        missions[1].isClear && missions[4].isClear && missions[7].isClear,\n        missions[2].isClear && missions[5].isClear && missions[8].isClear,\n        missions[0].isClear && missions[4].isClear && missions[8].isClear,\n        missions[2].isClear && missions[4].isClear && missions[6].isClear\n      ];\n    }\n    return (\n      <View\n        userId={userId}\n        missions={missions}\n        lines={lines}\n        allCompletedCount={allCompletedCount}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({\n    email: state.userinfo.email,\n    userId: state.userinfo.id\n  }),\n  {}\n)(Container);\n"]},"metadata":{},"sourceType":"module"}