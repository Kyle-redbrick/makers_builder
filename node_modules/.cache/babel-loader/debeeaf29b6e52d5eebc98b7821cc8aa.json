{"ast":null,"code":"import _toConsumableArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ACTION } from \"../../Util/Constant\";\nexport var addScene = function addScene(scene) {\n  return {\n    type: ACTION.SCENE_ADD,\n    payload: {\n      scene: scene\n    }\n  };\n};\nexport var removeScene = function removeScene(sceneId) {\n  return {\n    type: ACTION.SCENE_REMOVE,\n    payload: {\n      sceneId: sceneId\n    }\n  };\n};\nexport var renameScene = function renameScene(sceneId, sceneName) {\n  return {\n    type: ACTION.SCENE_RENAME,\n    payload: {\n      sceneId: sceneId,\n      sceneName: sceneName\n    }\n  };\n};\nexport var selectStartScene = function selectStartScene(sceneId) {\n  return {\n    type: ACTION.SELECT_STARTSCENE,\n    payload: {\n      sceneId: sceneId\n    }\n  };\n};\nexport var addGameObject = function addGameObject(sceneId, gameObject) {\n  return {\n    type: ACTION.GAMEOBJECT_ADD,\n    payload: {\n      sceneId: sceneId,\n      gameObject: gameObject\n    }\n  };\n};\nexport var removeGameObjects = function removeGameObjects(sceneId, gameObjectIds) {\n  return {\n    type: ACTION.GAMEOBJECTS_REMOVE,\n    payload: {\n      sceneId: sceneId,\n      gameObjectIds: gameObjectIds\n    }\n  };\n};\nexport var reorderGameObjects = function reorderGameObjects(sceneId, gameObjectIds) {\n  return {\n    type: ACTION.GAMEOBJECT_REORDER,\n    payload: {\n      sceneId: sceneId,\n      gameObjectIds: gameObjectIds\n    }\n  };\n};\nexport var updateGameObjectProperty = function updateGameObjectProperty(sceneId, gameObjectId, propertyId, value) {\n  return {\n    type: ACTION.GAMEOBJECT_UPDATE_PROPERTY,\n    payload: {\n      sceneId: sceneId,\n      gameObjectId: gameObjectId,\n      propertyId: propertyId,\n      value: value\n    }\n  };\n};\nexport var setEditorCameraTransform = function setEditorCameraTransform(sceneId, position, target) {\n  return {\n    type: ACTION.EDITORCAMERA_SET_TRANSFORM,\n    payload: {\n      sceneId: sceneId,\n      position: position,\n      target: target\n    }\n  };\n};\nexport var addSound = function addSound(sceneId, sound) {\n  return {\n    type: ACTION.SOUND_ADD,\n    payload: {\n      sceneId: sceneId,\n      sound: sound\n    }\n  };\n};\nexport var removeSound = function removeSound(sceneId, soundId) {\n  return {\n    type: ACTION.SOUND_REMOVE,\n    payload: {\n      sceneId: sceneId,\n      soundId: soundId\n    }\n  };\n};\nexport var setGameThumbnail = function setGameThumbnail(thumbnail) {\n  return {\n    type: ACTION.SET_GAME_THUMBNAIL,\n    payload: {\n      thumbnail: thumbnail\n    }\n  };\n};\nexport var setSceneThumbnail = function setSceneThumbnail(sceneId, thumbnail) {\n  return {\n    type: ACTION.SET_SCENE_THUMBNAIL,\n    payload: {\n      sceneId: sceneId,\n      thumbnail: thumbnail\n    }\n  };\n};\nvar initialState = {\n  scenes: {},\n  sceneIds: [],\n  soundIds: [],\n  startSceneId: null,\n  thumbnail: null\n};\n\nvar game = function game() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      payload = action.payload;\n\n  switch (type) {\n    case ACTION.PROJECT_SET:\n    case ACTION.PROJECT_SET_TEMPLATE:\n      return projectSet(state, payload);\n\n    case ACTION.SCENE_ADD:\n      return sceneAdded(state, payload);\n\n    case ACTION.SCENE_REMOVE:\n      return sceneRemoved(state, payload);\n\n    case ACTION.SCENE_RENAME:\n      return sceneRenamed(state, payload);\n\n    case ACTION.SELECT_STARTSCENE:\n      return _objectSpread({}, state, {\n        startSceneId: payload.sceneId\n      });\n\n    case ACTION.GAMEOBJECT_REORDER:\n      return gameObjectReordered(state, payload);\n\n    case ACTION.GAMEOBJECT_ADD:\n      return gameObjectAdded(state, payload);\n\n    case ACTION.GAMEOBJECTS_REMOVE:\n      return gameObjectsRemoved(state, payload);\n\n    case ACTION.GAMEOBJECT_UPDATE_PROPERTY:\n      return gameObjectPropertyUpdated(state, payload);\n\n    case ACTION.EDITORCAMERA_SET_TRANSFORM:\n      return editorCameraTransformUpdated(state, payload);\n\n    case ACTION.SOUND_ADD:\n      return soundAdded(state, payload);\n\n    case ACTION.SOUND_REMOVE:\n      return soundRemoved(state, payload);\n\n    case ACTION.SET_GAME_THUMBNAIL:\n      return _objectSpread({}, state, {\n        thumbnail: payload.thumbnail\n      });\n\n    case ACTION.SET_SCENE_THUMBNAIL:\n      return sceneThumbnailSet(state, payload);\n\n    default:\n      return state;\n  }\n};\n\nfunction soundAdded(prevState, payload) {\n  var sceneId = payload.sceneId,\n      sound = payload.sound;\n  var assetId = sound.assetId;\n\n  var newState = _objectSpread({}, prevState);\n\n  var prevSoundIds = prevState.scenes[sceneId].soundIds;\n  var newSceneSoundIds = prevSoundIds ? _toConsumableArray(prevState.scenes[sceneId].soundIds) : [];\n\n  if (!newSceneSoundIds.includes(assetId)) {\n    newSceneSoundIds.push(assetId);\n  }\n\n  newState.scenes[sceneId].soundIds = newSceneSoundIds;\n  var newSoundIds = prevState.soundIds ? _toConsumableArray(prevState.soundIds) : [];\n\n  if (!newSoundIds.includes(assetId)) {\n    newSoundIds.push(assetId);\n  }\n\n  newState.soundIds = newSoundIds;\n  return newState;\n}\n\nfunction soundRemoved(prevState, payload) {\n  var sceneId = payload.sceneId,\n      soundId = payload.soundId;\n\n  var newState = _objectSpread({}, prevState);\n\n  var prevSceneSoundIds = prevState.scenes[sceneId].soundIds;\n  var newSceneSoundIds = prevSceneSoundIds ? prevSceneSoundIds.filter(function (item) {\n    return item !== soundId;\n  }) : [];\n  newState.scenes[sceneId].soundIds = newSceneSoundIds;\n  var inOtherScene = false;\n\n  for (var id in newState.scenes) {\n    if (id === sceneId) continue;\n    var ids = newState.scenes[id].soundIds;\n\n    if (ids && ids.includes(soundId)) {\n      inOtherScene = true;\n      break;\n    }\n  }\n\n  if (!inOtherScene) {\n    var newSoundIds = prevState.soundIds.filter(function (item) {\n      return item !== soundId;\n    });\n    newState.soundIds = newSoundIds;\n  }\n\n  return newState;\n}\n\nfunction projectSet(prevState, payload) {\n  var project = payload.project;\n\n  if (!project.state || !project.state.game) {\n    return prevState;\n  }\n\n  var nextState = _objectSpread({}, prevState, project.state.game);\n\n  var nextTimeStamp = new Date().getTime();\n  nextState.timeStamp = nextTimeStamp;\n  return nextState;\n}\n\nfunction sceneAdded(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var scene = payload.scene;\n  var sceneId = scene.id;\n  nextState.scenes[sceneId] = scene;\n\n  var nextSceneIds = _toConsumableArray(prevState.sceneIds);\n\n  nextSceneIds.push(sceneId);\n  nextState.sceneIds = nextSceneIds;\n  return nextState;\n}\n\nfunction sceneRemoved(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId;\n  delete nextState.scenes[sceneId];\n  var index = nextState.sceneIds.indexOf(sceneId);\n\n  if (index >= 0) {\n    nextState.sceneIds.splice(index, 1);\n  }\n\n  return nextState;\n}\n\nfunction sceneRenamed(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId,\n      sceneName = payload.sceneName;\n\n  var nextScenes = _objectSpread({}, nextState.scenes);\n\n  nextState.scenes = nextScenes;\n\n  var nextScene = _objectSpread({}, nextScenes[sceneId]);\n\n  nextScenes[sceneId] = nextScene;\n  nextScene.name = sceneName;\n  return nextState;\n}\n\nfunction sceneThumbnailSet(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId,\n      thumbnail = payload.thumbnail;\n\n  var nextScenes = _objectSpread({}, nextState.scenes);\n\n  nextState.scenes = nextScenes;\n\n  var nextScene = _objectSpread({}, nextScenes[sceneId]);\n\n  nextScenes[sceneId] = nextScene;\n  nextScene.thumbnail = thumbnail;\n  return nextState;\n}\n\nfunction gameObjectReordered(prevState, payload) {\n  var sceneId = payload.sceneId,\n      gameObjectIds = payload.gameObjectIds;\n\n  var nextState = _objectSpread({}, prevState);\n\n  nextState.scenes[sceneId].gameObjectIds = gameObjectIds;\n  return nextState;\n}\n\nfunction gameObjectAdded(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId,\n      gameObject = payload.gameObject;\n  var gameObjectId = gameObject.id;\n\n  var nextGameObjectIds = _toConsumableArray(prevState.scenes[sceneId].gameObjectIds);\n\n  nextGameObjectIds.push(gameObjectId);\n  nextState.scenes[sceneId].gameObjectIds = nextGameObjectIds;\n  nextState.scenes[sceneId].gameObjects[gameObjectId] = gameObject;\n  return nextState;\n}\n\nfunction gameObjectsRemoved(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId,\n      gameObjectIds = payload.gameObjectIds;\n  var nextGameObjects = prevState.scenes[sceneId].gameObjects;\n  gameObjectIds.forEach(function (id) {\n    if (id in nextGameObjects) {\n      delete nextGameObjects[id];\n    }\n  });\n  nextState.scenes[sceneId].gameObjects = nextGameObjects;\n  var nextGameObjectIds = prevState.scenes[sceneId].gameObjectIds.filter(function (id) {\n    return !gameObjectIds.includes(id);\n  });\n  nextState.scenes[sceneId].gameObjectIds = nextGameObjectIds;\n  return nextState;\n}\n\nfunction gameObjectPropertyUpdated(prevState, payload) {\n  var sceneId = payload.sceneId,\n      gameObjectId = payload.gameObjectId,\n      propertyId = payload.propertyId,\n      value = payload.value;\n\n  var nextState = _objectSpread({}, prevState);\n\n  var nextScenes = _objectSpread({}, nextState.scenes);\n\n  nextState.scenes = nextScenes;\n\n  var nextScene = _objectSpread({}, nextScenes[sceneId]);\n\n  nextScenes[sceneId] = nextScene;\n\n  var nextGameObjects = _objectSpread({}, nextScene.gameObjects);\n\n  nextScene.gameObjects = nextGameObjects;\n\n  var newGameObject = _objectSpread({}, nextGameObjects[gameObjectId]);\n\n  nextGameObjects[gameObjectId] = newGameObject;\n  newGameObject[propertyId] = value;\n  return nextState;\n}\n\nfunction editorCameraTransformUpdated(prevState, payload) {\n  var nextState = _objectSpread({}, prevState);\n\n  var sceneId = payload.sceneId,\n      position = payload.position,\n      target = payload.target;\n\n  var nextScenes = _objectSpread({}, nextState.scenes);\n\n  nextState.scenes = nextScenes;\n\n  var nextScene = _objectSpread({}, nextScenes[sceneId]);\n\n  nextScenes[sceneId] = nextScene;\n\n  var editorCamera = _objectSpread({}, nextScene.editorCamera);\n\n  nextScene.editorCamera = editorCamera;\n  editorCamera.position = position;\n  editorCamera.target = target;\n  return nextState;\n}\n\nexport default game;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder3D/Store/Reducer/game.js"],"names":["ACTION","addScene","scene","type","SCENE_ADD","payload","removeScene","sceneId","SCENE_REMOVE","renameScene","sceneName","SCENE_RENAME","selectStartScene","SELECT_STARTSCENE","addGameObject","gameObject","GAMEOBJECT_ADD","removeGameObjects","gameObjectIds","GAMEOBJECTS_REMOVE","reorderGameObjects","GAMEOBJECT_REORDER","updateGameObjectProperty","gameObjectId","propertyId","value","GAMEOBJECT_UPDATE_PROPERTY","setEditorCameraTransform","position","target","EDITORCAMERA_SET_TRANSFORM","addSound","sound","SOUND_ADD","removeSound","soundId","SOUND_REMOVE","setGameThumbnail","thumbnail","SET_GAME_THUMBNAIL","setSceneThumbnail","SET_SCENE_THUMBNAIL","initialState","scenes","sceneIds","soundIds","startSceneId","game","state","action","PROJECT_SET","PROJECT_SET_TEMPLATE","projectSet","sceneAdded","sceneRemoved","sceneRenamed","gameObjectReordered","gameObjectAdded","gameObjectsRemoved","gameObjectPropertyUpdated","editorCameraTransformUpdated","soundAdded","soundRemoved","sceneThumbnailSet","prevState","assetId","newState","prevSoundIds","newSceneSoundIds","includes","push","newSoundIds","prevSceneSoundIds","filter","item","inOtherScene","id","ids","project","nextState","nextTimeStamp","Date","getTime","timeStamp","nextSceneIds","index","indexOf","splice","nextScenes","nextScene","name","nextGameObjectIds","gameObjects","nextGameObjects","forEach","newGameObject","editorCamera"],"mappings":"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","sourcesContent":["import { ACTION } from \"../../Util/Constant\";\n\nexport const addScene = scene => ({\n  type: ACTION.SCENE_ADD,\n  payload: { scene }\n});\n\nexport const removeScene = sceneId => ({\n  type: ACTION.SCENE_REMOVE,\n  payload: { sceneId }\n});\n\nexport const renameScene = (sceneId, sceneName) => ({\n  type: ACTION.SCENE_RENAME,\n  payload: { sceneId, sceneName }\n});\n\nexport const selectStartScene = sceneId => ({\n  type: ACTION.SELECT_STARTSCENE,\n  payload: { sceneId }\n});\n\nexport const addGameObject = (sceneId, gameObject) => ({\n  type: ACTION.GAMEOBJECT_ADD,\n  payload: { sceneId, gameObject }\n});\n\nexport const removeGameObjects = (sceneId, gameObjectIds) => ({\n  type: ACTION.GAMEOBJECTS_REMOVE,\n  payload: { sceneId, gameObjectIds }\n});\n\nexport const reorderGameObjects = (sceneId, gameObjectIds) => ({\n  type: ACTION.GAMEOBJECT_REORDER,\n  payload: { sceneId, gameObjectIds }\n});\n\nexport const updateGameObjectProperty = (\n  sceneId,\n  gameObjectId,\n  propertyId,\n  value\n) => ({\n  type: ACTION.GAMEOBJECT_UPDATE_PROPERTY,\n  payload: { sceneId, gameObjectId, propertyId, value }\n});\n\nexport const setEditorCameraTransform = (sceneId, position, target) => ({\n  type: ACTION.EDITORCAMERA_SET_TRANSFORM,\n  payload: { sceneId, position, target }\n});\n\nexport const addSound = (sceneId, sound) => ({\n  type: ACTION.SOUND_ADD,\n  payload: { sceneId, sound }\n});\n\nexport const removeSound = (sceneId, soundId) => ({\n  type: ACTION.SOUND_REMOVE,\n  payload: { sceneId, soundId }\n});\n\nexport const setGameThumbnail = thumbnail => ({\n  type: ACTION.SET_GAME_THUMBNAIL,\n  payload: { thumbnail }\n});\n\nexport const setSceneThumbnail = (sceneId, thumbnail) => ({\n  type: ACTION.SET_SCENE_THUMBNAIL,\n  payload: { sceneId, thumbnail }\n});\n\nconst initialState = {\n  scenes: {},\n  sceneIds: [],\n  soundIds: [],\n  startSceneId: null,\n  thumbnail: null\n};\n\nconst game = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case ACTION.PROJECT_SET:\n    case ACTION.PROJECT_SET_TEMPLATE:\n      return projectSet(state, payload);\n    case ACTION.SCENE_ADD:\n      return sceneAdded(state, payload);\n    case ACTION.SCENE_REMOVE:\n      return sceneRemoved(state, payload);\n    case ACTION.SCENE_RENAME:\n      return sceneRenamed(state, payload);\n    case ACTION.SELECT_STARTSCENE:\n      return { ...state, startSceneId: payload.sceneId };\n    case ACTION.GAMEOBJECT_REORDER:\n      return gameObjectReordered(state, payload);\n    case ACTION.GAMEOBJECT_ADD:\n      return gameObjectAdded(state, payload);\n    case ACTION.GAMEOBJECTS_REMOVE:\n      return gameObjectsRemoved(state, payload);\n    case ACTION.GAMEOBJECT_UPDATE_PROPERTY:\n      return gameObjectPropertyUpdated(state, payload);\n    case ACTION.EDITORCAMERA_SET_TRANSFORM:\n      return editorCameraTransformUpdated(state, payload);\n    case ACTION.SOUND_ADD:\n      return soundAdded(state, payload);\n    case ACTION.SOUND_REMOVE:\n      return soundRemoved(state, payload);\n    case ACTION.SET_GAME_THUMBNAIL:\n      return { ...state, thumbnail: payload.thumbnail };\n    case ACTION.SET_SCENE_THUMBNAIL:\n      return sceneThumbnailSet(state, payload);\n    default:\n      return state;\n  }\n};\n\nfunction soundAdded(prevState, payload) {\n  const { sceneId, sound } = payload;\n  const { assetId } = sound;\n  const newState = { ...prevState };\n  const prevSoundIds = prevState.scenes[sceneId].soundIds;\n  const newSceneSoundIds = prevSoundIds\n    ? [...prevState.scenes[sceneId].soundIds]\n    : [];\n  if (!newSceneSoundIds.includes(assetId)) {\n    newSceneSoundIds.push(assetId);\n  }\n  newState.scenes[sceneId].soundIds = newSceneSoundIds;\n  const newSoundIds = prevState.soundIds ? [...prevState.soundIds] : [];\n  if (!newSoundIds.includes(assetId)) {\n    newSoundIds.push(assetId);\n  }\n  newState.soundIds = newSoundIds;\n  return newState;\n}\n\nfunction soundRemoved(prevState, payload) {\n  const { sceneId, soundId } = payload;\n  const newState = { ...prevState };\n  const prevSceneSoundIds = prevState.scenes[sceneId].soundIds;\n  const newSceneSoundIds = prevSceneSoundIds\n    ? prevSceneSoundIds.filter(item => item !== soundId)\n    : [];\n  newState.scenes[sceneId].soundIds = newSceneSoundIds;\n  let inOtherScene = false;\n  for (const id in newState.scenes) {\n    if (id === sceneId) continue;\n    const ids = newState.scenes[id].soundIds;\n    if (ids && ids.includes(soundId)) {\n      inOtherScene = true;\n      break;\n    }\n  }\n  if (!inOtherScene) {\n    const newSoundIds = prevState.soundIds.filter(item => item !== soundId);\n    newState.soundIds = newSoundIds;\n  }\n  return newState;\n}\n\nfunction projectSet(prevState, payload) {\n  const { project } = payload;\n  if (!project.state || !project.state.game) {\n    return prevState;\n  }\n  const nextState = { ...prevState, ...project.state.game };\n  const nextTimeStamp = new Date().getTime();\n  nextState.timeStamp = nextTimeStamp;\n  return nextState;\n}\n\nfunction sceneAdded(prevState, payload) {\n  const nextState = { ...prevState };\n  const { scene } = payload;\n  const sceneId = scene.id;\n  nextState.scenes[sceneId] = scene;\n  const nextSceneIds = [...prevState.sceneIds];\n  nextSceneIds.push(sceneId);\n  nextState.sceneIds = nextSceneIds;\n  return nextState;\n}\n\nfunction sceneRemoved(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId } = payload;\n  delete nextState.scenes[sceneId];\n  let index = nextState.sceneIds.indexOf(sceneId);\n  if (index >= 0) {\n    nextState.sceneIds.splice(index, 1);\n  }\n  return nextState;\n}\n\nfunction sceneRenamed(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId, sceneName } = payload;\n  const nextScenes = { ...nextState.scenes };\n  nextState.scenes = nextScenes;\n  const nextScene = { ...nextScenes[sceneId] };\n  nextScenes[sceneId] = nextScene;\n  nextScene.name = sceneName;\n  return nextState;\n}\n\nfunction sceneThumbnailSet(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId, thumbnail } = payload;\n  const nextScenes = { ...nextState.scenes };\n  nextState.scenes = nextScenes;\n  const nextScene = { ...nextScenes[sceneId] };\n  nextScenes[sceneId] = nextScene;\n  nextScene.thumbnail = thumbnail;\n  return nextState;\n}\n\nfunction gameObjectReordered(prevState, payload) {\n  const { sceneId, gameObjectIds } = payload;\n  const nextState = { ...prevState };\n  nextState.scenes[sceneId].gameObjectIds = gameObjectIds;\n  return nextState;\n}\n\nfunction gameObjectAdded(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId, gameObject } = payload;\n  const gameObjectId = gameObject.id;\n  const nextGameObjectIds = [...prevState.scenes[sceneId].gameObjectIds];\n  nextGameObjectIds.push(gameObjectId);\n  nextState.scenes[sceneId].gameObjectIds = nextGameObjectIds;\n  nextState.scenes[sceneId].gameObjects[gameObjectId] = gameObject;\n  return nextState;\n}\n\nfunction gameObjectsRemoved(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId, gameObjectIds } = payload;\n\n  const nextGameObjects = prevState.scenes[sceneId].gameObjects;\n  gameObjectIds.forEach(id => {\n    if (id in nextGameObjects) {\n      delete nextGameObjects[id];\n    }\n  });\n  nextState.scenes[sceneId].gameObjects = nextGameObjects;\n\n  const nextGameObjectIds = prevState.scenes[sceneId].gameObjectIds.filter(\n    id => !gameObjectIds.includes(id)\n  );\n  nextState.scenes[sceneId].gameObjectIds = nextGameObjectIds;\n\n  return nextState;\n}\n\nfunction gameObjectPropertyUpdated(prevState, payload) {\n  const { sceneId, gameObjectId, propertyId, value } = payload;\n  const nextState = { ...prevState };\n  const nextScenes = { ...nextState.scenes };\n  nextState.scenes = nextScenes;\n  const nextScene = { ...nextScenes[sceneId] };\n  nextScenes[sceneId] = nextScene;\n  const nextGameObjects = { ...nextScene.gameObjects };\n  nextScene.gameObjects = nextGameObjects;\n  const newGameObject = { ...nextGameObjects[gameObjectId] };\n  nextGameObjects[gameObjectId] = newGameObject;\n  newGameObject[propertyId] = value;\n  return nextState;\n}\n\nfunction editorCameraTransformUpdated(prevState, payload) {\n  const nextState = { ...prevState };\n  const { sceneId, position, target } = payload;\n  const nextScenes = { ...nextState.scenes };\n  nextState.scenes = nextScenes;\n  const nextScene = { ...nextScenes[sceneId] };\n  nextScenes[sceneId] = nextScene;\n  const editorCamera = { ...nextScene.editorCamera };\n  nextScene.editorCamera = editorCamera;\n  editorCamera.position = position;\n  editorCamera.target = target;\n  return nextState;\n}\n\nexport default game;\n"]},"metadata":{},"sourceType":"module"}