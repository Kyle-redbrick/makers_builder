{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { URL } from \"../../../Common/Util/Constant\";\nimport AssetLibrary from \"./assetLibrary\";\nexport default function (_x, _x2) {\n  return _ref.apply(this, arguments);\n}\n\nfunction _ref() {\n  _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(state, isFromWizlab) {\n    var baseURL, assets, scriptSrc, htmlDoc;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            baseURL = isFromWizlab ? \"/\" : URL.GAME_SRC;\n            _context.next = 3;\n            return AssetLibrary.loadAssetsForGame(state.scene);\n\n          case 3:\n            assets = _context.sent;\n            scriptSrc = \"\\n<script src=\\\"\".concat(baseURL, \"game/constant.js\\\"></script>\\n<script src=\\\"\").concat(baseURL, \"game/preload.js\\\"></script>\\n<script src=\\\"\").concat(baseURL, \"game/preloadScene.js\\\"></script>\\n\");\n            htmlDoc = \"\\n<!DOCTYPE html>\\n<head>\\n<script src=\\\"https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js\\\"></script>\\n<script src=\\\"\".concat(baseURL, \"phaser2.js\\\"></script>\\n\").concat(scriptSrc, \"\\n\\n</head>\\n<body>\\n<div id=\\\"container\\\"><div id=\\\"gameWrapper\\\"></div></div>\\n<script>\\nvar state = \").concat(JSON.stringify(state), \";\\nvar assets = \").concat(JSON.stringify(assets), \";\\nvar scenes = state.scene.scenes;\\nvar sceneIds = state.scene.sceneIds;\\nvar soundIds = state.scene.soundIds;\\nvar wrapperId = \\\"gameWrapper\\\";\\n\\nthis.game = new Game({\\n  screenWidth: 300,\\n  screenHeight: 300,\\n  wrapperId: wrapperId,\\n  scenes: scenes,\\n  sceneIds: sceneIds,\\n  soundIds: soundIds,\\n  assets: assets\\n});\\n</script></body></html>\");\n            return _context.abrupt(\"return\", htmlDoc);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _ref.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/utils/preloadPageGenerator.js"],"names":["URL","AssetLibrary","state","isFromWizlab","baseURL","GAME_SRC","loadAssetsForGame","scene","assets","scriptSrc","htmlDoc","JSON","stringify"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,+BAApB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA;AAAA;AAAA;;;kEAAe,iBAAeC,KAAf,EAAsBC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,YAAAA,OADO,GACGD,YAAY,GAAG,GAAH,GAASH,GAAG,CAACK,QAD5B;AAAA;AAAA,mBAEQJ,YAAY,CAACK,iBAAb,CAA+BJ,KAAK,CAACK,KAArC,CAFR;;AAAA;AAEPC,YAAAA,MAFO;AAGTC,YAAAA,SAHS,6BAIAL,OAJA,yDAKAA,OALA,wDAMAA,OANA;AASPM,YAAAA,OATO,wJAaAN,OAbA,qCAcbK,SAda,oHAoBDE,IAAI,CAACC,SAAL,CAAeV,KAAf,CApBC,6BAqBAS,IAAI,CAACC,SAAL,CAAeJ,MAAf,CArBA;AAAA,6CAqCNE,OArCM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { URL } from \"../../../Common/Util/Constant\";\nimport AssetLibrary from \"./assetLibrary\";\n\nexport default async function(state, isFromWizlab) {\n  const baseURL = isFromWizlab ? \"/\" : URL.GAME_SRC;\n  const assets = await AssetLibrary.loadAssetsForGame(state.scene);\n  let scriptSrc = `\n<script src=\"${baseURL}game/constant.js\"></script>\n<script src=\"${baseURL}game/preload.js\"></script>\n<script src=\"${baseURL}game/preloadScene.js\"></script>\n`;\n\n  const htmlDoc = `\n<!DOCTYPE html>\n<head>\n<script src=\"https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js\"></script>\n<script src=\"${baseURL}phaser2.js\"></script>\n${scriptSrc}\n\n</head>\n<body>\n<div id=\"container\"><div id=\"gameWrapper\"></div></div>\n<script>\nvar state = ${JSON.stringify(state)};\nvar assets = ${JSON.stringify(assets)};\nvar scenes = state.scene.scenes;\nvar sceneIds = state.scene.sceneIds;\nvar soundIds = state.scene.soundIds;\nvar wrapperId = \"gameWrapper\";\n\nthis.game = new Game({\n  screenWidth: 300,\n  screenHeight: 300,\n  wrapperId: wrapperId,\n  scenes: scenes,\n  sceneIds: sceneIds,\n  soundIds: soundIds,\n  assets: assets\n});\n</script></body></html>`;\n  return htmlDoc;\n}\n"]},"metadata":{},"sourceType":"module"}