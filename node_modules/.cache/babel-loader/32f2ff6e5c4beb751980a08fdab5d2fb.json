{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/TemporaryId/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport moment from \"moment\";\nimport sha256 from \"../../Util/SHA256\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport Field from \"../../../Common/Component/Field\";\nimport { getRandomName, getRandomUserIcon } from \"../../Util/RandomGenerator\";\nimport SignIn from \"../SignIn\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport closeIcon from \"../../../Image/tempId-popup-close.svg\";\nimport \"./index.scss\";\n\nvar TemporaryId = /*#__PURE__*/function (_Component) {\n  _inherits(TemporaryId, _Component);\n\n  var _super = _createSuper(TemporaryId);\n\n  function TemporaryId(props) {\n    var _this;\n\n    _classCallCheck(this, TemporaryId);\n\n    _this = _super.call(this, props);\n\n    _this.onChangeInput = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onSubmit = function () {\n      var _this$state = _this.state,\n          id = _this$state.id,\n          password = _this$state.password;\n\n      if (!_this.checkEmail(id)) {\n        _this.setState({\n          idWarning: _this.props.intl.formatMessage({\n            id: \"ID_SIGNUP_WARNING_ID_EMPTY_FORMAT\"\n          })\n        });\n\n        return;\n      } else {\n        _this.setState({\n          idWarning: \"\"\n        });\n      }\n\n      if (!_this.checkPassword(password)) {\n        _this.setState({\n          passwordWarning: _this.props.intl.formatMessage({\n            id: \"ID_SIGNUP_WARNING_PW_EMPTY_FORMAT\"\n          })\n        });\n\n        return;\n      } else {\n        _this.setState({\n          passwordWarning: \"\"\n        });\n      }\n\n      var birth = _this.state.birth;\n\n      if (!birth.year || birth.month == null || !birth.date) {\n        _this.setState({\n          birthWarning: _this.props.intl.formatMessage({\n            id: \"ID_VALIDATE_FAIL_BIRTH_NULL\"\n          })\n        });\n\n        return;\n      } else {\n        _this.setState({\n          birthWarning: \"\"\n        });\n      }\n\n      var params = {\n        email: id,\n        password: sha256(password),\n        birth: moment([birth.year, birth.month, birth.date]).format(\"YYYY-MM-DD\"),\n        name: getRandomName(),\n        icon: getRandomUserIcon()\n      };\n      request.signupFromLearn(params).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        if (json.status === 409) {\n          _this.setState({\n            idWarning: _this.props.intl.formatMessage({\n              id: \"ID_SIGNUP_WARNING_EMAIL_USED\"\n            })\n          });\n\n          return;\n        } else if (json.user) {\n          localStorage.setItem(\"wizToken\", json.token);\n\n          _this.props.updateUserInfo(json.user); //기획에 없는 내용 임시 작성\n\n\n          showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n            title: \"임시 아이디가 생성되었습니다. 도전을 시작해보세요!\",\n            buttonName: \"확인\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }\n          }), {\n            darkmode: true,\n            mobileFullscreen: true\n          });\n        }\n      }).catch(function (e) {\n        return console.error(e);\n      });\n    };\n\n    _this.onClickLogin = function () {\n      showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      }), {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.checkEmail = function (email) {\n      if (email.length < 4 || email.length > 20) {\n        return false;\n      } // const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n\n      var regex = /^[A-Za-z0-9+]*$/;\n      return regex.test(email); // return email.length >= 6;\n    };\n\n    _this.checkPassword = function (password) {\n      return password.length >= 6;\n    };\n\n    _this.onChangeField = function (id, value) {\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.state = {\n      id: \"\",\n      password: \"\",\n      idWarning: \"\",\n      passwordWarning: \"\",\n      birth: {\n        year: undefined,\n        month: undefined,\n        date: undefined\n      }\n    };\n    return _this;\n  }\n\n  _createClass(TemporaryId, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          dismiss = _this$props.dismiss,\n          intl = _this$props.intl;\n      var _this$state2 = this.state,\n          id = _this$state2.id,\n          password = _this$state2.password,\n          idWarning = _this$state2.idWarning,\n          passwordWarning = _this$state2.passwordWarning,\n          birthWarning = _this$state2.birthWarning,\n          birth = _this$state2.birth;\n      var onChangeInput = this.onChangeInput,\n          onSubmit = this.onSubmit,\n          onClickLogin = this.onClickLogin,\n          onChangeField = this.onChangeField;\n      var formatMessage = intl.formatMessage;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"temporary-id\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"temporary-id__close-button\",\n        src: closeIcon,\n        alt: \"close\",\n        onClick: dismiss,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_TITLE\"\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_DESC\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"temporary-id__form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__form__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TITLE_ID\"\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"temporary-id__form__input\",\n        onChange: onChangeInput,\n        value: id,\n        name: \"id\",\n        type: \"text\",\n        placeholder: formatMessage({\n          id: \"ID_TEMPORARY_ID_FORM_TITLE_ID_PLACEHOLDER\"\n        }),\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"temporary-id__form__warning-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      }, idWarning)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"temporary-id__form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__form__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TITLE_PW\"\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"temporary-id__form__input\",\n        onChange: onChangeInput,\n        value: password,\n        name: \"password\",\n        type: \"password\",\n        placeholder: formatMessage({\n          id: \"ID_TEMPORARY_ID_FORM_TITLE_PW_PLACEHOLDER\"\n        }),\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"temporary-id__form__warning-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }, passwordWarning)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"temporary-id__form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__form__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TITLE_BIRTH\"\n      })), /*#__PURE__*/React.createElement(Field.Date, {\n        id: \"birth\",\n        value: birth,\n        onChange: onChangeField,\n        warning: birthWarning,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"temporary-id__submit-button\",\n        onClick: onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_SUBMIT_BUTTON\"\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__term\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TERM_01\"\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"temporary-id__link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: \"/support/terms\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TERM_02\"\n      }))), \" \", formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TERM_03\"\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"temporary-id__link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: \"/support/privacy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TERM_04\"\n      }))), formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_TERM_05\"\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"temporary-id__login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_LOGIN_INFO\"\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"temporary-id__link\",\n        onClick: onClickLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }\n      }, formatMessage({\n        id: \"ID_TEMPORARY_ID_FORM_LOGIN\"\n      }))));\n    }\n  }]);\n\n  return TemporaryId;\n}(Component);\n\nexport default connect(undefined, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(injectIntl(TemporaryId));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/TemporaryId/index.js"],"names":["React","Component","connect","injectIntl","moment","sha256","request","userInfoActions","Field","getRandomName","getRandomUserIcon","SignIn","PopUp","showPopUp","TemporaryId","props","onChangeInput","e","setState","target","name","value","onSubmit","state","id","password","checkEmail","idWarning","intl","formatMessage","checkPassword","passwordWarning","birth","year","month","date","birthWarning","params","email","format","icon","signupFromLearn","then","res","json","status","user","localStorage","setItem","token","updateUserInfo","darkmode","mobileFullscreen","catch","console","error","onClickLogin","length","regex","test","onChangeField","undefined","dismiss","closeIcon"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport moment from \"moment\";\nimport sha256 from \"../../Util/SHA256\";\nimport * as request from \"../../Util/HTTPRequest\";\nimport * as userInfoActions from \"../../Store/Reducer/UserInfo\";\nimport Field from \"../../../Common/Component/Field\";\nimport { getRandomName, getRandomUserIcon } from \"../../Util/RandomGenerator\";\nimport SignIn from \"../SignIn\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport closeIcon from \"../../../Image/tempId-popup-close.svg\";\nimport \"./index.scss\";\n\nclass TemporaryId extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      password: \"\",\n      idWarning: \"\",\n      passwordWarning: \"\",\n      birth: {\n        year: undefined,\n        month: undefined,\n        date: undefined\n      }\n    }\n  }\n\n  onChangeInput = e => {\n    this.setState({[e.target.name] : e.target.value});\n  }\n\n  onSubmit = () => {\n    const { id, password } = this.state;\n    if(!this.checkEmail(id)) {\n      this.setState({idWarning: this.props.intl.formatMessage({ id: \"ID_SIGNUP_WARNING_ID_EMPTY_FORMAT\" })});\n      return;\n    }else {\n      this.setState({idWarning: \"\"});\n    }\n\n    if(!this.checkPassword(password)) {\n      this.setState({passwordWarning: this.props.intl.formatMessage({ id: \"ID_SIGNUP_WARNING_PW_EMPTY_FORMAT\" })});\n      return;\n    }else {\n      this.setState({passwordWarning: \"\"});\n    }\n\n    const { birth } = this.state;\n    if (!birth.year || birth.month == null || !birth.date) {\n      this.setState({birthWarning: this.props.intl.formatMessage({ id: \"ID_VALIDATE_FAIL_BIRTH_NULL\" })});\n      return;\n    } else {\n      this.setState({birthWarning: \"\"});\n    }\n\n    const params = {\n      email: id,\n      password: sha256(password),\n      birth: moment([birth.year, birth.month, birth.date]).format(\"YYYY-MM-DD\"),\n      name: getRandomName(),\n      icon: getRandomUserIcon()\n    }\n\n    request.signupFromLearn(params)\n      .then(res =>res.json())\n      .then(json => {\n        if (json.status === 409) {\n          this.setState({idWarning: this.props.intl.formatMessage({id: \"ID_SIGNUP_WARNING_EMAIL_USED\"})});\n          return;\n        } else if (json.user) {\n          localStorage.setItem(\"wizToken\", json.token);\n          this.props.updateUserInfo(json.user);\n          \n          //기획에 없는 내용 임시 작성\n          showPopUp(\n            <PopUp.OneButton\n              title={\"임시 아이디가 생성되었습니다. 도전을 시작해보세요!\"}\n              buttonName={\"확인\"}\n            />,\n            { darkmode: true, mobileFullscreen: true }\n          );\n        }\n      })\n      .catch(e=> console.error(e));\n  }\n\n  onClickLogin = () => {\n    showPopUp(\n      <SignIn />,\n      { darkmode: true, mobileFullscreen: true}\n    );\n  }\n\n  checkEmail = email => {\n    if(email.length < 4 || email.length > 20) {\n      return false;\n    }\n    // const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    const regex = /^[A-Za-z0-9+]*$/;\n    return regex.test(email);\n    // return email.length >= 6;\n  };\n\n  checkPassword = password => {\n    return password.length >= 6;\n  };\n\n  onChangeField = (id, value) => {\n    this.setState({ [id]: value })\n  }\n\n  render() {\n    const { dismiss, intl } = this.props;\n    const { id, password, idWarning, passwordWarning, birthWarning, birth } = this.state;\n    const { onChangeInput, onSubmit, onClickLogin, onChangeField } = this;\n    const { formatMessage } = intl;\n    return (\n      <div className=\"temporary-id\">\n        <img className=\"temporary-id__close-button\" src={closeIcon} alt=\"close\" onClick={dismiss}/>\n        <p className=\"temporary-id__title\">{formatMessage({ id: \"ID_TEMPORARY_ID_TITLE\" })}</p>\n        <p className=\"temporary-id__desc\">{formatMessage({ id: \"ID_TEMPORARY_ID_DESC\" })}</p>\n        <div className=\"temporary-id__form\">\n          <p className=\"temporary-id__form__title\">{formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TITLE_ID\" })}</p>\n          <input\n            className=\"temporary-id__form__input\"\n            onChange={onChangeInput}\n            value={id}\n            name=\"id\"\n            type=\"text\"\n            placeholder={formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TITLE_ID_PLACEHOLDER\" })}\n            autoComplete=\"off\"\n          />\n          <span className=\"temporary-id__form__warning-message\">{idWarning}</span>\n        </div>\n        <div className=\"temporary-id__form\">\n          <p className=\"temporary-id__form__title\">{formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TITLE_PW\" })}</p>\n          <input\n            className=\"temporary-id__form__input\"\n            onChange={onChangeInput}\n            value={password}\n            name=\"password\"\n            type=\"password\"\n            placeholder={formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TITLE_PW_PLACEHOLDER\" })}\n            autoComplete=\"off\"\n          />\n          <span className=\"temporary-id__form__warning-message\">{passwordWarning}</span>\n        </div>\n        <div className=\"temporary-id__form\">\n          <p className=\"temporary-id__form__title\">\n            {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TITLE_BIRTH\" })}\n          </p>\n          <Field.Date \n            id=\"birth\"\n            value={birth}\n            onChange={onChangeField}\n            warning={birthWarning}\n          />\n        </div>\n        <button className=\"temporary-id__submit-button\" onClick={onSubmit}>\n          {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_SUBMIT_BUTTON\" })}\n        </button>\n        <p className=\"temporary-id__term\">\n          {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TERM_01\" })}{\" \"}\n          <span className=\"temporary-id__link\">\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/support/terms\">\n              {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TERM_02\" })}\n            </a>\n          </span>{\" \"}\n          {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TERM_03\" })}{\" \"}\n          <span className=\"temporary-id__link\">\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/support/privacy\">\n              {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TERM_04\" })}\n            </a>\n          </span>\n          {formatMessage({ id: \"ID_TEMPORARY_ID_FORM_TERM_05\" })}\n        </p>\n        <p className=\"temporary-id__login\">{formatMessage({ id: \"ID_TEMPORARY_ID_FORM_LOGIN_INFO\" })}{\" \"}\n          <span className=\"temporary-id__link\" onClick={onClickLogin}>{formatMessage({ id: \"ID_TEMPORARY_ID_FORM_LOGIN\" })}</span>\n        </p>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  undefined,\n  { updateUserInfo: userInfoActions.updateUserInfo }\n)(injectIntl(TemporaryId));\n"]},"metadata":{},"sourceType":"module"}