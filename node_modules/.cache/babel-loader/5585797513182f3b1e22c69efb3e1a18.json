{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Component/Main/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { isTablet, isMobile } from \"react-device-detect\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE, URL } from \"../../../../../../Common/Util/Constant\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport View from \"./View\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function () {\n      _this.fetchMyProjects();\n\n      _this.fetchMyPublished();\n\n      _this.fetchMyApk();\n    };\n\n    _this.fetchMyProjects = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var params, res, myProjects;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (_this.props.email) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              params = {\n                email: _this.props.email,\n                offset: 0,\n                limit: _this.limit,\n                keyword: \"\"\n              };\n              _context.prev = 3;\n              _context.next = 6;\n              return request.getDevelopingProjects(params);\n\n            case 6:\n              res = _context.sent;\n              _context.next = 9;\n              return res.json();\n\n            case 9:\n              myProjects = _context.sent;\n\n              _this.setState({\n                myProjects: myProjects.rows || []\n              });\n\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](3);\n\n              _this.setState({\n                myProjects: []\n              });\n\n              console.log(_context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 13]]);\n    }));\n    _this.fetchMyPublished = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var params, res, publisheds;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (_this.props.email) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              params = {\n                email: _this.props.email,\n                offset: 0,\n                limit: _this.limit\n              };\n              _context2.prev = 3;\n              _context2.next = 6;\n              return request.getPublishedProjectsByLive(params);\n\n            case 6:\n              res = _context2.sent;\n              _context2.next = 9;\n              return res.json();\n\n            case 9:\n              publisheds = _context2.sent;\n\n              _this.setState({\n                myPublisheds: publisheds.rows.map(function (p) {\n                  if (p.type === \"3D\") {\n                    return p;\n                  } else {\n                    p.type = p.project.type;\n                    return p;\n                  }\n                }) || []\n              });\n\n              _context2.next = 17;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](3);\n              console.log(_context2.t0);\n\n              _this.setState({\n                myPublisheds: []\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 13]]);\n    }));\n    _this.fetchMyApk = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, apks;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (_this.props.email) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              _context3.prev = 2;\n              _context3.next = 5;\n              return request.getWizlabAPKs({\n                userId: _this.props.userId\n              });\n\n            case 5:\n              res = _context3.sent;\n              _context3.next = 8;\n              return res.json();\n\n            case 8:\n              apks = _context3.sent;\n\n              if (apks.success) {\n                _this.setState({\n                  myApks: apks.wizlabAPKs.slice(_this.limit) || []\n                });\n              }\n\n              _context3.next = 16;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](2);\n              console.log(_context3.t0);\n\n              _this.setState({\n                myApks: []\n              });\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 12]]);\n    }));\n\n    _this.onClick2DGame = function () {\n      if (isMobile) {\n        return showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n          title: \"PC\\uC5D0\\uC11C \\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\",\n          buttonName: \"\\uD655\\uC778\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        });\n      } else {\n        showPopUp( /*#__PURE__*/React.createElement(NewProjectPopup, {\n          gameDimension: \"2D\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    _this.onClick3DGame = function () {\n      if (isMobile) {\n        return showPopUp( /*#__PURE__*/React.createElement(PopUp.OneButton, {\n          title: \"PC\\uC640 Tablet\\uC5D0\\uC11C \\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\",\n          buttonName: \"\\uD655\\uC778\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 9\n          }\n        }), {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        });\n      } else {\n        // TOOD: redbrick.space로 연결\n        showPopUp( /*#__PURE__*/React.createElement(NewProjectPopup, {\n          gameDimension: \"3D\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    _this.onClickMyProjectMore = function () {\n      _this.props.resetSelectProject();\n\n      _this.props.setCurrentPage(\"myProject\");\n    };\n\n    _this.onClickMyPublishedMore = function () {\n      _this.props.resetSelectProject();\n\n      _this.props.setCurrentPage(\"myPublished\");\n    };\n\n    _this.onClickMyApkMore = function () {\n      _this.props.setCurrentPage(\"myApk\");\n    };\n\n    _this.onClickProject = function (pId, type) {\n      if (!pId) return;\n\n      if (type === \"3D\") {\n        window.open(URL.REDBRICK_3D_STUDIO + \"/?pid=\".concat(pId));\n        return;\n      }\n\n      _this.props.history.replace({\n        pathname: \"/\".concat(type === \"js3d\" ? PAGETYPE.BUILDER3D : PAGETYPE.BUILDER, \"/\").concat(pId)\n      });\n\n      type !== \"js3d\" && window.location.reload();\n    };\n\n    _this.onClickPublishProject = function (pId) {\n      if (!pId) return;\n\n      _this.props.history.push(\"?pId=\".concat(pId));\n    };\n\n    _this.setProjectName = function (pId, newName) {\n      _this.setState(function (prev) {\n        return {\n          myProjects: prev.myProjects.map(function (item, index) {\n            if (item.pId === pId) {\n              item.name = newName;\n            }\n\n            return item;\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      isClickDetailBtn: false,\n      myProjects: [],\n      myPublisheds: [],\n      myApks: []\n    };\n    _this.limit = 10;\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          handleEdit = _this$props.handleEdit,\n          onClickProjectEdit = _this$props.onClickProjectEdit,\n          onClickDetailBtn = _this$props.onClickDetailBtn,\n          selectProject = _this$props.selectProject,\n          handleDelete = _this$props.handleDelete,\n          handleCopy = _this$props.handleCopy;\n      var _this$state = this.state,\n          myProjects = _this$state.myProjects,\n          myPublisheds = _this$state.myPublisheds,\n          myApks = _this$state.myApks;\n      var onClick2DGame = this.onClick2DGame,\n          onClick3DGame = this.onClick3DGame,\n          onClickMyProjectMore = this.onClickMyProjectMore,\n          onClickMyPublishedMore = this.onClickMyPublishedMore,\n          onClickMyApkMore = this.onClickMyApkMore,\n          onClickProject = this.onClickProject,\n          onClickPublishProject = this.onClickPublishProject,\n          fetchMyProjects = this.fetchMyProjects,\n          setProjectName = this.setProjectName;\n      return /*#__PURE__*/React.createElement(View, {\n        onClick2DGame: onClick2DGame,\n        onClick3DGame: onClick3DGame,\n        onClickMyProjectMore: onClickMyProjectMore,\n        onClickMyPublishedMore: onClickMyPublishedMore,\n        onClickMyApkMore: onClickMyApkMore,\n        onClickDetailBtn: onClickDetailBtn,\n        onClickProjectEdit: onClickProjectEdit,\n        handleEdit: handleEdit,\n        selectProject: selectProject,\n        myProjects: myProjects,\n        myPublisheds: myPublisheds,\n        myApks: myApks,\n        onClickProject: onClickProject,\n        onClickPublishProject: onClickPublishProject,\n        intl: this.props.intl,\n        handleDelete: handleDelete,\n        handleCopy: handleCopy,\n        fetchMyProjects: fetchMyProjects,\n        setProjectName: setProjectName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email,\n    userId: state.userinfo.id\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/Home/Component/Main/Container.js"],"names":["React","Component","connect","withRouter","injectIntl","isTablet","isMobile","PopUp","showPopUp","request","PAGETYPE","URL","NewProjectPopup","View","Container","props","componentDidMount","fetchMyProjects","fetchMyPublished","fetchMyApk","email","params","offset","limit","keyword","getDevelopingProjects","res","json","myProjects","setState","rows","console","log","getPublishedProjectsByLive","publisheds","myPublisheds","map","p","type","project","getWizlabAPKs","userId","apks","success","myApks","wizlabAPKs","slice","onClick2DGame","darkmode","dismissButton","dismissOverlay","onClick3DGame","onClickMyProjectMore","resetSelectProject","setCurrentPage","onClickMyPublishedMore","onClickMyApkMore","onClickProject","pId","window","open","REDBRICK_3D_STUDIO","history","replace","pathname","BUILDER3D","BUILDER","location","reload","onClickPublishProject","push","setProjectName","newName","prev","item","index","name","state","isClickDetailBtn","handleEdit","onClickProjectEdit","onClickDetailBtn","selectProject","handleDelete","handleCopy","intl","userinfo","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport { isTablet, isMobile } from \"react-device-detect\";\nimport PopUp, { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE, URL } from \"../../../../../../Common/Util/Constant\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClickDetailBtn: false,\n      myProjects: [],\n      myPublisheds: [],\n      myApks: [],\n    };\n    this.limit = 10;\n  }\n  componentDidMount = () => {\n    this.fetchMyProjects();\n    this.fetchMyPublished();\n    this.fetchMyApk();\n  };\n  fetchMyProjects = async () => {\n    if (!this.props.email) return;\n    let params = {\n      email: this.props.email,\n      offset: 0,\n      limit: this.limit,\n      keyword: \"\"\n    };\n\n    try {\n      let res = await request.getDevelopingProjects(params);\n      let myProjects = await res.json();\n      this.setState({ myProjects: myProjects.rows || [] });\n    } catch (error) {\n      this.setState({ myProjects: [] });\n      console.log(error);\n    }\n  };\n\n  fetchMyPublished = async () => {\n    if (!this.props.email) return;\n    let params = {\n      email: this.props.email,\n      offset: 0,\n      limit: this.limit\n    };\n    try {\n      let res = await request.getPublishedProjectsByLive(params);\n      let publisheds = await res.json();\n\n      this.setState({\n        myPublisheds:\n          publisheds.rows.map(p => {\n            if (p.type === \"3D\") {\n              return p;\n            } else {\n              p.type = p.project.type;\n              return p;\n            }\n          }) || []\n      });\n    } catch (error) {\n      console.log(error);\n      this.setState({ myPublisheds: [] });\n    }\n  };\n\n  fetchMyApk = async () => {\n    if (!this.props.email) return;\n    try {\n      let res = await request.getWizlabAPKs({ userId: this.props.userId });\n      let apks = await res.json();\n      if (apks.success) {\n        this.setState({ myApks: apks.wizlabAPKs.slice(this.limit) || [] });\n      }\n    } catch (error) {\n      console.log(error);\n      this.setState({ myApks: [] });\n    }\n  };\n  onClick2DGame = () => {\n    if (isMobile) {\n      return showPopUp(\n        <PopUp.OneButton\n          title=\"PC에서 사용 가능합니다.\"\n          buttonName=\"확인\"\n        />,\n        {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        }\n      );\n    } else {\n      showPopUp(<NewProjectPopup gameDimension=\"2D\" />);\n    }\n\n  };\n  onClick3DGame = () => {\n    if (isMobile) {\n      return showPopUp(\n        <PopUp.OneButton\n          title=\"PC와 Tablet에서 사용 가능합니다.\"\n          buttonName=\"확인\"\n        />,\n        {\n          darkmode: true,\n          dismissButton: false,\n          dismissOverlay: true\n        }\n      );\n    } else {\n      // TOOD: redbrick.space로 연결\n      showPopUp(<NewProjectPopup gameDimension=\"3D\" />);\n    }\n  };\n  onClickMyProjectMore = () => {\n    this.props.resetSelectProject();\n    this.props.setCurrentPage(\"myProject\");\n  };\n  onClickMyPublishedMore = () => {\n    this.props.resetSelectProject();\n    this.props.setCurrentPage(\"myPublished\");\n  };\n  onClickMyApkMore = () => {\n    this.props.setCurrentPage(\"myApk\");\n  };\n  onClickProject = (pId, type) => {\n    if (!pId) return;\n\n    if (type === \"3D\") {\n      window.open(URL.REDBRICK_3D_STUDIO + `/?pid=${pId}`)\n      return;\n    }\n\n    this.props.history.replace({\n      pathname: `/${\n        type === \"js3d\" ? PAGETYPE.BUILDER3D : PAGETYPE.BUILDER\n      }/${pId}`\n    });\n    type !== \"js3d\" && window.location.reload();\n  };\n  onClickPublishProject = pId => {\n    if (!pId) return;\n    this.props.history.push(`?pId=${pId}`);\n  };\n  setProjectName = (pId, newName) => {\n    this.setState(prev => ({\n      myProjects: prev.myProjects.map((item, index) => {\n        if (item.pId === pId) {\n          item.name = newName;\n        }\n        return item;\n      })\n    }));\n  };\n  render() {\n    const {\n      handleEdit,\n      onClickProjectEdit,\n      onClickDetailBtn,\n      selectProject,\n      handleDelete,\n      handleCopy\n    } = this.props;\n    const { myProjects, myPublisheds, myApks } = this.state;\n    const {\n      onClick2DGame,\n      onClick3DGame,\n      onClickMyProjectMore,\n      onClickMyPublishedMore,\n      onClickMyApkMore,\n      onClickProject,\n      onClickPublishProject,\n      fetchMyProjects,\n      setProjectName\n    } = this;\n    return (\n      <View\n        onClick2DGame={onClick2DGame}\n        onClick3DGame={onClick3DGame}\n        onClickMyProjectMore={onClickMyProjectMore}\n        onClickMyPublishedMore={onClickMyPublishedMore}\n        onClickMyApkMore={onClickMyApkMore}\n        onClickDetailBtn={onClickDetailBtn}\n        onClickProjectEdit={onClickProjectEdit}\n        handleEdit={handleEdit}\n        selectProject={selectProject}\n        myProjects={myProjects}\n        myPublisheds={myPublisheds}\n        myApks={myApks}\n        onClickProject={onClickProject}\n        onClickPublishProject={onClickPublishProject}\n        intl={this.props.intl}\n        handleDelete={handleDelete}\n        handleCopy={handleCopy}\n        fetchMyProjects={fetchMyProjects}\n        setProjectName={setProjectName}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ email: state.userinfo.email, userId: state.userinfo.id }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}