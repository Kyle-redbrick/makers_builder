{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/DraftEditor/GamePopUp.js\";\nimport React, { Component } from \"react\";\nimport * as request from \"../../Util/HTTPRequest\";\n\nvar GamePopUp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GamePopUp, _Component);\n\n  function GamePopUp(props) {\n    var _this;\n\n    _classCallCheck(this, GamePopUp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GamePopUp).call(this, props));\n\n    _this.getGames = function () {\n      var keyword = _this.state.keyword;\n      request.getPublishedProjectByKeyword({\n        keyword: keyword\n      }).then(function (res) {\n        return res.json();\n      }).then(function (games) {\n        _this.setState({\n          games: games,\n          selectedIndex: null,\n          placeholder: \"검색어에 해당하는 게임을 찾지 못했어요\"\n        });\n      });\n    };\n\n    _this.onChangeKeyword = function (e) {\n      var keyword = e.target.value;\n\n      _this.setState({\n        keyword: keyword\n      }, function () {\n        if (_this.timeout) clearTimeout(_this.timeout);\n\n        if (keyword === \"\") {\n          _this.setState({\n            games: [],\n            selectedIndex: null,\n            placeholder: \"게임 이름이나 크리에이터 이름을 검색해보세요\"\n          });\n        } else {\n          _this.timeout = setTimeout(function () {\n            _this.getGames();\n          }, 200);\n        }\n      });\n    };\n\n    _this.onClickGame = function (index) {\n      var selectedIndex = _this.state.selectedIndex;\n\n      _this.setState({\n        selectedIndex: index === selectedIndex ? null : index\n      });\n    };\n\n    _this.onDoubleClickGame = function (index) {\n      var _this$props = _this.props,\n          dismiss = _this$props.dismiss,\n          onChangeGame = _this$props.onChangeGame;\n      if (onChangeGame) onChangeGame(_this.state.games[index].pId);\n      dismiss();\n    };\n\n    _this.onClickConfirm = function () {\n      var _this$props2 = _this.props,\n          dismiss = _this$props2.dismiss,\n          onChangeGame = _this$props2.onChangeGame;\n      var _this$state = _this.state,\n          games = _this$state.games,\n          selectedIndex = _this$state.selectedIndex;\n      if (onChangeGame) onChangeGame(games[selectedIndex].pId);\n      dismiss();\n    };\n\n    _this.state = {\n      keyword: \"\",\n      games: [],\n      selectedIndex: null,\n      placeholder: \"게임 이름이나 크리에이터 이름을 검색해보세요\"\n    };\n    return _this;\n  }\n\n  _createClass(GamePopUp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var input = document.getElementById(\"popup_draft_input\");\n      if (input) input.focus();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.timeout) clearTimeout(this.timeout);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          keyword = _this$state2.keyword,\n          games = _this$state2.games,\n          selectedIndex = _this$state2.selectedIndex,\n          placeholder = _this$state2.placeholder;\n      return React.createElement(\"div\", {\n        className: \"popup_draft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"popup_draft_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"\\uAC8C\\uC784 \\uB9C1\\uD06C \\uC0BD\\uC785\", React.createElement(\"input\", {\n        id: \"popup_draft_input\",\n        className: \"popup_draft_input\",\n        placeholder: \"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n        value: keyword,\n        onChange: this.onChangeKeyword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup_draft_games\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, games.length > 0 ? games.map(function (game, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"popup_draft_game \".concat(index === selectedIndex ? \"popup_draft_game-selected\" : \"\"),\n          onClick: function onClick() {\n            _this2.onClickGame(index);\n          },\n          onDoubleClick: function onDoubleClick() {\n            _this2.onDoubleClickGame(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"popup_draft_game_image\",\n          src: game.icon,\n          alt: game.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }), React.createElement(\"section\", {\n          className: \"popup_draft_game_section\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"popup_draft_game_title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, game.name), React.createElement(\"div\", {\n          className: \"popup_draft_game_desc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, game.description.length > 78 ? game.description.slice(0, 78) + \"...\" : game.description), React.createElement(\"div\", {\n          className: \"popup_draft_game_user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"popup_draft_game_user_image\",\n          src: game.user.icon,\n          alt: game.user.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"popup_draft_game_user_name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, game.user.name))));\n      }) : React.createElement(\"div\", {\n        className: \"popup_draft_game_placeholder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, placeholder)), React.createElement(\"button\", {\n        className: \"popup_draft_btn \".concat(selectedIndex === null ? \"popup_draft_btn-disabled\" : \"\"),\n        onClick: function onClick() {\n          if (selectedIndex === null) return;\n\n          _this2.onClickConfirm();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"\\uB9C1\\uD06C \\uC0BD\\uC785\"));\n    }\n  }]);\n\n  return GamePopUp;\n}(Component);\n\nexport default GamePopUp;","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/DraftEditor/GamePopUp.js"],"names":["React","Component","request","GamePopUp","props","getGames","keyword","state","getPublishedProjectByKeyword","then","res","json","games","setState","selectedIndex","placeholder","onChangeKeyword","e","target","value","timeout","clearTimeout","setTimeout","onClickGame","index","onDoubleClickGame","dismiss","onChangeGame","pId","onClickConfirm","input","document","getElementById","focus","length","map","game","icon","name","description","slice","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as request from \"../../Util/HTTPRequest\";\n\nclass GamePopUp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      keyword: \"\",\n      games: [],\n      selectedIndex: null,\n      placeholder: \"게임 이름이나 크리에이터 이름을 검색해보세요\"\n    };\n  }\n  componentDidMount() {\n    const input = document.getElementById(\"popup_draft_input\");\n    if (input) input.focus();\n  }\n  componentWillUnmount() {\n    if (this.timeout) clearTimeout(this.timeout);\n  }\n\n  getGames = () => {\n    const { keyword } = this.state;\n    request\n      .getPublishedProjectByKeyword({ keyword })\n      .then(res => res.json())\n      .then(games => {\n        this.setState({\n          games,\n          selectedIndex: null,\n          placeholder: \"검색어에 해당하는 게임을 찾지 못했어요\"\n        });\n      });\n  };\n\n  onChangeKeyword = e => {\n    const keyword = e.target.value;\n    this.setState({ keyword }, () => {\n      if (this.timeout) clearTimeout(this.timeout);\n      if (keyword === \"\") {\n        this.setState({\n          games: [],\n          selectedIndex: null,\n          placeholder: \"게임 이름이나 크리에이터 이름을 검색해보세요\"\n        });\n      } else {\n        this.timeout = setTimeout(() => {\n          this.getGames();\n        }, 200);\n      }\n    });\n  };\n  onClickGame = index => {\n    const { selectedIndex } = this.state;\n    this.setState({ selectedIndex: index === selectedIndex ? null : index });\n  };\n  onDoubleClickGame = index => {\n    const { dismiss, onChangeGame } = this.props;\n    if (onChangeGame) onChangeGame(this.state.games[index].pId);\n    dismiss();\n  };\n  onClickConfirm = () => {\n    const { dismiss, onChangeGame } = this.props;\n    const { games, selectedIndex } = this.state;\n    if (onChangeGame) onChangeGame(games[selectedIndex].pId);\n    dismiss();\n  };\n\n  render() {\n    const { keyword, games, selectedIndex, placeholder } = this.state;\n    return (\n      <div className=\"popup_draft\">\n        <div className=\"popup_draft_title\">\n          게임 링크 삽입\n          <input\n            id=\"popup_draft_input\"\n            className=\"popup_draft_input\"\n            placeholder=\"검색어를 입력해주세요\"\n            value={keyword}\n            onChange={this.onChangeKeyword}\n          />\n        </div>\n        <div className=\"popup_draft_games\">\n          {games.length > 0 ? (\n            games.map((game, index) => {\n              return (\n                <div\n                  key={index}\n                  className={`popup_draft_game ${\n                    index === selectedIndex ? \"popup_draft_game-selected\" : \"\"\n                  }`}\n                  onClick={() => {\n                    this.onClickGame(index);\n                  }}\n                  onDoubleClick={() => {\n                    this.onDoubleClickGame(index);\n                  }}\n                >\n                  <img\n                    className=\"popup_draft_game_image\"\n                    src={game.icon}\n                    alt={game.name}\n                  />\n                  <section className=\"popup_draft_game_section\">\n                    <div className=\"popup_draft_game_title\">{game.name}</div>\n                    <div className=\"popup_draft_game_desc\">\n                      {game.description.length > 78\n                        ? game.description.slice(0, 78) + \"...\"\n                        : game.description}\n                    </div>\n                    <div className=\"popup_draft_game_user\">\n                      <img\n                        className=\"popup_draft_game_user_image\"\n                        src={game.user.icon}\n                        alt={game.user.name}\n                      />\n                      <div className=\"popup_draft_game_user_name\">\n                        {game.user.name}\n                      </div>\n                    </div>\n                  </section>\n                </div>\n              );\n            })\n          ) : (\n            <div className=\"popup_draft_game_placeholder\">{placeholder}</div>\n          )}\n        </div>\n        <button\n          className={`popup_draft_btn ${\n            selectedIndex === null ? \"popup_draft_btn-disabled\" : \"\"\n          }`}\n          onClick={() => {\n            if (selectedIndex === null) return;\n            this.onClickConfirm();\n          }}\n        >\n          링크 삽입\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default GamePopUp;\n"]},"metadata":{},"sourceType":"module"}