{"ast":null,"code":"import _defineProperty from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/QRPopup/index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport QRCode from \"qrcode.react\";\nimport { URL } from \"../../Util/Constant\";\nimport { smsPlayLink\n/*, checkShareBingo*/\n} from \"../../Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport PhoneDropDown from \"./PhoneDropDown\";\nimport closeImg from \"../../../Image/builder/x-copy-3.svg\";\nimport closeImg_darkmode from \"../../../Image/builder/x-copy-3_darkmode.svg\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\"; // import { showBingoPopup } from \"../PopUp/BingoPopup\";\n\nimport shareCopyImg from \"../../../Image/share_icon_copy.png\";\nimport shareFbImg from \"../../../Image/share_icon_fb.png\";\nimport shareKakaoImg from \"../../../Image/share_icon_kakao.png\";\nimport { getColorTheme } from \"../../../Page/Builder/utils/colorThemeUtil\";\nimport \"./index.scss\";\n\nvar QRPopup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(QRPopup, _Component);\n\n  function QRPopup(props) {\n    var _this;\n\n    _classCallCheck(this, QRPopup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QRPopup).call(this, props));\n\n    _this.componentDidMount = function () {\n      /*for css */\n      var popup = document.querySelector(\".QRPopup\").closest(\".popup_contents\");\n      popup.style.borderRadius = \"20px\";\n      var dismissBtn = popup.querySelector(\"#popup_dismissbtn\");\n      dismissBtn.style.display = \"none\";\n    };\n\n    _this.handleInputChange = function (e) {\n      var target = e.target;\n\n      _this.setState(function (state) {\n        return _defineProperty({}, target.name, target.value);\n      }, function () {});\n    };\n\n    _this.handleCountryChange = function (countryCode) {\n      _this.setState({\n        countryCode: countryCode\n      });\n    };\n\n    _this.getIsPhoneNumValid = function () {\n      // TODO : check whether or not typeof phoneNum is number\n      var phoneNum = _this.state.phoneNum;\n      return phoneNum && phoneNum.length >= 11;\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault(); // TODO: phoneNum validation check\n\n      if (!_this.getIsPhoneNumValid()) {\n        showPopUp(React.createElement(PopUp.OneButton, {\n          title: React.createElement(FormattedMessage, {\n            id: \"ID_BUILDER_ALERT_MSG_QRWARN\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }),\n          buttonName: React.createElement(FormattedMessage, {\n            id: \"ID_BUILDER_ALERT_CLOSEBTN\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }));\n        return;\n      }\n\n      var _this$props$project = _this.props.project,\n          pId = _this$props$project.pId,\n          name = _this$props$project.name;\n      var url = URL.WIZ_APP + pId;\n      var countryCode = _this.state.countryCode;\n      var localNumber = _this.state.phoneNum;\n      var params = {\n        countryCode: countryCode,\n        localNumber: localNumber,\n        url: url,\n        name: name\n      };\n      smsPlayLink(params).then(function (response) {\n        if (response.status === 200) {\n          TrackingUtil.sendGAEvent({\n            category: \"Builder\",\n            action: \"Share\",\n            label: \"SMS\"\n          });\n          showPopUp(React.createElement(PopUp.OneButton, {\n            title: React.createElement(FormattedMessage, {\n              id: \"ID_BUILDER_ALERT_MSG_QRSUCC\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 92\n              },\n              __self: this\n            }),\n            buttonName: React.createElement(FormattedMessage, {\n              id: \"ID_BUILDER_ALERT_CLOSEBTN\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 93\n              },\n              __self: this\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          }));\n        } else {\n          showPopUp(React.createElement(PopUp.OneButton, {\n            title: React.createElement(FormattedMessage, {\n              id: \"ID_BUILDER_ALERT_MSG_QRFAIL\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99\n              },\n              __self: this\n            }),\n            buttonName: React.createElement(FormattedMessage, {\n              id: \"ID_BUILDER_ALERT_CLOSEBTN\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 100\n              },\n              __self: this\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }));\n        }\n      }).catch(function (error) {\n        console.error(\"Error:\", error);\n      });\n    };\n\n    _this.shareKakao = function () {\n      var pId = _this.props.project.pId;\n      window.Kakao.Link.sendCustom({\n        templateId: 30669,\n        templateArgs: {\n          path: \"detail/\".concat(pId)\n        },\n        fail: function fail(error) {\n          console.log(error);\n          alert(\"Error while sharing.\");\n        },\n        callback: function callback() {// this.checkBingo();\n        }\n      }); // setTimeout(this.checkBingo, 5000);\n    };\n\n    _this.shareFB = function () {\n      var pId = _this.props.project.pId;\n      var url = URL.WIZ_APP + pId;\n      window.FB.ui({\n        method: \"share\",\n        href: url,\n        quote: url\n      }, function (response) {\n        if (response && !response.error_message) {// this.checkBingo();\n        } else {\n          alert(\"Error while posting.\");\n        }\n      }); // setTimeout(this.checkBingo, 5000);\n    };\n\n    _this.copyUrl = function () {\n      var pId = _this.props.project.pId;\n      var url = URL.WIZ_APP + pId;\n      navigator.clipboard.writeText(url);\n\n      _this.setState({\n        copied: true\n      }, function () {\n        setTimeout(function () {\n          _this.setState({\n            copied: false\n          });\n        }, 1500);\n      });\n    };\n\n    if (_this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n\n    _this.state = {\n      phoneNum: \"\",\n      countryCode: \"+82\",\n      copied: false\n    };\n    return _this;\n  }\n\n  _createClass(QRPopup, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          phoneNum = _this$state.phoneNum,\n          countryCode = _this$state.countryCode,\n          copied = _this$state.copied;\n      var pId = this.props.project.pId;\n      var url = URL.WIZ_APP + pId;\n      var colorTheme = getColorTheme();\n      return React.createElement(\"div\", {\n        className: \"QRPopup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"QRPopup__header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"ID_POPUP_SHARE_TITLE\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })), React.createElement(\"img\", {\n        className: \"popup__closebtn\",\n        src: colorTheme === \"darkMode\" ? closeImg_darkmode : closeImg,\n        alt: \"img\",\n        onClick: this.props.dismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"QR__wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(QRCode, {\n        className: \"QRPopup__qrcode\",\n        value: url,\n        style: {\n          width: \"125px\",\n          height: \"125px\"\n        },\n        bgColor: \"transparent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"QRPopupBottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"QR__desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"ID_QRTITLE\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        className: \"QRPopupForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(PhoneDropDown, {\n        phoneNum: phoneNum,\n        countryCode: countryCode,\n        handleSelectItem: this.handleCountryChange,\n        handleInputChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"QRPopupForm__submitBtn\",\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"QRPopupSNS\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.shareKakao,\n        className: \"QRPopupSNSItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: shareKakaoImg,\n        alt: \"share kakao\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        onClick: this.shareFB,\n        className: \"QRPopupSNSItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: shareFbImg,\n        alt: \"share fb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        onClick: this.copyUrl,\n        className: \"QRPopupSNSItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: shareCopyImg,\n        alt: \"share fb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"QRPopupCopied \".concat(copied && \"QRPopupCopiedShow\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"ID_SHARE_COPIED\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return QRPopup;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(QRPopup));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/QRPopup/index.js"],"names":["React","Component","connect","FormattedMessage","injectIntl","QRCode","URL","smsPlayLink","PopUp","showPopUp","PhoneDropDown","TrackingUtil","shareCopyImg","shareFbImg","shareKakaoImg","getColorTheme","QRPopup","props","componentDidMount","popup","document","querySelector","closest","style","borderRadius","dismissBtn","display","handleInputChange","e","target","setState","state","name","value","handleCountryChange","countryCode","getIsPhoneNumValid","phoneNum","length","handleSubmit","preventDefault","project","pId","url","WIZ_APP","localNumber","params","then","response","status","sendGAEvent","category","action","label","catch","error","console","shareKakao","window","Kakao","Link","sendCustom","templateId","templateArgs","path","fail","log","alert","callback","shareFB","FB","ui","method","href","quote","error_message","copyUrl","navigator","clipboard","writeText","copied","setTimeout","isBuilder","require","colorTheme","closeImg_darkmode","closeImg","dismiss","width","height","email","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport QRCode from \"qrcode.react\";\nimport { URL } from \"../../Util/Constant\";\nimport { smsPlayLink /*, checkShareBingo*/ } from \"../../Util/HTTPRequest\";\nimport PopUp, { showPopUp } from \"../PopUp\";\nimport PhoneDropDown from \"./PhoneDropDown\";\nimport closeImg from \"../../../Image/builder/x-copy-3.svg\";\nimport closeImg_darkmode from \"../../../Image/builder/x-copy-3_darkmode.svg\";\nimport * as TrackingUtil from \"../../Util/TrackingUtil\";\n// import { showBingoPopup } from \"../PopUp/BingoPopup\";\nimport shareCopyImg from \"../../../Image/share_icon_copy.png\";\nimport shareFbImg from \"../../../Image/share_icon_fb.png\";\nimport shareKakaoImg from \"../../../Image/share_icon_kakao.png\";\nimport { getColorTheme } from \"../../../Page/Builder/utils/colorThemeUtil\";\nimport \"./index.scss\";\n\nclass QRPopup extends Component {\n  constructor(props) {\n    super(props);\n    if (this.props.isBuilder) {\n      require(\"./index_builder.scss\");\n    }\n    this.state = {\n      phoneNum: \"\",\n      countryCode: \"+82\",\n      copied: false\n    };\n  }\n\n  componentDidMount = () => {\n    /*for css */\n    const popup = document.querySelector(\".QRPopup\").closest(\".popup_contents\");\n    popup.style.borderRadius = \"20px\";\n    const dismissBtn = popup.querySelector(\"#popup_dismissbtn\");\n    dismissBtn.style.display = \"none\";\n  };\n\n  handleInputChange = e => {\n    const target = e.target;\n    this.setState(\n      state => ({\n        [target.name]: target.value\n      }),\n      () => {}\n    );\n  };\n  handleCountryChange = countryCode => {\n    this.setState({\n      countryCode\n    });\n  };\n\n  getIsPhoneNumValid = () => {\n    // TODO : check whether or not typeof phoneNum is number\n    let { phoneNum } = this.state;\n    return phoneNum && phoneNum.length >= 11;\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    // TODO: phoneNum validation check\n\n    if (!this.getIsPhoneNumValid()) {\n      showPopUp(\n        <PopUp.OneButton\n          title={<FormattedMessage id=\"ID_BUILDER_ALERT_MSG_QRWARN\" />}\n          buttonName={<FormattedMessage id=\"ID_BUILDER_ALERT_CLOSEBTN\" />}\n        />\n      );\n      return;\n    }\n\n    let { pId, name } = this.props.project;\n    let url = URL.WIZ_APP + pId;\n\n    const countryCode = this.state.countryCode;\n    const localNumber = this.state.phoneNum;\n    const params = { countryCode, localNumber, url, name };\n\n    smsPlayLink(params)\n      .then(response => {\n        if (response.status === 200) {\n          TrackingUtil.sendGAEvent({\n            category: \"Builder\",\n            action: `Share`,\n            label: \"SMS\"\n          });\n          showPopUp(\n            <PopUp.OneButton\n              title={<FormattedMessage id=\"ID_BUILDER_ALERT_MSG_QRSUCC\" />}\n              buttonName={<FormattedMessage id=\"ID_BUILDER_ALERT_CLOSEBTN\" />}\n            />\n          );\n        } else {\n          showPopUp(\n            <PopUp.OneButton\n              title={<FormattedMessage id=\"ID_BUILDER_ALERT_MSG_QRFAIL\" />}\n              buttonName={<FormattedMessage id=\"ID_BUILDER_ALERT_CLOSEBTN\" />}\n            />\n          );\n        }\n      })\n      .catch(error => {\n        console.error(\"Error:\", error);\n      });\n  };\n\n  // checkBingo = () => {\n  //   const email = this.props.email;\n  //   if (email) {\n  //     checkShareBingo({ email })\n  //       .then(res => res.json())\n  //       .then(json => {\n  //         if (json.bingoType) {\n  //           showBingoPopup(email, json.bingoType);\n  //         }\n  //       })\n  //       .catch(e => {\n  //         console.error(e);\n  //       });\n  //   }\n  // };\n\n  shareKakao = () => {\n    const { pId } = this.props.project;\n    window.Kakao.Link.sendCustom({\n      templateId: 30669,\n      templateArgs: { path: `detail/${pId}` },\n      fail: function(error) {\n        console.log(error);\n        alert(\"Error while sharing.\");\n      },\n      callback: () => {\n        // this.checkBingo();\n      }\n    });\n    // setTimeout(this.checkBingo, 5000);\n  };\n\n  shareFB = () => {\n    const { pId } = this.props.project;\n    const url = URL.WIZ_APP + pId;\n    window.FB.ui(\n      {\n        method: \"share\",\n        href: url,\n        quote: url\n      },\n      function(response) {\n        if (response && !response.error_message) {\n          // this.checkBingo();\n        } else {\n          alert(\"Error while posting.\");\n        }\n      }\n    );\n    // setTimeout(this.checkBingo, 5000);\n  };\n\n  copyUrl = () => {\n    const { pId } = this.props.project;\n    const url = URL.WIZ_APP + pId;\n    navigator.clipboard.writeText(url);\n    this.setState({ copied: true }, () => {\n      setTimeout(() => {\n        this.setState({ copied: false });\n      }, 1500);\n    });\n  };\n\n  render() {\n    const { phoneNum, countryCode, copied } = this.state;\n    let { pId } = this.props.project;\n    let url = URL.WIZ_APP + pId;\n    const colorTheme = getColorTheme();\n\n    return (\n      <div className=\"QRPopup\">\n        <div className=\"QRPopup__header\">\n          <div className=\"header__title\">\n            <FormattedMessage id=\"ID_POPUP_SHARE_TITLE\" />\n          </div>\n          <img\n            className=\"popup__closebtn\"\n            src={colorTheme === \"darkMode\" ? closeImg_darkmode : closeImg}\n            alt=\"img\"\n            onClick={this.props.dismiss}\n          />\n        </div>\n        <div className=\"QR__wrapper\">\n          <QRCode\n            className=\"QRPopup__qrcode\"\n            value={url}\n            style={{\n              width: \"125px\",\n              height: \"125px\"\n            }}\n            bgColor=\"transparent\"\n          />\n        </div>\n        <div className=\"QRPopupBottom\">\n          <div className=\"QR__desc\">\n            <FormattedMessage id=\"ID_QRTITLE\" />\n          </div>\n          <form className=\"QRPopupForm\">\n            <PhoneDropDown\n              phoneNum={phoneNum}\n              countryCode={countryCode}\n              handleSelectItem={this.handleCountryChange}\n              handleInputChange={this.handleInputChange}\n            />\n            <input\n              className=\"QRPopupForm__submitBtn\"\n              type=\"submit\"\n              onClick={this.handleSubmit}\n              value=\"\"\n            />\n          </form>\n          <div className=\"QRPopupSNS\">\n            <div onClick={this.shareKakao} className=\"QRPopupSNSItem\">\n              <img src={shareKakaoImg} alt=\"share kakao\" />\n            </div>\n            <div onClick={this.shareFB} className=\"QRPopupSNSItem\">\n              <img src={shareFbImg} alt=\"share fb\" />\n            </div>\n            <div onClick={this.copyUrl} className=\"QRPopupSNSItem\">\n              <img src={shareCopyImg} alt=\"share fb\" />\n            </div>\n          </div>\n        </div>\n        <div className={`QRPopupCopied ${copied && \"QRPopupCopiedShow\"}`}>\n          <FormattedMessage id=\"ID_SHARE_COPIED\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    email: state.userinfo.email\n  }),\n  {}\n)(injectIntl(QRPopup));\n"]},"metadata":{},"sourceType":"module"}