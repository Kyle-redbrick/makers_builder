{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Mypage/Container.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Container).call(this, props));\n\n    _this.handleSelectTab = function (tab) {\n      if (tab !== _this.state.selectedTab) {\n        _this.setState({\n          selectedTab: tab\n        });\n      }\n    };\n\n    _this.state = {\n      selectedTab: \"publish\" //publish, subscribe, interested\n\n    };\n\n    if (props.match.path === \"/mypage\") {\n      _this.isMyPage = true;\n\n      if (!props.userinfo) {\n        props.history.replace(\"/\");\n        return _possibleConstructorReturn(_this);\n      }\n\n      _this.state.email = props.userinfo.email;\n    } else {\n      _this.isMyPage = false;\n      _this.userId = Number(props.match.params.id);\n\n      if (_this.userId === props.userinfo.id) {// props.history.replace(`/mypage`);\n      }\n    }\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!this.isMyPage) {\n        request.userEmailById({\n          id: this.userId\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          return _this2.setState({\n            email: json.email\n          });\n        }).catch(function (e) {\n          return console.error(e);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          selectedTab = _this$state.selectedTab,\n          email = _this$state.email;\n      var handleSelectTab = this.handleSelectTab,\n          isMyPage = this.isMyPage;\n\n      if (!email) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }); //TODO : loading\n      }\n\n      return React.createElement(View, {\n        isMyPage: isMyPage,\n        email: email,\n        selectedTab: selectedTab,\n        handleSelectTab: handleSelectTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Mypage/Container.js"],"names":["React","Component","connect","withRouter","injectIntl","request","View","Container","props","handleSelectTab","tab","state","selectedTab","setState","match","path","isMyPage","userinfo","history","replace","email","userId","Number","params","id","userEmailById","then","res","json","catch","e","console","error"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAO,KAAKC,OAAZ,MAAyB,+BAAzB;AACA,OAAOC,IAAP,MAAiB,QAAjB;;IAEMC,S;;;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,mFAAMA,KAAN;;AADiB,UA+BnBC,eA/BmB,GA+BD,UAAAC,GAAG,EAAI;AACvB,UAAIA,GAAG,KAAK,MAAKC,KAAL,CAAWC,WAAvB,EAAoC;AAClC,cAAKC,QAAL,CAAc;AAAED,UAAAA,WAAW,EAAEF;AAAf,SAAd;AACD;AACF,KAnCkB;;AAEjB,UAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE,SADF,CACY;;AADZ,KAAb;;AAIA,QAAGJ,KAAK,CAACM,KAAN,CAAYC,IAAZ,KAAqB,SAAxB,EAAmC;AACjC,YAAKC,QAAL,GAAgB,IAAhB;;AACA,UAAG,CAACR,KAAK,CAACS,QAAV,EAAoB;AAClBT,QAAAA,KAAK,CAACU,OAAN,CAAcC,OAAd,CAAsB,GAAtB;AACA;AACD;;AACD,YAAKR,KAAL,CAAWS,KAAX,GAAmBZ,KAAK,CAACS,QAAN,CAAeG,KAAlC;AACD,KAPD,MAOM;AACJ,YAAKJ,QAAL,GAAgB,KAAhB;AACA,YAAKK,MAAL,GAAcC,MAAM,CAACd,KAAK,CAACM,KAAN,CAAYS,MAAZ,CAAmBC,EAApB,CAApB;;AACA,UAAG,MAAKH,MAAL,KAAgBb,KAAK,CAACS,QAAN,CAAeO,EAAlC,EAAsC,CACpC;AACD;AACF;;AAnBgB;AAoBlB;;;;wCAEmB;AAAA;;AAClB,UAAG,CAAC,KAAKR,QAAT,EAAmB;AACjBX,QAAAA,OAAO,CAACoB,aAAR,CAAsB;AAACD,UAAAA,EAAE,EAAE,KAAKH;AAAV,SAAtB,EACGK,IADH,CACQ,UAAAC,GAAG;AAAA,iBAAEA,GAAG,CAACC,IAAJ,EAAF;AAAA,SADX,EAEGF,IAFH,CAEQ,UAAAE,IAAI;AAAA,iBAAE,MAAI,CAACf,QAAL,CAAc;AAACO,YAAAA,KAAK,EAAEQ,IAAI,CAACR;AAAb,WAAd,CAAF;AAAA,SAFZ,EAGGS,KAHH,CAGS,UAAAC,CAAC;AAAA,iBAAEC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAF;AAAA,SAHV;AAID;AACF;;;6BAQQ;AAAA,wBAIH,KAAKnB,KAJF;AAAA,UAELC,WAFK,eAELA,WAFK;AAAA,UAGLQ,KAHK,eAGLA,KAHK;AAAA,UAMLX,eANK,GAQH,IARG,CAMLA,eANK;AAAA,UAOLO,QAPK,GAQH,IARG,CAOLA,QAPK;;AAUP,UAAG,CAACI,KAAJ,EAAW;AACT,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,CADS,CACU;AACpB;;AACD,aACE,oBAAC,IAAD;AACE,QAAA,QAAQ,EAAEJ,QADZ;AAEE,QAAA,KAAK,EAAEI,KAFT;AAGE,QAAA,WAAW,EAAER,WAHf;AAIE,QAAA,eAAe,EAAEH,eAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAQD;;;;EA3DqBR,S;;AA8DxB,eAAeC,OAAO,CACpB,UAAAS,KAAK;AAAA,SAAK;AAAEM,IAAAA,QAAQ,EAAEN,KAAK,CAACM;AAAlB,GAAL;AAAA,CADe,EAEpB,EAFoB,CAAP,CAGbb,UAAU,CAACD,UAAU,CAACI,SAAD,CAAX,CAHG,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport * as request from \"../../Common/Util/HTTPRequest\";\nimport View from \"./View\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTab: \"publish\" //publish, subscribe, interested\n    };\n\n    if(props.match.path === \"/mypage\") {\n      this.isMyPage = true;\n      if(!props.userinfo) {\n        props.history.replace(\"/\");\n        return;\n      }\n      this.state.email = props.userinfo.email;\n    }else {\n      this.isMyPage = false;\n      this.userId = Number(props.match.params.id);\n      if(this.userId === props.userinfo.id) {\n        // props.history.replace(`/mypage`);\n      }\n    }\n  }\n\n  componentDidMount() {\n    if(!this.isMyPage) {\n      request.userEmailById({id: this.userId})\n        .then(res=>res.json())\n        .then(json=>this.setState({email: json.email}))\n        .catch(e=>console.error(e))\n    }\n  }\n\n  handleSelectTab = tab => {\n    if (tab !== this.state.selectedTab) {\n      this.setState({ selectedTab: tab });\n    }\n  };\n\n  render() {\n    const {\n      selectedTab,\n      email\n    } = this.state;\n    const {\n      handleSelectTab,\n      isMyPage,\n    } = this;\n\n    if(!email) {\n      return <div></div> //TODO : loading\n    }\n    return (\n      <View\n        isMyPage={isMyPage}\n        email={email}\n        selectedTab={selectedTab}\n        handleSelectTab={handleSelectTab}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}