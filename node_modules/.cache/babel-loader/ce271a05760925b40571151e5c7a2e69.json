{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder/Component/Home/Component/MakingNew/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n    _this.fetchTemplates = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$state, dataType, keyword, res, templates;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, dataType = _this$state.dataType, keyword = _this$state.keyword;\n              _context.prev = 1;\n              _context.next = 4;\n              return request.getTemplateProjectsByKeyword({\n                type: dataType,\n                keyword: keyword\n              });\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              templates = _context.sent;\n\n              if (templates) {\n                templates = templates.rows.filter(function (item) {\n                  return item.description !== \"empty\";\n                });\n\n                _this.setState({\n                  templates: templates\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              return _context.abrupt(\"return\", []);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n\n    _this.onClick2DGame = function () {\n      showPopUp(React.createElement(NewProjectPopup, {\n        gameDimension: \"2D\",\n        email: _this.props.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }));\n    };\n\n    _this.onClick3DGame = function () {\n      showPopUp(React.createElement(NewProjectPopup, {\n        gameDimension: \"3D\",\n        email: _this.props.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }));\n    };\n\n    _this.onClickProject = function (templateId) {\n      if (!templateId) return;\n      var pageURL;\n\n      if (_this.props.email) {\n        pageURL = \"/\".concat(PAGETYPE.BUILDER, \"/\").concat(generatePID(_this.props.email), \"/\").concat(templateId);\n      } else {\n        pageURL = \"/\".concat(PAGETYPE.BUILDER, \"?t=\").concat(templateId);\n      }\n\n      _this.props.history.replace({\n        pathname: pageURL\n      });\n\n      window.location.reload();\n    };\n\n    _this.setFilteringData = function () {\n      var filteredType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var keyword = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n      _this.setState({\n        dataType: filteredType,\n        keyword: keyword\n      }, function () {\n        _this.fetchTemplates();\n      });\n    };\n\n    _this.state = {\n      templates: [],\n      dataType: [],\n      keyword: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var onClick2DGame = this.onClick2DGame,\n          onClick3DGame = this.onClick3DGame,\n          onClickProject = this.onClickProject,\n          setFilteringData = this.setFilteringData;\n      var templates = this.state.templates;\n      return React.createElement(View, {\n        onClick2DGame: onClick2DGame,\n        onClick3DGame: onClick3DGame,\n        templates: templates,\n        onClickProject: onClickProject,\n        intl: this.props.intl,\n        setFilteringData: setFilteringData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder/Component/Home/Component/MakingNew/Container.js"],"names":["React","Component","injectIntl","withRouter","connect","View","NewProjectPopup","showPopUp","request","PAGETYPE","generatePID","Container","props","fetchTemplates","state","dataType","keyword","getTemplateProjectsByKeyword","type","res","json","templates","rows","filter","item","description","setState","console","log","onClick2DGame","email","onClick3DGame","onClickProject","templateId","pageURL","BUILDER","history","replace","pathname","window","location","reload","setFilteringData","filteredType","intl","userinfo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport View from \"./View\";\nimport NewProjectPopup from \"../NewProjectPopup\";\nimport { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport generatePID from \"../../../../../../Common/Util/PIDGenerator\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      templates: [],\n      dataType: [],\n      keyword: \"\"\n    };\n  }\n  fetchTemplates = async () => {\n    const { dataType, keyword } = this.state;\n    try {\n      let res = await request.getTemplateProjectsByKeyword({\n        type: dataType,\n        keyword\n      });\n      let templates = await res.json();\n      if (templates) {\n        templates = templates.rows.filter(item => item.description !== \"empty\");\n        this.setState({ templates });\n      }\n    } catch (error) {\n      console.log(error);\n      return [];\n    }\n  };\n\n  onClick2DGame = () => {\n    showPopUp(<NewProjectPopup gameDimension=\"2D\" email={this.props.email} />);\n  };\n\n  onClick3DGame = () => {\n    showPopUp(<NewProjectPopup gameDimension=\"3D\" email={this.props.email} />);\n  };\n\n  onClickProject = templateId => {\n    if (!templateId) return;\n    let pageURL;\n    if (this.props.email) {\n      pageURL = `/${PAGETYPE.BUILDER}/${generatePID(\n        this.props.email\n      )}/${templateId}`;\n    } else {\n      pageURL = `/${PAGETYPE.BUILDER}?t=${templateId}`;\n    }\n    this.props.history.replace({\n      pathname: pageURL\n    });\n    window.location.reload();\n  };\n\n  setFilteringData = (filteredType = [], keyword = \"\") => {\n    this.setState({ dataType: filteredType, keyword }, () => {\n      this.fetchTemplates();\n    });\n  };\n  render() {\n    const {\n      onClick2DGame,\n      onClick3DGame,\n      onClickProject,\n      setFilteringData\n    } = this;\n    const { templates } = this.state;\n\n    return (\n      <View\n        onClick2DGame={onClick2DGame}\n        onClick3DGame={onClick3DGame}\n        templates={templates}\n        onClickProject={onClickProject}\n        intl={this.props.intl}\n        setFilteringData={setFilteringData}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ email: state.userinfo.email }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}