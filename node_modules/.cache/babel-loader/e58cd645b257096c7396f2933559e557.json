{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/astroboy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder/Component/Home/Component/Main/Container.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport NewProjectPopup from \"../NewProjectPopup\";\n\nvar Container = /*#__PURE__*/function (_Component) {\n  _inherits(Container, _Component);\n\n  var _super = _createSuper(Container);\n\n  function Container(props) {\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function () {\n      _this.fetchMyProjects();\n\n      _this.fetchMyPublished();\n\n      _this.fetchMyApk();\n\n      _this.fetchNews();\n    };\n\n    _this.fetchNews = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var params, res, news;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              params = {\n                type: \"builder\",\n                limit: 3,\n                offset: 0\n              };\n              _context.prev = 1;\n              _context.next = 4;\n              return request.getNewsList(params);\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              news = _context.sent;\n\n              _this.setState({\n                news: news.rows || []\n              });\n\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n              _this.setState({\n                news: []\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n    _this.fetchMyProjects = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var params, res, myProjects;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (_this.props.email) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              params = {\n                email: _this.props.email,\n                offset: 0,\n                limit: _this.limit,\n                keyword: \"\"\n              };\n              _context2.prev = 3;\n              _context2.next = 6;\n              return request.getDevelopingProjects(params);\n\n            case 6:\n              res = _context2.sent;\n              _context2.next = 9;\n              return res.json();\n\n            case 9:\n              myProjects = _context2.sent;\n\n              _this.setState({\n                myProjects: myProjects.rows || []\n              });\n\n              _context2.next = 17;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](3);\n\n              _this.setState({\n                myProjects: []\n              });\n\n              console.log(_context2.t0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 13]]);\n    }));\n    _this.fetchMyPublished = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var params, res, publisheds;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (_this.props.email) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              params = {\n                email: _this.props.email,\n                offset: 0,\n                limit: _this.limit\n              };\n              _context3.prev = 3;\n              _context3.next = 6;\n              return request.getPublishedProjectsByLive(params);\n\n            case 6:\n              res = _context3.sent;\n              _context3.next = 9;\n              return res.json();\n\n            case 9:\n              publisheds = _context3.sent;\n\n              _this.setState({\n                myPublisheds: publisheds.rows.map(function (p) {\n                  p.type = p.project.type;\n                  return p;\n                }) || []\n              });\n\n              _context3.next = 17;\n              break;\n\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.log(_context3.t0);\n\n              _this.setState({\n                myPublisheds: []\n              });\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 13]]);\n    }));\n    _this.fetchMyApk = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res, apks;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (_this.props.email) {\n                _context4.next = 2;\n                break;\n              }\n\n              return _context4.abrupt(\"return\");\n\n            case 2:\n              _context4.prev = 2;\n              _context4.next = 5;\n              return request.getWizlabAPKs({\n                userId: _this.props.userId\n              });\n\n            case 5:\n              res = _context4.sent;\n              _context4.next = 8;\n              return res.json();\n\n            case 8:\n              apks = _context4.sent;\n\n              if (apks.success) {\n                _this.setState({\n                  myApks: apks.wizlabAPKs.slice(_this.limit) || []\n                });\n              }\n\n              _context4.next = 16;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](2);\n              console.log(_context4.t0);\n\n              _this.setState({\n                myApks: []\n              });\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[2, 12]]);\n    }));\n\n    _this.onClick2DGame = function () {\n      showPopUp(React.createElement(NewProjectPopup, {\n        gameDimension: \"2D\",\n        email: _this.props.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }));\n    };\n\n    _this.onClick3DGame = function () {\n      showPopUp(React.createElement(NewProjectPopup, {\n        gameDimension: \"3D\",\n        email: _this.props.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }));\n    };\n\n    _this.onClickMyProjectMore = function () {\n      _this.props.resetSelectProject();\n\n      _this.props.setCurrentPage(\"myProject\");\n    };\n\n    _this.onClickMyPublishedMore = function () {\n      _this.props.resetSelectProject();\n\n      _this.props.setCurrentPage(\"myPublished\");\n    };\n\n    _this.onClickMyApkMore = function () {\n      _this.props.setCurrentPage(\"myApk\");\n    };\n\n    _this.onClickProject = function (pId, type) {\n      if (!pId) return;\n\n      _this.props.history.replace({\n        pathname: \"/\".concat(type === \"js3d\" ? PAGETYPE.BUILDER3D : PAGETYPE.BUILDER, \"/\").concat(pId)\n      });\n\n      type !== \"js3d\" && window.location.reload();\n    };\n\n    _this.onClickPublishProject = function (pId) {\n      if (!pId) return;\n\n      _this.props.history.push(\"?pId=\".concat(pId));\n    };\n\n    _this.setSlickRef = function (ref) {\n      _this.slick = ref;\n    };\n\n    _this.handlePrev = function (e) {\n      e.preventDefault();\n\n      _this.slick.slickPrev();\n    };\n\n    _this.handleNext = function (e) {\n      e.preventDefault();\n\n      _this.slick.slickNext();\n    };\n\n    _this.setProjectName = function (pId, newName) {\n      _this.setState(function (prev) {\n        return {\n          myProjects: prev.myProjects.map(function (item, index) {\n            if (item.pId === pId) {\n              item.name = newName;\n            }\n\n            return item;\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      isClickDetailBtn: false,\n      myProjects: [],\n      myPublisheds: [],\n      myApks: [],\n      news: []\n    };\n    _this.limit = 10;\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          handleEdit = _this$props.handleEdit,\n          onClickProjectEdit = _this$props.onClickProjectEdit,\n          onClickDetailBtn = _this$props.onClickDetailBtn,\n          selectProject = _this$props.selectProject,\n          handleDelete = _this$props.handleDelete,\n          handleCopy = _this$props.handleCopy;\n      var _this$state = this.state,\n          myProjects = _this$state.myProjects,\n          myPublisheds = _this$state.myPublisheds,\n          myApks = _this$state.myApks,\n          news = _this$state.news;\n      var onClick2DGame = this.onClick2DGame,\n          onClick3DGame = this.onClick3DGame,\n          onClickMyProjectMore = this.onClickMyProjectMore,\n          onClickMyPublishedMore = this.onClickMyPublishedMore,\n          onClickMyApkMore = this.onClickMyApkMore,\n          onClickProject = this.onClickProject,\n          onClickPublishProject = this.onClickPublishProject,\n          setSlickRef = this.setSlickRef,\n          handlePrev = this.handlePrev,\n          handleNext = this.handleNext,\n          fetchMyProjects = this.fetchMyProjects,\n          setProjectName = this.setProjectName;\n      return React.createElement(View, {\n        onClick2DGame: onClick2DGame,\n        onClick3DGame: onClick3DGame,\n        onClickMyProjectMore: onClickMyProjectMore,\n        onClickMyPublishedMore: onClickMyPublishedMore,\n        onClickMyApkMore: onClickMyApkMore,\n        setSlickRef: setSlickRef,\n        handlePrev: handlePrev,\n        handleNext: handleNext,\n        onClickDetailBtn: onClickDetailBtn,\n        onClickProjectEdit: onClickProjectEdit,\n        handleEdit: handleEdit,\n        selectProject: selectProject,\n        myProjects: myProjects,\n        myPublisheds: myPublisheds,\n        myApks: myApks,\n        onClickProject: onClickProject,\n        onClickPublishProject: onClickPublishProject,\n        news: news,\n        intl: this.props.intl,\n        handleDelete: handleDelete,\n        handleCopy: handleCopy,\n        fetchMyProjects: fetchMyProjects,\n        setProjectName: setProjectName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    email: state.userinfo.email,\n    userId: state.userinfo.id\n  };\n}, {})(injectIntl(withRouter(Container)));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/astroboy/src/Page/Builder/Component/Home/Component/Main/Container.js"],"names":["React","Component","connect","withRouter","injectIntl","View","request","PAGETYPE","showPopUp","NewProjectPopup","Container","props","componentDidMount","fetchMyProjects","fetchMyPublished","fetchMyApk","fetchNews","params","type","limit","offset","getNewsList","res","json","news","setState","rows","console","log","email","keyword","getDevelopingProjects","myProjects","getPublishedProjectsByLive","publisheds","myPublisheds","map","p","project","getWizlabAPKs","userId","apks","success","myApks","wizlabAPKs","slice","onClick2DGame","onClick3DGame","onClickMyProjectMore","resetSelectProject","setCurrentPage","onClickMyPublishedMore","onClickMyApkMore","onClickProject","pId","history","replace","pathname","BUILDER3D","BUILDER","window","location","reload","onClickPublishProject","push","setSlickRef","ref","slick","handlePrev","e","preventDefault","slickPrev","handleNext","slickNext","setProjectName","newName","prev","item","index","name","state","isClickDetailBtn","handleEdit","onClickProjectEdit","onClickDetailBtn","selectProject","handleDelete","handleCopy","intl","userinfo","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { injectIntl } from \"react-intl\";\nimport View from \"./View\";\nimport * as request from \"../../../../../../Common/Util/HTTPRequest\";\nimport { PAGETYPE } from \"../../../../../../Common/Util/Constant\";\nimport { showPopUp } from \"../../../../../../Common/Component/PopUp\";\nimport NewProjectPopup from \"../NewProjectPopup\";\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClickDetailBtn: false,\n      myProjects: [],\n      myPublisheds: [],\n      myApks: [],\n      news: []\n    };\n    this.limit = 10;\n  }\n  componentDidMount = () => {\n    this.fetchMyProjects();\n    this.fetchMyPublished();\n    this.fetchMyApk();\n    this.fetchNews();\n  };\n  fetchNews = async () => {\n    const params = { type: \"builder\", limit: 3, offset: 0 };\n    try {\n      let res = await request.getNewsList(params);\n      let news = await res.json();\n      this.setState({ news: news.rows || [] });\n    } catch (error) {\n      console.log(error);\n      this.setState({ news: [] });\n    }\n  };\n  fetchMyProjects = async () => {\n    if (!this.props.email) return;\n    let params = {\n      email: this.props.email,\n      offset: 0,\n      limit: this.limit,\n      keyword: \"\"\n    };\n\n    try {\n      let res = await request.getDevelopingProjects(params);\n      let myProjects = await res.json();\n      this.setState({ myProjects: myProjects.rows || [] });\n    } catch (error) {\n      this.setState({ myProjects: [] });\n      console.log(error);\n    }\n  };\n\n  fetchMyPublished = async () => {\n    if (!this.props.email) return;\n    let params = {\n      email: this.props.email,\n      offset: 0,\n      limit: this.limit\n    };\n    try {\n      let res = await request.getPublishedProjectsByLive(params);\n      let publisheds = await res.json();\n      this.setState({\n        myPublisheds:\n          publisheds.rows.map(p => {\n            p.type = p.project.type;\n            return p;\n          }) || []\n      });\n    } catch (error) {\n      console.log(error);\n      this.setState({ myPublisheds: [] });\n    }\n  };\n\n  fetchMyApk = async () => {\n    if (!this.props.email) return;\n    try {\n      let res = await request.getWizlabAPKs({ userId: this.props.userId });\n      let apks = await res.json();\n      if (apks.success) {\n        this.setState({ myApks: apks.wizlabAPKs.slice(this.limit) || [] });\n      }\n    } catch (error) {\n      console.log(error);\n      this.setState({ myApks: [] });\n    }\n  };\n  onClick2DGame = () => {\n    showPopUp(<NewProjectPopup gameDimension=\"2D\" email={this.props.email} />);\n  };\n  onClick3DGame = () => {\n    showPopUp(<NewProjectPopup gameDimension=\"3D\" email={this.props.email} />);\n  };\n  onClickMyProjectMore = () => {\n    this.props.resetSelectProject();\n    this.props.setCurrentPage(\"myProject\");\n  };\n  onClickMyPublishedMore = () => {\n    this.props.resetSelectProject();\n    this.props.setCurrentPage(\"myPublished\");\n  };\n  onClickMyApkMore = () => {\n    this.props.setCurrentPage(\"myApk\");\n  };\n  onClickProject = (pId, type) => {\n    if (!pId) return;\n    this.props.history.replace({\n      pathname: `/${\n        type === \"js3d\" ? PAGETYPE.BUILDER3D : PAGETYPE.BUILDER\n      }/${pId}`\n    });\n    type !== \"js3d\" && window.location.reload();\n  };\n  onClickPublishProject = pId => {\n    if (!pId) return;\n    this.props.history.push(`?pId=${pId}`);\n  };\n  setSlickRef = ref => {\n    this.slick = ref;\n  };\n  handlePrev = e => {\n    e.preventDefault();\n    this.slick.slickPrev();\n  };\n  handleNext = e => {\n    e.preventDefault();\n    this.slick.slickNext();\n  };\n  setProjectName = (pId, newName) => {\n    this.setState(prev => ({\n      myProjects: prev.myProjects.map((item, index) => {\n        if (item.pId === pId) {\n          item.name = newName;\n        }\n        return item;\n      })\n    }));\n  };\n  render() {\n    const {\n      handleEdit,\n      onClickProjectEdit,\n      onClickDetailBtn,\n      selectProject,\n      handleDelete,\n      handleCopy\n    } = this.props;\n    const { myProjects, myPublisheds, myApks, news } = this.state;\n    const {\n      onClick2DGame,\n      onClick3DGame,\n      onClickMyProjectMore,\n      onClickMyPublishedMore,\n      onClickMyApkMore,\n      onClickProject,\n      onClickPublishProject,\n      setSlickRef,\n      handlePrev,\n      handleNext,\n      fetchMyProjects,\n      setProjectName\n    } = this;\n    return (\n      <View\n        onClick2DGame={onClick2DGame}\n        onClick3DGame={onClick3DGame}\n        onClickMyProjectMore={onClickMyProjectMore}\n        onClickMyPublishedMore={onClickMyPublishedMore}\n        onClickMyApkMore={onClickMyApkMore}\n        setSlickRef={setSlickRef}\n        handlePrev={handlePrev}\n        handleNext={handleNext}\n        onClickDetailBtn={onClickDetailBtn}\n        onClickProjectEdit={onClickProjectEdit}\n        handleEdit={handleEdit}\n        selectProject={selectProject}\n        myProjects={myProjects}\n        myPublisheds={myPublisheds}\n        myApks={myApks}\n        onClickProject={onClickProject}\n        onClickPublishProject={onClickPublishProject}\n        news={news}\n        intl={this.props.intl}\n        handleDelete={handleDelete}\n        handleCopy={handleCopy}\n        fetchMyProjects={fetchMyProjects}\n        setProjectName={setProjectName}\n      />\n    );\n  }\n}\nexport default connect(\n  state => ({ email: state.userinfo.email, userId: state.userinfo.id }),\n  {}\n)(injectIntl(withRouter(Container)));\n"]},"metadata":{},"sourceType":"module"}