{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/Layout/Header/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { showPopUp } from \"../../PopUp\";\nimport * as userInfoActions from \"../../../Store/Reducer/UserInfo\";\nimport SignIn from \"../../SignIn\";\nimport SignUp from \"../../SignUp\";\nimport * as request from \"../../../Util/HTTPRequest\";\nimport View from \"./View\";\nimport \"./index.scss\";\n\nvar Header = /*#__PURE__*/function (_Component) {\n  _inherits(Header, _Component);\n\n  var _super = _createSuper(Header);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function () {\n      _this.getBadgeCount();\n\n      window.addEventListener(\"scroll\", _this.getScrollTop);\n    };\n\n    _this.componentDidUpdate = function (prevProps) {\n      if (prevProps.userinfo.email !== _this.props.userinfo.email) {\n        _this.getBadgeCount();\n      }\n    };\n\n    _this.getScrollTop = function () {\n      if (window.scrollY < 1) {\n        _this.setState({\n          scrollTop: true\n        });\n      } else {\n        _this.setState({\n          scrollTop: false\n        });\n      }\n    };\n\n    _this.getBadgeCount = function () {\n      if (_this.props.userinfo.email) {\n        request.getBadgeCount({\n          email: _this.props.userinfo.email\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          return _this.setState({\n            badge: json.badge\n          });\n        });\n      }\n    };\n\n    _this.onClickCreate = function () {};\n\n    _this.onClickSignIn = function () {\n      _this.setState({\n        isMobileMenuOn: false\n      });\n\n      showPopUp( /*#__PURE__*/React.createElement(SignIn, {\n        history: _this.props.history,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.onClickSignUp = function () {\n      _this.setState({\n        isMobileMenuOn: false\n      });\n\n      showPopUp( /*#__PURE__*/React.createElement(SignUp, {\n        history: _this.props.history,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }\n      }), {\n        darkmode: true,\n        mobileFullscreen: true\n      });\n    };\n\n    _this.onClickNotification = function () {\n      if (_this.state.isNotiPopupOn) {\n        _this.setState({\n          isNotiPopupOn: false\n        });\n      } else {\n        _this.setState({\n          isNotiPopupOn: true,\n          badge: 0\n        });\n      }\n    };\n\n    _this.onClickLogout = function () {\n      localStorage.removeItem(\"wizToken\");\n\n      _this.props.updateUserInfo();\n\n      _this.handleToggleMobileMenu();\n    };\n\n    _this.handleToggleMobileMenu = function () {\n      _this.setState({\n        isMobileMenuOn: !_this.state.isMobileMenuOn\n      });\n    };\n\n    _this.handleClickURL = function (url) {\n      _this.setState({\n        isMobileMenuOn: false\n      }, function () {\n        return _this.props.history.push(url);\n      });\n    };\n\n    _this.state = {\n      badge: 0,\n      isMobileMenuOn: false,\n      scrollTop: _this.getScrollTop\n    };\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"currentLink\",\n    get: function get() {\n      return this.props.location.pathname.split(\"/\")[1];\n    }\n  }, {\n    key: \"links\",\n    get: function get() {\n      var _links = [\"game\", \"learn\", \"social\", \"myapk\", \"news\"];\n      var userinfo = this.props.userinfo;\n\n      if (userinfo.organization) {\n        if (userinfo.organization.toLowerCase() === \"ssafy\") {\n          _links.push(\"ssafy\");\n        }\n\n        if (userinfo.organization.includes(\"전주\")) {\n          _links.push(\"jj\");\n        }\n      }\n\n      return _links;\n    }\n  }, {\n    key: \"highlightLinks\",\n    get: function get() {\n      return [\"ssafy\", \"challenge\"];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var onClickSignIn = this.onClickSignIn,\n          onClickSignUp = this.onClickSignUp,\n          onClickNotification = this.onClickNotification,\n          onClickLogout = this.onClickLogout,\n          handleToggleMobileMenu = this.handleToggleMobileMenu,\n          handleClickURL = this.handleClickURL,\n          onClickCreate = this.onClickCreate;\n      return /*#__PURE__*/React.createElement(View, Object.assign({}, this.state, {\n        onClickSignIn: onClickSignIn,\n        onClickSignUp: onClickSignUp,\n        onClickLogout: onClickLogout,\n        onClickCreate: onClickCreate,\n        onClickNotification: onClickNotification,\n        handleToggleMobileMenu: handleToggleMobileMenu,\n        handleClickURL: handleClickURL,\n        links: this.links,\n        highlightLinks: this.highlightLinks,\n        currentLink: this.currentLink,\n        userinfo: this.props.userinfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    userinfo: state.userinfo\n  };\n}, {\n  updateUserInfo: userInfoActions.updateUserInfo\n})(withRouter(Header));","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Common/Component/Layout/Header/index.js"],"names":["React","Component","connect","withRouter","showPopUp","userInfoActions","SignIn","SignUp","request","View","Header","props","componentDidMount","getBadgeCount","window","addEventListener","getScrollTop","componentDidUpdate","prevProps","userinfo","email","scrollY","setState","scrollTop","then","res","json","badge","onClickCreate","onClickSignIn","isMobileMenuOn","history","darkmode","mobileFullscreen","onClickSignUp","onClickNotification","state","isNotiPopupOn","onClickLogout","localStorage","removeItem","updateUserInfo","handleToggleMobileMenu","handleClickURL","url","push","location","pathname","split","_links","organization","toLowerCase","includes","links","highlightLinks","currentLink"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { showPopUp } from \"../../PopUp\";\nimport * as userInfoActions from \"../../../Store/Reducer/UserInfo\";\nimport SignIn from \"../../SignIn\";\nimport SignUp from \"../../SignUp\";\nimport * as request from \"../../../Util/HTTPRequest\";\nimport View from \"./View\";\nimport \"./index.scss\";\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      badge: 0,\n      isMobileMenuOn: false, \n      scrollTop: this.getScrollTop\n    };\n  }\n\n  componentDidMount = () => {\n    this.getBadgeCount();\n    window.addEventListener(\"scroll\", this.getScrollTop);\n  };\n\n  componentDidUpdate = prevProps => {\n    if (prevProps.userinfo.email !== this.props.userinfo.email) {\n      this.getBadgeCount();\n    }\n  };\n\n  getScrollTop = () => {\n    if (window.scrollY < 1) {\n      this.setState({ scrollTop: true })\n    } else {\n      this.setState({ scrollTop: false })\n    }\n  }\n\n  getBadgeCount = () => {\n    if (this.props.userinfo.email) {\n      request\n        .getBadgeCount({ email: this.props.userinfo.email })\n        .then(res => res.json())\n        .then(json => this.setState({ badge: json.badge }));\n    }\n  };\n\n  onClickCreate = () => {\n  }\n\n  onClickSignIn = () => {\n    this.setState({ isMobileMenuOn: false });\n    showPopUp(<SignIn history={this.props.history} />, { darkmode: true, mobileFullscreen: true });\n  };\n  onClickSignUp = () => {\n    this.setState({ isMobileMenuOn: false });\n    showPopUp(<SignUp history={this.props.history} />, {\n      darkmode: true,\n      mobileFullscreen: true\n    });\n  };\n\n  onClickNotification = () => {\n    if (this.state.isNotiPopupOn) {\n      this.setState({ isNotiPopupOn: false });\n    } else {\n      this.setState({ isNotiPopupOn: true, badge: 0 });\n    }\n  };\n\n  onClickLogout = () => {\n    localStorage.removeItem(\"wizToken\");\n    this.props.updateUserInfo();\n    this.handleToggleMobileMenu();\n  };\n\n  handleToggleMobileMenu = () => {\n    this.setState({ isMobileMenuOn: !this.state.isMobileMenuOn });\n  };\n\n  handleClickURL = url => {\n    this.setState({ isMobileMenuOn: false }, () =>\n      this.props.history.push(url)\n    );\n  };\n\n  get currentLink() {\n    return this.props.location.pathname.split(\"/\")[1];\n  }\n\n  get links() {\n    const _links = [\n      \"game\",\n      \"learn\",\n      \"social\",\n      \"myapk\",\n      \"news\",\n    ];\n    const { userinfo } = this.props;\n    if (userinfo.organization) {\n      if (userinfo.organization.toLowerCase() === \"ssafy\") {\n        _links.push(\"ssafy\");\n      }\n      if (userinfo.organization.includes(\"전주\")) {\n        _links.push(\"jj\");\n      }\n    }\n    \n    return _links;\n  }\n\n  get highlightLinks() {\n    return [\"ssafy\", \"challenge\"];\n  }\n\n  render() {\n    const {\n      onClickSignIn,\n      onClickSignUp,\n      onClickNotification,\n      onClickLogout,\n      handleToggleMobileMenu,\n      handleClickURL,\n      onClickCreate\n    } = this;\n\n    return (\n      <View\n        { ...this.state }\n        onClickSignIn={onClickSignIn}\n        onClickSignUp={onClickSignUp}\n        onClickLogout={onClickLogout}\n        onClickCreate={onClickCreate}\n        onClickNotification={onClickNotification}\n        handleToggleMobileMenu={handleToggleMobileMenu}\n        handleClickURL={handleClickURL}\n        links={this.links}\n        highlightLinks={this.highlightLinks}\n        currentLink={this.currentLink}\n        userinfo={this.props.userinfo}\n      />\n    )\n  }\n}\n\nexport default connect(\n  state => ({ userinfo: state.userinfo }),\n  {\n    updateUserInfo: userInfoActions.updateUserInfo\n  }\n)(withRouter(Header));\n"]},"metadata":{},"sourceType":"module"}