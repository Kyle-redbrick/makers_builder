{"ast":null,"code":"import _classCallCheck from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/DreamBuilder/WizMateManager/index.js\";\nimport React, { Component, createRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport WizMate from \"../../../../../Common/Component/WizMate\";\nimport Condition from \"../ConditionChecker/condition\";\nimport \"./index.scss\";\nvar LOCATION = {\n  EDITOR: \"onEditor\",\n  GAME: \"onGame\",\n  PLAY_BUTTON: \"onPlayButton\"\n};\n\nvar WizMateManager =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WizMateManager, _Component);\n\n  function WizMateManager(props) {\n    var _this;\n\n    _classCallCheck(this, WizMateManager);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WizMateManager).call(this, props));\n    _this.wizmateRef = createRef();\n    _this.state = {\n      location: LOCATION.EDITOR\n    };\n    return _this;\n  }\n\n  _createClass(WizMateManager, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.moveTo(LOCATION.EDITOR);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.isPlaying !== this.props.isPlaying) {\n        if (this.props.isPlaying) {\n          this.didStartPlaying();\n        } else {\n          this.didStopPlaying();\n        }\n      }\n\n      if (prevProps.isCodeConditionsClear !== this.props.isCodeConditionsClear) {\n        if (this.props.isCodeConditionsClear) {\n          this.didClearCodeConditions();\n        }\n      }\n    }\n  }, {\n    key: \"didStartPlaying\",\n    value: function didStartPlaying() {\n      this.moveTo(LOCATION.GAME);\n\n      if (!this.props.isCodeConditionsClear) {\n        this.didStartPlayingWithoutCodeClear();\n      }\n    }\n  }, {\n    key: \"didStartPlayingWithoutCodeClear\",\n    value: function didStartPlayingWithoutCodeClear() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        _this2.error(\"코드를 다시 확인해 볼래?\");\n      }, 1000);\n    }\n  }, {\n    key: \"didStopPlaying\",\n    value: function didStopPlaying() {\n      this.moveTo(LOCATION.EDITOR);\n    }\n  }, {\n    key: \"didClearCodeConditions\",\n    value: function didClearCodeConditions() {\n      if (this.codeConditionExists && !this.props.isConditionsClear) {\n        this.speak(\"<icon type=\\\"play\\\" /> \\uC798\\uD588\\uC5B4! \\uC2E4\\uD589\\uD574 \\uBCF4\\uC790!\");\n      }\n    }\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(location) {\n      this.setState({\n        location: location\n      });\n    }\n  }, {\n    key: \"speak\",\n    value: function speak(message, duration) {\n      if (this.wizmateRef.current) {\n        this.wizmateRef.current.speak(message, duration);\n      }\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message, duration) {\n      if (this.wizmateRef.current) {\n        this.wizmateRef.current.warn(message, duration);\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(message, duration) {\n      if (this.wizmateRef.current) {\n        this.wizmateRef.current.error(message, duration);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(message, duration) {\n      if (this.wizmateRef.current) {\n        this.wizmateRef.current.stop(message, duration);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"dream_wizmate dream_wizmate-\".concat(this.state.location),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(WizMate, {\n        ref: this.wizmateRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"codeConditionExists\",\n    get: function get() {\n      return !!this.conditions.find(function (condition) {\n        return condition.isCodeType;\n      });\n    }\n  }, {\n    key: \"conditions\",\n    get: function get() {\n      var rawConditions = this.props.mission && this.props.mission.conditions || [];\n      return rawConditions.map(function (rawCondition) {\n        return Condition.create(rawCondition);\n      });\n    }\n  }]);\n\n  return WizMateManager;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    mission: state.dream.currentMission,\n    isPlaying: state.preview.isPlaying,\n    isConditionsClear: state.dream.isConditionsClear,\n    isCodeConditionsClear: state.dream.isCodeConditionsClear\n  };\n})(WizMateManager);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Builder/Component/DreamBuilder/WizMateManager/index.js"],"names":["React","Component","createRef","connect","WizMate","Condition","LOCATION","EDITOR","GAME","PLAY_BUTTON","WizMateManager","props","wizmateRef","state","location","moveTo","prevProps","isPlaying","didStartPlaying","didStopPlaying","isCodeConditionsClear","didClearCodeConditions","didStartPlayingWithoutCodeClear","setTimeout","error","codeConditionExists","isConditionsClear","speak","setState","message","duration","current","warn","stop","conditions","find","condition","isCodeType","rawConditions","mission","map","rawCondition","create","dream","currentMission","preview"],"mappings":"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","sourcesContent":["import React, { Component, createRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport WizMate from \"../../../../../Common/Component/WizMate\";\nimport Condition from \"../ConditionChecker/condition\";\nimport \"./index.scss\"\n\nconst LOCATION = {\n  EDITOR: \"onEditor\",\n  GAME: \"onGame\",\n  PLAY_BUTTON: \"onPlayButton\"\n}\n\nclass WizMateManager extends Component {\n  constructor(props) {\n    super(props);\n    this.wizmateRef = createRef();\n    this.state = { location: LOCATION.EDITOR };\n  }\n  componentDidMount() {\n    this.moveTo(LOCATION.EDITOR);\n  }\n  componentDidUpdate(prevProps) {\n    if(prevProps.isPlaying !== this.props.isPlaying) {\n      if(this.props.isPlaying) {\n        this.didStartPlaying();\n      } else {\n        this.didStopPlaying();\n      }\n    }\n    if(prevProps.isCodeConditionsClear !== this.props.isCodeConditionsClear) {\n      if(this.props.isCodeConditionsClear) {\n        this.didClearCodeConditions();\n      }\n    }\n  }\n  didStartPlaying() {\n    this.moveTo(LOCATION.GAME);\n    if(!this.props.isCodeConditionsClear) {\n      this.didStartPlayingWithoutCodeClear();\n    }\n  }\n  didStartPlayingWithoutCodeClear() {\n    setTimeout(() => {\n      this.error(\"코드를 다시 확인해 볼래?\");\n    }, 1000);\n  }\n  didStopPlaying() {\n    this.moveTo(LOCATION.EDITOR);\n  }\n  didClearCodeConditions() {\n    if(this.codeConditionExists && !this.props.isConditionsClear) {\n      this.speak(`<icon type=\"play\" /> 잘했어! 실행해 보자!`);\n    }\n  }\n\n  moveTo(location) {\n    this.setState({ location });\n  }\n  \n  speak(message, duration) {\n    if(this.wizmateRef.current) {\n      this.wizmateRef.current.speak(message, duration);\n    }\n  }\n  warn(message, duration) {\n    if(this.wizmateRef.current) {\n      this.wizmateRef.current.warn(message, duration);\n    }\n  }\n  error(message, duration) {\n    if(this.wizmateRef.current) {\n      this.wizmateRef.current.error(message, duration);\n    }\n  }\n  stop(message, duration) {\n    if(this.wizmateRef.current) {\n      this.wizmateRef.current.stop(message, duration);\n    }\n  }\n\n  get codeConditionExists() {\n    return !!this.conditions.find(condition => condition.isCodeType);\n  }\n  get conditions() {\n    const rawConditions = (this.props.mission && this.props.mission.conditions) || [];\n    return rawConditions.map(rawCondition => Condition.create(rawCondition));\n  }\n\n  render() {\n    return (\n      <div className={`dream_wizmate dream_wizmate-${this.state.location}`}>\n        <WizMate ref={this.wizmateRef} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    mission: state.dream.currentMission,\n    isPlaying: state.preview.isPlaying,\n    isConditionsClear: state.dream.isConditionsClear,\n    isCodeConditionsClear: state.dream.isCodeConditionsClear\n  })\n)(WizMateManager);\n"]},"metadata":{},"sourceType":"module"}