{"ast":null,"code":"import _objectSpread from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/jimmy/Documents/Wizschool/wizlab_web2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Python/Components/PopupComponents/InfoPopup/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { Rnd } from \"react-rnd\";\nimport ReactHtmlParser from \"react-html-parser\";\nimport ReactMarkdown from \"react-markdown\";\nimport \"./index.scss\";\nimport closeBtn from \"../../../../../Image/newPython/python-popup-close-btn@2x.png\";\nimport manImage from \"../../../../../Image/newPython/chat-man-profile@2x.png\";\nimport womanImage from \"../../../../../Image/newPython/chat-woman-profile@2x.png\";\nimport meImage from \"../../../../../Image/newPython/ic-user@3x.png\";\nimport hintOpenArrow from \"../../../../../Image/newPython/hint-popup-arrow.png\";\nimport { playTabEffect, playButtonEffect } from \"../../../Util/PlaySound\";\nimport CodeBlock from \"./CodeBlock\";\n\nfunction PythonInfo(props) {\n  var handleInfoPopup = props.handleInfoPopup,\n      chatHistory = props.chatHistory,\n      infoPopupData = props.infoPopupData,\n      isShowAnswerCode = props.isShowAnswerCode,\n      handleNextDestination = props.handleNextDestination;\n\n  var _useState = useState({\n    x: 10,\n    y: 20,\n    width: 393,\n    height: 500\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      infoPopupSetting = _useState2[0],\n      setInfoPopupSetting = _useState2[1];\n\n  var _useState3 = useState(\"hint\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      infoPopupTab = _useState4[0],\n      setInfoPopupTab = _useState4[1]; // hint, chatHistory, data\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isShowAnswerBox = _useState6[0],\n      setisShowAnswerBox = _useState6[1];\n\n  useEffect(function () {\n    setAce();\n  }, [infoPopupTab, isShowAnswerCode]);\n\n  var setAce = function setAce() {\n    if (!isShowAnswerCode) return;\n    if (infoPopupTab === \"chatHistory\") return;\n    var infoPopupAce = window.ace;\n    var infoPopupAceEditor = undefined;\n    infoPopupAceEditor = infoPopupAce.edit(\"hintEditor\");\n    infoPopupAceEditor.session.setMode(\"ace/mode/python\");\n    infoPopupAceEditor.setTheme(\"ace/theme/wizschool-python\");\n    infoPopupAceEditor.setValue(infoPopupData.hintCode, 1);\n    infoPopupAceEditor.renderer.setShowGutter(false);\n    infoPopupAceEditor.setReadOnly(true);\n  };\n\n  var handleInfoPopupTab = function handleInfoPopupTab(tab) {\n    setInfoPopupTab(tab);\n  };\n\n  var changePointText = function changePointText(text, pointText) {\n    var fullText = text.split(pointText);\n    var data = \"\".concat(fullText[0], \"<span>\").concat(pointText, \"</span>\").concat(fullText[1]);\n    return ReactHtmlParser(data);\n  };\n\n  return React.createElement(Rnd, {\n    default: {\n      x: 10,\n      y: 20,\n      width: infoPopupSetting.width,\n      hegith: infoPopupSetting.height\n    },\n    minWidth: \"330\",\n    minHeight: \"200\",\n    position: {\n      x: infoPopupSetting.x,\n      y: infoPopupSetting.y\n    },\n    dragHandleClassName: \"hintText\",\n    onDragStop: function onDragStop(e, d) {\n      setInfoPopupSetting(_objectSpread({}, infoPopupSetting, {\n        x: d.x,\n        y: d.y\n      }));\n    },\n    onResizeStop: function onResizeStop(e, direction, ref, delta, position) {\n      setInfoPopupSetting(_objectSpread({}, infoPopupSetting, {\n        width: ref.style.width,\n        height: ref.style.height\n      }, position));\n    },\n    bounds: \"parent\",\n    className: \"pythonPopup pythonInfoPopup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"popupHeader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"popupHeaderTabArea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"\".concat(infoPopupTab === \"hint\" ? \"activeTab\" : \"\"),\n    onClick: function onClick() {\n      playTabEffect();\n      handleInfoPopupTab(\"hint\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_TITLE\"\n  })), React.createElement(\"li\", {\n    className: \"\".concat(infoPopupTab === \"chatHistory\" ? \"activeTab\" : \"\"),\n    onClick: function onClick() {\n      playTabEffect();\n      handleInfoPopupTab(\"chatHistory\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_HISTORY\"\n  }))), React.createElement(\"img\", {\n    className: \"closePopupBtn\",\n    onClick: handleInfoPopup,\n    src: closeBtn,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"popupBody\",\n    style: {\n      maxHeight: infoPopupSetting.height\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, infoPopupTab === \"hint\" && React.createElement(\"div\", {\n    className: \"hintBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"hintText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"hintTextTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, infoPopupData.missionGoal ? \"\".concat(infoPopupData.missionGoal, \"\\n\") : props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_MISSION_GOAL\"\n  })), infoPopupData.hint ? React.createElement(ReactMarkdown, {\n    skipHtml: false,\n    allowDangerousHtml: true,\n    renderers: {\n      code: CodeBlock\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, infoPopupData.hint) : props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_MISSION_DATA\"\n  })), React.createElement(\"div\", {\n    className: \"hintAnswerBox \".concat(isShowAnswerBox ? \"open\" : \"close\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"title\",\n    onClick: function onClick() {\n      playButtonEffect();\n      setisShowAnswerBox(!isShowAnswerBox);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_ANSWER_TITLE\"\n  })), React.createElement(\"img\", {\n    className: isShowAnswerBox ? \"hintOpenArrowOpen\" : \"hintOpenArrowClose\",\n    src: hintOpenArrow,\n    alt: \"box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"answer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, isShowAnswerCode ? React.createElement(\"div\", {\n    className: \"showAnswer\",\n    id: \"hintEditor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }) : React.createElement(\"p\", {\n    className: \"defaultMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_ANSWER_DEFAULT_MSG\"\n  })))), React.createElement(\"div\", {\n    className: \"zoomBtn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  })), infoPopupTab === \"chatHistory\" && React.createElement(\"div\", {\n    className: \"chatHistoryList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, chatHistory.map(function (chat, i) {\n    if (chat.type === \"announce\") {\n      return React.createElement(\"div\", {\n        key: chat + i,\n        className: \"chatInfoBox\",\n        onClick: function onClick() {\n          handleNextDestination(chat.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, chat.text);\n    } else if (chat.type === \"chat\") {\n      if (chat.character === \"me\") {\n        return React.createElement(\"div\", {\n          className: \"chatMe\",\n          key: chat + i,\n          onClick: function onClick() {\n            handleNextDestination(chat.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"chatMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, chat.text), React.createElement(\"img\", {\n          src: meImage,\n          alt: \"\",\n          className: \"chatCharacter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"chatPeer\",\n          key: chat + i,\n          onClick: function onClick() {\n            handleNextDestination(chat.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: chat.character === \"py\" ? womanImage : manImage,\n          alt: \"\",\n          className: \"chatCharacter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"chatMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, chat.pointText ? changePointText(chat.text, chat.pointText) : chat.text));\n      }\n    } else {\n      return null;\n    }\n  })), infoPopupTab === \"data\" && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"dataContent\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, \"data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data\"), React.createElement(\"button\", {\n    onClick: function onClick() {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, props.intl.formatMessage({\n    id: \"ID_PYTHON_HINT_DATA_COPY\"\n  })))));\n}\n\nexport default injectIntl(PythonInfo);","map":{"version":3,"sources":["/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/Python/Components/PopupComponents/InfoPopup/index.js"],"names":["React","useState","useEffect","injectIntl","Rnd","ReactHtmlParser","ReactMarkdown","closeBtn","manImage","womanImage","meImage","hintOpenArrow","playTabEffect","playButtonEffect","CodeBlock","PythonInfo","props","handleInfoPopup","chatHistory","infoPopupData","isShowAnswerCode","handleNextDestination","x","y","width","height","infoPopupSetting","setInfoPopupSetting","infoPopupTab","setInfoPopupTab","isShowAnswerBox","setisShowAnswerBox","setAce","infoPopupAce","window","ace","infoPopupAceEditor","undefined","edit","session","setMode","setTheme","setValue","hintCode","renderer","setShowGutter","setReadOnly","handleInfoPopupTab","tab","changePointText","text","pointText","fullText","split","data","hegith","e","d","direction","ref","delta","position","style","intl","formatMessage","id","maxHeight","missionGoal","hint","code","map","chat","i","type","character"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { Rnd } from \"react-rnd\";\nimport ReactHtmlParser from \"react-html-parser\";\nimport ReactMarkdown from \"react-markdown\";\nimport \"./index.scss\";\n\nimport closeBtn from \"../../../../../Image/newPython/python-popup-close-btn@2x.png\";\nimport manImage from \"../../../../../Image/newPython/chat-man-profile@2x.png\";\nimport womanImage from \"../../../../../Image/newPython/chat-woman-profile@2x.png\";\nimport meImage from \"../../../../../Image/newPython/ic-user@3x.png\";\nimport hintOpenArrow from \"../../../../../Image/newPython/hint-popup-arrow.png\";\n\nimport { playTabEffect, playButtonEffect } from \"../../../Util/PlaySound\";\nimport CodeBlock from \"./CodeBlock\"\n\nfunction PythonInfo(props) {\n  const { handleInfoPopup, chatHistory, infoPopupData, isShowAnswerCode, handleNextDestination } = props;\n  const [infoPopupSetting, setInfoPopupSetting] = useState({\n    x: 10,\n    y: 20,\n    width: 393,\n    height: 500\n  });\n  const [infoPopupTab, setInfoPopupTab] = useState(\"hint\"); // hint, chatHistory, data\n  const [isShowAnswerBox, setisShowAnswerBox] = useState(false);\n\n  useEffect(() => {\n    setAce()\n  }, [infoPopupTab, isShowAnswerCode]);\n\n  const setAce = () => {\n    if(!isShowAnswerCode) return;\n    if(infoPopupTab === \"chatHistory\") return;\n    \n    let infoPopupAce = window.ace;\n    let infoPopupAceEditor = undefined;\n    \n    infoPopupAceEditor = infoPopupAce.edit(\"hintEditor\");\n    infoPopupAceEditor.session.setMode(`ace/mode/python`);\n    infoPopupAceEditor.setTheme(\"ace/theme/wizschool-python\");\n    infoPopupAceEditor.setValue(infoPopupData.hintCode, 1); \n    infoPopupAceEditor.renderer.setShowGutter(false);\n    infoPopupAceEditor.setReadOnly(true);\n  }\n  \n  const handleInfoPopupTab = tab => {\n    setInfoPopupTab(tab);\n  };\n\n  const changePointText = (text, pointText) => {\n    const fullText = text.split(pointText);\n    const data = `${fullText[0]}<span>${pointText}</span>${fullText[1]}`;\n    return ReactHtmlParser(data);\n  };\n\n  return (\n    <Rnd\n      default={{\n        x: 10,\n        y: 20,\n        width: infoPopupSetting.width,\n        hegith: infoPopupSetting.height\n      }}\n      minWidth=\"330\"\n      minHeight=\"200\"\n      position={{ x: infoPopupSetting.x, y: infoPopupSetting.y }}\n      dragHandleClassName = \"hintText\"\n      onDragStop={(e, d) => {\n        setInfoPopupSetting({ ...infoPopupSetting, x: d.x, y: d.y });\n      }}\n      onResizeStop={(e, direction, ref, delta, position) => {\n        setInfoPopupSetting({\n          ...infoPopupSetting,\n          width: ref.style.width,\n          height: ref.style.height,\n          ...position\n        });\n      }}\n      bounds=\"parent\"\n      className=\"pythonPopup pythonInfoPopup\"\n    >\n      <div className=\"popupHeader\">\n        <ul className=\"popupHeaderTabArea\">\n          <li\n            className={`${infoPopupTab === \"hint\" ? \"activeTab\" : \"\"}`}\n            onClick={() => {\n              playTabEffect();\n              handleInfoPopupTab(\"hint\");\n            }}\n          >\n            {props.intl.formatMessage({ id: \"ID_PYTHON_HINT_TITLE\" })}\n          </li>\n          <li\n            className={`${infoPopupTab === \"chatHistory\" ? \"activeTab\" : \"\"}`}\n            onClick={() => {\n              playTabEffect();\n              handleInfoPopupTab(\"chatHistory\");\n            }}\n          >\n            {props.intl.formatMessage({ id: \"ID_PYTHON_HINT_HISTORY\" })}\n          </li>\n        </ul>\n        <img\n          className=\"closePopupBtn\"\n          onClick={handleInfoPopup}\n          src={closeBtn}\n          alt=\"\"\n        />\n      </div>\n\n      <div className=\"popupBody\" style={{ maxHeight: infoPopupSetting.height }}>\n        {infoPopupTab === \"hint\" && (\n          <div className=\"hintBox\">\n            <div className=\"hintText\">\n            <span className=\"hintTextTitle\">\n            { infoPopupData.missionGoal ? `${infoPopupData.missionGoal}\\n` : props.intl.formatMessage({ id: \"ID_PYTHON_HINT_MISSION_GOAL\" }) }\n            </span>\n            { infoPopupData.hint \n            ? <ReactMarkdown skipHtml={false} allowDangerousHtml renderers={{code: CodeBlock}}>\n                {infoPopupData.hint}\n              </ReactMarkdown>\n            : props.intl.formatMessage({ id: \"ID_PYTHON_HINT_MISSION_DATA\" }) \n            }\n            </div>\n            <div\n              className={`hintAnswerBox ${\n                isShowAnswerBox ? \"open\" : \"close\"\n              }`}\n            >\n              <p\n                className=\"title\"\n                onClick={() => {\n                  playButtonEffect();\n                  setisShowAnswerBox(!isShowAnswerBox);\n                }}\n              >\n                <span>{props.intl.formatMessage({ id: \"ID_PYTHON_HINT_ANSWER_TITLE\" })}</span>\n                <img className={isShowAnswerBox ? \"hintOpenArrowOpen\" : \"hintOpenArrowClose\"} src={hintOpenArrow} alt=\"box\" />\n              </p>\n              <div className=\"answer\">\n                {isShowAnswerCode ? (\n                  <div className=\"showAnswer\" id=\"hintEditor\" ></div>\n                ) : (\n                  <p className=\"defaultMessage\">\n                    {props.intl.formatMessage({ id: \"ID_PYTHON_HINT_ANSWER_DEFAULT_MSG\" })}\n                  </p>\n                )}\n              </div>\n            </div>\n            {/* Todo : zoomAction Add */}\n            <div className=\"zoomBtn\" />\n          </div>\n        )}\n        {infoPopupTab === \"chatHistory\" && (\n          <div className=\"chatHistoryList\">\n            {chatHistory.map((chat, i) => {\n              if (chat.type === \"announce\") {\n                return (\n                  <div key={chat + i} className=\"chatInfoBox\" onClick={()=>{handleNextDestination(chat.id)}}>\n                    {chat.text}\n                  </div>\n                );\n              } else  if (chat.type === \"chat\") {\n                if(chat.character === \"me\"){\n                  return (\n                  <div className=\"chatMe\" key={chat + i} onClick={()=>{handleNextDestination(chat.id)}}>\n                    <p className=\"chatMessage\">\n                      {/* 파이! 빌더버그 인공위성에서 <span>해킹한 파일이 방금 전송</span>됐어. */}\n                      {chat.text}\n                    </p>\n                    <img src={meImage} alt=\"\" className=\"chatCharacter\" />\n                  </div> \n                  );\n                } else {\n                  return (\n                    <div className=\"chatPeer\" key={chat + i} onClick={()=>{handleNextDestination(chat.id)}}>\n                      <img\n                        src={chat.character === \"py\" ? womanImage : manImage}\n                        alt=\"\"\n                        className=\"chatCharacter\"\n                      />\n                      <p className=\"chatMessage\">\n                        {chat.pointText\n                          ? changePointText(chat.text, chat.pointText)\n                          : chat.text}\n                      </p>\n                    </div>\n                  );\n                }\n              } else {\n                return null\n              }\n            })}\n          </div>\n        )}\n        {infoPopupTab === \"data\" && (\n          <div>\n            <div className=\"dataContent\">\n              data data data data data data data data data data data data data\n              data data data data data data data data data data data data data\n              data data data data data data data\n            </div>\n            <button onClick={() => {}}>\n              {props.intl.formatMessage({ id: \"ID_PYTHON_HINT_DATA_COPY\" })}\n            </button>\n          </div>\n        )}\n      </div>\n    </Rnd>\n  );\n}\n\nexport default injectIntl(PythonInfo);\n"]},"metadata":{},"sourceType":"module"}