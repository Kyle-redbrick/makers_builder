{"map":"{\"version\":3,\"sources\":[\"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/GamePlayer/index.js\",\"/Users/jimmy/Documents/Wizschool/wizlab_web2/src/Page/GamePlayer/Container.js\"],\"names\":[\"__webpack_require__\",\"r\",\"__webpack_exports__\",\"react__WEBPACK_IMPORTED_MODULE_0__\",\"react__WEBPACK_IMPORTED_MODULE_0___default\",\"n\",\"react_redux__WEBPACK_IMPORTED_MODULE_1__\",\"_Common_Store__WEBPACK_IMPORTED_MODULE_2__\",\"_Container__WEBPACK_IMPORTED_MODULE_3__\",\"GamePlayer\",\"props\",\"a\",\"createElement\",\"className\",\"store\",\"Container\",\"_this\",\"Object\",\"_Users_jimmy_Documents_Wizschool_wizlab_web2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__\",\"this\",\"_super\",\"call\",\"getMobileOperatingSystem\",\"userAgent\",\"navigator\",\"vendor\",\"window\",\"opera\",\"test\",\"MSStream\",\"pId\",\"match\",\"params\",\"isLiveTest\",\"path\",\"os\",\"state\",\"project\",\"_callee\",\"_Users_jimmy_Documents_Wizschool_wizlab_web2_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default\",\"wrap\",\"_context\",\"prev\",\"next\",\"TrackingUtil\",\"email\",\"request\",\"then\",\"res\",\"json\",\"sent\",\"setState\",\"t0\",\"console\",\"error\",\"stop\",\"react__WEBPACK_IMPORTED_MODULE_7___default\",\"style\",\"backgroundImage\",\"concat\",\"icon\",\"name\",\"href\",\"react_intl__WEBPACK_IMPORTED_MODULE_12__\",\"id\",\"URL\",\"GAME_SRC\",\"url\",\"Component\",\"connect\",\"userinfo\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React from \\\"react\\\";\\nimport { Provider } from \\\"react-redux\\\";\\nimport store from \\\"../../Common/Store\\\";\\nimport Container from \\\"./Container\\\";\\n\\nimport \\\"./index.scss\\\";\\n\\nconst GamePlayer = props => {\\n  return (\\n    <div className={`Page--GamePlayer`}>\\n      <Provider store={store}>\\n        <Container {...props} />\\n      </Provider>\\n    </div>\\n  );\\n};\\nexport default GamePlayer;\\n\",\"import React, { Component } from \\\"react\\\";\\nimport * as request from \\\"../../Common/Util/HTTPRequest\\\";\\nimport * as TrackingUtil from \\\"../../Common/Util/TrackingUtil\\\";\\nimport { URL } from \\\"../../Common/Util/Constant\\\";\\nimport { connect } from \\\"react-redux\\\";\\nimport { FormattedMessage } from \\\"react-intl\\\";\\n// import generateGamePage from \\\"../Builder/utils/gamePageGenerator\\\";\\n\\nclass Container extends Component {\\n  constructor(props) {\\n    super(props);\\n\\n    this.pId = this.props.match.params.pId;\\n    this.isLiveTest = this.props.match.path === \\\"/liveTest/:pId\\\";\\n    this.os = this.getMobileOperatingSystem();\\n    this.state = {\\n      project: {}\\n    };\\n  }\\n\\n  async componentDidMount() {\\n    const pId = this.pId;\\n    let project;\\n    try {\\n      if (this.isLiveTest) {\\n        TrackingUtil.sendGAEvent(\\\"page\\\", \\\"/liveTest\\\", this.props.email);\\n        project = await request\\n          .getDevelopingProjectInfo({ pId })\\n          .then(res => res.json());\\n      } else {\\n        TrackingUtil.sendGAEvent(\\\"page\\\", \\\"/wizapp\\\", this.props.email);\\n        project = await request\\n          .getPublishedProject({ pId })\\n          .then(res => res.json());\\n      }\\n      this.setState({\\n        project\\n      });\\n    } catch (err) {\\n      console.error(err);\\n    }\\n  }\\n\\n  getMobileOperatingSystem = () => {\\n    var userAgent = navigator.userAgent || navigator.vendor || window.opera;\\n    if (/android/i.test(userAgent)) {\\n      return \\\"Android\\\";\\n    }\\n\\n    // iOS detection from: http://stackoverflow.com/a/9039885/177710\\n    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\\n      return \\\"iOS\\\";\\n    }\\n\\n    return \\\"unknown\\\";\\n  };\\n\\n  render() {\\n    const { project } = this.state;\\n\\n    if (!project || !project.pId) {\\n      return <div />;\\n    }\\n\\n    return (\\n      <div className=\\\"Page--GamePlayer\\\">\\n        <div className=\\\"GamePlayer\\\">\\n          <p\\n            className=\\\"GamePlayer__icon\\\"\\n            style={{ backgroundImage: `url(${project.icon})` }}\\n          />\\n          <p className=\\\"GamePlayer__name\\\">{project.name}</p>\\n          {this.os === \\\"iOS\\\" && (\\n            <div>\\n              <a\\n                className=\\\"GamePlayer__playBtn\\\"\\n                href={`https://wizschool.io/ios?pId=${this.pId}&liveTest=${this.isLiveTest}`}\\n              >\\n                <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE\\\" />\\n              </a>\\n              {!this.isLiveTest && (\\n                // <p className=\\\"GamePlayer__playweb\\\">\\n                <a\\n                  className=\\\"GamePlayer__playBtn\\\"\\n                  href={`${URL.GAME_SRC}detail/${this.pId}`}\\n                >\\n                  <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE_WEB\\\" />\\n                </a>\\n                // </p>\\n              )}\\n            </div>\\n          )}\\n          {this.os === \\\"Android\\\" && (\\n            <div>\\n              <a\\n                className=\\\"GamePlayer__playBtn\\\"\\n                href={`Intent://game#Intent;scheme=wizapp;package=io.wizschool.wizapp;S.pId=${this.pId};S.liveTest=${this.isLiveTest};end`}\\n              >\\n                <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE\\\" />\\n              </a>\\n              {!this.isLiveTest && (\\n                <a\\n                  className=\\\"GamePlayer__playBtn\\\"\\n                  href={`${URL.GAME_SRC}detail/${this.pId}`}\\n                >\\n                  <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE_WEB\\\" />\\n                </a>\\n              )}\\n            </div>\\n          )}\\n          {this.os === \\\"unknown\\\" && this.isLiveTest && (\\n            <a className=\\\"GamePlayer__playBtn\\\" href={project.url}>\\n              <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON\\\" />\\n            </a>\\n          )}\\n          {this.os === \\\"unknown\\\" && !this.isLiveTest && (\\n            <a\\n              className=\\\"GamePlayer__playBtn\\\"\\n              href={`${URL.GAME_SRC}detail/${this.pId}`}\\n            >\\n              <FormattedMessage id=\\\"ID_GAME_PLAYER_PLAY_BUTTON\\\" />\\n            </a>\\n          )}\\n          <p className=\\\"GamePlayer__copyright\\\">\\n            <FormattedMessage id=\\\"ID_GAME_PLAYER_COPYRIGHT\\\" />\\n          </p>\\n        </div>\\n      </div>\\n    );\\n  }\\n}\\nexport default connect(state => ({ email: state.userinfo.email }))(Container);\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1242:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a(43),s=a(2446);a(3072);t.default=function(e){return r.a.createElement(\"div\",{className:\"Page--GamePlayer\"},r.a.createElement(c.a,{store:i.default},r.a.createElement(s.default,e)))}},2446:function(e,t,a){\"use strict\";a.r(t);var n=a(15),r=a.n(n),c=a(23),i=a(4),s=a(6),o=a(8),l=a(14),p=a(7),u=a(0),m=a.n(u),d=a(11),_=a(103),h=a(1),E=a(21),f=a(2);function v(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var P=function(e){Object(o.a)(a,e);var t=v(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getMobileOperatingSystem=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(e)?\"Android\":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?\"iOS\":\"unknown\"},n.pId=n.props.match.params.pId,n.isLiveTest=\"/liveTest/:pId\"===n.props.match.path,n.os=n.getMobileOperatingSystem(),n.state={project:{}},n}return Object(s.a)(a,[{key:\"componentDidMount\",value:function(){var e=Object(c.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.pId,e.prev=1,!this.isLiveTest){e.next=9;break}return _.sendGAEvent(\"page\",\"/liveTest\",this.props.email),e.next=6,d.getDevelopingProjectInfo({pId:t}).then(function(e){return e.json()});case 6:a=e.sent,e.next=13;break;case 9:return _.sendGAEvent(\"page\",\"/wizapp\",this.props.email),e.next=12,d.getPublishedProject({pId:t}).then(function(e){return e.json()});case 12:a=e.sent;case 13:this.setState({project:a}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case\"end\":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.state.project;return e&&e.pId?m.a.createElement(\"div\",{className:\"Page--GamePlayer\"},m.a.createElement(\"div\",{className:\"GamePlayer\"},m.a.createElement(\"p\",{className:\"GamePlayer__icon\",style:{backgroundImage:\"url(\".concat(e.icon,\")\")}}),m.a.createElement(\"p\",{className:\"GamePlayer__name\"},e.name),\"iOS\"===this.os&&m.a.createElement(\"div\",null,m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:\"https://wizschool.io/ios?pId=\".concat(this.pId,\"&liveTest=\").concat(this.isLiveTest)},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE\"})),!this.isLiveTest&&m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:\"\".concat(h.URL.GAME_SRC,\"detail/\").concat(this.pId)},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE_WEB\"}))),\"Android\"===this.os&&m.a.createElement(\"div\",null,m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:\"Intent://game#Intent;scheme=wizapp;package=io.wizschool.wizapp;S.pId=\".concat(this.pId,\";S.liveTest=\").concat(this.isLiveTest,\";end\")},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE\"})),!this.isLiveTest&&m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:\"\".concat(h.URL.GAME_SRC,\"detail/\").concat(this.pId)},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON_MOBILE_WEB\"}))),\"unknown\"===this.os&&this.isLiveTest&&m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:e.url},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON\"})),\"unknown\"===this.os&&!this.isLiveTest&&m.a.createElement(\"a\",{className:\"GamePlayer__playBtn\",href:\"\".concat(h.URL.GAME_SRC,\"detail/\").concat(this.pId)},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_PLAY_BUTTON\"})),m.a.createElement(\"p\",{className:\"GamePlayer__copyright\"},m.a.createElement(f.a,{id:\"ID_GAME_PLAYER_COPYRIGHT\"})))):m.a.createElement(\"div\",null)}}]),a}(u.Component);t.default=Object(E.b)(function(e){return{email:e.userinfo.email}})(P)},3072:function(e,t,a){}}]);","extractedComments":[]}