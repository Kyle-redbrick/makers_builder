(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1257:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(21),c=a(43),r=a(2498),o=a(87);t.default=function(e){return s.a.createElement(i.a,{store:c.default},s.a.createElement(o.default,null,s.a.createElement(r.default,e)))}},2498:function(e,t,a){"use strict";a.r(t);var n=a(15),s=a.n(n),i=a(23),c=a(4),r=a(6),o=a(8),l=a(14),u=a(7),m=a(0),p=a.n(m),_=a(21),y=a(13),f=a(2),d=a(47),k=a(11),E=a(2499);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var s=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var T=function(e){Object(o.a)(a,e);var t=N(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.email?n.fetchTicketHistory():n.props.history.push("/")},n.componentDidUpdate=function(e){n.props.email&&!e.email&&n.onLogin(),n.props.email||n.onLogout()},n.onLogin=function(){n.fetchTicketHistory()},n.onLogout=function(){n.props.history.push("/")},n.fetchTicketHistory=Object(i.a)(s.a.mark(function e(){var t,a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e,t){return e.createdAt<t.createdAt?1:e.createdAt>t.createdAt?-1:0},e.next=3,k.apkHistory({userId:n.props.userinfo.id});case 3:return t=e.sent,e.next=6,t.json();case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:a.sort(i),n.setState({ticketHistories:a});case 11:case"end":return e.stop()}},e)})),n.onClickBuyTicket=function(){n.props.history.push("/payment")},n.onClickMyApkPage=function(){n.props.history.push("/myapk")},n.state={ticketHistories:[]},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this.onClickBuyTicket,t=this.onClickMyApkPage,a=this.state.ticketHistories;return p.a.createElement(E.default,{apkTicket:this.props.userinfo.apkTicket,onClickBuyTicket:e,ticketHistories:a,intl:this.props.intl,onClickMyApkPage:t})}}]),a}(m.Component);t.default=Object(_.b)(function(e){return{email:e.userinfo.email,userinfo:e.userinfo}},{updateUserInfo:d.updateUserInfo})(Object(f.e)(Object(y.i)(T)))},2499:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(46),c=a.n(i),r=a(2),o=(a(3134),a(304));t.default=Object(r.e)(function(e){var t=e.apkTicket,a=e.onClickBuyTicket,n=e.ticketHistories,i=e.intl,r=e.onClickMyApkPage;return s.a.createElement(o.default,null,s.a.createElement("div",{className:"Page--PaymentResult"},s.a.createElement("div",{className:"paymentResult"},s.a.createElement("div",{className:"paymentResult_header"},s.a.createElement("div",{className:"paymentResult_header_title"},i.formatMessage({id:"ID_PAYMENT_RESULT_TITLE"})),s.a.createElement("div",{className:"paymentResult_myApk",onClick:r},i.formatMessage({id:"ID_PAYMENT_APK_BTN"}))),s.a.createElement("section",null,s.a.createElement("div",{className:"paymentResult_header_ticketCount"},i.formatMessage({id:"ID_PAYMENT_APK_TICKET"})," ",s.a.createElement("span",null,t,i.formatMessage({id:"ID_PAYMENT_APK_UNIT"}))),s.a.createElement("button",{className:"paymentResult_header_buyTicketBtn",onClick:a},i.formatMessage({id:"ID_PAYMENT_APK_BUY_TICKET"}))),s.a.createElement("div",{className:"paymentResult_ticketHistories"},n.length?n.map(function(e,t){return"add"===e.type?s.a.createElement("div",{className:"paymentResult_ticketHistory",key:t},s.a.createElement("div",{className:"paymentResult_ticketHistory_type paymentResult_ticketHistory_type-add"},i.formatMessage({id:"ID_PAYMENT_APK_BUY_BTN"})),s.a.createElement("div",{className:"paymentResult_ticketHistory_title"},i.formatMessage({id:"ID_PAYMENT_APK_TICKET"})," ",s.a.createElement("span",null,e.tickets,i.formatMessage({id:"ID_PAYMENT_APK_UNIT"})),s.a.createElement("div",{className:"paymentResult_ticketHistory_date"},c()(e.createdAt).format("YYYY-MM-DD HH:mm"))),s.a.createElement("div",{class:"paymentResult_ticketHistory_right"},s.a.createElement("div",{className:"paymentResult_ticketHistory_amount"},i.formatNumber(e.amount)),s.a.createElement("div",{className:"paymentResult_ticketHistory_tickets"},"+ ".concat(e.tickets)))):s.a.createElement("div",{className:"paymentResult_ticketHistory",key:t},s.a.createElement("div",{className:"paymentResult_ticketHistory_type paymentResult_ticketHistory_type-use"},i.formatMessage({id:"ID_PAYMENT_APK_TICKET_USE_BTN"})),s.a.createElement("div",{className:"paymentResult_ticketHistory_title"},'"',e.appName,'" ',i.formatMessage({id:"ID_PAYMENT_APK_MAKE_BTN"}),s.a.createElement("div",{className:"paymentResult_ticketHistory_date"},c()(e.createdAt).format("YYYY-MM-DD HH:mm"))),s.a.createElement("div",{class:"paymentResult_ticketHistory_right"},s.a.createElement("div",{className:"paymentResult_ticketHistory_amount "},s.a.createElement("div",{className:"amount__".concat(e.type)})),s.a.createElement("div",{className:"paymentResult_ticketHistory_tickets"},"- 1")))}):s.a.createElement("div",{className:"history__not__exist"},i.formatMessage({id:"ID_PAYMENT_APK_DEFALT_MSG"}))))))})},3134:function(e,t,a){}}]);
//# sourceMappingURL=47.fc893199.chunk.js.map